(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc2bbaac"],{"0a12":function(t,a,e){"use strict";e("7ffe")},"0a5c":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],s=e("313e"),r=e.n(s),c=e("feb2");e("817d");var o=3e3,l={mixins:[c["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},radar:{radius:"66%",center:["50%","42%"],splitNumber:8,splitArea:{areaStyle:{color:"rgba(127,95,132,.3)",opacity:1,shadowBlur:45,shadowColor:"rgba(0,0,0,.5)",shadowOffsetX:0,shadowOffsetY:15}},indicator:[{name:"Sales",max:1e4},{name:"Administration",max:2e4},{name:"Information Techology",max:2e4},{name:"Customer Support",max:2e4},{name:"Development",max:2e4},{name:"Marketing",max:2e4}]},legend:{left:"center",bottom:"10",data:["Allocated Budget","Expected Spending","Actual Spending"]},series:[{type:"radar",symbolSize:0,areaStyle:{normal:{shadowBlur:13,shadowColor:"rgba(0,0,0,.2)",shadowOffsetX:0,shadowOffsetY:10,opacity:1}},data:[{value:[5e3,7e3,12e3,11e3,15e3,14e3],name:"Allocated Budget"},{value:[4e3,9e3,15e3,15e3,13e3,11e3],name:"Expected Spending"},{value:[5500,11e3,12e3,15e3,12e3,12e3],name:"Actual Spending"}],animationDuration:o}]})}}},u=l,d=e("2877"),h=Object(d["a"])(u,i,n,!1,null,null,null);a["default"]=h.exports},"1e4b":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-editor-container"},[e("div",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:statistics"],expression:"['output:invoice:statistics']"}],staticClass:"public-output-statistics"},[e("panel-group",{attrs:{statisticsData:t.statisticsData},on:{handleSetBarChartData:t.handleSetBarChartData}}),e("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[e("div",{staticClass:"search-form"},[e("label",[t._v("日期：")]),e("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:t.statisticsDateRange,callback:function(a){t.statisticsDateRange=a},expression:"statisticsDateRange"}}),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSearchStatistics}},[t._v("查询")])],1),e("bar-chart",{ref:"barChat",attrs:{chartData:t.currData}})],1)],1),e("div"),t.checkPermi(["output:invoice:statistics"])?t._e():e("div",{staticClass:"main-home"})])},n=[],s=(e("d3b7"),e("159b"),e("3ca3"),e("ddb0"),e("fbc4")),r=e("eab4"),c=e("0a5c"),o=e("d153"),l=e("9488"),u=e("45bd"),d=e("e350"),h={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},p={name:"Index",components:{PanelGroup:s["default"],LineChart:r["default"],RaddarChart:c["default"],PieChart:o["default"],BarChart:l["default"]},data:function(){return{lineChartData:h.newVisitis,statisticsData:{openCount:0,cancelCount:0,redCount:0,openAmount:0,cancelAmount:0,redAmount:0,errorAmount:0,errorCount:0,unOpenAmount:0,unOpenCount:0},openData:[],cancelData:[],redData:[],allData:[],currData:[],statisticsDateRange:[]}},created:function(){var t=this.$moment(new Date);this.watermark({watermark_txt:this.$store.state.user.nickName+":"+t.format("YYYY-MM-DD")}),this.statisticsDateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.$store.state.user.deptId&&this.handleSearchStatistics()},methods:{handleSetBarChartData:function(t){var a=this;this.currData=[],"open"==t?this.openData.forEach((function(t,e,i){a.$set(a.currData,e,t)})):"cancel"==t?this.cancelData.forEach((function(t,e,i){a.$set(a.currData,e,t)})):"red"==t&&this.redData.forEach((function(t,e,i){a.$set(a.currData,e,t)}))},checkPermi:function(t){return Object(d["a"])(t)},handleSearchStatistics:function(){var t=this,a={beginTime:this.statisticsDateRange[0],endTime:this.statisticsDateRange[1]},e={beginBizDate:this.statisticsDateRange[0],endBizDate:this.statisticsDateRange[1]};Promise.all([Object(u["b"])(a),Object(u["a"])(e)]).then((function(a){if(200==a[0].code){var e=a[0].data;for(var i in t.statisticsData)t.$set(t.statisticsData,i,e[i]);var n=a[0].data.details,s=["type"],r=["开票数量"],c=["作废数量"],o=["红冲数量"],l=["开票金额"],u=["作废金额"],d=["红冲金额"];n.forEach((function(t,a,e){s.push(t.typeDesc),r.push(t.openCount),c.push(t.cancelCount),o.push(t.redCount),l.push(t.openAmount),u.push(t.cancelAmount),d.push(t.redAmount)})),t.$set(t.openData,0,s),t.$set(t.openData,1,r),t.$set(t.openData,2,l),t.$set(t.cancelData,0,s),t.$set(t.cancelData,1,c),t.$set(t.cancelData,2,u),t.$set(t.redData,0,s),t.$set(t.redData,1,o),t.$set(t.redData,2,d),t.$set(t.currData,0,s),t.$set(t.currData,1,r),t.$set(t.currData,2,l),t.$set(t.currData,3,c),t.$set(t.currData,4,u),t.$set(t.currData,5,o),t.$set(t.currData,6,d),t.$refs.barChat.initChart()}if(200==a[1].code){var h=a[1].data;for(var p in h)t.$set(t.statisticsData,p,h[p])}})).catch((function(){}))}}},m=p,f=(e("31d3"),e("2877")),v=Object(f["a"])(m,i,n,!1,null,"079649e6",null);a["default"]=v.exports},"31d3":function(t,a,e){"use strict";e("afe6")},"45bd":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"a",(function(){return s}));var i=e("b775");function n(t){return Object(i["a"])({url:"/output/invoice/statistics",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/output/bill/statistics",method:"post",params:t})}},"7ffe":function(t,a,e){},9488:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],s=(e("d3b7"),e("159b"),e("313e")),r=e.n(s),c=e("feb2");e("817d");var o=6e3,l={mixins:[c["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Array,default:function(){return[]}}},data:function(){return{chart:null}},watch:{chartData:function(t,a){this.initChart()}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart&&this.chart.dispose();var t=[],a=0,e=0,i=0,n=0;this.chartData.forEach((function(s,r,c){0!=r&&(t.push({type:"bar",animationDuration:o,yAxisIndex:r%2==0?1:0,seriesLayoutBy:"row"}),r%2==0?s.forEach((function(t,a,e){0!=a&&(t>i&&(i=t),t<n&&(n=t))})):s.forEach((function(t,i,n){0!=i&&(t>a&&(a=t),t<e&&(e=t))})))})),n>=0&&e>=0?(n=0,e=0):(Math.abs(n)>Math.abs(i)?i=Math.abs(n):n=-1*Math.abs(i),Math.abs(e)>Math.abs(a)?a=Math.abs(e):e=-1*Math.abs(a)),this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({legend:{},dataset:{source:this.chartData},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){for(var a="<span>"+t[0].axisValue+"</span><br/>",e=0,i=t.length;e<i;e++){var n=t[e];-1!=n.seriesName.indexOf("数量")?a+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: '+n.color+'"></span>'+n.seriesName+"："+n.value[n.seriesIndex+1]+"份":-1!=n.seriesName.indexOf("金额")&&(a+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: '+n.color+'"></span>'+n.seriesName+"："+n.value[n.seriesIndex+1]+"元"),e<i-1&&(a+="<br/>")}return a}},grid:{top:30,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1},name:"数量/份",min:e,max:a},{type:"value",axisTick:{show:!1},name:"金额/元",min:n,max:i}],series:t},!0)}}},u=l,d=e("2877"),h=Object(d["a"])(u,i,n,!1,null,null,null);a["default"]=h.exports},afe6:function(t,a,e){},d153:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],s=e("313e"),r=e.n(s),c=e("feb2");e("817d");var o={mixins:[c["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["Industries","Technology","Forex","Gold","Forecasts"]},series:[{name:"WEEKLY WRITE ARTICLES",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:[{value:320,name:"Industries"},{value:240,name:"Technology"},{value:149,name:"Forex"},{value:100,name:"Gold"},{value:59,name:"Forecasts"}],animationEasing:"cubicInOut",animationDuration:2600}]})}}},l=o,u=e("2877"),d=Object(u["a"])(l,i,n,!1,null,null,null);a["default"]=d.exports},e350:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));e("d81d"),e("d3b7"),e("caad"),e("2532");var i=e("4360");function n(t){if(t&&t instanceof Array&&t.length>0){var a=i["a"].getters&&i["a"].getters.permissions,e=t,n=e.map((function(t,a,e){return t.split(":")})),s=a.some((function(t){for(var a=t.split(":"),e=0,i=n.length;e<i;e++)for(var s=n[e],r=0,c=a.length;r<c;r++)if(a[r]!=s[r]&&"*"!=a[r])return!1;return!0}));return!!s}return console.error("need roles! Like checkPermi=\"['system:user:add','system:user:edit']\""),!1}},eab4:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],s=e("313e"),r=e.n(s),c=e("feb2");e("817d");var o={mixins:[c["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.expectedData,e=t.actualData;this.chart.setOption({xAxis:{data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["expected","actual"]},series:[{name:"expected",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2}}},smooth:!0,type:"line",data:a,animationDuration:2800,animationEasing:"cubicInOut"},{name:"actual",smooth:!0,type:"line",itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2},areaStyle:{color:"#f3f8ff"}}},data:e,animationDuration:2800,animationEasing:"quadraticOut"}]})}}},l=o,u=e("2877"),d=Object(u["a"])(l,i,n,!1,null,null,null);a["default"]=d.exports},fbc4:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-group"},[e("div",{staticClass:"card-panel-col"},[e("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetBarChartData("error")}}},[t._m(0),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 异常数量 ")]),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.errorCount,duration:2600}})],1),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 异常金额 ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.statisticsData.errorAmount+"",placement:"bottom"}},[e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.errorAmount,decimals:t.errorAmountDecimal,duration:2600}})],1)],1)])]),e("div",{staticClass:"card-panel-col"},[e("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetBarChartData("unOpen")}}},[t._m(1),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 未开数量 ")]),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.unOpenCount,duration:2600}})],1),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 未开金额 ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.statisticsData.unOpenAmount+"",placement:"bottom"}},[e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.unOpenAmount,decimals:t.unOpenAmountDecimal,duration:2600}})],1)],1)])]),e("div",{staticClass:"card-panel-col"},[e("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetBarChartData("open")}}},[t._m(2),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 已开数量 ")]),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.openCount,duration:2600}})],1),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 已开金额 ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.statisticsData.openAmount+"",placement:"bottom"}},[e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.openAmount,decimals:t.openAmountDecimal,duration:2600}})],1)],1)])]),e("div",{staticClass:"card-panel-col"},[e("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetBarChartData("cancel")}}},[t._m(3),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 作废数量 ")]),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.cancelCount,duration:3e3}})],1),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 作废金额 ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.statisticsData.cancelAmount+"",placement:"bottom"}},[e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.cancelAmount,decimals:t.cancelAmountDecimal,duration:3e3}})],1)],1)])]),e("div",{staticClass:"card-panel-col"},[e("div",{staticClass:"card-panel",on:{click:function(a){return t.handleSetBarChartData("red")}}},[t._m(4),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 红冲数量 ")]),e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.redCount,duration:3200}})],1),e("div",{staticClass:"card-panel-description"},[e("div",{staticClass:"card-panel-text"},[t._v(" 红冲金额 ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.statisticsData.redAmount+"",placement:"bottom"}},[e("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.statisticsData.redAmount,decimals:t.redAmountDecimal,duration:3200}})],1)],1)])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-panel-icon-wrapper icon-error-red"},[e("i",{staticClass:"icon icon-yichang icon-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-panel-icon-wrapper icon-un-open"},[e("i",{staticClass:"icon icon-weikaipiao icon-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-panel-icon-wrapper icon-open"},[e("i",{staticClass:"icon icon-kaipiao icon-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-panel-icon-wrapper icon-cancel"},[e("i",{staticClass:"icon icon-zuofei icon-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-panel-icon-wrapper icon-red"},[e("i",{staticClass:"icon icon-hongchong icon-font"})])}],s=e("ec1b"),r=e.n(s),c={components:{CountTo:r.a},props:{statisticsData:{type:Object,default:function(){return{}}}},computed:{errorAmountDecimal:function(){var t=this.statisticsData.errorAmount;return(""+t).split(".").length>1?(""+t).split(".").pop().length:0},unOpenAmountDecimal:function(){var t=this.statisticsData.unOpenAmount;return(""+t).split(".").length>1?(""+t).split(".").pop().length:0},openAmountDecimal:function(){var t=this.statisticsData.openAmount;return(""+t).split(".").length>1?(""+t).split(".").pop().length:0},cancelAmountDecimal:function(){var t=this.statisticsData.cancelAmount;return(""+t).split(".").length>1?(""+t).split(".").pop().length:0},redAmountDecimal:function(){var t=this.statisticsData.redAmount;return(""+t).split(".").length>1?(""+t).split(".").pop().length:0}},methods:{handleSetBarChartData:function(t){"error"==t?this.$router.push({path:"output/errorbill"}):"unOpen"==t?this.$router.push({path:"output/bill"}):("open"==t?this.$router.push({name:"Invoice",params:{redFlag:"0",cancelFlag:"0"}}):"cancel"==t?this.$router.push({name:"Invoice",params:{cancelFlag:"1"}}):"red"==t&&this.$router.push({name:"Invoice",params:{redFlag:"1"}}),this.$emit("handleSetBarChartData",t))}}},o=c,l=(e("0a12"),e("2877")),u=Object(l["a"])(o,i,n,!1,null,"cdfe2c7e",null);a["default"]=u.exports},feb2:function(t,a,e){"use strict";e.r(a);var i=e("ed08");a["default"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},initListener:function(){var t=this;this.$_resizeHandler=Object(i["d"])((function(){t.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var t=this.chart;t&&t.resize()}}}}}]);