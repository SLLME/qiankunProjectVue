(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5d1d38c","chunk-26830038","chunk-cc2bbaac","chunk-81a2a40e","chunk-3f93175c","chunk-1537fc93","chunk-1ed7fd84","chunk-bf4b37f2","chunk-4c768efe","chunk-779f4447","chunk-d19c1a98","chunk-2d217e6d","chunk-2d0a2db2","chunk-2d0f012d","chunk-2d22973a","chunk-2d0da7cc","chunk-2d0b30b7","chunk-2d0e2366"],{"0013":function(e,t,a){"use strict";a("b5d2")},"0062":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"jobName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入任务名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.jobName,callback:function(t){e.$set(e.queryParams,"jobName",t)},expression:"queryParams.jobName"}})],1),a("el-form-item",{attrs:{label:"任务组名",prop:"jobGroup"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请任务组名",clearable:"",size:"small"},model:{value:e.queryParams.jobGroup,callback:function(t){e.$set(e.queryParams,"jobGroup",t)},expression:"queryParams.jobGroup"}},e._l(e.jobGroupOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"执行状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择执行状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"执行时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:remove"],expression:"['monitor:job:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:remove"],expression:"['monitor:job:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.handleClean}},[e._v("清空")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:export"],expression:"['monitor:job:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.jobLogList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"日志编号",width:"80",align:"center",prop:"jobLogId"}}),a("el-table-column",{attrs:{label:"任务名称",align:"center",prop:"jobName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"任务组名",align:"center",prop:"jobGroup",formatter:e.jobGroupFormat,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"调用目标字符串",align:"center",prop:"invokeTarget","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"日志信息",align:"center",prop:"jobMessage","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"执行状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"执行时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:query"],expression:"['monitor:job:query']"}],attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详细")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"调度日志详细",visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"日志序号："}},[e._v(e._s(e.form.jobLogId))]),a("el-form-item",{attrs:{label:"任务名称："}},[e._v(e._s(e.form.jobName))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务分组："}},[e._v(e._s(e.form.jobGroup))]),a("el-form-item",{attrs:{label:"执行时间："}},[e._v(e._s(e.form.createTime))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"调用方法："}},[e._v(e._s(e.form.invokeTarget))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"日志信息："}},[e._v(e._s(e.form.jobMessage))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"执行状态："}},[0==e.form.status?a("div",[e._v("正常")]):1==e.form.status?a("div",[e._v("失败")]):e._e()])],1),a("el-col",{attrs:{span:24}},[1==e.form.status?a("el-form-item",{attrs:{label:"异常信息："}},[e._v(e._s(e.form.exceptionInfo))]):e._e()],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("关 闭")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/monitor/jobLog/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/monitor/jobLog/"+e,method:"delete"})}function s(){return Object(o["a"])({url:"/monitor/jobLog/clean",method:"delete"})}function c(e){return Object(o["a"])({url:"/monitor/jobLog/export",method:"get",params:e})}var u={name:"JobLog",data:function(){return{loading:!0,ids:[],multiple:!0,showSearch:!0,total:0,jobLogList:[],open:!1,dateRange:[],form:{},statusOptions:[],jobGroupOptions:[],queryParams:{pageNum:1,pageSize:10,jobName:void 0,jobGroup:void 0,status:void 0}}},created:function(){var e=this;this.getList(),this.getDicts("sys_job_status").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_job_group").then((function(t){e.jobGroupOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.jobLogList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},jobGroupFormat:function(e,t){return this.selectDictLabel(this.jobGroupOptions,e.jobGroup)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.jobLogId})),this.multiple=!e.length},handleView:function(e){this.open=!0,this.form=e},handleDelete:function(e){var t=this,a=this.ids;this.$confirm('是否确认删除调度日志编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleClean:function(){var e=this;this.$confirm("是否确认清空所有调度日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s()})).then((function(){e.getList(),e.msgSuccess("清空成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有调度日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return c(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},d=u,p=a("2877"),h=Object(p["a"])(d,n,i,!1,null,null,null);t["default"]=h.exports},"00c6":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/bill/split",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/output/bill/splitByAmount",method:"post",data:e})}},"00ea":function(e,t,a){"use strict";a.r(t);var n=a("ed08");t["default"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},initListener:function(){var e=this;this.$_resizeHandler=Object(n["d"])((function(){e.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var e=this.chart;e&&e.resize()}}}},"00ff":function(e,t,a){"use strict";a("8cb8")},"0205":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"模块标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入模块标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"业务类型",prop:"business"}},[a("el-input",{attrs:{placeholder:"请输入业务类型",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.business,callback:function(t){e.$set(e.queryParams,"business",t)},expression:"queryParams.business"}})],1),a("el-form-item",{attrs:{label:"方法名称",prop:"method"}},[a("el-input",{attrs:{placeholder:"请输入方法名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.method,callback:function(t){e.$set(e.queryParams,"method",t)},expression:"queryParams.method"}})],1),a("el-form-item",{attrs:{label:"appKey",prop:"appKey"}},[a("el-input",{attrs:{placeholder:"请输入appKey",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.appKey,callback:function(t){e.$set(e.queryParams,"appKey",t)},expression:"queryParams.appKey"}})],1),a("el-form-item",{attrs:{label:"接口调用方",prop:"invoker"}},[a("el-input",{attrs:{placeholder:"请输入接口调用方",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invoker,callback:function(t){e.$set(e.queryParams,"invoker",t)},expression:"queryParams.invoker"}})],1),a("el-form-item",{attrs:{label:"请求参数",prop:"decryptContent"}},[a("el-input",{attrs:{placeholder:"请输入请求参数",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.decryptContent,callback:function(t){e.$set(e.queryParams,"decryptContent",t)},expression:"queryParams.decryptContent"}})],1),a("el-form-item",{attrs:{label:"返回参数",prop:"jsonResult"}},[a("el-input",{attrs:{placeholder:"请输入返回参数",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.jsonResult,callback:function(t){e.$set(e.queryParams,"jsonResult",t)},expression:"queryParams.jsonResult"}})],1),a("el-form-item",{attrs:{label:"操作状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择操作状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"操作时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:apilog:remove"],expression:"['system:apilog:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:apilog:export"],expression:"['system:apilog:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.apilogList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"模块标题",align:"center",prop:"title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"business","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"方法名称",align:"center",prop:"method","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"请求方式",align:"center",prop:"requestMethod","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"appKey",align:"center",prop:"appKey","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"调用方",align:"center",prop:"invoker","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"请求URL",align:"center",prop:"operUrl","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"主机地址",align:"center",prop:"operIp","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作地点",align:"center",prop:"operLocation","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作状态",align:"center",prop:"status",formatter:e.statusFormat,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"错误消息",align:"center",prop:"errorMsg","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作时间",align:"center",prop:"operTime",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.operTime,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详细")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"操作日志详细",visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作模块："}},[e._v(e._s(e.form.title)+" / "+e._s(e.form.business))]),a("el-form-item",{attrs:{label:"调用信息："}},[e._v(e._s(e.form.appKey)+" / "+e._s(e.form.operIp)+" / "+e._s(e.form.operLocation))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"请求地址："}},[e._v(e._s(e.form.operUrl))]),a("el-form-item",{attrs:{label:"请求方式："}},[e._v(e._s(e.form.requestMethod))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"操作方法："}},[e._v(e._s(e.form.method))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"请求参数："}},[e._v(e._s(e.form.decryptContent))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"返回参数："}},[e._v(e._s(e.form.jsonResult))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作状态："}},[0===e.form.status?a("div",[e._v("正常")]):1===e.form.status?a("div",[e._v("失败")]):e._e()])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作时间："}},[e._v(e._s(e.parseTime(e.form.operTime)))])],1),a("el-col",{attrs:{span:24}},[1===e.form.status?a("el-form-item",{attrs:{label:"异常信息："}},[e._v(e._s(e.form.errorMsg))]):e._e()],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("关 闭")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/system/apilog/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/apilog/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/apilog/"+e,method:"delete"})}function c(e){return Object(o["a"])({url:"/system/apilog/export",method:"get",params:e,responseType:"blob"})}var u=a("c38a"),d={name:"Apilog",components:{},data:function(){return{loading:!0,ids:[],dateRange:[],single:!0,multiple:!0,showSearch:!0,total:0,apilogList:[],title:"",open:!1,statusOptions:[],queryParams:{pageNum:1,pageSize:10,title:null,business:null,method:null,requestMethod:null,appKey:null,invoker:null,operUrl:null,operIp:null,operLocation:null,operParam:null,jsonResult:null,status:null,errorMsg:null,operTime:null,decryptContent:null},form:{},rules:{},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.dateRange=[this.$moment(new Date).startOf("month").format("YYYY-MM-DD"),this.$moment(new Date).endOf("month").format("YYYY-MM-DD")],this.getList(),this.getDicts("sys_common_status").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.apilogList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={operId:null,title:null,business:null,method:null,requestMethod:null,appKey:null,invoker:null,operUrl:null,operIp:null,operLocation:null,operParam:null,jsonResult:null,status:null,errorMsg:null,operTime:null,decryptContent:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.operId})),this.single=1!==e.length,this.multiple=!e.length},handleView:function(e){var t=this;this.form=e,l(e.operId).then((function(e){console.log(e.data.decryptContent),t.form.decryptContent=e.data.decryptContent,t.form.jsonResult=e.data.jsonResult,t.open=!0})),this.title="日志详情"},handleDelete:function(e){var t=this,a=e.operId||this.ids;this.$confirm('是否确认删除api调用日志编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有api调用日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(u["g"])(10,"导出中",e),c(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"api调用日志.xls",e)})).catch((function(){}))}}},p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},"02f2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"系统模块",prop:"title"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入系统模块",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"操作人员",prop:"operName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入操作人员",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.operName,callback:function(t){e.$set(e.queryParams,"operName",t)},expression:"queryParams.operName"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"businessType"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"操作类型",clearable:"",size:"small"},model:{value:e.queryParams.businessType,callback:function(t){e.$set(e.queryParams,"businessType",t)},expression:"queryParams.businessType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"操作状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"操作时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:operlog:remove"],expression:"['monitor:operlog:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:operlog:remove"],expression:"['monitor:operlog:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.handleClean}},[e._v("清空")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:export"],expression:"['system:config:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"日志编号",align:"center",prop:"operId"}}),a("el-table-column",{attrs:{label:"系统模块",align:"center",prop:"title"}}),a("el-table-column",{attrs:{label:"操作类型",align:"center",prop:"businessType",formatter:e.typeFormat}}),a("el-table-column",{attrs:{label:"请求方式",align:"center",prop:"requestMethod"}}),a("el-table-column",{attrs:{label:"操作人员",align:"center",prop:"operName"}}),a("el-table-column",{attrs:{label:"主机",align:"center",prop:"operIp",width:"130","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作地点",align:"center",prop:"operLocation","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"操作日期",align:"center",prop:"operTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.operTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:operlog:query"],expression:"['monitor:operlog:query']"}],attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.row,t.index)}}},[e._v("详细")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"操作日志详细",visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作模块："}},[e._v(e._s(e.form.title)+" / "+e._s(e.typeFormat(e.form)))]),a("el-form-item",{attrs:{label:"登录信息："}},[e._v(e._s(e.form.operName)+" / "+e._s(e.form.operIp)+" / "+e._s(e.form.operLocation))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"请求地址："}},[e._v(e._s(e.form.operUrl))]),a("el-form-item",{attrs:{label:"请求方式："}},[e._v(e._s(e.form.requestMethod))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"操作方法："}},[e._v(e._s(e.form.method))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"请求参数："}},[e._v(e._s(e.form.operParam))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"返回参数："}},[e._v(e._s(e.form.jsonResult))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作状态："}},[0===e.form.status?a("div",[e._v("正常")]):1===e.form.status?a("div",[e._v("失败")]):e._e()])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作时间："}},[e._v(e._s(e.parseTime(e.form.operTime)))])],1),a("el-col",{attrs:{span:24}},[1===e.form.status?a("el-form-item",{attrs:{label:"异常信息："}},[e._v(e._s(e.form.errorMsg))]):e._e()],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("关 闭")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/monitor/operlog/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/monitor/operlog/"+e,method:"delete"})}function s(){return Object(o["a"])({url:"/monitor/operlog/clean",method:"delete"})}function c(e){return Object(o["a"])({url:"/monitor/operlog/export",method:"get",params:e,responseType:"blob"})}var u=a("c38a"),d={name:"Operlog",components:{},data:function(){return{loading:!0,ids:[],multiple:!0,showSearch:!0,total:0,list:[],open:!1,typeOptions:[],statusOptions:[],dateRange:[],form:{},queryParams:{pageNum:1,pageSize:10,title:void 0,operName:void 0,businessType:void 0,status:void 0},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_oper_type").then((function(t){e.typeOptions=t.data})),this.getDicts("sys_common_status").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.list=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},typeFormat:function(e,t){return this.selectDictLabel(this.typeOptions,e.businessType)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.operId})),this.multiple=!e.length},handleView:function(e){this.open=!0,this.form=e},handleDelete:function(e){var t=this,a=e.operId||this.ids;this.$confirm('是否确认删除日志编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleClean:function(){var e=this;this.$confirm("是否确认清空所有操作日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s()})).then((function(){e.getList(),e.msgSuccess("清空成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有操作日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(u["g"])(10,"导出中",e),c(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"操作日志.xls",e)})).catch((function(){}))}}},p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},"03e7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.invoiceDetailLoading,expression:"invoiceDetailLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticClass:"form-input-textarea",staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode","string"===typeof t?t.trim():t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small",maxlength:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"客户编码",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入客户编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"红冲标志",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已打印",prop:"printedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已打印",clearable:"",size:"small"},model:{value:e.queryParams.printedFlag,callback:function(t){e.$set(e.queryParams,"printedFlag",t)},expression:"queryParams.printedFlag"}},e._l(e.printedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已推送",prop:"pushedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已推送",clearable:"",size:"small"},model:{value:e.queryParams.pushedFlag,callback:function(t){e.$set(e.queryParams,"pushedFlag",t)},expression:"queryParams.pushedFlag"}},e._l(e.pushedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"回写标志",prop:"rewriteFlag"}},[a("el-select",{attrs:{placeholder:"请选择回写标志",clearable:"",size:"small"},model:{value:e.queryParams.rewriteFlag,callback:function(t){e.$set(e.queryParams,"rewriteFlag",t)},expression:"queryParams.rewriteFlag"}},e._l(e.rewriteFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"签章标志",prop:"signFlag"}},[a("el-select",{attrs:{placeholder:"请选择签章标志",clearable:"",size:"small"},model:{value:e.queryParams.signFlag,callback:function(t){e.$set(e.queryParams,"signFlag",t)},expression:"queryParams.signFlag"}},e._l(e.signFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invoicer,callback:function(t){e.$set(e.queryParams,"invoicer","string"===typeof t?t.trim():t)},expression:"queryParams.invoicer"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.note,callback:function(t){e.$set(e.queryParams,"note","string"===typeof t?t.trim():t)},expression:"queryParams.note"}})],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:red"],expression:"['qdoutput:invoice:red']"}],attrs:{type:"danger",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.handleRed}},[e._v("红冲")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:powerRed"],expression:"['qdoutput:invoice:powerRed']"}],attrs:{type:"danger",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handlePowerRed}},[e._v("强制红冲")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:release"],expression:"['qdoutput:invoice:release']"}],attrs:{type:"primary",icon:"el-icon-scissors",size:"mini",disabled:e.multiple},on:{click:e.handleRelease}},[e._v("释放")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:flagRed"],expression:"['qdoutput:invoice:flagRed']"}],attrs:{type:"danger",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.flagRed}},[e._v("标记红冲")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:rewrite"],expression:"['qdoutput:invoice:rewrite']"}],attrs:{type:"info",icon:"el-icon-close",size:"mini",disabled:e.multiple},on:{click:e.rewrite}},[e._v("发票回写")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:export"],expression:"['qdoutput:invoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出主体")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:export"],expression:"['qdoutput:invoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:sign"],expression:"['qdoutput:invoice:sign']"}],attrs:{type:"danger",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.refreshSignature}},[e._v("刷新签章")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:download"],expression:"['qdoutput:invoice:download']"}],attrs:{type:"info",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.downloadInvoice}},[e._v("下载")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:push"],expression:"['qdoutput:invoice:push']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.emailPush}},[e._v("邮箱推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:pushSms"],expression:"['qdoutput:invoice:pushSms']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.messagePush}},[e._v("短信推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:pushCard"],expression:"['qdoutput:invoice:pushCard']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.cardPush}},[e._v("卡包推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini",disabled:e.single},on:{click:e.handleEditEmail}},[e._v("修改邮箱")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"invoiceMainTable",attrs:{data:e.invoiceList,height:e.tableHeight,"row-height":40,"use-virtual":"","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceInfo(n.row)}}},[e._v(e._s(n.row.billNo))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",["2"==n.row[t.prop]?[a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showReded(n.row)}}},[e._v(e._s(e.redFlagFormat(n.row)))])]:[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]],2):"cancelFlag"==t.prop?a("span",[e._v(e._s(e.cancelFlagFormat(n.row)))]):"printedFlag"==t.prop?a("span",[e._v(e._s(e.printedFlagFormat(n.row)))]):"pushedFlag"==t.prop?a("span",[e._v(e._s(e.pushedFlagFormat(n.row)))]):"rewriteFlag"==t.prop?a("span",[e._v(e._s(e.rewriteFlagFormat(n.row)))]):"signFlag"==t.prop?a("span",[e._v(e._s(e.signFlagFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"vouchFlag"==t.prop?a("span",[e._v(e._s(e.vouchFlagFormat(n.row)))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(e._s(e.detailFlagFormat(n.row)))]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"invNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo)+" ")]):"sourceInvCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.sourceInvCode)+" ")]):"sourceInvNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.sourceInvCode:"")+n.row.sourceInvNo)+" ")]):"pdfUrl"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"}},[a("span",{on:{click:function(t){return e.showPdf(n.row)}}},[e._v("查看")]),a("span",{staticStyle:{margin:"0 5px"}},[e._v("/")]),a("span",{on:{click:function(t){return e.downloadPdf(n.row)}}},[e._v("下载")])]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"标记红冲",visible:e.flagRedopen,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.flagRedopen=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagRedForm",attrs:{model:e.flagRedForm,rules:e.redRules,size:"medium","label-width":"110px"}},[["81","82"].includes(e.flagRedForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"蓝字发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{maxlength:12,readonly:""},model:{value:e.flagRedForm.sourceInvCode,callback:function(t){e.$set(e.flagRedForm,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"蓝字发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{maxlength:8,readonly:""},model:{value:e.flagRedForm.mergeSourceInvNo,callback:function(t){e.$set(e.flagRedForm,"mergeSourceInvNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.mergeSourceInvNo"}})],1)],1),["81","82"].includes(e.flagRedForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12,clearable:""},model:{value:e.flagRedForm.invCode,callback:function(t){e.$set(e.flagRedForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:["81","82"].includes(e.flagRedForm.invType)?20:8,clearable:""},model:{value:e.flagRedForm.invNo,callback:function(t){e.$set(e.flagRedForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagRedForm.invDate,callback:function(t){e.$set(e.flagRedForm,"invDate",t)},expression:"flagRedForm.invDate"}})],1)],1),"81"==e.flagRedForm.invType||"85"==e.flagRedForm.invType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{maxlength:24,clearable:""},model:{value:e.flagRedForm.negNativeNo,callback:function(t){e.$set(e.flagRedForm,"negNativeNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.negNativeNo"}})],1)],1):e._e(),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagRedForm.invoicer,callback:function(t){e.$set(e.flagRedForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagRedForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagRedForm.checkCode,callback:function(t){e.$set(e.flagRedForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.checkCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagRedForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagRedCancel}},[e._v("取 消")])],1)],1),a("q-d-bill-detail-show-modal",{ref:"showModal"}),a("q-d-red-invoice-info-select",{ref:"infoModal",on:{submitRedInfoP:e.submitRedInfoP}}),a("apply-red-invoice-edit-modal",{ref:"editModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("apply-detail-show-modal",{ref:"detailShowModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("el-dialog",{attrs:{title:"消息",visible:e.printSureOpen,width:"400px","append-to-body":"",id:"printSureModal"},on:{"update:visible":function(t){e.printSureOpen=t},close:e.printSureDialogClose}},[a("div",[a("p",[e._v("系统即将执行您的发票打印任务，请确认发票信息:")]),a("p",{staticClass:"print-modal-p"},[e._v("发票类型:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.printInvType))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票代码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.printInvCode))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票号码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.printInvNo))])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.printSure}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.printSureOpen=!1}}},[a("span",[e._v("取消")])])])]),a("el-dialog",{attrs:{title:"发票打印边距设置",visible:e.printSettingOpen,width:"300px","append-to-body":"",id:"printSettingModal"},on:{"update:visible":function(t){e.printSettingOpen=t}}},[a("div",[a("el-form",{ref:"printSettingForm",attrs:{model:e.printSettingForm,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"左端:"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.printSettingForm.startleft,callback:function(t){e.$set(e.printSettingForm,"startleft",t)},expression:"printSettingForm.startleft"}})],1),a("el-form-item",{attrs:{label:"顶端:"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.printSettingForm.starttop,callback:function(t){e.$set(e.printSettingForm,"starttop",t)},expression:"printSettingForm.starttop"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"primary"},on:{click:function(t){e.printSettingOpen=!1}}},[e._v("确 定")]),a("el-button",{staticClass:"el-button el-button--default el-button--small",on:{click:function(t){e.printSettingOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"消息",visible:e.newPrintSureOpen,width:"400px","append-to-body":"",id:"newPrintSureModal"},on:{"update:visible":function(t){e.newPrintSureOpen=t},close:e.printSureDialogClose}},[a("div",[a("p",[e._v("系统即将执行您的发票打印任务，请确认发票信息:")]),a("p",{staticClass:"print-modal-p"},[e._v("发票类型:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.newPrintInvType))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票代码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.newPrintInvCode))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票号码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.newPrintInvNo))])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.newPrintSure}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.newPrintSureOpen=!1}}},[a("span",[e._v("取消")])])])]),a("el-dialog",{attrs:{title:"列表",visible:e.redInvoiceOpen,width:"800px","append-to-body":"",id:"redInvoiceDialog"},on:{"update:visible":function(t){e.redInvoiceOpen=t}}},[a("el-table",{attrs:{data:e.redInvoiceList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"发票代码",prop:"invCode",align:"center"}}),a("el-table-column",{attrs:{label:"发票号码",prop:"invNo",align:"center"}}),a("el-table-column",{attrs:{label:"开票日期",prop:"invDate",align:"center"}}),a("el-table-column",{attrs:{label:"价税合计",prop:"totalAmount",align:"center"}})],1)],1),a("el-dialog",{attrs:{title:"pdf详情",visible:e.pdfDetailOpen,width:"60vw","append-to-body":"",id:"pdfDetailModal"},on:{"update:visible":function(t){e.pdfDetailOpen=t}}},[a("div",{staticStyle:{height:"60vh"}},[a("iframe",{attrs:{src:e.pdfModalUrl,width:"100%",scrolling:"auto",frameborder:"no",height:"100%"}})])]),a("el-dialog",{attrs:{title:"修改邮箱",visible:e.editEmail.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.editEmail,"open",t)}}},[a("el-form",{ref:"editEmailForm",attrs:{model:e.editEmail.form,rules:e.editEmail.rules,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.editEmail.form.buyEmail,callback:function(t){e.$set(e.editEmail.form,"buyEmail",t)},expression:"editEmail.form.buyEmail"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitEditEmail}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.editEmail.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("9016"),r=o["a"],l=(a("5ade"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"5fb76bd4",null);t["default"]=s.exports},"040c":function(e,t,a){"use strict";a("8202")},"046a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入字典名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.dictName,callback:function(t){e.$set(e.queryParams,"dictName",t)},expression:"queryParams.dictName"}})],1),a("el-form-item",{attrs:{label:"字典类型",prop:"dictType"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入字典类型",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.dictType,callback:function(t){e.$set(e.queryParams,"dictType",t)},expression:"queryParams.dictType"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"字典状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:add"],expression:"['system:dict:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:edit"],expression:"['system:dict:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:remove"],expression:"['system:dict:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:export"],expression:"['system:dict:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:remove"],expression:"['system:dict:remove']"}],attrs:{type:"danger",icon:"el-icon-refresh",size:"mini"},on:{click:e.handleClearCache}},[e._v("清理缓存")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.typeList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"字典编号",align:"center",prop:"dictId"}}),a("el-table-column",{attrs:{label:"字典名称",align:"center",prop:"dictName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"字典类型",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"link-type",attrs:{to:"/dict/type/data/"+t.row.dictId}},[a("span",[e._v(e._s(t.row.dictType))])])]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:edit"],expression:"['system:dict:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:remove"],expression:"['system:dict:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictName"}},[a("el-input",{attrs:{placeholder:"请输入字典名称"},model:{value:e.form.dictName,callback:function(t){e.$set(e.form,"dictName",t)},expression:"form.dictName"}})],1),a("el-form-item",{attrs:{label:"字典类型",prop:"dictType"}},[a("el-input",{attrs:{placeholder:"请输入字典类型"},model:{value:e.form.dictType,callback:function(t){e.$set(e.form,"dictType",t)},expression:"form.dictType"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("ed45")),r=a("c38a"),l={name:"Dict",components:{},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,typeList:[],title:"",open:!1,statusOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},form:{},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(o["f"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.typeList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={dictId:void 0,dictName:void 0,dictType:void 0,status:"1",remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加字典类型"},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.dictId})),this.single=1!=e.length,this.multiple=!e.length},handleUpdate:function(e){var t=this;this.reset();var a=e.dictId||this.ids;Object(o["e"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改字典类型"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.dictId?Object(o["h"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.dictId||this.ids;this.$confirm('是否确认删除字典编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有类型数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["g"])(10,"导出中",e),Object(o["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"字典数据.xls",e)})).catch((function(){}))},handleClearCache:function(){var e=this;Object(o["b"])().then((function(t){200===t.code&&e.msgSuccess("清理成功")}))}}},s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports},"0481":function(e,t,a){"use strict";a("18bb")},"0500":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/taxcode/list",method:"get",params:e})}function o(){return Object(n["a"])({url:"/output/taxcode/tree",method:"get"})}function r(e){return Object(n["a"])({url:"/output/taxcode/export",method:"post",data:e,responseType:"blob"})}},"0509":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.applyDetailShowDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleOpen}},[e._v("开具")]),e.summaryFlag||"0"==e.form.invType||"52"==e.form.invType?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBillDetailRow}},[e._v("增行")]),e.summaryFlag?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}},e._l(e.detailFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",[a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[["81","82"].includes(e.form.invType)?[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"蓝字发票号码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.mergeSourceInvCodeNo,callback:function(t){e.$set(e.form,"mergeSourceInvCodeNo","string"===typeof t?t.trim():t)},expression:"form.mergeSourceInvCodeNo"}})],1)],1)],1)]:[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"蓝字发票代码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"蓝字发票号码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1)],a("el-row",[a("el-col",{attrs:{span:21}},["0"==e.form.invType||"52"==e.form.invType?a("el-form-item",{attrs:{label:"红字申请单"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo","string"===typeof t?t.trim():t)},expression:"form.negNativeNo"}})],1):e._e()],1)],1)],2)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["51","52","81","82"].includes(e.form.invType),expression:"['51', '52', '81', '82'].includes(form.invType)"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["51","52","81","82"].includes(e.form.invType),expression:"['51', '52', '81', '82'].includes(form.invType)"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.summaryFlag?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.goodsName,placement:"top"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})],1):a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchGoodsName,disabled:e.summaryFlag},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,3107890338)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag&&(""==e.billDetailsData[0].rate||null==e.billDetailsData[0].rate),size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,3537148002)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag&&(""==e.billDetailsData[0].rate||null==e.billDetailsData[0].rate),size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.summaryFlag,size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:230,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier","string"===typeof t?t.trim():t)},expression:"form.cashier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker","string"===typeof t?t.trim():t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)]),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("25f0"),a("b0c0"),a("4de4"),a("ac1f"),a("5319"),a("b680"),a("c394")),l=a("c85c"),s=a("b9aa"),c=a("ad11"),u=a("e98e"),d=a("ed08"),p=a("c38a"),h={name:"applyDetailShowModal",components:{ChooseCode:s["default"]},props:{},data:function(){return{showProgress:!1,functionName:"开具中:",form:{billNo:"",invType:"",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",totalAmountWithoutTaxNoRed:"",negNativeNo:"",sourceInvNo:"",sourceInvCode:"",openData:"",billSource:"",billType:"",mergeInvCodeNo:"",mergeSourceInvCodeNo:"",specialTicket:""},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],openIdsArr:[],openRowsArr:[],originalTotalAmount:"",originalDetails:[],summaryFlag:!1,taxCodeSignRow:"",stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null}}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data)})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){},fillBillDialog:function(e){console.log("fillBillDialog"),this.openIdsArr.push(e.id),this.openRowsArr.push(e),e.mergeInvCodeNo=e.invCode+e.invNo,e.mergeSourceInvCodeNo=e.sourceInvCode+e.sourceInvNo,this.form=Object(d["e"])(e),delete this.form.details,this.fplxdesc=this.selectDictLabel(this.invTypeOptions,e.invType);var t=e.details;this.billDetailsData.length=0;for(var a=0;a<t.length;a++){var n=t[a];n.index=a,n.rate=null!=n.rate||void 0!=n.rate?this.specialRateFormalEcho(n):"",this.billDetailsData.push(n)}this.open=!0,this.title="红冲发票",this.getTaxNoSeller()},fillBillDialog2:function(e){var t=this;console.log("fillBillDialog2"),Object(r["s"])(e).then((function(e){if(200==e.code){var a=e.data;"1"==a.detailFlag?t.summaryFlag=!0:t.summaryFlag=!1,t.form.billNo=a.billNo,t.form.detailFlag=a.detailFlag,t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.invType=a.invType,t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.originalTotalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,t.form.totalAmountWithoutTaxNoRed=a.totalAmountWithoutTaxNoRed,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer,t.form.sourceInvNo=a.sourceInvNo,t.form.sourceInvCode=a.sourceInvCode,t.form.invDate=a.invDate,t.form.mergeInvCodeNo=a.invCode+a.invNo,t.form.mergeSourceInvCodeNo=a.sourceInvCode+a.sourceInvNo,t.form.billSource=a.billSource,t.form.billType=a.billType,t.form.specialTicket=a.specialTicket;var n=a.details;t.originalDetails=Object(d["e"])(n),t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=null!=o.rate||void 0!=o.rate?t.specialRateFormalEcho(o):"",t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag="1",t.open=!0,t.title="红冲发票"}else t.msgError(e.msg)}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(c["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(c["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(c["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].unit=e.unit,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){if(parseFloat(this.billDetailsData[e].number)>=0)return this.msgError("红字发票的商品数量不能为正数"),void(this.billDetailsData[e].number="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)}}else if(""!=n&&null!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if("-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&null!=a&&(""!=t&&null!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""!=t&&null!=t||""==i||null==i||(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&null!=n&&(""!=t&&null!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)):""!=t&&null!=t||""==o||null==o||(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if("-"!=this.billDetailsData[e].amountWithTax&&"-"!=this.billDetailsData[e].amountWithoutTax){if(parseFloat(this.billDetailsData[e].amountWithTax)>=0)return this.billDetailsData[e].amountWithTax="",void this.msgError("红字发票中商品金额不能大于0");if(parseFloat(this.billDetailsData[e].amountWithoutTax)>=0)return this.billDetailsData[e].amountWithoutTax="",void this.msgError("红字发票中商品金额不能大于0");var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t||null==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(a)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2)}this.judgeExistPNLine(e),this.useCalc()}},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):""):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"")),this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=!1,a=0;a<this.billDetailsData.length;a++)if(parseFloat(this.billDetailsData[a].amountWithTax)*parseFloat(this.billDetailsData[e].amountWithTax)<0){t=!0;break}t&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行"))},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)},applyDetailShowDialogClose:function(){this.summaryFlag=!1},handleOpen:function(){var e=this;Math.abs(parseFloat(this.form.totalAmountWithoutTax))>Math.abs(parseFloat(this.form.totalAmountWithoutTaxNoRed))?this.msgError("总不含税金额不能超过剩余不含税金额"):this.$confirm("是否确认开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.openValid1()})).then((function(){var t=e.form.invType,a={invType:t};Object(p["g"])(100,"加载中",e,!1),Object(u["b"])(a).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.stockInfoForm=t.data,e.stockInfoForm.fplx=e.selectDictLabel(e.invTypeOptions,e.stockInfoForm.fplx),e.stockInfoOpen=!0):e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("获取税盘库存信息")}))}))},sureStockInfo:function(){var e=this;Object(p["g"])(100,"开具中",this,!1);for(var t=Object(d["e"])(this.billDetailsData),a=0;a<t.length;a++)"免税"==t[a].rate?(t[a].rate=0,t[a].preferentialFlag="1",t[a].preferentialType="免税",t[a].taxZeroRate="1"):"不征税"==t[a].rate?(t[a].rate=0,t[a].preferentialFlag="1",t[a].preferentialType="不征税",t[a].taxZeroRate="2"):(t[a].preferentialFlag="0",t[a].preferentialType="",t[a].taxZeroRate="");this.form.details=t,Object(l["s"])(this.form).then((function(t){if(200==t.code){e.stockInfoOpen=!1,e.open=!1;var a=t.data,n={id:a.id,bizDate:a.bizDate};Object(l["p"])(n).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.msgSuccess(t.msg),e.$emit("updateInvoiceTable")):e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))}else e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openValid1:function(){var e=this,t=Object(l["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},validIsNumber:function(e){e.target.value=this.plusOrMinus(e.target.value)},addBillDetailRow:function(){if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},chooseCode:function(e){0==this.billDetailsData[e].discountFlag&&(this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e)},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},getTaxNoSeller:function(){var e=this;Object(l["m"])().then((function(t){var a=t.nickName,n=t.sellers;if(null!=n&&0!=n.length){for(var i,o=0;o<n.length;o++)if("1"==n[o].status){i=n[o];break}if(null==i)for(var r=0;r<n.length;r++)if(n[r].drawer==a){i=n[r];break}null==i&&(i=n[0]),e.form.cashier=i.payee,e.form.checker=i.checker,e.form.invoicer=i.drawer}}))}}},m=h,f=(a("33a6"),a("b8e8"),a("2877")),b=Object(f["a"])(m,n,i,!1,null,"05aeb8d5",null);t["default"]=b.exports},"0587":function(e,t,a){},"058c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.invoiceDetailLoading,expression:"invoiceDetailLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small",maxLength:12},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode","string"===typeof t?t.trim():t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small",maxLength:20},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticClass:"date-picker-517",staticStyle:{width:"517px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"红冲标志",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否作废",prop:"cancelFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否作废",clearable:"",size:"small"},model:{value:e.queryParams.cancelFlag,callback:function(t){e.$set(e.queryParams,"cancelFlag",t)},expression:"queryParams.cancelFlag"}},e._l(e.cancelFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invoicer,callback:function(t){e.$set(e.queryParams,"invoicer","string"===typeof t?t.trim():t)},expression:"queryParams.invoicer"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:function(t){e.moreSearch.open=!0}}},[e._v("高级搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:red"],expression:"['output:invoice:red']"}],attrs:{type:"danger",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.handleRed}},[e._v("红冲")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:cancel"],expression:"['output:invoice:cancel']"}],attrs:{type:"info",icon:"el-icon-close",size:"mini",disabled:e.multiple},on:{click:e.handleCancel}},[e._v("作废")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:release"],expression:"['output:invoice:release']"}],attrs:{type:"primary",icon:"el-icon-scissors",size:"mini",disabled:e.multiple},on:{click:e.handleRelease}},[e._v("释放")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:rewrite"],expression:"['output:invoice:rewrite']"}],attrs:{type:"info",icon:"el-icon-close",size:"mini",disabled:e.multiple},on:{click:e.rewrite}},[e._v("发票回写")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("导出")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:export"],expression:"['output:invoice:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleExport(t)}}},[e._v("导出主体")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:export"],expression:"['output:invoice:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleExportDetail(t)}}},[e._v("导出明细")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:print"],expression:"['output:invoice:print']"}],attrs:{type:"warning",icon:"el-icon-printer",size:"mini",disabled:e.multiple},on:{click:e.printInvoice}},[e._v("打印发票")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:print"],expression:"['output:invoice:print']"}],attrs:{type:"warning",icon:"el-icon-printer",size:"mini",disabled:e.multiple},on:{click:e.printDetail}},[e._v("打印清单")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:printSocket"],expression:"['output:invoice:printSocket']"}],attrs:{type:"warning",icon:"el-icon-printer",size:"mini",disabled:e.multiple},on:{click:e.newPrintInvoice}},[e._v("打印发票(Web)")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:printSocket"],expression:"['output:invoice:printSocket']"}],attrs:{type:"warning",icon:"el-icon-printer",size:"mini",disabled:e.multiple},on:{click:e.newPrintDetail}},[e._v("打印清单(Web)")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:repaire"],expression:"['output:invoice:repaire']"}],attrs:{type:"warning",icon:"el-icon-printer",size:"mini",disabled:e.multiple},on:{click:e.invoiceRepair}},[e._v("发票修复")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("更多")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:powerRed"],expression:"['output:invoice:powerRed']"}],attrs:{icon:"el-icon-thumb",disabled:e.multiple},nativeOn:{click:function(t){return e.handlePowerRed(t)}}},[e._v("强制红冲")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:flagRed"],expression:"['output:invoice:flagRed']"}],attrs:{icon:"el-icon-thumb",disabled:e.single},nativeOn:{click:function(t){return e.flagRed(t)}}},[e._v("标记红冲")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:powerCancel"],expression:"['output:invoice:powerCancel']"}],attrs:{icon:"el-icon-close",disabled:e.multiple},nativeOn:{click:function(t){return e.handlePowerCancel(t)}}},[e._v("强制作废")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:flagCancel"],expression:"['output:invoice:flagCancel']"}],attrs:{icon:"el-icon-close",disabled:e.multiple},nativeOn:{click:function(t){return e.flagCancel(t)}}},[e._v("标记作废")])],1)],1)],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"invoiceMainTable",attrs:{data:e.invoiceList,height:e.tableHeight,"row-height":40,"use-virtual":"","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceInfo(n.row)}}},[e._v(e._s(n.row.billNo))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row[t.prop],"{y}-{m}-{d}")))]):"redFlag"==t.prop?a("span",["2"==n.row[t.prop]?[a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showReded(n.row)}}},[e._v(e._s(e.redFlagFormat(n.row)))])]:[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]],2):"cancelFlag"==t.prop?a("span",[e._v(e._s(e.cancelFlagFormat(n.row)))]):"printedFlag"==t.prop?a("span",[e._v(e._s(e.printedFlagFormat(n.row)))]):"pushedFlag"==t.prop?a("span",[e._v(e._s(e.pushedFlagFormat(n.row)))]):"rewriteFlag"==t.prop?a("span",[e._v(e._s(e.rewriteFlagFormat(n.row)))]):"signFlag"==t.prop?a("span",[e._v(e._s(e.signFlagFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"vouchFlag"==t.prop?a("span",[e._v(e._s(e.vouchFlagFormat(n.row)))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(e._s(e.detailFlagFormat(n.row)))]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"invNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo)+" ")]):"sourceInvCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.sourceInvCode)+" ")]):"sourceInvNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.sourceInvCode:"")+n.row.sourceInvNo)+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("FptkShow",{ref:"showModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"标记红冲",visible:e.flagRedopen,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.flagRedopen=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagRedForm",attrs:{model:e.flagRedForm,rules:e.redRules,size:"medium","label-width":"110px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"蓝字发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{maxlength:12,readonly:""},model:{value:e.flagRedForm.sourceInvCode,callback:function(t){e.$set(e.flagRedForm,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"蓝字发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{maxlength:8,readonly:""},model:{value:e.flagRedForm.sourceInvNo,callback:function(t){e.$set(e.flagRedForm,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.sourceInvNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12,clearable:""},model:{value:e.flagRedForm.invCode,callback:function(t){e.$set(e.flagRedForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8,clearable:""},model:{value:e.flagRedForm.invNo,callback:function(t){e.$set(e.flagRedForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagRedForm.invDate,callback:function(t){e.$set(e.flagRedForm,"invDate",t)},expression:"flagRedForm.invDate"}})],1)],1),"0"==e.flagRedForm.invType||"52"==e.flagRedForm.invType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{maxlength:24,clearable:""},model:{value:e.flagRedForm.negNativeNo,callback:function(t){e.$set(e.flagRedForm,"negNativeNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.negNativeNo"}})],1)],1):e._e(),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},model:{value:e.flagRedForm.cashier,callback:function(t){e.$set(e.flagRedForm,"cashier","string"===typeof t?t.trim():t)},expression:"flagRedForm.cashier"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},model:{value:e.flagRedForm.checker,callback:function(t){e.$set(e.flagRedForm,"checker","string"===typeof t?t.trim():t)},expression:"flagRedForm.checker"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagRedForm.invoicer,callback:function(t){e.$set(e.flagRedForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagRedForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagRedForm.checkCode,callback:function(t){e.$set(e.flagRedForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.checkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密文",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密文",maxlength:200,clearable:""},model:{value:e.flagRedForm.pwdCode,callback:function(t){e.$set(e.flagRedForm,"pwdCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.pwdCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagRedForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagRedCancel}},[e._v("取 消")])],1)],1),a("red-invoice-info-select",{ref:"infoModal",on:{submitRedInfoP:e.submitRedInfoP}}),a("apply-red-invoice-edit-modal",{ref:"editModal"},[e._v(' @updateInvoiceTable="updateInvoiceTable" ')]),a("apply-detail-show-modal",{ref:"detailShowModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("el-dialog",{attrs:{title:"消息",visible:e.printSureOpen,width:"400px","append-to-body":"",id:"printSureModal"},on:{"update:visible":function(t){e.printSureOpen=t},close:e.printSureDialogClose}},[a("div",[a("p",[e._v("系统即将执行您的发票打印任务，请确认发票信息:")]),a("p",{staticClass:"print-modal-p"},[e._v("发票类型:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.printInvType))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票代码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.printInvCode))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票号码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.printInvNo))])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.printSure}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.printSureOpen=!1}}},[a("span",[e._v("取消")])])])]),a("el-dialog",{attrs:{title:"发票打印边距设置",visible:e.printSettingOpen,width:"300px","append-to-body":"",id:"printSettingModal"},on:{"update:visible":function(t){e.printSettingOpen=t}}},[a("div",[a("el-form",{ref:"printSettingForm",attrs:{model:e.printSettingForm,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"左端:"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.printSettingForm.startleft,callback:function(t){e.$set(e.printSettingForm,"startleft",t)},expression:"printSettingForm.startleft"}})],1),a("el-form-item",{attrs:{label:"顶端:"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.printSettingForm.starttop,callback:function(t){e.$set(e.printSettingForm,"starttop",t)},expression:"printSettingForm.starttop"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"primary"},on:{click:function(t){e.printSettingOpen=!1}}},[e._v("确 定")]),a("el-button",{staticClass:"el-button el-button--default el-button--small",on:{click:function(t){e.printSettingOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"消息",visible:e.newPrintSureOpen,width:"400px","append-to-body":"",id:"newPrintSureModal"},on:{"update:visible":function(t){e.newPrintSureOpen=t},close:e.printSureDialogClose}},[a("div",[a("p",[e._v("系统即将执行您的发票打印任务，请确认发票信息:")]),a("p",{staticClass:"print-modal-p"},[e._v("发票类型:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.newPrintInvType))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票代码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.newPrintInvCode))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票号码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.newPrintInvNo))])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.newPrintSure}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.newPrintSureOpen=!1}}},[a("span",[e._v("取消")])])])]),a("el-dialog",{attrs:{title:"列表",visible:e.redInvoiceOpen,width:"800px","append-to-body":"",id:"redInvoiceDialog"},on:{"update:visible":function(t){e.redInvoiceOpen=t}}},[a("el-table",{attrs:{data:e.redInvoiceList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"发票代码",prop:"invCode",align:"center"}}),a("el-table-column",{attrs:{label:"发票号码",prop:"invNo",align:"center"}}),a("el-table-column",{attrs:{label:"开票日期",prop:"invDate",align:"center"}}),a("el-table-column",{attrs:{label:"价税合计",prop:"totalAmount",align:"center"}})],1)],1),a("el-dialog",{attrs:{title:"查询",visible:e.moreSearch.open,width:"1000px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.moreSearch,"open",t)}}},[a("div",[a("el-form",{ref:"moreSearchForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"客户编码",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入客户编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"是否已打印",prop:"printedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已打印",clearable:"",size:"small"},model:{value:e.queryParams.printedFlag,callback:function(t){e.$set(e.queryParams,"printedFlag",t)},expression:"queryParams.printedFlag"}},e._l(e.printedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已推送",prop:"pushedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已推送",clearable:"",size:"small"},model:{value:e.queryParams.pushedFlag,callback:function(t){e.$set(e.queryParams,"pushedFlag",t)},expression:"queryParams.pushedFlag"}},e._l(e.pushedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"回写标志",prop:"rewriteFlag"}},[a("el-select",{attrs:{placeholder:"请选择回写标志",clearable:"",size:"small"},model:{value:e.queryParams.rewriteFlag,callback:function(t){e.$set(e.queryParams,"rewriteFlag",t)},expression:"queryParams.rewriteFlag"}},e._l(e.rewriteFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"签章标志",prop:"signFlag"}},[a("el-select",{attrs:{placeholder:"请选择签章标志",clearable:"",size:"small"},model:{value:e.queryParams.signFlag,callback:function(t){e.$set(e.queryParams,"signFlag",t)},expression:"queryParams.signFlag"}},e._l(e.signFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.note,callback:function(t){e.$set(e.queryParams,"note","string"===typeof t?t.trim():t)},expression:"queryParams.note"}})],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",{attrs:{label:"含税金额",prop:"totalAmountStart"}},[a("el-input",{attrs:{placeholder:"请输入含税金额",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.totalAmountStart,callback:function(t){e.$set(e.queryParams,"totalAmountStart","string"===typeof t?t.trim():t)},expression:"queryParams.totalAmountStart"}})],1),a("el-form-item",{attrs:{"label-width":"30px",label:"—",prop:"totalAmountEnd"}},[a("el-input",{attrs:{placeholder:"请输入含税金额",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.totalAmountEnd,callback:function(t){e.$set(e.queryParams,"totalAmountEnd","string"===typeof t?t.trim():t)},expression:"queryParams.totalAmountEnd"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.handleMoreSearch}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.moreSearch.open=!1}}},[a("span",[e._v("取消")])])])]),a("el-dialog",{attrs:{title:"数电作废",visible:e.qdCancelDialog.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.qdCancelDialog,"open",t)},close:e.qdCancelDialogClose}},[a("div",[a("el-form",{ref:"cancelDialogForm",attrs:{model:e.qdCancelDialog.form,rules:e.qdCancelDialog.rules,size:"small","label-width":"88px"}},[a("el-form-item",{attrs:{label:"作废原因:",prop:"reason"}},[a("el-input",{attrs:{clearable:""},model:{value:e.qdCancelDialog.form.reason,callback:function(t){e.$set(e.qdCancelDialog.form,"reason",t)},expression:"qdCancelDialog.form.reason"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"primary"},on:{click:e.qdCancelDialogSubmit}},[e._v("确 定")]),a("el-button",{staticClass:"el-button el-button--default el-button--small",on:{click:function(t){e.qdCancelDialog.open=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("c893"),r=o["a"],l=(a("87fc"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"4aa62667",null);t["default"]=s.exports},"059f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("u-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsCode,placement:"top",disabled:""==t.row.goodsCode||null==t.row.goodsCode}},[a("el-input",{attrs:{readonly:"",size:"small"},model:{value:t.row.goodsCode,callback:function(a){e.$set(t.row,"goodsCode",a)},expression:"scope.row.goodsCode"}})],1)]}}])}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsNameAbbreviation,placement:"top",disabled:""==t.row.goodsNameAbbreviation||null==t.row.goodsNameAbbreviation}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})],1)]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsName,placement:"top",disabled:""==t.row.goodsName||null==t.row.goodsName}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})],1)]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.taxTypeCode,placement:"top",disabled:""==t.row.taxTypeCode||null==t.row.taxTypeCode}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})],1)]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.standard,placement:"top",disabled:""==t.row.standard||null==t.row.standard}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})],1)]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.unit,placement:"top",disabled:""==t.row.unit||null==t.row.unit}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})],1)]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2188265427)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2075060434)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:230,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier","string"===typeof t?t.trim():t)},expression:"form.cashier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker","string"===typeof t?t.trim():t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("d3b7"),a("25f0"),a("c394")),r={name:"billDetailShowModal",props:{},data:function(){return{form:{billNo:"",invType:"2",detailFlag:"0",invCode:"",invNo:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}]}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a=e.data;t.form.billNo=a.billNo,t.form.invCode=a.invCode,t.form.invNo=a.invNo,t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.invType=a.invType,t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,a.detailFlag),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer;var n=a.details;t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=parseFloat(e.rate),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)}}},l=r,s=(a("3f45"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},"0610":function(e,t,a){"use strict";a("6368")},"07b6":function(e,t,a){},"084c":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getLodop}));var MainJS="CLodopfuncs.js",URL_WS1="ws://localhost:8000/"+MainJS,URL_WS2="ws://localhost:18000/"+MainJS,URL_HTTP1="http://localhost:8000/"+MainJS,URL_HTTP2="http://localhost:18000/"+MainJS,URL_HTTP3="https://localhost.lodop.net:8443/"+MainJS;function checkOrTryHttp(){if(window.getCLodop)return!0;var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("script"),a=document.createElement("script"),n=document.createElement("script");t.src=URL_HTTP1,a.src=URL_HTTP2,n.src=URL_HTTP3,t.onerror=function(t){"https:"!==window.location.protocol?e.insertBefore(a,e.firstChild):e.insertBefore(n,e.firstChild)},a.onerror=n.onerror=function(){var e=document.createElement("script");e.src="/"+MainJS,document.head.insertBefore(e,document.head.firstChild)},e.insertBefore(t,e.firstChild)}function getLodop(e,t){var a;try{return a=window.getCLodop(),a||"complete"===document.readyState?(t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e),a):void alert("C-Lodop没准备好，请稍后再试！")}catch(n){alert("getLodop出错:"+n)}}(function loadCLodop(){!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket);try{var WSK1=new WebSocket(URL_WS1);WSK1.onopen=function(e){setTimeout(checkOrTryHttp,200)},WSK1.onmessage=function(e){window.getCLodop||eval(e.data)},WSK1.onerror=function(e){var WSK2=new WebSocket(URL_WS2);WSK2.onopen=function(e){setTimeout(checkOrTryHttp,200)},WSK2.onmessage=function(e){window.getCLodop||eval(e.data)},WSK2.onerror=function(e){checkOrTryHttp()}}}catch(e){checkOrTryHttp()}})()},"086e":function(e,t,a){e.exports=a.p+"static/img/ofd_icon.6c338aae.png"},"0891":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{attrs:{placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.billNo,callback:function(t){e.$set(e.queryParams,"billNo",t)},expression:"queryParams.billNo"}})],1),a("el-form-item",{attrs:{label:"单据状态",prop:"billStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",size:"small"},model:{value:e.queryParams.billStatus,callback:function(t){e.$set(e.queryParams,"billStatus",t)},expression:"queryParams.billStatus"}},e._l(e.billStatusOptions,(function(t){return"1"!=t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-input",{attrs:{placeholder:"请输入单据来源",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}})],1),a("el-form-item",{attrs:{label:"单据日期",prop:"bizDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber",t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo",t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{attrs:{placeholder:"请输入身份证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.idCard,callback:function(t){e.$set(e.queryParams,"idCard",t)},expression:"queryParams.idCard"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:vehicle:add"],expression:"['output:vehicle:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:vehicle:edit"],expression:"['output:vehicle:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:vehicle:remove"],expression:"['output:vehicle:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:vehicle:export"],expression:"['output:vehicle:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleOpen}},[e._v("开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleFlag}},[e._v("标记为已开")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"vehicleMainTable",attrs:{data:e.vehicleList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(" "+e._s(n.row[t.prop])+" ")]):"billStatus"==t.prop?a("span",[e._v(" "+e._s(e.billStatusFormat(n.row))+" ")]):"bizDate"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}"))+" ")]):"rate"==t.prop?a("span",[e._v(" "+e._s(e.rateFormat(n.row))+" ")]):"redFlag"==t.prop?a("span",[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]):"autoOpen"==t.prop?a("span",[e._v(" "+e._s(e.autoOpenFormat(n.row))+" ")]):"billType"==t.prop?a("span",[e._v(" 机动车发票 ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:vehicle:edit"],expression:"['output:vehicle:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"0"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("vehicle-invoice-detail-edit-modal",{ref:"vehicleInvoiceDetailEditModal",on:{updateBillTable:e.updateBillTable}}),a("el-dialog",{attrs:{title:"标记为已开票",visible:e.flagOpen,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.flagOpen=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagForm",attrs:{model:e.flagForm,rules:e.flagRules,size:"medium","label-width":"110px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",maxlength:12,clearable:""},model:{value:e.flagForm.invCode,callback:function(t){e.$set(e.flagForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:8,clearable:""},model:{value:e.flagForm.invNo,callback:function(t){e.$set(e.flagForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagForm.invDate,callback:function(t){e.$set(e.flagForm,"invDate",t)},expression:"flagForm.invDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{readonly:""},model:{value:e.flagForm.totalAmountWithoutTax,callback:function(t){e.$set(e.flagForm,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"flagForm.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},model:{value:e.flagForm.cashier,callback:function(t){e.$set(e.flagForm,"cashier","string"===typeof t?t.trim():t)},expression:"flagForm.cashier"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},model:{value:e.flagForm.checker,callback:function(t){e.$set(e.flagForm,"checker","string"===typeof t?t.trim():t)},expression:"flagForm.checker"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagForm.invoicer,callback:function(t){e.$set(e.flagForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagForm.checkCode,callback:function(t){e.$set(e.flagForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagForm.checkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密文",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密文",maxlength:200,clearable:""},model:{value:e.flagForm.pwdCode,callback:function(t){e.$set(e.flagForm,"pwdCode","string"===typeof t?t.trim():t)},expression:"flagForm.pwdCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagCancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("d3b7"),a("3ca3"),a("ddb0"),a("4de4"),a("6f35")),l=a("c85c"),s=a("e98e"),c=a("7b93"),u=a("b526"),d=a("9e9f"),p=a("ed08"),h=a("c38a"),m={name:"Vehicle",components:{VehicleInvoiceDetailEditModal:d["default"],MyElProgress:c["a"],TotalRowTable:u["default"]},data:function(){return{mainLoading:!1,functionName:"",showProgress:!1,loadingTime:null,operationIndex:0,operationIdArr:[],operationRowArr:[],pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,vehicleList:[],title:"",open:!1,billSplitTypeOptions:[],billStatusOptions:[],applyStatusOptions:[],rateOptions:[],preferentialFlagOptions:[],redFlagOptions:[],autoOpenOptions:[],deleteFlagOptions:[],headTypeOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,billGuid:null,billNo:null,billType:null,billSplitType:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,idCard:null,sellName:null,sellTaxNo:null,sellAddr:null,sellTel:null,sellBank:null,sellAccount:null,note:null,vehicleType:null,goodsVersion:null,invoicer:null,rate:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,preferentialFlag:null,preferentialType:null,taxZeroRate:null,taxTypeCode:null,factoryNo:null,origin:null,eligibilityNo:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,importCertificateNumber:null,taxAuthorityCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null,taxAuthorityName:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,autoOpen:null,taxnoId:null,deleteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,allStatus:null},form:{},rules:{},sortParam:{column:"",columnOrder:""},columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:220,columnSort:1},{label:"单据状态",prop:"billStatus",align:"center",show:!0,width:220,columnSort:2},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:220,columnSort:3},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:220,columnSort:4},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:5},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:6},{label:"税率",prop:"rate",align:"center",show:!0,width:220,columnSort:6},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:6},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:220,columnSort:6},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"身份证号",prop:"sellName",align:"center",show:!0,width:220,columnSort:6},{label:"销方名称",prop:"civilAviationFund",align:"center",show:!0,width:220,columnSort:6},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:6},{label:"车辆类型",prop:"vehicleType",align:"center",show:!0,width:220,columnSort:6},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:220,columnSort:6},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:6},{label:"厂牌型号",prop:"factoryNo",align:"center",show:!0,width:220,columnSort:6},{label:"产地",prop:"origin",align:"center",show:!0,width:220,columnSort:6},{label:"合格证号",prop:"eligibilityNo",align:"center",show:!0,width:220,columnSort:6},{label:"商检单号",prop:"commodityInspectionNo",align:"center",show:!0,width:220,columnSort:6},{label:"发动机号",prop:"engineNo",align:"center",show:!0,width:220,columnSort:6},{label:"车辆识别代号/车架号码",prop:"vehicleIdentificationCode",align:"center",show:!0,width:220,columnSort:6},{label:"进口证明书号",prop:"importCertificateNumber",align:"center",show:!0,width:220,columnSort:6},{label:"主管税务机关代码",prop:"taxAuthorityCode",align:"center",show:!0,width:220,columnSort:6},{label:"完税凭证号码",prop:"completionVoucherNo",align:"center",show:!0,width:220,columnSort:6},{label:"吨位",prop:"tonnage",align:"center",show:!0,width:220,columnSort:6},{label:"限乘人数",prop:"limitedNumberOfPassengers",align:"center",show:!0,width:220,columnSort:6},{label:"主管税务机关名称",prop:"taxAuthorityName",align:"center",show:!0,width:220,columnSort:6},{label:"是否自动开具",prop:"autoOpen",align:"center",show:!0,width:220,columnSort:6},{label:"开票失败描述",prop:"vatFailDes",align:"center",show:!0,width:220,columnSort:6}],flagOpen:!1,flagForm:{},flagRules:{invCode:[{required:!0,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:["blur","change"]}],invNo:[{required:!0,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:"blur"}]},openInvoiceIndex:0,openIdsArr:[],openRowsArr:[],openResult:[],openValidIndex:0,openValidError:[],openEnd:!1,stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null}}},computed:{totalTableData:function(){var e=Object(p["e"])(this.rows);return 0==e.length&&(e=Object(p["e"])(this.vehicleList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getList(),this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("bill_status").then((function(t){e.billStatusOptions=t.data})),this.getDicts("approve_status").then((function(t){e.applyStatusOptions=t.data})),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.preferentialFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.redFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.autoOpenOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.deleteFlagOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(p["e"])(this.queryParams),Object(p["e"])(this.sortParam));Object(r["f"])(this.addDateRange(t,this.dateRange)).then((function(t){e.vehicleList=t.rows,e.total=t.total,e.loading=!1}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.billStatus)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},rateFormat:function(e,t){return this.selectDictLabel(this.rateOptions,e.rate)},preferentialFlagFormat:function(e,t){return this.selectDictLabel(this.preferentialFlagOptions,e.preferentialFlag)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},autoOpenFormat:function(e,t){return this.selectDictLabel(this.autoOpenOptions,e.autoOpen)},deleteFlagFormat:function(e,t){return this.selectDictLabel(this.deleteFlagOptions,e.deleteFlag)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,billSplitType:null,billStatus:null,applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,idCard:null,sellName:null,sellTaxNo:null,sellAddr:null,sellTel:null,sellBank:null,sellAccount:null,note:null,vehicleType:null,goodsVersion:null,invoicer:null,rate:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,preferentialFlag:null,preferentialType:null,taxZeroRate:null,taxTypeCode:null,factoryNo:null,origin:null,eligibilityNo:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,importCertificateNumber:null,taxAuthorityCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null,taxAuthorityName:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,autoOpen:null,taxnoId:null,deleteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,allStatus:"0"},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(p["e"])(e)},handleAdd:function(){this.$refs.vehicleInvoiceDetailEditModal.openDialog()},handleUpdate:function(e){var t=this,a=e.id||this.ids[0];this.mainLoading=!0,this.$refs.vehicleInvoiceDetailEditModal.fillBillDialog(a).then((function(){t.mainLoading=!1})).catch((function(){t.mainLoading=!1}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["i"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除机动车单据管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1],t.idsArr=this.ids,this.$confirm("是否确认导出机动车单据管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(h["g"])(100,"导出中",e,!0),Object(r["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"机动车单据.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.vehicleMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.vehicleList,"vehicleMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},updateBillTable:function(){this.getList()},handleOpen:function(e){var t=this,a=e.id||this.ids;this.openIdsArr=Object(p["e"])(a);var n=void 0!=e.id?e:this.rows;this.openRowsArr=Object(p["e"])(n),this.$confirm("是否确认开具所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){t.openValid2()})).catch((function(e){console.log("执行中断了")}))},checkBaseInfo:function(){var e=this;return Object(l["d"])().then((function(t){return 1001==t.code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){})),new Promise((function(){}))):2002==t.code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid1:function(){var e=this,t=Object(l["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid2:function(){var e=this;if(this.openValidIndex++,this.openValidIndex<=this.openIdsArr.length&&!this.openEnd)this.invoiceOwnValid(this.openValidIndex-1);else{var t=this.openIdsArr.filter((function(t,a){return-1==e.openValidError.indexOf(a)}));this.openEnd||(t.length>0?(this.openIdsArr=Object(p["e"])(t),this.openValidSuccess()):this.msgError("请重新选择发票")),this.openValidIndex=0,this.openValidError.length=0,this.openEnd=!1}},invoiceOwnValid:function(e){var t=this,a=this.openIdsArr[e],n={id:a,beginBizDate:this.dateRange[0]+" 00:00:00",endBizDate:this.dateRange[1]+" 23:59:59"},i=Object(r["j"])(n);return Promise.all([i]).then((function(a){"200"!=a[0].code?e==t.openIdsArr.length-1?t.$confirm(a[0].msg,"警告",{confirmButtonText:"完成",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.$confirm(a[0].msg+",是否继续开票?","警告",{confirmButtonText:"跳过",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.openValid2()}))},openValidSuccess:function(){var e=this;console.log("校验完成了!!!!");var t={invType:"12"};Object(s["b"])(t).then((function(t){200==t.code?(e.stockInfoForm=t.data,e.stockInfoForm.fplx="机动车",e.stockInfoOpen=!0):e.msgError(t.msg)})).catch((function(){e.msgError("获取税盘库存信息失败")}))},sureStockInfo:function(){var e=this;this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openInvoiceList:function(){var e=this;this.openInvoiceIndex++,1!=this.openInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.openInvoiceIndex/this.openIdsArr.length*100));var t=this.openRowsArr[this.openInvoiceIndex-1],a=!1;this.openInvoice(t).then((function(n){console.log("dang qian row:"+t),"200"==n.code?e.msgSuccess("第"+e.openInvoiceIndex+"张单据"+n.msg):1008==n.code?(a=!0,e.$confirm(n.msg+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"跳过",type:"warning",closeOnClickModal:!1}).then((function(){e.specialOpenInvoice(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){e.openInvoiceIndex>=e.openRowsArr.length?(e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))):e.msgError("第"+e.openInvoiceIndex+"张单据开具失败："+n.msg),a||(e.openResult.push(n),e.$refs.myProgress.setProgressNum(parseInt(e.openInvoiceIndex/e.openIdsArr.length*100)),e.openInvoiceIndex<e.openIdsArr.length?e.openInvoiceList():(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()))})).catch((function(t){console.log("这里是失败的"),e.openInvoiceIndex>=e.openIdsArr.length?(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.$confirm(t.message+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.openInvoiceList()})).catch((function(){e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()}))}))},openInvoice:function(e){var t=e.id,a={id:t,bizDate:e.bizDate};return Object(r["g"])(a)},specialOpenInvoice:function(e){var t=this,a={id:e.id,bizDate:e.bizDate,special:"1"};Object(r["g"])(a).then((function(e){"200"==e.code?t.msgSuccess("第"+t.openInvoiceIndex+"张单据"+e.msg):t.msgError("第"+t.openInvoiceIndex+"张单据开具失败："+e.msg),t.$refs.myProgress.setProgressNum(parseInt(t.openInvoiceIndex/t.openIdsArr.length*100)),t.openInvoiceIndex<t.openIdsArr.length?t.openInvoiceList():(t.showProgress=!1,t.$refs.myProgress.setProgressNum(0),t.openInvoiceIndex=0,t.openResult=[],t.openIdsArr=[],t.getList())}))},handleFlag:function(){var e=this.rows;this.flagForm.id=e[0].id,this.flagForm.bizDate=e[0].bizDate,this.flagForm.totalAmountWithoutTax=e[0].totalAmountWithoutTax,this.getTaxNoSeller()},getTaxNoSeller:function(){var e=this;Object(l["m"])().then((function(t){var a,n=t.sellers;if(null==n||0==n.length)return e.flagOpen=!0,void e.$nextTick((function(){e.$refs.flagForm.clearValidate()}));for(var i=0;i<n.length;i++)if("1"==n[i].status){a=n[i];break}null==a&&(a=n[0]),e.flagForm.cashier=a.payee,e.flagForm.checker=a.checker,e.flagForm.invoicer=a.drawer,e.flagOpen=!0,e.$nextTick((function(){e.$refs.flagForm.clearValidate()}))}))},flagCancel:function(){this.flagOpen=!1,this.flagReset()},flagReset:function(){this.flagForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,cashier:null,checker:null,invoicer:null,checkCode:null,pwdCode:null},this.resetForm("flagForm")},submitFlagForm:function(){var e=this;this.$refs["flagForm"].validate((function(t){t&&(Object(h["g"])(100,"标记中",e,!1),Object(r["d"])(e.flagForm).then((function(t){200===t.code?(e.msgSuccess("标记成功"),e.flagOpen=!1,e.getList()):e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)})))}))}}},f=m,b=a("2877"),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"0898":function(e,t,a){"use strict";a("491b")},"0927":function(e,t,a){},"095e":function(e,t,a){},"0a12":function(e,t,a){"use strict";a("7ffe")},"0a5c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=a("313e"),r=a.n(o),l=a("feb2");a("817d");var s=3e3,c={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},radar:{radius:"66%",center:["50%","42%"],splitNumber:8,splitArea:{areaStyle:{color:"rgba(127,95,132,.3)",opacity:1,shadowBlur:45,shadowColor:"rgba(0,0,0,.5)",shadowOffsetX:0,shadowOffsetY:15}},indicator:[{name:"Sales",max:1e4},{name:"Administration",max:2e4},{name:"Information Techology",max:2e4},{name:"Customer Support",max:2e4},{name:"Development",max:2e4},{name:"Marketing",max:2e4}]},legend:{left:"center",bottom:"10",data:["Allocated Budget","Expected Spending","Actual Spending"]},series:[{type:"radar",symbolSize:0,areaStyle:{normal:{shadowBlur:13,shadowColor:"rgba(0,0,0,.2)",shadowOffsetX:0,shadowOffsetY:10,opacity:1}},data:[{value:[5e3,7e3,12e3,11e3,15e3,14e3],name:"Allocated Budget"},{value:[4e3,9e3,15e3,15e3,13e3,11e3],name:"Expected Spending"},{value:[5500,11e3,12e3,15e3,12e3,12e3],name:"Actual Spending"}],animationDuration:s}]})}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},"0ca4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票日期",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate",t)},expression:"form.invDate"}})],1)],1)],1),["08xdp","10xdp"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.checkCode,callback:function(t){e.$set(e.form,"checkCode",t)},expression:"form.checkCode"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:8}},[["08xdp","10xdp"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:23}},[a("u-table",{ref:"invoiceDetailTable",staticStyle:{width:"100%"},attrs:{data:e.invoiceDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsName,placement:"top",disabled:""==t.row.goodsName||null==t.row.goodsName}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})],1)]}}])}),a("u-table-column",{attrs:{label:"规格型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.standard,placement:"top",disabled:""==t.row.standard||null==t.row.standard}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})],1)]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.unit,placement:"top",disabled:""==t.row.unit||null==t.row.unit}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})],1)]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2188265427)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2075060434)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:230,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1)],1)],1)])],1)},i=[],o=(a("caad"),a("b680"),a("d3b7"),a("25f0"),a("4c80")),r=a("606d"),l={name:"invoiceDetailShowModal",props:{isPersonal:{type:String,default:"0"}},data:function(){return{form:{blockChain:"0",buyAddrTel:"测试一下",buyBankAccount:"测试一下",buyName:"测试一下",buyTaxNo:"测试一下",cashier:"测试一下",checkCode:null,checkMsg:null,checked:null,checker:"测试一下",createBy:null,id:"1222222222222222222",invCode:"122222222222",invDate:"2021-03-06",invNo:"23568569",invType:"02",invoicer:"测试一下",machineNo:null,note:"测试一下",searchValue:null,sellAddrTel:"测试一下",sellBankAccount:"测试一下",sellName:"测试一下",sellTaxNo:"测试一下",sourceInvCode:null,sourceInvNo:null,state:null,totalAmount:null,totalAmountWithoutTax:23.5,totalMoneyUp:null,totalTaxAmount:null,updateBy:null,updateTime:"2021-03-15 15:36:26"},fplxdesc:"",hsbz:"0",invoiceDetailsData:[{index:0,goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[]}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return"1"==this.isPersonal?Object(r["f"])(e).then((function(e){var a=e.data;["08xdp","10xdp"].includes(a.invType)&&(a.invNo=a.invCode+a.invNo),t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form=a,t.invoiceDetailsData=a.details,t.open=!0,t.title="发票详情"})):Object(o["i"])(e).then((function(e){var a=e.data;["08xdp","10xdp"].includes(a.invType)&&(a.invNo=a.invCode+a.invNo),t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form=a,t.invoiceDetailsData=a.details,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)}}},s=l,c=(a("8163"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"92ec0de0",null);t["default"]=u.exports},"0cb2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticClass:"form-input-textarea",staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"单据日期",prop:"bizDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"拆分状态",prop:"billSplitType"}},[a("el-select",{attrs:{placeholder:"请选择拆分状态",clearable:"",size:"small"},model:{value:e.queryParams.billSplitType,callback:function(t){e.$set(e.queryParams,"billSplitType",t)},expression:"queryParams.billSplitType"}},e._l(e.billSplitTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据状态",prop:"billStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",size:"small"},model:{value:e.queryParams.billStatus,callback:function(t){e.$set(e.queryParams,"billStatus",t)},expression:"queryParams.billStatus"}},e._l(e.billStatusOptions,(function(t){return"1"!=t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"回写标志",prop:"rewriteFlag"}},[a("el-select",{attrs:{placeholder:"请选择回写标志",clearable:"",size:"small"},model:{value:e.queryParams.rewriteFlag,callback:function(t){e.$set(e.queryParams,"rewriteFlag",t)},expression:"queryParams.rewriteFlag"}},e._l(e.rewriteFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:edit"],expression:"['qdoutput:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:tbsb"],expression:"['qdoutput:bill:tbsb']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.synchClassCode}},[e._v("同步税编")]),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:tzwc"],expression:"['qdoutput:bill:tzwc']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.adjustError}},[e._v("调整误差")])],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:flagOpen"],expression:"['qdoutput:bill:flagOpen']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.flagOpen}},[e._v("标记已开")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:remove"],expression:"['qdoutput:bill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:sdzzd"],expression:"['qdoutput:bill:sdzzd']"}],attrs:{type:"info",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleHandOpen}},[e._v("转手动开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:open"],expression:"['qdoutput:bill:open']"}],attrs:{type:"info",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleOpen}},[e._v("直接开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:rewrite"],expression:"['qdoutput:bill:rewrite']"}],attrs:{type:"info",icon:"el-icon-close",size:"mini",disabled:e.multiple},on:{click:e.rewrite}},[e._v("单据回写")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:drdc"],expression:"['qdoutput:bill:drdc']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("导入导出")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:add"],expression:"['qdoutput:bill:add']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleImport(t)}}},[e._v("导入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:export"],expression:"['qdoutput:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleExport(t)}}},[e._v("导出主体")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:detailExport"],expression:"['qdoutput:bill:detailExport']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleDetailExport(t)}}},[e._v("导出明细")])],1)],1)],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module,colorExplain:"1"},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"billMainTable",attrs:{data:e.billList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"cell-click":e.cellClick,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{style:e.setFontColor(n.row),on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(e._s(n.row[t.prop]))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"rewriteFlag"==t.prop?a("span",[e._v(e._s(e.rewriteFlagFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"1"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"标记为已开票",visible:e.flagopen,"append-to-body":""},on:{"update:visible":function(t){e.flagopen=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagForm",attrs:{model:e.flagForm,rules:e.flagRules,size:"medium","label-width":"110px"}},[["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",maxlength:12,clearable:""},model:{value:e.flagForm.invCode,callback:function(t){e.$set(e.flagForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:20,clearable:""},model:{value:e.flagForm.invNo,callback:function(t){e.$set(e.flagForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开票日期"},model:{value:e.flagForm.invDate,callback:function(t){e.$set(e.flagForm,"invDate",t)},expression:"flagForm.invDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{readonly:""},model:{value:e.flagForm.totalAmountWithoutTax,callback:function(t){e.$set(e.flagForm,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"flagForm.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagForm.invoicer,callback:function(t){e.$set(e.flagForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagForm.checkCode,callback:function(t){e.$set(e.flagForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagForm.checkCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagCancel}},[e._v("取 消")])],1)],1),a("bill-detail-edit-modal",{ref:"billdetailcomp",on:{updateBillTable:e.updateBillTable,openBill:e.handleOpen}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("split-bill-modal",{ref:"splitModal",on:{updateBillTable:e.updateBillTable}}),a("merge-bill-modal",{ref:"mergeModal",on:{updateBillTable:e.updateBillTable}}),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"复制发票",visible:e.copyInvoiceOpen,width:"400px","append-to-body":"",id:"copyInvoiceModal"},on:{"update:visible":function(t){e.copyInvoiceOpen=t},close:e.copyInvoiceClose}},[a("div",[a("el-form",{ref:"copyInvoiceForm",attrs:{model:e.copyInvoiceForm,rules:e.copyInvoiceFormRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.copyInvoiceForm.invCode,callback:function(t){e.$set(e.copyInvoiceForm,"invCode",t)},expression:"copyInvoiceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8},model:{value:e.copyInvoiceForm.invNo,callback:function(t){e.$set(e.copyInvoiceForm,"invNo",t)},expression:"copyInvoiceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureCopyInvoice}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.copyInvoiceOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("13d5"),a("d81d"),a("4de4"),a("25f0"),a("ac1f"),a("5319"),a("498a"),a("5f87")),l=a("c85c"),s=a("7e6f"),c=a("c92e"),u=a("00c6"),d=(a("e98e"),a("c10b")),p=a("9694"),h=a("5509"),m=a("17ac"),f=a("b526"),b=a("c38a"),g=a("ed08"),v={name:"Qdauto",components:{BillDetailEditModal:p["default"],SplitBillModal:h["default"],MergeBillModal:m["default"],TotalRowTable:f["default"]},data:function(){return{updateInvTypeForm:{invType:"2"},updateInvTypeOpen:!1,mainLoading:!1,module:"bill",pageSizes:[],tableHeight:null,showProgress:!1,functionName:"开具中:",loading:!0,ids:[],rows:[],dateRange:[],single:!0,multiple:!0,many:!0,showSearch:!0,total:0,billList:[],billListPart:[],rollLoadTimes:0,title:"",open:!1,flagopen:!1,sapopen:!1,rewriteFlagOptions:[],billSplitTypeOptions:[],templateOptions:[],invTypeOptions:[],billStatusOptions:[],billSourceOptions:[],billTypeOptions:[],detailFlagOptions:[],applyStatusOptions:[],redFlagOptions:[],taxnoIdOptions:[],headTypeOptions:[],queryParams:{billNos:null,lzfgs:null,pageNum:1,pageSize:10,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null,rewriteFlag:null,tdyslxdm:"",shopNo:null},form:{},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(r["a"])()},url:"/prod-api/output/bill/importBillData"},flagForm:{},rules:{},openInvoiceIndex:0,openIdsArr:[],openRowsArr:[],openResult:[],openValidIndex:0,openValidError:[],openEnd:!1,flagRules:{invCode:[{required:!1,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:["blur","change"]}],invNo:[{required:!1,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^\d{20}$/,message:"请输入正确的发票号码",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:"blur"}]},operationIndex:0,operationIdArr:[],operationRowArr:[],columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:2},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:180,columnSort:3},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:180,columnSort:4},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:180,columnSort:5},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:6},{label:"拆分状态",prop:"billSplitType",align:"center",show:!0,width:180,columnSort:7},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:180,columnSort:8},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:9},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:10},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:200,columnSort:11}],stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null},sortParam:{column:"",columnOrder:""},copyInvoiceOpen:!1,copyInvoiceForm:{invCode:null,invNo:null},copyInvoiceFormRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},checkboxClick:!1,loadingTime:null}},computed:{totalTableData:function(){var e=Object(g["e"])(this.rows);return 0==e.length&&(e=Object(g["e"])(this.billList)),e},setFontColor:function(){return function(e){return"1"==e.allStatus?"color: violet;cursor: pointer;":"2"==e.allStatus?"color: blue;cursor: pointer;":"3"==e.allStatus?"color: red;cursor: pointer;":"4"==e.allStatus?"color: orange;cursor: pointer;":"5"==e.allStatus?"color: green;cursor: pointer;":"color: rgb(24, 144, 255);cursor: pointer;"}}},created:function(){var e=this;this.$route.params.billStatus&&(this.queryParams.billStatus=this.$route.params.billStatus);var t={module:this.module};Promise.all([Object(d["b"])(t),Object(d["a"])(t)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].columnSort=n,null==e.columnsArr[n].width&&("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:e.columnsArr[n].width=100)}}));var a=this.$moment(new Date);this.dateRange=[a.startOf("month").format("YYYY-MM-DD"),a.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data,e.getList()})),this.getDicts("bill_status").then((function(t){e.billStatusOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.redFlagOptions=t.data,e.taxnoIdOptions=t.data})),this.getDicts("approve_status").then((function(t){e.applyStatusOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.billMainTable.doLayout()}))},importTemplate:function(){var e=this.selectDictLabel(this.templateOptions,"billTemplate");document.location=e},getList:function(){var e=this;if(this.loading=!0,0!=this.dateRange.length){this.queryParams.autoOpen="1",this.queryParams.beginBizDate=this.dateRange[0]+" 00:00:00",this.queryParams.endBizDate=this.dateRange[1]+" 23:59:59";var t=Object.assign(Object(g["e"])(this.queryParams),Object(g["e"])(this.sortParam));t.invType?t.invTypes=new Array(t.invType):t.invTypes=this.invTypeOptions.reduce((function(e,t){return e.push(t.dictValue),e}),[]),Object(l["o"])(t).then((function(t){e.billList=t.rows;var a,n=Object(o["a"])(e.billList);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.$set(i,"showInput",!1)}}catch(r){n.e(r)}finally{n.f()}e.total=t.total,e.loading=!1}))}else this.msgError("请选择单据日期")},getTaxNoSeller:function(){var e=this;Object(s["b"])().then((function(t){var a,n=t.sellers;if(null==n||0==n.length)return e.flagopen=!0,void e.$nextTick((function(){e.$refs.flagForm.clearValidate()}));for(var i=0;i<n.length;i++)if("1"==n[i].status){a=n[i];break}null==a&&(a=n[0]),e.$set(e.flagForm,"cashier",a.payee),e.$set(e.flagForm,"checker",a.checker),e.$set(e.flagForm,"invoicer",a.drawer),e.flagopen=!0,e.$nextTick((function(){e.$refs.flagForm.clearValidate()}))}))},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.billStatus)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},taxnoIdFormat:function(e,t){return this.selectDictLabel(this.taxnoIdOptions,e.taxnoId)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},cancel:function(){this.open=!1,this.reset()},flagCancel:function(){this.flagopen=!1,this.flagReset()},flagReset:function(){this.flagForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,cashier:null,checker:null,invoicer:null,checkCode:null,pwdCode:null},this.resetForm("flagForm")},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},flagOpen:function(){var e=this.rows;this.$set(this.flagForm,"id",e[0].id),this.$set(this.flagForm,"bizDate",e[0].bizDate),this.$set(this.flagForm,"totalAmountWithoutTax",e[0].totalAmountWithoutTax),this.$set(this.flagForm,"invType",e[0].invType),this.getTaxNoSeller()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.many=e.length<2,this.rows=e)},handleAdd:function(){var e=this;this.reset(),this.$refs.billdetailcomp.billDialogShow(),this.$refs.billdetailcomp.editDialogTitle("1"),this.$nextTick((function(){e.$refs.billdetailcomp.getBillNo()}))},checkBaseInfo:function(){var e=this;return Object(s["a"])().then((function(t){return 1001==t.code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){})),new Promise((function(){}))):2002==t.code?(e.$confirm("全电账号需要刷脸验证，是否跳转到账号管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Account"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid1:function(){var e=this,t=Object(s["a"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.showProgress=!1,clearInterval(e.loadingTime),e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.showProgress=!1,clearInterval(e.loadingTime),e.$confirm("全电账号需要刷脸验证，是否跳转到账号管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Account"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid2:function(){var e=this;if(this.openValidIndex++,this.openValidIndex<=this.openIdsArr.length&&!this.openEnd)this.invoiceOwnValid(this.openValidIndex-1);else{var t=this.openIdsArr.filter((function(t,a){return-1==e.openValidError.indexOf(a)}));this.openEnd||(t.length>0?(this.openIdsArr=Object(g["e"])(t),this.openValidSuccess()):(this.msgError("请重新选择发票"),this.showProgress=!1,clearInterval(this.loadingTime))),this.openValidIndex=0,this.openValidError.length=0,this.openEnd=!1}},invoiceOwnValid:function(e){var t=this,a=this.openIdsArr[e],n={id:a,beginBizDate:this.dateRange[0]+" 00:00:00",endBizDate:this.dateRange[1]+" 23:59:59"},i=Object(l["z"])(n);return Promise.all([i]).then((function(a){"200"!=a[0].code?e==t.openIdsArr.length-1?t.$confirm(a[0].msg,"警告",{confirmButtonText:"完成",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.$confirm(a[0].msg+",是否继续开票?","警告",{confirmButtonText:"跳过",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.openValid2()}))},handleUpdate:function(e){var t=this;void 0==e.id&&(e=this.rows[0]),this.reset();var a=e.id||this.ids[0],n={id:a,bizDate:e.bizDate};this.mainLoading=!0,this.$refs.billdetailcomp.fillBillDialog(n).then((function(e){t.mainLoading=!1}))},adjustError:function(e){var t=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="误差调整中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationRowArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.adjustErrorLogic()},adjustErrorLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(l["b"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg):e.msgError("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(l["v"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(l["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagForm:function(){var e=this;this.$refs["flagForm"].validate((function(t){t&&(Object(b["g"])(100,"标记中",e,!1),Object(l["i"])(e.flagForm).then((function(t){200===t.code?(e.msgSuccess("标记成功"),e.flagopen=!1,e.getList()):e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)})))}))},synchClassCode:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否同步所选商品税收编码?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="同步中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["u"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否确认删除所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="删除中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["e"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleHandOpen:function(){var e=this;this.$confirm("是否转为手动开具?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=Object(g["e"])(e.dateRange);t[0]=t[0]+" 00:00:00",t[1]=t[1]+" 23:59:59";var a={ids:Object(g["e"])(e.ids),autoOpen:"0",dateRange:t};Object(l["x"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)}))}))},rewrite:function(){var e=this,t=this.rows,a=t[0];a.id,a.invDate;this.$confirm("您确定要回写当前单据吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.operationRowArr=Object(g["e"])(e.rows),e.functionName="回写中:",e.showProgress=!0,e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.rewriteLogic()})).catch((function(){}))},rewriteLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(s["d"])(t).then((function(t){"200"==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据回写失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()})).catch((function(t){e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()}))},handleOpen:function(e){var t=this,a=e.id||this.ids;"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a)),this.openIdsArr=Object(g["e"])(a);var n=void 0!=e.id?e:this.rows;"[object Array]"!=Object.prototype.toString.call(n)&&(n=new Array(n)),this.openRowsArr=Object(g["e"])(n),this.$confirm("是否确认开具所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(b["g"])(100,"加载中",t,!1),t.openValid1()})).then((function(){t.openValid2()})).catch((function(e){t.showProgress=!1,clearInterval(t.loadingTime),console.log("执行中断了")}))},openValidSuccess:function(){var e=this;console.log("校验完成了!!!!"),this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},sureStockInfo:function(){var e=this;this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openInvoiceList:function(){var e=this;this.openInvoiceIndex++,1!=this.openInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.openInvoiceIndex/this.openIdsArr.length*100));var t=this.openRowsArr[this.openInvoiceIndex-1],a=!1;this.openInvoice(t).then((function(n){console.log("dang qian row:"+t),"200"==n.code?e.msgSuccess("第"+e.openInvoiceIndex+"张单据"+n.msg):1008==n.code?(a=!0,e.$confirm(n.msg+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"跳过",type:"warning",closeOnClickModal:!1}).then((function(){e.specialOpenInvoice(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){e.openInvoiceIndex>=e.openRowsArr.length?(e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))):e.msgError("第"+e.openInvoiceIndex+"张单据开具失败："+n.msg),a||(e.openResult.push(n),e.$refs.myProgress.setProgressNum(parseInt(e.openInvoiceIndex/e.openIdsArr.length*100)),e.openInvoiceIndex<e.openIdsArr.length?e.openInvoiceList():(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()))})).catch((function(t){console.log("这里是失败的"),e.openInvoiceIndex>=e.openIdsArr.length?(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.$confirm(t.message+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.openInvoiceList()})).catch((function(){e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()}))}))},openInvoice:function(e){var t=e.id,a={id:t,bizDate:e.bizDate};return Object(s["c"])(a)},specialOpenInvoice:function(e){var t=this,a={id:e.id,bizDate:e.bizDate,special:"1"};Object(s["c"])(a).then((function(e){"200"==e.code?t.msgSuccess("第"+t.openInvoiceIndex+"张单据"+e.msg):t.msgError("第"+t.openInvoiceIndex+"张单据开具失败："+e.msg),t.$refs.myProgress.setProgressNum(parseInt(t.openInvoiceIndex/t.openIdsArr.length*100)),t.openInvoiceIndex<t.openIdsArr.length?t.openInvoiceList():(t.showProgress=!1,t.$refs.myProgress.setProgressNum(0),t.openInvoiceIndex=0,t.openResult=[],t.openIdsArr=[],t.getList())}))},handleImport:function(){this.upload.title="单据导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()},handleExport:function(){var e=this,t=Object(g["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["f"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理.xls",e)})).catch((function(){}))},handleDetailExport:function(){var e=this,t=Object(g["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["g"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.billMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.billList,"billMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.billList,"billMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},updateBillTable:function(){this.getList()},splitBill:function(){var e=this.rows[0];if("2"!=e.billSplitType){var t={id:e.id,bizDate:e.bizDate};this.$refs.splitModal.fillBillDialog(t)}else this.msgError("该单据已进行过合并，不能拆分")},revertBill:function(){var e=this;"0"!=this.rows[0].billSplitType?this.$confirm("是否确认还原所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIdArr=Object(g["e"])(e.ids),e.operationRowArr=Object(g["e"])(e.rows),e.showProgress=!0,e.functionName="还原中",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.revertBillLogic()})).catch((function(){})):this.msgError("该单据未进行过拆分合并，不能还原")},revertBillLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=this.dateRange;Object(l["r"])(t,a).then((function(t){200==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据还原失败:"+t.msg),e.operationIndex<e.operationIdArr.length?e.revertBillLogic():(e.renewOperationParam(),e.getList())})).catch((function(){e.renewOperationParam(),e.getList()}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},manualMergeBill:function(){for(var e=1;e<this.rows.length;e++)if(this.rows[0].invType!=this.rows[e].invType)return void this.msgError("合并时所选单据类型必须一致");for(var t=0;t<this.rows.length;t++)if("1"==this.rows[t].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var a=this.ids,n=this.dateRange;this.$refs.mergeModal.mergeDialogShow(a,n)},defaultMergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n={billIds:this.ids,bizDateRange:this.dateRange,goodCode:"1",withoutTaxAmoutLimit:"",noteDealType:"2",mergeType:"5",billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["c"])(n).then((function(t){clearInterval(e.loadingTime),e.showProgress=!1;var a=t.object;if(0!=a.length){for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}else e.msgError(t.msg)}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},ccdmergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n=this.ids,i=this.dateRange,o={billIds:n,bizDateRange:i,billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["a"])(o).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))},ccdmergeBillTs:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=!1,n=0;n<this.rows.length;n++)if("1"==this.rows[n].billSplitType){a=!0;break}if(a){var i=this.ids,o=this.dateRange,r={billIds:i,bizDateRange:o,billSplitType:"3"};this.dynamicLoadingShow(400,"特殊合并中"),Object(c["b"])(r).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))}else this.msgError("特殊合并时所选单据必须含有拆分状态")},splitByAmount:function(){for(var e=this,t=0;t<this.rows.length;t++)if("2"==this.rows[t].billSplitType)return void this.msgError("存在单据已进行过合并，不能拆分");this.operationIdArr=Object(g["e"])(this.ids),this.operationRowArr=Object(g["e"])(this.rows),this.showProgress=!0,this.functionName="拆分中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.splitByAmountLogic()},splitByAmountLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=null,n={id:t,roundingNumber:a,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(u["b"])(n).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.operationIndex<e.operationIdArr.length?e.splitByAmountLogic():(e.renewOperationParam(),e.getList())})).catch((function(t){e.renewOperationParam(),e.getList()}))},handleInvTypeUpdate:function(){this.updateInvTypeOpen=!0},submitUpdateInvType:function(){var e=this,t=Object(g["e"])(this.dateRange);t[0]=t[0]+" 00:00:00",t[1]=t[1]+" 23:59:59";var a={ids:Object(g["e"])(this.ids),dateRange:t,invType:this.updateInvTypeForm.invType};Object(l["y"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.updateInvTypeOpen=!1,e.getList()):e.msgError(t.msg)}))},updateInvTypeDialogClose:function(){this.updateInvTypeForm={invType:"2"}},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;return t.row_index=a,"1"==t.allStatus?"violet":"2"==t.allStatus?"deep-blue":"3"==t.allStatus?"red":"4"==t.allStatus?"orange":"5"==t.allStatus?"green":void 0},noteInputBlur:function(e){e.showInput=!1;var t={id:e.id,bizDate:e.bizDate,note:e.note};Object(l["w"])(t);for(var a=0;a<this.billList.length;a++)this.billList[a].showInput=!1},cellClick:function(e,t){"note"==t.property?0==e.showInput&&(e.showInput=!e.showInput):e.showInput=!1},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},copyInvoice:function(){var e=this;this.copyInvoiceOpen=!0,this.$nextTick((function(){e.$refs.copyInvoiceForm.clearValidate()}))},copyInvoiceClose:function(){this.copyInvoiceForm={invCode:null,invNo:null}},sureCopyInvoice:function(){var e=this;this.$refs.copyInvoiceForm.validate((function(t){if(t){var a={invCodeNo:e.copyInvoiceForm.invCode+"_"+e.copyInvoiceForm.invNo};e.$refs.billdetailcomp.fillBillDialogByInvCodeNo(a).then((function(t){0!=t&&(e.copyInvoiceOpen=!1)}))}}))},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},y=v,_=(a("ff3f"),a("2877")),x=Object(_["a"])(y,n,i,!1,null,"939cb6b8",null);t["default"]=x.exports},"0cb6":function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"k",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return h})),a.d(t,"h",(function(){return m}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/vehicleinvoice/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/vehicleinvoice/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/output/vehicleinvoice",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/output/vehicleinvoice",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/output/vehicleinvoice/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/output/vehicleinvoice/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/output/vehicleinvoice/checkEnableRed",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/output/vehicleinvoice/cancelInvoice",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/output/vehicleinvoice/flagCancel",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/output/vehicleinvoice/flagRed",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/output/vehicleinvoice/getNeedRedInfo",method:"get",params:e})}},"0d34":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:sign"],expression:"['output:invoice:sign']"}],attrs:{type:"primary",size:"mini"},on:{click:e.saveBill}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[["81","82"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.mergeInvNo,callback:function(t){e.$set(e.form,"mergeInvNo","string"===typeof t?t.trim():t)},expression:"form.mergeInvNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),["81","82"].includes(e.form.invType)?a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1)],1)],1):e._e()],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("el-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("el-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("el-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("el-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("el-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2015419679)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2295175998)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("el-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("el-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("caad"),a("b680"),a("d3b7"),a("25f0"),a("c394")),r=a("ed08"),l={name:"qdTicketDetailShowModal",props:{},data:function(){return{id:"",form:{billNo:"",invType:"2",detailFlag:"0",invCode:"",invNo:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[],rules:{buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a=e.data;t.form=Object(r["e"])(a),t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,a.detailFlag),["81","82"].includes(t.form.invType)?t.$set(t.form,"mergeInvNo",t.form.invCode+t.form.invNo):t.$set(t.form,"mergeInvNo",t.form.invNo);var n=a.details;t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)},saveBill:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={id:e.id,buyEmail:e.form.buyEmail,buyTelNo:e.form.buyTelNo};Object(o["J"])(a).then((function(t){200==t.code&&(e.msgSuccess(t.msg),e.open=!1,e.$emit("updateInvoiceTable"))}))}}))}}},s=l,c=(a("a64a"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports},"0fb5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.invoiceEnter?"红字申请单申请":e.title,visible:e.open,width:"1100px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.applyBill}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer,disabled:""},on:{select:e.handleSelectBuyer},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno,disabled:""},on:{select:e.handleSelectBuyer},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称","min-width":120,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,disabled:"",size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:"",size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,3804331396)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2046099838)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:"",size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{prop:"preferentialType",label:"优惠政策",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.preferentialTypeChange(t.row.index)}},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}},e._l(e.preferentialTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},on:{change:function(a){return e.taxAmountChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-info-item-special"},[a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedApply,callback:function(t){e.$set(e.redSelectInfo,"checkedApply",t)},expression:"redSelectInfo.checkedApply"}},[a("el-radio",{staticClass:"public-radio",attrs:{label:"1",disabled:""}},[e._v("一.购买方申请")]),a("el-radio",{staticClass:"public-radio",attrs:{label:"0",disabled:""}},[e._v("二.销售方申请")])],1)],1)])]),a("el-col",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","padding-left":"10px"},attrs:{span:16}},[a("div",{staticClass:"item-title"},[a("label",[e._v("对应蓝字专用发票密码区内打印的信息:")])]),a("el-row",[["81","82"].includes(e.redSelectInfo.invType)?e._e():a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:12,disabled:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:["81","82"].includes(e.redSelectInfo.invType)?22:11}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:8,disabled:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1),a("el-form-item",{attrs:{label:"发票种类"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small",disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),"1"!=e.redSelectInfo.checkedBuyer?a("el-form-item",{attrs:{label:"开票时间"}},[a("el-input",{staticStyle:{width:"91.6%"},attrs:{size:"mini",placeholder:"",maxlength:100,disabled:""},model:{value:e.form.sourceInvDate,callback:function(t){e.$set(e.form,"sourceInvDate",t)},expression:"form.sourceInvDate"}})],1):e._e()],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discoutLine,callback:function(t){e.$set(e.discountForm,"discoutLine",t)},expression:"discountForm.discoutLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("caad"),a("d3b7"),a("25f0"),a("b0c0"),a("4de4"),a("ac1f"),a("5319"),a("3ca3"),a("ddb0"),a("b680"),a("13d5"),a("a434"),a("c85c")),l=a("e1c9"),s=a("c0c7"),c=a("c394"),u=a("b9aa"),d=a("ad11"),p=a("ed08"),h=a("c38a"),m={name:"qdRedInvoiceEditModal",components:{ChooseCode:u["default"]},props:{},data:function(){return{selfAdaptionWidth:null,form:{invType:"81",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",totalAmountWithoutTaxNoRed:"",applyType:"0",sourceInvCode:"",sourceInvNo:"",sourceInvDate:"",billSource:"",billType:"",reason:""},invTypeOptions:[],hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"添加单据管理",isAdd:!0,taxCodeSignRow:0,invoiceTypeOptions:[],flagOptions:[],billDetailModalData:{billTitle:"",billNo:"",billType:"2",taxPlateIdSelect:"",billCode:"",billInvNo:"",billDate:"",billCheckCode:"",billBuyName:"",billBuyTaxNo:"",billBuyAddrTel:"",billBuyBankAccount:"",billSellName:"",snsrsbh:"",sdzdh:"",syhzh:"",billNote:"",detailDate:[{trChecked:!1,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],billTotalMoney:0,billTotalTaxMoney:0,billTotalMoneyWithTax:0,billTotalMoneyWithTaxUpperCase:"",skr:"",checker:"",kpr:""},taxRateOptions:[],preferentialTypeOptions:[],redInvoiceFlag:!1,buyerSearchData:[],goodsNameSearchData:[],goodsNameInputData:"",rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"收款人不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}]},discountOpen:!1,discountForm:{discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},buyerApplyType:[{value:"2",label:"1.已抵扣"},{value:"1",label:"2.未抵扣"}],redSelectInfo:{checkedApply:"0",checkedBuyer:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:"",reason:"",invType:"81"},invoiceEnter:!1,originalTotalAmount:"",originalDetails:[]}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("preferential_type").then((function(t){e.preferentialTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data,e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType)}))},mounted:function(){},methods:{billDialogShow:function(e){var t=this;this.open=!0,this.$nextTick((function(){t.$refs.form.clearValidate()})),["81","82"].includes(e.invType)?this.form.sourceInvNo=e.sourceInvCode+e.sourceInvNo:this.form.sourceInvNo=e.sourceInvNo,this.redSelectInfo=e,this.form.sourceInvCode=e.sourceInvCode,this.form.reason=e.reason,"0"==e.checkedApply?(this.form.applyType="0",this.getNeedRedInvoice(e)):this.form.applyType=e.checkedBuyer},getNeedRedInvoice:function(e){var t=this,a={invCode:e.sourceInvCode,invNo:e.sourceInvNo,invDate:e.sourceInvDate,invCodeNo:e.sourceInvCode+"_"+e.sourceInvNo};Object(c["s"])(a).then((function(a){if(console.log("applyRedInvoiceEditModal:getNeedRedInfo"),200==a.code){var n=a.data;for(var i in t.form)"applyType"!=i&&"sourceInvCode"!=i&&"sourceInvNo"!=i&&"reason"!=i&&(t.form[i]=n[i]);t.form.sourceInvDate=e.sourceInvDate,t.billDetailsData=n.details;for(var o=0;o<t.billDetailsData.length;o++)t.billDetailsData[o].rate=t.billDetailsData[o].rate.toString();t.getBillNo()}else t.msgError(a.msg)}))},editDialogTitle:function(e){this.title="1"==e?"开具红字发票信息表":"修改单据管理"},getSubjectInfo:function(){var e=this;Object(r["l"])().then((function(t){"1"==e.redSelectInfo.checkedApply?(e.form.buyTaxNo=t.data.nsrsbh,e.form.buyName=t.data.nsrmc):(e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc)}))},getTaxNoSeller:function(){var e=this;Object(r["m"])().then((function(t){var a=t.sellers;if(null!=a&&0!=a.length){for(var n,i=0;i<a.length;i++)if("1"==a[i].status){n=a[i];break}null==n&&(n=a[0]),e.form.cashier=n.payee,e.form.checker=n.checker,e.form.invoicer=n.drawer,"1"==e.redSelectInfo.checkedApply?(e.form.buyAddrTel=n.bankAddrTel,e.form.buyBankAccount=n.bankAccount):(e.form.sellAddrTel=n.bankAddrTel,e.form.sellBankAccount=n.bankAccount)}}))},billDialogClose:function(){this.form={billNo:"",invType:"81",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",applyType:"",sourceInvCode:"",sourceInvNo:"",reason:"",sourceInvDate:""},this.hsbz="0",this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}]},fillBillDialog:function(e){var t=this;return console.log("applyRedInvoiceEditModal"),Object(l["f"])(e.id).then((function(e){var a=e.data;t.form=e.data,"0"==a.applyType||null==a.applyType||void 0==a.applyType?t.redSelectInfo.checkedApply="0":(t.redSelectInfo.checkedApply="1",t.redSelectInfo.checkedBuyer=a.applyType);var n=a.details;t.billDetailsData.length=0;for(var i=0,o=0;o<n.length;o++){var r=n[o];r.index=o,r.rate=null!=r.rate||void 0!=r.rate?t.specialRateFormalEcho(r):"",t.billDetailsData.push(r),null!=r.goodsName&&r.goodsName.length>n[i].goodsName.length&&(i=o)}t.selfAdaptionWidth=Object(h["c"])("",t.billDetailsData[i].goodsName),t.open=!0,t.title="修改单据管理",t.isAdd=!1}))},fillBillDialog3:function(e){this.form=e,this.open=!0,this.title="红冲发票",this.getBillNo()},fillBillDialog2:function(e){var t=this;return Object(c["r"])(e).then((function(e){var a=e.data;t.form.billNo=a.billNo,t.form.invType=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=-1*parseFloat(a.totalAmount),t.originalTotalAmount=a.totalAmount,t.form.totalAmountWithoutTax=-1*parseFloat(a.totalAmountWithoutTax),t.form.totalTaxAmount=-1*parseFloat(a.totalTaxAmount),t.form.note=a.note,t.form.cashier=a.cashier,t.form.cashier=a.checker,t.form.invoicer=a.invoicer,t.form.sourceInvNo=a.invNo,t.form.sourceInvCode=a.invCode,t.form.invDate=a.invDate,t.form.billSource=a.billSource,t.form.billType=a.billType;var n=a.details;t.originalDetails=Object(p["e"])(n),t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=o.rate=null!=o.rate||void 0!=o.rate?t.specialRateFormalEcho(o):"",o.number=null!=o.number&&""!=o.number?-1*parseFloat(o.number):"",o.amountWithTax=-1*parseFloat(o.amountWithTax),o.amountWithoutTax=-1*parseFloat(o.amountWithoutTax),o.taxAmount=-1*parseFloat(o.taxAmount),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="红冲发票",t.getBillNo()}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(d["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){var e=this;this.form.createTime=this.$moment(new Date).format("yyyy-MM-DD HH:mm:ss"),this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),Object(s["h"])().then((function(t){var a=t.data.user;e.form.applyPerson=a.nickName})),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(h["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].units=e.units,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},applyBill:function(){var e=this;Math.abs(parseFloat(this.form.totalAmountWithoutTax))>Math.abs(parseFloat(this.form.totalAmountWithoutTaxNoRed))?this.msgError("总不含税金额不能超过剩余不含税金额"):this.openValid1().then((function(){console.log("校验完成"),e.$refs["form"].validate((function(t){if(t){for(var a=Object(p["e"])(e.billDetailsData),n=0;n<a.length;n++)"0"!=a[n].rate||a[n].preferentialType||(a[n].preferentialFlag="0",a[n].preferentialType="",a[n].preferentialNote="",a[n].taxZeroRate="3");e.form.details=a,e.isAdd?Object(l["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.invoiceEnter?e.$confirm("申请成功,是否需要跳转到红字页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/qdoutput/redbill")})).catch((function(){e.$emit("updateInvoiceTable")})):e.$emit("updateInvoiceTable")):e.msgError(t.msg)})):(console.log("===="+form),Object(l["l"])(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.$emit("updateInvoiceTable")):e.msgError(t.msg)}))),console.log(e.form)}}))}))},openValid1:function(){var e=this,t=Object(r["d"])();return Promise.all([t]).then((function(t){if(1001==t[0].code)return e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))}))},addBillDetailRow:function(){if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){if(parseFloat(this.billDetailsData[e].number)>=0)return this.msgError("红字发票的商品数量不能为正数"),void(this.billDetailsData[e].number="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a){if(Math.abs(parseFloat(this.originalDetails[e].amountWithTax))<Math.abs(parseFloat(a)*parseFloat(t)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].number="");this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2)}else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)}}else if(""!=n&&null!=n){if(Math.abs(parseFloat(this.originalDetails[e].amountWithoutTax))<Math.abs(parseFloat(n)*parseFloat(t)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].number="");this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100,this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2)}else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2)}this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if("-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a){if(Math.abs(parseFloat(this.originalDetails[e].amountWithTax))<Math.abs(parseFloat(t)*parseFloat(a)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].taxPrice="");""!=t&&null!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""!=t&&null!=t||""==i||null==i||(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(2))}}else if(""!=n&&null!=n){if(Math.abs(parseFloat(this.originalDetails[e].amountWithoutTax))<Math.abs(parseFloat(t)*parseFloat(n)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].withoutTaxPrice="");""!=t&&null!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2)):""!=t&&null!=t||""==o||null==o||(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(2))}this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if("-"!=this.billDetailsData[e].amountWithTax&&"-"!=this.billDetailsData[e].amountWithoutTax){if(parseFloat(this.billDetailsData[e].amountWithTax)>=0)return this.billDetailsData[e].amountWithTax="",void this.msgError("红字发票中商品金额不能大于0");if(parseFloat(this.billDetailsData[e].amountWithoutTax)>=0)return this.billDetailsData[e].amountWithoutTax="",void this.msgError("红字发票中商品金额不能大于0");if("0"==this.hsbz){if(Math.abs(parseFloat(this.billDetailsData[e].amountWithoutTax))>Math.abs(parseFloat(this.originalDetails[e].amountWithoutTax)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].amountWithoutTax="")}else if(Math.abs(parseFloat(this.billDetailsData[e].amountWithTax))>Math.abs(parseFloat(this.originalDetails[e].amountWithTax)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].amountWithTax="");var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2)}this.judgeExistPNLine(e),this.useCalc()}},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2):""):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2):"")),this.useCalc()},preferentialTypeChange:function(e){this.billDetailsData[e].preferentialType?(["免税","不征税"].includes(this.billDetailsData[e].preferentialType)&&(this.billDetailsData[e].rate="0","免税"==this.billDetailsData[e].preferentialType?this.billDetailsData[e].taxZeroRate="1":this.billDetailsData[e].taxZeroRate="2"),this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].taxZeroRate=""):(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].taxZeroRate=""),this.billDetailsData[e].preferentialNote=this.billDetailsData[e].preferentialType},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=!1,a=0;a<this.billDetailsData.length;a++)if(parseFloat(this.billDetailsData[a].amountWithTax)*parseFloat(this.billDetailsData[e].amountWithTax)<0){t=!0;break}t&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行"))},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discoutLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(p["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.discountFlag="1",a.standard="",a.units="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1}else this.msgError("请输入折扣金额或折扣率")},sourceChange:function(){var e=this;if(""!=this.form.sourceInvNo&&""!=this.form.sourceInvCode){var t={sourceInvNo:this.form.sourceInvNo,sourceInvCode:this.form.sourceInvCode};gteXXXInfo(t).then((function(t){0!=t.data.length||e.msgError(t.msg)}))}},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){this.deductOpen=!1},validIsNumber:function(e){e.target.value=this.plusOrMinus(e.target.value)},invoiceApplicationForm:function(){this.invoiceEnter=!0}}},f=m,b=(a("54fbe"),a("2877")),g=Object(b["a"])(f,n,i,!1,null,"4a0e43b0",null);t["default"]=g.exports},1:function(e,t){},1055:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"new-version-bill-manger-modal",attrs:{title:e.baseDialog.title,visible:e.baseDialog.open,"append-to-body":"",id:"newVersionBillManagerModal","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.baseDialog,"open",t)}}},[a("div",{staticClass:"fptk_wrapper"},[["51","52","81","82"].includes(e.form.invType)?a("div",{staticClass:"fptk_operation"},[a("div",{staticClass:"fptk_operation_right"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.savePushEmail}},[e._v("保存")])],1)]):e._e(),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("div",{staticClass:"fptk_wrapper_body_show"},[a("div",{staticClass:"fptk_wrapper_circle fptk_wrapper_left"},e._l(e.circleNum,(function(e){return a("div",{staticClass:"fptk_circle"})})),0),a("div",{staticClass:"fptk_wrapper_middle"},["1"==e.form.cancelFlag?a("div",{staticClass:"fptk_sign fptk_sign_zf"},[e._v("作废票")]):e._e(),a("div",{staticClass:"fptk_wrapper_content_top"},[a("div",{staticClass:"fptk_wrapper_content_top_left"}),a("div",{staticClass:"top_invoice_title"},[e._v(" "+e._s(e.fplxdesc)+e._s("("+(e.redInvoiceFlag?"红票":"蓝票")+")")+" ")]),a("div",{staticClass:"fptk_wrapper_content_top_right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.hsbzChange},model:{value:e.hsbzLabel,callback:function(t){e.hsbzLabel=t},expression:"hsbzLabel"}},[a("el-radio-button",{attrs:{label:"含税"}}),a("el-radio-button",{attrs:{label:"不含税"}})],1)],1)]),a("div",{staticClass:"fptk_hz_info input1"},[a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("单据编号：")]),e._v(" "+e._s(e.form.billNo)+" ")]),"1"!=e.form.redFlag||["81","82"].includes(e.form.invType)?e._e():a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("蓝字发票代码：")]),e._v(" "+e._s(e.form.sourceInvCode)+" ")]),"1"==e.form.redFlag?a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("蓝字发票号码：")]),e._v(" "+e._s(e.form.sourceInvNo)+" ")]):e._e(),"1"==e.form.redFlag&&"0"==e.form.invType?a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("红字申请单：")]),e._v(" "+e._s(e.form.negNativeNo)+" ")]):e._e()]),a("div",{staticClass:"fptk_lz_info input1"},[a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("开票日期：")]),e._v(" "+e._s(e.form.invDate)+" ")]),["81","82"].includes(e.form.invType)?e._e():a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("发票代码：")]),e._v(" "+e._s(e.form.invCode)+" ")]),a("div",[a("span",{staticClass:"el-form-item__label_self"},[e._v("发票号码：")]),e._v(" "+e._s(e.form.invNo)+" ")])]),a("div",{staticClass:"fptk_wrapper_content"},[a("div",{staticClass:"fptk_wrapper_content_1 buyer input1"},[a("div",{staticClass:"first"},[e._v("购买方")]),a("div",{staticClass:"second"},[a("div",{staticClass:"second_item cell_item"},[e._v("名称")]),a("div",{staticClass:"second_item cell_item"},[e._v("纳税人识别号")]),a("div",{staticClass:"second_item cell_item"},[e._v("地址、电话")]),a("div",{staticClass:"second_item cell_item"},[e._v("开户行及账号")])]),a("div",{staticClass:"third"},[a("div",{staticClass:"cell_item"},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1),a("div",{staticClass:"cell_item"},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方地址",maxlength:100,clearable:"",readonly:""},model:{value:e.form.buyAddr,callback:function(t){e.$set(e.form,"buyAddr",t)},expression:"form.buyAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyTel"}},[a("el-input",{attrs:{placeholder:"请输入购方电话",clearable:"",readonly:""},model:{value:e.form.buyTel,callback:function(t){e.$set(e.form,"buyTel",t)},expression:"form.buyTel"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:"",readonly:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)]],2),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyBank"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行",maxlength:100,clearable:"",readonly:""},model:{value:e.form.buyBank,callback:function(t){e.$set(e.form,"buyBank",t)},expression:"form.buyBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方账号",maxlength:100,clearable:"",readonly:""},model:{value:e.form.buyAccount,callback:function(t){e.$set(e.form,"buyAccount",t)},expression:"form.buyAccount"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行及账号",maxlength:100,clearable:"",readonly:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)]],2)]),a("div",{staticClass:"fourth"},[e._v("密码区")]),a("div",{staticClass:"fifth"},[a("div",{staticClass:"fifth_item"},[e._v("无需填写")])])]),a("div",{staticClass:"fptk_wrapper_content_2"},[a("u-table",{ref:"billDetailTable",attrs:{data:e.billDetailsData,"min-height":"120","use-virtual":"","row-height":38}},[a("u-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"项目名称",width:"250"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("项目名称 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{size:"mini",readonly:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"单价(不含税)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2255093945)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"单价(含税)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"金额(不含税)",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("金额(不含税) ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",size:"mini"},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,3850149704)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"金额(含税)",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("金额(含税) ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",size:"mini"},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{label:"税率",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("税率 ")]}},{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",readonly:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",prop:"taxAmount",width:"120"}}),a("u-table-column",{attrs:{label:"是否优惠",prop:"preferentialFlag",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",readonly:"",placeholder:""},model:{value:t.row.preferentialFlag,callback:function(a){e.$set(t.row,"preferentialFlag",a)},expression:"scope.row.preferentialFlag"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)]}}])}),a("u-table-column",{attrs:{label:"优惠内容",prop:"preferentialType",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}})]}}])}),a("u-table-column",{attrs:{label:"零税率标识",prop:"taxZeroRate",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",readonly:"",placeholder:""},model:{value:t.row.taxZeroRate,callback:function(a){e.$set(t.row,"taxZeroRate",a)},expression:"scope.row.taxZeroRate"}},[a("el-option",{attrs:{value:"",label:"非零税率"}}),a("el-option",{attrs:{value:"0",label:"出口退税"}}),a("el-option",{attrs:{value:"1",label:"免税"}}),a("el-option",{attrs:{value:"2",label:"不征收"}}),a("el-option",{attrs:{value:"3",label:"普通零税率"}})],1)]}}])}),a("u-table-column",{attrs:{label:"CRM单号",prop:"ext1",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.ext1,callback:function(a){e.$set(t.row,"ext1",a)},expression:"scope.row.ext1"}})]}}])})],1)],1),a("div",{staticClass:"fptk_wrapper_content_3 input1"},[a("div",{staticClass:"first"},[e._v("合计")]),a("div",{staticClass:"second"},[a("div",[e._v("金额(不含税)")]),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax",t)},expression:"form.totalAmountWithoutTax"}})],1),a("div",{staticClass:"third"},[a("div",[e._v("税额")]),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount",t)},expression:"form.totalTaxAmount"}})],1)]),a("div",{staticClass:"fptk_wrapper_content_4 input1"},[a("div",{staticClass:"first"},[e._v("价税合计（大写）")]),a("div",{staticClass:"second"},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.totalAmountUpperCase,callback:function(t){e.totalAmountUpperCase=t},expression:"totalAmountUpperCase"}})],1),a("div",{staticClass:"third"},[a("div",[e._v("(小写)")]),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount",t)},expression:"form.totalAmount"}})],1)]),a("div",{staticClass:"fptk_wrapper_content_5 seller input1"},[a("div",{staticClass:"first"},[e._v("销售方")]),a("div",{staticClass:"second"},[a("div",{staticClass:"second_item cell_item"},[e._v("名称")]),a("div",{staticClass:"second_item cell_item"},[e._v("纳税人识别号")]),a("div",{staticClass:"second_item cell_item"},[e._v("地址、电话")]),a("div",{staticClass:"second_item cell_item"},[e._v("开户行及账号")])]),a("div",{staticClass:"third"},[a("div",{staticClass:"cell_item"},[a("el-form-item",{attrs:{prop:"sellName"}},[a("el-input",{attrs:{maxlength:100,readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("div",{staticClass:"cell_item"},[a("el-form-item",{attrs:{prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:100,readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellAddr"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr",t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellTel"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel",t)},expression:"form.sellTel"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)]],2),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellBank"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"sellBankAccount"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)]],2)]),a("div",{staticClass:"fourth"},[e._v("备注")]),a("div",{staticClass:"fifth"},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",maxlength:230,clearable:"","show-word-limit":"",readonly:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)]),"03"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_jzfw input1"},[a("div",{staticClass:"first"},[e._v("特定信息-建筑服务")]),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"土地增值税项目编号",prop:"tdywxx.jzfw.tdzzsxmbh","label-width":"220px"}},[a("el-input",{attrs:{clearable:"",readonly:""},model:{value:e.form.tdywxx.jzfw.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.jzfw,"tdzzsxmbh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.tdzzsxmbh"}})],1),a("el-form-item",{attrs:{label:"建筑项目名称",prop:"tdywxx.jzfw.jzxmmc","label-width":"220px"}},[a("el-input",{attrs:{clearable:"",readonly:""},model:{value:e.form.tdywxx.jzfw.jzxmmc,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzxmmc","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.jzxmmc"}})],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"建筑服务发生地",prop:"tdywxx.jzfw.jzfwfsd","label-width":"180px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,readonly:""},model:{value:e.form.tdywxx.jzfw.jzfwfsd,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzfwfsd",t)},expression:"form.tdywxx.jzfw.jzfwfsd"}})],1),a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.jzfw.kdsbz","label-width":"180px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{readonly:"",clearable:""},model:{value:e.form.tdywxx.jzfw.kdsbz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("div",{staticClass:"fourth"},[a("el-form-item",{attrs:{label:"详细地址","label-width":"100px"}},[a("el-input",{attrs:{readonly:"",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.fsdxxdz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"fsdxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.fsdxxdz"}})],1)],1)]):e._e(),"06"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_bdcjyzlfw input1"},[a("div",{staticClass:"first"},[e._v("特定信息-不动产经营租赁服务")]),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz","label-width":"220px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,readonly:""},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1),a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz","label-width":"220px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{readonly:"",clearable:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"详细地址","label-width":"120px"}},[a("el-input",{attrs:{readonly:"",clearable:""},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1),a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj","label-width":"120px"}},[a("el-select",{attrs:{clearable:"",readonly:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj",t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1),a("div",{staticClass:"fourth"},[a("el-form-item",{attrs:{label:"租赁期起止","label-width":"195px"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",readonly:"",type:"daterange","value-format":"yyyyMMdd",format:"yyyyMMdd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.zlqDateRange,callback:function(t){e.zlqDateRange=t},expression:"zlqDateRange"}})],1),a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh","label-width":"195px"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1)]):e._e(),"05"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_bdcxs input1"},[a("div",{staticClass:"first"},[e._v("特定信息-不动产销售")]),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"不动产单元代码/网签合同备案编号","label-width":"260px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入",readonly:""},model:{value:e.form.tdywxx.bdcxs.wqhtbabh,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"wqhtbabh",t)},expression:"form.tdywxx.bdcxs.wqhtbabh"}})],1),a("el-form-item",{attrs:{label:"跨地（市）标志","label-width":"260px",prop:"tdywxx.bdcxs.kdsbz"}},[a("el-select",{attrs:{size:"mini",readonly:""},model:{value:e.form.tdywxx.bdcxs.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"kdsbz",t)},expression:"form.tdywxx.bdcxs.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1),a("el-form-item",{attrs:{label:"实际成交含税金额","label-width":"260px",prop:"tdywxx.bdcxs.sjcjhsje"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入",readonly:""},model:{value:e.form.tdywxx.bdcxs.sjcjhsje,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"sjcjhsje",t)},expression:"form.tdywxx.bdcxs.sjcjhsje"}})],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"不动产地址","label-width":"220px",prop:"tdywxx.bdcxs.bdcdz"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入不动产地址",readonly:""},model:{value:e.form.tdywxx.bdcxs.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"bdcdz",t)},expression:"form.tdywxx.bdcxs.bdcdz"}})],1),a("el-form-item",{attrs:{label:"土地增值税项目编号","label-width":"220px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入土地增值税项目编号",readonly:""},model:{value:e.form.tdywxx.bdcxs.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"tdzzsxmbh",t)},expression:"form.tdywxx.bdcxs.tdzzsxmbh"}})],1),a("el-form-item",{attrs:{label:"产权证书/不动产权证号","label-width":"220px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入",readonly:""},model:{value:e.form.tdywxx.bdcxs.fwcqzshm,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"fwcqzshm",t)},expression:"form.tdywxx.bdcxs.fwcqzshm"}})],1)],1),a("div",{staticClass:"fourth"},[a("el-form-item",{attrs:{label:"详细地址","label-width":"160px",prop:"tdywxx.bdcxs.bdcxxdz"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入",readonly:""},model:{value:e.form.tdywxx.bdcxs.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"bdcxxdz",t)},expression:"form.tdywxx.bdcxs.bdcxxdz"}})],1),a("el-form-item",{attrs:{label:"核定计税价格","label-width":"160px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入",readonly:""},model:{value:e.form.tdywxx.bdcxs.hdjsjg,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"hdjsjg",t)},expression:"form.tdywxx.bdcxs.hdjsjg"}})],1),a("el-form-item",{attrs:{label:"面积单位","label-width":"160px",prop:"tdywxx.bdcxs.mjdw"}},[a("el-select",{attrs:{placeholder:"请选择面积单位",clearable:"",readonly:""},model:{value:e.form.tdywxx.bdcxs.mjdw,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"mjdw",t)},expression:"form.tdywxx.bdcxs.mjdw"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)]):e._e(),"04"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_hyysfw"},[a("div",{staticClass:"first"},[e._v("特定信息-货物运输服务")]),a("div",{staticClass:"second"},[a("u-table",{ref:"hyysfwTable",attrs:{data:e.form.tdywxx.hwys,"min-height":"120","use-virtual":"","row-height":38}},[a("u-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"起运地",prop:"qyd"}}),a("u-table-column",{attrs:{label:"到达地",prop:"ddd"}}),a("u-table-column",{attrs:{label:"运输工具种类",prop:"ysgjzl"}}),a("u-table-column",{attrs:{label:"运输工具牌号",prop:"ysgjhp"}}),a("u-table-column",{attrs:{label:"运输货物名称",prop:"yshwmc"}})],1)],1)]):e._e(),a("div",{staticClass:"fptk_wrapper_content_6 input1"},[["81","82"].includes(e.form.invType)?e._e():a("div",{staticClass:"first"},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入收款人",clearable:"",readonly:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier",t)},expression:"form.cashier"}})],1)],1),["81","82"].includes(e.form.invType)?e._e():a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"复核人",prop:"checker","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入复核人",clearable:"",readonly:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:"",readonly:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer",t)},expression:"form.invoicer"}})],1)],1)]),["51","52","81","82"].includes(e.form.invType)?a("div",{staticClass:"fptk_wrapper_content_dp input1"},[a("div",{staticClass:"first"},[a("el-form-item",{attrs:{label:"邮箱地址",prop:"buyEmail","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址",clearable:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail",t)},expression:"form.buyEmail"}})],1)],1),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"手机号码",prop:"buyTelNo","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",clearable:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo",t)},expression:"form.buyTelNo"}})],1)],1)]):e._e()])]),a("div",{staticClass:"fptk_wrapper_circle fptk_wrapper_right"},e._l(e.circleNum,(function(e){return a("div",{staticClass:"fptk_circle"})})),0)])])],1)])},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("25f0"),a("ac1f"),a("1276"),a("5319"),a("c85c"),a("c394")),r=a("2ba5"),l=(a("ad11"),a("5f87")),s=a("b9aa"),c=(a("ed08"),a("c38a")),u=a("ef6c"),d={name:"Fptkshow",components:{ChooseCode:s["default"]},data:function(){return{circleNum:0,baseDialog:{title:"发票详情",open:!1},cascaderOptions:[],selfAdaptionWidth:null,invTypeOptions:[],taxRateOptions:[],specialTicketOptions:[],isAdd:!0,taxCodeSignRow:0,form:{billNo:"",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",specialTicket:"0",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",buyAddr:"",buyTel:"",buyBank:"",buyAccount:"",sellAddr:"",sellTel:"",sellBank:"",sellAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",tdyslxdm:"00",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},hwys:[{index:0,qyd:"",ddd:"",ysgjzl:"",ysgjhp:"",yshwmc:""}],bdcxs:{bdcdz:"",bdcxxdz:"",fwcqzshm:"",kdsbz:"",mjdw:"",wqhtbabh:"",tdzzsxmbh:"",hdjsjg:"",sjcjhsje:""}},shopNo:null},rules:{buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},hsbz:"1",hsbzLabel:"含税",sourceHsbz:null,kpdy:null,fplxdesc:"增值税普通发票",redInvoiceFlag:!1,billDetailsData:[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"",preferentialType:"",taxZeroRate:null}],discountOpen:!1,discountForm:{discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},introduceOpen:!1,introduceForm:{invCode:"",invNo:"",invType:""},introduceRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"}],invNo:[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},detailUpload:{title:"明细导入",open:!1,isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(l["a"])()},url:"/prod-api/output/bill/analysisBillData"},zlqDateRange:[],noneDefine:""}},watch:{"baseDialog.open":function(e,t){var a=this;e&&this.$nextTick((function(){document.getElementsByClassName("fptk_wrapper_body_show").length&&(a.circleNum=Math.ceil(document.getElementsByClassName("fptk_wrapper_body_show")[0].clientHeight/70))}))}},computed:{totalAmountUpperCase:function(){return this.form.totalAmount?this.swapper(this.form.totalAmount):"零元"},invoiceDiscountFlag:function(){for(var e=0;e<this.billDetailsData.length;e++){var t=this.billDetailsData[e];if("0"!=t.discountFlag)return!0}return!1}},mounted:function(){var e=this;window.onresize=function(){e.circleNum=Math.ceil(document.getElementsByClassName("fptk_wrapper_body")[0].clientHeight/70)}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("special_ticket").then((function(t){e.specialTicketOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType,"remark")})),Object(r["a"])().then((function(t){200==t.code&&(e.hsbz=t.data.hsbz||"1",e.hsbzLabel="1"==e.hsbz?"含税":"不含税",e.kpdy=t.data.kpdy,e.sourceHsbz=t.data.hsbz)})),this.formatRegionData(u["regionData"]),this.cascaderOptions=u["regionData"]},methods:{fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a=e.data;t.baseDialog.open=!0,t.fillLogic(a),t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},fillLogic:function(e){this.initQDForm(e),this.form=e,this.billTypeChange(),parseFloat(e.totalAmount)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,this.form.note=e.note,this.form.cashier=e.cashier,this.form.checker=e.checker,this.form.invoicer=e.invoicer;var t=e.details;this.billDetailsData.length=0;for(var a=0,n=0;n<t.length;n++){var i=t[n];i.index=n,i.rate=void 0!=i.rate?this.specialRateFormalEcho(i):"",null!=i.goodsName&&i.goodsName.length>t[a].goodsName.length&&(a=n),this.billDetailsData.push(i)}this.goodsNameChange(a)},goodsNameChange:function(e){var t=this.billDetailsData[e].goodsName;"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].goodsName=t:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].goodsName=t),this.selfAdaptionWidth=Object(c["c"])("",t)},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},initQDForm:function(e){if(["81","82","85","86"].includes(e.invType)){var t,a,n,i,o,r,l,s,c,u,d,p,h,m;if(["81","82"].includes(e.invType)&&(e.sourceInvNo&&(e.sourceInvNo=e.sourceInvCode+e.sourceInvNo),e.invNo&&(e.invNo=e.invCode+e.invNo)),e.buyAddr=null===(t=e.buyAddrTel)||void 0===t?void 0:t.split(/[ ]+/)[0],e.buyTel=null===(a=e.buyAddrTel)||void 0===a?void 0:a.split(/[ ]+/)[1],e.buyBank=null===(n=e.buyBankAccount)||void 0===n?void 0:n.split(/[ ]+/)[0],e.buyAccount=null===(i=e.buyBankAccount)||void 0===i?void 0:i.split(/[ ]+/)[1],e.sellAddr=null===(o=e.sellAddrTel)||void 0===o?void 0:o.split(/[ ]+/)[0],e.sellTel=null===(r=e.sellAddrTel)||void 0===r?void 0:r.split(/[ ]+/)[1],e.sellBank=null===(l=e.sellBankAccount)||void 0===l?void 0:l.split(/[ ]+/)[0],e.sellAccount=null===(s=e.sellBankAccount)||void 0===s?void 0:s.split(/[ ]+/)[1],null!==e&&void 0!==e&&null!==(c=e.tdywxx)&&void 0!==c&&null!==(c=c.bdczl)&&void 0!==c&&c.zlqqssj&&null!==e&&void 0!==e&&null!==(u=e.tdywxx)&&void 0!==u&&null!==(u=u.bdczl)&&void 0!==u&&u.zlqzssj)this.zlqDateRange=[null===e||void 0===e||null===(d=e.tdywxx)||void 0===d||null===(d=d.bdczl)||void 0===d?void 0:d.zlqqssj.replace(/-/g,""),null===e||void 0===e||null===(p=e.tdywxx)||void 0===p||null===(p=p.bdczl)||void 0===p?void 0:p.zlqzssj.replace(/-/g,"")];if(e.tdywxx)null!==(h=e.tdywxx)&&void 0!==h&&h.jzfw?e.tdywxx.jzfw.jzfwfsd=e.tdywxx.jzfw.jzfwfsd?e.tdywxx.jzfw.jzfwfsd.split("/"):[]:e.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(m=e.tdywxx)&&void 0!==m&&m.bdczl?(e.tdywxx.bdczl.zlqqssj&&e.tdywxx.bdczl.zlqzssj&&(this.zlqDateRange=[e.tdywxx.bdczl.zlqqssj.replace(/-/g,""),e.tdywxx.bdczl.zlqzssj.replace(/-/g,"")]),e.tdywxx.bdczl.bdcdz=e.tdywxx.bdczl.bdcdz?e.tdywxx.bdczl.bdcdz.split("/"):[]):e.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null};else e.tdywxx={jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}}}},billTypeChange:function(){this.fplxdesc=this.selectDictLabel(this.invTypeOptions,this.form.invType,"remark")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},handleShowBuySell:function(){this.showBuySell=!this.showBuySell},formatRegionData:function(e){for(var t=0;t<e.length;t++)e[t].value=e[t].label,e[t].children&&this.formatRegionData(e[t].children)},hsbzChange:function(){this.hsbz="含税"==this.hsbzLabel?"1":"0"},savePushEmail:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={id:e.form.id,buyEmail:e.form.buyEmail,buyTelNo:e.form.buyTelNo};Object(o["J"])(a).then((function(t){200==t.code&&(e.msgSuccess(t.msg),e.baseDialog.open=!1,e.$emit("updateInvoiceTable"))}))}}))}}},p=d,h=(a("ff13"),a("2fe4"),a("2877")),m=Object(h["a"])(p,n,i,!1,null,"cdad5e38",null);t["default"]=m.exports},"10b7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"税盘",prop:"taxNo"}},[a("el-input",{model:{value:e.queryParams.taxNo,callback:function(t){e.$set(e.queryParams,"taxNo",t)},expression:"queryParams.taxNo"}})],1),a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{model:{value:e.queryParams.machineNo,callback:function(t){e.$set(e.queryParams,"machineNo",t)},expression:"queryParams.machineNo"}})],1),a("el-form-item",{attrs:{label:"抄税状态",prop:"taxReportStatus"}},[a("el-select",{model:{value:e.queryParams.taxReportStatus,callback:function(t){e.$set(e.queryParams,"taxReportStatus",t)},expression:"queryParams.taxReportStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已抄税",value:"1"}}),a("el-option",{attrs:{label:"未抄税",value:"0"}})],1)],1),a("el-form-item",{attrs:{label:"清卡状态",prop:"cleanCardStatus"}},[a("el-select",{model:{value:e.queryParams.cleanCardStatus,callback:function(t){e.$set(e.queryParams,"cleanCardStatus",t)},expression:"queryParams.cleanCardStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已清卡",value:"1"}}),a("el-option",{attrs:{label:"未清卡",value:"0"}})],1)],1),a("el-form-item",{attrs:{label:"上次抄税日期",prop:"scbsrq"}},[a("el-date-picker",{attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"上次抄税日期"},model:{value:e.queryParams.scbsrq,callback:function(t){e.$set(e.queryParams,"scbsrq",t)},expression:"queryParams.scbsrq"}})],1),a("el-form-item",{attrs:{label:"抄税起始日期",prop:"csqsrq"}},[a("el-date-picker",{attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"抄税起始日期"},model:{value:e.queryParams.csqsrq,callback:function(t){e.$set(e.queryParams,"csqsrq",t)},expression:"queryParams.csqsrq"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.refreshBaseExt}},[e._v("刷新")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"taxnoExtTable",attrs:{data:e.taxnoExtList,height:e.tableHeight,"row-height":40,"use-virtual":"","header-drag-style":"","span-method":e.arraySpanMethod},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"taxReportStatus"==t.prop?a("span",[e._v(" "+e._s("1"==n.row.taxReportStatus?"已抄税":"未秒税")+" ")]):"cleanCardStatus"==t.prop?a("span",[e._v(" "+e._s("1"==n.row.cleanCardStatus?"已清卡":"未清卡")+" ")]):"createTime"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.createTime,"{y}-{m}-{d}"))+" ")]):"taxNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.getVatInventory(n.row)}}},[e._v(" "+e._s(n.row[t.prop])+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:cs"],expression:"['baseinfo:taxno:cs']"}],staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.vatCheckedUp(t.row)}}},[e._v("抄税")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:qk"],expression:"['baseinfo:taxno:qk']"}],staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.clearCard(t.row)}}},[e._v("清卡")])]}}])})],2),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"库存列表",visible:e.stockDialogOpen,width:"1000px","append-to-body":"",id:"stockModal"},on:{"update:visible":function(t){e.stockDialogOpen=t}}},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.stockLoading,expression:"stockLoading"}],ref:"stockListTable",attrs:{data:e.stockList,height:500,"row-height":40,"use-virtual":"","header-drag-style":""}},e._l(e.columnsArr2,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return["infoKind"==t.prop?a("span",[e._v(" "+e._s(e.selectDictLabel(e.invTypeOptions,n.row.infoKind))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),1)],1)],1)},i=[],o=a("2909"),r=a("b85c"),l=(a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d"),a("caad"),a("b64b"),a("7b93")),s=a("c38a"),c=a("b775");function u(e){return Object(c["a"])({url:"/baseinfo/taxno/baseExt",method:"get",params:e})}function d(e){return Object(c["a"])({url:"/baseinfo/taxno/baseExt/"+e,method:"post"})}function p(e){return Object(c["a"])({url:"/baseinfo/taxno/vatCheckedUp/"+e,method:"post"})}function h(e){return Object(c["a"])({url:"/baseinfo/taxno/clearCard/"+e,method:"post"})}function m(e){return Object(c["a"])({url:"/baseinfo/taxno/getVatInventory",method:"get",params:e})}var f={components:{MyElProgress:l["a"]},name:"baseTaxnoext",data:function(){return{functionName:"",showProgress:!1,loadingTime:null,mainLoading:!1,showSearch:!0,queryParams:{pageNum:1,pageSize:500,taxNo:null,machineNo:null,taxReportStatus:null,cleanCardStatus:null,scbsrq:null,csqsrq:null},tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],invTypeOptions:[],single:!0,multiple:!0,total:0,checkboxClick:!1,taxnoExtList:[],columnsArr:[{label:"税盘",prop:"taxNo",align:"center",show:!0,width:180,columnSort:0},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:180,columnSort:0},{label:"抄税状态",prop:"taxReportStatus",align:"center",show:!0,width:100,columnSort:0},{label:"清卡状态",prop:"cleanCardStatus",align:"center",show:!0,width:100,columnSort:0},{label:"上次抄税日期",prop:"scbsrq",align:"center",show:!0,width:130,columnSort:0},{label:"抄税起始日期",prop:"csqsrq",align:"center",show:!0,width:130,columnSort:0},{label:"开票截止日期",prop:"openTaxClosingDate",align:"center",show:!0,width:130,columnSort:0},{label:"发票类型",prop:"invType",align:"center",show:!0,columnSort:0},{label:"剩余发票张数",prop:"surplusTaxNum",align:"center",show:!0,columnSort:0},{label:"单张发票限额",prop:"quota",align:"center",show:!0,columnSort:0},{label:"离线时限",prop:"offLineTime",align:"center",show:!0,columnSort:0},{label:"离线开票限额",prop:"offLineTotalAmount",align:"center",show:!0,columnSort:0}],addOrEditShow:!1,addOrEditTitle:"",operationIndex:0,operationIdArr:[],columnsArr2:[{label:"税盘",prop:"taxNo",align:"center",show:!0,width:180,columnSort:0},{label:"发票种类",prop:"infoKind",align:"center",show:!0,width:120,columnSort:1},{label:"库存份数",prop:"invStock",align:"center",show:!0,width:100,columnSort:2},{label:"领购份数",prop:"buyStock",align:"center",show:!0,width:100,columnSort:3},{label:"发票代码",prop:"infoTypeCode",align:"center",show:!0,width:180,columnSort:4},{label:"起始号码",prop:"startInfoNumber",align:"center",show:!0,width:180,columnSort:5},{label:"终止号码",prop:"endInfoNumber",align:"center",show:!0,width:180,columnSort:6},{label:"领购时间",prop:"buyDate",align:"center",show:!0,width:180,columnSort:7}],stockLoading:!1,stockList:[],stockDialogOpen:!1}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(r["a"])(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.pageSizes.push(parseFloat(o.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getList()},methods:{getList:function(){var e=this;this.loading=!0,u(this.queryParams).then((function(t){if(t.data.length>1){var a=0,n=t.data[0].taxNo;t.data.forEach((function(e,t,i){e.taxNo==n?a++:(i[t-1].rowspan=a,a=1,n=e.taxNo)})),n==t.data[0].taxNo&&(t.data[0].rowspan=a)}e.taxnoExtList=t.data,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},refreshBaseExt:function(e){var t=this,a=e.taxNoId?new Array(e.taxNoId):Object(o["a"])(new Set(this.ids));this.operationIndex=0,this.operationIdArr=a,Object(s["g"])(100,"刷新中",this,!1);var n,i=Object(r["a"])(a);try{for(i.s();!(n=i.n()).done;){var l=n.value;d(l).then((function(e){t.operationIndex++,t.operationIndex==t.operationIdArr.length&&(t.showProgress=!1,clearInterval(t.loadingTime),t.getList())})).catch((function(){t.operationIndex++,t.operationIndex==t.operationIdArr.length&&(t.showProgress=!1,clearInterval(t.loadingTime))}))}}catch(c){i.e(c)}finally{i.f()}},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.taxNoId})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.taxnoExtTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.taxnoExtList,"taxnoExtTable")},vatCheckedUp:function(e){var t=this,a=e.taxNoId?new Array(e.taxNoId):this.ids;this.operationIndex=0,this.operationIdArr=a,Object(s["g"])(100,"抄税中",this,!1);var n,i=Object(r["a"])(a);try{var o=function(){var e=n.value;p(e).then((function(a){200==a.code&&d(e),t.operationIndex++,t.operationIndex==t.operationIdArr.length&&(t.showProgress=!1,clearInterval(t.loadingTime),t.getList())})).catch((function(){t.operationIndex++,t.operationIndex==t.operationIdArr.length&&(t.showProgress=!1,clearInterval(t.loadingTime))}))};for(i.s();!(n=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}},clearCard:function(e){var t=this,a=e.taxNoId?new Array(e.taxNoId):this.ids;this.operationIndex=0,this.operationIdArr=a,Object(s["g"])(100,"清卡中",this,!1);var n,i=Object(r["a"])(a);try{var o=function(){var e=n.value;h(e).then((function(a){200==a.code&&d(e),t.operationIndex++,t.operationIndex==t.operationIdArr.length&&(t.showProgress=!1,clearInterval(t.loadingTime),t.getList())})).catch((function(){t.operationIndex++,t.operationIndex==t.operationIdArr.length&&(t.showProgress=!1,clearInterval(t.loadingTime))}))};for(i.s();!(n=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}},arraySpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);if(this.taxnoExtList.length>1&&[1,2,3].includes(a))return t.rowspan?[t.rowspan,1]:[0,0]},getVatInventory:function(e){var t=this;this.stockDialogOpen=!0,this.stockLoading=!0,m(e).then((function(e){if(t.stockLoading=!1,200==e.code){var a=e.data,n=[];Object.keys(a).forEach((function(e,t,i){a[e].forEach((function(t,a,i){t.taxNo=e,n.push(t)}))})),t.stockList=n}}))}}},b=f,g=a("2877"),v=Object(g["a"])(b,n,i,!1,null,"0b8b4da6",null);t["default"]=v.exports},"10f9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"税控设备启用",name:"first"}}),a("el-tab-pane",{attrs:{label:"电子税局账号启用",name:"second"}})],1),"first"==e.activeName?[a("tax-no",{attrs:{useType:"component"}})]:"second"==e.activeName?[a("account",{attrs:{useType:"component"}})]:e._e()],2)},i=[],o=a("7523"),r=a("ee7c"),l={name:"Usemanager",props:{isQd:{default:!1,type:Boolean}},components:{Account:r["default"],TaxNo:o["default"]},activated:function(){console.log(this.$route.params.isQd)},data:function(){return{activeName:"first"}}},s=l,c=(a("4a95"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"22a89fa9",null);t["default"]=u.exports},1145:function(e,t,a){"use strict";a("b429")},"12b7":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c}));var n=a("b775");function i(e){return Object(n["a"])({url:"/goods/goods/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/goods/goods/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/goods/goods",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/goods/goods",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/goods/goods/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/goods/goods/export",method:"get",params:e,responseType:"blob"})}},"12cf":function(e,t,a){"use strict";a("fec2")},"12f23":function(e,t,a){},1389:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"qdbillManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"特定信息",prop:"tdyslxdm"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.tdyslxdm,callback:function(t){e.$set(e.form,"tdyslxdm",t)},expression:"form.tdyslxdm"}},[a("el-option",{attrs:{value:"00",label:"无"}}),a("el-option",{attrs:{value:"03",label:"建筑服务发票"}}),a("el-option",{attrs:{value:"06",label:"不动产经营租赁服"}})],1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[["81","82"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.mergeInvNo,callback:function(t){e.$set(e.form,"mergeInvNo","string"===typeof t?t.trim():t)},expression:"form.mergeInvNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"门店编码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.shopNo,callback:function(t){e.$set(e.form,"shopNo","string"===typeof t?t.trim():t)},expression:"form.shopNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),["81","82"].includes(e.form.invType)?a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1)],1)],1):e._e()],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("u-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsCode,placement:"top",disabled:""==t.row.goodsCode||null==t.row.goodsCode}},[a("el-input",{attrs:{readonly:"",size:"small"},model:{value:t.row.goodsCode,callback:function(a){e.$set(t.row,"goodsCode",a)},expression:"scope.row.goodsCode"}})],1)]}}])}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsNameAbbreviation,placement:"top",disabled:""==t.row.goodsNameAbbreviation||null==t.row.goodsNameAbbreviation}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})],1)]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsName,placement:"top",disabled:""==t.row.goodsName||null==t.row.goodsName}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})],1)]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.taxTypeCode,placement:"top",disabled:""==t.row.taxTypeCode||null==t.row.taxTypeCode}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})],1)]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.standard,placement:"top",disabled:""==t.row.standard||null==t.row.standard}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})],1)]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.unit,placement:"top",disabled:""==t.row.unit||null==t.row.unit}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})],1)]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2188265427)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2075060434)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("u-table-column",{attrs:{prop:"preferentialType",label:"优惠政策",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}})]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),"03"==e.form.tdyslxdm?a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地增值税项目编号",prop:"tdywxx.jzfw.tdzzsxmbh"}},[a("el-input",{attrs:{placeholder:"",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.jzfw,"tdzzsxmbh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.tdzzsxmbh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑服务发生地",prop:"tdywxx.jzfw.jzfwfsd"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"",options:e.cascaderOptions,placeholder:""},model:{value:e.form.tdywxx.jzfw.jzfwfsd,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzfwfsd",t)},expression:"form.tdywxx.jzfw.jzfwfsd"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"fsdxxdz"}},[a("el-input",{attrs:{placeholder:"",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.fsdxxdz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"fsdxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.fsdxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑项目名称",prop:"tdywxx.jzfw.jzxmmc"}},[a("el-input",{attrs:{placeholder:"",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.jzxmmc,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzxmmc","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.jzxmmc"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.jzfw.kdsbz"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:"",disabled:""},model:{value:e.form.tdywxx.jzfw.kdsbz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1)],1):e._e(),"06"==e.form.tdyslxdm?a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"",options:e.cascaderOptions,placeholder:""},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"bdcxxdz"}},[a("el-input",{attrs:{placeholder:"",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租赁期起止"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",disabled:"",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.zlqDateRange,callback:function(t){e.zlqDateRange=t},expression:"zlqDateRange"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:"",disabled:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh"}},[a("el-input",{attrs:{placeholder:"",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:"",disabled:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)],1):e._e(),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("caad"),a("b680"),a("d3b7"),a("25f0"),a("c394")),r=a("ed08"),l=a("ef6c"),s={name:"qdbillDetailShowModal",props:{},data:function(){return{cascaderOptions:[],form:{billNo:"",invType:"81",detailFlag:"0",invCode:"",invNo:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",shopNo:null},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"全电专票",billDetailsData:[{index:0,goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}],zlqDateRange:[]}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data})),this.formatRegionData(l["regionData"]),this.cascaderOptions=l["regionData"]},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a,n,i=e.data;i.tdywxx&&(null!==(a=i.tdywxx)&&void 0!==a&&a.jzfw?i.tdywxx.jzfw.jzfwfsd=i.tdywxx.jzfw.jzfwfsd?i.tdywxx.jzfw.jzfwfsd.split("/"):[]:i.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(n=i.tdywxx)&&void 0!==n&&n.bdczl?(t.zlqDateRange=[i.tdywxx.bdczl.zlqqssj,i.tdywxx.bdczl.zlqzssj],i.tdywxx.bdczl.bdcdz=i.tdywxx.bdczl.bdcdz?i.tdywxx.bdczl.bdcdz.split("/"):[]):i.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null});t.form=Object(r["e"])(i),t.fplxdesc=t.selectDictLabel(t.invTypeOptions,i.invType),t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,i.detailFlag),["81","82"].includes(t.form.invType)?t.$set(t.form,"mergeInvNo",t.form.invCode+t.form.invNo):t.$set(t.form,"mergeInvNo",t.form.invNo);var o=i.details;t.billDetailsData.length=0;for(var l=0;l<o.length;l++){var s=o[l];s.index=l,s.rate=t.transformRate(s),t.billDetailsData.push(s)}t.cancelFlag=i.cancelFlag,t.redFlag=i.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)},formatRegionData:function(e){for(var t=0;t<e.length;t++)e[t].value=e[t].label,e[t].children&&this.formatRegionData(e[t].children)}}},c=s,u=(a("f65e"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},"140c":function(e,t,a){"use strict";a("db4b")},"15da":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"稽查结果",prop:"ruleStatus"}},[a("el-select",{attrs:{placeholder:"请选择票控规则稽查结果",clearable:"",size:"small"},model:{value:e.queryParams.ruleStatus,callback:function(t){e.$set(e.queryParams,"ruleStatus",t)},expression:"queryParams.ruleStatus"}},[a("el-option",{attrs:{label:"正常",value:0}}),a("el-option",{attrs:{label:"异常",value:1}})],1)],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"查验状态",prop:"checked"}},[a("el-select",{attrs:{placeholder:"请选择查验状态",clearable:"",size:"small"},model:{value:e.queryParams.checked,callback:function(t){e.$set(e.queryParams,"checked",t)},expression:"queryParams.checked"}},e._l(e.checkedOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择发票状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"数据来源",prop:"dataSource"}},[a("el-select",{attrs:{placeholder:"请选择数据来源",clearable:"",size:"small"},model:{value:e.queryParams.dataSource,callback:function(t){e.$set(e.queryParams,"dataSource",t)},expression:"queryParams.dataSource"}},e._l(e.dataSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName",t)},expression:"queryParams.sellName"}})],1),a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellTaxNo,callback:function(t){e.$set(e.queryParams,"sellTaxNo",t)},expression:"queryParams.sellTaxNo"}})],1),a("el-form-item",{attrs:{label:"录入人",prop:"createByUserName"}},[a("el-input",{attrs:{placeholder:"请输入录入人",clearable:"",size:"small"},model:{value:e.queryParams.createByUserName,callback:function(t){e.$set(e.queryParams,"createByUserName",t)},expression:"queryParams.createByUserName"}})],1),a("el-form-item",{attrs:{label:"流程单号",prop:"reimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入流程单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reimBillNo,callback:function(t){e.$set(e.queryParams,"reimBillNo",t)},expression:"queryParams.reimBillNo"}})],1),a("el-form-item",{attrs:{label:"BPM报销单号",prop:"bpmBillNo"}},[a("el-input",{attrs:{placeholder:"请输入BPM报销单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bpmBillNo,callback:function(t){e.$set(e.queryParams,"bpmBillNo",t)},expression:"queryParams.bpmBillNo"}})],1),a("el-form-item",{attrs:{label:"AP单号",prop:"apBillNo"}},[a("el-input",{attrs:{placeholder:"请输入AP单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.apBillNo,callback:function(t){e.$set(e.queryParams,"apBillNo",t)},expression:"queryParams.apBillNo"}})],1),a("el-form-item",{attrs:{label:"结算单号",prop:"settlementNo"}},[a("el-input",{attrs:{placeholder:"请输入结算单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.settlementNo,callback:function(t){e.$set(e.queryParams,"settlementNo",t)},expression:"queryParams.settlementNo"}})],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证制单人",prop:"voucherMaker"}},[a("el-input",{attrs:{placeholder:"请输入凭证制单人",clearable:"",size:"small"},model:{value:e.queryParams.voucherMaker,callback:function(t){e.$set(e.queryParams,"voucherMaker",t)},expression:"queryParams.voucherMaker"}})],1),a("el-form-item",{attrs:{label:"凭证编码",prop:"voucherCode"}},[a("el-input",{attrs:{placeholder:"请输入凭证编码",clearable:"",size:"small"},model:{value:e.queryParams.voucherCode,callback:function(t){e.$set(e.queryParams,"voucherCode",t)},expression:"queryParams.voucherCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:add"],expression:"['income:zzsinvoice:add']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("新增")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:hand"],expression:"['income:zzsinvoice:hand']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleManual(t)}}},[e._v("手工录入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:ocr"],expression:"['income:zzsinvoice:ocr']"}],attrs:{icon:"el-icon-picture-outline"},nativeOn:{click:function(t){return e.handleImage("1")}}},[e._v("图片识别")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:smq"],expression:"['income:zzsinvoice:smq']"}],attrs:{icon:"el-icon-takeaway-box"},nativeOn:{click:function(t){return e.handleScanning(t)}}},[e._v("扫描枪录入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:smy"],expression:"['income:zzsinvoice:smy']"}],attrs:{icon:"el-icon-full-screen"},nativeOn:{click:function(t){return e.handleScanner("1")}}},[e._v("扫描仪录入")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:edit"],expression:"['income:zzsinvoice:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:remove"],expression:"['income:zzsinvoice:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:check"],expression:"['income:zzsinvoice:check']"}],attrs:{type:"success",icon:"el-icon-circle-check",size:"mini",disabled:e.multiple},on:{click:e.handleCheck}},[e._v("查验")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:import"],expression:"['income:zzsinvoice:import']"}],attrs:{type:"warning",icon:"el-icon-plus",size:"mini"},on:{click:e.handleImport}},[e._v("导入")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:export"],expression:"['income:zzsinvoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:export"],expression:"['income:zzsinvoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:add"],expression:"['income:zzsinvoice:add']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("二次匹配")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:ocr"],expression:"['income:zzsinvoice:ocr']"}],attrs:{icon:"el-icon-picture-outline"},nativeOn:{click:function(t){return e.handleImage("2")}}},[e._v("图片识别")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:smy"],expression:"['income:zzsinvoice:smy']"}],attrs:{icon:"el-icon-full-screen"},nativeOn:{click:function(t){return e.handleScanner("2")}}},[e._v("扫描仪录入")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:edit"],expression:"['income:zzsinvoice:edit']"}],attrs:{type:"warning",icon:"el-icon-document",size:"mini",disabled:e.single},on:{click:e.handleSettingInv}},[e._v("设置发票")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.handleBelongOrg}},[e._v("自动归属组织")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"zzsInvoiceMainTable",attrs:{data:e.zzsinvoiceList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"invNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.handleShowInvoiceDetail(n.row)}}},[e._v(e._s((["08xdp","10xdp"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo))]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["08xdp","10xdp"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"state"==t.prop?a("span",[e._v(" "+e._s(e.stateFormat(n.row))+" ")]):"checked"==t.prop?a("span",[e._v(" "+e._s(e.checkedFormat(n.row))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):"blockChain"==t.prop?a("span",[e._v(" "+e._s(e.blockChainFormat(n.row))+" ")]):"invDate"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row)))]):"ruleStatus"==t.prop?a("span",[e._v(" 异常 ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"稽查结果",align:"center",width:"100",prop:"ruleStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.ruleStatus?a("span",[e._v("正常")]):"1"==t.row.ruleStatus?a("span",[e._v("异常")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"稽查描述",align:"center",width:"100",prop:"ruleDes"}}),a("u-table-column",{attrs:{label:"报销状态",align:"center",width:"100",prop:"reimStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.reimStatus?a("span",[e._v("未报销")]):"1"==t.row.reimStatus?a("span",[e._v("全额报销")]):"2"==t.row.reimStatus?a("span",[e._v("部分报销")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"可用报销金额",align:"center",width:"100",prop:"usableReimAmount"}}),a("u-table-column",{attrs:{label:"流程单号",align:"center",width:"100",prop:"reimBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"BPM报销单号",align:"center",width:"100",prop:"bpmBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"AP单号",align:"center",width:"100",prop:"apBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"结算单号",align:"center",width:"100",prop:"settlementNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证号",align:"center",width:"100",prop:"voucherNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证制单人",align:"center",width:"100",prop:"voucherMaker","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证编码",align:"center",width:"100",prop:"voucherCode","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"匹配状态",align:"center",width:"100",prop:"matchStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.matchStatus?a("span",[e._v("未到票")]):"1"==t.row.matchStatus?a("span",[e._v("已到票")]):"2"==t.row.matchStatus?a("span",[e._v("无需到票")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"匹配时间",align:"center",width:"100",prop:"matchTime"}}),a("u-table-column",{attrs:{label:"匹配用户",align:"center",width:"100",prop:"matchUser"}}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:edit"],expression:"['income:zzsinvoice:edit']"}],staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text","生产请求地址":"",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"0"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.scanningData,expression:"scanningData"}],ref:"scanningDataInput",staticStyle:{position:"absolute","z-index":"0",top:"-100px"},attrs:{type:"text"},domProps:{value:e.scanningData},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.scanningDown(t)},input:function(t){t.target.composing||(e.scanningData=t.target.value)}}}),a("el-dialog",{attrs:{visible:e.open,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:e.manualDialogClose},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.title)}})]},proxy:!0}])},[a("el-form",{ref:"manualForm",attrs:{model:e.manualForm,rules:e.manualRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发票类型",clearable:"",size:"small",disabled:"添加增值税发票"!=e.title},on:{change:e.manualInvTypeChange},model:{value:e.manualForm.invType,callback:function(t){e.$set(e.manualForm,"invType",t)},expression:"manualForm.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e.isQd?e._e():a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxLength:12,clearable:"",placeholder:"请输入发票代码"},model:{value:e.manualForm.invCode,callback:function(t){e.$set(e.manualForm,"invCode",t)},expression:"manualForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxLength:20,placeholder:"请输入发票号码",clearable:""},model:{value:e.manualForm.invNo,callback:function(t){e.$set(e.manualForm,"invNo",t)},expression:"manualForm.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",placeholder:"请输入开票日期"},model:{value:e.manualForm.invDate,callback:function(t){e.$set(e.manualForm,"invDate",t)},expression:"manualForm.invDate"}})],1),!e.isSpecial||e.isSecondHand||e.isQd?e._e():a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{placeholder:"请输入合计不含税金额",clearable:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmountWithoutTax,callback:function(t){e.$set(e.manualForm,"totalAmountWithoutTax",t)},expression:"manualForm.totalAmountWithoutTax"}})],1),e.isSpecial||e.isSecondHand||e.isQd?e._e():a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{maxLength:20,placeholder:"请输入校验码后六位",clearable:""},model:{value:e.manualForm.checkCode,callback:function(t){e.$set(e.manualForm,"checkCode",t)},expression:"manualForm.checkCode"}})],1),e.isSecondHand||e.isQd?a("el-form-item",{attrs:{label:"价税合计",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入价税合计",clearable:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmount,callback:function(t){e.$set(e.manualForm,"totalAmount",t)},expression:"manualForm.totalAmount"}})],1):e._e(),e.manualForm.id?e._e():a("el-form-item",{attrs:{label:"发票原图",prop:"fileUrl"}},[a("el-upload",{ref:"manualUpload",staticClass:"manual-upload",attrs:{limit:1,accept:"image/*,.pdf,.ofd",headers:e.manualUpload.headers,action:e.manualUpload.url+"?updateSupport="+e.manualUpload.updateSupport,disabled:e.manualUpload.isUploading,"on-progress":e.handleManualFileUploadProgress,"on-success":e.handleManualFileSuccess,"on-remove":e.handleManualRemove,"auto-upload":!0,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("点击上传")])])])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitManualForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.qdOpen,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.qdOpen=t},close:e.manualDialogClose},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.title)}})]},proxy:!0}])},[a("el-form",{ref:"manualFormQD",attrs:{model:e.manualForm,rules:e.manualRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxLength:8,placeholder:"请输入发票号码",clearable:""},model:{value:e.manualForm.invNo,callback:function(t){e.$set(e.manualForm,"invNo",t)},expression:"manualForm.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",placeholder:"请输入开票日期"},model:{value:e.manualForm.invDate,callback:function(t){e.$set(e.manualForm,"invDate",t)},expression:"manualForm.invDate"}})],1),a("el-form-item",{attrs:{label:"价税合计",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入价税合计",clearable:""},on:{change:e.totalAmountChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmount,callback:function(t){e.$set(e.manualForm,"totalAmount",t)},expression:"manualForm.totalAmount"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitManualFormQD}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"uploadImport",attrs:{limit:1,accept:".xlsx,.xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitImportFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("invoice-detail-show-modal",{ref:"invoiceDetailShowModal"}),a("vehicle-invoice-detail-show-modal",{ref:"vehicleInvoiceDetailShowModal"}),a("second-hand-invoice-detail-show-modal",{ref:"secondHandInvoiceDetailShowModal"}),a("upload-file-dialog",{ref:"uploadFileDialog",on:{discernFileResult:e.discernFileResult}}),a("file-analysis",{ref:"fileAnalysis",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("el-dialog",{attrs:{title:"确认报销",visible:e.reimDialog.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.reimDialog,"open",t)},close:e.reimDialogClose}},[a("el-form",{ref:"reimForm",attrs:{model:e.reimDialog.form,rules:e.reimDialog.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"报销单号",prop:"bxdh"}},[a("el-input",{attrs:{placeholder:"请输入报销单号",readonly:""},model:{value:e.reimDialog.form.bxdh,callback:function(t){e.$set(e.reimDialog.form,"bxdh",t)},expression:"reimDialog.form.bxdh"}})],1),a("el-form-item",{attrs:{label:"报销凭证号",prop:"pzh"}},[a("el-input",{attrs:{placeholder:"请输入报销凭证号"},on:{change:e.pzhChange},model:{value:e.reimDialog.form.pzh,callback:function(t){e.$set(e.reimDialog.form,"pzh",t)},expression:"reimDialog.form.pzh"}})],1),a("el-collapse",{model:{value:e.reimActiveNames,callback:function(t){e.reimActiveNames=t},expression:"reimActiveNames"}},[a("el-collapse-item",{attrs:{title:"报销信息",name:"1"}},[a("el-table",{attrs:{data:e.reimInvoiceInfoData,"max-height":"400px"}},[a("el-table-column",{attrs:{label:"发票号码",prop:"invNo"}}),a("el-table-column",{attrs:{label:"报销金额",prop:"bxje"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.bxjeChange(t.row)}},model:{value:t.row.bxje,callback:function(a){e.$set(t.row,"bxje",a)},expression:"scope.row.bxje"}})]}}])})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.disabledButton},on:{click:e.submitReim}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.reimDialog.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative",width:"100%"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e(),a("el-dialog",{attrs:{title:"设置发票",visible:e.settingInvDialog.open,width:"400px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.settingInvDialog,"open",t)},close:e.settingInvDialogClose}},[a("el-form",{ref:"settingInvForm",attrs:{model:e.settingInvDialog.form,rules:e.settingInvDialog.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"票控状态",prop:"ruleStatus"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.settingInvDialog.form.ruleStatus,callback:function(t){e.$set(e.settingInvDialog.form,"ruleStatus",t)},expression:"settingInvDialog.form.ruleStatus"}},[a("el-option",{attrs:{label:"正常",value:0}}),a("el-option",{attrs:{label:"异常",value:1}})],1)],1),a("el-form-item",{attrs:{label:"异常描述",prop:"ruleDes"}},[a("el-input",{attrs:{placeholder:"请输入异常描述"},model:{value:e.settingInvDialog.form.ruleDes,callback:function(t){e.$set(e.settingInvDialog.form,"ruleDes",t)},expression:"settingInvDialog.form.ruleDes"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitSettingInv}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.settingInvDialog.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("99af"),a("d81d"),a("caad"),a("d3b7"),a("159b"),a("a15b"),a("ac1f"),a("5319"),a("fb6a"),a("25f0"),a("13d5"),a("4c80")),l=a("b526"),s=a("0ca4"),c=a("66b5"),u=a("f82b"),d=a("a5e7"),p=a("35d5"),h=a("ed08"),m=a("5f87"),f=a("c38a"),b=a("23b1"),g={name:"Zzsinvoice",components:{TotalRowTable:l["default"],InvoiceDetailShowModal:s["default"],VehicleInvoiceDetailShowModal:c["default"],SecondHandInvoiceDetailShowModal:u["default"],UploadFileDialog:d["default"],FileAnalysis:p["default"]},data:function(){return{qdOpen:!1,errorPage:!1,scanningData:"",routeLoading:!1,isSpecial:!0,isSecondHand:!1,isQd:!1,functionName:"",showProgress:!1,loadingTime:null,module:"zzsinvoice",pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,zzsinvoiceList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,state:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalMoneyUp:null,sourceInvCode:null,sourceInvNo:null,pwdCode:null,checkCode:null,checked:null,checkMsg:null,dataSource:null,blockChain:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,ruleStatus:0,voucherNo:null,voucherCode:null,voucherMaker:null,settlementNo:null,reimBillNo:null,apBillNo:null,createByUserName:null},manualForm:{id:null,invType:"01",invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,totalAmount:null,fileUrl:null},manualRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}|\d{20}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:["blur","change"]}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:["blur","change"]}],checkCode:[{required:!0,message:"校验码不能为空",trigger:["blur","change"]},{pattern:/^\d{0,10}$/,message:"请输入正确的校验码",trigger:"blur"}],totalAmount:[{required:!0,message:"价税合计不能为空",trigger:["blur","change"]}],fileUrl:[{required:!0,message:"发票文件不能为空"}]},columnsArr:[{label:"是否查验",prop:"checked",align:"center",show:!0,width:100,columnSort:20},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:160,columnSort:0},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:2},{label:"发票类型",prop:"invType",align:"center",show:!0,width:220,columnSort:3},{label:"发票状态",prop:"state",align:"center",show:!0,width:120,columnSort:4},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:5},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:7},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:8},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:9},{label:"销方地址及电话",prop:"sellAddrTel",align:"center",show:!0,width:220,columnSort:10},{label:"销方银行及账号",prop:"sellBankAccount",align:"center",show:!0,width:220,columnSort:11},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:15},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:16},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:17},{label:"价税合计大写",prop:"totalMoneyUp",align:"center",show:!0,width:220,columnSort:18},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:220,columnSort:19},{label:"查验描述",prop:"checkMsg",align:"center",show:!0,width:220,columnSort:21},{label:"数据来源",prop:"dataSource",align:"center",show:!0,width:220,columnSort:22},{label:"录入人",prop:"ext1",align:"center",show:!0,width:220,columnSort:23},{label:"录入时间",prop:"createTime",align:"center",show:!0,width:220,columnSort:24},{label:"是否区块链发票",prop:"blockChain",align:"center",show:!0,width:220,columnSort:25}],sortParam:{column:"",columnOrder:""},manualUpload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(m["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(m["a"])()},url:"/prod-api/income/zzsinvoice/importCheckData"},templateOptions:[],operationIndex:0,operationRowArr:[],disabledButton:!1,reimDialog:{open:!1,form:{pzh:"",bxdh:""},rules:{pzh:[{required:!0,message:"报销凭证号不能为空",trigger:"blur"}]}},reimInvoiceInfoData:[],reimActiveNames:"",originImageOpen:!1,currOriginImageUrl:null,imgShowParams:{deg:0,scale:1},currOperationRow:{},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},settingInvDialog:{open:!1,form:{},rules:{ruleStatus:[],ruleDes:[{required:!0,message:"异常描述不能为空",trigger:"blur"}]}}}},computed:{totalTableData:function(){var e=Object(h["e"])(this.rows);return 0==e.length&&(e=Object(h["e"])(this.zzsinvoiceList)),e}},created:function(){var e=this;if("errorzzsinvoice"==this.$route.name.toLowerCase()){this.errorPage=!0;var t=[{label:"是否正常",prop:"ruleStatus",align:"center",show:!0,width:220,columnSort:20},{label:"异常描述",prop:"ruleDes",align:"center",show:!0,width:220,columnSort:0}];this.columnsArr=t.concat(this.columnsArr),this.queryParams.ruleStatus=1}this.getList(),this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(h["e"])(this.queryParams),Object(h["e"])(this.sortParam));this.dateRange&&this.dateRange.length&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),Object(r["n"])(t).then((function(t){e.zzsinvoiceList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},checkedFormat:function(e,t){return this.selectDictLabel(this.checkedOptions,e.checked)},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},blockChainFormat:function(e,t){return this.selectDictLabel(this.blockChainOptions,e.blockChain)},cutTime:function(e){return null!=e.invDate?e.invDate.substring(0,10):""},manualDialogClose:function(){this.isSpecial=!0,this.isSecondHand=!1,this.isQd=!1,this.resetManualForm()},resetManualForm:function(){this.manualForm={id:null,invType:"01",invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,fileUrl:null}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleShowInvoiceDetail:function(e){var t=this;"1"==e.checked?(this.routeLoading=!0,"03"==e.invType?this.$refs.vehicleInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):"15"==e.invType?this.$refs.secondHandInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):this.$refs.invoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1}))):this.msgError("查验成功发票才能查看详情")},handleUpdate:function(e){var t=this;if(void 0!=e.id&&"1"==e.checked||1==this.rows.length&&"1"==this.rows[0].checked)this.msgError("已查验发票不能够修改");else{var a=e.id||this.ids;Object(r["j"])(a).then((function(a){t.manualForm=a.data,t.manualForm.id=e.id||t.ids[0],["08xdp","10xdp"].includes(t.manualForm.invType)&&(t.manualForm.invNo=t.manualForm.invCode+t.manualForm.invNo,t.manualForm.invCode=""),t.manualInvTypeChange(),t.open=!0,t.$nextTick((function(){t.$refs.manualForm.clearValidate()})),t.title="修改增值税发票"}))}},submitManualForm:function(){var e=this;this.$refs["manualForm"].validate((function(t){if(t){var a=Object(h["e"])(e.manualForm);["08xdp","10xdp"].includes(a.invType)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),a.dataSource="01",null!=e.manualForm.id?(a.invCodeNo=a.invCode+"_"+a.invNo,Object(r["q"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))):Object(r["a"])(a).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}}))},submitManualFormQD:function(){var e=this;this.$refs["manualFormQD"].validate((function(t){if(t)if(null!=e.manualForm.id){var a=Object(h["e"])(e.manualForm);a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12),a.dataSource="01",Object(r["q"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.qdOpen=!1,e.getList()):e.msgError(t.msg)}))}else{var n=Object(h["e"])(e.manualForm);n.invCode=n.invNo.substr(0,12),n.invNo=n.invNo.substr(12),n.dataSource="01",Object(r["a"])(n).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.qdOpen=!1,e.getList()):e.msgError(t.msg)}))}}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.rows,i=[];n.forEach((function(e,t,a){i.push(e.invCodeNo)})),this.$confirm('<span style="word-break: break-all;">是否确认删除增值税发票代码号码为["'+i.join(",")+'"]的数据项?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){var e={ids:a};return Object(f["g"])(100,"删除中",t),Object(r["c"])(e)})).then((function(){t.showProgress=!1,clearInterval(t.loadingTime),t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleCheck:function(){var e=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="查验中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.checkLogic()},checkLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id};Object(r["b"])(t).then((function(t){"200"==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},handleImport:function(){this.upload.title="票据导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.uploadImport.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitImportFileForm:function(){this.$refs.uploadImport.submit()},downloadInvoice:function(){var e=this,t={ids:this.ids.join(","),income:1,other:1,customs:1};Object(r["f"])(this.addDateRange(t,this.dateRange)).then((function(t){200==t.code?e.download(t.msg):e.msgError(t.msg)}))},handleExport:function(){var e=this,t=Object(h["e"])(this.queryParams);this.dateRange&&this.dateRange.length&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),(t.voucherNo||t.reimBillNo||t.apBillNo)&&(t.reimFlag=!0),t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(f["g"])(10,"导出中",e),Object(r["g"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票.xls",e)})).catch((function(){}))},handleExportDetail:function(){var e=this,t=Object(h["e"])(this.queryParams);this.dateRange&&this.dateRange.length&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),(t.voucherNo||t.reimBillNo||t.apBillNo)&&(t.reimFlag=!0),t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(f["g"])(10,"导出中",e),Object(r["h"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.zzsInvoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.zzsinvoiceList,"zzsInvoiceMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},handleManual:function(){var e=this;this.open=!0,this.$nextTick((function(){e.$refs.manualForm.clearValidate(),e.$refs.manualUpload.clearFiles()})),this.title="添加增值税发票"},manualFormInvCodeChange:function(){var e=this,t=Object(f["i"])(this.manualForm.invCode);"08"==t||"03"==t||"01"==t||"02"==t?(this.isSpecial=!0,this.manualForm.checkCode="",this.isSecondHand=!1,this.manualForm.totalAmount=""):"15"==t?(this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.manualForm.totalAmountWithoutTax="",this.isSecondHand=!1,this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))},handleManualFileUploadProgress:function(e,t,a){this.manualUpload.isUploading=!0},handleManualFileSuccess:function(e,t,a){this.manualUpload.isUploading=!1,200==e.code?(this.msgSuccess(e.msg),this.manualForm.fileUrl=e.data[0],this.$refs["manualForm"].validateField("fileUrl")):this.msgError(e.msg)},handleManualRemove:function(){this.manualForm.fileUrl="",this.$refs["manualForm"].validateField("fileUrl")},submitFileForm:function(){this.$refs.manualUpload.submit()},handleImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";"1"==e?this.$store.commit("SET_IS_SECOND_CONFIRM",!1):"2"==e&&this.$store.commit("SET_IS_SECOND_CONFIRM",!0),this.$refs.uploadFileDialog.uploadFileDialogShow()},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},handleScanning:function(){var e=this;this.open=!0,this.$nextTick((function(){e.$refs.manualForm.clearValidate()})),this.scanningData="",this.$refs.scanningDataInput.focus(),this.title="扫描枪录入<span style='color: red;font-size: 14px;'>(扫描前请关闭输入法或切换为英文输入法)</span>"},scanningDown:function(){var e=this;console.log(this.scanningData);var t=this.scanningData.replace("/，/g",","),a=t.split(","),n=a[2],i=a[3],o=a[4],l=a[5],s=a[6];""!=s&&(s=s.slice(-6)),""!=l&&(l=l.substring(0,4)+"-"+l.substring(4,6)+"-"+l.substring(6,8)),console.log(n,i,l,o,s),this.manualForm.invCode=n,this.manualForm.invNo=i,this.manualForm.invDate=l,this.manualForm.totalAmountWithoutTax=o,this.manualForm.checkCode=s,this.manualFormInvCodeChange(),this.$nextTick((function(){e.$refs["manualForm"].validate((function(t){if(t){var a=Object(h["e"])(e.manualForm);a.dataSource="3",Object(r["a"])(a).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.getList(),e.scanningData="",e.$refs.scanningDataInput.focus(),e.resetManualForm(),e.$nextTick((function(){e.$refs.manualForm.clearValidate()}))):e.msgError(t.msg)}))}}))}))},updateInvoiceTable:function(){this.getList()},validIsNumber:function(e){e.target.value=Object(f["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(f["a"])(e.target.value)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},importTemplate:function(){var e=this.selectDictLabel(this.templateOptions,"zzsTemplate");document.location=e},handleScanner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";"1"==e?this.$store.commit("SET_IS_SECOND_CONFIRM",!1):"2"==e&&this.$store.commit("SET_IS_SECOND_CONFIRM",!0),this.scanConnectOperation()},scanConnectOperation:function(){var e=b["a"].FF_JPEG,t={deviceName:"DS-870",connectType:0},a={};a.docSource=b["a"].SRC_AUTO,a.imgType=b["a"].IT_AUTO,a.resolution=200,a.docSize=b["a"].DS_AUTO,a.docRotate=b["a"].DR_NONE,a.brightness=0,a.contrast=0,a.threshold=126,a.colorFilter=b["a"].CF_NONE,a.numScan=0,a.docEnhance=0,a.imgFilter=0,a.optDoubleFeedDetect=b["a"].DFD_NONE,a.optBlankPageSkip=b["a"].BPS_NONE,a.skewCorrect=b["a"].SC_EDGE;var n={};n.destination=b["a"].DEST_BASE64,n.fileFormat=e,n.imgQuality=60;var i=b["a"].ESLCreate(),o=this,l=[];this.$vLoading.show(),i.ScanAndSave_Simple(t,a,n,(function(e,t){e?(t.eventType==b["a"].EVENT_SCANPAGE_COMPLETE&&console.log("scan page complete"),t.eventType==b["a"].EVENT_ALLSCAN_COMPLETE&&console.log("all scan page complete"),t.eventType==b["a"].EVENT_SAVEPAGE_COMPLETE&&l.push("jpeg_"+t.base64),t.eventType==b["a"].EVENT_ALLSAVE_COMPLETE&&(o.msgSuccess("扫描完成，正在识别"),Object(r["e"])(l).then((function(e){o.$vLoading.hide(),o.discernFileResult(new Array(e))})).catch((function(){o.$vLoading.hide()})))):(o.$vLoading.hide(),o.msgError("扫描失败： "+t.errorCode.toString(16)))}))},handleCancelReim:function(){for(var e=this,t=0;t<this.rows.length;t++)if("0"==this.rows[t].reimStatus)return void this.msgError("未报销发票不能进行取消报销操作！");for(var a=[],n=0;n<this.rows.length;n++)a[n]={wyid:this.rows[n].id,bxzt:"3"};var i={updateInvRequests:a};this.$vLoading.show(),Object(r["p"])(i).then((function(t){e.$vLoading.hide(),200==t.code?(e.getList(),e.msgSuccess("取消报销成功")):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))},handleReim:function(){for(var e=this,t=0;t<this.rows.length;t++)if("1"!=this.rows[t].checked)return void this.msgError("未查验发票不能进行报销操作！");this.reimDialog.open=!0,this.reimDialog.form.bxdh=Object(h["m"])(),this.reimInvoiceInfoData=this.rows.reduce((function(e,t){return e.push({wyid:t.id,invNo:t.invNo,bxje:t.usableReimAmount}),e}),[]),this.$nextTick((function(){e.$refs.reimForm.clearValidate()}))},submitReim:function(){var e=this;this.$refs.reimForm.validate((function(t){if(t){for(var a=0;a<e.reimInvoiceInfoData.length;a++)if(!e.reimInvoiceInfoData[a].bxje)return e.msgError("报销金额不能为空"),!1;for(var n=Object(h["e"])(e.reimInvoiceInfoData),i=0;i<n.length;i++)n[i].bxje=parseFloat(n[i].bxje),n[i].bxdh=e.reimDialog.form.bxdh,n[i].pzh=e.reimDialog.form.pzh,n[i].bxzt="2";var o={updateInvRequests:n};e.$vLoading.show(),Object(r["p"])(o).then((function(t){e.$vLoading.hide(),200==t.code?(e.getList(),e.msgSuccess("报销成功"),e.reimDialog.open=!1):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}}))},pzhChange:function(){var e=this;if(this.reimDialog.form.pzh){var t={voucherNo:this.reimDialog.form.pzh,type:1};this.disabledButton=!0,Object(r["m"])(t).then((function(t){e.disabledButton=!1,t.data&&e.msgError("此凭证号已经被使用！")}))}},bxjeChange:function(e){e.bxje=this.plusOrMinus(e.bxje),"."==e.bxje.substr(-1)&&(e.bxje=e.bxje.substr(0,e.bxje.length-1))},reimDialogClose:function(){this.reimDialog.form={pzh:"",voucherNo:""}},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(h["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),1e3)},totalAmountChange:function(){this.manualForm.totalAmount?this.manualForm.totalMoneyUp=Object(f["s"])(this.manualForm.totalAmount):this.manualForm.totalMoneyUp=""},manualInvTypeChange:function(){var e=this,t=this.manualForm.invType;this.manualRules.invNo[0]={pattern:/^\d{8}$/,message:"请输入正确的8位发票号码",trigger:"blur"},["08xdp","10xdp"].includes(t)?(this.isSpecial=!1,this.isSecondHand=!1,this.isQd=!0,this.manualForm.checkCode="",this.manualForm.invCode="",this.manualRules.invNo[0]={pattern:/^\d{20}$/,message:"请输入正确的20位发票号码",trigger:"blur"}):["01","08","02","08xdpzz"].includes(t)?(this.isSpecial=!0,this.isSecondHand=!1,this.isQd=!1,this.manualForm.checkCode="",this.manualForm.totalAmount=""):"15"==t?(this.isSpecial=!1,this.isQd=!1,this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.isQd=!1,this.isSecondHand=!1,this.manualForm.totalAmountWithoutTax="",this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))},handleSettingInv:function(){var e=this;this.settingInvDialog.form=Object(h["e"])(this.rows[0]),this.settingInvDialog.open=!0,this.$nextTick((function(){e.$refs.settingInvForm.clearValidate()}))},submitSettingInv:function(){var e=this;this.$refs.settingInvForm.validate((function(t){t&&(e.$vLoading.show(),Object(r["q"])(e.settingInvDialog.form,"1").then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("设置成功"),e.settingInvDialog.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()})))}))},settingInvDialogClose:function(){this.settingInvDialog.form={}},handleBelongOrg:function(){var e=this;this.showProgress=!0,this.functionName="处理中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.ids.length*100)),e.$refs.myProgress.setProgressNum(0)})),Object(r["l"])(this.ids).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))}}},v=g,y=(a("a0162"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"2b5d9298",null);t["default"]=_.exports},1693:function(e,t,a){"use strict";a("ab3b")},"16de":function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"i",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return p}));var n=a("b775");function i(e){return Object(n["a"])({url:"/ticket/personal/listStatistics",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/ticket/personal/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/ticket/personal",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/ticket/personal",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/ticket/personal/deletePersonalInvoice",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/ticket/personal/exportStatistics",method:"post",responseType:"blob",data:e})}function u(e){return Object(n["a"])({url:"/ticket/personal/listTicketFilesAllStatistics",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/ticket/personal/checkInvoiceCp",method:"post",params:e})}function p(e){return Object(n["a"])({url:"/ticket/personal/exportDetailStatistics",method:"post",data:e})}},1732:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:e.form,size:"medium","label-width":"111px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"强制匹配",prop:"matchFocus"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("否：对应字段为空的时候匹配。"),a("br"),e._v("是：对应字段强制匹配。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.matchFocus,callback:function(t){e.$set(e.form,"matchFocus",t)},expression:"form.matchFocus"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"含税标志",prop:"hsbz"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("否：单据金额按不含税计算。"),a("br"),e._v("是：单据金额按含税计算。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.hsbz,callback:function(t){e.$set(e.form,"hsbz",t)},expression:"form.hsbz"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"明细累加",prop:"mxlj"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("否：单据主体金额跟明细汇总金额校验是否一致。"),a("br"),e._v("是：单据主体金额按明细金额累计。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.mxlj,callback:function(t){e.$set(e.form,"mxlj",t)},expression:"form.mxlj"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"调用抬头",prop:"fptt"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("是：通过税号调用发票抬头接口获取购方信息。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.fptt,callback:function(t){e.$set(e.form,"fptt",t)},expression:"form.fptt"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"同步到商品编码",prop:"synchGoods"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("是：对于平台不存在的商品自动维护到商品编码。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.synchGoods,callback:function(t){e.$set(e.form,"synchGoods",t)},expression:"form.synchGoods"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"按购方税号匹配",prop:"matchBuyTaxno"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("否：按客户名称匹配购方信息"),a("br"),e._v("是：按税号匹配购方信息。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.matchBuyTaxno,callback:function(t){e.$set(e.form,"matchBuyTaxno",t)},expression:"form.matchBuyTaxno"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"同步到客户资料",prop:"synchBuyer"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("是：对于平台不存在的购方信息自动维护到客户资料。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.synchBuyer,callback:function(t){e.$set(e.form,"synchBuyer",t)},expression:"form.synchBuyer"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"自动拆分",prop:"splitFlag"}},[a("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("是：根据不同发票限额把超额单据自动拆分。")]),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-right":"5px"}})]),a("el-radio-group",{model:{value:e.form.splitFlag,callback:function(t){e.$set(e.form,"splitFlag",t)},expression:"form.splitFlag"}},e._l(e.yesnoOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer",align:"right"},slot:"footer"},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:billsetting:add"],expression:"['output:billsetting:add']"}],attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:billsetting:add"],expression:"['output:billsetting:add']"}],on:{click:e.reset}},[e._v("恢复默认")])],1)],1)},i=[],o=a("b775");a("c38a");function r(){return Object(o["a"])({url:"/output/billsetting/getInfo",method:"get"})}function l(){return Object(o["a"])({url:"/output/billsetting/resetDefault",method:"get"})}function s(e){return Object(o["a"])({url:"/output/billsetting/save",method:"post",data:e})}var c={data:function(){return{yesnoOptions:[],form:{}}},created:function(){var e=this;this.getInfo(),this.getDicts("sys_yes_no_num").then((function(t){e.yesnoOptions=t.data}))},methods:{submitForm:function(){var e=this;s(this.form).then((function(t){200===t.code&&e.msgSuccess("保存成功")}))},reset:function(){var e=this;l().then((function(t){e.form=t.data}))},getInfo:function(){var e=this;r().then((function(t){e.form=t.data}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},"17ac":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"单据合并方式",visible:e.mergeModalOpen,width:"500px","append-to-body":"",id:"mergeModal"},on:{"update:visible":function(t){e.mergeModalOpen=t},close:e.mergeDialogClose}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.mergeForm,size:"small","label-position":"left","label-width":"85px"}},[a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("单据抬头")]),a("div",{staticClass:"public-info-item-body"},[a("el-form-item",{attrs:{label:"不含税限额"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.mergeForm.withoutTaxAmoutLimit,callback:function(t){e.$set(e.mergeForm,"withoutTaxAmoutLimit",t)},expression:"mergeForm.withoutTaxAmoutLimit"}})],1),a("el-form-item",{attrs:{label:"备注方式"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.mergeForm.noteDealType,callback:function(t){e.$set(e.mergeForm,"noteDealType",t)},expression:"mergeForm.noteDealType"}},e._l(e.noteDealTypeOptions,(function(e){return a("el-option",{attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("单据明细合并方式")]),a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{model:{value:e.mergeForm.mergeType,callback:function(t){e.$set(e.mergeForm,"mergeType",t)},expression:"mergeForm.mergeType"}},e._l(e.mergeTypeArr,(function(t){return a("el-radio",{staticClass:"public-radio",attrs:{label:t.value}},[e._v(e._s(t.label))])})),1),a("el-checkbox",{staticClass:"public-checkbox pull-right",on:{change:e.goodCodeChange},model:{value:e.mergeForm.goodCode,callback:function(t){e.$set(e.mergeForm,"goodCode",t)},expression:"mergeForm.goodCode"}},[e._v("编码")])],1)],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitMerge}},[e._v("执行合并")]),a("el-button",{on:{click:function(t){e.mergeModalOpen=!1}}},[e._v("取消合并")])],1)])},i=[],o=a("b85c"),r=(a("ac1f"),a("5319"),a("c92e")),l=a("ed08"),s={name:"mergeBillModal",data:function(){return{mergeModalOpen:!1,billIds:[],bizDateRange:[],noteDealTypeOptions:[],mergeForm:{withoutTaxAmoutLimit:"",noteDealType:"2",mergeType:"5",goodCode:!0},mergeTypeArr:[{value:"0",label:"不合并明细行"},{value:"1",label:"合并同编码明细行"},{value:"2",label:"合并同编码,同规格明细行"},{value:"3",label:"合并同编码,同单位明细行"},{value:"4",label:"合并同编码,同单价明细行"},{value:"5",label:"合并同编码,同规格,同单位明细行"},{value:"6",label:"合并同编码,同规格,同单价明细行"},{value:"7",label:"强制合并所有明细为一行"}]}},created:function(){var e=this;this.getDicts("note_deal_type").then((function(t){e.noteDealTypeOptions=t.data}))},methods:{mergeDialogShow:function(e,t){this.mergeModalOpen=!0,this.billIds=e,this.bizDateRange=t},mergeDialogClose:function(){this.mergeForm={withoutTaxAmoutLimit:"",noteDealType:"2",mergeType:"5",goodCode:!0}},validIsNumber:function(e){e.target.value=this.plusOrMinus(e.target.value)},submitMerge:function(){var e=this,t=Object(l["e"])(this.mergeForm);t.billIds=this.billIds,t.bizDateRange=this.bizDateRange,t.billSplitType="2",t.goodCode?t.goodCode="1":t.goodCode="0",Object(r["c"])(t).then((function(t){var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.mergeModalOpen=!1,e.$emit("updateBillTable")}}))},goodCodeChange:function(e){var t,a=Object(o["a"])(this.mergeTypeArr);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.label=e?n.label.replace("同品名","同编码"):n.label.replace("同编码","同品名")}}catch(i){a.e(i)}finally{a.f()}}}},c=s,u=(a("ffa8"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"9f9df802",null);t["default"]=d.exports},"18bb":function(e,t,a){},"18d6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{attrs:{placeholder:"请输入机器编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.machineNo,callback:function(t){e.$set(e.queryParams,"machineNo",t)},expression:"queryParams.machineNo"}})],1),a("el-form-item",{attrs:{label:"税盘状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择税盘状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:add"],expression:"['baseinfo:taxno:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:edit"],expression:"['baseinfo:taxno:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:remove"],expression:"['baseinfo:taxno:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.taxnoList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"税盘",align:"center",prop:"taxNo","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"机器编码",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"link-type",attrs:{to:"/base/seller/"+t.row.id}},[a("span",[e._v(e._s(t.row.machineNo))])])]}}])}),a("el-table-column",{attrs:{label:"分机号",align:"center",prop:"extensionNo"}}),a("el-table-column",{attrs:{label:"部署方式",align:"center",prop:"deployMethod",formatter:e.bsfsFormat}}),a("el-table-column",{attrs:{label:"自动开票",align:"center",prop:"autoOpen",formatter:e.autoOpenFormat},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row,"1")}},model:{value:t.row.autoOpen,callback:function(a){e.$set(t.row,"autoOpen",a)},expression:"scope.row.autoOpen"}})]}}])}),a("el-table-column",{attrs:{label:"打印方式",align:"center",prop:"printMethod",formatter:e.printMethodFormat}}),a("el-table-column",{attrs:{label:"在线状态",align:"center",prop:"onlineStatus",formatter:e.stateFormat}}),a("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"status",formatter:e.statusFormat},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row,"3")}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:edit"],expression:"['baseinfo:taxno:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:edit"],expression:"['baseinfo:taxno:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.permAllot(t.row,"2")}}},[e._v("分配权限")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:taxno:remove"],expression:"['baseinfo:taxno:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,"append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"100px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税号",prop:"taxNo"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入税号",maxlength:20,readonly:""},model:{value:e.form.taxNo,callback:function(t){e.$set(e.form,"taxNo",t)},expression:"form.taxNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税盘密码",prop:"certPwd"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入税盘密码",maxlength:8,clearable:"","show-password":""},model:{value:e.form.certPwd,callback:function(t){e.$set(e.form,"certPwd",t)},expression:"form.certPwd"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入机器编码",maxlength:20,clearable:""},model:{value:e.form.machineNo,callback:function(t){e.$set(e.form,"machineNo",t)},expression:"form.machineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分机号",prop:"extensionNo"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入分机号",maxlength:20,clearable:""},model:{value:e.form.extensionNo,callback:function(t){e.$set(e.form,"extensionNo","string"===typeof t?t.trim():t)},expression:"form.extensionNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部署方式",prop:"deployMethod"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择部署方式",clearable:""},model:{value:e.form.deployMethod,callback:function(t){e.$set(e.form,"deployMethod",t)},expression:"form.deployMethod"}},e._l(e.deployOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.dictLabel,value:e.dictValue,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税盘类型",prop:"taxnoType"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择税盘类型",clearable:""},model:{value:e.form.taxnoType,callback:function(t){e.$set(e.form,"taxnoType",t)},expression:"form.taxnoType"}},e._l(e.taxnoTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"自动开票",prop:"autoOpen"}},[a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},model:{value:e.form.autoOpen,callback:function(t){e.$set(e.form,"autoOpen",t)},expression:"form.autoOpen"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"打印方式",prop:"printMethod"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择打印方式",clearable:""},model:{value:e.form.printMethod,callback:function(t){e.$set(e.form,"printMethod",t)},expression:"form.printMethod"}},e._l(e.printMethodOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"3"==this.form.deployMethod,expression:"this.form.deployMethod == '3'"}],attrs:{span:12}},[a("el-form-item",{attrs:{label:"appId",prop:"ext2"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.ext2,callback:function(t){e.$set(e.form,"ext2",t)},expression:"form.ext2"}},[a("i",{staticClass:"el-input__icon el-icon-refresh",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.getAppId},slot:"suffix"})])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.permtitle,visible:e.permOpen,"append-to-body":""},on:{"update:visible":function(t){e.permOpen=t}}},[a("el-transfer",{attrs:{filterable:"","filter-method":e.filterMethod,"filter-placeholder":"请输入姓名",titles:["可选人员","已选择人员"],props:{label:"nickName",key:"userId"},data:e.deptUsers},model:{value:e.chooseValue,callback:function(t){e.chooseValue=t},expression:"chooseValue"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitPerm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancelPerm}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d3b7"),a("b64b"),a("a15b"),a("d81d"),a("5e91")),r=a("2ba5"),l={name:"Taxno",data:function(){return{loading:!0,permtitle:"税盘权限分配",permOpen:!1,deptUsers:[],defineUser:{label:"nickName",key:"userId"},chooseValue:[],module:"",stateOptions:[],chooseTaxnoId:null,ids:[],single:!0,multiple:!0,showSearch:!1,total:0,taxnoList:[],title:"",open:!1,autoOpenOptions:[],openApproveOptions:[],statusOptions:[],deployOptions:[],taxnoTypeOptions:[{label:"航天",value:"0"},{label:"百望",value:"1"},{label:"UKEY",value:"2"}],printMethodOptions:[{label:"开票/打印同一机器",value:"0"},{label:"开票/打印不同机器",value:"1"}],queryParams:{pageNum:1,pageSize:10,taxNo:null,certPwd:null,extensionNo:null,machineNo:null,autoOpen:null,openApprove:null,status:null},form:{},rules:{taxNo:[{required:!0,message:"税盘不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],certPwd:[{required:!0,message:"税盘密码不能为空",trigger:"blur"},{pattern:/^[0-9]*$/,message:"口令只能是数字",trigger:"blur"}],machineNo:[{required:!0,message:"机器编码不能为空",trigger:"blur"},{pattern:/^[0-9]*$/,message:"机器编码只能是数字",trigger:"blur"}],deployMethod:[{required:!0,message:"部署方式不能为空",trigger:"blur"}],taxnoType:[{required:!0,message:"税盘类型不能为空",trigger:"blur"}],printMehtod:[{required:!0,message:"打印方式不能为空",trigger:"blur"}]}}},created:function(){var e=this;this.getList(),this.getDicts("sys_yes_no_num").then((function(t){e.autoOpenOptions=t.data})),this.getDicts("sys_normal_disable").then((function(t){e.stateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.openApproveOptions=t.data})),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data})),this.getDicts("bsfs").then((function(t){e.deployOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(o["g"])(this.queryParams).then((function(t){e.taxnoList=t.rows,e.total=t.total,e.loading=!1}))},getBaseInfo:function(){var e=this;Object(r["a"])().then((function(t){null==t.data?e.msgError("请先配置纳税人主体信息"):e.form.taxNo=t.data.nsrsbh}))},handleStatusChange:function(e,t){var a,n,i=this,r={id:e.id};"1"==t?(a="1"===e.autoOpen?"启用":"停用",r.autoOpen=e.autoOpen,n="自动开票"):"2"==t?(r.openApprove=e.openApprove,a="1"===e.openApprove?"启用":"停用",n="开票审批"):(r.status=e.status,a="1"===e.status?"启用":"停用",n="税盘"),this.$confirm('确认要"'+a+'"'+n+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["b"])(r)})).then((function(){i.msgSuccess(a+"成功"),i.getList()})).catch((function(){"1"==t?e.autoOpen="0"===e.autoOpen?"1":"0":"2"==t?e.openApprove="0"===e.openApprove?"1":"0":e.status="0"===e.status?"1":"0"}))},autoOpenFormat:function(e,t){return this.selectDictLabel(this.autoOpenOptions,e.autoOpen)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.onlineStatus)},bsfsFormat:function(e,t){return this.selectDictLabel(this.deployOptions,e.deployMethod)},printMethodFormat:function(e,t){var a=this,n=[];return Object.keys(this.printMethodOptions).some((function(t){if(a.printMethodOptions[t].value==""+e.printMethod)return n.push(a.printMethodOptions[t].label),!0})),n.join("")},openApproveFormat:function(e,t){return this.selectDictLabel(this.openApproveOptions,e.openApprove)},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},filterMethod:function(e,t){return t.nickName.indexOf(e)>-1},cancel:function(){this.open=!1,this.reset()},cancelPerm:function(){this.permOpen=!1},reset:function(){this.form={id:null,taxNo:null,certPwd:null,extensionNo:null,machineNo:null,deployMethod:"0",taxnoType:"0",autoOpen:"0",openApprove:"0",status:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null,ext1:null,ext2:null,ext3:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.getBaseInfo(),this.open=!0,this.title="添加税盘管理"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(o["f"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改税盘管理"}))},permAllot:function(e,t){var a=this;this.chooseValue=[],this.deptUsers=[],this.chooseTaxnoId=e.id,this.module=t,this.permtitle="1"==t?"进项税盘权限分配":"销项税盘权限分配",Object(o["e"])(e.id,t).then((function(e){for(var t=[],n=0;n<e.data.length;n++){var i=e.data[n];t.push({nickName:i.nickName,userId:i.userId})}for(var o=[],r=0;r<e.users.length;r++)o.push(e.users[r].userId);a.chooseValue=o,a.deptUsers=t,a.permOpen=!0}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(o["j"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitPerm:function(){var e=this,t={id:this.chooseTaxnoId,userIds:this.chooseValue,module:this.module};Object(o["i"])(t).then((function(t){e.msgSuccess("保存成功"),e.permOpen=!1}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm("是否确认删除所选数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有税盘管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["d"])(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},getAppId:function(){var e=this;if(this.form.taxNo)if(this.form.machineNo){var t={taxno:this.form.taxNo,machineNo:this.form.machineNo};this.mainLoading=!0,Object(o["h"])(t).then((function(t){e.mainLoading=!1,200==t.code?e.form.ext2=t.data.appid:e.msgError(t.msg)})).catch((function(){e.mainLoading=!1}))}else this.msgError("机器编码不能为空");else this.msgError("税盘号不能为空")}}},s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports},1926:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:""},model:{value:t.row.goodsCode,callback:function(a){e.$set(t.row,"goodsCode",a)},expression:"scope.row.goodsCode"}})]}}])}),a("el-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("el-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("el-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("el-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("el-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2015419679)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2295175998)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("el-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("el-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:230,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier","string"===typeof t?t.trim():t)},expression:"form.cashier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker","string"===typeof t?t.trim():t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("c394"),a("d4fc")),r={name:"historyDetailShowModal",props:{},data:function(){return{form:{billNo:"",invType:"2",detailFlag:"0",invCode:"",invNo:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}]}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["e"])(e).then((function(e){var a=e.data;t.form.billNo=a.billNo,t.form.invCode=a.invCode,t.form.invNo=a.invNo,t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.invType=a.invType,t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,a.detailFlag),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer;var n=a.details;if(t.billDetailsData.length=0,null!=n&&void 0!=n)for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)}}},l=r,s=(a("bee3"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},1980:function(e,t,a){(function(t,n){e.exports=n(a("53fe"))})("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="fb15")}({"02f4":function(e,t,a){var n=a("4588"),i=a("be13");e.exports=function(e){return function(t,a){var o,r,l=String(i(t)),s=n(a),c=l.length;return s<0||s>=c?e?"":void 0:(o=l.charCodeAt(s),o<55296||o>56319||s+1===c||(r=l.charCodeAt(s+1))<56320||r>57343?e?l.charAt(s):o:e?l.slice(s,s+2):r-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var n=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},"07e3":function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},"0bfb":function(e,t,a){"use strict";var n=a("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0fc9":function(e,t,a){var n=a("3a38"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},1654:function(e,t,a){"use strict";var n=a("71c1")(!0);a("30f1")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})}))},1691:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"1af6":function(e,t,a){var n=a("63b6");n(n.S,"Array",{isArray:a("9003")})},"1bc3":function(e,t,a){var n=a("f772");e.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if("function"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(e,t,a){var n=a("f772"),i=a("e53d").document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"20fd":function(e,t,a){"use strict";var n=a("d9f6"),i=a("aebd");e.exports=function(e,t,a){t in e?n.f(e,t,i(0,a)):e[t]=a}},"214f":function(e,t,a){"use strict";a("b0c5");var n=a("2aba"),i=a("32e9"),o=a("79e5"),r=a("be13"),l=a("2b4c"),s=a("520a"),c=l("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var p=l(e),h=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=h?!o((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[p](""),!t})):void 0;if(!h||!m||"replace"===e&&!u||"split"===e&&!d){var f=/./[p],b=a(r,p,""[e],(function(e,t,a,n,i){return t.exec===s?h&&!i?{done:!0,value:f.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}})),g=b[0],v=b[1];n(String.prototype,e,g),i(RegExp.prototype,p,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},"230e":function(e,t,a){var n=a("d3f4"),i=a("7726").document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"23c6":function(e,t,a){var n=a("2d95"),i=a("2b4c")("toStringTag"),o="Arguments"==n(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(a){}};e.exports=function(e){var t,a,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=r(t=Object(e),i))?a:o?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},"241e":function(e,t,a){var n=a("25eb");e.exports=function(e){return Object(n(e))}},"25eb":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"294c":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"2aba":function(e,t,a){var n=a("7726"),i=a("32e9"),o=a("69a8"),r=a("ca5a")("src"),l=a("fa5b"),s="toString",c=(""+l).split(s);a("8378").inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,a,l){var s="function"==typeof a;s&&(o(a,"name")||i(a,"name",t)),e[t]!==a&&(s&&(o(a,r)||i(a,r,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=a:l?e[t]?e[t]=a:i(e,t,a):(delete e[t],i(e,t,a)))})(Function.prototype,s,(function(){return"function"==typeof this&&this[r]||l.call(this)}))},"2b4c":function(e,t,a){var n=a("5537")("wks"),i=a("ca5a"),o=a("7726").Symbol,r="function"==typeof o,l=e.exports=function(e){return n[e]||(n[e]=r&&o[e]||(r?o:i)("Symbol."+e))};l.store=n},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},"2fdb":function(e,t,a){"use strict";var n=a("5ca1"),i=a("d2c8"),o="includes";n(n.P+n.F*a("5147")(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"30f1":function(e,t,a){"use strict";var n=a("b8e3"),i=a("63b6"),o=a("9138"),r=a("35e8"),l=a("481b"),s=a("8f60"),c=a("45f2"),u=a("53e2"),d=a("5168")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",f="values",b=function(){return this};e.exports=function(e,t,a,g,v,y,_){s(a,t,g);var x,w,k,T=function(e){if(!p&&e in N)return N[e];switch(e){case m:return function(){return new a(this,e)};case f:return function(){return new a(this,e)}}return function(){return new a(this,e)}},D=t+" Iterator",S=v==f,O=!1,N=e.prototype,P=N[d]||N[h]||v&&N[v],C=P||T(v),A=v?S?T("entries"):C:void 0,F="Array"==t&&N.entries||P;if(F&&(k=u(F.call(new e)),k!==Object.prototype&&k.next&&(c(k,D,!0),n||"function"==typeof k[d]||r(k,d,b))),S&&P&&P.name!==f&&(O=!0,C=function(){return P.call(this)}),n&&!_||!p&&!O&&N[d]||r(N,d,C),l[t]=C,l[D]=b,v)if(x={values:S?C:T(f),keys:y?C:T(m),entries:A},_)for(w in x)w in N||o(N,w,x[w]);else i(i.P+i.F*(p||O),t,x);return x}},"32a6":function(e,t,a){var n=a("241e"),i=a("c3a1");a("ce7e")("keys",(function(){return function(e){return i(n(e))}}))},"32e9":function(e,t,a){var n=a("86cc"),i=a("4630");e.exports=a("9e1e")?function(e,t,a){return n.f(e,t,i(1,a))}:function(e,t,a){return e[t]=a,e}},"32fc":function(e,t,a){var n=a("e53d").document;e.exports=n&&n.documentElement},"335c":function(e,t,a){var n=a("6b4c");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"355d":function(e,t){t.f={}.propertyIsEnumerable},"35e8":function(e,t,a){var n=a("d9f6"),i=a("aebd");e.exports=a("8e60")?function(e,t,a){return n.f(e,t,i(1,a))}:function(e,t,a){return e[t]=a,e}},"36c3":function(e,t,a){var n=a("335c"),i=a("25eb");e.exports=function(e){return n(i(e))}},3702:function(e,t,a){var n=a("481b"),i=a("5168")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},"3a38":function(e,t){var a=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:a)(e)}},"40c3":function(e,t,a){var n=a("6b4c"),i=a("5168")("toStringTag"),o="Arguments"==n(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(a){}};e.exports=function(e){var t,a,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=r(t=Object(e),i))?a:o?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},4588:function(e,t){var a=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:a)(e)}},"45f2":function(e,t,a){var n=a("d9f6").f,i=a("07e3"),o=a("5168")("toStringTag");e.exports=function(e,t,a){e&&!i(e=a?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"469f":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("7d7b")},"481b":function(e,t){e.exports={}},"4aa6":function(e,t,a){e.exports=a("dc62")},"4bf8":function(e,t,a){var n=a("be13");e.exports=function(e){return Object(n(e))}},"4ee1":function(e,t,a){var n=a("5168")("iterator"),i=!1;try{var o=[7][n]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(r){}e.exports=function(e,t){if(!t&&!i)return!1;var a=!1;try{var o=[7],l=o[n]();l.next=function(){return{done:a=!0}},o[n]=function(){return l},e(o)}catch(r){}return a}},"50ed":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},5147:function(e,t,a){var n=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,!"/./"[e](t)}catch(i){}}return!0}},5168:function(e,t,a){var n=a("dbdb")("wks"),i=a("62a0"),o=a("e53d").Symbol,r="function"==typeof o,l=e.exports=function(e){return n[e]||(n[e]=r&&o[e]||(r?o:i)("Symbol."+e))};l.store=n},5176:function(e,t,a){e.exports=a("51b6")},"51b6":function(e,t,a){a("a3c3"),e.exports=a("584a").Object.assign},"520a":function(e,t,a){"use strict";var n=a("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,r=i,l="lastIndex",s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[l]||0!==t[l]}(),c=void 0!==/()??/.exec("")[1],u=s||c;u&&(r=function(e){var t,a,r,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),s&&(t=d[l]),r=i.call(d,e),s&&r&&(d[l]=d.global?r.index+r[0].length:t),c&&r&&r.length>1&&o.call(r[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)})),r}),e.exports=r},"53e2":function(e,t,a){var n=a("07e3"),i=a("241e"),o=a("5559")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},"549b":function(e,t,a){"use strict";var n=a("d864"),i=a("63b6"),o=a("241e"),r=a("b0dc"),l=a("3702"),s=a("b447"),c=a("20fd"),u=a("7cd6");i(i.S+i.F*!a("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,i,d,p=o(e),h="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,b=void 0!==f,g=0,v=u(p);if(b&&(f=n(f,m>2?arguments[2]:void 0,2)),void 0==v||h==Array&&l(v))for(t=s(p.length),a=new h(t);t>g;g++)c(a,g,b?f(p[g],g):p[g]);else for(d=v.call(p),a=new h;!(i=d.next()).done;g++)c(a,g,b?r(d,f,[i.value,g],!0):i.value);return a.length=g,a}})},"54a1":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("95d5")},5537:function(e,t,a){var n=a("8378"),i=a("7726"),o="__core-js_shared__",r=i[o]||(i[o]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:a("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(e,t,a){var n=a("dbdb")("keys"),i=a("62a0");e.exports=function(e){return n[e]||(n[e]=i(e))}},"584a":function(e,t){var a=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=a)},"5b4e":function(e,t,a){var n=a("36c3"),i=a("b447"),o=a("0fc9");e.exports=function(e){return function(t,a,r){var l,s=n(t),c=i(s.length),u=o(r,c);if(e&&a!=a){while(c>u)if(l=s[u++],l!=l)return!0}else for(;c>u;u++)if((e||u in s)&&s[u]===a)return e||u||0;return!e&&-1}}},"5ca1":function(e,t,a){var n=a("7726"),i=a("8378"),o=a("32e9"),r=a("2aba"),l=a("9b43"),s="prototype",c=function(e,t,a){var u,d,p,h,m=e&c.F,f=e&c.G,b=e&c.S,g=e&c.P,v=e&c.B,y=f?n:b?n[t]||(n[t]={}):(n[t]||{})[s],_=f?i:i[t]||(i[t]={}),x=_[s]||(_[s]={});for(u in f&&(a=t),a)d=!m&&y&&void 0!==y[u],p=(d?y:a)[u],h=v&&d?l(p,n):g&&"function"==typeof p?l(Function.call,p):p,y&&r(y,u,p,e&c.U),_[u]!=p&&o(_,u,h),g&&x[u]!=p&&(x[u]=p)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"5d73":function(e,t,a){e.exports=a("469f")},"5f1b":function(e,t,a){"use strict";var n=a("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var o=a.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"626a":function(e,t,a){var n=a("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"62a0":function(e,t){var a=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+n).toString(36))}},"63b6":function(e,t,a){var n=a("e53d"),i=a("584a"),o=a("d864"),r=a("35e8"),l=a("07e3"),s="prototype",c=function(e,t,a){var u,d,p,h=e&c.F,m=e&c.G,f=e&c.S,b=e&c.P,g=e&c.B,v=e&c.W,y=m?i:i[t]||(i[t]={}),_=y[s],x=m?n:f?n[t]:(n[t]||{})[s];for(u in m&&(a=t),a)d=!h&&x&&void 0!==x[u],d&&l(y,u)||(p=d?x[u]:a[u],y[u]=m&&"function"!=typeof x[u]?a[u]:g&&d?o(p,n):v&&x[u]==p?function(e){var t=function(t,a,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,n)}return e.apply(this,arguments)};return t[s]=e[s],t}(p):b&&"function"==typeof p?o(Function.call,p):p,b&&((y.virtual||(y.virtual={}))[u]=p,e&c.R&&_&&!_[u]&&r(_,u,p)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},6762:function(e,t,a){"use strict";var n=a("5ca1"),i=a("c366")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},6821:function(e,t,a){var n=a("626a"),i=a("be13");e.exports=function(e){return n(i(e))}},"69a8":function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},"6a99":function(e,t,a){var n=a("d3f4");e.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if("function"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"6b4c":function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},"6c1c":function(e,t,a){a("c367");for(var n=a("e53d"),i=a("35e8"),o=a("481b"),r=a("5168")("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<l.length;s++){var c=l[s],u=n[c],d=u&&u.prototype;d&&!d[r]&&i(d,r,c),o[c]=o.Array}},"71c1":function(e,t,a){var n=a("3a38"),i=a("25eb");e.exports=function(e){return function(t,a){var o,r,l=String(i(t)),s=n(a),c=l.length;return s<0||s>=c?e?"":void 0:(o=l.charCodeAt(s),o<55296||o>56319||s+1===c||(r=l.charCodeAt(s+1))<56320||r>57343?e?l.charAt(s):o:e?l.slice(s,s+2):r-56320+(o-55296<<10)+65536)}}},7726:function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},"774e":function(e,t,a){e.exports=a("d2d5")},"77f1":function(e,t,a){var n=a("4588"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},"794b":function(e,t,a){e.exports=!a("8e60")&&!a("294c")((function(){return 7!=Object.defineProperty(a("1ec9")("div"),"a",{get:function(){return 7}}).a}))},"79aa":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7cd6":function(e,t,a){var n=a("40c3"),i=a("5168")("iterator"),o=a("481b");e.exports=a("584a").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},"7d7b":function(e,t,a){var n=a("e4ae"),i=a("7cd6");e.exports=a("584a").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},"7e90":function(e,t,a){var n=a("d9f6"),i=a("e4ae"),o=a("c3a1");e.exports=a("8e60")?Object.defineProperties:function(e,t){i(e);var a,r=o(t),l=r.length,s=0;while(l>s)n.f(e,a=r[s++],t[a]);return e}},8378:function(e,t){var a=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=a)},8436:function(e,t){e.exports=function(){}},"86cc":function(e,t,a){var n=a("cb7c"),i=a("c69a"),o=a("6a99"),r=Object.defineProperty;t.f=a("9e1e")?Object.defineProperty:function(e,t,a){if(n(e),t=o(t,!0),n(a),i)try{return r(e,t,a)}catch(l){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},"8e60":function(e,t,a){e.exports=!a("294c")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"8f60":function(e,t,a){"use strict";var n=a("a159"),i=a("aebd"),o=a("45f2"),r={};a("35e8")(r,a("5168")("iterator"),(function(){return this})),e.exports=function(e,t,a){e.prototype=n(r,{next:i(1,a)}),o(e,t+" Iterator")}},9003:function(e,t,a){var n=a("6b4c");e.exports=Array.isArray||function(e){return"Array"==n(e)}},9138:function(e,t,a){e.exports=a("35e8")},9306:function(e,t,a){"use strict";var n=a("c3a1"),i=a("9aa9"),o=a("355d"),r=a("241e"),l=a("335c"),s=Object.assign;e.exports=!s||a("294c")((function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach((function(e){t[e]=e})),7!=s({},e)[a]||Object.keys(s({},t)).join("")!=n}))?function(e,t){var a=r(e),s=arguments.length,c=1,u=i.f,d=o.f;while(s>c){var p,h=l(arguments[c++]),m=u?n(h).concat(u(h)):n(h),f=m.length,b=0;while(f>b)d.call(h,p=m[b++])&&(a[p]=h[p])}return a}:s},9427:function(e,t,a){var n=a("63b6");n(n.S,"Object",{create:a("a159")})},"95d5":function(e,t,a){var n=a("40c3"),i=a("5168")("iterator"),o=a("481b");e.exports=a("584a").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},"9aa9":function(e,t){t.f=Object.getOwnPropertySymbols},"9b43":function(e,t,a){var n=a("d8e8");e.exports=function(e,t,a){if(n(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,i){return e.call(t,a,n,i)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,a){var n=a("2b4c")("unscopables"),i=Array.prototype;void 0==i[n]&&a("32e9")(i,n,{}),e.exports=function(e){i[n][e]=!0}},"9def":function(e,t,a){var n=a("4588"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"9e1e":function(e,t,a){e.exports=!a("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a159:function(e,t,a){var n=a("e4ae"),i=a("7e90"),o=a("1691"),r=a("5559")("IE_PROTO"),l=function(){},s="prototype",c=function(){var e,t=a("1ec9")("iframe"),n=o.length,i="<",r=">";t.style.display="none",a("32fc").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+r+"document.F=Object"+i+"/script"+r),e.close(),c=e.F;while(n--)delete c[s][o[n]];return c()};e.exports=Object.create||function(e,t){var a;return null!==e?(l[s]=n(e),a=new l,l[s]=null,a[r]=e):a=c(),void 0===t?a:i(a,t)}},a352:function(t,a){t.exports=e},a3c3:function(e,t,a){var n=a("63b6");n(n.S+n.F,"Object",{assign:a("9306")})},a481:function(e,t,a){"use strict";var n=a("cb7c"),i=a("4bf8"),o=a("9def"),r=a("4588"),l=a("0390"),s=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,(function(e,t,a,f){return[function(n,i){var o=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,o,i):a.call(String(o),n,i)},function(e,t){var i=f(a,e,this,t);if(i.done)return i.value;var d=n(e),p=String(this),h="function"===typeof t;h||(t=String(t));var g=d.global;if(g){var v=d.unicode;d.lastIndex=0}var y=[];while(1){var _=s(d,p);if(null===_)break;if(y.push(_),!g)break;var x=String(_[0]);""===x&&(d.lastIndex=l(p,o(d.lastIndex),v))}for(var w="",k=0,T=0;T<y.length;T++){_=y[T];for(var D=String(_[0]),S=c(u(r(_.index),p.length),0),O=[],N=1;N<_.length;N++)O.push(m(_[N]));var P=_.groups;if(h){var C=[D].concat(O,S,p);void 0!==P&&C.push(P);var A=String(t.apply(void 0,C))}else A=b(D,p,S,O,P,t);S>=k&&(w+=p.slice(k,S)+A,k=S+D.length)}return w+p.slice(k)}];function b(e,t,n,o,r,l){var s=n+e.length,c=o.length,u=h;return void 0!==r&&(r=i(r),u=p),a.call(l,u,(function(a,i){var l;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":l=r[i.slice(1,-1)];break;default:var u=+i;if(0===u)return a;if(u>c){var p=d(u/10);return 0===p?a:p<=c?void 0===o[p-1]?i.charAt(1):o[p-1]+i.charAt(1):a}l=o[u-1]}return void 0===l?"":l}))}}))},a4bb:function(e,t,a){e.exports=a("8aae")},a745:function(e,t,a){e.exports=a("f410")},aae3:function(e,t,a){var n=a("d3f4"),i=a("2d95"),o=a("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},aebd:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},b0c5:function(e,t,a){"use strict";var n=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b0dc:function(e,t,a){var n=a("e4ae");e.exports=function(e,t,a,i){try{return i?t(n(a)[0],a[1]):t(a)}catch(r){var o=e["return"];throw void 0!==o&&n(o.call(e)),r}}},b447:function(e,t,a){var n=a("3a38"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},b8e3:function(e,t){e.exports=!0},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,a){var n=a("6821"),i=a("9def"),o=a("77f1");e.exports=function(e){return function(t,a,r){var l,s=n(t),c=i(s.length),u=o(r,c);if(e&&a!=a){while(c>u)if(l=s[u++],l!=l)return!0}else for(;c>u;u++)if((e||u in s)&&s[u]===a)return e||u||0;return!e&&-1}}},c367:function(e,t,a){"use strict";var n=a("8436"),i=a("50ed"),o=a("481b"),r=a("36c3");e.exports=a("30f1")(Array,"Array",(function(e,t){this._t=r(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?a:"values"==t?e[a]:[a,e[a]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},c3a1:function(e,t,a){var n=a("e6f3"),i=a("1691");e.exports=Object.keys||function(e){return n(e,i)}},c649:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return u})),a("a481");var n=a("4aa6"),i=a.n(n);function o(){return"undefined"!==typeof window?window.console:e.console}var r=o();function l(e){var t=i()(null);return function(a){var n=t[a];return n||(t[a]=e(a))}}var s=/-(\w)/g,c=l((function(e){return e.replace(s,(function(e,t){return t?t.toUpperCase():""}))}));function u(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function d(e,t,a){var n=0===a?e.children[0]:e.children[a-1].nextSibling;e.insertBefore(t,n)}}).call(this,a("c8ba"))},c69a:function(e,t,a){e.exports=!a("9e1e")&&!a("79e5")((function(){return 7!=Object.defineProperty(a("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(n){"object"===typeof window&&(a=window)}e.exports=a},c8bb:function(e,t,a){e.exports=a("54a1")},ca5a:function(e,t){var a=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+n).toString(36))}},cb7c:function(e,t,a){var n=a("d3f4");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},ce7e:function(e,t,a){var n=a("63b6"),i=a("584a"),o=a("294c");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],r={};r[e]=t(a),n(n.S+n.F*o((function(){a(1)})),"Object",r)}},d2c8:function(e,t,a){var n=a("aae3"),i=a("be13");e.exports=function(e,t,a){if(n(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(i(e))}},d2d5:function(e,t,a){a("1654"),a("549b"),e.exports=a("584a").Array.from},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d864:function(e,t,a){var n=a("79aa");e.exports=function(e,t,a){if(n(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,i){return e.call(t,a,n,i)}}return function(){return e.apply(t,arguments)}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},d9f6:function(e,t,a){var n=a("e4ae"),i=a("794b"),o=a("1bc3"),r=Object.defineProperty;t.f=a("8e60")?Object.defineProperty:function(e,t,a){if(n(e),t=o(t,!0),n(a),i)try{return r(e,t,a)}catch(l){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},dbdb:function(e,t,a){var n=a("584a"),i=a("e53d"),o="__core-js_shared__",r=i[o]||(i[o]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:a("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},dc62:function(e,t,a){a("9427");var n=a("584a").Object;e.exports=function(e,t){return n.create(e,t)}},e4ae:function(e,t,a){var n=a("f772");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},e53d:function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},e6f3:function(e,t,a){var n=a("07e3"),i=a("36c3"),o=a("5b4e")(!1),r=a("5559")("IE_PROTO");e.exports=function(e,t){var a,l=i(e),s=0,c=[];for(a in l)a!=r&&n(l,a)&&c.push(a);while(t.length>s)n(l,a=t[s++])&&(~o(c,a)||c.push(a));return c}},f410:function(e,t,a){a("1af6"),e.exports=a("584a").Array.isArray},f559:function(e,t,a){"use strict";var n=a("5ca1"),i=a("9def"),o=a("d2c8"),r="startsWith",l=""[r];n(n.P+n.F*a("5147")(r),"String",{startsWith:function(e){var t=o(this,e,r),a=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return l?l.call(t,n,a):t.slice(a,a+n.length)===n}})},f772:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},fa5b:function(e,t,a){e.exports=a("5537")("native-function-to-string",Function.toString)},fb15:function(e,t,a){"use strict";var n;a.r(t),"undefined"!==typeof window&&(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(a.p=n[1]);var i=a("5176"),o=a.n(i),r=(a("f559"),a("a4bb")),l=a.n(r),s=(a("6762"),a("2fdb"),a("a745")),c=a.n(s);function u(e){if(c()(e))return e}var d=a("5d73"),p=a.n(d);function h(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=p()(e);!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){return u(e)||h(e,t)||m()}function b(e){if(c()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var g=a("774e"),v=a.n(g),y=a("c8bb"),_=a.n(y);function x(e){if(_()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return v()(e)}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function k(e){return b(e)||x(e)||w()}var T=a("a352"),D=a.n(T),S=a("c649");function O(e,t,a){return void 0===a||(e=e||{},e[t]=a),e}function N(e,t){return e.map((function(e){return e.elm})).indexOf(t)}function P(e,t,a,n){if(!e)return[];var i=e.map((function(e){return e.elm})),o=t.length-n,r=k(t).map((function(e,t){return t>=o?i.length:i.indexOf(e)}));return a?r.filter((function(e){return-1!==e})):r}function C(e,t){var a=this;this.$nextTick((function(){return a.$emit(e.toLowerCase(),t)}))}function A(e){var t=this;return function(a){null!==t.realList&&t["onDrag"+e](a),C.call(t,e,a)}}function F(e){if(!e||1!==e.length)return!1;var t=f(e,1),a=t[0].componentOptions;return!!a&&["transition-group","TransitionGroup"].includes(a.tag)}function I(e,t){var a=t.header,n=t.footer,i=0,o=0;return a&&(i=a.length,e=e?[].concat(k(a),k(e)):k(a)),n&&(o=n.length,e=e?[].concat(k(e),k(n)):k(n)),{children:e,headerOffset:i,footerOffset:o}}function E(e,t){var a=null,n=function(e,t){a=O(a,e,t)},i=l()(e).filter((function(e){return"id"===e||e.startsWith("data-")})).reduce((function(t,a){return t[a]=e[a],t}),{});if(n("attrs",i),!t)return a;var r=t.on,s=t.props,c=t.attrs;return n("on",r),n("props",s),o()(a.attrs,c),a}var R=["Start","Add","Remove","Update","End"],z=["Choose","Sort","Filter","Clone"],j=["Move"].concat(R,z).map((function(e){return"on"+e})),L=null,q={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},$={name:"draggable",inheritAttrs:!1,props:q,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=F(t);var a=I(t,this.$slots),n=a.children,i=a.headerOffset,o=a.footerOffset;this.headerOffset=i,this.footerOffset=o;var r=E(this.$attrs,this.componentData);return e(this.getTag(),r,n)},created:function(){null!==this.list&&null!==this.value&&S["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&S["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&S["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};R.forEach((function(a){t["on"+a]=A.call(e,a)})),z.forEach((function(a){t["on"+a]=C.bind(e,a)}));var a=l()(this.$attrs).reduce((function(t,a){return t[Object(S["a"])(a)]=e.$attrs[a],t}),{}),n=o()({},this.options,a,t,{onMove:function(t,a){return e.onDragMove(t,a)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new D.a(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var a=Object(S["a"])(t);-1===j.indexOf(a)&&this._sortable.option(a,e[t])}},getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1===this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick((function(){e.visibleIndexes=P(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)}))},getUnderlyingVm:function(e){var t=N(this.getChildrenNodes()||[],e);if(-1===t)return null;var a=this.realList[t];return{index:t,element:a}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=k(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,k(e))};this.alterList(t)},updatePosition:function(e,t){var a=function(a){return a.splice(t,0,a.splice(e,1)[0])};this.alterList(a)},getRelatedContextFromMoveEvent:function(e){var t=e.to,a=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var i=n.realList,r={list:i,component:n};if(t!==a&&i&&n.getUnderlyingVm){var l=n.getUnderlyingVm(a);if(l)return o()(l,r)}return r},getVmIndex:function(e){var t=this.visibleIndexes,a=t.length;return e>a-1?a:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){var t=this.getChildrenNodes();t[e].data=null;var a=this.getComponent();a.children=[],a.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),L=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(S["d"])(e.item);var a=this.getVmIndex(e.newIndex);this.spliceList(a,0,t),this.computeIndexes();var n={element:t,newIndex:a};this.emitChanges({added:n})}},onDragRemove:function(e){if(Object(S["c"])(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var a={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:a})}else Object(S["d"])(e.clone)},onDragUpdate:function(e){Object(S["d"])(e.item),Object(S["c"])(e.from,e.item,e.oldIndex);var t=this.context.index,a=this.getVmIndex(e.newIndex);this.updatePosition(t,a);var n={element:this.context.element,oldIndex:t,newIndex:a};this.emitChanges({moved:n})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var a=k(t.to.children).filter((function(e){return"none"!==e.style["display"]})),n=a.indexOf(t.related),i=e.component.getVmIndex(n),o=-1!==a.indexOf(L);return o||!t.willInsertAfter?i:i+1},onDragMove:function(e,t){var a=this.move;if(!a||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(e),i=this.context,r=this.computeFutureIndex(n,e);o()(i,{futureIndex:r});var l=o()({},e,{relatedContext:n,draggedContext:i});return a(l,t)},onDragEnd:function(){this.computeIndexes(),L=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",$);var M=$;t["default"]=M}})["default"]}))},"1a33":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{attrs:{placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"拆分状态",prop:"billSplitType"}},[a("el-select",{attrs:{placeholder:"请选择拆分状态",clearable:"",size:"small"},model:{value:e.queryParams.billSplitType,callback:function(t){e.$set(e.queryParams,"billSplitType",t)},expression:"queryParams.billSplitType"}},e._l(e.billSplitTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据状态",prop:"billStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",clearable:"",size:"small",disabled:""},model:{value:e.queryParams.billStatus,callback:function(t){e.$set(e.queryParams,"billStatus",t)},expression:"queryParams.billStatus"}},e._l(e.billStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"单据日期",prop:"bizDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:remove"],expression:"['output:bill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:recover"],expression:"['output:bill:recover']"}],attrs:{type:"warning",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.renewInvoice}},[e._v("恢复")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:recover"],expression:"['output:bill:recover']"}],attrs:{type:"warning",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.renewInvoiceHand}},[e._v("恢复到手动")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"billMainTable",attrs:{data:e.billList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(e._s(n.row[t.prop]))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}")))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"标记为已开票",visible:e.flagopen,"append-to-body":""},on:{"update:visible":function(t){e.flagopen=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagForm",attrs:{model:e.flagForm,rules:e.flagRules,size:"medium","label-width":"110px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",maxlength:12,clearable:""},model:{value:e.flagForm.invCode,callback:function(t){e.$set(e.flagForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:8,clearable:""},model:{value:e.flagForm.invNo,callback:function(t){e.$set(e.flagForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagForm.invDate,callback:function(t){e.$set(e.flagForm,"invDate",t)},expression:"flagForm.invDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{readonly:""},model:{value:e.flagForm.totalAmountWithoutTax,callback:function(t){e.$set(e.flagForm,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"flagForm.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},model:{value:e.flagForm.cashier,callback:function(t){e.$set(e.flagForm,"cashier","string"===typeof t?t.trim():t)},expression:"flagForm.cashier"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},model:{value:e.flagForm.checker,callback:function(t){e.$set(e.flagForm,"checker","string"===typeof t?t.trim():t)},expression:"flagForm.checker"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagForm.invoicer,callback:function(t){e.$set(e.flagForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagForm.checkCode,callback:function(t){e.$set(e.flagForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagForm.checkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密文",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密文",maxlength:200,clearable:""},model:{value:e.flagForm.pwdCode,callback:function(t){e.$set(e.flagForm,"pwdCode","string"===typeof t?t.trim():t)},expression:"flagForm.pwdCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagCancel}},[e._v("取 消")])],1)],1),a("Fptk",{ref:"billdetailcomp",on:{updateBillTable:e.updateBillTable,openBill:e.handleOpen}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("4de4"),a("caad"),a("a434"),a("ac1f"),a("5319"),a("498a"),a("d81d"),a("25f0"),a("c85c")),l=a("c10b"),s=a("e98e"),c=a("bbc3"),u=a("b526"),d=a("c38a"),p=a("ed08"),h={name:"Errorbill",components:{Fptk:c["default"],TotalRowTable:u["default"]},data:function(){return{module:"errorbill",tableHeight:null,pageSizes:[],showProgress:!1,functionName:":",loading:!0,ids:[],rows:[],dateRange:[],single:!0,multiple:!0,showSearch:!0,billTypeOptions:[],total:0,billList:[],billSourceOptions:[],title:"",open:!1,flagopen:!1,sapopen:!1,billSplitTypeOptions:[],invTypeOptions:[],billStatusOptions:[],detailFlagOptions:[],applyStatusOptions:[],redFlagOptions:[],taxnoIdOptions:[],headTypeOptions:[],queryParams:{billNos:null,pageNum:1,pageSize:500,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"-1",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null,tdyslxdm:"",shopNo:null},form:{},flagForm:{},rules:{},openInvoiceIndex:0,openIdsArr:[],openResult:[],openValidIndex:0,openValidError:[],openEnd:!1,flagRules:{invCode:[{required:!0,message:"发票代码不能为空",trigger:"blur"}],invNo:[{required:!0,message:"发票号码不能为空",trigger:"blur"}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:"blur"}]},columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:2},{label:"单据状态",prop:"billStatus",align:"center",show:!0,width:180,columnSort:3},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:180,columnSort:4},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:180,columnSort:5},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:180,columnSort:6},{label:"购方开户账号",prop:"buyBankAccount",align:"center",show:!0,width:250,columnSort:7},{label:"购方地址电话",prop:"buyAddrTel",align:"center",show:!0,width:250,columnSort:8},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:180,columnSort:9},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:10},{label:"拆分状态",prop:"billSplitType",align:"center",show:!0,width:180,columnSort:11},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:180,columnSort:12},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:13},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:14},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:180,columnSort:15},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:200,columnSort:16},{label:"申请状态",prop:"applyStatus",align:"center",show:!0,width:180,columnSort:17},{label:"开票失败描述",prop:"vatFailDes",align:"center",show:!0,width:180,columnSort:18},{label:"记账类型",prop:"vouchType",align:"center",show:!0,width:180,columnSort:19}],checkboxClick:!1,sortParam:{column:null,columnOrder:null},stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null}}},computed:{totalTableData:function(){var e=Object(p["e"])(this.rows);return 0==e.length&&(e=Object(p["e"])(this.billList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data)})),this.getDicts("bill_status").then((function(t){e.billStatusOptions=t.data;for(var a=0;a<e.billStatusOptions.length;a++)if("失败"==e.billStatusOptions[a].dictLabel)return e.queryParams.billStatus=e.billStatusOptions[a].dictValue,void e.getList()})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.redFlagOptions=t.data,e.taxnoIdOptions=t.data})),this.getDicts("approve_status").then((function(t){e.applyStatusOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var a={module:this.module};Promise.all([Object(l["b"])(a),Object(l["a"])(a)]).then((function(t){var a=e.formatTableColumns(t),n=[{label:"门店编码",prop:"shopNo",align:"center",show:!0,width:220,columnSort:1}],i=a.filter((function(e){return["shopNo"].includes(e.prop)}));if(i.length||a.splice.apply(a,[0,0].concat(n)),a&&a.length>0){e.columnsArr=a;for(var o=0;o<e.columnsArr.length;o++)e.columnsArr[o].columnSort=o,null==e.columnsArr[o].width&&("billNo"==e.columnsArr[o].prop?e.columnsArr[o].width=200:e.columnsArr[o].width=100)}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.billMainTable.doLayout()}))},getList:function(){var e=this;if(null!=this.dateRange){this.loading=!0,this.queryParams.beginBizDate=this.dateRange[0]+" 00:00:00",this.queryParams.endBizDate=this.dateRange[1]+" 23:59:59";var t=Object.assign(Object(p["e"])(this.queryParams),Object(p["e"])(this.sortParam));Object(r["o"])(t).then((function(t){e.billList=t.rows,e.total=t.total,e.loading=!1}))}else this.msgError("请选择单据日期")},getTaxNoSeller:function(){var e=this;Object(r["m"])().then((function(t){var a=t.sellers;if(null!=a&&0!=a.length){for(var n,i=0;i<a.length;i++)if("1"==a[i].status){n=a[i];break}null==n&&(n=a[0]),e.flagForm.cashier=n.payee,e.flagForm.checker=n.checker,e.flagForm.invoicer=n.drawer,e.flagopen=!0}}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.billStatus)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},taxnoIdFormat:function(e,t){return this.selectDictLabel(this.taxnoIdOptions,e.taxnoId)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},cancel:function(){this.open=!1,this.reset()},flagCancel:function(){this.flagopen=!1,this.flagReset()},flagReset:function(){this.flagForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,cashier:null,checker:null,invoicer:null,checkCode:null,pwdCode:null}},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},flagOpen:function(){var e=this.rows;this.flagForm.id=e[0].id,this.flagForm.totalAmountWithoutTax=e[0].totalAmountWithoutTax,this.getTaxNoSeller()},renewInvoiceHand:function(e){var t=this,a=e.id||this.ids,n=this.dateRange,i="0",o={ids:a,startTime:n[0],endTime:n[1],status:i,autoOpen:"0"};this.$confirm("是否确认恢复所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,a=1;t.showProgress=!0,t.functionName="修复中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var n=setInterval((function(){a++,a<=99&&t.$refs.myProgress.progressGrow(a)}),e);Object(r["q"])(o).then((function(e){clearInterval(n),t.showProgress=!1,t.msgSuccess(e.msg),t.getList()}))})).catch((function(){}))},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,",")},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},handleAdd:function(){var e=this;this.reset(),this.$refs.billdetailcomp.billDialogShow(),this.$refs.billdetailcomp.editDialogTitle("1"),this.$nextTick((function(){e.$refs.billdetailcomp.getBillNo()}))},checkBaseInfo:function(){var e=this;return Object(r["d"])().then((function(t){return 1001==t.code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t.code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},handleUpdate:function(e){var t=this.rows;void 0==e.id&&(e=t[0]),this.reset();var a=e.id||this.ids[0],n=(e.bizDate,e.bizDate,{id:a,bizDate:e.bizDate});this.$refs.billdetailcomp.fillBillDialog(n)},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["v"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagForm:function(){var e=this;this.$refs["flagForm"].validate((function(t){if(t){var a=e.dateRange;e.flagForm.bizDateStart=a[0],e.flagForm.bizDateEnd=a[1];var n=Object(p["e"])(e.flagForm);n.pwdCode=window.btoa(n.pwdCode),Object(r["h"])(n).then((function(t){200===t.code?(e.msgSuccess("标记成功"),e.flagopen=!1,e.getList()):e.msgError(t.msg)}))}}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否确认删除所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["e"])(a,n)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有单据管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["f"])(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.billMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.billList,"billMainTable")},updateBillTable:function(){this.getList()},renewInvoice:function(e){var t=this,a=e.id||this.ids,n=this.dateRange,i="0",o={ids:a,startTime:n[0],endTime:n[1],status:i};this.$confirm("是否确认恢复所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,a=1;t.showProgress=!0,t.functionName="修复中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var n=setInterval((function(){a++,a<=99&&t.$refs.myProgress.progressGrow(a)}),e);Object(r["q"])(o).then((function(e){clearInterval(n),t.showProgress=!1,t.msgSuccess(e.msg),t.getList()}))})).catch((function(){}))},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.billList,"billMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},handleOpen:function(e){var t=this,a=e.id||this.ids;"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a)),this.openIdsArr=Object(p["e"])(a);var n=void 0!=e.id?e:this.rows;"[object Array]"!=Object.prototype.toString.call(n)&&(n=new Array(n)),this.openRowsArr=Object(p["e"])(n),this.$confirm("是否确认开具所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(d["g"])(100,"加载中",t,!1),t.openValid1()})).then((function(){t.openValid2()})).catch((function(e){console.log("执行中断了")}))},openValid1:function(){var e=this,t=Object(r["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.showProgress=!1,clearInterval(e.loadingTime),e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.showProgress=!1,clearInterval(e.loadingTime),e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid2:function(){var e=this;if(this.openValidIndex++,this.openValidIndex<=this.openIdsArr.length&&!this.openEnd)this.invoiceOwnValid(this.openValidIndex-1);else{var t=this.openIdsArr.filter((function(t,a){return-1==e.openValidError.indexOf(a)}));this.openEnd||(t.length>0?(this.openIdsArr=Object(p["e"])(t),this.openValidSuccess()):this.msgError("请重新选择发票")),this.openValidIndex=0,this.openValidError.length=0,this.openEnd=!1}},invoiceOwnValid:function(e){var t=this,a=this.openIdsArr[e],n={id:a,beginBizDate:this.dateRange[0]+" 00:00:00",endBizDate:this.dateRange[1]+" 23:59:59"},i=Object(r["z"])(n);return Promise.all([i]).then((function(a){"200"!=a[0].code?e==t.openIdsArr.length-1?t.$confirm(a[0].msg,"警告",{confirmButtonText:"完成",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.$confirm(a[0].msg+",是否继续开票?","警告",{confirmButtonText:"跳过",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.openValid2()}))},openValidSuccess:function(){var e=this;console.log("校验完成了!!!!");var t=this.openRowsArr[0].invType,a={invType:t};Object(s["b"])(a).then((function(t){200==t.code?(e.stockInfoForm=t.data,e.stockInfoForm.fplx=e.selectDictLabel(e.invTypeOptions,e.stockInfoForm.fplx),e.stockInfoOpen=!0):e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.msgError("获取税盘库存信息失败"),e.showProgress=!1,clearInterval(e.loadingTime)}))},sureStockInfo:function(){var e=this;this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openInvoiceList:function(){var e=this;this.openInvoiceIndex++,1!=this.openInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.openInvoiceIndex/this.openIdsArr.length*100));var t=this.openRowsArr[this.openInvoiceIndex-1],a=!1;this.openInvoice(t).then((function(n){console.log("dang qian row:"+t),"200"==n.code?e.msgSuccess("第"+e.openInvoiceIndex+"张单据"+n.msg):1008==n.code?(a=!0,e.$confirm(n.msg+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"跳过",type:"warning",closeOnClickModal:!1}).then((function(){e.specialOpenInvoice(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){e.openInvoiceIndex>=e.openRowsArr.length?(e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))):e.msgError("第"+e.openInvoiceIndex+"张单据开具失败："+n.msg),a||(e.openResult.push(n),e.$refs.myProgress.setProgressNum(parseInt(e.openInvoiceIndex/e.openIdsArr.length*100)),e.openInvoiceIndex<e.openIdsArr.length?e.openInvoiceList():(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()))})).catch((function(t){console.log("这里是失败的"),e.openInvoiceIndex>=e.openIdsArr.length?(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.$confirm(t.message+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.openInvoiceList()})).catch((function(){e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()}))}))},openInvoice:function(e){var t=e.id,a={id:t,bizDate:e.bizDate};return Object(r["p"])(a)}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,"3a41fc20",null);t["default"]=b.exports},"1aa2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.invTypeOptions,(function(e){return a("el-tab-pane",{key:e.dictValue,attrs:{label:e.dictLabel,name:e.dictValue}})})),1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[e.incomeTypeArr.includes(e.activeName)?[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择发票状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName",t)},expression:"queryParams.sellName"}})],1),a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellTaxNo,callback:function(t){e.$set(e.queryParams,"sellTaxNo",t)},expression:"queryParams.sellTaxNo"}})],1),a("el-form-item",{attrs:{label:"查验状态",prop:"checked"}},[a("el-select",{attrs:{placeholder:"请选择查验状态",clearable:"",size:"small"},model:{value:e.queryParams.checked,callback:function(t){e.$set(e.queryParams,"checked",t)},expression:"queryParams.checked"}},e._l(e.checkedOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"数据来源",prop:"dataSource"}},[a("el-select",{attrs:{placeholder:"请选择数据来源",clearable:"",size:"small"},model:{value:e.queryParams.dataSource,callback:function(t){e.$set(e.queryParams,"dataSource",t)},expression:"queryParams.dataSource"}},e._l(e.incomeDataSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)]:[a("el-form-item",{attrs:{label:"票据号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入票据号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"票据日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"数据来源",prop:"dataSource"}},[a("el-select",{attrs:{placeholder:"请选择数据来源",clearable:"",size:"small"},model:{value:e.queryParams.dataSource,callback:function(t){e.$set(e.queryParams,"dataSource",t)},expression:"queryParams.dataSource"}},e._l(e.otherDataSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],2),e.incomeTypeArr.includes(e.activeName)?[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"zzsInvoiceMainTable",attrs:{data:e.invoiceList,height:e.tableHeight-56,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.incomeColumnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"state"==t.prop?a("span",[e._v(" "+e._s(e.stateFormat(n.row))+" ")]):"checked"==t.prop?a("span",[e._v(" "+e._s(e.checkedFormat(n.row))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):"blockChain"==t.prop?a("span",[e._v(" "+e._s(e.blockChainFormat(n.row))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})]:[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"otherMainTable",attrs:{data:e.invoiceList,height:e.tableHeight-56,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.otherColumnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"uploadTime"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.uploadTime,"{y}-{m}-{d}"))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):e.dataJsonFieldArr.includes(t.prop)?a("span",[e._v(" "+e._s(e.dataJsonFieldFormat(n.row,t.prop))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})]],2)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("5319"),a("b64b"),a("4c80")),l=a("4338"),s=a("b526"),c=a("ed08"),u={name:"invoicepool",components:{TotalRowTable:s["default"]},data:function(){return{activeName:"",routeLoading:!1,showSearch:!0,queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,state:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalMoneyUp:null,sourceInvCode:null,sourceInvNo:null,pwdCode:null,checkCode:null,checked:null,checkMsg:null,dataSource:null,blockChain:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null},dateRange:[],invTypeOptions:[],stateOptions:[],checkedOptions:[],incomeDataSourceOptions:[],blockChainOptions:[],otherDataSourceOptions:[],pageSizes:[],incomeTypeArr:[],otherTypeArr:[],isIncome:!0,tableHeight:null,loading:!0,ids:[],rows:[],total:0,invoiceList:[],incomeColumnsArr:[{label:"是否查验",prop:"checked",align:"center",show:!0,width:220,columnSort:20},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:0},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:2},{label:"发票类型",prop:"invType",align:"center",show:!0,width:220,columnSort:3},{label:"发票状态",prop:"state",align:"center",show:!0,width:220,columnSort:4},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:5},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:7},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:8},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:9},{label:"销方地址及电话",prop:"sellAddrTel",align:"center",show:!0,width:220,columnSort:10},{label:"销方银行及账号",prop:"sellBankAccount",align:"center",show:!0,width:220,columnSort:11},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:15},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:16},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:17},{label:"价税合计大写",prop:"totalMoneyUp",align:"center",show:!0,width:220,columnSort:18},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:220,columnSort:19},{label:"查验描述",prop:"checkMsg",align:"center",show:!0,width:220,columnSort:21},{label:"数据来源",prop:"dataSource",align:"center",show:!0,width:220,columnSort:22},{label:"是否区块链发票",prop:"blockChain",align:"center",show:!0,width:220,columnSort:23}],otherColumnsArr:[{label:"票据类型",prop:"invType",align:"center",show:!0,width:220,columnSort:0},{label:"票据号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"票据代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:2},{label:"票据日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:3},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:4},{label:"图片上传时间",prop:"uploadTime",align:"center",show:!0,width:220,columnSort:5},{label:"数据来源",prop:"dataSource",align:"center",show:!0,width:220,columnSort:6},{label:"发票所在地",prop:"location",align:"center",show:!0,width:220,columnSort:6},{label:"出发地",prop:"departureStation",align:"center",show:!0,width:220,columnSort:6},{label:"目的地",prop:"arrivalStation",align:"center",show:!0,width:220,columnSort:6},{label:"火车票ID",prop:"ticketId",align:"center",show:!0,width:220,columnSort:6},{label:"票价",prop:"fare",align:"center",show:!0,width:220,columnSort:6},{label:"民航发展基金",prop:"civilAviationFund",align:"center",show:!0,width:220,columnSort:6},{label:"燃油附加费",prop:"fuelSurcharge",align:"center",show:!0,width:220,columnSort:6},{label:"其他税费",prop:"otherTaxes",align:"center",show:!0,width:220,columnSort:6},{label:"印刷序号",prop:"serialNo",align:"center",show:!0,width:220,columnSort:6},{label:"乘车时间",prop:"boardingTime",align:"center",show:!0,width:220,columnSort:6},{label:"购方名称(旅客姓名)",prop:"buyName",align:"center",show:!0,width:220,columnSort:6},{label:"购方税号(身份证号)",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:6},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"未税金额",prop:"totalWithoutTaxMoney",align:"center",show:!0,width:220,columnSort:6}],dataJsonFieldArr:["location","departureStation","arrivalStation","ticketId","fare","civilAviationFund","fuelSurcharge","otherTaxes","serialNo","boardingTime","buyName","buyTaxNo","sellName","sellTaxNo","totalWithoutTaxMoney"],sortParam:{column:"",columnOrder:""}}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this,t=this.getDicts("income_check_inv_type"),a=this.getDicts("other_ticket");Promise.all([t,a]).then((function(t){var a=[];e.invTypeOptions=a.concat(t[0]["data"],t[1]["data"]);for(var n=0,i=t[0]["data"].length;n<i;n++)e.incomeTypeArr.push(t[0]["data"][n].dictValue);for(var o=0,r=t[1]["data"].length;o<r;o++)e.otherTypeArr.push(t[1]["data"][o].dictValue);e.queryParams.invType=e.invTypeOptions[0].dictValue,e.activeName=e.invTypeOptions[0].dictValue,e.getList(),e.$nextTick((function(){e.tableHeight=e.calcTableHeight()}))})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.incomeDataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("other_source").then((function(t){e.otherDataSourceOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},methods:{invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},checkedFormat:function(e,t){return this.selectDictLabel(this.checkedOptions,e.checked)},dataSourceFormat:function(e,t){return this.isIncome?this.selectDictLabel(this.incomeDataSourceOptions,e.dataSource):this.selectDictLabel(this.otherDataSourceOptions,e.dataSource)},blockChainFormat:function(e,t){return this.selectDictLabel(this.blockChainOptions,e.blockChain)},getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(c["e"])(this.queryParams),Object(c["e"])(this.sortParam));t.invType=this.activeName,t.beginTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[0],t.endTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[1],this.incomeTypeArr.includes(this.activeName)?Object(r["n"])(t).then((function(t){e.invoiceList=t.rows,e.total=t.total,e.loading=!1})):Object(l["e"])(t).then((function(t){e.invoiceList=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleTabClick:function(){var e=this;this.resetQuery(),this.$nextTick((function(){e.tableHeight=e.calcTableHeight()}))},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.isIncome?(this.$refs.zzsInvoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"zzsInvoiceMainTable")):(this.$refs.otherMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"otherMainTable"))},changeTableSort:function(e){e.column;var t=e.prop,a=e.order;this.sortParam.column=t.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==a?this.sortParam.columnOrder="ASC":"descending"==a?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},dataJsonFieldFormat:function(e,t){var a=JSON.parse(e.dataJson);return void 0==a[t]?"":a[t]}}},d=u,p=a("2877"),h=Object(p["a"])(d,n,i,!1,null,"77f031d9",null);t["default"]=h.exports},"1b1e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticClass:"form-input-textarea",staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"单据日期",prop:"bizDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"拆分状态",prop:"billSplitType"}},[a("el-select",{attrs:{placeholder:"请选择拆分状态",clearable:"",size:"small"},model:{value:e.queryParams.billSplitType,callback:function(t){e.$set(e.queryParams,"billSplitType",t)},expression:"queryParams.billSplitType"}},e._l(e.billSplitTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据状态",prop:"billStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",size:"small"},model:{value:e.queryParams.billStatus,callback:function(t){e.$set(e.queryParams,"billStatus",t)},expression:"queryParams.billStatus"}},e._l(e.billStatusOptions,(function(t){return"1"!=t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"回写标志",prop:"rewriteFlag"}},[a("el-select",{attrs:{placeholder:"请选择回写标志",clearable:"",size:"small"},model:{value:e.queryParams.rewriteFlag,callback:function(t){e.$set(e.queryParams,"rewriteFlag",t)},expression:"queryParams.rewriteFlag"}},e._l(e.rewriteFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:add"],expression:"['qdoutput:bill:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:edit"],expression:"['qdoutput:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:edit"],expression:"['qdoutput:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.synchClassCode}},[e._v("同步税编")]),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:edit"],expression:"['qdoutput:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.adjustError}},[e._v("调整误差")])],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:flagOpen"],expression:"['qdoutput:bill:flagOpen']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.flagOpen}},[e._v("标记已开")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:remove"],expression:"['qdoutput:bill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:open"],expression:"['qdoutput:bill:open']"}],attrs:{type:"info",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleOpen}},[e._v("开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:rewrite"],expression:"['qdoutput:bill:rewrite']"}],attrs:{type:"info",icon:"el-icon-close",size:"mini",disabled:e.multiple},on:{click:e.rewrite}},[e._v("单据回写")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("导入导出")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:add"],expression:"['qdoutput:bill:add']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleImport(t)}}},[e._v("导入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:export"],expression:"['qdoutput:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleExport(t)}}},[e._v("导出主体")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:export"],expression:"['qdoutput:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleDetailExport(t)}}},[e._v("导出明细")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("拆分")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:split"],expression:"['qdoutput:bill:split']"}],attrs:{icon:"el-icon-minus",disabled:e.single},nativeOn:{click:function(t){return e.splitBill(t)}}},[e._v("手工拆分")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:splitByAmount"],expression:"['qdoutput:bill:splitByAmount']"}],attrs:{icon:"el-icon-remove-outline",disabled:e.multiple},nativeOn:{click:function(t){return e.splitByAmount(t)}}},[e._v("自动拆分")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("合并")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:merge"],expression:"['qdoutput:bill:merge']"}],attrs:{icon:"el-icon-plus",disabled:e.many},nativeOn:{click:function(t){return e.manualMergeBill(t)}}},[e._v("手工合并")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:merge"],expression:"['qdoutput:bill:merge']"}],attrs:{icon:"el-icon-plus",disabled:e.many},nativeOn:{click:function(t){return e.defaultMergeBill(t)}}},[e._v("自动合并")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:revert"],expression:"['qdoutput:bill:revert']"}],attrs:{type:"success",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.revertBill}},[e._v("还原")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:open"],expression:"['qdoutput:bill:open']"}],attrs:{type:"warning",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.handleSplitMergePreview}},[e._v("拆分合并预览")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("更多")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill:edit"],expression:"['qdoutput:bill:edit']"}],attrs:{icon:"el-icon-plus",disabled:e.multiple},nativeOn:{click:function(t){return e.handleInvTypeUpdate(t)}}},[e._v("批量修改发票类型")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:bill.copy"],expression:"['qdoutput:bill.copy']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.copyInvoice(t)}}},[e._v("复制")])],1)],1)],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module,colorExplain:"1"},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"billMainTable",attrs:{data:e.billList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"cell-click":e.cellClick,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{style:e.setFontColor(n.row),on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(e._s(n.row[t.prop]))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"rewriteFlag"==t.prop?a("span",[e._v(e._s(e.rewriteFlagFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):"sourceInvCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.sourceInvCode)+" ")]):"sourceInvNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.sourceInvCode:"")+n.row.sourceInvNo)+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"1"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"标记为已开票",visible:e.flagopen,"append-to-body":""},on:{"update:visible":function(t){e.flagopen=t},close:e.flagOpenDialogClose}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagForm",attrs:{model:e.flagForm,rules:e.flagRules,size:"medium","label-width":"110px"}},[["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",maxlength:12,clearable:""},model:{value:e.flagForm.invCode,callback:function(t){e.$set(e.flagForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:20,clearable:""},model:{value:e.flagForm.invNo,callback:function(t){e.$set(e.flagForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开票日期"},model:{value:e.flagForm.invDate,callback:function(t){e.$set(e.flagForm,"invDate",t)},expression:"flagForm.invDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{readonly:""},model:{value:e.flagForm.totalAmountWithoutTax,callback:function(t){e.$set(e.flagForm,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"flagForm.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagForm.invoicer,callback:function(t){e.$set(e.flagForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagForm.checkCode,callback:function(t){e.$set(e.flagForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagForm.checkCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagCancel}},[e._v("取 消")])],1)],1),a("q-d-bill-detail-edit-modal",{ref:"qdbilldetailcomp",on:{updateBillTable:e.updateBillTable,openBill:e.handleOpen}}),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx,.xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("split-bill-modal",{ref:"splitModal",on:{updateBillTable:e.updateBillTable}}),a("merge-bill-modal",{ref:"mergeModal",on:{updateBillTable:e.updateBillTable}}),a("el-dialog",{attrs:{title:"修改发票类型",visible:e.updateInvTypeOpen,width:"400px","append-to-body":"",id:"updateInvTypeModal"},on:{"update:visible":function(t){e.updateInvTypeOpen=t},close:e.updateInvTypeDialogClose}},[a("div",[a("el-form",{ref:"updateInvTypeForm",attrs:{model:e.updateInvTypeForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small"},model:{value:e.updateInvTypeForm.invType,callback:function(t){e.$set(e.updateInvTypeForm,"invType",t)},expression:"updateInvTypeForm.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitUpdateInvType}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.updateInvTypeOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"复制发票",visible:e.copyInvoiceOpen,width:"400px","append-to-body":"",id:"copyInvoiceModal"},on:{"update:visible":function(t){e.copyInvoiceOpen=t},close:e.copyInvoiceClose}},[a("div",[a("el-form",{ref:"copyInvoiceForm",attrs:{model:e.copyInvoiceForm,rules:e.copyInvoiceFormRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.copyInvoiceForm.invCode,callback:function(t){e.$set(e.copyInvoiceForm,"invCode",t)},expression:"copyInvoiceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8},model:{value:e.copyInvoiceForm.invNo,callback:function(t){e.$set(e.copyInvoiceForm,"invNo",t)},expression:"copyInvoiceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureCopyInvoice}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.copyInvoiceOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"拆分合并原单据预览",visible:e.splitMergePreviewOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.splitMergePreviewOpen=t},close:e.splitMergePreviewClose}},[a("u-table",{staticStyle:{width:"100%"},attrs:{data:e.splitMergeList,height:.6*e.bodyHeight}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",[e._v(e._s(n.row[t.prop]))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}")))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2)],1),a("el-dialog",{attrs:{title:"消息",visible:e.print.open,width:"400px","append-to-body":"",id:"printSureModal"},on:{"update:visible":function(t){return e.$set(e.print,"open",t)}}},[a("div",[a("p",[e._v("系统即将执行您的发票打印任务，请确认发票信息:")]),a("p",{staticClass:"print-modal-p"},[e._v("发票类型:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.print.invType))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票代码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.print.invCode))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票号码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.print.invNo))])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.printSure}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.print.open=!1}}},[a("span",[e._v("取消")])])])])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("13d5"),a("d81d"),a("4de4"),a("caad"),a("25f0"),a("ac1f"),a("5319"),a("498a"),a("5f87")),l=a("c85c"),s=a("7e6f"),c=a("c92e"),u=a("00c6"),d=a("c10b"),p=a("2ba5"),h=a("c394"),m=a("9694"),f=a("5509"),b=a("17ac"),g=a("b526"),v=a("c38a"),y=a("ed08"),_={name:"Qdbill",components:{QDBillDetailEditModal:m["default"],SplitBillModal:f["default"],MergeBillModal:b["default"],TotalRowTable:g["default"]},data:function(){return{bodyHeight:null,splitMergePreviewOpen:!1,splitMergeList:[],updateInvTypeForm:{invType:"2"},updateInvTypeOpen:!1,mainLoading:!1,module:"bill",pageSizes:[],tableHeight:null,showProgress:!1,functionName:"开具中:",loading:!0,ids:[],rows:[],dateRange:[],single:!0,multiple:!0,many:!0,showSearch:!0,total:0,billList:[],rewriteFlagOptions:[],billListPart:[],rollLoadTimes:0,billTypeOptions:[],title:"",open:!1,flagopen:!1,sapopen:!1,billSplitTypeOptions:[],templateOptions:[],invTypeOptions:[],billStatusOptions:[],detailFlagOptions:[],applyStatusOptions:[],redFlagOptions:[],taxnoIdOptions:[],billSourceOptions:[],headTypeOptions:[],queryParams:{billNos:null,lzfgs:null,pageNum:1,pageSize:10,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null,tdyslxdm:"",shopNo:null},form:{},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(r["a"])()},url:"/prod-api/output/bill/importBillData"},flagForm:{},rules:{},openInvoiceIndex:0,openIdsArr:[],openRowsArr:[],openResult:[],openSuccess:[],openValidIndex:0,openValidError:[],openEnd:!1,flagRules:{invCode:[{required:!0,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:["blur","change"]}],invNo:[{required:!0,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^(\d{20})$/,message:"请输入正确的发票号码",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:"blur"}]},operationIndex:0,operationIdArr:[],operationRowArr:[],columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:2},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:180,columnSort:3},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:180,columnSort:4},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:180,columnSort:5},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:6},{label:"拆分状态",prop:"billSplitType",align:"center",show:!0,width:180,columnSort:7},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:180,columnSort:8},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:9},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:10},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:200,columnSort:11}],stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null},sortParam:{column:"",columnOrder:""},copyInvoiceOpen:!1,copyInvoiceForm:{invCode:null,invNo:null},copyInvoiceFormRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},checkboxClick:!1,loadingTime:null,kpdy:null,print:{open:!1,invType:"",invCode:"",invNo:""}}},computed:{totalTableData:function(){var e=Object(y["e"])(this.rows);return 0==e.length&&(e=Object(y["e"])(this.billList)),e},setFontColor:function(){return function(e){return"1"==e.allStatus?"color: violet;cursor: pointer;":"2"==e.allStatus?"color: blue;cursor: pointer;":"3"==e.allStatus?"color: red;cursor: pointer;":"4"==e.allStatus?"color: orange;cursor: pointer;":"5"==e.allStatus?"color: green;cursor: pointer;":"color: rgb(24, 144, 255);cursor: pointer;"}}},created:function(){var e=this,t={module:this.module};Promise.all([Object(d["b"])(t),Object(d["a"])(t)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].columnSort=n,null==e.columnsArr[n].width&&("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:e.columnsArr[n].width=100)}}));var a=this.$moment(new Date);this.dateRange=[a.startOf("month").format("YYYY-MM-DD"),a.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data,e.getList()})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_status").then((function(t){e.billStatusOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.redFlagOptions=t.data,e.taxnoIdOptions=t.data})),this.getDicts("approve_status").then((function(t){e.applyStatusOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),Object(p["a"])().then((function(t){200==t.code&&(e.kpdy=t.data.kpdy)}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.bodyHeight=document.body.clientHeight,window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.bodyHeight=document.body.clientHeight}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.bodyHeight=document.body.clientHeight,window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.bodyHeight=document.body.clientHeight}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.billMainTable.doLayout()}))},importTemplate:function(){document.location="https://test.zzhcn.net/einvoices/zzh-standar/202203/24/b3878c0bddd140a88c88c79df9b37c52..xlsx"},getList:function(){var e=this;if(null!=this.dateRange){this.loading=!0,this.queryParams.autoOpen="0",this.queryParams.beginBizDate=this.dateRange[0]+" 00:00:00",this.queryParams.endBizDate=this.dateRange[1]+" 23:59:59";var t=Object.assign(Object(y["e"])(this.queryParams),Object(y["e"])(this.sortParam));t.invType?t.invTypes=new Array(t.invType):t.invTypes=this.invTypeOptions.reduce((function(e,t){return e.push(t.dictValue),e}),[]),Object(l["o"])(t).then((function(t){e.billList=t.rows;var a,n=Object(o["a"])(e.billList);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.$set(i,"showInput",!1)}}catch(r){n.e(r)}finally{n.f()}e.total=t.total,e.loading=!1}))}else this.msgError("请选择单据日期")},getTaxNoSeller:function(){var e=this;Object(s["b"])().then((function(t){var a,n=t.sellers;if(null==n||0==n.length)return e.flagopen=!0,void e.$nextTick((function(){e.$refs.flagForm.clearValidate()}));for(var i=0;i<n.length;i++)if("1"==n[i].status){a=n[i];break}null==a&&(a=n[0]),e.$set(e.flagForm,"invoicer",a.drawer),e.flagopen=!0,e.$nextTick((function(){e.$refs.flagForm.clearValidate()}))}))},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.billStatus)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},taxnoIdFormat:function(e,t){return this.selectDictLabel(this.taxnoIdOptions,e.taxnoId)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},cancel:function(){this.open=!1,this.reset()},flagCancel:function(){this.flagopen=!1,this.flagReset()},flagReset:function(){this.flagForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,cashier:null,checker:null,invoicer:null,checkCode:null,pwdCode:null},this.resetForm("flagForm")},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},flagOpen:function(){var e=this.rows;this.$set(this.flagForm,"id",e[0].id),this.$set(this.flagForm,"bizDate",e[0].bizDate),this.$set(this.flagForm,"totalAmountWithoutTax",e[0].totalAmountWithoutTax),this.$set(this.flagForm,"invType",e[0].invType),this.getTaxNoSeller()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.many=e.length<2,this.rows=e)},handleAdd:function(){var e=this;this.reset(),this.$refs.qdbilldetailcomp.billDialogShow(),this.$refs.qdbilldetailcomp.editDialogTitle("1"),this.$nextTick((function(){e.$refs.qdbilldetailcomp.getBillNo()}))},checkBaseInfo:function(){var e=this;return Object(s["a"])().then((function(t){return 1001==t.code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){})),new Promise((function(){}))):2002==t.code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid1:function(){var e=this,t=Object(s["a"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.showProgress=!1,clearInterval(e.loadingTime),e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.showProgress=!1,clearInterval(e.loadingTime),e.$confirm("全电账号需要刷脸验证，是否跳转到账号管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Account"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid2:function(){var e=this;if(this.openValidIndex++,this.openValidIndex<=this.openIdsArr.length&&!this.openEnd)this.invoiceOwnValid(this.openValidIndex-1);else{var t=this.openIdsArr.filter((function(t,a){return-1==e.openValidError.indexOf(a)}));this.openEnd||(t.length>0?(this.openIdsArr=Object(y["e"])(t),this.showProgress=!1,clearInterval(this.loadingTime),this.openValidSuccess()):(this.showProgress=!1,clearInterval(this.loadingTime),this.msgError("请重新选择发票"))),this.openValidIndex=0,this.openValidError.length=0,this.openEnd=!1}},invoiceOwnValid:function(e){var t=this,a=this.openIdsArr[e],n={id:a,beginBizDate:this.dateRange[0]+" 00:00:00",endBizDate:this.dateRange[1]+" 23:59:59"},i=Object(l["z"])(n);return Promise.all([i]).then((function(a){"200"!=a[0].code?e==t.openIdsArr.length-1?t.$confirm(a[0].msg,"警告",{confirmButtonText:"完成",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.$confirm(a[0].msg+",是否继续开票?","警告",{confirmButtonText:"跳过",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.openValid2()}))},handleUpdate:function(e){var t=this;void 0==e.id&&(e=this.rows[0]),this.reset();var a=e.id||this.ids[0],n={id:a,bizDate:e.bizDate};this.mainLoading=!0,this.$refs.qdbilldetailcomp.fillBillDialog(n).then((function(e){t.mainLoading=!1}))},adjustError:function(e){var t=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="误差调整中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationRowArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.adjustErrorLogic()},adjustErrorLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(l["b"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg):e.msgError("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(l["v"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(l["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagForm:function(){var e=this;this.$refs["flagForm"].validate((function(t){if(t){Object(v["g"])(100,"标记中",e,!1);var a=Object(y["e"])(e.flagForm);["81","82"].includes(a.invType)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),Object(l["i"])(a).then((function(t){200===t.code?(e.msgSuccess("标记成功"),e.flagopen=!1,e.getList()):e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))}}))},flagOpenDialogClose:function(){this.flagForm={invCode:"",invNo:"",invDate:"",totalAmountWithoutTax:"",invoicer:"",checkCode:""}},synchClassCode:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否同步所选商品税收编码?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="同步中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["u"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否确认删除所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="删除中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["e"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},rewrite:function(){var e=this,t=this.rows,a=t[0];a.id,a.invDate;this.$confirm("您确定要回写当前单据吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.operationRowArr=Object(y["e"])(e.rows),e.functionName="回写中:",e.showProgress=!0,e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.rewriteLogic()})).catch((function(){}))},rewriteLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(s["d"])(t).then((function(t){"200"==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据回写失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()})).catch((function(t){e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()}))},handleOpen:function(e){var t=this,a=e.id||this.ids;"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a)),this.operationIndex=0,this.openIdsArr=Object(y["e"])(a);var n=void 0!=e.id?e:this.rows;"[object Array]"!=Object.prototype.toString.call(n)&&(n=new Array(n)),this.openRowsArr=Object(y["e"])(n),this.$confirm("是否确认开具所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(v["g"])(100,"加载中",t,!1),t.openValid1()})).then((function(){t.openValid2()})).catch((function(e){t.showProgress=!1,clearInterval(t.loadingTime),console.log("执行中断了")}))},openValidSuccess:function(){var e=this;console.log("校验完成了!!!!"),this.$refs.qdbilldetailcomp.dialogClose(),this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openInvoiceList:function(){var e=this;this.openInvoiceIndex++,1!=this.openInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.openInvoiceIndex/this.openIdsArr.length*100));var t=this.openRowsArr[this.openInvoiceIndex-1];t.beginBizDate=this.dateRange[0]+" 00:00:00",t.endBizDate=this.dateRange[1]+" 23:59:59";var a=!1;this.openInvoice(t).then((function(n){console.log("dang qian row:"+t),"200"==n.code?(e.openSuccess.push(n.data),e.msgSuccess("第"+e.openInvoiceIndex+"张单据"+n.msg)):1008==n.code?(a=!0,e.$confirm(n.msg+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"跳过",type:"warning",closeOnClickModal:!1}).then((function(){e.specialOpenInvoice(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){e.openInvoiceIndex>=e.openRowsArr.length?("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))):e.msgError("第"+e.openInvoiceIndex+"张单据开具失败："+n.msg),a||(e.openResult.push(n),e.$refs.myProgress.setProgressNum(parseInt(e.openInvoiceIndex/e.openIdsArr.length*100)),e.openInvoiceIndex<e.openIdsArr.length?e.openInvoiceList():("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()))})).catch((function(t){console.log("这里是失败的"),e.openInvoiceIndex>=e.openIdsArr.length?("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.$confirm(t.message+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.openInvoiceList()})).catch((function(){e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()}))}))},openInvoice:function(e){var t=e.id,a={id:t,bizDate:e.bizDate};return Object(s["c"])(a)},specialOpenInvoice:function(e){var t=this,a={id:e.id,bizDate:e.bizDate,special:"1"};Object(s["c"])(a).then((function(e){"200"==e.code?t.msgSuccess("第"+t.openInvoiceIndex+"张单据"+e.msg):t.msgError("第"+t.openInvoiceIndex+"张单据开具失败："+e.msg),t.$refs.myProgress.setProgressNum(parseInt(t.openInvoiceIndex/t.openIdsArr.length*100)),t.openInvoiceIndex<t.openIdsArr.length?t.openInvoiceList():(t.showProgress=!1,t.$refs.myProgress.setProgressNum(0),t.openInvoiceIndex=0,t.openResult=[],t.openIdsArr=[],t.getList())}))},handleImport:function(){this.upload.title="单据导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()},handleExport:function(){var e=this,t=Object(y["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["f"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理.xls",e)})).catch((function(){}))},handleDetailExport:function(){var e=this,t=Object(y["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["g"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理详情.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.billMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.billList,"billMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.billList,"billMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},updateBillTable:function(){this.getList()},splitBill:function(){var e=this.rows[0];if("2"!=e.billSplitType){var t={id:e.id,bizDate:e.bizDate};this.$refs.splitModal.fillBillDialog(t)}else this.msgError("该单据已进行过合并，不能拆分")},revertBill:function(){var e=this;"0"!=this.rows[0].billSplitType?this.$confirm("是否确认还原所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIdArr=Object(y["e"])(e.ids),e.operationRowArr=Object(y["e"])(e.rows),e.showProgress=!0,e.functionName="还原中",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.revertBillLogic()})).catch((function(){})):this.msgError("该单据未进行过拆分合并，不能还原")},revertBillLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=this.dateRange;Object(l["r"])(t,a).then((function(t){200==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据还原失败:"+t.msg),e.operationIndex<e.operationIdArr.length?e.revertBillLogic():(e.renewOperationParam(),e.getList())})).catch((function(){e.renewOperationParam(),e.getList()}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},manualMergeBill:function(){for(var e=1;e<this.rows.length;e++)if(this.rows[0].invType!=this.rows[e].invType)return void this.msgError("合并时所选单据类型必须一致");for(var t=0;t<this.rows.length;t++)if("1"==this.rows[t].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var a=this.ids,n=this.dateRange;this.$refs.mergeModal.mergeDialogShow(a,n)},defaultMergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n={billIds:this.ids,bizDateRange:this.dateRange,goodCode:"1",withoutTaxAmoutLimit:"",noteDealType:"2",mergeType:"5",billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["c"])(n).then((function(t){clearInterval(e.loadingTime),e.showProgress=!1;var a=t.object;if(0!=a.length){for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}else e.msgError(t.msg)}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},ccdmergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n=this.ids,i=this.dateRange,o={billIds:n,bizDateRange:i,billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["a"])(o).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))},ccdmergeBillTs:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=!1,n=0;n<this.rows.length;n++)if("1"==this.rows[n].billSplitType){a=!0;break}if(a){var i=this.ids,o=this.dateRange,r={billIds:i,bizDateRange:o,billSplitType:"3"};this.dynamicLoadingShow(400,"特殊合并中"),Object(c["b"])(r).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))}else this.msgError("特殊合并时所选单据必须含有拆分状态")},splitByAmount:function(){for(var e=this,t=0;t<this.rows.length;t++)if("2"==this.rows[t].billSplitType)return void this.msgError("存在单据已进行过合并，不能拆分");this.operationIdArr=Object(y["e"])(this.ids),this.operationRowArr=Object(y["e"])(this.rows),this.showProgress=!0,this.functionName="拆分中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.splitByAmountLogic()},splitByAmountLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=null,n={id:t,roundingNumber:a,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(u["b"])(n).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.operationIndex<e.operationIdArr.length?e.splitByAmountLogic():(e.renewOperationParam(),e.getList())})).catch((function(t){e.renewOperationParam(),e.getList()}))},handleInvTypeUpdate:function(){this.updateInvTypeOpen=!0},submitUpdateInvType:function(){var e=this,t=Object(y["e"])(this.dateRange);t[0]=t[0]+" 00:00:00",t[1]=t[1]+" 23:59:59";var a={ids:Object(y["e"])(this.ids),dateRange:t,invType:this.updateInvTypeForm.invType};Object(l["y"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.updateInvTypeOpen=!1,e.getList()):e.msgError(t.msg)}))},updateInvTypeDialogClose:function(){this.updateInvTypeForm={invType:"2"}},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;return t.row_index=a,"1"==t.allStatus?"violet":"2"==t.allStatus?"deep-blue":"3"==t.allStatus?"red":"4"==t.allStatus?"orange":"5"==t.allStatus?"green":void 0},noteInputBlur:function(e){e.showInput=!1;var t={id:e.id,bizDate:e.bizDate,note:e.note};Object(l["w"])(t);for(var a=0;a<this.billList.length;a++)this.billList[a].showInput=!1},cellClick:function(e,t){"note"==t.property?0==e.showInput&&(e.showInput=!e.showInput):e.showInput=!1},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},copyInvoice:function(){var e=this;this.copyInvoiceOpen=!0,this.$nextTick((function(){e.$refs.copyInvoiceForm.clearValidate()}))},copyInvoiceClose:function(){this.copyInvoiceForm={invCode:null,invNo:null}},sureCopyInvoice:function(){var e=this;this.$refs.copyInvoiceForm.validate((function(t){if(t){var a={invCodeNo:e.copyInvoiceForm.invCode+"_"+e.copyInvoiceForm.invNo};e.$refs.qdbilldetailcomp.fillBillDialogByInvCodeNo(a).then((function(t){0!=t&&(e.copyInvoiceOpen=!1)}))}}))},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)},handleSplitMergePreview:function(){var e=this;if("0"!=this.rows[0].billSplitType){var t={id:this.rows[0].id,bizDate:this.rows[0].bizDate};this.mainLoading=!0,Object(l["t"])(t).then((function(t){e.mainLoading=!1,200==t.code?t.data.length>0?(e.splitMergePreviewOpen=!0,e.splitMergeList=t.data):e.splitMergeList=[]:e.msgError(t.msg)})).catch((function(){e.mainLoading=!1}))}else this.msgError("此单据未进行拆分合并")},splitMergePreviewClose:function(){},printSure:function(){var e=this;this.print.open=!1;var t={id:this.openSuccess[0].id,invDate:this.openSuccess[0].invDate,isDetail:"0",isPre:"0"};Object(v["g"])(200,"发票号码\n【"+this.openSuccess[0].invNo+"】\n正在被打印",this,!1),Object(h["A"])(t).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?e.msgSuccess("[发票代码:"+e.openSuccess[0].invCode+",发票号码:"+e.openSuccess[0].invNo+"]"):(e.msgError("当前发票号码【"+e.openSuccess[0].invNo+"】打印失败，"+t.msg),e.print.open=!1),e.openSuccess=[]})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("当前发票号码【"+e.openSuccess[0].invNo+"】打印失败，请确认"),e.print.open=!1,e.openSuccess=[]}))}}},x=_,w=(a("94ff"),a("2877")),k=Object(w["a"])(x,n,i,!1,null,"f7e8e7d6",null);t["default"]=k.exports},"1b86":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"发票id",prop:"infoPersonalId"}},[a("el-input",{attrs:{placeholder:"请输入发票id",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.infoPersonalId,callback:function(t){e.$set(e.queryParams,"infoPersonalId",t)},expression:"queryParams.infoPersonalId"}})],1),a("el-form-item",{attrs:{label:"报销状态",prop:"reimStatus"}},[a("el-select",{attrs:{placeholder:"请选择报销状态",clearable:"",size:"small"},model:{value:e.queryParams.reimStatus,callback:function(t){e.$set(e.queryParams,"reimStatus",t)},expression:"queryParams.reimStatus"}},e._l(e.reimStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"报销单号",prop:"reimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入报销单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reimBillNo,callback:function(t){e.$set(e.queryParams,"reimBillNo",t)},expression:"queryParams.reimBillNo"}})],1),a("el-form-item",{attrs:{label:"BPM流程单号",prop:"bpmBillNo"}},[a("el-input",{attrs:{placeholder:"请输入BPM流程单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bpmBillNo,callback:function(t){e.$set(e.queryParams,"bpmBillNo",t)},expression:"queryParams.bpmBillNo"}})],1),a("el-form-item",{attrs:{label:"AP单号",prop:"apBillNo"}},[a("el-input",{attrs:{placeholder:"请输入AP单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.apBillNo,callback:function(t){e.$set(e.queryParams,"apBillNo",t)},expression:"queryParams.apBillNo"}})],1),a("el-form-item",{attrs:{label:"结算单号",prop:"settlementNo"}},[a("el-input",{attrs:{placeholder:"请输入结算单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.settlementNo,callback:function(t){e.$set(e.queryParams,"settlementNo",t)},expression:"queryParams.settlementNo"}})],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证编码",prop:"voucherCode"}},[a("el-input",{attrs:{placeholder:"请输入凭证凭证编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherCode,callback:function(t){e.$set(e.queryParams,"voucherCode",t)},expression:"queryParams.voucherCode"}})],1),a("el-form-item",{attrs:{label:"凭证制单人",prop:"voucherMaker"}},[a("el-input",{attrs:{placeholder:"请输入凭证制单人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherMaker,callback:function(t){e.$set(e.queryParams,"voucherMaker",t)},expression:"queryParams.voucherMaker"}})],1),a("el-form-item",{attrs:{label:"过账日期",prop:"postingDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择过账日期"},model:{value:e.queryParams.postingDate,callback:function(t){e.$set(e.queryParams,"postingDate",t)},expression:"queryParams.postingDate"}})],1),a("el-form-item",{attrs:{label:"SAP会计凭证号",prop:"sapVoucherNo"}},[a("el-input",{attrs:{placeholder:"请输入SAP会计凭证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sapVoucherNo,callback:function(t){e.$set(e.queryParams,"sapVoucherNo",t)},expression:"queryParams.sapVoucherNo"}})],1),a("el-form-item",{attrs:{label:"OA报销单号",prop:"oaReimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入OA报销单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.oaReimBillNo,callback:function(t){e.$set(e.queryParams,"oaReimBillNo",t)},expression:"queryParams.oaReimBillNo"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:reimRecord:add"],expression:"['income:reimRecord:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:reimRecord:edit"],expression:"['income:reimRecord:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:reimRecord:remove"],expression:"['income:reimRecord:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:reimRecord:export"],expression:"['income:reimRecord:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.reimRecordList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"发票id",align:"center",prop:"infoPersonalId",width:"160"}}),a("el-table-column",{attrs:{label:"发票类型",align:"center",prop:"invType",width:"120",formatter:e.invTypeFormat}}),a("el-table-column",{attrs:{label:"发票代码",align:"center",prop:"invCode"}}),a("el-table-column",{attrs:{label:"发票号码",align:"center",prop:"invNo"}}),a("el-table-column",{attrs:{label:"报销状态",align:"center",prop:"reimStatus",formatter:e.reimStatusFormat}}),a("el-table-column",{attrs:{label:"报销金额",align:"center",prop:"reimAmount"}}),a("el-table-column",{attrs:{label:"报销单号",align:"center",prop:"reimBillNo",width:"200"}}),a("el-table-column",{attrs:{label:"BPM流程单号",align:"center",prop:"bpmBillNo",width:"160"}}),a("el-table-column",{attrs:{label:"AP单号",align:"center",prop:"apBillNo"}}),a("el-table-column",{attrs:{label:"结算单号",align:"center",prop:"settlementNo"}}),a("el-table-column",{attrs:{label:"凭证号",align:"center",prop:"voucherNo"}}),a("el-table-column",{attrs:{label:"凭证编码",align:"center",prop:"voucherCode"}}),a("el-table-column",{attrs:{label:"凭证制单人",align:"center",prop:"voucherMaker"}}),a("el-table-column",{attrs:{label:"过账日期",align:"center",prop:"postingDate",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.postingDate,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"SAP会计凭证号",align:"center",prop:"sapVoucherNo",width:"160"}}),a("el-table-column",{attrs:{label:"OA报销单号",align:"center",prop:"oaReimBillNo",width:"160"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"160",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:reimRecord:edit"],expression:"['income:reimRecord:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:reimRecord:remove"],expression:"['income:reimRecord:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"发票id",prop:"infoPersonalId"}},[a("el-input",{attrs:{placeholder:"请输入发票id"},model:{value:e.form.infoPersonalId,callback:function(t){e.$set(e.form,"infoPersonalId",t)},expression:"form.infoPersonalId"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发票类型"},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"报销状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择报销状态"},model:{value:e.form.reimStatus,callback:function(t){e.$set(e.form,"reimStatus",t)},expression:"form.reimStatus"}},e._l(e.reimStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"报销金额",prop:"reimAmount"}},[a("el-input",{attrs:{placeholder:"请输入报销金额"},model:{value:e.form.reimAmount,callback:function(t){e.$set(e.form,"reimAmount",t)},expression:"form.reimAmount"}})],1),a("el-form-item",{attrs:{label:"报销单号",prop:"reimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入报销单号"},model:{value:e.form.reimBillNo,callback:function(t){e.$set(e.form,"reimBillNo",t)},expression:"form.reimBillNo"}})],1),a("el-form-item",{attrs:{label:"SAP会计凭证号",prop:"sapVoucherNo"}},[a("el-input",{attrs:{placeholder:"请输入SAP会计凭证号"},model:{value:e.form.sapVoucherNo,callback:function(t){e.$set(e.form,"sapVoucherNo",t)},expression:"form.sapVoucherNo"}})],1),a("el-form-item",{attrs:{label:"OA报销单号",prop:"oaReimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入OA报销单号"},model:{value:e.form.oaReimBillNo,callback:function(t){e.$set(e.form,"oaReimBillNo",t)},expression:"form.oaReimBillNo"}})],1),a("el-form-item",{attrs:{label:"BPM流程号",prop:"bpmBillNo"}},[a("el-input",{attrs:{placeholder:"请输入BPM流程号"},model:{value:e.form.bpmBillNo,callback:function(t){e.$set(e.form,"bpmBillNo",t)},expression:"form.bpmBillNo"}})],1),a("el-form-item",{attrs:{label:"AP单号",prop:"apBillNo"}},[a("el-input",{attrs:{placeholder:"请输入AP单号"},model:{value:e.form.apBillNo,callback:function(t){e.$set(e.form,"apBillNo",t)},expression:"form.apBillNo"}})],1),a("el-form-item",{attrs:{label:"结算单号",prop:"settlementNo"}},[a("el-input",{attrs:{placeholder:"请输入结算单号"},model:{value:e.form.settlementNo,callback:function(t){e.$set(e.form,"settlementNo",t)},expression:"form.settlementNo"}})],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号"},model:{value:e.form.voucherNo,callback:function(t){e.$set(e.form,"voucherNo",t)},expression:"form.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证编码",prop:"voucherCode"}},[a("el-input",{attrs:{placeholder:"请输入凭证编码"},model:{value:e.form.voucherCode,callback:function(t){e.$set(e.form,"voucherCode",t)},expression:"form.voucherCode"}})],1),a("el-form-item",{attrs:{label:"凭证制单人",prop:"voucherMaker"}},[a("el-input",{attrs:{placeholder:"请输入凭证制单人"},model:{value:e.form.voucherMaker,callback:function(t){e.$set(e.form,"voucherMaker",t)},expression:"form.voucherMaker"}})],1),a("el-form-item",{attrs:{label:"过账日期",prop:"postingDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择过账日期"},model:{value:e.form.postingDate,callback:function(t){e.$set(e.form,"postingDate",t)},expression:"form.postingDate"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/income/reimRecord/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/income/reimRecord/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/income/reimRecord",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/income/reimRecord",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/income/reimRecord/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/income/reimRecord/export",method:"get",params:e})}var p={name:"ReimRecord",data:function(){return{tableHeight:null,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,reimRecordList:[],title:"",open:!1,reimStatusOptions:[],invTypeOptions:[],queryParams:{pageNum:1,pageSize:10,infoPersonalId:null,reimStatus:null,reimBillNo:null,voucherNo:null,sapVoucherNo:null,oaReimBillNo:null,postingDate:null,apBillNo:null,settlementNo:null,voucherMaker:null,voucherCode:null,bpmBillNo:null},form:{},rules:{deptId:[{required:!0,message:"凭证制单人不能为空",trigger:"blur"}],createBy:[{required:!0,message:"凭证制单人不能为空",trigger:"blur"}],createTime:[{required:!0,message:"凭证制单人不能为空",trigger:"blur"}]}}},created:function(){var e=this;this.getList(),this.getDicts("income_reim_record_status").then((function(t){e.reimStatusOptions=t.data})),Promise.all([this.getDicts("other_ticket"),this.getDicts("income_check_inv_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data)}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.reimRecordList=t.rows,e.total=t.total,e.loading=!1}))},reimStatusFormat:function(e,t){return this.selectDictLabel(this.reimStatusOptions,e.reimStatus)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,infoIdReimBillNo:null,infoPersonalId:null,invType:null,reimStatus:null,reimAmount:null,reimBillNo:null,voucherNo:null,sapVoucherNo:null,oaReimBillNo:null,postingDate:null,apBillNo:null,settlementNo:null,voucherMaker:null,voucherCode:null,bpmBillNo:null,deptId:null,createBy:null,createTime:null,updateTime:null,updateBy:null,ex1:null,ex2:null,ex3:null,ex4:null,ex5:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加票夹发票报销请求记录"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改票夹发票报销请求记录"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除票夹发票报销请求记录编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有票夹发票报销请求记录数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},"1b863":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.statisticsLoading,expression:"statisticsLoading"}],staticClass:"app-container",staticStyle:{height:"100%"},attrs:{"element-loading-text":"拼命加载中"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")]),a("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],attrs:{type:"primary",icon:"el-icon-printer",size:"mini"},on:{click:e.handlePrint}},[e._v("打印")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"typeDesc",label:"发票类型",width:"180",align:"center"}}),a("el-table-column",{attrs:{label:"开票份数",align:"center"}},[a("el-table-column",{attrs:{prop:"normalCount",label:"总份数",align:"center"}}),a("el-table-column",{attrs:{prop:"openCount",label:"其中:正常",align:"center"}}),a("el-table-column",{attrs:{prop:"redCount",label:"其中:红冲",align:"center"}}),a("el-table-column",{attrs:{prop:"rededCount",label:"其中:被红冲",align:"center"}}),a("el-table-column",{attrs:{prop:"cancelCount",label:"其中:作废",align:"center"}})],1),a("el-table-column",{attrs:{prop:"openNoTaxAmount",label:"汇总金额",align:"center"}}),a("el-table-column",{attrs:{prop:"openTaxAmount",label:"汇总税额",align:"center"}}),a("el-table-column",{attrs:{prop:"openAmount",label:"价税合计",align:"center"}})],1),e.isPrint?a("div",{attrs:{id:"print-body"}},[e._m(0),a("table",{staticClass:"print-table"},[e._m(1),a("tbody",e._l(e.tableData,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.typeDesc))]),a("td",[e._v(e._s(t.normalCount))]),a("td",[e._v(e._s(t.openCount))]),a("td",[e._v(e._s(t.redCount))]),a("td",[e._v(e._s(t.rededCount))]),a("td",[e._v(e._s(t.cancelCount))]),a("td",[e._v(e._s(t.openNoTaxAmount))]),a("td",[e._v(e._s(t.openTaxAmount))]),a("td",[e._v(e._s(t.openAmount))])])})),0)])]):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("h3",{staticStyle:{margin:"0px",padding:"18px"}},[e._v("发票统计表")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[e._v("发票类型")]),a("th",{attrs:{colspan:"5"}},[e._v("开票份数")]),a("th",{attrs:{rowspan:"2"}},[e._v("汇总金额")]),a("th",{attrs:{rowspan:"2"}},[e._v("汇总税额")]),a("th",{attrs:{rowspan:"2"}},[e._v("价税合计")])]),a("tr",[a("th",[e._v("总份数")]),a("th",[e._v("其中:正常")]),a("th",[e._v("其中:红冲")]),a("th",[e._v("其中:被红冲")]),a("th",[e._v("其中:作废")])])])}],o=(a("b680"),a("45bd")),r=a("ed08"),l={name:"index.vue",data:function(){return{showSearch:!0,statisticsLoading:!0,tableData:[],queryParams:{invType:null,buyName:null},dateRange:[],invTypeOptions:[],isPrint:!1,printObj:{id:"print-body",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'}}},created:function(){var e=this;this.getDicts("output_all_inv_type").then((function(t){e.invTypeOptions=t.data}));var t=this.$moment(new Date),a={beginTime:t.startOf("month").format("YYYY-MM-DD"),endTime:t.endOf("month").format("YYYY-MM-DD")};this.$set(this.dateRange,0,a.beginTime),this.$set(this.dateRange,1,a.endTime),this.handleQuery()},methods:{handleQuery:function(){var e=this;this.statisticsLoading=!0;var t=Object(r["e"])(this.queryParams);t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1],Object(o["b"])(t).then((function(t){if(e.statisticsLoading=!1,200==t.code){e.tableData=t.data.details;for(var a=0,n=e.tableData.length;a<n;a++){var i=e.tableData[a];i.normalCount=i.openCount+i.redCount+i.cancelCount+i.rededCount,i.openNoTaxAmount=(i.openAmount-i.openTaxAmount+i.redAmount-i.redTaxAmount).toFixed(2),i.openTaxAmount=(i.openTaxAmount+i.redTaxAmount).toFixed(2),i.openAmount=(i.openAmount+i.redAmount).toFixed(2)}e.tableData.push({typeDesc:"合计",openCount:t.data.openCount,normalCount:t.data.openCount+t.data.redCount+t.data.cancelCount+t.data.rededCount,redCount:t.data.redCount,rededCount:t.data.rededCount,cancelCount:t.data.cancelCount,openNoTaxAmount:(t.data.openAmount-t.data.openTaxAmount+t.data.redAmount-t.data.redTaxAmount).toFixed(2),openTaxAmount:(t.data.openTaxAmount+t.data.redTaxAmount).toFixed(2),openAmount:(t.data.openAmount+t.data.redAmount).toFixed(2)})}})).catch((function(){e.statisticsLoading=!1}))},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handlePrint:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)}}},s=l,c=(a("dcc7"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"a9e2c0ce",null);t["default"]=u.exports},"1e4b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-editor-container"},[a("div",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:statistics"],expression:"['output:invoice:statistics']"}],staticClass:"public-output-statistics"},[a("panel-group",{attrs:{statisticsData:e.statisticsData},on:{handleSetBarChartData:e.handleSetBarChartData}}),a("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[a("div",{staticClass:"search-form"},[a("label",[e._v("日期：")]),a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.statisticsDateRange,callback:function(t){e.statisticsDateRange=t},expression:"statisticsDateRange"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSearchStatistics}},[e._v("查询")])],1),a("bar-chart",{ref:"barChat",attrs:{chartData:e.currData}})],1)],1),a("div"),e.checkPermi(["output:invoice:statistics"])?e._e():a("div",{staticClass:"main-home"})])},i=[],o=(a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("fbc4")),r=a("eab4"),l=a("0a5c"),s=a("d153"),c=a("9488"),u=a("45bd"),d=a("e350"),p={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},h={name:"Index",components:{PanelGroup:o["default"],LineChart:r["default"],RaddarChart:l["default"],PieChart:s["default"],BarChart:c["default"]},data:function(){return{lineChartData:p.newVisitis,statisticsData:{openCount:0,cancelCount:0,redCount:0,openAmount:0,cancelAmount:0,redAmount:0,errorAmount:0,errorCount:0,unOpenAmount:0,unOpenCount:0},openData:[],cancelData:[],redData:[],allData:[],currData:[],statisticsDateRange:[]}},created:function(){var e=this.$moment(new Date);this.watermark({watermark_txt:this.$store.state.user.nickName+":"+e.format("YYYY-MM-DD")}),this.statisticsDateRange=[e.startOf("month").format("YYYY-MM-DD"),e.endOf("month").format("YYYY-MM-DD")],this.$store.state.user.deptId&&this.handleSearchStatistics()},methods:{handleSetBarChartData:function(e){var t=this;this.currData=[],"open"==e?this.openData.forEach((function(e,a,n){t.$set(t.currData,a,e)})):"cancel"==e?this.cancelData.forEach((function(e,a,n){t.$set(t.currData,a,e)})):"red"==e&&this.redData.forEach((function(e,a,n){t.$set(t.currData,a,e)}))},checkPermi:function(e){return Object(d["a"])(e)},handleSearchStatistics:function(){var e=this,t={beginTime:this.statisticsDateRange[0],endTime:this.statisticsDateRange[1]},a={beginBizDate:this.statisticsDateRange[0],endBizDate:this.statisticsDateRange[1]};Promise.all([Object(u["b"])(t),Object(u["a"])(a)]).then((function(t){if(200==t[0].code){var a=t[0].data;for(var n in e.statisticsData)e.$set(e.statisticsData,n,a[n]);var i=t[0].data.details,o=["type"],r=["开票数量"],l=["作废数量"],s=["红冲数量"],c=["开票金额"],u=["作废金额"],d=["红冲金额"];i.forEach((function(e,t,a){o.push(e.typeDesc),r.push(e.openCount),l.push(e.cancelCount),s.push(e.redCount),c.push(e.openAmount),u.push(e.cancelAmount),d.push(e.redAmount)})),e.$set(e.openData,0,o),e.$set(e.openData,1,r),e.$set(e.openData,2,c),e.$set(e.cancelData,0,o),e.$set(e.cancelData,1,l),e.$set(e.cancelData,2,u),e.$set(e.redData,0,o),e.$set(e.redData,1,s),e.$set(e.redData,2,d),e.$set(e.currData,0,o),e.$set(e.currData,1,r),e.$set(e.currData,2,c),e.$set(e.currData,3,l),e.$set(e.currData,4,u),e.$set(e.currData,5,s),e.$set(e.currData,6,d),e.$refs.barChat.initChart()}if(200==t[1].code){var p=t[1].data;for(var h in p)e.$set(e.statisticsData,h,p[h])}})).catch((function(){}))}}},m=h,f=(a("31d3"),a("2877")),b=Object(f["a"])(m,n,i,!1,null,"079649e6",null);t["default"]=b.exports},"1e8b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{model:{value:e.user.nickName,callback:function(t){e.$set(e.user,"nickName",t)},expression:"user.nickName"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.user.phonenumber,callback:function(t){e.$set(e.user,"phonenumber",t)},expression:"user.phonenumber"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[a("el-radio",{attrs:{label:"0"}},[e._v("男")]),a("el-radio",{attrs:{label:"1"}},[e._v("女")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},i=[],o=a("c0c7"),r={props:{user:{type:Object}},data:function(){return{rules:{nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(o["m"])(e.user).then((function(t){200===t.code&&e.msgSuccess("修改成功")}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/index"})}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},"1f34":function(e,t,a){"use strict";a.r(t);var n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,xs:24}},[a("div",{ref:"leftSearchInput",staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入组织名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},on:{change:e.treeDeptNameChange},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),a("div",{staticClass:"head-container",style:{height:e.treeHeight+"px",overflow:"auto",marginRight:"-37px"}},[a("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)]),a("el-col",{staticStyle:{background:"white",position:"relative"},attrs:{span:20,xs:24}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"用户账号",prop:"userName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户账号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),a("el-form-item",{attrs:{label:"用户名称",prop:"nickName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.nickName,callback:function(t){e.$set(e.queryParams,"nickName",t)},expression:"queryParams.nickName"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入手机号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.phonenumber,callback:function(t){e.$set(e.queryParams,"phonenumber",t)},expression:"queryParams.phonenumber"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"用户状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:add"],expression:"['system:user:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:edit"],expression:"['system:user:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:remove"],expression:"['system:user:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:import"],expression:"['system:user:import']"}],attrs:{type:"info",icon:"el-icon-upload2",size:"mini"},on:{click:e.handleImportUser}},[e._v("导入")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:export"],expression:"['system:user:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.userList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"用户账号",align:"center",prop:"userName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"用户名称",align:"center",prop:"nickName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"组织",align:"center",prop:"depts","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.depts,(function(n,i){return a("span",[e._v(e._s(i!=t.row.depts.length-1?n.deptName+"，":n.deptName))])}))}}])}),a("el-table-column",{attrs:{label:"手机号码",align:"center",prop:"phonenumber",width:"120"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"240","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:edit"],expression:"['system:user:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),1!==t.row.userId?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:remove"],expression:"['system:user:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e(),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:resetPwd"],expression:"['system:user:resetPwd']"}],attrs:{size:"mini",type:"text",icon:"el-icon-key"},on:{click:function(a){return e.handleResetPwd(t.row)}}},[e._v("重置")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-rank"},on:{click:function(a){return e.handleTransfer(t.row)}}},[e._v("迁移")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"",id:"paramSetting","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名称",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1)],1),a("el-col",{attrs:{span:12}},[void 0==e.form.userId?a("el-form-item",{attrs:{label:"用户账号",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"组织角色",prop:"deptrole"}},[a("el-cascader",{style:{width:"100%"},attrs:{options:e.deptRoleOptions,props:e.deptRoleProp,filterable:"",placeholder:"请选择组织角色",clearable:""},model:{value:e.form.deptrole,callback:function(t){e.$set(e.form,"deptrole",t)},expression:"form.deptrole"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:"11"},model:{value:e.form.phonenumber,callback:function(t){e.$set(e.form,"phonenumber",t)},expression:"form.phonenumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[void 0==e.form.userId?a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入用户密码",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"岗位"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.postIds,callback:function(t){e.$set(e.form,"postIds",t)},expression:"form.postIds"}},e._l(e.postOptions,(function(e){return a("el-option",{key:e.postId,attrs:{label:e.postName,value:e.postId,disabled:0==e.status}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户性别"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"过期时间"}},[a("el-date-picker",{attrs:{"picker-options":e.pickerOption,size:"small","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择账号过期时间"},model:{value:e.form.expireTime,callback:function(t){e.$set(e.form,"expireTime",t)},expression:"form.expireTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:e.transferDialog.title,visible:e.transferDialog.open,width:"800px","append-to-body":"",id:"transferDialog","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.transferDialog,"open",t)},close:e.transferDialogClose}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"transferDialogQueryForm",attrs:{model:e.transferDialog.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"用户账号",prop:"userName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户账号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.transferDialog.queryParams.userName,callback:function(t){e.$set(e.transferDialog.queryParams,"userName",t)},expression:"transferDialog.queryParams.userName"}})],1),a("el-form-item",{attrs:{label:"用户名称",prop:"nickName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.transferDialog.queryParams.nickName,callback:function(t){e.$set(e.transferDialog.queryParams,"nickName",t)},expression:"transferDialog.queryParams.nickName"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入手机号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.transferDialog.queryParams.phonenumber,callback:function(t){e.$set(e.transferDialog.queryParams,"phonenumber",t)},expression:"transferDialog.queryParams.phonenumber"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"用户状态",clearable:"",size:"small"},model:{value:e.transferDialog.queryParams.status,callback:function(t){e.$set(e.transferDialog.queryParams,"status",t)},expression:"transferDialog.queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.transferDialog.dateRange,callback:function(t){e.$set(e.transferDialog,"dateRange",t)},expression:"transferDialog.dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.transferDialogHandleQuery}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"mini"},on:{click:e.transferDialogResetQuery}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",disabled:!e.transferDialog.ids.length},on:{click:e.handleTransferSure}},[e._v("确定")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.transferDialog.loading,expression:"transferDialog.loading"}],ref:"transferTable",attrs:{data:e.transferDialog.tableList,height:e.transferDialog.tableHeight,"row-key":"userId"},on:{"selection-change":function(t){return e.handleSelectionChange(t,"transferDialog")},"row-click":function(t,a,n){return e.currClickRow(t,a,n,"transferDialog")}}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center","reserve-selection":!0,selectable:function(t,a){return e.handleSelectable(t,a,"transferDialog")}}}),a("el-table-column",{attrs:{label:"用户账号",align:"center",prop:"userName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"用户名称",align:"center",prop:"nickName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"组织",align:"center",prop:"depts","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.depts,(function(n,i){return a("span",[e._v(e._s(i!=t.row.depts.length-1?n.deptName+"，":n.deptName))])}))}}])}),a("el-table-column",{attrs:{label:"手机号码",align:"center",prop:"phonenumber",width:"120"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.transferDialog.total>0,expression:"transferDialog.total>0"}],attrs:{total:e.transferDialog.total,page:e.transferDialog.queryParams.pageNum,limit:e.transferDialog.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.transferDialog.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.transferDialog.queryParams,"pageSize",t)},pagination:e.transferDialogHandleQuery}})],1),a("el-dialog",{attrs:{title:e.uploadUser.title,visible:e.uploadUser.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.uploadUser,"open",t)}}},[a("el-upload",{ref:"uploadUser",attrs:{limit:1,accept:".xlsx, .xls",headers:e.uploadUser.headers,action:e.uploadUser.url+"?updateSupport="+e.uploadUser.updateSupport,disabled:e.uploadUser.isUploading,"on-progress":e.handleUserFileUploadProgress,"on-success":e.handleUserFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"info"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitUserFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.uploadUser.open=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],r=a("ade3"),l=(a("4de4"),a("d3b7"),a("a15b"),a("13d5"),a("99af"),a("d81d"),a("c0c7")),s=a("5f87"),c=a("fcb7"),u=a("ca17"),d=a.n(u),p=(a("542c"),a("c38a")),h=a("ed08"),m=(n={name:"User",components:{Treeselect:d.a},data:function(){return{routeLoading:!1,loading:!0,valueConsistsOf:"BRANCH_PRIORITY",ids:[],single:!0,pickerOption:{disabledDate:function(e){return e.getTime()<Date.now()}},deptRoleOptions:[],deptRoleProp:{multiple:!0},multiple:!0,showSearch:!0,total:0,userList:null,title:"",deptOptions:void 0,currDepts:[],open:!1,deptName:null,depts:[],initPassword:void 0,dateRange:[],statusOptions:[],sexOptions:[],postOptions:[],roleOptions:[],form:{},defaultProps:{children:"children",label:"label",autoSelectAncestors:!1},uploadUser:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(s["a"])()},url:"/prod-api/system/user/importUser"},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(s["a"])()},url:"/prod-api/system/user/importUser"},queryParams:{pageNum:1,pageSize:10,userName:void 0,nickName:void 0,phonenumber:void 0,status:void 0,deptId:void 0},rules:{userName:[{required:!0,message:"用户账号不能为空",trigger:"blur"}],nickName:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],deptrole:[{required:!0,message:"组织角色不能为空",trigger:["blur","change"]}],password:[{required:!0,pattern:/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/,message:"密码长度至少为 8 位, 并包含字母, 数字及特殊字符(!@#$%^&*)",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null,tableHeight:null,treeHeight:null,transferDialog:{title:"迁移",open:!1,tableList:[],queryParams:{pageNum:1,pageSize:500,userName:null,nickName:null,phonenumber:null,status:null},dateRange:[],total:0,loading:!1,ids:[],tableHeight:0,currRowId:null}}},watch:{deptName:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this;this.getList(),this.getTreeselect(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_user_sex").then((function(t){e.sexOptions=t.data})),this.getConfigKey("sys.user.initPassword").then((function(t){e.initPassword=t.msg}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.treeHeight=this.calcTreeHeight(),this.transferDialog.tableHeight=.6*document.documentElement.clientHeight,window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.treeHeight=e.calcTreeHeight(),e.transferDialog.tableHeight=.6*document.documentElement.clientHeight}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.treeHeight=this.calcTreeHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.treeHeight=e.calcTreeHeight()}}},Object(r["a"])(n,"watch",{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}}),Object(r["a"])(n,"methods",{calcTreeHeight:function(){var e=window.innerHeight,t=this.$refs.leftSearchInput;t=void 0==t?0:t.offsetHeight;var a=84,n=e-t-a-50;return n<236?236:n},handleUserFileUploadProgress:function(e,t,a){this.uploadUser.isUploading=!0},handleUserFileSuccess:function(e,t,a){this.uploadUser.open=!1,this.uploadUser.isUploading=!1,this.$refs.uploadUser.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},getList:function(){var e=this;this.loading=!0;var t=Object(h["e"])(this.addDateRange(this.queryParams,this.dateRange));t.deptId||(t.deptIdStr=this.currDepts.join(",")),Object(l["i"])(t).then((function(t){e.userList=t.rows,e.total=t.total,e.loading=!1}))},getTreeselect:function(){var e=this,t={deptName:this.deptName};Object(c["d"])(t).then((function(t){e.deptOptions=t.data;var a=t.data.reduce((function(e,t){return e.push(t.id),e}),[]);e.currDepts=a}))},treeDeptNameChange:function(){var e=this,t={deptName:this.deptName};this.queryParams.deptId=null,Object(c["d"])(t).then((function(t){e.deptOptions=t.data;var a=e.recursionGetDeptId(t.data,[]);e.currDepts=a,e.getList()}))},submitUserFileForm:function(){this.$refs.uploadUser.submit()},recursionGetDeptId:function(e,t){for(var a=0,n=e.length;a<n;a++)t.push(e[a].id),e[a].children&&(t=t.concat(this.recursionGetDeptId(e[a].children,[])));return t},getOptionalDeptRoleList:function(){var e=this;Object(c["e"])().then((function(t){e.deptRoleOptions=t.data}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){this.queryParams.deptId=e.id,this.getList()},handleStatusChange:function(e){var t=this,a="1"===e.status?"启用":"停用";this.$confirm('确认要"'+a+'""'+e.userName+'"用户吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["b"])(e.userId,e.status)})).then((function(){t.msgSuccess(a+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={userId:void 0,deptIds:void 0,userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,email:void 0,sex:void 0,status:"1",remark:void 0,postIds:[],roleIds:[]},this.resetForm("form")},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";"main"==t?(this.ids=e.map((function(e){return e.userId})),this.single=1!=e.length,this.multiple=!e.length):"transferDialog"==t&&(this.transferDialog.ids=e.map((function(e){return e.userId})))},handleAdd:function(){var e=this;this.reset(),this.getOptionalDeptRoleList(),Object(l["g"])().then((function(t){e.postOptions=t.posts,e.roleOptions=t.roles,e.open=!0,e.title="添加用户",e.form.password=e.initPassword}))},handleUpdate:function(e){var t=this;this.routeLoading=!0,this.reset(),this.getOptionalDeptRoleList();var a=e.userId||this.ids;Object(l["g"])(a).then((function(e){t.routeLoading=!1,t.form=e.data,t.postOptions=e.posts,t.roleOptions=e.roles,t.form.postIds=e.postIds,t.form.deptrole=e.deptRoles,t.$nextTick((function(){t.form.deptrole=t.$refs.deptRoleCascader.getCheckedNodes().map((function(e){return e.path})).filter((function(e){return e.length>1}))})),t.open=!0,t.title="修改用户",t.form.password=""}))},handleResetPwd:function(e){var t=this;this.$prompt('请输入"'+e.userName+'"的新密码',"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(a){var n=a.value;Object(l["j"])(e.userId,n).then((function(e){200===e.code&&t.msgSuccess("修改成功，新密码是："+n)}))})).catch((function(){}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=e.form.deptrole;if(!a||0==a.length)return void e.msgError("请选择至少一个组织角色");for(var n=[],i=[],o=0;o<a.length;o++)-1==n.indexOf(a[o][0])&&n.push(a[o][0]),i.push(a[o][1]);e.form.deptIds=n,e.form.roleIds=i,void 0!=e.form.userId?Object(l["l"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(l["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))}}))},handleDelete:function(e){var t=this,a=e.userId||this.ids;this.$confirm('是否确认删除用户编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["e"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleImportUser:function(){this.uploadUser.title="用户数据导入",this.uploadUser.open=!0},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有用户数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(p["g"])(10,"导出中",e),Object(l["f"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"用户列表.xls",e)})).catch((function(){}))},handleImport:function(){this.upload.title="用户导入",this.upload.open=!0},importTemplate:function(){var e="/";"/"===e&&(e=""),document.location=e+"/data/ImportUserTemp.xls"},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()},handleTransfer:function(e){this.transferDialog.open=!0,this.transferDialog.currRowId=e.userId,this.transferDialogHandleQuery()},transferDialogHandleQuery:function(){var e=this;this.transferDialog.loading=!0;var t=Object(h["e"])(this.addDateRange(this.transferDialog.queryParams,this.transferDialog.dateRange));Object(l["i"])(t).then((function(t){e.transferDialog.tableList=t.rows,e.transferDialog.total=t.total,e.transferDialog.loading=!1}))},transferDialogResetQuery:function(){this.transferDialog.dateRange=[],this.resetForm("transferDialogQueryForm"),this.transferDialogHandleQuery()},handleTransferSure:function(){var e=this,t={userId:this.transferDialog.currRowId,chooseIds:this.transferDialog.ids};this.$vLoading.show(),Object(l["k"])(t).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("迁移成功"),e.transferDialog.open=!1):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))},transferDialogClose:function(){this.$refs.transferTable.clearSelection(),this.transferDialog.queryParams={pageNum:1,pageSize:500,userName:null,nickName:null,phonenumber:null,status:null}},currClickRow:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main";if("transferDialog"==n){if(e.userId==this.transferDialog.currRowId)return;this.$refs.transferTable.toggleRowSelection(e)}},handleSelectable:function(e,t,a){return e.userId!=this.transferDialog.currRowId}}),n),f=m,b=(a("9cb1"),a("af1e"),a("2877")),g=Object(b["a"])(f,i,o,!1,null,"529e8a76",null);t["default"]=g.exports},"1f6e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("h2",[e._v("发起人："+e._s(e.form.createName))]),a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业务类型",disabled:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.approvalTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"原因"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1)],1),e._l(e.fromData,(function(t,n){return a("div",{key:n},[a("h2",[e._v(e._s(t.taskNodeName))]),a("h3",[e._v("审批人:"+e._s(t.createName))]),a("h3",[e._v("审批时间:"+e._s(t.createdDate))]),e._l(t.formHistoryDataDTO,(function(t,n){return a("el-form",{key:n,attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.title}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"fistoryFormData.value"}})],1)],1)}))],2)}))],2)},i=[],o=a("9b39"),r=a("b775");function l(e){return Object(r["a"])({url:"/historyFromData/ByInstanceId/"+e,method:"get"})}var s={name:"leaveHistoryForm",props:{businessKey:{type:String}},data:function(){return{form:{},fromData:[],approvalTypeOptions:[]}},created:function(){var e=this;this.getLeave(),this.historyFromData(),this.getDicts("approve_process_define").then((function(t){e.approvalTypeOptions=t.data}))},methods:{getLeave:function(){var e=this;Object(o["d"])(this.businessKey).then((function(t){e.form=t.data}))},historyFromData:function(){var e=this;l(this.businessKey).then((function(t){e.fromData=t.data}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"0b56f602",null);t["default"]=d.exports},"1fb5":function(e,t,a){"use strict";t.byteLength=u,t.toByteArray=p,t.fromByteArray=f;for(var n=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,s=r.length;l<s;++l)n[l]=r[l],i[r.charCodeAt(l)]=l;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");-1===a&&(a=t);var n=a===t?0:4-a%4;return[a,n]}function u(e){var t=c(e),a=t[0],n=t[1];return 3*(a+n)/4-n}function d(e,t,a){return 3*(t+a)/4-a}function p(e){var t,a,n=c(e),r=n[0],l=n[1],s=new o(d(e,r,l)),u=0,p=l>0?r-4:r;for(a=0;a<p;a+=4)t=i[e.charCodeAt(a)]<<18|i[e.charCodeAt(a+1)]<<12|i[e.charCodeAt(a+2)]<<6|i[e.charCodeAt(a+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===l&&(t=i[e.charCodeAt(a)]<<2|i[e.charCodeAt(a+1)]>>4,s[u++]=255&t),1===l&&(t=i[e.charCodeAt(a)]<<10|i[e.charCodeAt(a+1)]<<4|i[e.charCodeAt(a+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function m(e,t,a){for(var n,i=[],o=t;o<a;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(h(n));return i.join("")}function f(e){for(var t,a=e.length,i=a%3,o=[],r=16383,l=0,s=a-i;l<s;l+=r)o.push(m(e,l,l+r>s?s:l+r));return 1===i?(t=e[a-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[a-2]<<8)+e[a-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2:function(e,t){},"202d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"公告标题",prop:"noticeTitle"}},[a("el-input",{attrs:{placeholder:"请输入公告标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.noticeTitle,callback:function(t){e.$set(e.queryParams,"noticeTitle",t)},expression:"queryParams.noticeTitle"}})],1),a("el-form-item",{attrs:{label:"操作人员",prop:"createBy"}},[a("el-input",{attrs:{placeholder:"请输入操作人员",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.createBy,callback:function(t){e.$set(e.queryParams,"createBy",t)},expression:"queryParams.createBy"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"noticeType"}},[a("el-select",{attrs:{placeholder:"公告类型",clearable:"",size:"small"},model:{value:e.queryParams.noticeType,callback:function(t){e.$set(e.queryParams,"noticeType",t)},expression:"queryParams.noticeType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:add"],expression:"['system:notice:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:edit"],expression:"['system:notice:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:remove"],expression:"['system:notice:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.noticeList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"序号",align:"center",prop:"noticeId",width:"100"}}),a("el-table-column",{attrs:{label:"公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"公告类型",align:"center",prop:"noticeType",formatter:e.typeFormat,width:"100"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat,width:"100"}}),a("el-table-column",{attrs:{label:"创建者",align:"center",prop:"createBy",width:"100"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:edit"],expression:"['system:notice:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:notice:remove"],expression:"['system:notice:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"780px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告标题",prop:"noticeTitle"}},[a("el-input",{attrs:{placeholder:"请输入公告标题"},model:{value:e.form.noticeTitle,callback:function(t){e.$set(e.form,"noticeTitle",t)},expression:"form.noticeTitle"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告类型",prop:"noticeType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.noticeType,callback:function(t){e.$set(e.form,"noticeType",t)},expression:"form.noticeType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"有效期",prop:"validity"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择有效期"},model:{value:e.form.validity,callback:function(t){e.$set(e.form,"validity",t)},expression:"form.validity"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内容"}},[a("Editor",{model:{value:e.form.noticeContent,callback:function(t){e.$set(e.form,"noticeContent",t)},expression:"form.noticeContent"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"padding-top":"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("8b29")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{staticClass:"avatar-uploader quill-img",attrs:{action:e.uploadImgUrl,name:"file",headers:e.headers,"show-file-list":!1,"on-success":e.quillImgSuccess,"on-error":e.uploadError,"before-upload":e.quillImgBefore,accept:".jpg,.jpeg,.png,.gif"}}),a("quill-editor",{ref:"quillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},l=[],s=a("ade3"),c=(a("a9e3"),a("5f87")),u=a("953d"),d=[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]],p={props:{value:{type:String},maxSize:{type:Number,default:4e3}},components:{quillEditor:u["quillEditor"]},data:function(){var e;return e={content:this.value,uploadImgUrl:"",editorOption:{theme:"snow",placeholder:"请输入内容",modules:{toolbar:{container:d,handlers:{image:function(e){e?document.querySelector(".quill-img input").click():this.quill.format("image",!1)}}}}}},Object(s["a"])(e,"uploadImgUrl","/prod-api/common/upload"),Object(s["a"])(e,"headers",{Authorization:"Bearer "+Object(c["a"])()}),e},watch:{value:function(){this.content=this.value}},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("input",this.content)},quillImgBefore:function(e){var t=e.type;return"image/jpeg"===t||"image/png"===t||(this.$message.error("请插入图片类型文件(jpg/jpeg/png)"),!1)},quillImgSuccess:function(e,t){var a=this.$refs.quillEditor.quill;if(200==e.code){var n=a.getSelection().index;a.insertEmbed(n,"image",e.url),a.setSelection(n+1)}else this.$message.error("图片插入失败")},uploadError:function(){this.$message.error("图片插入失败")}}},h=p,m=(a("3866"),a("2877")),f=Object(m["a"])(h,r,l,!1,null,null,null),b=f.exports,g={name:"Notice",components:{Editor:b},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,noticeList:[],title:"",open:!1,statusOptions:[],typeOptions:[],queryParams:{pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,status:void 0},form:{},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"blur"}],validity:[{required:!0,message:"有效期不能为空",trigger:"change"}]}}},created:function(){var e=this;this.getList(),this.getDicts("sys_notice_status").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_notice_type").then((function(t){e.typeOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(o["e"])(this.queryParams).then((function(t){e.noticeList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},typeFormat:function(e,t){return this.selectDictLabel(this.typeOptions,e.noticeType)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:void 0,status:"1"},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.noticeId})),this.single=1!=e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加公告"},handleUpdate:function(e){var t=this;this.reset();var a=e.noticeId||this.ids;Object(o["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改公告"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.noticeId?Object(o["f"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.noticeId||this.ids;this.$confirm('是否确认删除公告编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))}}},v=g,y=Object(m["a"])(v,n,i,!1,null,null,null);t["default"]=y.exports},2113:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel-group"},[a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("error")}}},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 非增值税异常数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.errorCountFzzs,duration:2600}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 非增值税异常金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.errorAmountFzzs+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.errorAmountFzzs,decimals:e.errorAmountDecimal,duration:2600}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("unOpen")}}},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 非增值税正常数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.normalCountFzzs,duration:2600}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 非增值税正常金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.normalAmountFzzs+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.normalAmountFzzs,decimals:e.unOpenAmountDecimal,duration:2600}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("open")}}},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 增值税异常数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.errorCountZzs,duration:2600}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 增值税异常金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.errorAmountZzs+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.errorAmountZzs,decimals:e.openAmountDecimal,duration:2600}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("cancel")}}},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 增值税正常数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.normalCountZzs,duration:3e3}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 增值税正常金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.normalAmountZzs+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.normalAmountZzs,decimals:e.cancelAmountDecimal,duration:3e3}})],1)],1)])])])},i=[],o=a("ec1b"),r=a.n(o),l={components:{CountTo:r.a},props:{statisticsData:{type:Object,default:function(){return{}}}},computed:{errorAmountDecimal:function(){var e=this.statisticsData.errorAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},unOpenAmountDecimal:function(){var e=this.statisticsData.unOpenAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},openAmountDecimal:function(){var e=this.statisticsData.openAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},cancelAmountDecimal:function(){var e=this.statisticsData.cancelAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},redAmountDecimal:function(){var e=this.statisticsData.redAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0}},methods:{handleSetBarChartData:function(e){}}},s=l,c=(a("b9a3"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"9b7a2ea0",null);t["default"]=u.exports},2195:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"税控设备",name:"first"}}),a("el-tab-pane",{attrs:{label:"电子税局账号",name:"second"}})],1),"first"==e.activeName?[a("tax-no",{attrs:{type:"component"}})]:"second"==e.activeName?[a("qd-register",{attrs:{type:"component"}})]:e._e()],2)},i=[],o=a("18d6"),r=a("359c"),l={name:"Terminalmanager",components:{TaxNo:o["default"],QdRegister:r["default"]},data:function(){return{activeName:"first"}}},s=l,c=(a("8c74"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"3a262038",null);t["default"]=u.exports},"21a6":function(e,t,a){(function(a){var n,i,o;(function(a,r){i=[],n=r,o="function"===typeof n?n.apply(t,i):n,void 0===o||(e.exports=o)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){l(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function i(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,l=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,a){var l=r.URL||r.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?o(s):i(s.href)?n(e,t,a):o(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){o(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,r){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),a);else if(i(e))n(e,a,r);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){o(l)}))}}:function(e,t,a,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,a);var o="application/octet-stream"===e.type,l=/constructor/i.test(r.HTMLElement)||r.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||o&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,d=u.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});r.saveAs=l.saveAs=l,e.exports=l}))}).call(this,a("c8ba"))},2253:function(e,t,a){},"23b1":function(e,t,a){"use strict";a("b64b"),a("e9c4");var n={ESLCreate:function(){return new i},EVENT_NONE:0,EVENT_SCANPAGE_COMPLETE:1,EVENT_SAVEPAGE_COMPLETE:2,EVENT_ALLSCAN_COMPLETE:3,EVENT_ALLSAVE_COMPLETE:4,SRC_AUTO:-1,SRC_FLATBED:0,SRC_FEEDER_SIMPLEX:1,SRC_FEEDER_DUPLEX:2,IT_AUTO:-1,IT_COLOR:0,IT_GRAY:1,IT_MONO:2,DS_AUTO:-1,DS_USER:0,DS_A3:1,DS_A4:2,DS_A5:3,DS_B4:17,DS_B5:18,DS_US_LEDGER:33,DS_US_LEGAL:34,DS_US_LETTER:35,SU_INCH:0,SU_CENTIMETER:1,SU_PIXEL:2,DR_AUTO:-1,DR_NONE:0,DR_R90:1,DR_R180:2,DR_R270:3,CF_NONE:0,CF_DROPOUT_RED:1,CF_DROPOUT_GREEN:2,CF_DROPOUT_BLUE:3,CF_DROPOUT_PINK:4,CF_DROPOUT_PURPLE:5,CF_DROPOUT_YELLOW:6,CF_DROPOUT_ORANGE:7,CF_DROPOUT_EXPBLACK:8,CF_ENHANCE_RED:17,CF_ENHANCE_GREEN:18,CF_ENHANCE_BLUE:19,CF_ENHANCE_PINK:20,CF_ENHANCE_PURPLE:21,CF_ENHANCE_YELLOW:22,CF_ENHANCE_ORANGE:23,CF_ENHANCE_EXPBLACK:24,DE_NONE:0,DE_TET_STD:1,DE_TET_HIGH:2,DE_AAS:17,DFD_NONE:0,DFF_LOW:1,DFD_HIGH:2,BPS_NONE:0,BPS_VERY_LOW:1,BPS_LOW:2,BPS_MEDIUM:3,BPS_HIGH:4,ESL_IMGFILTER_USM:1,ESL_IMGFILTER_DESCREENING:2,PHR_NONE:0,PHR_ON:1,SC_NONE:0,SC_EDGE:1,SC_CONTENTS:2,SC_BOTH:3,DEST_BASE64:0,DEST_FILE:1,FF_BMP:0,FF_JPEG:1,FF_TIFF:2,FF_MULTITIFF:3,FF_PDF:4,FN_PREFIX:0,FN_BARCODE:1,FN_OCR:2,TF_NONE:0,TF_YYYYMMDD:1,TF_MMDDYYYY:2,TF_DDMMYYYY:3,TF_YYYYMMDD_HHMMSS:4,TF_MMDDYYYY_HHMMSS:5,TF_DDMMYYYY_HHMMSS:6,PT_NORMAL:0,PT_PDF_A:1,PT_HIGHCOMP:2,OL_NONE:0,OL_OCR_A:1,OL_OCR_B:2,OL_EN:16,OL_JA:17,OL_ZH_TW:18,OL_ZH_CN:19,OL_KO:20,OL_FR:21,OL_IT:22,OL_DE:23,OL_ES:24,OL_PT:25,OL_NL:26,OL_RU:27,OL_UK:28,DEFAULT_SERVER_URL:"http://localhost:51000"},i=function(){};i.prototype.Cancel=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200==t.status?e(!0,JSON.parse(t.responseText)):e(!1,null))},t.open("POST",this.serverURL+"/Cancel",!0),t.setRequestHeader("Content-Type","text/plain"),t.send(null)},i.prototype.StripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},i.prototype.Open=function(e,t){null==e.deviceName&&alert("error deviceName cannot be null"),this.serverURL=n.DEFAULT_SERVER_URL,e.serverURL&&(this.serverURL=e.serverURL),this.serverURL=this.StripTrailingSlash(this.serverURL);var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&(200==a.status?t(!0,JSON.parse(a.responseText)):t(!1,null))},a.open("POST",this.serverURL+"/Open",!0),a.setRequestHeader("Content-Type","text/plain");var i=JSON.stringify(e);a.send(i)},i.prototype.Close=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200==t.status?e(!0,JSON.parse(t.responseText)):e(!1,null))},t.open("POST",this.serverURL+"/Close",!0),t.setRequestHeader("Content-Type","text/plain"),t.send()},i.prototype.GetInfo=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200==t.status?e(!0,JSON.parse(t.responseText)):e(!1,null))},t.open("POST",this.serverURL+"/GetInfo",!0),t.setRequestHeader("Content-Type","text/plain"),t.send()},i.prototype.GetScanAndSaveEvent=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200==t.status?e(!0,JSON.parse(t.responseText)):e(!1,null))},t.open("POST",this.serverURL+"/GetScanAndSaveEvent",!0),t.setRequestHeader("Content-Type","text/plain"),t.send(null)},i.prototype.Scan=function(e,t){var a=this,i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)if(200==i.status){var e=function e(){a.GetScanAndSaveEvent((function(a,i){a?(i.eventType==n.EVENT_NONE&&setTimeout(e,1),i.eventType==n.EVENT_SCANPAGE_COMPLETE&&(t(!0,i),setTimeout(e,1)),i.eventType==n.EVENT_ALLSCAN_COMPLETE&&(0==i.errorCode?t(!0,i):t(!1,i))):t(!1,null)}))};setTimeout(e,1)}else t(!1,null)},i.open("POST",this.serverURL+"/Scan",!0),i.setRequestHeader("Content-Type","text/plain");var o=JSON.stringify(e);i.send(o)},i.prototype.Save=function(e,t){var a=this,i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)if(200==i.status){var e=function e(){a.GetScanAndSaveEvent((function(a,i){a?(i.eventType==n.EVENT_NONE&&setTimeout(e,2),i.eventType==n.EVENT_SAVEPAGE_COMPLETE&&(t(!0,i),setTimeout(e,2)),i.eventType==n.EVENT_ALLSAVE_COMPLETE&&t(!0,i)):t(!1,null)}))};setTimeout(e,2)}else t(!1,null)},i.open("POST",this.serverURL+"/Save",!0),i.setRequestHeader("Content-Type","text/plain");var o=JSON.stringify(e);i.send(o)},i.prototype.ScanAndSave_Simple=function(e,t,a,i){var o=n.ESLCreate();o.Open(e,(function(e,r){1==e?o.Scan(t,(function(e,t){e?(t.eventType==n.EVENT_SCANPAGE_COMPLETE&&i(!0,t),t.eventType==n.EVENT_ALLSCAN_COMPLETE&&(i(!0,t),o.Save(a,(function(e,t){if(1==e){if(t.eventType==n.EVENT_SAVEPAGE_COMPLETE&&i(!0,t),t.eventType==n.EVENT_ALLSAVE_COMPLETE){var a=t;o.Close((function(e,t){1==e?i(!0,a):i(!1,t)}))}}else i(!1,t),o.Close((function(e,t){}))})))):(i(!1,t),o.Close((function(e,t){})))})):i(!1,r)}))},t["a"]=n},"251d":function(e,t,a){},"259a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择业务类型",clearable:"",size:"small"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["workflow:leave:export"],expression:"['workflow:leave:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.leaveList,height:e.tableHeight}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"type",formatter:e.typeFormat}}),a("el-table-column",{attrs:{label:"标题",align:"center",prop:"title"}}),a("el-table-column",{attrs:{label:"原因",align:"center",prop:"reason"}}),a("el-table-column",{attrs:{label:"创建人",align:"center",prop:"createName"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.stateFormat}}),a("el-table-column",{attrs:{label:"审批时间",align:"center",prop:"claimDate"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.historyFory(t.row)}}},[e._v("审批详情 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open2,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open2=t}}},[a("div",{staticClass:"show_info",on:{click:e.showInfo}},[e._v("查看详情")]),a("div",{staticStyle:{overflow:"auto","max-height":"70vh"}},[e.open2?a("leaveHistoryForm",{attrs:{businessKey:e.businessKey}}):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open2=!e.open2}}},[e._v("关闭")])],1)]),a("new-bill-detail-show-modal",{ref:"showModal"})],1)},i=[],o=a("9b39"),r=a("b775");function l(e){return Object(r["a"])({url:"/act/task/myDoneTask",method:"get",params:e})}var s=a("7bd4"),c=a("1f6e"),u={name:"history",components:{leaveHistoryForm:c["default"],NewBillDetailShowModal:s["default"]},data:function(){return{tableHeight:null,businessKey:"",user:{},loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,leaveList:[],title:"",open:!1,open2:!1,typeOptions:[],stateOptions:[],queryParams:{pageNum:1,pageSize:10,type:null,title:null,reason:null,leaveStartTime:null,leaveEndTime:null,instanceId:null,state:null,createBy:null},currApproveRow:{},isJump:!1}},created:function(){var e=this;this.getList(),this.getDicts("approve_process_define").then((function(t){e.typeOptions=t.data})),this.getDicts("approve_flow_state").then((function(t){e.stateOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.isJump&&(this.historyFory(this.isJump),this.isJump=!1),this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()},this.getList()},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0,l(this.queryParams).then((function(t){e.leaveList=t.rows,e.total=t.total,e.loading=!1}))},typeFormat:function(e,t){return this.selectDictLabel(this.typeOptions,e.type)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.status)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},historyFory:function(e){this.currApproveRow=e,this.businessKey=e.id,this.open2=!0,this.title="审批详情"},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有业务发起数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(t)})).then((function(t){e.download(t.msg)}))},showInfo:function(){var e=this.currApproveRow.type;if("reverseInvoice"==e){var t={id:this.currApproveRow.bizId};this.$refs.showModal.fillBillDialog(t)}else this.isJump=this.currApproveRow,this.open2=!1,this.$router.push({name:"Jtrw",params:{ywzj:this.currApproveRow.bizId}})}}},d=u,p=(a("37ad"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,"324d02c7",null);t["default"]=h.exports},"25dc":function(e,t,a){"use strict";a("5888")},2613:function(e,t,a){"use strict";a("fdad")},2638:function(e,t,a){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t,a=1;a<arguments.length;a++)for(var n in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)}var i=["attrs","props","domProps"],o=["class","style","directives"],r=["on","nativeOn"],l=function(e){return e.reduce((function(e,t){for(var a in t)if(e[a])if(-1!==i.indexOf(a))e[a]=n({},e[a],t[a]);else if(-1!==o.indexOf(a)){var l=e[a]instanceof Array?e[a]:[e[a]],c=t[a]instanceof Array?t[a]:[t[a]];e[a]=[].concat(l,c)}else if(-1!==r.indexOf(a))for(var u in t[a])if(e[a][u]){var d=e[a][u]instanceof Array?e[a][u]:[e[a][u]],p=t[a][u]instanceof Array?t[a][u]:[t[a][u]];e[a][u]=[].concat(d,p)}else e[a][u]=t[a][u];else if("hook"===a)for(var h in t[a])e[a][h]=e[a][h]?s(e[a][h],t[a][h]):t[a][h];else e[a]=t[a];else e[a]=t[a];return e}),{})},s=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=l},2639:function(e,t,a){e.exports=function(){return new Worker(a.p+"d21cf2c10c32bcc34455.worker.js")}},"26fc":function(e,t,a){e.exports=a.p+"static/img/404_cloud.0f4bc32b.png"},2754:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wscn-http404-container"},[a("div",{staticClass:"wscn-http404"},[e._m(0),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[e._v(" 404错误! ")]),a("div",{staticClass:"bullshit__headline"},[e._v(" "+e._s(e.message)+" ")]),a("div",{staticClass:"bullshit__info"},[e._v(" 对不起，您正在寻找的页面不存在。尝试检查URL的错误，然后按浏览器上的刷新按钮或尝试在我们的应用程序中找到其他内容。 ")]),a("router-link",{staticClass:"bullshit__return-home",attrs:{to:"/"}},[e._v(" 返回首页 ")])],1)])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pic-404"},[n("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),n("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),n("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),n("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])}],o={name:"Page404",computed:{message:function(){return"找不到网页！"}}},r=o,l=(a("bddb"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"279ea4b2",null);t["default"]=s.exports},2762:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),a("el-button",{on:{click:e.downloadUrl}},[e._v("下载")])],1)},i=[],o=(a("ac1f"),a("5319"),a("ed08")),r={name:"Tes",data:function(){return{url:""}},methods:{downloadUrl:function(){var e=this.url;Object(o["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,"6784b076",null);t["default"]=c.exports},"27ef":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.printInvoice}},[e._v("打印发票")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.printInvoiceList("1")}}},[e._v("打印清单")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.printInvoiceList("2")}}},[e._v("打印清单设计")]),a("el-button",{attrs:{type:"primary"},on:{click:e.printVehicleInvoice}},[e._v("打印机动车")]),a("el-button",{attrs:{type:"primary"},on:{click:e.printUsedInvoice}},[e._v("打印二手车")]),e._m(0),a("el-dialog",{attrs:{title:"发票打印设置",visible:e.printDialog.open,"append-to-body":"",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.printDialog,"open",t)}}},[a("label",[e._v("请确认：")]),a("br"),e._v(" 即将执行打印发票的打印机是否选择正确"),a("br"),e._v(" 发票代码、发票号码是否与纸质发票上的发票代码、发票号码对应上"),a("br"),e._v(" 初次打印请调好打印设置的上边距与左边距以免打错位置需要作废发票 "),a("el-form",{attrs:{model:e.printDialog.form,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[e._v(" "+e._s(e.printDialog.form.invType)+" ")]),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[e._v(" "+e._s(e.printDialog.form.invCode)+" ")]),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[e._v(" "+e._s(e.printDialog.form.invNo)+" ")]),a("el-form-item",{attrs:{label:"打印机",prop:"PrinterName"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.printDialog.form.PrinterName,callback:function(t){e.$set(e.printDialog.form,"PrinterName",t)},expression:"printDialog.form.PrinterName"}},e._l(e.printerNameArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上边距"}},[a("el-input",{model:{value:e.printDialog.form.TopMargin,callback:function(t){e.$set(e.printDialog.form,"TopMargin",t)},expression:"printDialog.form.TopMargin"}},[a("template",{slot:"append"},[e._v("(mm)")])],2)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"左边距"}},[a("el-input",{model:{value:e.printDialog.form.LeftMargin,callback:function(t){e.$set(e.printDialog.form,"LeftMargin",t)},expression:"printDialog.form.LeftMargin"}},[a("template",{slot:"append"},[e._v("(mm)")])],2)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendPrintData("print")}}},[e._v("打 印")]),a("el-button",{on:{click:function(t){e.printDialog.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"printListTable"}},[a("table",{staticStyle:{height:"597px",width:"590px","border-collapse":"collapse",border:"1px solid"},attrs:{id:""}},[a("tr",{staticStyle:{height:"21px"}},[a("td"),a("td",{staticStyle:{width:"125px"}}),a("td",{staticStyle:{width:"61px"}}),a("td",{staticStyle:{width:"38px"}}),a("td",{staticStyle:{width:"71px"}}),a("td",{staticStyle:{width:"67px"}}),a("td",{staticStyle:{width:"76px"}}),a("td",{staticStyle:{width:"24px"}}),a("td",{staticStyle:{width:"71px"}})]),a("tr",[a("td"),a("td"),a("td"),a("td"),a("td"),a("td"),a("td"),a("td"),a("td")]),a("tr",{staticStyle:{height:"31px"}},[a("td"),a("td",{attrs:{colspan:"8"}})])])])}],o=a("c7eb"),r=a("1da1"),l=(a("d3b7"),a("3ca3"),a("ddb0"),a("13d5"),a("c394")),s=a("0cb6"),c=a("084c"),u=a("2909"),d=(a("99af"),a("caad"),a("498a"),a("ac1f"),a("5319"),a("159b"),a("b680"),a("c38a")),p=a("ed08");function h(e,t,a,n){var i=n.TopMargin,o=void 0===i?0:i,r=n.LeftMargin,l=void 0===r?0:r;if(!e.sellName||!e.sellTaxNo||!e.buyName||!e.invCode||!e.invNo||!e.invDate)return t.msgError("发票【".concat(e.invCode,"_").concat(e.invNo,"】关键信息为空，不能打印")),!1;if(e.ewm&&(a.ADD_PRINT_IMAGE(36+o,42+l,75,76,"data:image/jpg;base64,".concat(e.ewm)),a.SET_PRINT_STYLEA(0,"Stretch",2)),0==e.taxnoType?("1"==e.redFlag&&e.totalAmount<0?(a.ADD_PRINT_TEXT(27+o,166+l,109,26,"销项负数"),a.SET_PRINT_STYLEA(0,"FontSize",11)):"1"==e.cancelFlag&&a.ADD_PRINT_TEXT(55+o,241+l,61,23,"作废"),"08"==e.specialTicket||"18"==e.specialTicket?(a.ADD_PRINT_TEXT(55+o,140+l,85,23,"成品油"),a.SET_PRINT_STYLEA(0,"FontSize",11)):"12"==e.specialTicket&&(a.ADD_PRINT_TEXT(55+o,140+l,85,23,"机动车"),a.SET_PRINT_STYLEA(0,"FontSize",11)),"2"==e.invType&&a.ADD_PRINT_TEXT(96+o,132+l,275,23,"校验码："+e.checkCode)):(a.ADD_PRINT_TEXT(88+o,131+l,114,36,"机器编号：\n"+e.machineNo),"1"==e.redFlag&&e.totalAmount<0?(a.ADD_PRINT_TEXT(94+o,251+l,102,26,"销项负数"),a.SET_PRINT_STYLEA(0,"FontSize",11)):"1"==e.cancelFlag&&a.ADD_PRINT_TEXT(48+o,154+l,59,25,"作废"),"08"==e.specialTicket||"18"==e.specialTicket?(a.ADD_PRINT_TEXT(67+o,247+l,101,25,"成品油"),a.SET_PRINT_STYLEA(0,"FontSize",11)):"12"==e.specialTicket&&(a.ADD_PRINT_TEXT(67+o,247+l,101,25,"机动车"),a.SET_PRINT_STYLEA(0,"FontSize",11)),"2"==e.invType&&(e.note="校验码：".concat(e.checkCode,"\n").concat(e.note))),a.ADD_PRINT_TEXT(43+o,697+l,95,18,e.invCode),a.ADD_PRINT_TEXT(69+o,697+l,95,18,e.invNo),a.ADD_PRINT_TEXT(88+o,666+l,120,20,e.invDate),a.ADD_PRINT_TEXT(121+o,157+l,311,21,e.buyName),a.ADD_PRINT_TEXT(142+o,157+l,311,21,e.buyTaxNo),a.ADD_PRINT_TEXT(163+o,157+l,311,21,e.buyBankAccount),a.ADD_PRINT_TEXT(182+o,157+l,311,21,e.buyAddrTel),108==e.pwdCode.length?(a.ADD_PRINT_TEXT(124+o,500+l,288,18,e.pwdCode.substring(0,27)),a.SET_PRINT_STYLEA(0,"FontSize",8),a.ADD_PRINT_TEXT(141+o,500+l,288,18,e.pwdCode.substring(27,54)),a.ADD_PRINT_TEXT(160+o,500+l,288,18,e.pwdCode.substring(54,81)),a.ADD_PRINT_TEXT(178+o,500+l,288,18,e.pwdCode.substring(81))):112==e.pwdCode.length&&(a.ADD_PRINT_TEXT(124+o,500+l,288,18,e.pwdCode.substring(0,28)),a.SET_PRINT_STYLEA(0,"FontSize",8),a.ADD_PRINT_TEXT(141+o,500+l,288,18,e.pwdCode.substring(28,56)),a.ADD_PRINT_TEXT(160+o,500+l,288,18,e.pwdCode.substring(56,84)),a.ADD_PRINT_TEXT(178+o,500+l,288,18,e.pwdCode.substring(84))),a.ADD_PRINT_TEXT(352+o,529+l,111,18,e.totalAmountWithoutTax),a.ADD_PRINT_TEXT(352+o,682+l,111,18,e.totalAmount),a.ADD_PRINT_TEXT(374+o,262+l,343,18,Object(d["s"])(e.totalTaxAmount)),a.ADD_PRINT_TEXT(373+o,643+l,144,18,e.totalTaxAmount),a.ADD_PRINT_TEXT(400+o,154+l,314,19,e.sellName),a.ADD_PRINT_TEXT(418+o,154+l,314,19,e.sellTaxNo),a.ADD_PRINT_TEXT(437+o,154+l,314,19,e.sellAddrTel),a.ADD_PRINT_TEXT(456+o,154+l,314,19,e.sellBankAccount),a.ADD_PRINT_TEXT(401+o,490+l,302,75,e.note),a.ADD_PRINT_TEXT(477+o,104+l,66,18,e.cashier),a.ADD_PRINT_TEXT(476+o,286+l,76,18,e.checker),a.ADD_PRINT_TEXT(476+o,488+l,66,18,e.invoicer),e.details.length>8||"1"==e.detailFlag)a.ADD_PRINT_TEXT(216+o,32+l,203,18,"(详见销货清单)"),a.ADD_PRINT_TEXT(216+o,235+l,92,18,""),a.ADD_PRINT_TEXT(216+o,327+l,47,18,""),a.ADD_PRINT_TEXT(216+o,375+l,76,18,""),a.ADD_PRINT_TEXT(216+o,452+l,76,18,""),a.ADD_PRINT_TEXT(216+o,528+l,114,18,e.totalAmount),"0"==e.multyRate&&("1"==e.details[0].preferentialFlag?a.ADD_PRINT_TEXT(216+o,642+l,40,18,e.details[0].preferentialType):["1","2"].includes(e.details[0].taxZeroRate)&&"0"==e.details[0].rate?"1"==e.details[0].taxZeroRate?a.ADD_PRINT_TEXT(216+o,642+l,40,18,"免税"):a.ADD_PRINT_TEXT(216+o,642+l,40,18,"不征税"):a.ADD_PRINT_TEXT(216+o,642+l,40,18,e.details[0].rate+"%")),0==e.totalAmount||a.ADD_PRINT_TEXT(216+o,681+l,111,18,e.totalTaxAmount);else for(var s=216,c=0;c<e.details.length;c++){var u=e.details[c];if("详见对应正数发票及清单"!=u.goodsName.trim()&&!(u.goodsNameAbbreviation&&u.goodsName&&u.amount&&u.rate&&u.taxAmount))return void t.msgError("发票明细的关键信息不能为空");"详见对应正数发票及清单"==u.goodsName||"*"==u.goodsName.substring(0,1)?a.ADD_PRINT_TEXT(s+o,32+l,203,18,u.goodsName):a.ADD_PRINT_TEXT(s+o,32+l,203,18,"*".concat(u.goodsNameAbbreviation.replace(/^\*|\*$/g,""),"*").concat(u.goodsName)),a.ADD_PRINT_TEXT(s+o,235+l,92,18,u.standard),a.ADD_PRINT_TEXT(s+o,327+l,47,18,u.unit),a.ADD_PRINT_TEXT(s+o,375+l,76,18,u.number),"0"==e.hsbz?(a.ADD_PRINT_TEXT(s+o,452+l,76,18,u.price),a.ADD_PRINT_TEXT(s+o,528+l,114,18,u.amount)):(a.ADD_PRINT_TEXT(s+o,452+l,76,18,u.withPrice),a.ADD_PRINT_TEXT(s+o,528+l,114,18,u.withAmount)),"1"==u.preferentialFlag?a.ADD_PRINT_TEXT(s+o,642+l,40,18,u.preferentialType):["1","2"].includes(u.taxZeroRate)&&"0"==u.rate?"1"==u.taxZeroRate?a.ADD_PRINT_TEXT(s+o,642+l,40,18,"免税"):a.ADD_PRINT_TEXT(s+o,642+l,40,18,"不征税"):a.ADD_PRINT_TEXT(s+o,642+l,40,18,u.rate+"%"),a.ADD_PRINT_TEXT(s+o,681+l,111,18,u.totalTaxAmount),s+=18}a.PRINT()?t.msgSuccess("发票【".concat(e.invNo,"】已发出打印命令")):t.msgError("发票【".concat(e.invNo,"】已放弃打印"))}function m(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",i=arguments.length>4?arguments[4]:void 0,o=i.TopMargin,r=void 0===o?0:o,l=i.LeftMargin,s=void 0===l?0:l,c=e.details,d=0;d<4;d++)c.push.apply(c,Object(u["a"])(c));c.forEach((function(e,t){e.printRowIndex=t}));var h=1;e.totalPage=Math.ceil(c.length/25),e.pageIndex=h;for(var m=0,f=0,b=0,g=0,v=0;v<c.length;v++)c[v].amount<0?(b+=c[v].amount,g+=c[v].taxAmount):(m+=c[v].amount,f+=c[v].taxAmount);if(0!=b){var y={goodsName:"原价合计"};y.amount=m,"0"==e.hsbz?"1"==e.details[0].preferentialFlag?y.rate=e.details[0].preferentialType:["1","2"].includes(e.details[0].taxZeroRate)&&"0"==e.details[0].rate?"1"==e.details[0].taxZeroRate?y["sl"]="免税":y["sl"]="不征税":y.rate=e.details[0].rate:y.rate="***",y.taxAmount=f,c.push(y);var _={goodsName:"折扣额合计"};_.amount=b,"0"==e.hsbz?"1"==e.details[0].preferentialFlag?_.rate=e.details[0].preferentialType:["1","2"].includes(e.details[0].taxZeroRate)&&"0"==e.details[0].rate?"1"==e.details[0].taxZeroRate?_["sl"]="免税":_["sl"]="不征税":_.rate=e.details[0].rate:_.rate="***",_.taxAmount=g,c.push(_)}for(var x=[],w=[],k=0,T=0,D=0;D<c.length;D++){if(0!=D&&D%25==0){var S=Object(p["e"])(e);S.details=Object(p["e"])(w),S.PageTotalJe=k.toFixed(2),S.pageTotalSe=T.toFixed(2),S.TotalJe=e.totalAmountWithoutTax,S.TotalSe=e.totalTaxAmount,w=[],k=0,T=0,S.pageIndex=x.length+1,x.push(S),h++}var O=c[D];"原价合计"!=O.goodsName&&"折扣额合计"!=O.goodsName&&(k+=O.amountWithoutTax,T+=O.taxAmount),w.push(c[D])}if(h<=e.totalPage){var N=Object(p["e"])(e);N.details=Object(p["e"])(w),N.PageTotalJe=k.toFixed(2),N.pageTotalSe=T.toFixed(2),N.TotalJe=e.totalAmountWithoutTax,N.TotalSe=e.totalTaxAmount,N.pageIndex=x.length+1,x.push(N)}function P(e){var t="<style>\n      th,td {\n        border: 1px solid;\n        font-size: 12px;\n        font-weight: 400;\n      }\n    </style>";a.ADD_PRINT_HTM(158+r,16+s,586,594,t+"<body>"+document.getElementById("printListTable").innerHTML+"<body>"),a.ADD_PRINT_TEXT(70+r,102+s,91,21,e.buyName),a.ADD_PRINT_TEXT(96+r,102+s,91,21,e.sellName),a.ADD_PRINT_TEXT(122+r,182+s,91,21,e.invCode),a.ADD_PRINT_TEXT(122+r,329+s,61,21,e.invNo),a.ADD_PRINT_TEXT(121+r,500+s,16,21,e.totalPage),a.ADD_PRINT_TEXT(121+r,554+s,20,21,e.pageIndex);var n=164;a.ADD_PRINT_TEXT(n+r,18+s,33,19,"序号"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,51+s,128,18,"货物(劳务)名称"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,179+s,61,18,"规格型号"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,244+s,38,18,"单位"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,285+s,71,18,"数量"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,359+s,67,18,"单价"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,429+s,74,18,"金额"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,502+s,35,18,"税率"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(n+r,534+s,71,18,"税额"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(687+r,18+s,33,18,"小计"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(704+r,18+s,33,18,"总计"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(732+r,18+s,33,18,"备注"),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2);var i=180;e.details.forEach((function(e,t){a.ADD_PRINT_TEXT(i+r,18+s,33,18,e.printRowIndex),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(i+r,51+s,128,18,"*".concat(e.goodsNameAbbreviation.replace(/^\*|\*$/g,""),"*").concat(e.goodsName)),a.SET_PRINT_STYLEA(0,"FontSize",8),a.ADD_PRINT_TEXT(i+r,179+s,61,18,e.standard),a.SET_PRINT_STYLEA(0,"FontSize",8),a.ADD_PRINT_TEXT(i+r,244+s,38,18,e.unit),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(i+r,285+s,71,18,e.number),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),a.ADD_PRINT_TEXT(i+r,359+s,67,18,e.withoutTaxPrice),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),a.ADD_PRINT_TEXT(i+r,429+s,74,18,e.amountWithoutTax),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3);var n="";n="1"==e.preferentialFlag?e.preferentialType:["1","2"].includes(e.taxZeroRate)&&"0"==e.rate?"1"==e.taxZeroRate?"免税":"不征税":e.rate+"%",a.ADD_PRINT_TEXT(i+r,502+s,35,18,n),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",2),a.ADD_PRINT_TEXT(i+r,534+s,71,18,e.taxAmount),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),i+=19})),a.ADD_PRINT_TEXT(687+r,429+s,74,18,e.PageTotalJe),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),a.ADD_PRINT_TEXT(687+r,534+s,71,18,e.pageTotalSe),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),a.ADD_PRINT_TEXT(704+r,429+s,74,18,e.TotalJe),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),a.ADD_PRINT_TEXT(704+r,534+s,71,18,e.TotalSe),a.SET_PRINT_STYLEA(0,"FontSize",8),a.SET_PRINT_STYLEA(0,"Alignment",3),a.ADD_PRINT_TEXT(727+r,52+s,557,18,e.note),a.SET_PRINT_STYLEA(0,"FontSize",8),a.ADD_PRINT_TEXT(775+r,453+s,81,21,e.invDate.substr(0,10)),a.ADD_PRINT_TEXT(29+r,115+s,419,28,"销售货物或者提供应税劳务、服务清单"),a.SET_PRINT_STYLEA(0,"FontName","黑体"),a.SET_PRINT_STYLEA(0,"FontSize",16),a.SET_PRINT_STYLEA(0,"Bold",1),a.ADD_PRINT_TEXT(70+r,20+s,81,21,"购买方名称："),a.ADD_PRINT_TEXT(96+r,20+s,81,21,"销售方名称："),a.ADD_PRINT_TEXT(122+r,20+s,162,21,"所属增值税普通发票代码："),a.ADD_PRINT_TEXT(122+r,273+s,56,21,"号码："),a.ADD_PRINT_TEXT(121+r,477+s,23,21,"共"),a.ADD_PRINT_TEXT(121+r,518+s,19,21,"页"),a.ADD_PRINT_TEXT(121+r,536+s,20,21,"第"),a.ADD_PRINT_TEXT(121+r,575+s,26,21,"页"),a.ADD_PRINT_TEXT(775+r,25+s,176,21,"销售方（章）："),a.SET_PRINT_STYLEA(0,"FontSize",11),a.ADD_PRINT_TEXT(775+r,383+s,69,21,"填开日期：")}x.forEach((function(e){a.PRINT_INIT(""),P(e),"1"==n?a.PRINT():a.PRINT_SETUP()}))}function f(e,t,a,n){var i=n.TopMargin,o=void 0===i?0:i,r=n.LeftMargin,l=void 0===r?0:r;if(!e.sellName||!e.sellTaxNo||!e.buyName||!e.invCode||!e.invNo||!e.invDate)return t.msgError("发票【".concat(e.invCode,"_").concat(e.invNo,"】关键信息为空，不能打印")),!1;"1"==e.redFlag||e.totalAmount<0?(a.ADD_PRINT_TEXT(27+o,170+l,101,25,"销项负数"),a.SET_PRINT_STYLEA(0,"FontSize",11)):"1"==e.cancelFlag&&(a.ADD_PRINT_TEXT(61+o,242+l,91,25,"作废"),a.SET_PRINT_STYLEA(0,"FontSize",12)),a.ADD_PRINT_TEXT(107+o,145+l,122,21,e.invDate.substr(0,10)),a.ADD_PRINT_TEXT(152+o,190+l,213,21,e.invCode),a.ADD_PRINT_TEXT(175+o,190+l,213,21,e.invNo),a.ADD_PRINT_TEXT(201+o,190+l,213,21,e.machineNo),e.pwdCode&&190==e.pwdCode.length&&(a.ADD_PRINT_TEXT(141+o,455+l,362,18,e.pwdCode.substring(0,38)),a.SET_PRINT_STYLEA(0,"FontSize",7),a.ADD_PRINT_TEXT(157+o,455+l,362,18,e.pwdCode.substring(38,76)),a.SET_PRINT_STYLEA(0,"FontSize",7),a.ADD_PRINT_TEXT(173+o,455+l,362,18,e.pwdCode.substring(76,114)),a.SET_PRINT_STYLEA(0,"FontSize",7),a.ADD_PRINT_TEXT(189+o,455+l,362,18,e.pwdCode.substring(114,152)),a.SET_PRINT_STYLEA(0,"FontSize",7),a.ADD_PRINT_TEXT(207+o,455+l,362,18,e.pwdCode.substring(152)),a.SET_PRINT_STYLEA(0,"FontSize",7)),a.ADD_PRINT_TEXT(244+o,182+l,254,44,e.buyName),a.ADD_PRINT_TEXT(258+o,607+l,228,24,e.buyTaxNo),a.SET_PRINT_STYLEA(0,"FontSize",11),a.ADD_PRINT_TEXT(300+o,182+l,163,21,e.vehicleType),a.ADD_PRINT_TEXT(299+o,406+l,264,21,e.factoryNo),a.ADD_PRINT_TEXT(299+o,707+l,128,21,e.origin),a.ADD_PRINT_TEXT(334+o,182+l,161,21,e.eligibilityNo),a.ADD_PRINT_TEXT(334+o,439+l,207,21,e.importCertificateNumber),a.ADD_PRINT_TEXT(334+o,707+l,126,21,e.commodityInspectionNo),a.ADD_PRINT_TEXT(369+o,182+l,255,21,e.engineNo),a.ADD_PRINT_TEXT(369+o,595+l,237,21,e.vehicleIdentificationCode),a.ADD_PRINT_TEXT(405+o,215+l,318,21,Object(d["s"])(e.totalAmount)),a.ADD_PRINT_TEXT(405+o,677+l,141,21,e.totalAmount),a.ADD_PRINT_TEXT(440+o,182+l,395,21,e.sellName),a.ADD_PRINT_TEXT(440+o,618+l,215,21,e.sellTel),a.ADD_PRINT_TEXT(474+o,182+l,396,21,e.sellTaxNo),a.ADD_PRINT_TEXT(474+o,618+l,214,21,e.sellAccount),a.ADD_PRINT_TEXT(509+o,182+l,293,21,e.sellAddr),a.ADD_PRINT_TEXT(509+o,544+l,288,21,e.sellBank),a.ADD_PRINT_TEXT(549+o,182+l,93,21,e.rate+"%"),a.ADD_PRINT_TEXT(549+o,339+l,156,21,e.totalTaxAmount),a.ADD_PRINT_TEXT(545+o,579+l,253,31,e.taxAuthorityName+"\n"+e.taxAuthorityCode),a.ADD_PRINT_TEXT(591+o,222+l,135,21,e.totalAmountWithoutTax),a.ADD_PRINT_TEXT(591+o,454+l,176,21,e.completionVoucherNo),a.ADD_PRINT_TEXT(591+o,675+l,35,21,e.tonnage),a.ADD_PRINT_TEXT(591+o,778+l,54,21,e.limitedNumberOfPassengers),a.ADD_PRINT_TEXT(618+o,440+l,91,21,e.invoicer),a.PRINT()?t.msgSuccess("发票【".concat(e.invNo,"】已发出打印命令")):t.msgError("发票【".concat(e.invNo,"】已放弃打印"))}function b(e,t,a,n){var i=n.TopMargin,o=void 0===i?0:i,r=n.leftMargin,l=void 0===r?0:r;e={searchValue:null,createBy:"1",createTime:"2022-4-14 20:30",updateBy:"1432525525779353602",updateTime:"2022-9-29 18:14",remark:null,params:{},deptIds:null,id:"1514581738871984128",billGuid:"KN2204130000002",billNo:"KN2204130000002",billType:"二手车业务",billSplitType:"0",billSource:"KIRIN",bizDate:"2022-04-14",invCode:"111000010006",invNo:"89969621",invDate:"2022-04-15 02:56:25",machineNo:"123123",ewm:"iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAIAAAD6XpeDAAAC9ElEQVR42u3aUY6EIBAFwLn/pd0TbCLQr0EtPzdGkWID/Xp+v8B13bj+u//OM1femxjD6LuOvuDBgwfvI3jXwnXnOYn3Vk36ClICe3gRwIMHDx68abzRPfKEzb9zMaXnZ/h+ePDgwYP3CLwEWOLgkHgvPHjw4MF7P95K1tpZaCcOWfDgwYMH7yy89Gbeucmng/LXdhXgwYMH78V4VVficPGmvx99QYIHD96L8a7wlQ6Iq4rcRBgdn1t48ODBgzc9D+lAOf1DoESQnWgCJwJ6ePDgwYNX0oP87fqYNFjVglu5p+p+ePDgwYM3VqQnNsz0/U9Biix6ePDgwYNXgpc+BSXC7tPC6xWYW98CDx48ePCm9/6nBNOJwr8zBG/9L4QHDx48eOUNwKrDwgmFdmL8iQUNDx48ePDG5rmzk7trVSaCiETTdXiRwYMHDx68ErzOSa/6mCtwpRd6PFWBBw8ePHjRwjwdFu8Kr8t+OJT+L4QHDx48eOV13gmBb2IR7DpMDUPCgwcPHrxpvJM3/HT3Ob34IvfAgwcPHrxpvKoNdhdY59gSzd5tnXR48ODB+wjeyiSmG7ydgW9nUb+tMQsPHjx48MoL27JBpIPdTYepxPjhwYMHD15fM7YzqE1jRwrnhUUwnLDAgwcPHrzpZmxiQFVjSDRaq8aZDsrhwYMHD96ePHNXwH1aEb0tmIYHDx48eFG8qsJz1+afDgQShXkkbYEHDx48eCV14baitbHJnA64yw4s8ODBgwevPCBOFMhPaZAmCnx48ODBg5fFSzchE+99SgO56gAIDx48ePDmf7eSuNLF78mTng7i4cGDBw9eWw8yvo/umsTO5yQCE3jw4MGDNx9MVw16V6id/t5dTV148ODBg1ffz0sE0IkCufOZrSfAO++FBw8ePHjH4qWbwIlDVvrg9pgDCzx48ODBa2tOdsKsPKczEIAHDx48ePN4ibA43bD9wnjgwYMHD15bDtx68EncnwComvRdYTc8ePDgfQTvDz7Wl2I5dlpaAAAAAElFTkSuQmCC",buyName:"曾海蓉企业",buyNumber:null,buyIdCard:"360734199011113333",buyAddr:"15811882956",buyTel:"15811882956",sellName:"广东百望测试2",sellIdCard:"554433221100001",sellAddr:"广州市海珠区仑头路官洲街北山村桥头大街240号自编之一",sellTel:"020-23344242",cardNum:"京A05282",recording:"登记证",vehicleType:"纯电动轿车",vehicleIdentificationCode:"L1NSPGHB9MA060565",factoryNo:"汉字HH2222222222225685",carMgrName:"车管所",businessName:"广东百望测试2",businessAddr:"广州市海珠区仑头路官洲街北山村桥头大街240号自编之一",businessTaxNo:"554433221100001",businessBankAccount:"中信银行广州分行营业部 8110901013100613630",businessTel:"020-23344242",marketName:"",marketTaxNo:"",marketAddr:"",marketBankAccount:"",marketTel:"",totalAmount:21e4,totalTaxAmount:0,totalAmountWithoutTax:21e4,invoicer:"杨陶然",note:"减免0.5%征收增值税",completionVoucherNo:"",openType:"01",openFlag:0,yylxdm:1,redFlag:"2",cancelFlag:null,sourceInvCode:"",sourceInvNo:"",taxTypeCode:null,billNumber:0x1504e01096021000,billId:0,taxnoInfo:"123123_00001",deptId:0x1387af4a71421000,ext1:null,ext2:null,ext3:null,reason:null,rewriteFlag:"-1",rewriteMsg:"回写失败：发票中心查询异常",rewriteFalseNumber:0,printedFlag:"1",pwdCode:"345345345345345",fxkjbz:null,taxnoInfoList:null},"1"==e.redFlag||e.totalAmount<0?(a.ADD_PRINT_TEXT(18+o,172+l,101,25,"销项负数"),a.SET_PRINT_STYLEA(0,"FontSize",11)):"1"==e.cancelFlag&&(a.ADD_PRINT_TEXT(53+o,243+l,91,25,"作废"),a.SET_PRINT_STYLEA(0,"FontSize",12)),a.ADD_PRINT_TEXT(93+o,145+l,122,21,e.invDate.substr(0,10)),a.ADD_PRINT_TEXT(93+o,715+l,141,21,e.invNo),a.ADD_PRINT_TEXT(127+o,176+l,213,21,e.invCode),a.ADD_PRINT_TEXT(149+o,176+l,213,21,e.invNo),a.ADD_PRINT_TEXT(170+o,176+l,213,21,e.machineNo),a.ADD_PRINT_TEXT(146+o,463+l,362,21,e.pwdCode),a.ADD_PRINT_TEXT(203+o,230+l,246,21,e.buyName),a.ADD_PRINT_TEXT(203+o,623+l,208,21,e.buyIdCard),a.ADD_PRINT_TEXT(234+o,230+l,384,21,e.buyAddr),a.ADD_PRINT_TEXT(234+o,669+l,161,21,e.buyTel),a.ADD_PRINT_TEXT(262+o,230+l,239,21,e.sellName),a.ADD_PRINT_TEXT(262+o,623+l,208,22,e.sellIdCard),a.ADD_PRINT_TEXT(290+o,230+l,382,21,e.sellAddr),a.ADD_PRINT_TEXT(290+o,670+l,161,21,e.sellTel),a.ADD_PRINT_TEXT(319+o,230+l,128,21,e.cardNum),a.ADD_PRINT_TEXT(319+o,430+l,151,21,e.recording),a.ADD_PRINT_TEXT(319+o,670+l,161,21,e.vehicleType),a.ADD_PRINT_TEXT(347+o,230+l,128,21,e.vehicleIdentificationCode),a.ADD_PRINT_TEXT(347+o,430+l,151,21,e.factoryNo),a.ADD_PRINT_TEXT(347+o,670+l,161,21,e.carMgrName),a.ADD_PRINT_TEXT(376+o,254+l,363,21,Object(d["s"])(e.totalAmount)),a.ADD_PRINT_TEXT(376+o,670+l,161,21,e.totalAmount),a.ADD_PRINT_TEXT(407+o,230+l,602,21,e.businessName),a.ADD_PRINT_TEXT(435+o,230+l,318,21,e.businessAddr),a.ADD_PRINT_TEXT(435+o,623+l,208,21,e.businessTaxNo),a.ADD_PRINT_TEXT(466+o,230+l,432,21,e.businessBankAccount),a.ADD_PRINT_TEXT(465+o,717+l,113,21,e.businessTel),a.ADD_PRINT_TEXT(504+o,230+l,231,36,e.marketName),a.ADD_PRINT_TEXT(495+o,536+l,293,21,e.marketTaxNo),a.ADD_PRINT_TEXT(526+o,536+l,292,21,e.marketAddr),a.ADD_PRINT_TEXT(555+o,230+l,435,21,e.marketBankAccount),a.ADD_PRINT_TEXT(555+o,716+l,112,21,e.marketTel),a.ADD_PRINT_TEXT(588+o,162+l,668,21,e.note),a.ADD_PRINT_TEXT(618+o,624+l,85,21,e.invoicer),a.PRINT()?t.msgSuccess("发票【".concat(e.invNo,"】已发出打印命令")):t.msgError("发票【".concat(e.invNo,"】已放弃打印"))}var g={name:"lodopPrint",data:function(){return{LODOP:null,rows:[{id:"1483690164361498624",invDate:"2022-01-19 13:16:33"}],printerNameArr:[],printDialog:{open:!1,form:{invType:"1",invCode:"111111111111",invNo:"22222222",PrinterName:"",LeftMargin:"",TopMargin:""}},printData:[],printType:""}},created:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["u"])();case 2:a=t.sent,200==a.code&&(e.printerNameArr=a.data);case 4:case"end":return t.stop()}}),t)})))()},methods:{printInvoice:function(){for(var e=this,t=[],a=0;a<this.rows.length;a++)t.push(Object(l["r"])(this.rows[a]));Promise.all(t).then((function(t){e.printData=t.reduce((function(e,t){return e.push(t.data),e}),[]);var a=t[0].data;e.printDialog.form.invType=a.invType,e.printDialog.form.invCode=a.invCode,e.printDialog.form.invNo=a.invNo,e.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),e.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,e.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0,e.printType="1",e.printDialog.open=!0}))},printInvoiceList:function(){for(var e=this,t=[],a=0;a<this.rows.length;a++)t.push(Object(l["r"])(this.rows[a]));Promise.all(t).then((function(t){e.printData=t.reduce((function(e,t){return e.push(t.data),e}),[]);var a=t[0].data;e.printDialog.form.invType=a.invType,e.printDialog.form.invCode=a.invCode,e.printDialog.form.invNo=a.invNo,e.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),e.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,e.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0,e.printDialog.open=!0,e.printType="2"}))},printVehicleInvoice:function(){for(var e=this,t=[{id:"1605767537952428032"}],a=[],n=0;n<t.length;n++)a.push(Object(s["i"])(t[n].id));Promise.all(a).then((function(t){e.printData=t.reduce((function(e,t){return e.push(t.data),e}),[]);var a=t[0].data;e.printDialog.form.invType=a.invType,e.printDialog.form.invCode=a.invCode,e.printDialog.form.invNo=a.invNo,e.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),e.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,e.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0,e.printType="3",e.printDialog.open=!0}))},sendPrintData:function(e){var t=this;if(localStorage.setItem("PrinterName",this.printDialog.form.PrinterName),localStorage.setItem("TopMargin",this.printDialog.form.TopMargin),localStorage.setItem("LeftMargin",this.printDialog.form.LeftMargin),"print"==e){this.printDialog.open=!1,this.$vLoading.show();var a=Object(c["a"])();a.SET_PRINT_MODE("WINDOW_DEFPRINTER",this.printDialog.form.PrinterName);for(var n=0;n<this.printData.length;n++)a.PRINT_INIT(""),"1"==this.printType?h(this.printData[n],this,a,{TopMargin:parseFloat(this.printDialog.form.TopMargin),LeftMargin:parseFloat(this.printDialog.form.LeftMargin)}):"2"==this.printType?m(this.printData[n],this,a,null,{TopMargin:parseFloat(this.printDialog.form.TopMargin),LeftMargin:parseFloat(this.printDialog.form.LeftMargin)}):"3"==this.printType?f(this.printData[n],this,a,{TopMargin:parseFloat(this.printDialog.form.TopMargin),LeftMargin:parseFloat(this.printDialog.form.LeftMargin)}):"4"==this.printType&&b({},this,a,{TopMargin:parseFloat(this.printDialog.form.TopMargin),LeftMargin:parseFloat(this.printDialog.form.LeftMargin)});setTimeout((function(){t.$vLoading.hide()}),2e3)}},printUsedInvoice:function(){var e=Object(c["a"])();e.SET_PRINT_MODE("WINDOW_DEFPRINTER","导出为WPS PDF"),b({},this,e,{LeftMargin:parseFloat(localStorage.getItem("LeftMargin")),TopMargin:parseFloat(localStorage.getItem("TopMargin"))})}}},v=g,y=(a("a6e5"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"4c4bfdc6",null);t["default"]=_.exports},"27f7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"单据引入规则"}},[a("bill-setting")],1),a("el-tab-pane",{attrs:{label:"未完待续"}},[e._v("......")])],1)],1)},i=[],o=a("1732"),r={components:{BillSetting:o["default"]},data:function(){return{drawer:!1,direction:"rtl"}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},2855:function(e,t,a){"use strict";a.r(t);var n,i,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"left-board"},[a("div",{staticClass:"logo-wrapper"},[a("div",{staticClass:"logo"},[a("img",{attrs:{src:e.logo,alt:"logo"}}),e._v(" Form Generator ")])]),a("el-scrollbar",{staticClass:"left-scrollbar"},[a("div",{staticClass:"components-list"},[a("div",{staticClass:"components-title"},[a("svg-icon",{attrs:{"icon-class":"component"}}),e._v("输入型组件 ")],1),a("draggable",{staticClass:"components-draggable",attrs:{list:e.inputComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",sort:!1},on:{end:e.onEnd}},e._l(e.inputComponents,(function(t,n){return a("div",{key:n,staticClass:"components-item",on:{click:function(a){return e.addComponent(t)}}},[a("div",{staticClass:"components-body"},[a("svg-icon",{attrs:{"icon-class":t.tagIcon}}),e._v(" "+e._s(t.label)+" ")],1)])})),0),a("div",{staticClass:"components-title"},[a("svg-icon",{attrs:{"icon-class":"component"}}),e._v("选择型组件 ")],1),a("draggable",{staticClass:"components-draggable",attrs:{list:e.selectComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",sort:!1},on:{end:e.onEnd}},e._l(e.selectComponents,(function(t,n){return a("div",{key:n,staticClass:"components-item",on:{click:function(a){return e.addComponent(t)}}},[a("div",{staticClass:"components-body"},[a("svg-icon",{attrs:{"icon-class":t.tagIcon}}),e._v(" "+e._s(t.label)+" ")],1)])})),0),a("div",{staticClass:"components-title"},[a("svg-icon",{attrs:{"icon-class":"component"}}),e._v(" 布局型组件 ")],1),a("draggable",{staticClass:"components-draggable",attrs:{list:e.layoutComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",sort:!1},on:{end:e.onEnd}},e._l(e.layoutComponents,(function(t,n){return a("div",{key:n,staticClass:"components-item",on:{click:function(a){return e.addComponent(t)}}},[a("div",{staticClass:"components-body"},[a("svg-icon",{attrs:{"icon-class":t.tagIcon}}),e._v(" "+e._s(t.label)+" ")],1)])})),0)],1)])],1),a("div",{staticClass:"center-board"},[a("div",{staticClass:"action-bar"},[a("el-button",{attrs:{icon:"el-icon-download",type:"text"},on:{click:e.download}},[e._v(" 导出vue文件 ")]),a("el-button",{staticClass:"copy-btn-main",attrs:{icon:"el-icon-document-copy",type:"text"},on:{click:e.copy}},[e._v(" 复制代码 ")]),a("el-button",{staticClass:"delete-btn",attrs:{icon:"el-icon-delete",type:"text"},on:{click:e.empty}},[e._v(" 清空 ")])],1),a("el-scrollbar",{staticClass:"center-scrollbar"},[a("el-row",{staticClass:"center-board-row",attrs:{gutter:e.formConf.gutter}},[a("el-form",{attrs:{size:e.formConf.size,"label-position":e.formConf.labelPosition,disabled:e.formConf.disabled,"label-width":e.formConf.labelWidth+"px"}},[a("draggable",{staticClass:"drawing-board",attrs:{list:e.drawingList,animation:340,group:"componentsGroup"}},e._l(e.drawingList,(function(t,n){return a("draggable-item",{key:t.renderKey,attrs:{"drawing-list":e.drawingList,element:t,index:n,"active-id":e.activeId,"form-conf":e.formConf},on:{activeItem:e.activeFormItem,copyItem:e.drawingItemCopy,deleteItem:e.drawingItemDelete}})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.drawingList.length,expression:"!drawingList.length"}],staticClass:"empty-info"},[e._v(" 从左侧拖入或点选组件进行表单设计 ")])],1)],1)],1)],1),a("right-panel",{attrs:{"active-data":e.activeData,"form-conf":e.formConf,"show-field":!!e.drawingList.length},on:{"tag-change":e.tagChange}}),a("code-type-dialog",{attrs:{visible:e.dialogVisible,title:"选择生成类型","show-file-name":e.showFileName},on:{"update:visible":function(t){e.dialogVisible=t},confirm:e.generate}}),a("input",{attrs:{id:"copyNode",type:"hidden"}})],1)},r=[],l=a("53ca"),s=a("5530"),c=(a("ac1f"),a("5319"),a("b64b"),a("e9c4"),a("d81d"),a("a434"),a("d3b7"),a("159b"),a("c740"),a("1980")),u=a.n(c),d=a("21a6"),p=a("e552"),h=a.n(p),m=a("b311"),f=a.n(m),b=a("a85b"),g=a("766b"),v=a("2e2a"),y=a("ed08");a("99af"),a("a15b"),a("b0c0");function _(e){return'<el-dialog v-bind="$attrs" v-on="$listeners" @open="onOpen" @close="onClose" title="Dialog Titile">\n    '.concat(e,'\n    <div slot="footer">\n      <el-button @click="close">取消</el-button>\n      <el-button type="primary" @click="handelConfirm">确定</el-button>\n    </div>\n  </el-dialog>')}function x(e){return"<template>\n    <div>\n      ".concat(e,"\n    </div>\n  </template>")}function w(e){return"<script>\n    ".concat(e,"\n  <\/script>")}function k(e){return"<style>\n    ".concat(e,"\n  </style>")}function T(e,t,a){var n="";"right"!==e.labelPosition&&(n='label-position="'.concat(e.labelPosition,'"'));var o=e.disabled?':disabled="'.concat(e.disabled,'"'):"",r='<el-form ref="'.concat(e.formRef,'" :model="').concat(e.formModel,'" :rules="').concat(e.formRules,'" size="').concat(e.size,'" ').concat(o,' label-width="').concat(e.labelWidth,'px" ').concat(n,">\n      ").concat(t,"\n      ").concat(D(e,a),"\n    </el-form>");return i&&(r='<el-row :gutter="'.concat(e.gutter,'">\n        ').concat(r,"\n      </el-row>")),r}function D(e,t){var a="";return e.formBtns&&"file"===t&&(a='<el-form-item size="large">\n          <el-button type="primary" @click="submitForm">提交</el-button>\n          <el-button @click="resetForm">重置</el-button>\n        </el-form-item>',i&&(a='<el-col :span="24">\n          '.concat(a,"\n        </el-col>"))),a}function S(e,t){return i||24!==e.span?'<el-col :span="'.concat(e.span,'">\n      ').concat(t,"\n    </el-col>"):t}var O={colFormItem:function(e){var t="";e.labelWidth&&e.labelWidth!==n.labelWidth&&(t='label-width="'.concat(e.labelWidth,'px"'));var a=!v["e"][e.tag]&&e.required?"required":"",i=N[e.tag]?N[e.tag](e):null,o="<el-form-item ".concat(t,' label="').concat(e.label,'" prop="').concat(e.vModel,'" ').concat(a,">\n        ").concat(i,"\n      </el-form-item>");return o=S(e,o),o},rowFormItem:function(e){var t="default"===e.type?"":'type="'.concat(e.type,'"'),a="default"===e.type?"":'justify="'.concat(e.justify,'"'),n="default"===e.type?"":'align="'.concat(e.align,'"'),i=e.gutter?'gutter="'.concat(e.gutter,'"'):"",o=e.children.map((function(e){return O[e.layout](e)})),r="<el-row ".concat(t," ").concat(a," ").concat(n," ").concat(i,">\n      ").concat(o.join("\n"),"\n    </el-row>");return r=S(e,r),r}},N={"el-input":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=t.clearable,o=t.placeholder,r=t.width,l=e.maxlength?':maxlength="'.concat(e.maxlength,'"'):"",s=e["show-word-limit"]?"show-word-limit":"",c=e.readonly?"readonly":"",u=e["prefix-icon"]?"prefix-icon='".concat(e["prefix-icon"],"'"):"",d=e["suffix-icon"]?"suffix-icon='".concat(e["suffix-icon"],"'"):"",p=e["show-password"]?"show-password":"",h=e.type?'type="'.concat(e.type,'"'):"",m=e.autosize&&e.autosize.minRows?':autosize="{minRows: '.concat(e.autosize.minRows,", maxRows: ").concat(e.autosize.maxRows,'}"'):"",f=C(e);return f&&(f="\n".concat(f,"\n")),"<".concat(e.tag," ").concat(n," ").concat(h," ").concat(o," ").concat(l," ").concat(s," ").concat(c," ").concat(a," ").concat(i," ").concat(u," ").concat(d," ").concat(p," ").concat(m," ").concat(r,">").concat(f,"</").concat(e.tag,">")},"el-input-number":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=t.placeholder,o=e["controls-position"]?"controls-position=".concat(e["controls-position"]):"",r=e.min?":min='".concat(e.min,"'"):"",l=e.max?":max='".concat(e.max,"'"):"",s=e.step?":step='".concat(e.step,"'"):"",c=e["step-strictly"]?"step-strictly":"",u=e.precision?":precision='".concat(e.precision,"'"):"";return"<".concat(e.tag," ").concat(n," ").concat(i," ").concat(s," ").concat(c," ").concat(u," ").concat(o," ").concat(r," ").concat(l," ").concat(a,"></").concat(e.tag,">")},"el-select":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=t.clearable,o=t.placeholder,r=t.width,l=e.filterable?"filterable":"",s=e.multiple?"multiple":"",c=A(e);return c&&(c="\n".concat(c,"\n")),"<".concat(e.tag," ").concat(n," ").concat(o," ").concat(a," ").concat(s," ").concat(l," ").concat(i," ").concat(r,">").concat(c,"</").concat(e.tag,">")},"el-radio-group":function(e){var t=P(e),a=t.disabled,n=t.vModel,i='size="'.concat(e.size,'"'),o=F(e);return o&&(o="\n".concat(o,"\n")),"<".concat(e.tag," ").concat(n," ").concat(i," ").concat(a,">").concat(o,"</").concat(e.tag,">")},"el-checkbox-group":function(e){var t=P(e),a=t.disabled,n=t.vModel,i='size="'.concat(e.size,'"'),o=e.min?':min="'.concat(e.min,'"'):"",r=e.max?':max="'.concat(e.max,'"'):"",l=I(e);return l&&(l="\n".concat(l,"\n")),"<".concat(e.tag," ").concat(n," ").concat(o," ").concat(r," ").concat(i," ").concat(a,">").concat(l,"</").concat(e.tag,">")},"el-switch":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=e["active-text"]?'active-text="'.concat(e["active-text"],'"'):"",o=e["inactive-text"]?'inactive-text="'.concat(e["inactive-text"],'"'):"",r=e["active-color"]?'active-color="'.concat(e["active-color"],'"'):"",l=e["inactive-color"]?'inactive-color="'.concat(e["inactive-color"],'"'):"",s=!0!==e["active-value"]?":active-value='".concat(JSON.stringify(e["active-value"]),"'"):"",c=!1!==e["inactive-value"]?":inactive-value='".concat(JSON.stringify(e["inactive-value"]),"'"):"";return"<".concat(e.tag," ").concat(n," ").concat(i," ").concat(o," ").concat(r," ").concat(l," ").concat(s," ").concat(c," ").concat(a,"></").concat(e.tag,">")},"el-cascader":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=t.clearable,o=t.placeholder,r=t.width,l=e.options?':options="'.concat(e.vModel,'Options"'):"",s=e.props?':props="'.concat(e.vModel,'Props"'):"",c=e["show-all-levels"]?"":':show-all-levels="false"',u=e.filterable?"filterable":"",d="/"===e.separator?"":'separator="'.concat(e.separator,'"');return"<".concat(e.tag," ").concat(n," ").concat(l," ").concat(s," ").concat(r," ").concat(c," ").concat(o," ").concat(d," ").concat(u," ").concat(i," ").concat(a,"></").concat(e.tag,">")},"el-slider":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=e.min?":min='".concat(e.min,"'"):"",o=e.max?":max='".concat(e.max,"'"):"",r=e.step?":step='".concat(e.step,"'"):"",l=e.range?"range":"",s=e["show-stops"]?':show-stops="'.concat(e["show-stops"],'"'):"";return"<".concat(e.tag," ").concat(i," ").concat(o," ").concat(r," ").concat(n," ").concat(l," ").concat(s," ").concat(a,"></").concat(e.tag,">")},"el-time-picker":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=t.clearable,o=t.placeholder,r=t.width,l=e["start-placeholder"]?'start-placeholder="'.concat(e["start-placeholder"],'"'):"",s=e["end-placeholder"]?'end-placeholder="'.concat(e["end-placeholder"],'"'):"",c=e["range-separator"]?'range-separator="'.concat(e["range-separator"],'"'):"",u=e["is-range"]?"is-range":"",d=e.format?'format="'.concat(e.format,'"'):"",p=e["value-format"]?'value-format="'.concat(e["value-format"],'"'):"",h=e["picker-options"]?":picker-options='".concat(JSON.stringify(e["picker-options"]),"'"):"";return"<".concat(e.tag," ").concat(n," ").concat(u," ").concat(d," ").concat(p," ").concat(h," ").concat(r," ").concat(o," ").concat(l," ").concat(s," ").concat(c," ").concat(i," ").concat(a,"></").concat(e.tag,">")},"el-date-picker":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=t.clearable,o=t.placeholder,r=t.width,l=e["start-placeholder"]?'start-placeholder="'.concat(e["start-placeholder"],'"'):"",s=e["end-placeholder"]?'end-placeholder="'.concat(e["end-placeholder"],'"'):"",c=e["range-separator"]?'range-separator="'.concat(e["range-separator"],'"'):"",u=e.format?'format="'.concat(e.format,'"'):"",d=e["value-format"]?'value-format="'.concat(e["value-format"],'"'):"",p="date"===e.type?"":'type="'.concat(e.type,'"'),h=e.readonly?"readonly":"";return"<".concat(e.tag," ").concat(p," ").concat(n," ").concat(u," ").concat(d," ").concat(r," ").concat(o," ").concat(l," ").concat(s," ").concat(c," ").concat(i," ").concat(h," ").concat(a,"></").concat(e.tag,">")},"el-rate":function(e){var t=P(e),a=t.disabled,n=t.vModel,i=(e.max&&":max='".concat(e.max,"'"),e["allow-half"]?"allow-half":""),o=e["show-text"]?"show-text":"",r=e["show-score"]?"show-score":"";return"<".concat(e.tag," ").concat(n," ").concat(i," ").concat(o," ").concat(r," ").concat(a,"></").concat(e.tag,">")},"el-color-picker":function(e){var t=P(e),a=t.disabled,n=t.vModel,i='size="'.concat(e.size,'"'),o=e["show-alpha"]?"show-alpha":"",r=e["color-format"]?'color-format="'.concat(e["color-format"],'"'):"";return"<".concat(e.tag," ").concat(n," ").concat(i," ").concat(o," ").concat(r," ").concat(a,"></").concat(e.tag,">")},"el-upload":function(e){var t=e.disabled?":disabled='true'":"",a=e.action?':action="'.concat(e.vModel,'Action"'):"",n=e.multiple?"multiple":"",i="text"!==e["list-type"]?'list-type="'.concat(e["list-type"],'"'):"",o=e.accept?'accept="'.concat(e.accept,'"'):"",r="file"!==e.name?'name="'.concat(e.name,'"'):"",l=!1===e["auto-upload"]?':auto-upload="false"':"",s=':before-upload="'.concat(e.vModel,'BeforeUpload"'),c=':file-list="'.concat(e.vModel,'fileList"'),u='ref="'.concat(e.vModel,'"'),d=E(e);return d&&(d="\n".concat(d,"\n")),"<".concat(e.tag," ").concat(u," ").concat(c," ").concat(a," ").concat(l," ").concat(n," ").concat(s," ").concat(i," ").concat(o," ").concat(r," ").concat(t,">").concat(d,"</").concat(e.tag,">")}};function P(e){return{vModel:'v-model="'.concat(n.formModel,".").concat(e.vModel,'"'),clearable:e.clearable?"clearable":"",placeholder:e.placeholder?'placeholder="'.concat(e.placeholder,'"'):"",width:e.style&&e.style.width?":style=\"{width: '100%'}\"":"",disabled:e.disabled?":disabled='true'":""}}function C(e){var t=[];return e.prepend&&t.push('<template slot="prepend">'.concat(e.prepend,"</template>")),e.append&&t.push('<template slot="append">'.concat(e.append,"</template>")),t.join("\n")}function A(e){var t=[];return e.options&&e.options.length&&t.push('<el-option v-for="(item, index) in '.concat(e.vModel,'Options" :key="index" :label="item.label" :value="item.value" :disabled="item.disabled"></el-option>')),t.join("\n")}function F(e){var t=[];if(e.options&&e.options.length){var a="button"===e.optionType?"el-radio-button":"el-radio",n=e.border?"border":"";t.push("<".concat(a,' v-for="(item, index) in ').concat(e.vModel,'Options" :key="index" :label="item.value" :disabled="item.disabled" ').concat(n,">{{item.label}}</").concat(a,">"))}return t.join("\n")}function I(e){var t=[];if(e.options&&e.options.length){var a="button"===e.optionType?"el-checkbox-button":"el-checkbox",n=e.border?"border":"";t.push("<".concat(a,' v-for="(item, index) in ').concat(e.vModel,'Options" :key="index" :label="item.value" :disabled="item.disabled" ').concat(n,">{{item.label}}</").concat(a,">"))}return t.join("\n")}function E(e){var t=[];return"picture-card"===e["list-type"]?t.push('<i class="el-icon-plus"></i>'):t.push('<el-button size="small" type="primary" icon="el-icon-upload">'.concat(e.buttonText,"</el-button>")),e.showTip&&t.push('<div slot="tip" class="el-upload__tip">只能上传不超过 '.concat(e.fileSize).concat(e.sizeUnit," 的").concat(e.accept,"文件</div>")),t.join("\n")}function R(e,t){var a=[];n=e,i=e.fields.some((function(e){return 24!==e.span})),e.fields.forEach((function(e){a.push(O[e.layout](e))}));var o=a.join("\n"),r=T(e,o,t);return"dialog"===t&&(r=_(r)),n=null,r}var z=a("80de"),j={"el-rate":".el-rate{display: inline-block; vertical-align: text-top;}","el-upload":".el-upload__tip{line-height: 1.2;}"};function L(e,t){var a=j[t.tag];a&&-1===e.indexOf(a)&&e.push(a),t.children&&t.children.forEach((function(t){return L(e,t)}))}function q(e){var t=[];return e.fields.forEach((function(e){return L(t,e)})),t.join("\n")}var $,M,B=[{layout:"colFormItem",tagIcon:"input",label:"手机号",vModel:"mobile",formId:6,tag:"el-input",placeholder:"请输入手机号",defaultValue:"",span:24,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"el-icon-mobile","suffix-icon":"",maxlength:11,"show-word-limit":!0,readonly:!1,disabled:!1,required:!0,changeTag:!0,regList:[{pattern:"/^1(3|4|5|7|8|9)\\d{9}$/",message:"手机号格式错误"}]}],W=a("81a5"),U=a.n(W),V=a("a92a"),H=a("4923"),Q={components:{draggable:u.a,render:b["a"],RightPanel:g["default"],CodeTypeDialog:V["default"],DraggableItem:H["default"]},data:function(){return{logo:U.a,idGlobal:100,formConf:v["a"],inputComponents:v["b"],selectComponents:v["d"],layoutComponents:v["c"],labelWidth:100,drawingList:B,drawingData:{},activeId:B[0].formId,drawerVisible:!1,formData:{},dialogVisible:!1,generateConf:null,showFileName:!1,activeData:B[0]}},computed:{},watch:{"activeData.label":function(e,t){void 0!==this.activeData.placeholder&&this.activeData.tag&&$===this.activeId&&(this.activeData.placeholder=this.activeData.placeholder.replace(t,"")+e)},activeId:{handler:function(e){$=e},immediate:!0}},mounted:function(){var e=this,t=new f.a("#copyNode",{text:function(t){var a=e.generateCode();return e.$notify({title:"成功",message:"代码已复制到剪切板，可粘贴。",type:"success"}),a}});t.on("error",(function(t){e.$message.error("代码复制失败")}))},methods:{activeFormItem:function(e){this.activeData=e,this.activeId=e.formId},onEnd:function(e,t){e.from!==e.to&&(this.activeData=M,this.activeId=this.idGlobal)},addComponent:function(e){var t=this.cloneComponent(e);this.drawingList.push(t),this.activeFormItem(t)},cloneComponent:function(e){var t=JSON.parse(JSON.stringify(e));return t.formId=++this.idGlobal,t.span=v["a"].span,t.renderKey=+new Date,t.layout||(t.layout="colFormItem"),"colFormItem"===t.layout?(t.vModel="field".concat(this.idGlobal),void 0!==t.placeholder&&(t.placeholder+=t.label),M=t):"rowFormItem"===t.layout&&(delete t.label,t.componentName="row".concat(this.idGlobal),t.gutter=this.formConf.gutter,M=t),M},AssembleFormData:function(){this.formData=Object(s["a"])({fields:JSON.parse(JSON.stringify(this.drawingList))},this.formConf)},generate:function(e){var t=this["exec".concat(Object(y["q"])(this.operationType))];this.generateConf=e,t&&t(e)},execRun:function(e){this.AssembleFormData(),this.drawerVisible=!0},execDownload:function(e){var t=this.generateCode(),a=new Blob([t],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(a,e.fileName)},execCopy:function(e){document.getElementById("copyNode").click()},empty:function(){var e=this;this.$confirm("确定要清空所有组件吗？","提示",{type:"warning"}).then((function(){e.drawingList=[]}))},drawingItemCopy:function(e,t){var a=JSON.parse(JSON.stringify(e));a=this.createIdAndKey(a),t.push(a),this.activeFormItem(a)},createIdAndKey:function(e){var t=this;return e.formId=++this.idGlobal,e.renderKey=+new Date,"colFormItem"===e.layout?e.vModel="field".concat(this.idGlobal):"rowFormItem"===e.layout&&(e.componentName="row".concat(this.idGlobal)),Array.isArray(e.children)&&(e.children=e.children.map((function(e){return t.createIdAndKey(e)}))),e},drawingItemDelete:function(e,t){var a=this;t.splice(e,1),this.$nextTick((function(){var e=a.drawingList.length;e&&a.activeFormItem(a.drawingList[e-1])}))},generateCode:function(){var e=this.generateConf.type;this.AssembleFormData();var t=w(Object(z["a"])(this.formData,e)),a=x(R(this.formData,e)),n=k(q(this.formData));return h.a.html(a+t+n,y["b"].html)},download:function(){this.dialogVisible=!0,this.showFileName=!0,this.operationType="download"},run:function(){this.dialogVisible=!0,this.showFileName=!1,this.operationType="run"},copy:function(){this.dialogVisible=!0,this.showFileName=!1,this.operationType="copy"},tagChange:function(e){var t=this;e=this.cloneComponent(e),e.vModel=this.activeData.vModel,e.formId=this.activeId,e.span=this.activeData.span,delete this.activeData.tag,delete this.activeData.tagIcon,delete this.activeData.document,Object.keys(e).forEach((function(a){void 0!==t.activeData[a]&&Object(l["a"])(t.activeData[a])===Object(l["a"])(e[a])&&(e[a]=t.activeData[a])})),this.activeData=e,this.updateDrawingList(e,this.drawingList)},updateDrawingList:function(e,t){var a=this,n=t.findIndex((function(e){return e.formId===a.activeId}));n>-1?t.splice(n,1,e):t.forEach((function(t){Array.isArray(t.children)&&a.updateDrawingList(e,t.children)}))}}},G=Q,K=(a("65e4"),a("2877")),Y=Object(K["a"])(G,o,r,!1,null,null,null);t["default"]=Y.exports},"28a0":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},"298c":function(e,t,a){"use strict";a("8aa2")},"2a33":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-col",{staticClass:"card-box",attrs:{span:12}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("CPU")])]),a("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[a("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[a("thead",[a("tr",[a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("属性")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("值")])])])]),a("tbody",[a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("核心数")])]),a("td",[e.server.cpu?a("div",{staticClass:"cell"},[e._v(e._s(e.server.cpu.cpuNum))]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("用户使用率")])]),a("td",[e.server.cpu?a("div",{staticClass:"cell"},[e._v(e._s(e.server.cpu.used)+"%")]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("系统使用率")])]),a("td",[e.server.cpu?a("div",{staticClass:"cell"},[e._v(e._s(e.server.cpu.sys)+"%")]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("当前空闲率")])]),a("td",[e.server.cpu?a("div",{staticClass:"cell"},[e._v(e._s(e.server.cpu.free)+"%")]):e._e()])])])])])])],1),a("el-col",{staticClass:"card-box",attrs:{span:12}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("内存")])]),a("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[a("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[a("thead",[a("tr",[a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("属性")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("内存")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("JVM")])])])]),a("tbody",[a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("总内存")])]),a("td",[e.server.mem?a("div",{staticClass:"cell"},[e._v(e._s(e.server.mem.total)+"G")]):e._e()]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.total)+"M")]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("已用内存")])]),a("td",[e.server.mem?a("div",{staticClass:"cell"},[e._v(e._s(e.server.mem.used)+"G")]):e._e()]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.used)+"M")]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("剩余内存")])]),a("td",[e.server.mem?a("div",{staticClass:"cell"},[e._v(e._s(e.server.mem.free)+"G")]):e._e()]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.free)+"M")]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("使用率")])]),a("td",[e.server.mem?a("div",{staticClass:"cell",class:{"text-danger":e.server.mem.usage>80}},[e._v(e._s(e.server.mem.usage)+"%")]):e._e()]),a("td",[e.server.jvm?a("div",{staticClass:"cell",class:{"text-danger":e.server.jvm.usage>80}},[e._v(e._s(e.server.jvm.usage)+"%")]):e._e()])])])])])])],1),a("el-col",{staticClass:"card-box",attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("服务器信息")])]),a("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[a("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[a("tbody",[a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("服务器名称")])]),a("td",[e.server.sys?a("div",{staticClass:"cell"},[e._v(e._s(e.server.sys.computerName))]):e._e()]),a("td",[a("div",{staticClass:"cell"},[e._v("操作系统")])]),a("td",[e.server.sys?a("div",{staticClass:"cell"},[e._v(e._s(e.server.sys.osName))]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("服务器IP")])]),a("td",[e.server.sys?a("div",{staticClass:"cell"},[e._v(e._s(e.server.sys.computerIp))]):e._e()]),a("td",[a("div",{staticClass:"cell"},[e._v("系统架构")])]),a("td",[e.server.sys?a("div",{staticClass:"cell"},[e._v(e._s(e.server.sys.osArch))]):e._e()])])])])])])],1),a("el-col",{staticClass:"card-box",attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Java虚拟机信息")])]),a("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[a("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[a("tbody",[a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("Java名称")])]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.name))]):e._e()]),a("td",[a("div",{staticClass:"cell"},[e._v("Java版本")])]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.version))]):e._e()])]),a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v("启动时间")])]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.startTime))]):e._e()]),a("td",[a("div",{staticClass:"cell"},[e._v("运行时长")])]),a("td",[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.runTime))]):e._e()])]),a("tr",[a("td",{attrs:{colspan:"1"}},[a("div",{staticClass:"cell"},[e._v("安装路径")])]),a("td",{attrs:{colspan:"3"}},[e.server.jvm?a("div",{staticClass:"cell"},[e._v(e._s(e.server.jvm.home))]):e._e()])]),a("tr",[a("td",{attrs:{colspan:"1"}},[a("div",{staticClass:"cell"},[e._v("项目路径")])]),a("td",{attrs:{colspan:"3"}},[e.server.sys?a("div",{staticClass:"cell"},[e._v(e._s(e.server.sys.userDir))]):e._e()])])])])])])],1),a("el-col",{staticClass:"card-box",attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("磁盘状态")])]),a("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[a("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[a("thead",[a("tr",[a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("盘符路径")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("文件系统")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("盘符类型")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("总大小")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("可用大小")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("已用大小")])]),a("th",{staticClass:"is-leaf"},[a("div",{staticClass:"cell"},[e._v("已用百分比")])])])]),e.server.sysFiles?a("tbody",e._l(e.server.sysFiles,(function(t){return a("tr",[a("td",[a("div",{staticClass:"cell"},[e._v(e._s(t.dirName))])]),a("td",[a("div",{staticClass:"cell"},[e._v(e._s(t.sysTypeName))])]),a("td",[a("div",{staticClass:"cell"},[e._v(e._s(t.typeName))])]),a("td",[a("div",{staticClass:"cell"},[e._v(e._s(t.total))])]),a("td",[a("div",{staticClass:"cell"},[e._v(e._s(t.free))])]),a("td",[a("div",{staticClass:"cell"},[e._v(e._s(t.used))])]),a("td",[a("div",{staticClass:"cell",class:{"text-danger":t.usage>80}},[e._v(e._s(t.usage)+"%")])])])})),0):e._e()])])])],1)],1)],1)},i=[],o=a("b775");function r(){return Object(o["a"])({url:"/monitor/server",method:"get"})}var l={name:"Server",data:function(){return{loading:[],server:[]}},created:function(){this.getList(),this.openLoading()},methods:{getList:function(){var e=this;r().then((function(t){e.server=t.data,e.loading.close()}))},openLoading:function(){this.loading=this.$loading({lock:!0,text:"拼命读取中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports},"2a6e":function(e,t,a){},"2b78":function(e,t,a){},"2ba5":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a("b775");a("c38a");function i(e){return Object(n["a"])({url:"/base/info/save",method:"post",data:e})}function o(){return Object(n["a"])({url:"/base/info/get",method:"get"})}},"2bb4":function(e,t,a){},"2bec":function(e,t,a){},"2bf9":function(e,t,a){},"2ccb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["base:info:list"],expression:"['base:info:list']"}],attrs:{title:"企业基础信息",name:"1"}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":"111px"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"公司名称",prop:"nsrmc"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入公司名称",maxlength:50},model:{value:e.formData.nsrmc,callback:function(t){e.$set(e.formData,"nsrmc",t)},expression:"formData.nsrmc"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"nsrsbh"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入纳税人识别号",maxlength:20,clearable:""},model:{value:e.formData.nsrsbh,callback:function(t){e.$set(e.formData,"nsrsbh",t)},expression:"formData.nsrsbh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"小规模纳税人",prop:"xgmnsr"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":"1","inactive-value":0},model:{value:e.formData.xgmnsr,callback:function(t){e.$set(e.formData,"xgmnsr",t)},expression:"formData.xgmnsr"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[e._l(e.invTypeOptions,(function(t){return a("el-col",{key:t.dictValue,attrs:{span:8}},[a("el-form-item",{attrs:{label:t.dictLabel,prop:"checkAmount"+t.dictValue,rules:[{pattern:/\d+(\.\d+)?$/,message:"金额只能是数字",trigger:"blur"}]}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入"+t.dictLabel+"限额",clearable:""},on:{input:function(t){return e.onInput()}},model:{value:e.formData["checkAmount"+t.dictValue],callback:function(a){e.$set(e.formData,"checkAmount"+t.dictValue,a)},expression:"formData['checkAmount' + d.dictValue]"}})],1)],1)})),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公司地址电话",prop:"gsdzdh"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入公司地址电话",maxlength:255,"show-word-limit":"",clearable:""},model:{value:e.formData.gsdzdh,callback:function(t){e.$set(e.formData,"gsdzdh",t)},expression:"formData.gsdzdh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"税号限制",prop:"shxz"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":"1","inactive-value":0},model:{value:e.formData.shxz,callback:function(t){e.$set(e.formData,"shxz",t)},expression:"formData.shxz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"含税",prop:"hsbz"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":"1","inactive-value":0},model:{value:e.formData.hsbz,callback:function(t){e.$set(e.formData,"hsbz",t)},expression:"formData.hsbz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否开完票弹出打印",prop:"kpdy"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":"1","inactive-value":0},model:{value:e.formData.kpdy,callback:function(t){e.$set(e.formData,"kpdy",t)},expression:"formData.kpdy"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"税率限制",prop:"rate"}},[a("el-select",{style:{width:"100%"},attrs:{multiple:"",placeholder:"请选择税率",clearable:""},on:{change:function(t){return e.changeRateIndex(e.formData.rate)}},model:{value:e.formData.rate,callback:function(t){e.$set(e.formData,"rate",t)},expression:"formData.rate"}},e._l(e.slOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数电随机开票员",prop:"sdsjkpy"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":"1","inactive-value":0},model:{value:e.formData.sdsjkpy,callback:function(t){e.$set(e.formData,"sdsjkpy",t)},expression:"formData.sdsjkpy"}})],1)],1)],2),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formData.bsfs,expression:"formData.bsfs==1"}],attrs:{label:"签章账号",prop:"qzzh"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入签章账号",maxlength:50,clearable:""},model:{value:e.formData.qzzh,callback:function(t){e.$set(e.formData,"qzzh",t)},expression:"formData.qzzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.formData.bsfs,expression:"formData.bsfs==1"}],attrs:{label:"签章密码",prop:"qzmm"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入签章密码",maxlength:50,clearable:""},model:{value:e.formData.qzmm,callback:function(t){e.$set(e.formData,"qzmm",t)},expression:"formData.qzmm"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"邮箱账号",prop:"yxzh"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入邮箱账号",maxlength:50,clearable:""},model:{value:e.formData.yxzh,callback:function(t){e.$set(e.formData,"yxzh",t)},expression:"formData.yxzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"密码",prop:"yxmm"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码",maxlength:50,clearable:""},model:{value:e.formData.yxmm,callback:function(t){e.$set(e.formData,"yxmm",t)},expression:"formData.yxmm"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"协议",prop:"yxxy"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择邮箱协议",clearable:""},model:{value:e.formData.yxxy,callback:function(t){e.$set(e.formData,"yxxy",t)},expression:"formData.yxxy"}},e._l(e.yxxyOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue,disabled:e.disabled}})})),1)],1)],1)],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["base:info:save"],expression:"['base:info:save']"}],attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1),a("el-collapse-item",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:billsetting:query"],expression:"['output:billsetting:query']"}],attrs:{title:"扩展配置",name:"3"}},[a("el-row",{attrs:{gutter:15}},[a("setting")],1)],1)],1)],1)},i=[],o=a("ade3"),r=(a("e9c4"),a("2ba5")),l=a("27f7"),s=a("e261"),c=a("f40a"),u={components:{Setting:l["default"],Goods:s["default"],Customer:c["default"]},props:[],data:function(){var e;return e={fpxe:"fpxe_",slOptions:[],invTypeOptions:[],loading:!0,activeNames:["1"],formData:{nsrsbh:"",xgmnsr:"0",spkl:void 0,nsrmc:void 0,ppxe:void 0,zpxe:void 0,dzpxe:void 0,gsdzdh:void 0,shxz:"0",hsbz:"0",sl:[],bsfs:"0",kpdy:"0",qzzh:void 0,qzmm:void 0,yxzh:void 0,yxmm:void 0,yxxy:void 0,sdsjkpy:"0"},rules:Object(o["a"])({nsrsbh:[{required:!0,message:"请输入纳税人识别号",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],spkl:[{required:!0,message:"请输入税盘口令",trigger:"blur"},{pattern:/^[0-9]*$/,message:"口令只能是数字",trigger:"blur"}],nsrmc:[{required:!0,message:"请输入公司名称",trigger:"blur"}],ppxe:[{pattern:/\d+(\.\d+)?$/,message:"金额只能是数字",trigger:"blur"}],zpxe:[{pattern:/\d+(\.\d+)?$/,message:"金额只能是数字",trigger:"blur"}],dzpxe:[{pattern:/\d+(\.\d+)?$/,message:"金额只能是数字",trigger:"blur"}],gsdzdh:[],rate:[],bsfs:[{required:!0,message:"请选择部署方式",trigger:"change"}],kpdy:[{required:!0,message:"请选择是否打印",trigger:"change"}],qzzh:[],qzmm:[],yxzh:[],yxmm:[]},"yxzh",[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}])},Object(o["a"])(e,"slOptions",[]),Object(o["a"])(e,"bsfsOptions",[{label:"分散部署",value:"0"},{label:"集中部署",value:"1"}]),Object(o["a"])(e,"splxOptions",[{label:"航天",value:"0"},{label:"百望",value:"1"}]),Object(o["a"])(e,"yxxyOptions",[]),e},computed:{},watch:{},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.slOptions=t.data})),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("email_host").then((function(t){e.yxxyOptions=t.data})),this.getBaseInfo()},mounted:function(){},methods:{onInput:function(){this.$forceUpdate()},submitForm:function(){var e=this;this.$refs["elForm"].validate((function(t){if(t){var a="";if(0==e.formData.rate.length)a="";else{for(var n=0;n<e.formData.rate.length;n++)a+=e.formData.rate[n]+",";a=a.substring(0,a.length-1)}var i=[];e.formData.rate=a;for(var o=0;o<e.invTypeOptions.length;o++){var l=e.invTypeOptions[o].dictValue,s=e.formData["checkAmount"+l];i.push({type:l,amount:s,bizType:"NSRZTXX"})}e.formData.limitAmount=JSON.stringify(i),Object(r["b"])(e.formData).then((function(t){200===t.code?(e.msgSuccess("保存成功"),e.getBaseInfo()):e.msgError(t.msg)})).catch((function(){}))}}))},changeRateIndex:function(e){if(e.length>0){for(var t=[],a=0;a<this.slOptions.length;a++)for(var n=0;n<e.length;n++)if(this.slOptions[a].dictValue==e[n]){t.push(e[n]);break}this.formData.rate=t}},getBaseInfo:function(){var e=this;Object(r["a"])().then((function(t){if(null==t.data)e.formData.nsrmc=t.dept.deptName;else{e.formData=t.data;var a=t.data.rate,n=[];if(null!=a&&""!=a)for(var i=a.split(","),o=0;o<i.length;o++)n.push(i[o]);e.formData.rate=n;for(var r=0;r<e.formData.amountLimitDtos.length;r++)e.formData["checkAmount"+e.formData.amountLimitDtos[r].invType]=e.formData.amountLimitDtos[r].limitAmount}}))},resetForm:function(){this.$refs["elForm"].resetFields()}}},d=u,p=a("2877"),h=Object(p["a"])(d,n,i,!1,null,null,null);t["default"]=h.exports},"2d59":function(e,t,a){"use strict";a("2bf9")},"2e2a":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return l}));var n={formRef:"elForm",formModel:"formData",size:"medium",labelPosition:"right",labelWidth:100,formRules:"rules",gutter:15,disabled:!1,span:24,formBtns:!0},i=[{label:"单行文本",tag:"el-input",tagIcon:"input",placeholder:"请输入",defaultValue:void 0,span:24,labelWidth:null,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"","suffix-icon":"",maxlength:null,"show-word-limit":!1,readonly:!1,disabled:!1,required:!0,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/input"},{label:"多行文本",tag:"el-input",tagIcon:"textarea",type:"textarea",placeholder:"请输入",defaultValue:void 0,span:24,labelWidth:null,autosize:{minRows:4,maxRows:4},style:{width:"100%"},maxlength:null,"show-word-limit":!1,readonly:!1,disabled:!1,required:!0,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/input"},{label:"密码",tag:"el-input",tagIcon:"password",placeholder:"请输入",defaultValue:void 0,span:24,"show-password":!0,labelWidth:null,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"","suffix-icon":"",maxlength:null,"show-word-limit":!1,readonly:!1,disabled:!1,required:!0,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/input"},{label:"计数器",tag:"el-input-number",tagIcon:"number",placeholder:"",defaultValue:void 0,span:24,labelWidth:null,min:void 0,max:void 0,step:void 0,"step-strictly":!1,precision:void 0,"controls-position":"",disabled:!1,required:!0,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/input-number"}],o=[{label:"下拉选择",tag:"el-select",tagIcon:"select",placeholder:"请选择",defaultValue:void 0,span:24,labelWidth:null,style:{width:"100%"},clearable:!0,disabled:!1,required:!0,filterable:!1,multiple:!1,options:[{label:"选项一",value:1},{label:"选项二",value:2}],regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/select"},{label:"级联选择",tag:"el-cascader",tagIcon:"cascader",placeholder:"请选择",defaultValue:[],span:24,labelWidth:null,style:{width:"100%"},props:{props:{multiple:!1}},"show-all-levels":!0,disabled:!1,clearable:!0,filterable:!1,required:!0,options:[{id:1,value:1,label:"选项1",children:[{id:2,value:2,label:"选项1-1"}]}],dataType:"dynamic",labelKey:"label",valueKey:"value",childrenKey:"children",separator:"/",regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/cascader"},{label:"单选框组",tag:"el-radio-group",tagIcon:"radio",defaultValue:void 0,span:24,labelWidth:null,style:{},optionType:"default",border:!1,size:"medium",disabled:!1,required:!0,options:[{label:"选项一",value:1},{label:"选项二",value:2}],regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/radio"},{label:"多选框组",tag:"el-checkbox-group",tagIcon:"checkbox",defaultValue:[],span:24,labelWidth:null,style:{},optionType:"default",border:!1,size:"medium",disabled:!1,required:!0,options:[{label:"选项一",value:1},{label:"选项二",value:2}],regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/checkbox"},{label:"开关",tag:"el-switch",tagIcon:"switch",defaultValue:!1,span:24,labelWidth:null,style:{},disabled:!1,required:!0,"active-text":"","inactive-text":"","active-color":null,"inactive-color":null,"active-value":!0,"inactive-value":!1,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/switch"},{label:"滑块",tag:"el-slider",tagIcon:"slider",defaultValue:null,span:24,labelWidth:null,disabled:!1,required:!0,min:0,max:100,step:1,"show-stops":!1,range:!1,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/slider"},{label:"时间选择",tag:"el-time-picker",tagIcon:"time",placeholder:"请选择",defaultValue:null,span:24,labelWidth:null,style:{width:"100%"},disabled:!1,clearable:!0,required:!0,"picker-options":{selectableRange:"00:00:00-23:59:59"},format:"HH:mm:ss","value-format":"HH:mm:ss",regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/time-picker"},{label:"时间范围",tag:"el-time-picker",tagIcon:"time-range",defaultValue:null,span:24,labelWidth:null,style:{width:"100%"},disabled:!1,clearable:!0,required:!0,"is-range":!0,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"HH:mm:ss","value-format":"HH:mm:ss",regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/time-picker"},{label:"日期选择",tag:"el-date-picker",tagIcon:"date",placeholder:"请选择",defaultValue:null,type:"date",span:24,labelWidth:null,style:{width:"100%"},disabled:!1,clearable:!0,required:!0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",readonly:!1,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/date-picker"},{label:"日期范围",tag:"el-date-picker",tagIcon:"date-range",defaultValue:null,span:24,labelWidth:null,style:{width:"100%"},type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",disabled:!1,clearable:!0,required:!0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",readonly:!1,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/date-picker"},{label:"评分",tag:"el-rate",tagIcon:"rate",defaultValue:0,span:24,labelWidth:null,style:{},max:5,"allow-half":!1,"show-text":!1,"show-score":!1,disabled:!1,required:!0,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/rate"},{label:"颜色选择",tag:"el-color-picker",tagIcon:"color",defaultValue:null,labelWidth:null,"show-alpha":!1,"color-format":"",disabled:!1,required:!0,size:"medium",regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/color-picker"},{label:"上传",tag:"el-upload",tagIcon:"upload",action:"https://jsonplaceholder.typicode.com/posts/",defaultValue:null,labelWidth:null,disabled:!1,required:!0,accept:"",name:"file","auto-upload":!0,showTip:!1,buttonText:"点击上传",fileSize:2,sizeUnit:"MB","list-type":"text",multiple:!1,regList:[],changeTag:!0,document:"https://element.eleme.cn/#/zh-CN/component/upload"}],r=[{layout:"rowFormItem",tagIcon:"row",type:"default",justify:"start",align:"top",label:"行容器",layoutTree:!0,children:[],document:"https://element.eleme.cn/#/zh-CN/component/layout"}],l={"el-input":"blur","el-input-number":"blur","el-select":"change","el-radio-group":"change","el-checkbox-group":"change","el-cascader":"change","el-time-picker":"change","el-date-picker":"change","el-rate":"change"}},"2f0e":function(e,t,a){"use strict";a("251d")},"2f3d":function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"h",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"g",(function(){return d}));var n=a("b775");function i(e){return Object(n["a"])({url:"/api/xp/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/api/xp/getInfo",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/output/history",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/output/history",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/output/history/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/api/xp/export",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/output/history/exportDetail",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/api/xp/type/"+e,method:"get"})}},"2fe4":function(e,t,a){"use strict";a("4296")},3:function(e,t){},3022:function(e,t,a){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),a={},n=0;n<t.length;n++)a[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return a},i=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(l(arguments[a]));return t.join(" ")}a=1;for(var n=arguments,o=n.length,r=String(e).replace(i,(function(e){if("%%"===e)return"%";if(a>=o)return e;switch(e){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(t){return"[Circular]"}default:return e}})),s=n[a];a<o;s=n[++a])y(s)||!S(s)?r+=" "+s:r+=" "+l(s);return r},t.deprecate=function(a,n){if("undefined"!==typeof e&&!0===e.noDeprecation)return a;if("undefined"===typeof e)return function(){return t.deprecate(a,n).apply(this,arguments)};var i=!1;function o(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return a.apply(this,arguments)}return o};var o,r={};function l(e,a){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(a)?n.showHidden=a:a&&t._extend(n,a),T(n.showHidden)&&(n.showHidden=!1),T(n.depth)&&(n.depth=2),T(n.colors)&&(n.colors=!1),T(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),d(n,e,n.depth)}function s(e,t){var a=l.styles[t];return a?"["+l.colors[a][0]+"m"+e+"["+l.colors[a][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach((function(e,a){t[e]=!0})),t}function d(e,a,n){if(e.customInspect&&a&&P(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var i=a.inspect(n,e);return w(i)||(i=d(e,i,n)),i}var o=p(e,a);if(o)return o;var r=Object.keys(a),l=u(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(a)),N(a)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return h(a);if(0===r.length){if(P(a)){var s=a.name?": "+a.name:"";return e.stylize("[Function"+s+"]","special")}if(D(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(O(a))return e.stylize(Date.prototype.toString.call(a),"date");if(N(a))return h(a)}var c,v="",y=!1,_=["{","}"];if(g(a)&&(y=!0,_=["[","]"]),P(a)){var x=a.name?": "+a.name:"";v=" [Function"+x+"]"}return D(a)&&(v=" "+RegExp.prototype.toString.call(a)),O(a)&&(v=" "+Date.prototype.toUTCString.call(a)),N(a)&&(v=" "+h(a)),0!==r.length||y&&0!=a.length?n<0?D(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),c=y?m(e,a,n,l,r):r.map((function(t){return f(e,a,n,l,t,y)})),e.seen.pop(),b(c,v,_)):_[0]+v+_[1]}function p(e,t){if(T(t))return e.stylize("undefined","undefined");if(w(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}return x(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,a,n,i){for(var o=[],r=0,l=t.length;r<l;++r)R(t,String(r))?o.push(f(e,t,a,n,String(r),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(e,t,a,n,i,!0))})),o}function f(e,t,a,n,i,o){var r,l,s;if(s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},s.get?l=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(l=e.stylize("[Setter]","special")),R(n,i)||(r="["+i+"]"),l||(e.seen.indexOf(s.value)<0?(l=y(a)?d(e,s.value,null):d(e,s.value,a-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n"))):l=e.stylize("[Circular]","special")),T(r)){if(o&&i.match(/^\d+$/))return l;r=JSON.stringify(""+i),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+l}function b(e,t,a){var n=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return n>60?a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1]:a[0]+t+" "+e.join(", ")+" "+a[1]}function g(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function y(e){return null===e}function _(e){return null==e}function x(e){return"number"===typeof e}function w(e){return"string"===typeof e}function k(e){return"symbol"===typeof e}function T(e){return void 0===e}function D(e){return S(e)&&"[object RegExp]"===A(e)}function S(e){return"object"===typeof e&&null!==e}function O(e){return S(e)&&"[object Date]"===A(e)}function N(e){return S(e)&&("[object Error]"===A(e)||e instanceof Error)}function P(e){return"function"===typeof e}function C(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function A(e){return Object.prototype.toString.call(e)}function F(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(a){if(T(o)&&(o=Object({NODE_ENV:"production",VUE_APP_BAG_INTERFACE_PORT:"http://127.0.0.1:8088",VUE_APP_BASE_API:"/prod-api",VUE_APP_BASE_FILE_DOMAIN:"https://vat.zzhcn.net",VUE_APP_BASE_FILE_PORT:"/einvoices",VUE_APP_NEED_PREIX:"/",VUE_APP_SINGLE_URL:"https://idm.liby.com.cn/IAM/oauth/authorize?client_id=APP032&redirect_uri=https://vat.liby.com.cn/IDM",BASE_URL:"/"}).NODE_DEBUG||""),a=a.toUpperCase(),!r[a])if(new RegExp("\\b"+a+"\\b","i").test(o)){var n=e.pid;r[a]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",a,n,e)}}else r[a]=function(){};return r[a]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=g,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=_,t.isNumber=x,t.isString=w,t.isSymbol=k,t.isUndefined=T,t.isRegExp=D,t.isObject=S,t.isDate=O,t.isError=N,t.isFunction=P,t.isPrimitive=C,t.isBuffer=a("d60a");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var e=new Date,t=[F(e.getHours()),F(e.getMinutes()),F(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",E(),t.format.apply(t,arguments))},t.inherits=a("28a0"),t._extend=function(e,t){if(!t||!S(t))return e;var a=Object.keys(t),n=a.length;while(n--)e[a[n]]=t[a[n]];return e};var z="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function j(e,t){if(!e){var a=new Error("Promise was rejected with a falsy value");a.reason=e,e=a}return t(e)}function L(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function a(){for(var a=[],n=0;n<arguments.length;n++)a.push(arguments[n]);var i=a.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,r=function(){return i.apply(o,arguments)};t.apply(this,a).then((function(t){e.nextTick(r,null,t)}),(function(t){e.nextTick(j,t,r)}))}return Object.setPrototypeOf(a,Object.getPrototypeOf(t)),Object.defineProperties(a,n(t)),a}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(z&&e[z]){var t=e[z];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,z,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,a,n=new Promise((function(e,n){t=e,a=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?a(e):t(n)}));try{e.apply(this,i)}catch(r){a(r)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),z&&Object.defineProperty(t,z,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=z,t.callbackify=L}).call(this,a("4362"))},"30cc":function(e,t,a){"use strict";a("2b78")},"31d3":function(e,t,a){"use strict";a("afe6")},"331c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.invoiceDetailLoading,expression:"invoiceDetailLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"95px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticClass:"form-input-textarea",staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode","string"===typeof t?t.trim():t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(t){return"81"==t.dictValue||"82"==t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"红冲标志",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否作废",prop:"cancelFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否作废",clearable:"",size:"small"},model:{value:e.queryParams.cancelFlag,callback:function(t){e.$set(e.queryParams,"cancelFlag",t)},expression:"queryParams.cancelFlag"}},e._l(e.cancelFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已打印",prop:"printedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已打印",clearable:"",size:"small"},model:{value:e.queryParams.printedFlag,callback:function(t){e.$set(e.queryParams,"printedFlag",t)},expression:"queryParams.printedFlag"}},e._l(e.printedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已推送",prop:"pushedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已推送",clearable:"",size:"small"},model:{value:e.queryParams.pushedFlag,callback:function(t){e.$set(e.queryParams,"pushedFlag",t)},expression:"queryParams.pushedFlag"}},e._l(e.pushedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"签章标志",prop:"signFlag"}},[a("el-select",{attrs:{placeholder:"请选择签章标志",clearable:"",size:"small"},model:{value:e.queryParams.signFlag,callback:function(t){e.$set(e.queryParams,"signFlag",t)},expression:"queryParams.signFlag"}},e._l(e.signFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invoicer,callback:function(t){e.$set(e.queryParams,"invoicer","string"===typeof t?t.trim():t)},expression:"queryParams.invoicer"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.note,callback:function(t){e.$set(e.queryParams,"note","string"===typeof t?t.trim():t)},expression:"queryParams.note"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:sign"],expression:"['qdoutput:invoice:sign']"}],attrs:{type:"danger",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.refreshSignature}},[e._v("刷新签章")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:download"],expression:"['qdoutput:invoice:download']"}],attrs:{type:"info",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.downloadInvoice}},[e._v("下载")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:push"],expression:"['qdoutput:invoice:push']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.emailPush}},[e._v("邮箱推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:pushSms"],expression:"['qdoutput:invoice:pushSms']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.messagePush}},[e._v("短信推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:pushCard"],expression:"['qdoutput:invoice:pushCard']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.cardPush}},[e._v("卡包推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini",disabled:e.single},on:{click:e.handleEditEmail}},[e._v("修改邮箱")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:export"],expression:"['qdoutput:invoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出主体")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:invoice:export"],expression:"['qdoutput:invoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ticketMainTable",attrs:{data:e.invoiceList,"row-class-name":e.tableRowClassName,height:e.tableHeight,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:""},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceInfo(n.row)}}},[e._v(" "+e._s(n.row.billNo)+" ")]):"invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"bizDate"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d} {h}:{i}:{s}"))+" ")]):"redFlag"==t.prop?a("span",[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"cancelFlag"==t.prop?a("span",[e._v(" "+e._s(e.cancelFlagFormat(n.row))+" ")]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"printedFlag"==t.prop?a("span",[e._v(" "+e._s(e.printedFlagFormat(n.row))+" ")]):"pushedFlag"==t.prop?a("span",[e._v(" "+e._s(e.pushedFlagFormat(n.row))+" ")]):"rewriteFlag"==t.prop?a("span",[e._v(" "+e._s(e.rewriteFlagFormat(n.row))+" ")]):"signFlag"==t.prop?a("span",[e._v(" "+e._s(e.signFlagFormat(n.row))+" ")]):"vouchFlag"==t.prop?a("span",[e._v(" "+e._s(e.vouchFlagFormat(n.row))+" ")]):"pdfUrl"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"}},[a("span",{on:{click:function(t){return e.showPdf(n.row)}}},[e._v("查看")]),a("span",{staticStyle:{margin:"0 5px"}},[e._v("/")]),a("span",{on:{click:function(t){return e.downloadPdf(n.row)}}},[e._v("下载")])]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"invNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo)+" ")]):"sourceInvCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.sourceInvCode)+" ")]):"sourceInvNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.sourceInvNo:"")+n.row.sourceInvNo)+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("ticket-detail-show-modal",{ref:"showModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("el-dialog",{attrs:{title:"pdf详情",visible:e.pdfDetailOpen,width:"60vw","append-to-body":"",id:"pdfDetailModal"},on:{"update:visible":function(t){e.pdfDetailOpen=t}}},[a("div",{staticStyle:{height:"60vh"}},[a("iframe",{attrs:{src:e.pdfModalUrl,width:"100%",scrolling:"auto",frameborder:"no",height:"100%"}})])]),a("el-dialog",{attrs:{title:"修改邮箱",visible:e.editEmail.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.editEmail,"open",t)}}},[a("el-form",{ref:"editEmailForm",attrs:{model:e.editEmail.form,rules:e.editEmail.rules,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.editEmail.form.buyEmail,callback:function(t){e.$set(e.editEmail.form,"buyEmail",t)},expression:"editEmail.form.buyEmail"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitEditEmail}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.editEmail.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("ac1f"),a("5319"),a("498a"),a("d81d"),a("a15b"),a("c394")),l=a("3478"),s=a("c85c"),c=(a("722a"),a("c10b")),u=a("0d34"),d=a("b526"),p=a("ed08"),h={name:"Qdticket",components:{TicketDetailShowModal:u["default"],TotalRowTable:d["default"]},data:function(){return{module:"einvoice",columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:180,columnSort:0},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:150,columnSort:1},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:120,columnSort:2},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:3},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:4},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:5},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:150,columnSort:6},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:120,columnSort:7},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:120,columnSort:8},{label:"购方纳税人识别号",prop:"buyTaxNo",align:"center",show:!0,width:180,columnSort:9},{label:"购方开户账号",prop:"buyBankAccount",align:"center",show:!0,width:180,columnSort:10},{label:"购方地址电话",prop:"buyAddrTel",align:"center",show:!0,width:150,columnSort:11},{label:"购方邮箱",prop:"buyEmail",align:"center",show:!0,width:120,columnSort:12},{label:"购方手机号码",prop:"buyTelNo",align:"center",show:!0,width:120,columnSort:13},{label:"备注",prop:"note",align:"center",show:!0,width:180,columnSort:14},{label:"收款人",prop:"cashier",align:"center",show:!0,width:180,columnSort:15},{label:"复核人",prop:"checker",align:"center",show:!0,width:150,columnSort:16},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:120,columnSort:17},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:120,columnSort:18},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:19},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:20},{label:"源正数发票代码",prop:"sourceinvCode",align:"center",show:!0,width:150,columnSort:21},{label:"源正数发票号码",prop:"sourceinvNo",align:"center",show:!0,width:120,columnSort:22},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:120,columnSort:23},{label:"是否作废",prop:"cancelFlag",align:"center",show:!0,width:180,columnSort:24},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:180,columnSort:25},{label:"是否已打印",prop:"printedFlag",align:"center",show:!0,width:150,columnSort:26},{label:"是否已推送",prop:"pushedFlag",align:"center",show:!0,width:120,columnSort:27},{label:"回写标志",prop:"rewriteFlag",align:"center",show:!0,width:120,columnSort:28},{label:"密码区",prop:"pwdCode",align:"center",show:!0,width:180,columnSort:30},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:150,columnSort:31},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:120,columnSort:32},{label:"签章标志",prop:"signFlag",align:"center",show:!0,width:120,columnSort:33},{label:"记账类型",prop:"vouchType",align:"center",show:!0,width:180,columnSort:34},{label:"已记账标识",prop:"vouchFlag",align:"center",show:!0,width:180,columnSort:35},{label:"记账结果",prop:"vouchResult",align:"center",show:!0,width:180,columnSort:36},{label:"pdf预览",prop:"pdfUrl",align:"center",show:!0,width:180,columnSort:37}],tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,dateRange:[],showSearch:!0,total:0,invoiceList:[],flagRedopen:!1,title:"",open:!1,billSplitTypeOptions:[],billSourceOptions:[],billTypeOptions:[],invTypeOptions:[],detailFlagOptions:[],cancelApplyStatusOptions:[],redApplyStatusOptions:[],redFlagOptions:[],cancelFlagOptions:[],printedFlagOptions:[],pushedFlagOptions:[],rewriteFlagOptions:[],signFlagOptions:[],headTypeOptions:[],vouchFlagOptions:[],queryParams:{billNos:null,pageNum:1,pageSize:10,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:null,detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,invStatus:null,taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null,tdyslxdm:""},form:{},flagRedForm:{},rules:{},redRules:{invCode:[{required:!0,message:"发票代码不能为空",trigger:"blur"}],invNo:[{required:!0,message:"发票号码不能为空",trigger:"blur"}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],negNativeNo:[{required:!0,message:"红字申请单号不能为空",trigger:"blur"}]},taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],invoiceDetailLoading:!1,showProgress:!1,functionName:"",loadingTime:null,operationIndex:0,operationIdArr:[],operationRowArr:[],checkboxClick:!1,pdfModalUrl:null,pdfDetailOpen:!1,editEmail:{open:!1,form:{id:"",buyEmail:""},rules:{buyEmail:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/,message:"邮箱格式不正确",trigger:["blur","change"]}]}}}},computed:{totalTableData:function(){var e=Object(p["e"])(this.rows);return 0==e.length&&(e=Object(p["e"])(this.invoiceList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data,e.getList()})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.cancelFlagOptions=t.data,e.printedFlagOptions=t.data})),this.getDicts("approve_status").then((function(t){e.cancelApplyStatusOptions=t.data,e.redApplyStatusOptions=t.data})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),this.getDicts("red_flag").then((function(t){e.redFlagOptions=t.data})),this.getDicts("invoice_push").then((function(t){e.pushedFlagOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("invoice_sign_status").then((function(t){e.signFlagOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("vouch_flag").then((function(t){e.vouchFlagOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var a={module:this.module};Promise.all([Object(c["b"])(a),Object(c["a"])(a)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].columnSort=n}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.ticketMainTable.doLayout()}))},getList:function(){var e,t=this;this.loading=!0;var a=Object(p["e"])(this.queryParams);a.invType?a.invTypes=new Array(a.invType):a.invTypes=["81","82"],20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),Object(r["w"])(this.addDateRange(a,this.dateRange)).then((function(e){t.invoiceList=e.rows,t.total=e.total,t.loading=!1}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},cancelApplyStatusFormat:function(e,t){return this.selectDictLabel(this.cancelApplyStatusOptions,e.cancelApplyStatus)},redApplyStatusFormat:function(e,t){return this.selectDictLabel(this.redApplyStatusOptions,e.redApplyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},printedFlagFormat:function(e,t){return this.selectDictLabel(this.printedFlagOptions,e.printedFlag)},pushedFlagFormat:function(e,t){if(null!=e.pushedFlag||""!=e.pushedFlag){if(-1==e.pushedFlag.indexOf("-"))return"0"==e.pushedFlag?"未推送":"4"==e.pushedFlag?"无需推送":"推送成功";for(var a=e.pushedFlag.split(","),n="",i=0;i<a.length;i++)a[i].indexOf("1")>=0?n+="邮箱":a[i].indexOf("2")>=0?n+="卡包":n+="短信",-1==a[i].indexOf("-")?n+="推送成功;":n+="推送失败;";return n}},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},signFlagFormat:function(e,t){return this.selectDictLabel(this.signFlagOptions,e.signFlag)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},vouchFlagFormat:function(e,t){return this.selectDictLabel(this.vouchFlagOptions,e.vouchFlag)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:"51",detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,invStatus:"0",taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},resetQuery:function(){this.resetForm("queryForm"),this.queryParams.billNos="",this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},showInvoiceInfo:function(e){var t=this;this.invoiceDetailLoading=!0,this.reset();var a=this.$refs.ticketMainTable.selection;void 0==e.id&&(e=a[0]),this.reset();var n=e.id||this.ids,i=e.invDate,o={id:n,invDate:i};this.$refs.showModal.fillBillDialog(o).then((function(){t.invoiceDetailLoading=!1}))},openValid1:function(){var e=this,t=Object(s["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("全电账号需要刷脸验证，是否跳转到账号管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Account"})})).catch((function(){})),new Promise((function(){}))):void 0}))},handleExport:function(){var e,t=this,a=Object(p["e"])(this.queryParams);a.idsArr=this.ids,20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.dynamicLoadingShow(10,"导出中"),Object(r["m"])(a)})).then((function(e){t.showProgress=!1,clearInterval(t.loadingTime),t.currencyDownload(e,"已开电子发票.xls",t)})).catch((function(){}))},handleExportDetail:function(){var e,t=this,a=Object(p["e"])(this.queryParams);a.idsArr=this.ids,20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.dynamicLoadingShow(10,"导出中"),Object(r["n"])(a)})).then((function(e){t.showProgress=!1,clearInterval(t.loadingTime),t.currencyDownload(e,"电子票明细.xls",t)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.ticketMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"ticketMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.invoiceList,"ticketMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},updateInvoiceTable:function(){this.getList()},refreshSignature:function(){var e=this;this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.refreshSignatureLogic()},refreshSignatureLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(l["a"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():(e.msgError("第"+e.operationIndex+"张"+t.msg),e.renewOperationParam(),e.getList()))})).catch((function(t){e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():(e.renewOperationParam(),e.getList())}))},downloadInvoice:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能下载")}}catch(s){n.e(s)}finally{n.f()}var l={ids:this.ids.join(",")};1==a.length?(l.id=a[0].id,l.invDate=a[0].invDate,Object(r["g"])(l).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))):Object(r["k"])(this.addDateRange(l,this.dateRange)).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))},emailPush:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(r){n.e(r)}finally{n.f()}this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.emailPushLogic()},emailPushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(r["C"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.emailPushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.emailPushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},messagePush:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(r){n.e(r)}finally{n.f()}this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.messagePushLogic()},cardPush:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(r){n.e(r)}finally{n.f()}this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.messageCardPushLogic()},messageCardPushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(r["B"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messageCardPushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},messagePushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(r["D"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},showPdf:function(e){"1"==e.signFlag?e.pdfUrl?(this.pdfDetailOpen=!0,this.pdfModalUrl=e.pdfUrl):this.msgError("请先给当前发票刷新签章"):this.msgError("当前发票尚未签章")},downloadPdf:function(e){e.chinaTaxFileUrl?window.open(e.chinaTaxFileUrl,"_blank"):this.msgError("请先给当前发票刷新签章")},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)},handleEditEmail:function(){var e=this;this.editEmail.open=!0,this.editEmail.form.id=this.rows[0].id,this.editEmail.form.buyEmail=this.rows[0].buyEmail,this.$nextTick((function(){e.$refs.editEmailForm.clearValidate()}))},submitEditEmail:function(){var e=this;this.$refs.editEmailForm.validate((function(t){if(t){var a=Object(p["e"])(e.editEmail.form);a.invDate=e.rows[0].invDate,e.$vLoading.show(),Object(r["J"])(a).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("修改成功"),e.editEmail.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}}))}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},"33a6":function(e,t,a){"use strict";a("f3f6")},3478:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/qd/invoice/signElectronic",method:"post",params:e})}},3565:function(e,t,a){e.exports=a.p+"static/img/empty.81ec100b.png"},"359c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:add"],expression:"['output:qdreg:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:edit"],expression:"['output:qdreg:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:remove"],expression:"['output:qdreg:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("right-toolbar",{on:{queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"qdRegisterTable",attrs:{data:e.registerList},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"税号",align:"center",prop:"nsrsbh"}}),a("el-table-column",{attrs:{label:"账号",align:"center",prop:"dlzh"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"link-type",attrs:{to:"/base/seller/"+t.row.id}},[a("span",[e._v(e._s(t.row.dlzh))])])]}}])}),a("el-table-column",{attrs:{label:"办税人姓名",align:"center",prop:"bsryxm"}}),a("el-table-column",{attrs:{label:"办税人手机号",align:"center",prop:"bsrysjhm"}}),a("el-table-column",{attrs:{label:"登记状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"自动开票",align:"center",prop:"autoFlag",formatter:e.autoOpenFormat},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row,"1")}},model:{value:t.row.autoFlag,callback:function(a){e.$set(t.row,"autoFlag",a)},expression:"scope.row.autoFlag"}})]}}])}),a("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"disabled",formatter:e.statusFormat},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row,"3")}},model:{value:t.row.disabled,callback:function(a){e.$set(t.row,"disabled",a)},expression:"scope.row.disabled"}})]}}])}),a("el-table-column",{attrs:{label:"打印方式",align:"center",prop:"printMethod",formatter:e.printMethodFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:edit"],expression:"['output:qdreg:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:remove"],expression:"['output:qdreg:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:qxfp"],expression:"['output:qdreg:qxfp']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.permAllot(t.row)}}},[e._v("权限分配")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.operation.title,visible:e.operation.open,width:"1000px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.operation,"open",t)},close:e.cancel}},[a("el-form",{ref:"form",attrs:{model:e.operation.form,rules:e.operation.rules,"label-width":"165px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人名称",prop:"nsrmc"}},[a("el-input",{attrs:{placeholder:"请输入纳税人名称"},model:{value:e.operation.form.nsrmc,callback:function(t){e.$set(e.operation.form,"nsrmc",t)},expression:"operation.form.nsrmc"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"nsrsbh"}},[a("el-input",{attrs:{placeholder:"请输入纳税人识别号"},model:{value:e.operation.form.nsrsbh,callback:function(t){e.$set(e.operation.form,"nsrsbh",t)},expression:"operation.form.nsrsbh"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办税人姓名",prop:"bsryxm"}},[a("el-input",{attrs:{placeholder:"请输入办税人姓名"},model:{value:e.operation.form.bsryxm,callback:function(t){e.$set(e.operation.form,"bsryxm",t)},expression:"operation.form.bsryxm"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录身份",prop:"dlsf"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择身份类型",clearable:"",size:"small"},model:{value:e.operation.form.dlsf,callback:function(t){e.$set(e.operation.form,"dlsf",t)},expression:"operation.form.dlsf"}},e._l(e.dllxOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录身份密码",prop:"dlsfmm"}},[a("el-input",{attrs:{placeholder:"请输入登录身份密码","show-password":""},model:{value:e.operation.form.dlsfmm,callback:function(t){e.$set(e.operation.form,"dlsfmm",t)},expression:"operation.form.dlsfmm"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地区编码",prop:"dqbm"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择地区",clearable:"",filterable:"",size:"small"},model:{value:e.operation.form.dqbm,callback:function(t){e.$set(e.operation.form,"dqbm",t)},expression:"operation.form.dqbm"}},e._l(e.dqOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录账号",prop:"dlzh"}},[a("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.operation.form.dlzh,callback:function(t){e.$set(e.operation.form,"dlzh",t)},expression:"operation.form.dlzh"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录密码",prop:"dlmm"}},[a("el-input",{attrs:{placeholder:"请输入登录密码","show-password":""},model:{value:e.operation.form.dlmm,callback:function(t){e.$set(e.operation.form,"dlmm",t)},expression:"operation.form.dlmm"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录方式",prop:"dlfs"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择登录方式",clearable:""},model:{value:e.operation.form.dlfs,callback:function(t){e.$set(e.operation.form,"dlfs",t)},expression:"operation.form.dlfs"}},e._l(e.dlfsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办税人员身份证件号码",prop:"bsrysfzjhm"}},[a("el-input",{attrs:{placeholder:"请输入办税人员身份证件号码"},model:{value:e.operation.form.bsrysfzjhm,callback:function(t){e.$set(e.operation.form,"bsrysfzjhm",t)},expression:"operation.form.bsrysfzjhm"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办税人员手机号码",prop:"bsrysjhm"}},[a("el-input",{attrs:{placeholder:"请输入办税人员手机号码"},model:{value:e.operation.form.bsrysjhm,callback:function(t){e.$set(e.operation.form,"bsrysjhm",t)},expression:"operation.form.bsrysjhm"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中间号码",prop:"zjh"}},[a("el-input",{attrs:{placeholder:"请输入中间号码"},model:{value:e.operation.form.zjh,callback:function(t){e.$set(e.operation.form,"zjh",t)},expression:"operation.form.zjh"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"自动开票",prop:"autoOpen"}},[a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":"1","inactive-value":"0"},model:{value:e.operation.form.autoFlag,callback:function(t){e.$set(e.operation.form,"autoFlag",t)},expression:"operation.form.autoFlag"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否启用",prop:"disabled"}},[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0"},model:{value:e.operation.form.disabled,callback:function(t){e.$set(e.operation.form,"disabled",t)},expression:"operation.form.disabled"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"打印方式",prop:"printMethod"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择打印方式",clearable:""},model:{value:e.operation.form.printMethod,callback:function(t){e.$set(e.operation.form,"printMethod",t)},expression:"operation.form.printMethod"}},e._l(e.printMethodOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.operation.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:e.perm.title,visible:e.perm.open,"append-to-body":"",width:"800px"},on:{"update:visible":function(t){return e.$set(e.perm,"open",t)}}},[a("el-transfer",{attrs:{filterable:"","filter-method":e.filterMethod,"filter-placeholder":"请输入姓名",titles:["可选人员","已选择人员"],props:{label:"nickName",key:"userId"},data:e.perm.deptUsers},model:{value:e.perm.chooseValue,callback:function(t){e.$set(e.perm,"chooseValue",t)},expression:"perm.chooseValue"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitPerm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.perm.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d3b7"),a("b64b"),a("a15b"),a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/output/qdreg/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/output/qdreg",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/output/qdreg",method:"put",data:e})}function c(e){return Object(o["a"])({url:"/output/qdreg/"+e,method:"delete"})}function u(e){return Object(o["a"])({url:"/output/qdreg/export",method:"post",responseType:"blob",data:e})}var d=a("5e91"),p=a("2ba5"),h=a("7b93"),m=a("ed08"),f=a("c38a"),b={name:"qdregister",components:{MyElProgress:h["a"]},data:function(){return{functionName:"",showProgress:!1,loadingTime:null,loading:!1,total:0,ids:[],rows:[],single:!0,multiple:!0,queryParams:{pageNum:1,pageSize:10},registerList:[],statusOptions:[],autoOpenOptions:[],dlfsOptions:[],dllxOptions:[],dqOptions:[],operation:{title:"",open:!1,form:{id:null,bsryxm:null,dlsf:null,dlsfmm:null,dlfs:null,dlmm:null,dlzh:null,nsrmc:null,nsrsbh:null,bsrysfzjhm:null,bsrysjhm:null,zjh:null},rules:{bsryxm:[{required:!0,message:"办税人姓名不能为空",trigger:"blur"}],dlsf:[{required:!0,message:"登录身份不能为空",trigger:"blur"}],dlsfmm:[{required:!0,message:"登录身份密码不能为空",trigger:"blur"}],dlfs:[{required:!0,message:"登录方式不能为空",trigger:"blur"}],dlmm:[{required:!0,message:"登录密码不能为空",trigger:"blur"}],dlzh:[{required:!0,message:"登录账号不能为空",trigger:"blur"}],nsrmc:[{required:!0,message:"纳税人名称不能为空",trigger:"blur"}],nsrsbh:[{required:!0,message:"纳税人识别号不能为空",trigger:"blur"}],bsrysfzjhm:[{required:!0,message:"办税人员身份证件号码不能为空",trigger:"blur"}],bsrysjhm:[{required:!0,message:"办税人员手机号码不能为空",trigger:"blur"}],zjh:[{required:!0,message:"中间号码不能为空",trigger:"blur"}]}},printMethodOptions:[{label:"开票/打印同一机器",value:"0"},{label:"开票/打印不同机器",value:"1"}],perm:{title:"",open:!1,module:"3",chooseValue:[],deptUsers:[]}}},created:function(){var e=this;this.getList(),this.getDicts("task_status").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.autoOpenOptions=t.data})),this.getDicts("qd_dlfs").then((function(t){e.dlfsOptions=t.data})),this.getDicts("qd_dqbm").then((function(t){e.dqOptions=t.data})),this.getDicts("qd_login_type").then((function(t){e.dllxOptions=t.data}))},methods:{statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},autoOpenFormat:function(e,t){return this.selectDictLabel(this.autoOpenOptions,e.autoOpen)},printMethodFormat:function(e,t){var a=this,n=[];return Object.keys(this.printMethodOptions).some((function(t){if(a.printMethodOptions[t].value==""+e.printMethod)return n.push(a.printMethodOptions[t].label),!0})),n.join("")},getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.registerList=t.rows,e.total=t.total,e.loading=!1}))},handleAdd:function(){var e=this;this.operation.open=!0,this.operation.title="新增",this.getBaseInfo(),this.$nextTick((function(){e.$refs.form.clearValidate()}))},getBaseInfo:function(){var e=this;Object(p["a"])().then((function(t){null==t.data?e.msgError("请先配置纳税人主体信息"):(e.operation.form.nsrmc=t.data.nsrmc,e.operation.form.nsrsbh=t.data.nsrsbh)}))},handleUpdate:function(e){var t=this,a=e.id?e:this.rows[0];this.operation.open=!0,this.operation.title="修改",this.$nextTick((function(){t.$refs.form.clearValidate(),t.operation.form=a,t.operation.form.djbj="1"}))},handleDelete:function(e){var t=this,a=e.id?new Array(e.id):this.ids;this.$vLoading.show(),c(a).then((function(e){t.$vLoading.hide(),200==e.code?(t.msgSuccess("删除成功"),t.getList()):t.msgError(e.msg)}))},handleExport:function(){var e=this;this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=Object(m["e"])(e.queryParams);return t.ids=e.ids,Object(f["g"])(10,"导出中",e),u(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"全电登记信息.xls",e)})).catch((function(){}))},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.operation.open=!1,e.$vLoading.show(),e.operation.form.id?s(e.operation.form).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("修改成功"),e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()})):l(e.operation.form).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("新增成功"),e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()})))}))},cancel:function(){this.operation.form={bsryxm:null,dlsf:null,dlsfmm:null,dlfs:null,dlmm:null,dlzh:null,nsrmc:null,nsrsbh:null,bsrysfzjhm:null,bsrysjhm:null,zjh:null},this.operation.open=!1},handleStatusChange:function(e,t){var a,n,i=this,o={id:e.id};"1"==t?(a="1"===e.autoFlag?"启用":"停用",o.autoFlag=e.autoFlag,n="自动开票"):"2"==t||(o.disabled=e.disabled,a="1"===e.disabled?"启用":"停用",n="账号"),this.$confirm('确认要"'+a+'"'+n+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s(o)})).then((function(){i.msgSuccess(a+"成功"),i.getList()})).catch((function(){"1"==t?e.autoFlag="1"===e.autoFlag?"0":"1":"2"==t?e.openApprove="1"===e.openApprove?"0":"1":e.disabled="1"===e.disabled?"0":"1"}))},permAllot:function(e){var t=this;this.perm.chooseValue=[],this.perm.deptUsers=[],this.perm.chooseId=e.id,this.perm.title="全电登记权限分配",Object(d["e"])(e.id,this.perm.module).then((function(e){for(var a=[],n=0;n<e.data.length;n++){var i=e.data[n];a.push({nickName:i.nickName,userId:i.userId})}for(var o=[],r=0;r<e.users.length;r++)o.push(e.users[r].userId);t.perm.chooseValue=o,t.perm.deptUsers=a,t.perm.open=!0}))},filterMethod:function(e,t){return t.nickName.indexOf(e)>-1},submitPerm:function(){var e=this,t={id:this.perm.chooseId,userIds:this.perm.chooseValue,module:this.perm.module};Object(d["i"])(t).then((function(t){e.msgSuccess("保存成功"),e.perm.open=!1}))},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.rows=e,this.single=1!==e.length,this.multiple=!e.length},currClickRow:function(e,t,a){this.$refs.qdRegisterTable.toggleRowSelection(e)}}},g=b,v=a("2877"),y=Object(v["a"])(g,n,i,!1,null,"1f4fb49b",null);t["default"]=y.exports},"35d5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"file-analysis-dialog",attrs:{title:e.title,visible:e.open,"close-on-click-modal":!1,width:"1200px","append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.fileAnalysisDialogClose}},[a("el-tabs",{attrs:{type:"card",closable:!e.isDisabled},on:{"tab-remove":e.removeTab},model:{value:e.tabsValue,callback:function(t){e.tabsValue=t},expression:"tabsValue"}},e._l(e.navTabs,(function(t,n){return a("el-tab-pane",{key:"tab"+n,attrs:{label:t.title,name:t.name}},[a("el-form",{ref:"imageInvoiceForm",refInFor:!0,attrs:{model:e.imageInvoiceForm[n],"label-width":"0px",rules:e.elRules[n]}},[a("el-table",{ref:"table"+n,refInFor:!0,staticStyle:{overflow:"auto"},attrs:{data:t.rows,"max-height":e.tableMaxHeight}},[e._l(t.el.name,(function(i,o){return a("el-table-column",{attrs:{label:i,prop:t.el.field[o],"min-width":"invNo"==t.el.field[o]&&"17"==t.rows[0].invType?300:200},scopedSlots:e._u([{key:"header",fn:function(n){return[1==t.el.OrRequired[o]?a("span",{staticClass:"required-header"},[e._v("*")]):e._e(),e._v(e._s(i)+" ")]}},{key:"default",fn:function(i){return["0"!=i.row.multiFlag||"assistantBuyName"!=t.el.field[o]?a("el-form-item",{attrs:{prop:"data."+i.$index+"."+t.el.field[o],rules:e.elRules[n][t.el.field[o]]}},["invDate"==t.el.field[o]?[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",size:"small",placeholder:"",disabled:e.isDisabled},model:{value:i.row[t.el.field[o]],callback:function(a){e.$set(i.row,t.el.field[o],a)},expression:"scope.row[item.el.field[colIndex]]"}})]:"multiFlag"==t.el.field[o]?[a("el-select",{attrs:{disabled:e.isDisabled},model:{value:i.row[t.el.field[o]],callback:function(a){e.$set(i.row,t.el.field[o],a)},expression:"scope.row[item.el.field[colIndex]]"}},[a("el-option",{attrs:{value:1,label:"是"}}),a("el-option",{attrs:{value:0,label:"否"}})],1)]:[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small",disabled:e.isDisabled},model:{value:i.row[t.el.field[o]],callback:function(a){e.$set(i.row,t.el.field[o],a)},expression:"scope.row[item.el.field[colIndex]]"}})]],2):e._e()]}}],null,!0)})})),e.zzsTypeArr.includes(t.rows[0].invType)&&"17"!=t.rows[0].invType?[e._l(e.buySellField.field,(function(t,n){return a("el-table-column",{attrs:{label:e.buySellField.name[n],prop:t,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-input",{attrs:{clearable:"",size:"small",disabled:e.isDisabled,type:"textarea",rows:1},model:{value:n.row[t],callback:function(a){e.$set(n.row,t,a)},expression:"scope.row[buySellItem]"}})]}}],null,!0)})})),a("el-table-column",{attrs:{label:"蓝字发票代码",prop:"sourceInvCode","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[parseFloat(t.row.totalMoney)<0||parseFloat(t.row.totalWithoutTaxMoney)<0?a("el-form-item",{attrs:{prop:"data."+t.$index+".sourceInvCode",rules:e.elRules[n]["sourceInvCode"]}},[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small",disabled:e.isDisabled},model:{value:t.row["sourceInvCode"],callback:function(a){e.$set(t.row,"sourceInvCode",a)},expression:"scope.row['sourceInvCode']"}})],1):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{label:"蓝字发票号码",prop:"sourceInvNo","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[parseFloat(t.row.totalMoney)<0||parseFloat(t.row.totalWithoutTaxMoney)<0?a("el-form-item",{attrs:{prop:"data."+t.$index+".sourceInvNo",rules:e.elRules[n]["sourceInvNo"]}},[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small",disabled:e.isDisabled},model:{value:t.row["sourceInvNo"],callback:function(a){e.$set(t.row,"sourceInvNo",a)},expression:"scope.row['sourceInvNo']"}})],1):e._e()]}}],null,!0)})]:e._e(),a("el-table-column",{attrs:{label:"发票联次",prop:"formName","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:e.isDisabled},model:{value:t.row["formName"],callback:function(a){e.$set(t.row,"formName",a)},expression:"scope.row['formName']"}},e._l(e.invJointOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)]}}],null,!0)}),"1"==e.personal?a("el-table-column",{attrs:{label:"所属票夹",prop:"fileId","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:e.isDisabled},model:{value:t.row["fileId"],callback:function(a){e.$set(t.row,"fileId",a)},expression:"scope.row['fileId']"}},e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})})),1)]}}],null,!0)}):e._e(),e.isDisabled?e._e():a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDeleteRow(n,t.$index)}}},[e._v("删除")])]}}],null,!0)})],2)],1)],1)})),1),e.isDisabled?e._e():a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileAnalysis}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgressChildren",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("2909"),r=a("3835"),l=(a("99af"),a("d3b7"),a("159b"),a("4fad"),a("13d5"),a("b64b"),a("fb6a"),a("b0c0"),a("caad"),a("e9c4"),a("4de4"),a("a434"),a("25f0"),a("ac1f"),a("5319"),a("4c80")),s=a("606d"),c=a("ed08"),u=(a("5f87"),a("c38a"),{name:"fileAnalysis",components:{},props:{personal:{type:String,default:"0"}},data:function(){return{title:"识别详情",open:!1,uploadResult:[],invTypeOptions:[],otherInvTypeOptions:[],fileOptions:[],tabsValue:null,navTabs:[],imageInvoiceForm:[],elRules:[],operationIndex:0,showProgress:!1,functionName:null,loadingTime:null,invJointOptions:[],zzsTypeArr:[],buySellField:{name:["销方名称","销方税号","销方地址","销方银行","购方名称","购方税号","购方地址","购方银行"],field:["sellName","sellTaxNo","sellAddrTel","sellBankAccount","buyName","buyTaxNo","buyAddrTel","buyBankAccount"]},tableMaxHeight:400,modifiedDatas:[],isDisabled:!1}},watch:{},computed:{},created:function(){var e=this;this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data;for(var a=0,n=t.data.length;a<n;a++)e.zzsTypeArr.push(t.data[a].dictValue)})),this.getDicts("other_ticket").then((function(t){e.otherInvTypeOptions=t.data})),this.getDicts("inv_joint").then((function(t){e.invJointOptions=t.data})),Object(s["i"])().then((function(t){e.fileOptions=t.rows})),this.tableMaxHeight=.6*document.body.clientHeight},mounted:function(){},methods:{invTypeFormat:function(e){var t=this.otherInvTypeOptions.concat(this.invTypeOptions);return this.selectDictLabel(t,e)},fileAnalysisDialogClose:function(){this.imageInvoiceForm=[],this.rules=[],this.uploadResult=[],this.navTabs=[]},fillFileAnalysis:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";"1"!=a&&(this.isDisabled=!0);var n=[];if(e.forEach((function(e,t,a){n=n.concat(e.data)})),!(n.length<1)){var i={};n.forEach((function(e){"17"==e.invType&&"1"!=e.multiFlag&&(e.multiFlag=0),"0001"!=e.invType||e.invDate||(e.invDate=t.$moment(new Date).format("YYYY-MM-DD")),e.invType&&(i[e.invType]?i[e.invType].push(e):i[e.invType]=new Array(e))})),Object.entries(i).forEach((function(e,a){var n=Object(r["a"])(e,2),i=(n[0],n[1]),o=i.reduce((function(e,a){var n,i=Object(c["e"])(a);return i=Object.assign(i,JSON.parse(i["data"])),i.fileId=null===(n=t.fileOptions[0])||void 0===n?void 0:n.id,i.formName=t.invJointOptions[0].dictValue,i.checkCode&&(i.checkCode=i.checkCode.slice(-6)),delete i.base64,e.push(i),e}),[]);t.$set(t.navTabs,a,{el:t.getElementFromType(i[0].invType),title:t.invTypeFormat(i[0].invType),name:""+a,rows:o}),t.$set(t.imageInvoiceForm,a,{data:o});for(var l=o[0].invType,s=t.getElementFromType(l),u={},d=0,p=s.OrRequired.length;d<p;d++)if("1"==s.OrRequired[d]){var h=s.name[d]+"不能为空";["invCode","invNo"].includes(s.field[d])&&["01","08","03","04","10","11","15","08xdp","10xdp","08xdpzz","10xdpzz"].includes(l)?(["invCode"].includes(s.field[d])?u[s.field[d]]=[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}]:["invNo"].includes(s.field[d])&&(u[s.field[d]]=[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]),u["sourceInvNo"]=[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的蓝字发票号码",trigger:"blur"}],u["sourceInvCode"]=[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的蓝字发票代码",trigger:"blur"}]):["totalWithoutTaxMoney","totalAmount","totalTaxAmount","totalMoney"].includes(s.field[d])?u[s.field[d]]=[{pattern:/^-?[0-9]+(\.[0-9]+)?$/,message:"请输入正确的数字",trigger:["blur","change"]},{required:!0,message:"金额不能为空",trigger:["blur","change"]}]:u[s.field[d]]=[{required:!0,message:h,trigger:["blur","change"]}]}t.$set(t.elRules,a,u)})),this.uploadResult=Object(c["e"])(n),this.tabsValue="0",this.open=!0,this.title="识别详情(本次识别成功发票"+n.length+"张)"}},submitFileAnalysis:function(){for(var e=this,t=this.$refs.imageInvoiceForm,a={status:!1,index:0},n=function(n){t[n].validate((function(t){if(!t)return a.status=!0,a.index=n,void(e.tabsValue=""+n)}))},i=0,r=t.length;i<r;i++)n(i);if(a.status)this.msgError("存在必填项未填或填入项不符合条件");else if(this.modifiedDatas=this.navTabs.reduce((function(e,t){return e.push.apply(e,Object(o["a"])(t.rows)),e}),[]),this.operationIndex=0,this.$vLoading.show(),this.functionName="保存中",this.$store.state.incomeData.isSecondConfirm){var s={invCodeNoList:this.modifiedDatas.reduce((function(e,t){return["08xdp","10xdp"].includes(t.invType)?e.push(t.invNo.substr(0,12)+"_"+t.invNo.substr(12)):e.push(t.invCode+"_"+t.invNo),e}),[])};this.$vLoading.show(),Object(l["k"])(s.invCodeNoList).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess(t.msg),e.open=!1,e.$emit("updateInvoiceTable")):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}else this.oneByOneSave()},oneByOneSave:function(){var e=this;if(this.operationIndex<this.modifiedDatas.length){var t=Object(c["e"])(this.modifiedDatas[this.operationIndex]);t.totalAmount=t["totalMoney"],t.pwdCode&&(t.pwdCode=window.btoa(t.pwdCode)),delete t.data,delete t.base64,t.data=JSON.stringify(t);var a=t.invType;"08"==a||"03"==a||"01"==a||"02"==a||"08xdpzz"==a?t.other=this.modifiedDatas[this.operationIndex].totalWithoutTaxMoney:"15"==a?t.other=this.modifiedDatas[this.operationIndex].totalAmount:"04"==a||"10"==a||"11"==a||"14"==a||"10xdpzz"==a?t.other=this.modifiedDatas[this.operationIndex].checkCode:["08xdp","10xdp"].includes(a)&&(t.invCode=t.invNo.substr(0,12),t.invNo=t.invNo.substr(12),t.other=t.totalMoney),t.dataSource="02",this.operationIndex++,"0"==this.personal?Object(l["o"])(t).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.oneByOneSave()})).catch((function(){e.oneByOneSave()})):Object(s["a"])(t).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.oneByOneSave()})).catch((function(){e.oneByOneSave()}))}else this.$vLoading.hide(),this.operationIndex=0,this.$emit("updateInvoiceTable"),this.open=!1},removeTab:function(e){console.log(e);var t=this.navTabs.filter((function(t,a,n){return t.name!=e}));if(0!=t.length){this.uploadResult.splice(parseInt(e),1),this.imageInvoiceForm.splice(parseInt(e),1),this.navTabs=t;for(var a=0,n=this.navTabs.length;a<n;a++)this.navTabs[a].name=""+a;parseFloat(this.tabsValue)==parseFloat(e)?parseFloat(t[0].name)>parseFloat(e)?this.tabsValue=t[0].name:this.tabsValue=(parseFloat(this.tabsValue)-1).toString():parseFloat(this.tabsValue)<parseFloat(e)||parseFloat(this.tabsValue)>parseFloat(e)&&(this.tabsValue=(parseFloat(this.tabsValue)-1).toString())}else this.open=!1},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}))},handleDeleteRow:function(e,t){if(this.navTabs[e].rows.splice(t,1),0==this.navTabs[e].rows.length){if(this.navTabs.splice(e,1),0==this.navTabs.length)return void(this.open=!1);parseFloat(this.navTabs[0].name)>e?this.tabsValue=this.navTabs[0].name:this.tabsValue=(parseFloat(this.tabsValue)-1).toString()}}}}),d=u,p=(a("e14c"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,"158e29a6",null);t["default"]=h.exports},"37ad":function(e,t,a){"use strict";a("2253")},3866:function(e,t,a){"use strict";a("0587")},"38c2":function(e,t,a){},"38cf":function(e,t,a){var n=a("23e7"),i=a("1148");n({target:"String",proto:!0},{repeat:i})},3914:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container",attrs:{"element-loading-text":e.routeLoadingText}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-input",{attrs:{placeholder:"请输入开票日期",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invDate,callback:function(t){e.$set(e.queryParams,"invDate",t)},expression:"queryParams.invDate"}})],1),a("el-form-item",{attrs:{label:"第四要素",prop:"tsParam"}},[a("el-input",{attrs:{placeholder:"请输入第四要素",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tsParam,callback:function(t){e.$set(e.queryParams,"tsParam",t)},expression:"queryParams.tsParam"}})],1),a("el-form-item",{attrs:{label:"查验日期",prop:"checkDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择查验日期"},model:{value:e.queryParams.checkDate,callback:function(t){e.$set(e.queryParams,"checkDate",t)},expression:"queryParams.checkDate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:record:synch"],expression:"['income:record:synch']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleSync}},[e._v("同步")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:record:export"],expression:"['income:record:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"recordMainTable",attrs:{data:e.recordList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["checkDate"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.checkDate,"{y}-{m}-{d}"))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.syncTitle,visible:e.syncOpen,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.syncOpen=t}}},[a("el-form",{ref:"form",attrs:{model:e.syncForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"同步时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.syncTime,callback:function(t){e.syncTime=t},expression:"syncTime"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.syncSubmit}},[e._v("确 定")]),a("el-button",{on:{click:e.syncCancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("b775"));function l(e){return Object(r["a"])({url:"/income/record/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/income/record/export",method:"post",data:e,responseType:"blob"})}function c(e){return Object(r["a"])({url:"/income/record/synchCheckRecord",method:"post",params:e})}var u=a("7b93"),d=a("ed08"),p=(a("c38a"),{name:"Record",components:{MyElProgress:u["a"]},data:function(){return{routeLoading:!1,routeLoadingText:"",functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],incomeCheckedOptions:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,recordList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:500,invCodeNo:null,invCode:null,invNo:null,invDate:null,tsParam:null,checkDate:null,checkResult:null,checkAccount:null,checkCompany:null,interfaceType:null,remoteId:null,ext1:null,ext2:null,ext3:null},form:{},rules:{checkDate:[{required:!0,message:"查验日期不能为空",trigger:"blur"}]},columnsArr:[{label:"发票代码",prop:"invCode",align:"center",show:!0,width:"",columnSort:20},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:"",columnSort:0},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:"",columnSort:1},{label:"第四要素",prop:"tsParam",align:"center",show:!0,width:"",columnSort:2},{label:"查验日期",prop:"checkDate",align:"center",show:!0,width:"",columnSort:20},{label:"查验结果",prop:"checkResult",align:"center",show:!0,width:"",columnSort:0},{label:"查验账号",prop:"checkAccount",align:"center",show:!0,width:"",columnSort:1},{label:"查验公司",prop:"checkCompany",align:"center",show:!0,width:"",columnSort:2}],sortParam:{column:"",columnOrder:""},syncTime:[],syncTitle:"同步进项验伪记录",syncOpen:!1,syncForm:{}}},created:function(){var e=this;this.getList(),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),this.getDicts("income_checked").then((function(t){e.incomeCheckedOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(d["e"])(this.queryParams),Object(d["e"])(this.sortParam));l(t).then((function(t){e.recordList=t.rows,e.total=t.total,e.loading=!1}))},syncCancel:function(){this.syncOpen=!1,this.syncTime=[]},reset:function(){this.form={id:null,invCodeNo:null,invCode:null,invNo:null,invDate:null,tsParam:null,checkDate:null,checkResult:null,checkAccount:null,checkCompany:null,interfaceType:null,remoteId:null,ext1:null,ext2:null,ext3:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(d["e"])(e)},handleExport:function(){var e=this,t=Object(d["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出所有进项验伪记录数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s(t)})).then((function(t){e.currencyDownload(t,"进项验伪记录.xls",e)})).catch((function(){}))},handleSync:function(){this.syncOpen=!0},syncSubmit:function(){var e=this;if(this.syncTime&&2==this.syncTime.length){var t={st:this.syncTime[0]+" 00:00:00",et:this.syncTime[1]+" 23:59:59"};this.syncOpen=!1,this.routeLoading=!0,this.routeLoadingText="同步中",c(t).then((function(t){e.routeLoading=!1,200==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)})).catch((function(){e.routeLoading=!1}))}else this.msgError("请选择正确的同步时间")},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.recordMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.recordList,"recordMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}}),h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},"3a78":function(e,t,a){},"3a7e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icons-container"},[e._m(0),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"Icons"}},e._l(e.svgIcons,(function(t){return a("div",{key:t},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.generateIconCode(t))+" ")]),a("div",{staticClass:"icon-item"},[a("svg-icon",{attrs:{"icon-class":t,"class-name":"disabled"}}),a("span",[e._v(e._s(t))])],1)])],1)})),0),a("el-tab-pane",{attrs:{label:"Element-UI Icons"}},e._l(e.elementIcons,(function(t){return a("div",{key:t},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.generateElementIconCode(t))+" ")]),a("div",{staticClass:"icon-item"},[a("i",{class:"el-icon-"+t}),a("span",[e._v(e._s(t))])])])],1)})),0)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",[a("a",{attrs:{href:"#",target:"_blank"}},[e._v("Add and use ")])])}],o=a("c7e9"),r=a("bb49"),l={name:"Icons",data:function(){return{svgIcons:o["default"],elementIcons:r["default"]}},methods:{generateIconCode:function(e){return'<svg-icon icon-class="'.concat(e,'" />')},generateElementIconCode:function(e){return'<i class="el-icon-'.concat(e,'" />')}}},s=l,c=(a("2d59"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"101db740",null);t["default"]=u.exports},"3a95":function(e,t,a){},"3afa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择业务类型",clearable:"",size:"small"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.leaveList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"发起时间",align:"center",prop:"createTime"}}),a("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"type",formatter:e.typeFormat}}),a("el-table-column",{attrs:{label:"标题",align:"center",prop:"title"}}),a("el-table-column",{attrs:{label:"原因",align:"center",prop:"reason"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.row.state?a("div",[e._v(" "+e._s(e.stateFormat(t.row))+" ")]):a("div",[e._v(" "+e._s(t.row.taskName)+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.historyFory(t.row)}}},[e._v("审批详情 ")]),0==t.row.state?a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.checkTheSchedule(t.row)}}},[e._v("查看进度 ")]):e._e()]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{visible:e.modelVisible,title:"进度查询",width:"1680px","append-to-body":""},on:{"update:visible":function(t){e.modelVisible=t}}},[a("div",{staticStyle:{position:"relative",height:"70vh"}},[a("iframe",{attrs:{id:"iframe",src:e.modelerUrl,frameborder:"0",width:"100%",height:"100%",scrolling:"auto"}})])]),a("el-dialog",{attrs:{title:e.title,visible:e.open2,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open2=t}}},[a("div",{staticClass:"show_info",on:{click:e.showInfo}},[e._v("查看详情")]),e.open2?a("leaveHistoryForm",{attrs:{businessKey:e.businessKey}}):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open2=!e.open2}}},[e._v("关闭")])],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择业务类型"},on:{change:e.chooseMedicine},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"原因",prop:"reason"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("new-bill-detail-show-modal",{ref:"showModal",on:{closeApprovalDialog:e.closeApprovalDialog}}),a("el-dialog",{staticClass:"tax-approval-dialog",attrs:{title:"税金审核详情",visible:e.taxApproval.open,width:"960px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.taxApproval,"open",t)}}},[a("el-form",{ref:"taxApprovalForm",attrs:{model:e.taxApproval.form,"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"批次号："}},[a("el-input",{attrs:{readonly:""},model:{value:e.taxApproval.form.sjNo,callback:function(t){e.$set(e.taxApproval.form,"sjNo",t)},expression:"taxApproval.form.sjNo"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{readonly:""},model:{value:e.taxApproval.form.note,callback:function(t){e.$set(e.taxApproval.form,"note",t)},expression:"taxApproval.form.note"}})],1)],1),a("el-table",{attrs:{data:e.taxApproval.form.details}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"gsmc",label:"公司名称",align:"center"}}),a("el-table-column",{attrs:{prop:"yysr",label:"营业收入",align:"center"}}),a("el-table-column",{attrs:{prop:"jsyj",label:"增值税计税依据",align:"center"}}),a("el-table-column",{attrs:{prop:"zjs",label:"增值税",align:"center"}}),a("el-table-column",{attrs:{prop:"fjs",label:"附加税",align:"center"}}),a("el-table-column",{attrs:{prop:"qysds",label:"企业所得税",align:"center"}}),a("el-table-column",{attrs:{prop:"yhs",label:"印花税",align:"center"}}),a("el-table-column",{attrs:{prop:"fcs",label:"房产税",align:"center"}}),a("el-table-column",{attrs:{prop:"tdsys",label:"城镇土地使用税",align:"center"}}),a("el-table-column",{attrs:{prop:"ccs",label:"车般税",align:"center"}}),a("el-table-column",{attrs:{prop:"twfhf",label:"堤围防护费",align:"center"}}),a("el-table-column",{attrs:{prop:"ghjf",label:"工会经费",align:"center"}}),a("el-table-column",{attrs:{prop:"qtsf",label:"其他税费",align:"center"}}),a("el-table-column",{attrs:{prop:"grsds",label:"个人所得税",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1),a("div",{staticStyle:{"font-weight":"600","margin-top":"20px","margin-bottom":"20px","font-size":"20px"}},[e._v("附件详情")]),a("el-table",{attrs:{data:e.taxApproval.form.incomeOtherFileList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(a){return e.downloadTaxFile(t.row)}}},[e._v(e._s(t.row.fileName))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1)],1)],1)},i=[],o=a("c7eb"),r=a("1da1"),l=a("5530"),s=(a("d81d"),a("b0c0"),a("ac1f"),a("5319"),a("9b39")),c=(a("c0c7"),a("ca4d")),u=a("a2c5"),d=a("7bd4"),p=a("1f6e"),h=a("ed08"),m={name:"approval",components:{leaveHistoryForm:p["default"],NewBillDetailShowModal:d["default"]},data:function(){return{tableHeight:null,modelVisible:!1,modelerUrl:"",userName:"",createName:"",businessKey:"",user:{},loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,leaveList:[],title:"",open:!1,open2:!1,typeOptions:[],stateOptions:[],queryParams:{pageNum:1,pageSize:10,type:null,title:null,reason:null,leaveStartTime:null,leaveEndTime:null,instanceId:null,state:null,createBy:null},form:{},rules:{type:[{required:!0,message:"业务类型不能为空",trigger:"change"}],title:[{required:!0,message:"标题不能为空",trigger:"blur"}],reason:[{required:!0,message:"原因不能为空",trigger:"blur"}],leaveStartTime:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],leaveEndTime:[{required:!0,message:"结束时间不能为空",trigger:"blur"}]},currApproveRow:{},isJump:!1,taxApproval:{open:!1,form:{},fileList:[]}}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.isJump&&(this.historyFory(this.isJump),this.isJump=!1),this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getList(),this.getDicts("approve_process_define").then((function(t){e.typeOptions=t.data})),this.getDicts("approve_flow_state").then((function(t){e.stateOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(s["e"])(this.queryParams).then((function(t){e.leaveList=t.rows,e.total=t.total,e.loading=!1}))},typeFormat:function(e,t){return this.selectDictLabel(this.typeOptions,e.type)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,type:null,title:null,reason:null,leaveStartTime:null,leaveEndTime:null,instanceId:null,state:null,createBy:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.createName=this.$store.getters.nickName,"admin"!=this.$store.getters.name?(this.reset(),this.open=!0,this.title="添加业务发起"):this.$alert("管理员不能创建流程","管理员不能创建流程",{confirmButtonText:"确定"})},handleUpdate:function(e){var t=this;this.reset(),Object(s["d"])(e.id).then((function(e){t.form=e.data,t.open=!0,t.title="修改业务发起"}))},historyFory:function(e){this.currApproveRow=e,this.businessKey=e.id,this.open2=!0,this.title="审批详情"},checkTheSchedule:function(e){var t=this;Object(c["b"])(e.instanceId).then((function(a){var n=a.data;localStorage.setItem("VUE_APP_BASE_API","/prod-api"),t.modelerUrl="/bpmnjs/index.html?type=lookBpmn&instanceId="+e.instanceId+"&deploymentFileUUID="+n.deploymentID+"&deploymentName="+encodeURI(n.resourceName)+"&isDisabled=1",t.modelVisible=!0}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(s["g"])(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getList()})):Object(s["a"])(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除业务发起编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所选业务发起数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["c"])(Object(l["a"])(Object(l["a"])({},t),{},{ids:e.ids}))})).then((function(t){e.download(t.msg)}))},chooseMedicine:function(){this.form.title=this.createName+"的"+this.form.type+"申请"},showInfo:function(){var e=this,t=this.currApproveRow,a=t.type,n=t.state;if("reverseInvoice"==a){var i={id:this.currApproveRow.bizId};this.$refs.showModal.fillBillDialog(i),"1"==n&&this.$refs.showModal.approvalComplete()}else"invoiceTaxesReport"==a?(this.$vLoading.show(),Object(u["a"])(this.currApproveRow.bizId).then((function(t){e.$vLoading.hide(),200==t.code?(e.taxApproval.form=t.object,e.taxApproval.open=!0):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))):(this.isJump=this.currApproveRow,this.open2=!1,this.$router.push({name:"Jtrw",params:{ywzj:this.currApproveRow.bizId}}))},closeApprovalDialog:function(){this.open2=!1},downloadTaxFile:function(e){var t=this;return Object(r["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$vLoading.show(),a.next=3,Object(h["h"])("/einvoices"+e.fileUrl.replace("https://vat.zzhcn.net",""),e.fileUrl.split("/").pop().split(".")[0]+"_",e.fileUrl.split(".").pop());case 3:t.$vLoading.hide();case 4:case"end":return a.stop()}}),a)})))()}}},f=m,b=(a("e0fe"),a("2877")),g=Object(b["a"])(f,n,i,!1,null,"0ece1c28",null);t["default"]=g.exports},"3b7b":function(e,t,a){},"3eac":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"jobName"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.jobName,callback:function(t){e.$set(e.queryParams,"jobName",t)},expression:"queryParams.jobName"}})],1),a("el-form-item",{attrs:{label:"任务组名",prop:"jobGroup"}},[a("el-select",{attrs:{placeholder:"请选择任务组名",clearable:"",size:"small"},model:{value:e.queryParams.jobGroup,callback:function(t){e.$set(e.queryParams,"jobGroup",t)},expression:"queryParams.jobGroup"}},e._l(e.jobGroupOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"任务状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择任务状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:add"],expression:"['monitor:job:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:edit"],expression:"['monitor:job:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:remove"],expression:"['monitor:job:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:export"],expression:"['monitor:job:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:query"],expression:"['monitor:job:query']"}],attrs:{type:"info",icon:"el-icon-s-operation",size:"mini"},on:{click:e.handleJobLog}},[e._v("日志")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.jobList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"任务编号",align:"center",prop:"jobId"}}),a("el-table-column",{attrs:{label:"任务名称",align:"center",prop:"jobName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"任务组名",align:"center",prop:"jobGroup",formatter:e.jobGroupFormat}}),a("el-table-column",{attrs:{label:"调用目标字符串",align:"center",prop:"invokeTarget","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"cron执行表达式",align:"center",prop:"cronExpression","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(a){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:edit"],expression:"['monitor:job:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-caret-right"},on:{click:function(a){return e.handleRun(t.row)}}},[e._v("执行一次")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:job:query"],expression:"['monitor:job:query']"}],attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详细")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务名称",prop:"jobName"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:e.form.jobName,callback:function(t){e.$set(e.form,"jobName",t)},expression:"form.jobName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务分组",prop:"jobGroup"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.jobGroup,callback:function(t){e.$set(e.form,"jobGroup",t)},expression:"form.jobGroup"}},e._l(e.jobGroupOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"invokeTarget"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 调用方法 "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" Bean调用示例：ryTask.ryParams('ry') "),a("br"),e._v("Class类调用示例：com.zzh.quartz.task.RyTask.ryParams('ry') "),a("br"),e._v("参数说明：支持字符串，布尔类型，长整型，浮点型，整型 ")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{attrs:{placeholder:"请输入调用目标字符串"},model:{value:e.form.invokeTarget,callback:function(t){e.$set(e.form,"invokeTarget",t)},expression:"form.invokeTarget"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"cron表达式",prop:"cronExpression"}},[a("el-input",{attrs:{placeholder:"请输入cron执行表达式"},model:{value:e.form.cronExpression,callback:function(t){e.$set(e.form,"cronExpression",t)},expression:"form.cronExpression"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否并发",prop:"concurrent"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.form.concurrent,callback:function(t){e.$set(e.form,"concurrent",t)},expression:"form.concurrent"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("允许")]),a("el-radio-button",{attrs:{label:"1"}},[e._v("禁止")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"错误策略",prop:"misfirePolicy"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.form.misfirePolicy,callback:function(t){e.$set(e.form,"misfirePolicy",t)},expression:"form.misfirePolicy"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("立即执行")]),a("el-radio-button",{attrs:{label:"2"}},[e._v("执行一次")]),a("el-radio-button",{attrs:{label:"3"}},[e._v("放弃执行")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"任务详细",visible:e.openView,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.openView=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务编号："}},[e._v(e._s(e.form.jobId))]),a("el-form-item",{attrs:{label:"任务名称："}},[e._v(e._s(e.form.jobName))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务分组："}},[e._v(e._s(e.jobGroupFormat(e.form)))]),a("el-form-item",{attrs:{label:"创建时间："}},[e._v(e._s(e.form.createTime))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"cron表达式："}},[e._v(e._s(e.form.cronExpression))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下次执行时间："}},[e._v(e._s(e.parseTime(e.form.nextValidTime)))])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"调用目标方法："}},[e._v(e._s(e.form.invokeTarget))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务状态："}},[0==e.form.status?a("div",[e._v("正常")]):1==e.form.status?a("div",[e._v("失败")]):e._e()])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否并发："}},[0==e.form.concurrent?a("div",[e._v("允许")]):1==e.form.concurrent?a("div",[e._v("禁止")]):e._e()])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"执行策略："}},[0==e.form.misfirePolicy?a("div",[e._v("默认策略")]):1==e.form.misfirePolicy?a("div",[e._v("立即执行")]):2==e.form.misfirePolicy?a("div",[e._v("执行一次")]):3==e.form.misfirePolicy?a("div",[e._v("放弃执行")]):e._e()])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.openView=!1}}},[e._v("关 闭")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/monitor/job/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/monitor/job/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/monitor/job",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/monitor/job",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/monitor/job/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/monitor/job/export",method:"get",params:e})}function p(e,t){var a={jobId:e,status:t};return Object(o["a"])({url:"/monitor/job/changeStatus",method:"put",data:a})}function h(e,t){var a={jobId:e,jobGroup:t};return Object(o["a"])({url:"/monitor/job/run",method:"put",data:a})}var m={name:"Job",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,jobList:[],title:"",open:!1,openView:!1,jobGroupOptions:[],statusOptions:[],queryParams:{pageNum:1,pageSize:10,jobName:void 0,jobGroup:void 0,status:void 0},form:{},rules:{jobName:[{required:!0,message:"任务名称不能为空",trigger:"blur"}],invokeTarget:[{required:!0,message:"调用目标字符串不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"cron执行表达式不能为空",trigger:"blur"}]}}},created:function(){var e=this;this.getList(),this.getDicts("sys_job_group").then((function(t){e.jobGroupOptions=t.data})),this.getDicts("sys_job_status").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.jobList=t.rows,e.total=t.total,e.loading=!1}))},jobGroupFormat:function(e,t){return this.selectDictLabel(this.jobGroupOptions,e.jobGroup)},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={jobId:void 0,jobName:void 0,jobGroup:void 0,invokeTarget:void 0,cronExpression:void 0,misfirePolicy:1,concurrent:1,status:"0"},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.jobId})),this.single=1!=e.length,this.multiple=!e.length},handleStatusChange:function(e){var t=this,a="0"===e.status?"启用":"停用";this.$confirm('确认要"'+a+'""'+e.jobName+'"任务吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(e.jobId,e.status)})).then((function(){t.msgSuccess(a+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},handleRun:function(e){var t=this;this.$confirm('确认要立即执行一次"'+e.jobName+'"任务吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return h(e.jobId,e.jobGroup)})).then((function(){t.msgSuccess("执行成功")})).catch((function(){}))},handleView:function(e){var t=this;l(e.jobId).then((function(e){t.form=e.data,t.openView=!0}))},handleJobLog:function(){this.$router.push("/job/log")},handleAdd:function(){this.reset(),this.open=!0,this.title="添加任务"},handleUpdate:function(e){var t=this;this.reset();var a=e.jobId||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改任务"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.jobId?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.jobId||this.ids;this.$confirm('是否确认删除定时任务编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有定时任务数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},f=m,b=a("2877"),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"3f45":function(e,t,a){"use strict";a("7bb5")},4:function(e,t){},4127:function(e,t,a){"use strict";var n=a("d233"),i=a("b313"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},r=Array.isArray,l=Array.prototype.push,s=function(e,t){l.apply(e,r(t)?t:[t])},c=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return c.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,a,i,o,l,c,d,p,h,m,f,b){var g=t;if("function"===typeof d?g=d(a,g):g instanceof Date&&(g=m(g)),null===g){if(o)return c&&!b?c(a,u.encoder):a;g=""}if("string"===typeof g||"number"===typeof g||"boolean"===typeof g||n.isBuffer(g)){if(c){var v=b?a:c(a,u.encoder);return[f(v)+"="+f(c(g,u.encoder))]}return[f(a)+"="+f(String(g))]}var y,_=[];if("undefined"===typeof g)return _;if(r(d))y=d;else{var x=Object.keys(g);y=p?x.sort(p):x}for(var w=0;w<y.length;++w){var k=y[w];l&&null===g[k]||(r(g)?s(_,e(g[k],i(a,k),i,o,l,c,d,p,h,m,f,b)):s(_,e(g[k],a+(h?"."+k:"["+k+"]"),i,o,l,c,d,p,h,m,f,b)))}return _};e.exports=function(e,t){var a=e,l=t?n.assign({},t):{};if(null!==l.encoder&&"undefined"!==typeof l.encoder&&"function"!==typeof l.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof l.delimiter?u.delimiter:l.delimiter,p="boolean"===typeof l.strictNullHandling?l.strictNullHandling:u.strictNullHandling,h="boolean"===typeof l.skipNulls?l.skipNulls:u.skipNulls,m="boolean"===typeof l.encode?l.encode:u.encode,f="function"===typeof l.encoder?l.encoder:u.encoder,b="function"===typeof l.sort?l.sort:null,g="undefined"!==typeof l.allowDots&&l.allowDots,v="function"===typeof l.serializeDate?l.serializeDate:u.serializeDate,y="boolean"===typeof l.encodeValuesOnly?l.encodeValuesOnly:u.encodeValuesOnly;if("undefined"===typeof l.format)l.format=i["default"];else if(!Object.prototype.hasOwnProperty.call(i.formatters,l.format))throw new TypeError("Unknown format option provided.");var _,x,w=i.formatters[l.format];"function"===typeof l.filter?(x=l.filter,a=x("",a)):r(l.filter)&&(x=l.filter,_=x);var k,T=[];if("object"!==typeof a||null===a)return"";k=l.arrayFormat in o?l.arrayFormat:"indices"in l?l.indices?"indices":"repeat":"indices";var D=o[k];_||(_=Object.keys(a)),b&&_.sort(b);for(var S=0;S<_.length;++S){var O=_[S];h&&null===a[O]||s(T,d(a[O],O,D,p,h,m?f:null,x,b,g,v,w,y))}var N=T.join(c),P=!0===l.addQueryPrefix?"?":"";return N.length>0?P+N:""}},4252:function(e,t,a){"use strict";a("4f12")},4296:function(e,t,a){},4328:function(e,t,a){"use strict";var n=a("4127"),i=a("9e6a"),o=a("b313");e.exports={formats:o,parse:i,stringify:n}},4338:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c}));var n=a("b775");function i(e){return Object(n["a"])({url:"/income/other/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/income/other/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/income/other",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/income/other",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/income/other/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/income/other/export",method:"post",data:e,responseType:"blob"})}},4383:function(module,exports,__webpack_require__){(function(Buffer,process,global){
/**
 * @licstart The following is the entire license notice for the
 * Javascript code in this page
 *
 * Copyright 2020 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * Javascript code in this page
 */
(function(e,t){module.exports=t()})(0,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function(){return n.addLinkAttributes}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return n.LinkTarget}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function(){return o.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return o.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function(){return o.removeNullCharacters}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return o.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return r.AnnotationLayer}}),Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function(){return l.apiCompatibilityParams}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return s.GlobalWorkerOptions}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}});var n=a(1),i=a(202),o=a(5),r=a(216),l=a(206),s=a(209),c=a(217),u=a(218),d=a(7),p=d.isNodeJS;if(p){var h=a(219).PDFNodeStream;(0,i.setPDFNetworkStreamFactory)((function(e){return new h(e)}))}else{var m,f=a(222).PDFNetworkStream;(0,n.isFetchSupported)()&&(m=a(223).PDFFetchStream),(0,i.setPDFNetworkStreamFactory)((function(e){return m&&(0,n.isValidFetchUrl)(e.url)?new m(e):new f(e)}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=F,t.getFilenameFromUrl=I,t.isFetchSupported=z,t.isValidFetchUrl=j,t.loadScript=L,t.deprecated=q,t.PDFDateString=t.StatTimer=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.BaseCMapReaderFactory=t.DOMCanvasFactory=t.BaseCanvasFactory=t.DEFAULT_LINK_REL=t.LinkTarget=t.RenderingCancelledException=t.PageViewport=void 0;var n=o(a(2)),i=a(5);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"===typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){c(o,n,i,r,l,"next",e)}function l(e){c(o,n,i,r,l,"throw",e)}r(void 0)}))}}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=g();return function(){var a,n=v(e);if(t){var i=v(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return f(this,a)}}function f(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,a){return t&&_(e.prototype,t),a&&_(e,a),e}var w="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=w;var k="http://www.w3.org/2000/svg",T=function(){function e(){y(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}return x(e,[{key:"create",value:function(e,t){(0,i.unreachable)("Abstract method `create` called.")}},{key:"reset",value:function(e,t,a){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||a<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=a}},{key:"destroy",value:function(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}]),e}();t.BaseCanvasFactory=T;var D=function(e){p(a,e);var t=m(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.ownerDocument,o=void 0===i?globalThis.document:i;return y(this,a),e=t.call(this),e._document=o,e}return x(a,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var a=this._document.createElement("canvas"),n=a.getContext("2d");return a.width=e,a.height=t,{canvas:a,context:n}}}]),a}(T);t.DOMCanvasFactory=D;var S=function(){function e(t){var a=t.baseUrl,n=void 0===a?null:a,o=t.isCompressed,r=void 0!==o&&o;y(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=n,this.isCompressed=r}return x(e,[{key:"fetch",value:function(){var e=u(n["default"].mark((function e(t){var a,o,r,l=this;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.name,this.baseUrl){e.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(a){e.next=5;break}throw new Error("CMap name must be specified.");case 5:return o=this.baseUrl+a+(this.isCompressed?".bcmap":""),r=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE,e.abrupt("return",this._fetchData(o,r)["catch"]((function(e){throw new Error("Unable to load ".concat(l.isCompressed?"binary ":"","CMap at: ").concat(o))})));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_fetchData",value:function(e,t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]),e}();t.BaseCMapReaderFactory=S;var O=function(e){p(a,e);var t=m(a);function a(){return y(this,a),t.apply(this,arguments)}return x(a,[{key:"_fetchData",value:function(e,t){var a=this;return z()&&j(e,document.baseURI)?fetch(e).then(function(){var e=u(n["default"].mark((function e(o){var r;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.ok){e.next=2;break}throw new Error(o.statusText);case 2:if(!a.isCompressed){e.next=10;break}return e.t0=Uint8Array,e.next=6,o.arrayBuffer();case 6:e.t1=e.sent,r=new e.t0(e.t1),e.next=15;break;case 10:return e.t2=i.stringToBytes,e.next=13,o.text();case 13:e.t3=e.sent,r=(0,e.t2)(e.t3);case 15:return e.abrupt("return",{cMapData:r,compressionType:t});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):new Promise((function(n,o){var r=new XMLHttpRequest;r.open("GET",e,!0),a.isCompressed&&(r.responseType="arraybuffer"),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var e;if(200===r.status||0===r.status)if(a.isCompressed&&r.response?e=new Uint8Array(r.response):!a.isCompressed&&r.responseText&&(e=(0,i.stringToBytes)(r.responseText)),e)return void n({cMapData:e,compressionType:t});o(new Error(r.statusText))}},r.send(null)}))}}]),a}(S);t.DOMCMapReaderFactory=O;var N=function(){function e(){y(this,e)}return x(e,[{key:"create",value:function(e,t){(0,i.assert)(e>0&&t>0,"Invalid SVG dimensions");var a=document.createElementNS(k,"svg:svg");return a.setAttribute("version","1.1"),a.setAttribute("width",e+"px"),a.setAttribute("height",t+"px"),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox","0 0 "+e+" "+t),a}},{key:"createElement",value:function(e){return(0,i.assert)("string"===typeof e,"Invalid SVG element type"),document.createElementNS(k,e)}}]),e}();t.DOMSVGFactory=N;var P=function(){function e(t){var a=t.viewBox,n=t.scale,i=t.rotation,o=t.offsetX,r=void 0===o?0:o,l=t.offsetY,s=void 0===l?0:l,c=t.dontFlip,u=void 0!==c&&c;y(this,e),this.viewBox=a,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=s;var d,p,h,m,f,b,g,v,_=(a[2]+a[0])/2,x=(a[3]+a[1])/2;switch(i%=360,i=i<0?i+360:i,i){case 180:d=-1,p=0,h=0,m=1;break;case 90:d=0,p=1,h=1,m=0;break;case 270:d=0,p=-1,h=-1,m=0;break;case 0:d=1,p=0,h=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(h=-h,m=-m),0===d?(f=Math.abs(x-a[1])*n+r,b=Math.abs(_-a[0])*n+s,g=Math.abs(a[3]-a[1])*n,v=Math.abs(a[2]-a[0])*n):(f=Math.abs(_-a[0])*n+r,b=Math.abs(x-a[1])*n+s,g=Math.abs(a[2]-a[0])*n,v=Math.abs(a[3]-a[1])*n),this.transform=[d*n,p*n,h*n,m*n,f-d*n*_-h*n*x,b-p*n*_-m*n*x],this.width=g,this.height=v}return x(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.scale,n=void 0===a?this.scale:a,i=t.rotation,o=void 0===i?this.rotation:i,r=t.offsetX,l=void 0===r?this.offsetX:r,s=t.offsetY,c=void 0===s?this.offsetY:s,u=t.dontFlip,d=void 0!==u&&u;return new e({viewBox:this.viewBox.slice(),scale:n,rotation:o,offsetX:l,offsetY:c,dontFlip:d})}},{key:"convertToViewportPoint",value:function(e,t){return i.Util.applyTransform([e,t],this.transform)}},{key:"convertToViewportRectangle",value:function(e){var t=i.Util.applyTransform([e[0],e[1]],this.transform),a=i.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],a[0],a[1]]}},{key:"convertToPdfPoint",value:function(e,t){return i.Util.applyInverseTransform([e,t],this.transform)}}]),e}();t.PageViewport=P;var C=function(e){p(a,e);var t=m(a);function a(e,n){var i;return y(this,a),i=t.call(this,e),i.type=n,i}return a}(i.BaseException);t.RenderingCancelledException=C;var A={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.url,n=t.target,o=t.rel,r=t.enabled,l=void 0===r||r;(0,i.assert)(a&&"string"===typeof a,'addLinkAttributes: A valid "url" parameter must provided.');var s=(0,i.removeNullCharacters)(a);l?e.href=e.title=s:(e.href="",e.title="Disabled: ".concat(s),e.onclick=function(){return!1});var c="";switch(n){case A.NONE:break;case A.SELF:c="_self";break;case A.BLANK:c="_blank";break;case A.PARENT:c="_parent";break;case A.TOP:c="_top";break}e.target=c,e.rel="string"===typeof o?o:w}function I(e){var t=e.indexOf("#"),a=e.indexOf("?"),n=Math.min(t>0?t:e.length,a>0?a:e.length);return e.substring(e.lastIndexOf("/",n)+1,n)}t.LinkTarget=A;var E,R=function(){function e(){y(this,e),this.started=Object.create(null),this.times=[]}return x(e,[{key:"time",value:function(e){e in this.started&&(0,i.warn)("Timer is already running for ".concat(e)),this.started[e]=Date.now()}},{key:"timeEnd",value:function(e){e in this.started||(0,i.warn)("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}},{key:"toString",value:function(){var e,t=[],a=0,n=r(this.times);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.name;o.length>a&&(a=o.length)}}catch(d){n.e(d)}finally{n.f()}var l,s=r(this.times);try{for(s.s();!(l=s.n()).done;){var c=l.value,u=c.end-c.start;t.push("".concat(c.name.padEnd(a)," ").concat(u,"ms\n"))}}catch(d){s.e(d)}finally{s.f()}return t.join("")}}]),e}();function z(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype&&"undefined"!==typeof ReadableStream}function j(e,t){try{var a=t?new URL(e,t):new URL(e),n=a.protocol;return"http:"===n||"https:"===n}catch(i){return!1}}function L(e){return new Promise((function(t,a){var n=document.createElement("script");n.src=e,n.onload=t,n.onerror=function(){a(new Error("Cannot load script at: ".concat(n.src)))},(document.head||document.documentElement).appendChild(n)}))}function q(e){console.log("Deprecated API usage: "+e)}t.StatTimer=R;var $=function(){function e(){y(this,e)}return x(e,null,[{key:"toDateObject",value:function(e){if(!e||!(0,i.isString)(e))return null;E||(E=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var t=E.exec(e);if(!t)return null;var a=parseInt(t[1],10),n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;var o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;var r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;var l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;var s=parseInt(t[6],10);s=s>=0&&s<=59?s:0;var c=t[7]||"Z",u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;var d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(r+=u,l+=d):"+"===c&&(r-=u,l-=d),new Date(Date.UTC(a,n,o,r,l,s))}}]),e}();t.PDFDateString=$},function(e,t,a){"use strict";e.exports=a(3)},function(e,t,a){"use strict";(function(e){function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var a=function(e){var a,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,a){return e[t]=a}}function u(e,t,a,n){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new C(n||[]);return o._invoke=S(e,a,r),o}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var p="suspendedStart",h="suspendedYield",m="executing",f="completed",b={};function g(){}function v(){}function y(){}var _={};_[r]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(A([])));w&&w!==n&&i.call(w,r)&&(_=w);var k=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,a){function n(o,r,l,s){var c=d(e[o],e,r);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"===t(p)&&i.call(p,"__await")?a.resolve(p.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):a.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var o;function r(e,t){function i(){return new a((function(a,i){n(e,t,a,i)}))}return o=o?o.then(i,i):i()}this._invoke=r}function S(e,t,a){var n=p;return function(i,o){if(n===m)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw o;return F()}a.method=i,a.arg=o;while(1){var r=a.delegate;if(r){var l=O(r,a);if(l){if(l===b)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===p)throw n=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=m;var s=d(e,t,a);if("normal"===s.type){if(n=a.done?f:h,s.arg===b)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n=f,a.method="throw",a.arg=s.arg)}}}function O(e,t){var n=e.iterator[t.method];if(n===a){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=a,O(e,t),"throw"===t.method))return b;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var i=d(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=a),t.delegate=null,b):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function A(e){if(e){var t=e[r];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){while(++n<e.length)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=a,t.done=!0,t};return o.next=o}}return{next:F}}function F(){return{value:a,done:!0}}return v.prototype=k.constructor=y,y.constructor=v,v.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},T(D.prototype),D.prototype[l]=function(){return this},e.AsyncIterator=D,e.async=function(t,a,n,i,o){void 0===o&&(o=Promise);var r=new D(u(t,a,n,i),o);return e.isGeneratorFunction(a)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},T(k),c(k,s,"Generator"),k[r]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){while(t.length){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return l.type="throw",l.arg=e,t.next=n,i&&(t.method="next",t.arg=a),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],l=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),P(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var i=n.arg;P(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=a),b}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=a}catch(n){Function("r","regeneratorRuntime = r")(a)}}).call(this,a(4)(e))},function(e,t,a){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=p();return function(){var a,n=h(e);if(t){var i=h(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=ne,t.arraysToBytes=ie,t.assert=$,t.bytesToString=te,t.createPromiseCapability=ke,t.escapeString=me,t.getModificationDate=we,t.getVerbosityLevel=z,t.info=j,t.isArrayBuffer=_e,t.isArrayEqual=xe,t.isBool=ge,t.isNum=ve,t.isString=ye,t.isSameOrigin=M,t.createValidAbsoluteUrl=W,t.removeNullCharacters=ee,t.setVerbosityLevel=R,t.shadow=U,t.string32=oe,t.stringToBytes=ae,t.stringToPDFString=he,t.stringToUTF8String=fe,t.utf8StringToString=be,t.warn=L,t.unreachable=q,t.IsEvalSupportedCached=t.IsLittleEndianCached=t.createObjectURL=t.FormatError=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.MissingPDFException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=t.BaseException=void 0,a(6);var m=[1,0,0,1,0,0];t.IDENTITY_MATRIX=m;var f=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=f;var b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=b;var g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=g;var v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=v;var y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=y;var _={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=_;var x={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=x;var w={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=w;var k={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=k;var T={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=T;var D={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=D;var S={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=S;var O={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=O;var N={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=N;var P={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=P;var C={NONE:0,BINARY:1,STREAM:2};t.CMapCompressionType=C;var A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=A;var F={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};t.UNSUPPORTED_FEATURES=F;var I={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=I;var E=P.WARNINGS;function R(e){Number.isInteger(e)&&(E=e)}function z(){return E}function j(e){E>=P.INFOS&&console.log("Info: ".concat(e))}function L(e){E>=P.WARNINGS&&console.log("Warning: ".concat(e))}function q(e){throw new Error(e)}function $(e,t){e||q(t)}function M(e,t){var a;try{if(a=new URL(e),!a.origin||"null"===a.origin)return!1}catch(i){return!1}var n=new URL(t,a);return a.origin===n.origin}function B(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function W(e,t){if(!e)return null;try{var a=t?new URL(e,t):new URL(e);if(B(a))return a}catch(n){}return null}function U(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!1}),a}var V=function(){function e(t){this.constructor===e&&q("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=V;var H=function(e){l(a,e);var t=c(a);function a(e,n){var i;return r(this,a),i=t.call(this,e),i.code=n,i}return a}(V);t.PasswordException=H;var Q=function(e){l(a,e);var t=c(a);function a(e,n){var i;return r(this,a),i=t.call(this,e),i.details=n,i}return a}(V);t.UnknownErrorException=Q;var G=function(e){l(a,e);var t=c(a);function a(){return r(this,a),t.apply(this,arguments)}return a}(V);t.InvalidPDFException=G;var K=function(e){l(a,e);var t=c(a);function a(){return r(this,a),t.apply(this,arguments)}return a}(V);t.MissingPDFException=K;var Y=function(e){l(a,e);var t=c(a);function a(e,n){var i;return r(this,a),i=t.call(this,e),i.status=n,i}return a}(V);t.UnexpectedResponseException=Y;var X=function(e){l(a,e);var t=c(a);function a(){return r(this,a),t.apply(this,arguments)}return a}(V);t.FormatError=X;var Z=function(e){l(a,e);var t=c(a);function a(){return r(this,a),t.apply(this,arguments)}return a}(V);t.AbortException=Z;var J=/\x00/g;function ee(e){return"string"!==typeof e?(L("The argument for removeNullCharacters must be a string."),e):e.replace(J,"")}function te(e){$(null!==e&&"object"===o(e)&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length,a=8192;if(t<a)return String.fromCharCode.apply(null,e);for(var n=[],i=0;i<t;i+=a){var r=Math.min(i+a,t),l=e.subarray(i,r);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function ae(e){$("string"===typeof e,"Invalid argument for stringToBytes");for(var t=e.length,a=new Uint8Array(t),n=0;n<t;++n)a[n]=255&e.charCodeAt(n);return a}function ne(e){return void 0!==e.length?e.length:($(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}function ie(e){var t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];for(var a=0,n=0;n<t;n++)a+=ne(e[n]);for(var i=0,o=new Uint8Array(a),r=0;r<t;r++){var l=e[r];l instanceof Uint8Array||(l="string"===typeof l?ae(l):new Uint8Array(l));var s=l.byteLength;o.set(l,i),i+=s}return o}function oe(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function re(){var e=new Uint8Array(4);e[0]=1;var t=new Uint32Array(e.buffer,0,1);return 1===t[0]}var le={get value(){return U(this,"value",re())}};function se(){try{return new Function(""),!0}catch(e){return!1}}t.IsLittleEndianCached=le;var ce={get value(){return U(this,"value",se())}};t.IsEvalSupportedCached=ce;var ue=["rgb(",0,",",0,",",0,")"],de=function(){function e(){r(this,e)}return i(e,null,[{key:"makeCssRgb",value:function(e,t,a){return ue[1]=e,ue[3]=t,ue[5]=a,ue.join("")}},{key:"transform",value:function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}},{key:"applyTransform",value:function(e,t){var a=e[0]*t[0]+e[1]*t[2]+t[4],n=e[0]*t[1]+e[1]*t[3]+t[5];return[a,n]}},{key:"applyInverseTransform",value:function(e,t){var a=t[0]*t[3]-t[1]*t[2],n=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/a,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/a;return[n,i]}},{key:"getAxialAlignedBoundingBox",value:function(t,a){var n=e.applyTransform(t,a),i=e.applyTransform(t.slice(2,4),a),o=e.applyTransform([t[0],t[3]],a),r=e.applyTransform([t[2],t[1]],a);return[Math.min(n[0],i[0],o[0],r[0]),Math.min(n[1],i[1],o[1],r[1]),Math.max(n[0],i[0],o[0],r[0]),Math.max(n[1],i[1],o[1],r[1])]}},{key:"inverseTransform",value:function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}},{key:"apply3dTransform",value:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}},{key:"singularValueDecompose2dScale",value:function(e){var t=[e[0],e[2],e[1],e[3]],a=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],r=(a+o)/2,l=Math.sqrt((a+o)*(a+o)-4*(a*o-i*n))/2,s=r+l||1,c=r-l||1;return[Math.sqrt(s),Math.sqrt(c)]}},{key:"normalizeRect",value:function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}},{key:"intersect",value:function(t,a){function n(e,t){return e-t}var i=[t[0],t[2],a[0],a[2]].sort(n),o=[t[1],t[3],a[1],a[3]].sort(n),r=[];return t=e.normalizeRect(t),a=e.normalizeRect(a),i[0]===t[0]&&i[1]===a[0]||i[0]===a[0]&&i[1]===t[0]?(r[0]=i[1],r[2]=i[2],o[0]===t[1]&&o[1]===a[1]||o[0]===a[1]&&o[1]===t[1]?(r[1]=o[1],r[3]=o[2],r):null):null}}]),e}();t.Util=de;var pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function he(e){var t=e.length,a=[];if("þ"===e[0]&&"ÿ"===e[1])for(var n=2;n<t;n+=2)a.push(String.fromCharCode(e.charCodeAt(n)<<8|e.charCodeAt(n+1)));else if("ÿ"===e[0]&&"þ"===e[1])for(var i=2;i<t;i+=2)a.push(String.fromCharCode(e.charCodeAt(i+1)<<8|e.charCodeAt(i)));else for(var o=0;o<t;++o){var r=pe[e.charCodeAt(o)];a.push(r?String.fromCharCode(r):e.charAt(o))}return a.join("")}function me(e){return e.replace(/([\(\)\\])/g,"\\$1")}function fe(e){return decodeURIComponent(escape(e))}function be(e){return unescape(encodeURIComponent(e))}function ge(e){return"boolean"===typeof e}function ve(e){return"number"===typeof e}function ye(e){return"string"===typeof e}function _e(e){return"object"===o(e)&&null!==e&&void 0!==e.byteLength}function xe(e,t){return e.length===t.length&&e.every((function(e,a){return e===t[a]}))}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date(Date.now()),t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),(e.getUTCDate()+1).toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")}function ke(){var e=Object.create(null),t=!1;return Object.defineProperty(e,"settled",{get:function(){return t}}),e.promise=new Promise((function(a,n){e.resolve=function(e){t=!0,a(e)},e.reject=function(e){t=!0,n(e)}})),e}var Te=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n&&URL.createObjectURL){var i=new Blob([t],{type:a});return URL.createObjectURL(i)}for(var o="data:".concat(a,";base64,"),r=0,l=t.length;r<l;r+=3){var s=255&t[r],c=255&t[r+1],u=255&t[r+2],d=s>>2,p=(3&s)<<4|c>>4,h=r+1<l?(15&c)<<2|u>>6:64,m=r+2<l?63&u:64;o+=e[d]+e[p]+e[h]+e[m]}return o}}();t.createObjectURL=Te},function(e,t,a){"use strict";var n=a(7);function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}if("undefined"===typeof globalThis||!globalThis._pdfjsCompatibilityChecked){"undefined"!==typeof globalThis&&globalThis.Math===Math||(globalThis=a(8)),globalThis._pdfjsCompatibilityChecked=!0;var o="object"===("undefined"===typeof window?"undefined":i(window))&&"object"===("undefined"===typeof document?"undefined":i(document)),r="undefined"!==typeof navigator&&navigator.userAgent||"",l=/Trident/.test(r);(function(){!globalThis.btoa&&n.isNodeJS&&(globalThis.btoa=function(e){return Buffer.from(e,"binary").toString("base64")})})(),function(){!globalThis.atob&&n.isNodeJS&&(globalThis.atob=function(e){return Buffer.from(e,"base64").toString("binary")})}(),function(){o&&"undefined"===typeof Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}(),function(){if(o&&!n.isNodeJS){var e=document.createElement("div");if(e.classList.add("testOne","testTwo"),!0!==e.classList.contains("testOne")||!0!==e.classList.contains("testTwo")){var t=DOMTokenList.prototype.add,a=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];for(var i=0,o=a;i<o.length;i++){var r=o[i];t.call(this,r)}},DOMTokenList.prototype.remove=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,o=t;i<o.length;i++){var r=o[i];a.call(this,r)}}}}}(),function(){if(o&&!n.isNodeJS){var e=document.createElement("div");!1!==e.classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(e){var t=arguments.length>1?!!arguments[1]:!this.contains(e);return this[t?"add":"remove"](e),t})}}(),function(){if(o&&l){var e=window.history.pushState,t=window.history.replaceState;window.history.pushState=function(t,a,n){var i=void 0===n?[t,a]:[t,a,n];e.apply(this,i)},window.history.replaceState=function(e,a,n){var i=void 0===n?[e,a]:[e,a,n];t.apply(this,i)}}}(),function(){String.prototype.startsWith||a(53)}(),function(){String.prototype.endsWith||a(64)}(),function(){String.prototype.includes||a(66)}(),function(){Array.prototype.includes||a(68)}(),function(){Array.from||a(76)}(),function(){Object.assign||a(98)}(),function(){Object.fromEntries||a(101)}(),function(){Math.log2||(Math.log2=a(105))}(),function(){Number.isNaN||(Number.isNaN=a(107))}(),function(){Number.isInteger||(Number.isInteger=a(109))}(),function(){Uint8Array.prototype.slice||a(112)}(),function(){globalThis.Promise&&globalThis.Promise.allSettled||(globalThis.Promise=a(117))}(),function(){globalThis.URL=a(138)}(),function(){var e=!1;if("undefined"!==typeof ReadableStream)try{new ReadableStream({start:function(e){e.close()}}),e=!0}catch(t){}e||(globalThis.ReadableStream=a(145).ReadableStream)}(),function(){globalThis.Map&&globalThis.Map.prototype.entries||(globalThis.Map=a(146))}(),function(){globalThis.Set&&globalThis.Set.prototype.entries||(globalThis.Set=a(153))}(),function(){globalThis.WeakMap||(globalThis.WeakMap=a(155))}(),function(){globalThis.WeakSet||(globalThis.WeakSet=a(161))}(),function(){String.prototype.codePointAt||a(163)}(),function(){String.fromCodePoint||(String.fromCodePoint=a(165))}(),function(){globalThis.Symbol||a(167)}(),function(){String.prototype.padStart||a(190)}(),function(){String.prototype.padEnd||a(195)}(),function(){Object.values||(Object.values=a(197))}(),function(){Object.entries||(Object.entries=a(200))}()}},function(e,t,a){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;var i="object"===("undefined"===typeof process?"undefined":n(process))&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=i},function(e,t,a){a(9),e.exports=a(11)},function(e,t,a){var n=a(10),i=a(11);n({global:!0},{globalThis:i})},function(e,t,a){var n=a(11),i=a(12).f,o=a(26),r=a(29),l=a(30),s=a(40),c=a(52);e.exports=function(e,t){var a,u,d,p,h,m,f=e.target,b=e.global,g=e.stat;if(u=b?n:g?n[f]||l(f,{}):(n[f]||{}).prototype,u)for(d in t){if(h=t[d],e.noTargetGet?(m=i(u,d),p=m&&m.value):p=u[d],a=c(b?d:f+(g?".":"#")+d,e.forced),!a&&void 0!==p){if(typeof h===typeof p)continue;s(h,p)}(e.sham||p&&p.sham)&&o(h,"sham",!0),r(u,d,h,e)}}},function(e,t){var a=function(e){return e&&e.Math==Math&&e};e.exports=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof global&&global)||Function("return this")()},function(e,t,a){var n=a(13),i=a(15),o=a(16),r=a(17),l=a(21),s=a(23),c=a(24),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=r(e),t=l(t,!0),c)try{return u(e,t)}catch(a){}if(s(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,a){var n=a(14);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,a){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,a){var n=a(18),i=a(20);e.exports=function(e){return n(i(e))}},function(e,t,a){var n=a(14),i=a(19),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,a){var n=a(22);e.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if("function"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},function(e,t,a){var n=a(13),i=a(14),o=a(25);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,a){var n=a(11),i=a(22),o=n.document,r=i(o)&&i(o.createElement);e.exports=function(e){return r?o.createElement(e):{}}},function(e,t,a){var n=a(13),i=a(27),o=a(16);e.exports=n?function(e,t,a){return i.f(e,t,o(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){var n=a(13),i=a(24),o=a(28),r=a(21),l=Object.defineProperty;t.f=n?l:function(e,t,a){if(o(e),t=r(t,!0),o(a),i)try{return l(e,t,a)}catch(n){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(e[t]=a.value),e}},function(e,t,a){var n=a(22);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,a){var n=a(11),i=a(26),o=a(23),r=a(30),l=a(31),s=a(33),c=s.get,u=s.enforce,d=String(String).split("String");(e.exports=function(e,t,a,l){var s=!!l&&!!l.unsafe,c=!!l&&!!l.enumerable,p=!!l&&!!l.noTargetGet;"function"==typeof a&&("string"!=typeof t||o(a,"name")||i(a,"name",t),u(a).source=d.join("string"==typeof t?t:"")),e!==n?(s?!p&&e[t]&&(c=!0):delete e[t],c?e[t]=a:i(e,t,a)):c?e[t]=a:r(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||l(this)}))},function(e,t,a){var n=a(11),i=a(26);e.exports=function(e,t){try{i(n,e,t)}catch(a){n[e]=t}return t}},function(e,t,a){var n=a(32),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},function(e,t,a){var n=a(11),i=a(30),o="__core-js_shared__",r=n[o]||i(o,{});e.exports=r},function(e,t,a){var n,i,o,r=a(34),l=a(11),s=a(22),c=a(26),u=a(23),d=a(35),p=a(39),h=l.WeakMap,m=function(e){return o(e)?i(e):n(e,{})},f=function(e){return function(t){var a;if(!s(t)||(a=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return a}};if(r){var b=new h,g=b.get,v=b.has,y=b.set;n=function(e,t){return y.call(b,e,t),t},i=function(e){return g.call(b,e)||{}},o=function(e){return v.call(b,e)}}else{var _=d("state");p[_]=!0,n=function(e,t){return c(e,_,t),t},i=function(e){return u(e,_)?e[_]:{}},o=function(e){return u(e,_)}}e.exports={set:n,get:i,has:o,enforce:m,getterFor:f}},function(e,t,a){var n=a(11),i=a(31),o=n.WeakMap;e.exports="function"===typeof o&&/native code/.test(i(o))},function(e,t,a){var n=a(36),i=a(38),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,a){var n=a(37),i=a(32);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t){var a=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++a+n).toString(36)}},function(e,t){e.exports={}},function(e,t,a){var n=a(23),i=a(41),o=a(12),r=a(27);e.exports=function(e,t){for(var a=i(t),l=r.f,s=o.f,c=0;c<a.length;c++){var u=a[c];n(e,u)||l(e,u,s(t,u))}}},function(e,t,a){var n=a(42),i=a(44),o=a(51),r=a(28);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(r(e)),a=o.f;return a?t.concat(a(e)):t}},function(e,t,a){var n=a(43),i=a(11),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e])||o(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},function(e,t,a){var n=a(11);e.exports=n},function(e,t,a){var n=a(45),i=a(50),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,a){var n=a(23),i=a(17),o=a(46).indexOf,r=a(39);e.exports=function(e,t){var a,l=i(e),s=0,c=[];for(a in l)!n(r,a)&&n(l,a)&&c.push(a);while(t.length>s)n(l,a=t[s++])&&(~o(c,a)||c.push(a));return c}},function(e,t,a){var n=a(17),i=a(47),o=a(49),r=function(e){return function(t,a,r){var l,s=n(t),c=i(s.length),u=o(r,c);if(e&&a!=a){while(c>u)if(l=s[u++],l!=l)return!0}else for(;c>u;u++)if((e||u in s)&&s[u]===a)return e||u||0;return!e&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},function(e,t,a){var n=a(48),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var a=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:a)(e)}},function(e,t,a){var n=a(48),i=Math.max,o=Math.min;e.exports=function(e,t){var a=n(e);return a<0?i(a+t,0):o(a,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,a){var n=a(14),i=/#|\.prototype\./,o=function(e,t){var a=l[r(e)];return a==c||a!=s&&("function"==typeof t?n(t):!!t)},r=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},l=o.data={},s=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,a){a(54);var n=a(61);e.exports=n("String","startsWith")},function(e,t,a){"use strict";var n=a(10),i=a(12).f,o=a(47),r=a(55),l=a(20),s=a(60),c=a(37),u="".startsWith,d=Math.min,p=s("startsWith"),h=!c&&!p&&!!function(){var e=i(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!h&&!p},{startsWith:function(e){var t=String(l(this));r(e);var a=o(d(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return u?u.call(t,n,a):t.slice(a,a+n.length)===n}})},function(e,t,a){var n=a(56);e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,a){var n=a(22),i=a(19),o=a(57),r=o("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==i(e))}},function(e,t,a){var n=a(11),i=a(36),o=a(23),r=a(38),l=a(58),s=a(59),c=i("wks"),u=n.Symbol,d=s?u:u&&u.withoutSetter||r;e.exports=function(e){return o(c,e)||(l&&o(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},function(e,t,a){var n=a(14);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(e,t,a){var n=a(58);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,a){var n=a(57),i=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[i]=!1,"/./"[e](t)}catch(n){}}return!1}},function(e,t,a){var n=a(11),i=a(62),o=Function.call;e.exports=function(e,t,a){return i(o,n[e].prototype[t],a)}},function(e,t,a){var n=a(63);e.exports=function(e,t,a){if(n(e),void 0===t)return e;switch(a){case 0:return function(){return e.call(t)};case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,i){return e.call(t,a,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,a){a(65);var n=a(61);e.exports=n("String","endsWith")},function(e,t,a){"use strict";var n=a(10),i=a(12).f,o=a(47),r=a(55),l=a(20),s=a(60),c=a(37),u="".endsWith,d=Math.min,p=s("endsWith"),h=!c&&!p&&!!function(){var e=i(String.prototype,"endsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!h&&!p},{endsWith:function(e){var t=String(l(this));r(e);var a=arguments.length>1?arguments[1]:void 0,n=o(t.length),i=void 0===a?n:d(o(a),n),s=String(e);return u?u.call(t,s,i):t.slice(i-s.length,i)===s}})},function(e,t,a){a(67);var n=a(61);e.exports=n("String","includes")},function(e,t,a){"use strict";var n=a(10),i=a(55),o=a(20),r=a(60);n({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,a){a(69);var n=a(61);e.exports=n("Array","includes")},function(e,t,a){"use strict";var n=a(10),i=a(46).includes,o=a(70),r=a(75),l=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!l},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,a){var n=a(57),i=a(71),o=a(27),r=n("unscopables"),l=Array.prototype;void 0==l[r]&&o.f(l,r,{configurable:!0,value:i(null)}),e.exports=function(e){l[r][e]=!0}},function(e,t,a){var n,i=a(28),o=a(72),r=a(50),l=a(39),s=a(74),c=a(25),u=a(35),d=">",p="<",h="prototype",m="script",f=u("IE_PROTO"),b=function(){},g=function(e){return p+m+d+e+p+"/"+m+d},v=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=c("iframe"),a="java"+m+":";return t.style.display="none",s.appendChild(t),t.src=String(a),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},_=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}_=n?v(n):y();var e=r.length;while(e--)delete _[h][r[e]];return _()};l[f]=!0,e.exports=Object.create||function(e,t){var a;return null!==e?(b[h]=i(e),a=new b,b[h]=null,a[f]=e):a=_(),void 0===t?a:o(a,t)}},function(e,t,a){var n=a(13),i=a(27),o=a(28),r=a(73);e.exports=n?Object.defineProperties:function(e,t){o(e);var a,n=r(t),l=n.length,s=0;while(l>s)i.f(e,a=n[s++],t[a]);return e}},function(e,t,a){var n=a(45),i=a(50);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,a){var n=a(42);e.exports=n("document","documentElement")},function(e,t,a){var n=a(13),i=a(14),o=a(23),r=Object.defineProperty,l={},s=function(e){throw e};e.exports=function(e,t){if(o(l,e))return l[e];t||(t={});var a=[][e],c=!!o(t,"ACCESSORS")&&t.ACCESSORS,u=o(t,0)?t[0]:s,d=o(t,1)?t[1]:void 0;return l[e]=!!a&&!i((function(){if(c&&!n)return!0;var e={length:-1};c?r(e,1,{enumerable:!0,get:s}):e[1]=1,a.call(e,u,d)}))}},function(e,t,a){a(77),a(89);var n=a(43);e.exports=n.Array.from},function(e,t,a){"use strict";var n=a(78).charAt,i=a(33),o=a(79),r="String Iterator",l=i.set,s=i.getterFor(r);o(String,"String",(function(e){l(this,{type:r,string:String(e),index:0})}),(function(){var e,t=s(this),a=t.string,i=t.index;return i>=a.length?{value:void 0,done:!0}:(e=n(a,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,a){var n=a(48),i=a(20),o=function(e){return function(t,a){var o,r,l=String(i(t)),s=n(a),c=l.length;return s<0||s>=c?e?"":void 0:(o=l.charCodeAt(s),o<55296||o>56319||s+1===c||(r=l.charCodeAt(s+1))<56320||r>57343?e?l.charAt(s):o:e?l.slice(s,s+2):r-56320+(o-55296<<10)+65536)}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,a){"use strict";var n=a(10),i=a(80),o=a(82),r=a(87),l=a(85),s=a(26),c=a(29),u=a(57),d=a(37),p=a(86),h=a(81),m=h.IteratorPrototype,f=h.BUGGY_SAFARI_ITERATORS,b=u("iterator"),g="keys",v="values",y="entries",_=function(){return this};e.exports=function(e,t,a,u,h,x,w){i(a,t,u);var k,T,D,S=function(e){if(e===h&&A)return A;if(!f&&e in P)return P[e];switch(e){case g:return function(){return new a(this,e)};case v:return function(){return new a(this,e)};case y:return function(){return new a(this,e)}}return function(){return new a(this)}},O=t+" Iterator",N=!1,P=e.prototype,C=P[b]||P["@@iterator"]||h&&P[h],A=!f&&C||S(h),F="Array"==t&&P.entries||C;if(F&&(k=o(F.call(new e)),m!==Object.prototype&&k.next&&(d||o(k)===m||(r?r(k,m):"function"!=typeof k[b]&&s(k,b,_)),l(k,O,!0,!0),d&&(p[O]=_))),h==v&&C&&C.name!==v&&(N=!0,A=function(){return C.call(this)}),d&&!w||P[b]===A||s(P,b,A),p[t]=A,h)if(T={values:S(v),keys:x?A:S(g),entries:S(y)},w)for(D in T)(f||N||!(D in P))&&c(P,D,T[D]);else n({target:t,proto:!0,forced:f||N},T);return T}},function(e,t,a){"use strict";var n=a(81).IteratorPrototype,i=a(71),o=a(16),r=a(85),l=a(86),s=function(){return this};e.exports=function(e,t,a){var c=t+" Iterator";return e.prototype=i(n,{next:o(1,a)}),r(e,c,!1,!0),l[c]=s,e}},function(e,t,a){"use strict";var n,i,o,r=a(82),l=a(26),s=a(23),c=a(57),u=a(37),d=c("iterator"),p=!1,h=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=r(r(o)),i!==Object.prototype&&(n=i)):p=!0),void 0==n&&(n={}),u||s(n,d)||l(n,d,h),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(e,t,a){var n=a(23),i=a(83),o=a(35),r=a(84),l=o("IE_PROTO"),s=Object.prototype;e.exports=r?Object.getPrototypeOf:function(e){return e=i(e),n(e,l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,a){var n=a(20);e.exports=function(e){return Object(n(e))}},function(e,t,a){var n=a(14);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,a){var n=a(27).f,i=a(23),o=a(57),r=o("toStringTag");e.exports=function(e,t,a){e&&!i(e=a?e:e.prototype,r)&&n(e,r,{configurable:!0,value:t})}},function(e,t){e.exports={}},function(e,t,a){var n=a(28),i=a(88);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(a,[]),t=a instanceof Array}catch(o){}return function(a,o){return n(a),i(o),t?e.call(a,o):a.__proto__=o,a}}():void 0)},function(e,t,a){var n=a(22);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,a){var n=a(10),i=a(90),o=a(97),r=!o((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:r},{from:i})},function(e,t,a){"use strict";var n=a(62),i=a(83),o=a(91),r=a(92),l=a(47),s=a(93),c=a(94);e.exports=function(e){var t,a,u,d,p,h,m=i(e),f="function"==typeof this?this:Array,b=arguments.length,g=b>1?arguments[1]:void 0,v=void 0!==g,y=c(m),_=0;if(v&&(g=n(g,b>2?arguments[2]:void 0,2)),void 0==y||f==Array&&r(y))for(t=l(m.length),a=new f(t);t>_;_++)h=v?g(m[_],_):m[_],s(a,_,h);else for(d=y.call(m),p=d.next,a=new f;!(u=p.call(d)).done;_++)h=v?o(d,g,[u.value,_],!0):u.value,s(a,_,h);return a.length=_,a}},function(e,t,a){var n=a(28);e.exports=function(e,t,a,i){try{return i?t(n(a)[0],a[1]):t(a)}catch(r){var o=e["return"];throw void 0!==o&&n(o.call(e)),r}}},function(e,t,a){var n=a(57),i=a(86),o=n("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||r[o]===e)}},function(e,t,a){"use strict";var n=a(21),i=a(27),o=a(16);e.exports=function(e,t,a){var r=n(t);r in e?i.f(e,r,o(0,a)):e[r]=a}},function(e,t,a){var n=a(95),i=a(86),o=a(57),r=o("iterator");e.exports=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||i[n(e)]}},function(e,t,a){var n=a(96),i=a(19),o=a(57),r=o("toStringTag"),l="Arguments"==i(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(a){}};e.exports=n?i:function(e){var t,a,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=s(t=Object(e),r))?a:l?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},function(e,t,a){var n=a(57),i=n("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},function(e,t,a){var n=a(57),i=n("iterator"),o=!1;try{var r=0,l={next:function(){return{done:!!r++}},return:function(){o=!0}};l[i]=function(){return this},Array.from(l,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!o)return!1;var a=!1;try{var n={};n[i]=function(){return{next:function(){return{done:a=!0}}}},e(n)}catch(s){}return a}},function(e,t,a){a(99);var n=a(43);e.exports=n.Object.assign},function(e,t,a){var n=a(10),i=a(100);n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,a){"use strict";var n=a(13),i=a(14),o=a(73),r=a(51),l=a(15),s=a(83),c=a(18),u=Object.assign,d=Object.defineProperty;e.exports=!u||i((function(){if(n&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},a=Symbol(),i="abcdefghijklmnopqrst";return e[a]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[a]||o(u({},t)).join("")!=i}))?function(e,t){var a=s(e),i=arguments.length,u=1,d=r.f,p=l.f;while(i>u){var h,m=c(arguments[u++]),f=d?o(m).concat(d(m)):o(m),b=f.length,g=0;while(b>g)h=f[g++],n&&!p.call(m,h)||(a[h]=m[h])}return a}:u},function(e,t,a){a(102),a(103);var n=a(43);e.exports=n.Object.fromEntries},function(e,t,a){"use strict";var n=a(17),i=a(70),o=a(86),r=a(33),l=a(79),s="Array Iterator",c=r.set,u=r.getterFor(s);e.exports=l(Array,"Array",(function(e,t){c(this,{type:s,target:n(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,a=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:n,done:!1}:"values"==a?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,a){var n=a(10),i=a(104),o=a(93);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,a){o(t,e,a)}),void 0,!0),t}})},function(e,t,a){var n=a(28),i=a(92),o=a(47),r=a(62),l=a(94),s=a(91),c=function(e,t){this.stopped=e,this.result=t},u=e.exports=function(e,t,a,u,d){var p,h,m,f,b,g,v,y=r(t,a,u?2:1);if(d)p=e;else{if(h=l(e),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(m=0,f=o(e.length);f>m;m++)if(b=u?y(n(v=e[m])[0],v[1]):y(e[m]),b&&b instanceof c)return b;return new c(!1)}p=h.call(e)}g=p.next;while(!(v=g.call(p)).done)if(b=s(p,y,v.value,u),"object"==typeof b&&b&&b instanceof c)return b;return new c(!1)};u.stop=function(e){return new c(!0,e)}},function(e,t,a){a(106);var n=a(43);e.exports=n.Math.log2},function(e,t,a){var n=a(10),i=Math.log,o=Math.LN2;n({target:"Math",stat:!0},{log2:function(e){return i(e)/o}})},function(e,t,a){a(108);var n=a(43);e.exports=n.Number.isNaN},function(e,t,a){var n=a(10);n({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,a){a(110);var n=a(43);e.exports=n.Number.isInteger},function(e,t,a){var n=a(10),i=a(111);n({target:"Number",stat:!0},{isInteger:i})},function(e,t,a){var n=a(22),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,a){a(113)},function(e,t,a){"use strict";var n=a(114),i=a(116),o=a(14),r=n.aTypedArray,l=n.aTypedArrayConstructor,s=n.exportTypedArrayMethod,c=[].slice,u=o((function(){new Int8Array(1).slice()}));s("slice",(function(e,t){var a=c.call(r(this),e,t),n=i(this,this.constructor),o=0,s=a.length,u=new(l(n))(s);while(s>o)u[o]=a[o++];return u}),u)},function(e,t,a){"use strict";var n,i=a(115),o=a(13),r=a(11),l=a(22),s=a(23),c=a(95),u=a(26),d=a(29),p=a(27).f,h=a(82),m=a(87),f=a(57),b=a(38),g=r.Int8Array,v=g&&g.prototype,y=r.Uint8ClampedArray,_=y&&y.prototype,x=g&&h(g),w=v&&h(v),k=Object.prototype,T=k.isPrototypeOf,D=f("toStringTag"),S=b("TYPED_ARRAY_TAG"),O=i&&!!m&&"Opera"!==c(r.opera),N=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},C=function(e){var t=c(e);return"DataView"===t||s(P,t)},A=function(e){return l(e)&&s(P,c(e))},F=function(e){if(A(e))return e;throw TypeError("Target is not a typed array")},I=function(e){if(m){if(T.call(x,e))return e}else for(var t in P)if(s(P,n)){var a=r[t];if(a&&(e===a||T.call(a,e)))return e}throw TypeError("Target is not a typed array constructor")},E=function(e,t,a){if(o){if(a)for(var n in P){var i=r[n];i&&s(i.prototype,e)&&delete i.prototype[e]}w[e]&&!a||d(w,e,a?t:O&&v[e]||t)}},R=function(e,t,a){var n,i;if(o){if(m){if(a)for(n in P)i=r[n],i&&s(i,e)&&delete i[e];if(x[e]&&!a)return;try{return d(x,e,a?t:O&&g[e]||t)}catch(l){}}for(n in P)i=r[n],!i||i[e]&&!a||d(i,e,t)}};for(n in P)r[n]||(O=!1);if((!O||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},O))for(n in P)r[n]&&m(r[n],x);if((!O||!w||w===k)&&(w=x.prototype,O))for(n in P)r[n]&&m(r[n].prototype,w);if(O&&h(_)!==w&&m(_,w),o&&!s(w,D))for(n in N=!0,p(w,D,{get:function(){return l(this)?this[S]:void 0}}),P)r[n]&&u(r[n],S,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:N&&S,aTypedArray:F,aTypedArrayConstructor:I,exportTypedArrayMethod:E,exportTypedArrayStaticMethod:R,isView:C,isTypedArray:A,TypedArray:x,TypedArrayPrototype:w}},function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},function(e,t,a){var n=a(28),i=a(63),o=a(57),r=o("species");e.exports=function(e,t){var a,o=n(e).constructor;return void 0===o||void 0==(a=n(o)[r])?t:i(a)}},function(e,t,a){a(118),a(77),a(120),a(122),a(136),a(137);var n=a(43);e.exports=n.Promise},function(e,t,a){var n=a(96),i=a(29),o=a(119);n||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,a){"use strict";var n=a(96),i=a(95);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,a){var n=a(11),i=a(121),o=a(102),r=a(26),l=a(57),s=l("iterator"),c=l("toStringTag"),u=o.values;for(var d in i){var p=n[d],h=p&&p.prototype;if(h){if(h[s]!==u)try{r(h,s,u)}catch(f){h[s]=u}if(h[c]||r(h,c,d),i[d])for(var m in o)if(h[m]!==o[m])try{r(h,m,o[m])}catch(f){h[m]=o[m]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,a){"use strict";var n,i,o,r,l=a(10),s=a(37),c=a(11),u=a(42),d=a(123),p=a(29),h=a(124),m=a(85),f=a(125),b=a(22),g=a(63),v=a(126),y=a(19),_=a(31),x=a(104),w=a(97),k=a(116),T=a(127).set,D=a(130),S=a(131),O=a(133),N=a(132),P=a(134),C=a(33),A=a(52),F=a(57),I=a(135),E=F("species"),R="Promise",z=C.get,j=C.set,L=C.getterFor(R),q=d,$=c.TypeError,M=c.document,B=c.process,W=u("fetch"),U=N.f,V=U,H="process"==y(B),Q=!!(M&&M.createEvent&&c.dispatchEvent),G="unhandledrejection",K="rejectionhandled",Y=0,X=1,Z=2,J=1,ee=2,te=A(R,(function(){var e=_(q)!==String(q);if(!e){if(66===I)return!0;if(!H&&"function"!=typeof PromiseRejectionEvent)return!0}if(s&&!q.prototype["finally"])return!0;if(I>=51&&/native code/.test(q))return!1;var t=q.resolve(1),a=function(e){e((function(){}),(function(){}))},n=t.constructor={};return n[E]=a,!(t.then((function(){}))instanceof a)})),ae=te||!w((function(e){q.all(e)["catch"]((function(){}))})),ne=function(e){var t;return!(!b(e)||"function"!=typeof(t=e.then))&&t},ie=function(e,t,a){if(!t.notified){t.notified=!0;var n=t.reactions;D((function(){var i=t.value,o=t.state==X,r=0;while(n.length>r){var l,s,c,u=n[r++],d=o?u.ok:u.fail,p=u.resolve,h=u.reject,m=u.domain;try{d?(o||(t.rejection===ee&&se(e,t),t.rejection=J),!0===d?l=i:(m&&m.enter(),l=d(i),m&&(m.exit(),c=!0)),l===u.promise?h($("Promise-chain cycle")):(s=ne(l))?s.call(l,p,h):p(l)):h(i)}catch(f){m&&!c&&m.exit(),h(f)}}t.reactions=[],t.notified=!1,a&&!t.rejection&&re(e,t)}))}},oe=function(e,t,a){var n,i;Q?(n=M.createEvent("Event"),n.promise=t,n.reason=a,n.initEvent(e,!1,!0),c.dispatchEvent(n)):n={promise:t,reason:a},(i=c["on"+e])?i(n):e===G&&O("Unhandled promise rejection",a)},re=function(e,t){T.call(c,(function(){var a,n=t.value,i=le(t);if(i&&(a=P((function(){H?B.emit("unhandledRejection",n,e):oe(G,e,n)})),t.rejection=H||le(t)?ee:J,a.error))throw a.value}))},le=function(e){return e.rejection!==J&&!e.parent},se=function(e,t){T.call(c,(function(){H?B.emit("rejectionHandled",e):oe(K,e,t.value)}))},ce=function(e,t,a,n){return function(i){e(t,a,i,n)}},ue=function(e,t,a,n){t.done||(t.done=!0,n&&(t=n),t.value=a,t.state=Z,ie(e,t,!0))},de=function(e,t,a,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===a)throw $("Promise can't be resolved itself");var i=ne(a);i?D((function(){var n={done:!1};try{i.call(a,ce(de,e,n,t),ce(ue,e,n,t))}catch(o){ue(e,n,o,t)}})):(t.value=a,t.state=X,ie(e,t,!1))}catch(o){ue(e,{done:!1},o,t)}}};te&&(q=function(e){v(this,q,R),g(e),n.call(this);var t=z(this);try{e(ce(de,this,t),ce(ue,this,t))}catch(a){ue(this,t,a)}},n=function(e){j(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Y,value:void 0})},n.prototype=h(q.prototype,{then:function(e,t){var a=L(this),n=U(k(this,q));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=H?B.domain:void 0,a.parent=!0,a.reactions.push(n),a.state!=Y&&ie(this,a,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=z(e);this.promise=e,this.resolve=ce(de,e,t),this.reject=ce(ue,e,t)},N.f=U=function(e){return e===q||e===o?new i(e):V(e)},s||"function"!=typeof d||(r=d.prototype.then,p(d.prototype,"then",(function(e,t){var a=this;return new q((function(e,t){r.call(a,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof W&&l({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return S(q,W.apply(c,arguments))}}))),l({global:!0,wrap:!0,forced:te},{Promise:q}),m(q,R,!1,!0),f(R),o=u(R),l({target:R,stat:!0,forced:te},{reject:function(e){var t=U(this);return t.reject.call(void 0,e),t.promise}}),l({target:R,stat:!0,forced:s||te},{resolve:function(e){return S(s&&this===o?q:this,e)}}),l({target:R,stat:!0,forced:ae},{all:function(e){var t=this,a=U(t),n=a.resolve,i=a.reject,o=P((function(){var a=g(t.resolve),o=[],r=0,l=1;x(e,(function(e){var s=r++,c=!1;o.push(void 0),l++,a.call(t,e).then((function(e){c||(c=!0,o[s]=e,--l||n(o))}),i)})),--l||n(o)}));return o.error&&i(o.value),a.promise},race:function(e){var t=this,a=U(t),n=a.reject,i=P((function(){var i=g(t.resolve);x(e,(function(e){i.call(t,e).then(a.resolve,n)}))}));return i.error&&n(i.value),a.promise}})},function(e,t,a){var n=a(11);e.exports=n.Promise},function(e,t,a){var n=a(29);e.exports=function(e,t,a){for(var i in t)n(e,i,t[i],a);return e}},function(e,t,a){"use strict";var n=a(42),i=a(27),o=a(57),r=a(13),l=o("species");e.exports=function(e){var t=n(e),a=i.f;r&&t&&!t[l]&&a(t,l,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,a){if(!(e instanceof t))throw TypeError("Incorrect "+(a?a+" ":"")+"invocation");return e}},function(e,t,a){var n,i,o,r=a(11),l=a(14),s=a(19),c=a(62),u=a(74),d=a(25),p=a(128),h=r.location,m=r.setImmediate,f=r.clearImmediate,b=r.process,g=r.MessageChannel,v=r.Dispatch,y=0,_={},x="onreadystatechange",w=function(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},k=function(e){return function(){w(e)}},T=function(e){w(e.data)},D=function(e){r.postMessage(e+"",h.protocol+"//"+h.host)};m&&f||(m=function(e){var t=[],a=1;while(arguments.length>a)t.push(arguments[a++]);return _[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(y),y},f=function(e){delete _[e]},"process"==s(b)?n=function(e){b.nextTick(k(e))}:v&&v.now?n=function(e){v.now(k(e))}:g&&!p?(i=new g,o=i.port2,i.port1.onmessage=T,n=c(o.postMessage,o,1)):!r.addEventListener||"function"!=typeof postMessage||r.importScripts||l(D)||"file:"===h.protocol?n=x in d("script")?function(e){u.appendChild(d("script"))[x]=function(){u.removeChild(this),w(e)}}:function(e){setTimeout(k(e),0)}:(n=D,r.addEventListener("message",T,!1))),e.exports={set:m,clear:f}},function(e,t,a){var n=a(129);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(e,t,a){var n=a(42);e.exports=n("navigator","userAgent")||""},function(e,t,a){var n,i,o,r,l,s,c,u,d=a(11),p=a(12).f,h=a(19),m=a(127).set,f=a(128),b=d.MutationObserver||d.WebKitMutationObserver,g=d.process,v=d.Promise,y="process"==h(g),_=p(d,"queueMicrotask"),x=_&&_.value;x||(n=function(){var e,t;y&&(e=g.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(a){throw i?r():o=void 0,a}}o=void 0,e&&e.enter()},y?r=function(){g.nextTick(n)}:b&&!f?(l=!0,s=document.createTextNode(""),new b(n).observe(s,{characterData:!0}),r=function(){s.data=l=!l}):v&&v.resolve?(c=v.resolve(void 0),u=c.then,r=function(){u.call(c,n)}):r=function(){m.call(d,n)}),e.exports=x||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,r()),o=t}},function(e,t,a){var n=a(28),i=a(22),o=a(132);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var a=o.f(e),r=a.resolve;return r(t),a.promise}},function(e,t,a){"use strict";var n=a(63),i=function(e){var t,a;this.promise=new e((function(e,n){if(void 0!==t||void 0!==a)throw TypeError("Bad Promise constructor");t=e,a=n})),this.resolve=n(t),this.reject=n(a)};e.exports.f=function(e){return new i(e)}},function(e,t,a){var n=a(11);e.exports=function(e,t){var a=n.console;a&&a.error&&(1===arguments.length?a.error(e):a.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,a){var n,i,o=a(11),r=a(129),l=o.process,s=l&&l.versions,c=s&&s.v8;c?(n=c.split("."),i=n[0]+n[1]):r&&(n=r.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=r.match(/Chrome\/(\d+)/),n&&(i=n[1]))),e.exports=i&&+i},function(e,t,a){"use strict";var n=a(10),i=a(63),o=a(132),r=a(134),l=a(104);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,a=o.f(t),n=a.resolve,s=a.reject,c=r((function(){var a=i(t.resolve),o=[],r=0,s=1;l(e,(function(e){var i=r++,l=!1;o.push(void 0),s++,a.call(t,e).then((function(e){l||(l=!0,o[i]={status:"fulfilled",value:e},--s||n(o))}),(function(e){l||(l=!0,o[i]={status:"rejected",reason:e},--s||n(o))}))})),--s||n(o)}));return c.error&&s(c.value),a.promise}})},function(e,t,a){"use strict";var n=a(10),i=a(37),o=a(123),r=a(14),l=a(42),s=a(116),c=a(131),u=a(29),d=!!o&&r((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));n({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(e){var t=s(this,l("Promise")),a="function"==typeof e;return this.then(a?function(a){return c(t,e()).then((function(){return a}))}:e,a?function(a){return c(t,e()).then((function(){throw a}))}:e)}}),i||"function"!=typeof o||o.prototype["finally"]||u(o.prototype,"finally",l("Promise").prototype["finally"])},function(e,t,a){a(139),a(144),a(142);var n=a(43);e.exports=n.URL},function(e,t,a){"use strict";a(77);var n,i=a(10),o=a(13),r=a(140),l=a(11),s=a(72),c=a(29),u=a(126),d=a(23),p=a(100),h=a(90),m=a(78).codeAt,f=a(141),b=a(85),g=a(142),v=a(33),y=l.URL,_=g.URLSearchParams,x=g.getState,w=v.set,k=v.getterFor("URL"),T=Math.floor,D=Math.pow,S="Invalid authority",O="Invalid scheme",N="Invalid host",P="Invalid port",C=/[A-Za-z]/,A=/[\d+-.A-Za-z]/,F=/\d/,I=/^(0x|0X)/,E=/^[0-7]+$/,R=/^\d+$/,z=/^[\dA-Fa-f]+$/,j=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,L=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,q=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,$=/[\u0009\u000A\u000D]/g,M=function(e,t){var a,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return N;if(a=W(t.slice(1,-1)),!a)return N;e.host=a}else if(Z(e)){if(t=f(t),j.test(t))return N;if(a=B(t),null===a)return N;e.host=a}else{if(L.test(t))return N;for(a="",n=h(t),i=0;i<n.length;i++)a+=Y(n[i],H);e.host=a}},B=function(e){var t,a,n,i,o,r,l,s=e.split(".");if(s.length&&""==s[s.length-1]&&s.pop(),t=s.length,t>4)return e;for(a=[],n=0;n<t;n++){if(i=s[n],""==i)return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=I.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)r=0;else{if(!(10==o?R:8==o?E:z).test(i))return e;r=parseInt(i,o)}a.push(r)}for(n=0;n<t;n++)if(r=a[n],n==t-1){if(r>=D(256,5-t))return null}else if(r>255)return null;for(l=a.pop(),n=0;n<a.length;n++)l+=a[n]*D(256,3-n);return l},W=function(e){var t,a,n,i,o,r,l,s=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,p=function(){return e.charAt(d)};if(":"==p()){if(":"!=e.charAt(1))return;d+=2,c++,u=c}while(p()){if(8==c)return;if(":"!=p()){t=a=0;while(a<4&&z.test(p()))t=16*t+parseInt(p(),16),d++,a++;if("."==p()){if(0==a)return;if(d-=a,c>6)return;n=0;while(p()){if(i=null,n>0){if(!("."==p()&&n<4))return;d++}if(!F.test(p()))return;while(F.test(p())){if(o=parseInt(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}s[c]=256*s[c]+i,n++,2!=n&&4!=n||c++}if(4!=n)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;s[c++]=t}else{if(null!==u)return;d++,c++,u=c}}if(null!==u){r=c-u,c=7;while(0!=c&&r>0)l=s[c],s[c--]=s[u+r-1],s[u+--r]=l}else if(8!=c)return;return s},U=function(e){for(var t=null,a=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>a&&(t=n,a=i),n=null,i=0):(null===n&&(n=o),++i);return i>a&&(t=n,a=i),t},V=function(e){var t,a,n,i;if("number"==typeof e){for(t=[],a=0;a<4;a++)t.unshift(e%256),e=T(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=U(e),a=0;a<8;a++)i&&0===e[a]||(i&&(i=!1),n===a?(t+=a?":":"::",i=!0):(t+=e[a].toString(16),a<7&&(t+=":")));return"["+t+"]"}return e},H={},Q=p({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),G=p({},Q,{"#":1,"?":1,"{":1,"}":1}),K=p({},G,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Y=function(e,t){var a=m(e,0);return a>32&&a<127&&!d(t,e)?e:encodeURIComponent(e)},X={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Z=function(e){return d(X,e.scheme)},J=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var a;return 2==e.length&&C.test(e.charAt(0))&&(":"==(a=e.charAt(1))||!t&&"|"==a)},ae=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ne=function(e){var t=e.path,a=t.length;!a||"file"==e.scheme&&1==a&&te(t[0],!0)||t.pop()},ie=function(e){return"."===e||"%2e"===e.toLowerCase()},oe=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},re={},le={},se={},ce={},ue={},de={},pe={},he={},me={},fe={},be={},ge={},ve={},ye={},_e={},xe={},we={},ke={},Te={},De={},Se={},Oe=function(e,t,a,i){var o,r,l,s,c=a||re,u=0,p="",m=!1,f=!1,b=!1;a||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(q,"")),t=t.replace($,""),o=h(t);while(u<=o.length){switch(r=o[u],c){case re:if(!r||!C.test(r)){if(a)return O;c=se;continue}p+=r.toLowerCase(),c=le;break;case le:if(r&&(A.test(r)||"+"==r||"-"==r||"."==r))p+=r.toLowerCase();else{if(":"!=r){if(a)return O;p="",c=se,u=0;continue}if(a&&(Z(e)!=d(X,p)||"file"==p&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,a)return void(Z(e)&&X[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?c=ye:Z(e)&&i&&i.scheme==e.scheme?c=ce:Z(e)?c=he:"/"==o[u+1]?(c=ue,u++):(e.cannotBeABaseURL=!0,e.path.push(""),c=Te)}break;case se:if(!i||i.cannotBeABaseURL&&"#"!=r)return O;if(i.cannotBeABaseURL&&"#"==r){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,c=Se;break}c="file"==i.scheme?ye:de;continue;case ce:if("/"!=r||"/"!=o[u+1]){c=de;continue}c=me,u++;break;case ue:if("/"==r){c=fe;break}c=ke;continue;case de:if(e.scheme=i.scheme,r==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==r||"\\"==r&&Z(e))c=pe;else if("?"==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",c=De;else{if("#"!=r){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),c=ke;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=Se}break;case pe:if(!Z(e)||"/"!=r&&"\\"!=r){if("/"!=r){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,c=ke;continue}c=fe}else c=me;break;case he:if(c=me,"/"!=r||"/"!=p.charAt(u+1))continue;u++;break;case me:if("/"!=r&&"\\"!=r){c=fe;continue}break;case fe:if("@"==r){m&&(p="%40"+p),m=!0,l=h(p);for(var g=0;g<l.length;g++){var v=l[g];if(":"!=v||b){var y=Y(v,K);b?e.password+=y:e.username+=y}else b=!0}p=""}else if(r==n||"/"==r||"?"==r||"#"==r||"\\"==r&&Z(e)){if(m&&""==p)return S;u-=h(p).length+1,p="",c=be}else p+=r;break;case be:case ge:if(a&&"file"==e.scheme){c=xe;continue}if(":"!=r||f){if(r==n||"/"==r||"?"==r||"#"==r||"\\"==r&&Z(e)){if(Z(e)&&""==p)return N;if(a&&""==p&&(J(e)||null!==e.port))return;if(s=M(e,p),s)return s;if(p="",c=we,a)return;continue}"["==r?f=!0:"]"==r&&(f=!1),p+=r}else{if(""==p)return N;if(s=M(e,p),s)return s;if(p="",c=ve,a==ge)return}break;case ve:if(!F.test(r)){if(r==n||"/"==r||"?"==r||"#"==r||"\\"==r&&Z(e)||a){if(""!=p){var _=parseInt(p,10);if(_>65535)return P;e.port=Z(e)&&_===X[e.scheme]?null:_,p=""}if(a)return;c=we;continue}return P}p+=r;break;case ye:if(e.scheme="file","/"==r||"\\"==r)c=_e;else{if(!i||"file"!=i.scheme){c=ke;continue}if(r==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==r)e.host=i.host,e.path=i.path.slice(),e.query="",c=De;else{if("#"!=r){ae(o.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),ne(e)),c=ke;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=Se}}break;case _e:if("/"==r||"\\"==r){c=xe;break}i&&"file"==i.scheme&&!ae(o.slice(u).join(""))&&(te(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),c=ke;continue;case xe:if(r==n||"/"==r||"\\"==r||"?"==r||"#"==r){if(!a&&te(p))c=ke;else if(""==p){if(e.host="",a)return;c=we}else{if(s=M(e,p),s)return s;if("localhost"==e.host&&(e.host=""),a)return;p="",c=we}continue}p+=r;break;case we:if(Z(e)){if(c=ke,"/"!=r&&"\\"!=r)continue}else if(a||"?"!=r)if(a||"#"!=r){if(r!=n&&(c=ke,"/"!=r))continue}else e.fragment="",c=Se;else e.query="",c=De;break;case ke:if(r==n||"/"==r||"\\"==r&&Z(e)||!a&&("?"==r||"#"==r)){if(oe(p)?(ne(e),"/"==r||"\\"==r&&Z(e)||e.path.push("")):ie(p)?"/"==r||"\\"==r&&Z(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(r==n||"?"==r||"#"==r))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==r?(e.query="",c=De):"#"==r&&(e.fragment="",c=Se)}else p+=Y(r,G);break;case Te:"?"==r?(e.query="",c=De):"#"==r?(e.fragment="",c=Se):r!=n&&(e.path[0]+=Y(r,H));break;case De:a||"#"!=r?r!=n&&("'"==r&&Z(e)?e.query+="%27":e.query+="#"==r?"%23":Y(r,H)):(e.fragment="",c=Se);break;case Se:r!=n&&(e.fragment+=Y(r,Q));break}u++}},Ne=function(e){var t,a,n=u(this,Ne,"URL"),i=arguments.length>1?arguments[1]:void 0,r=String(e),l=w(n,{type:"URL"});if(void 0!==i)if(i instanceof Ne)t=k(i);else if(a=Oe(t={},String(i)),a)throw TypeError(a);if(a=Oe(l,r,null,t),a)throw TypeError(a);var s=l.searchParams=new _,c=x(s);c.updateSearchParams(l.query),c.updateURL=function(){l.query=String(s)||null},o||(n.href=Ce.call(n),n.origin=Ae.call(n),n.protocol=Fe.call(n),n.username=Ie.call(n),n.password=Ee.call(n),n.host=Re.call(n),n.hostname=ze.call(n),n.port=je.call(n),n.pathname=Le.call(n),n.search=qe.call(n),n.searchParams=$e.call(n),n.hash=Me.call(n))},Pe=Ne.prototype,Ce=function(){var e=k(this),t=e.scheme,a=e.username,n=e.password,i=e.host,o=e.port,r=e.path,l=e.query,s=e.fragment,c=t+":";return null!==i?(c+="//",J(e)&&(c+=a+(n?":"+n:"")+"@"),c+=V(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):"",null!==l&&(c+="?"+l),null!==s&&(c+="#"+s),c},Ae=function(){var e=k(this),t=e.scheme,a=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(n){return"null"}return"file"!=t&&Z(e)?t+"://"+V(e.host)+(null!==a?":"+a:""):"null"},Fe=function(){return k(this).scheme+":"},Ie=function(){return k(this).username},Ee=function(){return k(this).password},Re=function(){var e=k(this),t=e.host,a=e.port;return null===t?"":null===a?V(t):V(t)+":"+a},ze=function(){var e=k(this).host;return null===e?"":V(e)},je=function(){var e=k(this).port;return null===e?"":String(e)},Le=function(){var e=k(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},qe=function(){var e=k(this).query;return e?"?"+e:""},$e=function(){return k(this).searchParams},Me=function(){var e=k(this).fragment;return e?"#"+e:""},Be=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&s(Pe,{href:Be(Ce,(function(e){var t=k(this),a=String(e),n=Oe(t,a);if(n)throw TypeError(n);x(t.searchParams).updateSearchParams(t.query)})),origin:Be(Ae),protocol:Be(Fe,(function(e){var t=k(this);Oe(t,String(e)+":",re)})),username:Be(Ie,(function(e){var t=k(this),a=h(String(e));if(!ee(t)){t.username="";for(var n=0;n<a.length;n++)t.username+=Y(a[n],K)}})),password:Be(Ee,(function(e){var t=k(this),a=h(String(e));if(!ee(t)){t.password="";for(var n=0;n<a.length;n++)t.password+=Y(a[n],K)}})),host:Be(Re,(function(e){var t=k(this);t.cannotBeABaseURL||Oe(t,String(e),be)})),hostname:Be(ze,(function(e){var t=k(this);t.cannotBeABaseURL||Oe(t,String(e),ge)})),port:Be(je,(function(e){var t=k(this);ee(t)||(e=String(e),""==e?t.port=null:Oe(t,e,ve))})),pathname:Be(Le,(function(e){var t=k(this);t.cannotBeABaseURL||(t.path=[],Oe(t,e+"",we))})),search:Be(qe,(function(e){var t=k(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Oe(t,e,De)),x(t.searchParams).updateSearchParams(t.query)})),searchParams:Be($e),hash:Be(Me,(function(e){var t=k(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Oe(t,e,Se)):t.fragment=null}))}),c(Pe,"toJSON",(function(){return Ce.call(this)}),{enumerable:!0}),c(Pe,"toString",(function(){return Ce.call(this)}),{enumerable:!0}),y){var We=y.createObjectURL,Ue=y.revokeObjectURL;We&&c(Ne,"createObjectURL",(function(e){return We.apply(y,arguments)})),Ue&&c(Ne,"revokeObjectURL",(function(e){return Ue.apply(y,arguments)}))}b(Ne,"URL"),i({global:!0,forced:!r,sham:!o},{URL:Ne})},function(e,t,a){var n=a(14),i=a(57),o=a(37),r=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,a="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),a+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[r]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},function(e,t,a){"use strict";var n=2147483647,i=36,o=1,r=26,l=38,s=700,c=72,u=128,d="-",p=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",f=i-o,b=Math.floor,g=String.fromCharCode,v=function(e){var t=[],a=0,n=e.length;while(a<n){var i=e.charCodeAt(a++);if(i>=55296&&i<=56319&&a<n){var o=e.charCodeAt(a++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),a--)}else t.push(i)}return t},y=function(e){return e+22+75*(e<26)},_=function(e,t,a){var n=0;for(e=a?b(e/s):e>>1,e+=b(e/t);e>f*r>>1;n+=i)e=b(e/f);return b(n+(f+1)*e/(e+l))},x=function(e){var t=[];e=v(e);var a,l,s=e.length,p=u,h=0,f=c;for(a=0;a<e.length;a++)l=e[a],l<128&&t.push(g(l));var x=t.length,w=x;x&&t.push(d);while(w<s){var k=n;for(a=0;a<e.length;a++)l=e[a],l>=p&&l<k&&(k=l);var T=w+1;if(k-p>b((n-h)/T))throw RangeError(m);for(h+=(k-p)*T,p=k,a=0;a<e.length;a++){if(l=e[a],l<p&&++h>n)throw RangeError(m);if(l==p){for(var D=h,S=i;;S+=i){var O=S<=f?o:S>=f+r?r:S-f;if(D<O)break;var N=D-O,P=i-O;t.push(g(y(O+N%P))),D=b(N/P)}t.push(g(y(D))),f=_(h,T,w==x),h=0,++w}}++h,++p}return t.join("")};e.exports=function(e){var t,a,n=[],i=e.toLowerCase().replace(h,".").split(".");for(t=0;t<i.length;t++)a=i[t],n.push(p.test(a)?"xn--"+x(a):a);return n.join(".")}},function(e,t,a){"use strict";a(102);var n=a(10),i=a(42),o=a(140),r=a(29),l=a(124),s=a(85),c=a(80),u=a(33),d=a(126),p=a(23),h=a(62),m=a(95),f=a(28),b=a(22),g=a(71),v=a(16),y=a(143),_=a(94),x=a(57),w=i("fetch"),k=i("Headers"),T=x("iterator"),D="URLSearchParams",S=D+"Iterator",O=u.set,N=u.getterFor(D),P=u.getterFor(S),C=/\+/g,A=Array(4),F=function(e){return A[e-1]||(A[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},I=function(e){try{return decodeURIComponent(e)}catch(t){return e}},E=function(e){var t=e.replace(C," "),a=4;try{return decodeURIComponent(t)}catch(n){while(a)t=t.replace(F(a--),I);return t}},R=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=function(e){return z[e]},L=function(e){return encodeURIComponent(e).replace(R,j)},q=function(e,t){if(t){var a,n,i=t.split("&"),o=0;while(o<i.length)a=i[o++],a.length&&(n=a.split("="),e.push({key:E(n.shift()),value:E(n.join("="))}))}},$=function(e){this.entries.length=0,q(this.entries,e)},M=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=c((function(e,t){O(this,{type:S,iterator:y(N(e).entries),kind:t})}),"Iterator",(function(){var e=P(this),t=e.kind,a=e.iterator.next(),n=a.value;return a.done||(a.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),a})),W=function(){d(this,W,D);var e,t,a,n,i,o,r,l,s,c=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(O(u,{type:D,entries:h,updateURL:function(){},updateSearchParams:$}),void 0!==c)if(b(c))if(e=_(c),"function"===typeof e){t=e.call(c),a=t.next;while(!(n=a.call(t)).done){if(i=y(f(n.value)),o=i.next,(r=o.call(i)).done||(l=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:r.value+"",value:l.value+""})}}else for(s in c)p(c,s)&&h.push({key:s,value:c[s]+""});else q(h,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},U=W.prototype;l(U,{append:function(e,t){M(arguments.length,2);var a=N(this);a.entries.push({key:e+"",value:t+""}),a.updateURL()},delete:function(e){M(arguments.length,1);var t=N(this),a=t.entries,n=e+"",i=0;while(i<a.length)a[i].key===n?a.splice(i,1):i++;t.updateURL()},get:function(e){M(arguments.length,1);for(var t=N(this).entries,a=e+"",n=0;n<t.length;n++)if(t[n].key===a)return t[n].value;return null},getAll:function(e){M(arguments.length,1);for(var t=N(this).entries,a=e+"",n=[],i=0;i<t.length;i++)t[i].key===a&&n.push(t[i].value);return n},has:function(e){M(arguments.length,1);var t=N(this).entries,a=e+"",n=0;while(n<t.length)if(t[n++].key===a)return!0;return!1},set:function(e,t){M(arguments.length,1);for(var a,n=N(this),i=n.entries,o=!1,r=e+"",l=t+"",s=0;s<i.length;s++)a=i[s],a.key===r&&(o?i.splice(s--,1):(o=!0,a.value=l));o||i.push({key:r,value:l}),n.updateURL()},sort:function(){var e,t,a,n=N(this),i=n.entries,o=i.slice();for(i.length=0,a=0;a<o.length;a++){for(e=o[a],t=0;t<a;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===a&&i.push(e)}n.updateURL()},forEach:function(e){var t,a=N(this).entries,n=h(e,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<a.length)t=a[i++],n(t.value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),r(U,T,U.entries),r(U,"toString",(function(){var e,t=N(this).entries,a=[],n=0;while(n<t.length)e=t[n++],a.push(L(e.key)+"="+L(e.value));return a.join("&")}),{enumerable:!0}),s(W,D),n({global:!0,forced:!o},{URLSearchParams:W}),o||"function"!=typeof w||"function"!=typeof k||n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,a,n,i=[e];return arguments.length>1&&(t=arguments[1],b(t)&&(a=t.body,m(a)===D&&(n=t.headers?new k(t.headers):new k,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:v(0,String(a)),headers:v(0,n)}))),i.push(t)),w.apply(this,i)}}),e.exports={URLSearchParams:W,getState:N}},function(e,t,a){var n=a(28),i=a(94);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},function(e,t,a){"use strict";var n=a(10);n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(e,t,a){(function(e,a){a(t)})(0,(function(e){"use strict";var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol:function(e){return"Symbol("+e+")"};function a(){}var n=Number.isNaN||function(e){return e!==e},i=a;function o(e){return"object"===typeof e&&null!==e||"function"===typeof e}function r(e){return e.slice()}function l(e,t,a,n,i){new Uint8Array(e).set(new Uint8Array(a,n,i),t)}function s(e){return!1!==c(e)&&e!==1/0}function c(e){return"number"===typeof e&&(!n(e)&&!(e<0))}function u(e,t,a){if("function"!==typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,a)}function d(e,t,a,n){var i=e[t];if(void 0!==i){if("function"!==typeof i)throw new TypeError(i+" is not a method");switch(a){case 0:return function(){return h(i,e,n)};case 1:return function(t){var a=[t].concat(n);return h(i,e,a)}}}return function(){return k(void 0)}}function p(e,t,a){var n=e[t];if(void 0!==n)return u(n,e,a)}function h(e,t,a){try{return k(u(e,t,a))}catch(n){return T(n)}}function m(e){return e}function f(e){return!1}function b(e){if(e=Number(e),n(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e}function g(e){if(void 0===e)return function(){return 1};if("function"!==typeof e)throw new TypeError("size property of a queuing strategy must be a function");return function(t){return e(t)}}var v=Promise,y=Promise.prototype.then,_=Promise.resolve.bind(v),x=Promise.reject.bind(v);function w(e){return new v(e)}function k(e){return _(e)}function T(e){return x(e)}function D(e,t,a){return y.call(e,t,a)}function S(e,t,a){D(D(e,t,a),void 0,i)}function O(e,t){S(e,t)}function N(e,t){S(e,void 0,t)}function P(e,t,a){return D(e,t,a)}function C(e){D(e,void 0,i)}var A=16384,F=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),e.prototype.push=function(e){var t=this._back,a=t;t._elements.length===A-1&&(a={_elements:[],_next:void 0}),t._elements.push(e),a!==t&&(this._back=a,t._next=a),++this._size},e.prototype.shift=function(){var e=this._front,t=e,a=this._cursor,n=a+1,i=e._elements,o=i[a];return n===A&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),i[a]=void 0,o},e.prototype.forEach=function(e){var t=this._cursor,a=this._front,n=a._elements;while(t!==n.length||void 0!==a._next){if(t===n.length&&(a=a._next,n=a._elements,t=0,0===n.length))break;e(n[t]),++t}},e.prototype.peek=function(){var e=this._front,t=this._cursor;return e._elements[t]},e}();function I(e,t,a){var n=null;!0===a&&(n=Object.prototype);var i=Object.create(n);return i.value=e,i.done=t,i}function E(e,t){e._forAuthorCode=!0,e._ownerReadableStream=t,t._reader=e,"readable"===t._state?L(e):"closed"===t._state?$(e):q(e,t._storedError)}function R(e,t){var a=e._ownerReadableStream;return za(a,t)}function z(e){"readable"===e._ownerReadableStream._state?M(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):B(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function j(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function L(e){e._closedPromise=w((function(t,a){e._closedPromise_resolve=t,e._closedPromise_reject=a}))}function q(e,t){L(e),M(e,t)}function $(e){L(e),W(e)}function M(e,t){C(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function B(e,t){q(e,t)}function W(e){e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}var U=t("[[CancelSteps]]"),V=t("[[PullSteps]]");function H(e,t){void 0===t&&(t=!1);var a=new J(e);return a._forAuthorCode=t,a}function Q(e){var t=w((function(t,a){var n={_resolve:t,_reject:a};e._reader._readRequests.push(n)}));return t}function G(e,t,a){var n=e._reader,i=n._readRequests.shift();i._resolve(I(t,a,n._forAuthorCode))}function K(e){return e._reader._readRequests.length}function Y(e){var t=e._reader;return void 0!==t&&!!ee(t)}var X,Z,J=function(){function e(e){if(!1===Ea(e))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Ra(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");E(this,e),this._readRequests=new F}return Object.defineProperty(e.prototype,"closed",{get:function(){return ee(this)?this._closedPromise:T(ae("closed"))},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e){return ee(this)?void 0===this._ownerReadableStream?T(j("cancel")):R(this,e):T(ae("cancel"))},e.prototype.read=function(){return ee(this)?void 0===this._ownerReadableStream?T(j("read from")):te(this):T(ae("read"))},e.prototype.releaseLock=function(){if(!ee(this))throw ae("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},e}();function ee(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function te(e){var t=e._ownerReadableStream;return t._disturbed=!0,"closed"===t._state?k(I(void 0,!0,e._forAuthorCode)):"errored"===t._state?T(t._storedError):t._readableStreamController[V]()}function ae(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}"symbol"===typeof t.asyncIterator&&(X={},X[t.asyncIterator]=function(){return this},Z=X,Object.defineProperty(Z,t.asyncIterator,{enumerable:!1}));var ne={next:function(){if(!1===oe(this))return T(re("next"));var e=this._asyncIteratorReader;return void 0===e._ownerReadableStream?T(j("iterate")):P(te(e),(function(t){var a=t.done;a&&z(e);var n=t.value;return I(n,a,!0)}))},return:function(e){if(!1===oe(this))return T(re("next"));var t=this._asyncIteratorReader;if(void 0===t._ownerReadableStream)return T(j("finish iterating"));if(t._readRequests.length>0)return T(new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this._preventCancel){var a=R(t,e);return z(t),P(a,(function(){return I(e,!0,!0)}))}return z(t),k(I(e,!0,!0))}};function ie(e,t){void 0===t&&(t=!1);var a=H(e),n=Object.create(ne);return n._asyncIteratorReader=a,n._preventCancel=Boolean(t),n}function oe(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorReader")}function re(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}function le(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function se(e,t,a){if(a=Number(a),!s(a))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:a}),e._queueTotalSize+=a}function ce(e){var t=e._queue.peek();return t.value}function ue(e){e._queue=new F,e._queueTotalSize=0}void 0!==Z&&Object.setPrototypeOf(ne,Z),Object.defineProperty(ne,"next",{enumerable:!1}),Object.defineProperty(ne,"return",{enumerable:!1});var de=t("[[AbortSteps]]"),pe=t("[[ErrorSteps]]"),he=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),be(this);var a=t.size,n=t.highWaterMark,i=e.type;if(void 0!==i)throw new RangeError("Invalid type is specified");var o=g(a);void 0===n&&(n=1),n=b(n),Ge(this,e,n,o)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!1===ge(this))throw rt("locked");return ve(this)},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){return!1===ge(this)?T(rt("abort")):!0===ve(this)?T(new TypeError("Cannot abort a stream that already has a writer")):ye(this,e)},e.prototype.close=function(){return!1===ge(this)?T(rt("close")):!0===ve(this)?T(new TypeError("Cannot close a stream that already has a writer")):!0===Pe(this)?T(new TypeError("Cannot close an already-closing stream")):_e(this)},e.prototype.getWriter=function(){if(!1===ge(this))throw rt("getWriter");return me(this)},e}();function me(e){return new Re(e)}function fe(e,t,a,n,i,o){void 0===i&&(i=1),void 0===o&&(o=function(){return 1});var r=Object.create(he.prototype);be(r);var l=Object.create(Ve.prototype);return Qe(r,l,e,t,a,n,i,o),r}function be(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new F,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ge(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function ve(e){return void 0!==e._writer}function ye(e,t){var a=e._state;if("closed"===a||"errored"===a)return k(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;var n=!1;"erroring"===a&&(n=!0,t=void 0);var i=w((function(a,i){e._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:i,_reason:t,_wasAlreadyErroring:n}}));return e._pendingAbortRequest._promise=i,!1===n&&ke(e,t),i}function _e(e){var t=e._state;if("closed"===t||"errored"===t)return T(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));var a=w((function(t,a){var n={_resolve:t,_reject:a};e._closeRequest=n})),n=e._writer;return void 0!==n&&!0===e._backpressure&&"writable"===t&&xt(n),Ye(e._writableStreamController),a}function xe(e){var t=w((function(t,a){var n={_resolve:t,_reject:a};e._writeRequests.push(n)}));return t}function we(e,t){var a=e._state;"writable"!==a?Te(e):ke(e,t)}function ke(e,t){var a=e._writableStreamController;e._state="erroring",e._storedError=t;var n=e._writer;void 0!==n&&Me(n,t),!1===Ce(e)&&!0===a._started&&Te(e)}function Te(e){e._state="errored",e._writableStreamController[pe]();var t=e._storedError;if(e._writeRequests.forEach((function(e){e._reject(t)})),e._writeRequests=new F,void 0!==e._pendingAbortRequest){var a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,!0===a._wasAlreadyErroring)return a._reject(t),void Ie(e);var n=e._writableStreamController[de](a._reason);S(n,(function(){a._resolve(),Ie(e)}),(function(t){a._reject(t),Ie(e)}))}else Ie(e)}function De(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Se(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,we(e,t)}function Oe(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var t=e._state;"erroring"===t&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var a=e._writer;void 0!==a&&mt(a)}function Ne(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),we(e,t)}function Pe(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Ce(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function Ae(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Fe(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Ie(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&pt(t,e._storedError)}function Ee(e,t){var a=e._writer;void 0!==a&&t!==e._backpressure&&(!0===t?yt(a):xt(a)),e._backpressure=t}var Re=function(){function e(e){if(!1===ge(e))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===ve(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var t=e._state;if("writable"===t)!1===Pe(e)&&!0===e._backpressure?ft(this):gt(this),ct(this);else if("erroring"===t)bt(this,e._storedError),ct(this);else if("closed"===t)gt(this),dt(this);else{var a=e._storedError;bt(this,a),ut(this,a)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return!1===ze(this)?T(lt("closed")):this._closedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!1===ze(this))throw lt("desiredSize");if(void 0===this._ownerWritableStream)throw st("desiredSize");return Be(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return!1===ze(this)?T(lt("ready")):this._readyPromise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){return!1===ze(this)?T(lt("abort")):void 0===this._ownerWritableStream?T(st("abort")):je(this,e)},e.prototype.close=function(){if(!1===ze(this))return T(lt("close"));var e=this._ownerWritableStream;return void 0===e?T(st("close")):!0===Pe(e)?T(new TypeError("Cannot close an already-closing stream")):Le(this)},e.prototype.releaseLock=function(){if(!1===ze(this))throw lt("releaseLock");var e=this._ownerWritableStream;void 0!==e&&We(this)},e.prototype.write=function(e){return!1===ze(this)?T(lt("write")):void 0===this._ownerWritableStream?T(st("write to")):Ue(this,e)},e}();function ze(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function je(e,t){var a=e._ownerWritableStream;return ye(a,t)}function Le(e){var t=e._ownerWritableStream;return _e(t)}function qe(e){var t=e._ownerWritableStream,a=t._state;return!0===Pe(t)||"closed"===a?k(void 0):"errored"===a?T(t._storedError):Le(e)}function $e(e,t){"pending"===e._closedPromiseState?pt(e,t):ht(e,t)}function Me(e,t){"pending"===e._readyPromiseState?vt(e,t):_t(e,t)}function Be(e){var t=e._ownerWritableStream,a=t._state;return"errored"===a||"erroring"===a?null:"closed"===a?0:Ze(t._writableStreamController)}function We(e){var t=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Me(e,a),$e(e,a),t._writer=void 0,e._ownerWritableStream=void 0}function Ue(e,t){var a=e._ownerWritableStream,n=a._writableStreamController,i=Xe(n,t);if(a!==e._ownerWritableStream)return T(st("write to"));var o=a._state;if("errored"===o)return T(a._storedError);if(!0===Pe(a)||"closed"===o)return T(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return T(a._storedError);var r=xe(a);return Je(n,t,i),r}var Ve=function(){function e(){throw new TypeError("WritableStreamDefaultController cannot be constructed explicitly")}return e.prototype.error=function(e){if(!1===He(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var t=this._controlledWritableStream._state;"writable"===t&&ot(this,e)},e.prototype[de]=function(e){var t=this._abortAlgorithm(e);return Ke(this),t},e.prototype[pe]=function(){ue(this)},e}();function He(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")}function Qe(e,t,a,n,i,o,r,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,ue(t),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=r,t._writeAlgorithm=n,t._closeAlgorithm=i,t._abortAlgorithm=o;var s=it(t);Ee(e,s);var c=a(),u=k(c);S(u,(function(){t._started=!0,et(t)}),(function(a){t._started=!0,we(e,a)}))}function Ge(e,t,a,n){var i=Object.create(Ve.prototype);function o(){return p(t,"start",[i])}var r=d(t,"write",1,[i]),l=d(t,"close",0,[]),s=d(t,"abort",1,[]);Qe(e,i,o,r,l,s,a,n)}function Ke(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ye(e){se(e,"close",0),et(e)}function Xe(e,t){try{return e._strategySizeAlgorithm(t)}catch(a){return tt(e,a),1}}function Ze(e){return e._strategyHWM-e._queueTotalSize}function Je(e,t,a){var n={chunk:t};try{se(e,n,a)}catch(r){return void tt(e,r)}var i=e._controlledWritableStream;if(!1===Pe(i)&&"writable"===i._state){var o=it(e);Ee(i,o)}et(e)}function et(e){var t=e._controlledWritableStream;if(!1!==e._started&&void 0===t._inFlightWriteRequest){var a=t._state;if("erroring"!==a){if(0!==e._queue.length){var n=ce(e);"close"===n?at(e):nt(e,n.chunk)}}else Te(t)}}function tt(e,t){"writable"===e._controlledWritableStream._state&&ot(e,t)}function at(e){var t=e._controlledWritableStream;Ae(t),le(e);var a=e._closeAlgorithm();Ke(e),S(a,(function(){Oe(t)}),(function(e){Ne(t,e)}))}function nt(e,t){var a=e._controlledWritableStream;Fe(a);var n=e._writeAlgorithm(t);S(n,(function(){De(a);var t=a._state;if(le(e),!1===Pe(a)&&"writable"===t){var n=it(e);Ee(a,n)}et(e)}),(function(t){"writable"===a._state&&Ke(e),Se(a,t)}))}function it(e){var t=Ze(e);return t<=0}function ot(e,t){var a=e._controlledWritableStream;Ke(e),ke(a,t)}function rt(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function lt(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function st(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ct(e){e._closedPromise=w((function(t,a){e._closedPromise_resolve=t,e._closedPromise_reject=a,e._closedPromiseState="pending"}))}function ut(e,t){ct(e),pt(e,t)}function dt(e){ct(e),mt(e)}function pt(e,t){C(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function ht(e,t){ut(e,t)}function mt(e){e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}function ft(e){e._readyPromise=w((function(t,a){e._readyPromise_resolve=t,e._readyPromise_reject=a})),e._readyPromiseState="pending"}function bt(e,t){ft(e),vt(e,t)}function gt(e){ft(e),xt(e)}function vt(e,t){C(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function yt(e){ft(e)}function _t(e,t){bt(e,t)}function xt(e){e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}function wt(e){if("object"!==typeof e||null===e)return!1;try{return"boolean"===typeof e.aborted}catch(X){return!1}}var kt="undefined"!==typeof DOMException?DOMException:void 0;function Tt(e){if("function"!==typeof e&&"object"!==typeof e)return!1;try{return new e,!0}catch(X){return!1}}function Dt(){var e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var St=Tt(kt)?kt:Dt();function Ot(e,t,n,i,o,r){var l=H(e),s=me(t);e._disturbed=!0;var c=!1,u=k(void 0);return w((function(d,p){var h;if(void 0!==r){if(h=function(){var a=new St("Aborted","AbortError"),n=[];!1===i&&n.push((function(){return"writable"===t._state?ye(t,a):k(void 0)})),!1===o&&n.push((function(){return"readable"===e._state?za(e,a):k(void 0)})),_((function(){return Promise.all(n.map((function(e){return e()})))}),!0,a)},!0===r.aborted)return void h();r.addEventListener("abort",h)}function m(){return w((function(e,t){function a(n){n?e():D(f(),a,t)}a(!1)}))}function f(){return!0===c?k(!0):D(s._readyPromise,(function(){return D(te(l),(function(e){return!0===e.done||(u=D(Ue(s,e.value),void 0,a),!1)}))}))}if(v(e,l._closedPromise,(function(e){!1===i?_((function(){return ye(t,e)}),!0,e):x(!0,e)})),v(t,s._closedPromise,(function(t){!1===o?_((function(){return za(e,t)}),!0,t):x(!0,t)})),y(e,l._closedPromise,(function(){!1===n?_((function(){return qe(s)})):x()})),!0===Pe(t)||"closed"===t._state){var b=new TypeError("the destination writable stream closed before all data could be piped to it");!1===o?_((function(){return za(e,b)}),!0,b):x(!0,b)}function g(){var e=u;return D(u,(function(){return e!==u?g():void 0}))}function v(e,t,a){"errored"===e._state?a(e._storedError):N(t,a)}function y(e,t,a){"closed"===e._state?a():O(t,a)}function _(e,a,n){function i(){S(e(),(function(){return T(a,n)}),(function(e){return T(!0,e)}))}!0!==c&&(c=!0,"writable"===t._state&&!1===Pe(t)?O(g(),i):i())}function x(e,a){!0!==c&&(c=!0,"writable"===t._state&&!1===Pe(t)?O(g(),(function(){return T(e,a)})):T(e,a))}function T(e,t){We(s),z(l),void 0!==r&&r.removeEventListener("abort",h),e?p(t):d(void 0)}C(m())}))}var Nt=function(){function e(){throw new TypeError}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!1===Pt(this))throw Mt("desiredSize");return zt(this)},enumerable:!0,configurable:!0}),e.prototype.close=function(){if(!1===Pt(this))throw Mt("close");if(!1===Lt(this))throw new TypeError("The stream is not in a state that permits close");It(this)},e.prototype.enqueue=function(e){if(!1===Pt(this))throw Mt("enqueue");if(!1===Lt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Et(this,e)},e.prototype.error=function(e){if(!1===Pt(this))throw Mt("error");Rt(this,e)},e.prototype[U]=function(e){ue(this);var t=this._cancelAlgorithm(e);return Ft(this),t},e.prototype[V]=function(){var e=this._controlledReadableStream;if(this._queue.length>0){var t=le(this);return!0===this._closeRequested&&0===this._queue.length?(Ft(this),ja(e)):Ct(this),k(I(t,!1,e._reader._forAuthorCode))}var a=Q(e);return Ct(this),a},e}();function Pt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")}function Ct(e){var t=At(e);if(!1!==t)if(!0!==e._pulling){e._pulling=!0;var a=e._pullAlgorithm();S(a,(function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,Ct(e))}),(function(t){Rt(e,t)}))}else e._pullAgain=!0}function At(e){var t=e._controlledReadableStream;if(!1===Lt(e))return!1;if(!1===e._started)return!1;if(!0===Ra(t)&&K(t)>0)return!0;var a=zt(e);return a>0}function Ft(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function It(e){var t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(Ft(e),ja(t))}function Et(e,t){var a=e._controlledReadableStream;if(!0===Ra(a)&&K(a)>0)G(a,t,!1);else{var n=void 0;try{n=e._strategySizeAlgorithm(t)}catch(i){throw Rt(e,i),i}try{se(e,t,n)}catch(o){throw Rt(e,o),o}}Ct(e)}function Rt(e,t){var a=e._controlledReadableStream;"readable"===a._state&&(ue(e),Ft(e),La(a,t))}function zt(e){var t=e._controlledReadableStream,a=t._state;return"errored"===a?null:"closed"===a?0:e._strategyHWM-e._queueTotalSize}function jt(e){return!0!==At(e)}function Lt(e){var t=e._controlledReadableStream._state;return!1===e._closeRequested&&"readable"===t}function qt(e,t,a,n,i,o,r){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,ue(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=r,t._strategyHWM=o,t._pullAlgorithm=n,t._cancelAlgorithm=i,e._readableStreamController=t;var l=a();S(k(l),(function(){t._started=!0,Ct(t)}),(function(e){Rt(t,e)}))}function $t(e,t,a,n){var i=Object.create(Nt.prototype);function o(){return p(t,"start",[i])}var r=d(t,"pull",0,[i]),l=d(t,"cancel",1,[]);qt(e,i,o,r,l,a,n)}function Mt(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function Bt(e,t){var a,n,i,o,l,s=H(e),c=!1,u=!1,d=!1,p=w((function(e){l=e}));function h(){if(!0===c)return k(void 0);c=!0;var e=P(te(s),(function(e){c=!1;var t=e.done;if(!0===t)return!1===u&&It(i._readableStreamController),void(!1===d&&It(o._readableStreamController));var a=e.value,n=a,r=a;!1===u&&Et(i._readableStreamController,n),!1===d&&Et(o._readableStreamController,r)}));return C(e),k(void 0)}function m(t){if(u=!0,a=t,!0===d){var i=r([a,n]),o=za(e,i);l(o)}return p}function f(t){if(d=!0,n=t,!0===u){var i=r([a,n]),o=za(e,i);l(o)}return p}function b(){}return i=Fa(b,h,m),o=Fa(b,h,f),N(s._closedPromise,(function(e){Rt(i._readableStreamController,e),Rt(o._readableStreamController,e)})),[i,o]}var Wt=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},Ut=function(){function e(){throw new TypeError("ReadableStreamBYOBRequest cannot be used directly")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!1===Qt(this))throw _a("view");return this._view},enumerable:!0,configurable:!0}),e.prototype.respond=function(e){if(!1===Qt(this))throw _a("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");f(this._view.buffer),fa(this._associatedReadableByteStreamController,e)},e.prototype.respondWithNewView=function(e){if(!1===Qt(this))throw _a("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");f(e.buffer),ba(this._associatedReadableByteStreamController,e)},e}(),Vt=function(){function e(){throw new TypeError("ReadableByteStreamController constructor cannot be used directly")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!1===Ht(this))throw xa("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos.peek(),t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),a=Object.create(Ut.prototype);ya(a,this,t),this._byobRequest=a}return this._byobRequest},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!1===Ht(this))throw xa("desiredSize");return ma(this)},enumerable:!0,configurable:!0}),e.prototype.close=function(){if(!1===Ht(this))throw xa("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");da(this)},e.prototype.enqueue=function(e){if(!1===Ht(this))throw xa("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");f(e.buffer),pa(this,e)},e.prototype.error=function(e){if(!1===Ht(this))throw xa("error");ha(this,e)},e.prototype[U]=function(e){if(this._pendingPullIntos.length>0){var t=this._pendingPullIntos.peek();t.bytesFilled=0}ue(this);var a=this._cancelAlgorithm(e);return ua(this),a},e.prototype[V]=function(){var e=this._controlledReadableByteStream;if(this._queueTotalSize>0){var t=this._queue.shift();this._queueTotalSize-=t.byteLength,ta(this);var a=void 0;try{a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}catch(l){return T(l)}return k(I(a,!1,e._reader._forAuthorCode))}var n=this._autoAllocateChunkSize;if(void 0!==n){var i=void 0;try{i=new ArrayBuffer(n)}catch(s){return T(s)}var o={buffer:i,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}var r=Q(e);return Gt(this),r},e}();function Ht(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")}function Qt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function Gt(e){var t=ca(e);if(!1!==t)if(!0!==e._pulling){e._pulling=!0;var a=e._pullAlgorithm();S(a,(function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,Gt(e))}),(function(t){ha(e,t)}))}else e._pullAgain=!0}function Kt(e){aa(e),e._pendingPullIntos=new F}function Yt(e,t){var a=!1;"closed"===e._state&&(a=!0);var n=Xt(t);"default"===t.readerType?G(e,n,a):Ta(e,n,a)}function Xt(e){var t=e.bytesFilled,a=e.elementSize;return new e.ctor(e.buffer,e.byteOffset,t/a)}function Zt(e,t,a,n){e._queue.push({buffer:t,byteOffset:a,byteLength:n}),e._queueTotalSize+=n}function Jt(e,t){var a=t.elementSize,n=t.bytesFilled-t.bytesFilled%a,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+i,r=o-o%a,s=i,c=!1;r>n&&(s=r-t.bytesFilled,c=!0);var u=e._queue;while(s>0){var d=u.peek(),p=Math.min(s,d.byteLength),h=t.byteOffset+t.bytesFilled;l(t.buffer,h,d.buffer,d.byteOffset,p),d.byteLength===p?u.shift():(d.byteOffset+=p,d.byteLength-=p),e._queueTotalSize-=p,ea(e,p,t),s-=p}return c}function ea(e,t,a){aa(e),a.bytesFilled+=t}function ta(e){0===e._queueTotalSize&&!0===e._closeRequested?(ua(e),ja(e._controlledReadableByteStream)):Gt(e)}function aa(e){void 0!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0)}function na(e){while(e._pendingPullIntos.length>0){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos.peek();!0===Jt(e,t)&&(sa(e),Yt(e._controlledReadableByteStream,t))}}function ia(e,t){var a=e._controlledReadableByteStream,n=1;t.constructor!==DataView&&(n=t.constructor.BYTES_PER_ELEMENT);var i=t.constructor,o=m(t.buffer),r={buffer:o,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:n,ctor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(r),ka(a);if("closed"===a._state){var l=new i(r.buffer,r.byteOffset,0);return k(I(l,!0,a._reader._forAuthorCode))}if(e._queueTotalSize>0){if(!0===Jt(e,r)){var s=Xt(r);return ta(e),k(I(s,!1,a._reader._forAuthorCode))}if(!0===e._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return ha(e,c),T(c)}}e._pendingPullIntos.push(r);var u=ka(a);return Gt(e),u}function oa(e,t){t.buffer=m(t.buffer);var a=e._controlledReadableByteStream;if(!0===Sa(a))while(Da(a)>0){var n=sa(e);Yt(a,n)}}function ra(e,t,a){if(a.bytesFilled+t>a.byteLength)throw new RangeError("bytesWritten out of range");if(ea(e,t,a),!(a.bytesFilled<a.elementSize)){sa(e);var n=a.bytesFilled%a.elementSize;if(n>0){var i=a.byteOffset+a.bytesFilled,o=a.buffer.slice(i-n,i);Zt(e,o,0,o.byteLength)}a.buffer=m(a.buffer),a.bytesFilled-=n,Yt(e._controlledReadableByteStream,a),na(e)}}function la(e,t){var a=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream;if("closed"===n._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");oa(e,a)}else ra(e,t,a);Gt(e)}function sa(e){var t=e._pendingPullIntos.shift();return aa(e),t}function ca(e){var t=e._controlledReadableByteStream;if("readable"!==t._state)return!1;if(!0===e._closeRequested)return!1;if(!1===e._started)return!1;if(!0===Y(t)&&K(t)>0)return!0;if(!0===Sa(t)&&Da(t)>0)return!0;var a=ma(e);return a>0}function ua(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function da(e){var t=e._controlledReadableByteStream;if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){var a=e._pendingPullIntos.peek();if(a.bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ha(e,n),n}}ua(e),ja(t)}}function pa(e,t){var a=e._controlledReadableByteStream,n=t.buffer,i=t.byteOffset,o=t.byteLength,r=m(n);if(!0===Y(a))if(0===K(a))Zt(e,r,i,o);else{var l=new Uint8Array(r,i,o);G(a,l,!1)}else!0===Sa(a)?(Zt(e,r,i,o),na(e)):Zt(e,r,i,o);Gt(e)}function ha(e,t){var a=e._controlledReadableByteStream;"readable"===a._state&&(Kt(e),ue(e),ua(e),La(a,t))}function ma(e){var t=e._controlledReadableByteStream,a=t._state;return"errored"===a?null:"closed"===a?0:e._strategyHWM-e._queueTotalSize}function fa(e,t){if(t=Number(t),!1===s(t))throw new RangeError("bytesWritten must be a finite");la(e,t)}function ba(e,t){var a=e._pendingPullIntos.peek();if(a.byteOffset+a.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.byteLength!==t.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");a.buffer=t.buffer,la(e,t.byteLength)}function ga(e,t,a,n,i,o,r){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=void 0,t._queue=t._queueTotalSize=void 0,ue(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=b(o),t._pullAlgorithm=n,t._cancelAlgorithm=i,t._autoAllocateChunkSize=r,t._pendingPullIntos=new F,e._readableStreamController=t;var l=a();S(k(l),(function(){t._started=!0,Gt(t)}),(function(e){ha(t,e)}))}function va(e,t,a){var n=Object.create(Vt.prototype);function i(){return p(t,"start",[n])}var o=d(t,"pull",0,[n]),r=d(t,"cancel",1,[]),l=t.autoAllocateChunkSize;if(void 0!==l&&(l=Number(l),!1===Wt(l)||l<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");ga(e,n,i,o,r,a,l)}function ya(e,t,a){e._associatedReadableByteStreamController=t,e._view=a}function _a(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function xa(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function wa(e,t){void 0===t&&(t=!1);var a=new Oa(e);return a._forAuthorCode=t,a}function ka(e){var t=w((function(t,a){var n={_resolve:t,_reject:a};e._reader._readIntoRequests.push(n)}));return t}function Ta(e,t,a){var n=e._reader,i=n._readIntoRequests.shift();i._resolve(I(t,a,n._forAuthorCode))}function Da(e){return e._reader._readIntoRequests.length}function Sa(e){var t=e._reader;return void 0!==t&&!!Na(t)}var Oa=function(){function e(e){if(!Ea(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Ht(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Ra(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");E(this,e),this._readIntoRequests=new F}return Object.defineProperty(e.prototype,"closed",{get:function(){return Na(this)?this._closedPromise:T(Ca("closed"))},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e){return Na(this)?void 0===this._ownerReadableStream?T(j("cancel")):R(this,e):T(Ca("cancel"))},e.prototype.read=function(e){return Na(this)?void 0===this._ownerReadableStream?T(j("read from")):ArrayBuffer.isView(e)?(f(e.buffer),0===e.byteLength?T(new TypeError("view must have non-zero byteLength")):Pa(this,e)):T(new TypeError("view must be an array buffer view")):T(Ca("read"))},e.prototype.releaseLock=function(){if(!Na(this))throw Ca("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},e}();function Na(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function Pa(e,t){var a=e._ownerReadableStream;return a._disturbed=!0,"errored"===a._state?T(a._storedError):ia(a._readableStreamController,t)}function Ca(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}var Aa=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Ia(this);var a=t.size,n=t.highWaterMark,i=e.type,o=String(i);if("bytes"===o){if(void 0!==a)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===n&&(n=0),n=b(n),va(this,e,n)}else{if(void 0!==i)throw new RangeError("Invalid type is specified");var r=g(a);void 0===n&&(n=1),n=b(n),$t(this,e,n,r)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!1===Ea(this))throw qa("locked");return Ra(this)},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e){return!1===Ea(this)?T(qa("cancel")):!0===Ra(this)?T(new TypeError("Cannot cancel a stream that already has a reader")):za(this,e)},e.prototype.getReader=function(e){var t=(void 0===e?{}:e).mode;if(!1===Ea(this))throw qa("getReader");if(void 0===t)return H(this,!0);if(t=String(t),"byob"===t)return wa(this,!0);throw new RangeError("Invalid mode is specified")},e.prototype.pipeThrough=function(e,t){var a=e.writable,n=e.readable,i=void 0===t?{}:t,o=i.preventClose,r=i.preventAbort,l=i.preventCancel,s=i.signal;if(!1===Ea(this))throw qa("pipeThrough");if(!1===ge(a))throw new TypeError("writable argument to pipeThrough must be a WritableStream");if(!1===Ea(n))throw new TypeError("readable argument to pipeThrough must be a ReadableStream");if(o=Boolean(o),r=Boolean(r),l=Boolean(l),void 0!==s&&!wt(s))throw new TypeError("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Ra(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===ve(a))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var c=Ot(this,a,o,r,l,s);return C(c),n},e.prototype.pipeTo=function(e,t){var a=void 0===t?{}:t,n=a.preventClose,i=a.preventAbort,o=a.preventCancel,r=a.signal;return!1===Ea(this)?T(qa("pipeTo")):!1===ge(e)?T(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(n=Boolean(n),i=Boolean(i),o=Boolean(o),void 0===r||wt(r)?!0===Ra(this)?T(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===ve(e)?T(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ot(this,e,n,i,o,r):T(new TypeError("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},e.prototype.tee=function(){if(!1===Ea(this))throw qa("tee");var e=Bt(this);return r(e)},e.prototype.getIterator=function(e){var t=(void 0===e?{}:e).preventCancel,a=void 0!==t&&t;if(!1===Ea(this))throw qa("getIterator");return ie(this,a)},e}();function Fa(e,t,a,n,i){void 0===n&&(n=1),void 0===i&&(i=function(){return 1});var o=Object.create(Aa.prototype);Ia(o);var r=Object.create(Nt.prototype);return qt(o,r,e,t,a,n,i),o}function Ia(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ea(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function Ra(e){return void 0!==e._reader}function za(e,t){if(e._disturbed=!0,"closed"===e._state)return k(void 0);if("errored"===e._state)return T(e._storedError);ja(e);var n=e._readableStreamController[U](t);return P(n,a)}function ja(e){e._state="closed";var t=e._reader;void 0!==t&&(ee(t)&&(t._readRequests.forEach((function(e){e._resolve(I(void 0,!0,t._forAuthorCode))})),t._readRequests=new F),W(t))}function La(e,t){e._state="errored",e._storedError=t;var a=e._reader;void 0!==a&&(ee(a)?(a._readRequests.forEach((function(e){e._reject(t)})),a._readRequests=new F):(a._readIntoRequests.forEach((function(e){e._reject(t)})),a._readIntoRequests=new F),M(a,t))}function qa(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}"symbol"===typeof t.asyncIterator&&Object.defineProperty(Aa.prototype,t.asyncIterator,{value:Aa.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var $a=function(){function e(e){var t=e.highWaterMark;this.highWaterMark=t}return e.prototype.size=function(e){return e.byteLength},e}(),Ma=function(){function e(e){var t=e.highWaterMark;this.highWaterMark=t}return e.prototype.size=function(){return 1},e}(),Ba=function(){function e(e,t,a){void 0===e&&(e={}),void 0===t&&(t={}),void 0===a&&(a={});var n=t.size,i=t.highWaterMark,o=a.size,r=a.highWaterMark,l=e.writableType;if(void 0!==l)throw new RangeError("Invalid writable type specified");var s=g(n);void 0===i&&(i=1),i=b(i);var c=e.readableType;if(void 0!==c)throw new RangeError("Invalid readable type specified");var u,d=g(o);void 0===r&&(r=0),r=b(r);var h=w((function(e){u=e}));Wa(this,h,i,s,r,d),Xa(this,e);var m=p(e,"start",[this._transformStreamController]);u(m)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!1===Ua(this))throw cn("readable");return this._readable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!1===Ua(this))throw cn("writable");return this._writable},enumerable:!0,configurable:!0}),e}();function Wa(e,t,a,n,i,o){function r(){return t}function l(t){return nn(e,t)}function s(t){return on(e,t)}function c(){return rn(e)}function u(){return ln(e)}function d(t){return Ha(e,t),k(void 0)}e._writable=fe(r,l,c,s,a,n),e._readable=Fa(r,u,d,i,o),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Qa(e,!0),e._transformStreamController=void 0}function Ua(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}function Va(e,t){Rt(e._readable._readableStreamController,t),Ha(e,t)}function Ha(e,t){Za(e._transformStreamController),tt(e._writable._writableStreamController,t),!0===e._backpressure&&Qa(e,!1)}function Qa(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=w((function(t){e._backpressureChangePromise_resolve=t})),e._backpressure=t}var Ga=function(){function e(){throw new TypeError("TransformStreamDefaultController instances cannot be created directly")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!1===Ka(this))throw sn("desiredSize");var e=this._controlledTransformStream._readable._readableStreamController;return zt(e)},enumerable:!0,configurable:!0}),e.prototype.enqueue=function(e){if(!1===Ka(this))throw sn("enqueue");Ja(this,e)},e.prototype.error=function(e){if(!1===Ka(this))throw sn("error");en(this,e)},e.prototype.terminate=function(){if(!1===Ka(this))throw sn("terminate");an(this)},e}();function Ka(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function Ya(e,t,a,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=a,t._flushAlgorithm=n}function Xa(e,t){var a=Object.create(Ga.prototype),n=function(e){try{return Ja(a,e),k(void 0)}catch(t){return T(t)}},i=t.transform;if(void 0!==i){if("function"!==typeof i)throw new TypeError("transform is not a method");n=function(e){return h(i,t,[e,a])}}var o=d(t,"flush",0,[a]);Ya(e,a,n,o)}function Za(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ja(e,t){var a=e._controlledTransformStream,n=a._readable._readableStreamController;if(!1===Lt(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{Et(n,t)}catch(o){throw Ha(a,o),a._readable._storedError}var i=jt(n);i!==a._backpressure&&Qa(a,!0)}function en(e,t){Va(e._controlledTransformStream,t)}function tn(e,t){var a=e._transformAlgorithm(t);return P(a,void 0,(function(t){throw Va(e._controlledTransformStream,t),t}))}function an(e){var t=e._controlledTransformStream,a=t._readable._readableStreamController;!0===Lt(a)&&It(a);var n=new TypeError("TransformStream terminated");Ha(t,n)}function nn(e,t){var a=e._transformStreamController;if(!0===e._backpressure){var n=e._backpressureChangePromise;return P(n,(function(){var n=e._writable,i=n._state;if("erroring"===i)throw n._storedError;return tn(a,t)}))}return tn(a,t)}function on(e,t){return Va(e,t),k(void 0)}function rn(e){var t=e._readable,a=e._transformStreamController,n=a._flushAlgorithm();return Za(a),P(n,(function(){if("errored"===t._state)throw t._storedError;var e=t._readableStreamController;!0===Lt(e)&&It(e)}),(function(a){throw Va(e,a),t._storedError}))}function ln(e){return Qa(e,!1),e._backpressureChangePromise}function sn(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function cn(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.ByteLengthQueuingStrategy=$a,e.CountQueuingStrategy=Ma,e.ReadableStream=Aa,e.TransformStream=Ba,e.WritableStream=he,Object.defineProperty(e,"__esModule",{value:!0})}))},function(e,t,a){a(147),a(118),a(77),a(120);var n=a(43);e.exports=n.Map},function(e,t,a){"use strict";var n=a(148),i=a(152);e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,a){"use strict";var n=a(10),i=a(11),o=a(52),r=a(29),l=a(149),s=a(104),c=a(126),u=a(22),d=a(14),p=a(97),h=a(85),m=a(151);e.exports=function(e,t,a){var f=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),g=f?"set":"add",v=i[e],y=v&&v.prototype,_=v,x={},w=function(e){var t=y[e];r(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(o(e,"function"!=typeof v||!(b||y.forEach&&!d((function(){(new v).entries().next()})))))_=a.getConstructor(t,e,f,g),l.REQUIRED=!0;else if(o(e,!0)){var k=new _,T=k[g](b?{}:-0,1)!=k,D=d((function(){k.has(1)})),S=p((function(e){new v(e)})),O=!b&&d((function(){var e=new v,t=5;while(t--)e[g](t,t);return!e.has(-0)}));S||(_=t((function(t,a){c(t,_,e);var n=m(new v,t,_);return void 0!=a&&s(a,n[g],n,f),n})),_.prototype=y,y.constructor=_),(D||O)&&(w("delete"),w("has"),f&&w("get")),(O||T)&&w(g),b&&y.clear&&delete y.clear}return x[e]=_,n({global:!0,forced:_!=v},x),h(_,e),b||a.setStrong(_,e,f),_}},function(e,t,a){var n=a(39),i=a(22),o=a(23),r=a(27).f,l=a(38),s=a(150),c=l("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(e){r(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},h=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!d(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},m=function(e,t){if(!o(e,c)){if(!d(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},f=function(e){return s&&b.REQUIRED&&d(e)&&!o(e,c)&&p(e),e},b=e.exports={REQUIRED:!1,fastKey:h,getWeakData:m,onFreeze:f};n[c]=!0},function(e,t,a){var n=a(14);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,a){var n=a(22),i=a(87);e.exports=function(e,t,a){var o,r;return i&&"function"==typeof(o=t.constructor)&&o!==a&&n(r=o.prototype)&&r!==a.prototype&&i(e,r),e}},function(e,t,a){"use strict";var n=a(27).f,i=a(71),o=a(124),r=a(62),l=a(126),s=a(104),c=a(79),u=a(125),d=a(13),p=a(149).fastKey,h=a(33),m=h.set,f=h.getterFor;e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,n){l(e,u,t),m(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&s(n,e[c],e,a)})),h=f(t),b=function(e,t,a){var n,i,o=h(e),r=g(e,t);return r?r.value=a:(o.last=r={index:i=p(t,!0),key:t,value:a,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=r),n&&(n.next=r),d?o.size++:e.size++,"F"!==i&&(o.index[i]=r)),e},g=function(e,t){var a,n=h(e),i=p(t);if("F"!==i)return n.index[i];for(a=n.first;a;a=a.next)if(a.key==t)return a};return o(u.prototype,{clear:function(){var e=this,t=h(e),a=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete a[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,a=h(t),n=g(t,e);if(n){var i=n.next,o=n.previous;delete a.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),a.first==n&&(a.first=i),a.last==n&&(a.last=o),d?a.size--:t.size--}return!!n},forEach:function(e){var t,a=h(this),n=r(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),o(u.prototype,a?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),d&&n(u.prototype,"size",{get:function(){return h(this).size}}),u},setStrong:function(e,t,a){var n=t+" Iterator",i=f(t),o=f(n);c(e,t,(function(e,t){m(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},function(e,t,a){a(154),a(118),a(77),a(120);var n=a(43);e.exports=n.Set},function(e,t,a){"use strict";var n=a(148),i=a(152);e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,a){a(118),a(156),a(120);var n=a(43);e.exports=n.WeakMap},function(e,t,a){"use strict";var n,i=a(11),o=a(124),r=a(149),l=a(148),s=a(157),c=a(22),u=a(33).enforce,d=a(34),p=!i.ActiveXObject&&"ActiveXObject"in i,h=Object.isExtensible,m=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},f=e.exports=l("WeakMap",m,s);if(d&&p){n=s.getConstructor(m,"WeakMap",!0),r.REQUIRED=!0;var b=f.prototype,g=b["delete"],v=b.has,y=b.get,_=b.set;o(b,{delete:function(e){if(c(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new n),g.call(this,e)||t.frozen["delete"](e)}return g.call(this,e)},has:function(e){if(c(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new n),v.call(this,e)||t.frozen.has(e)}return v.call(this,e)},get:function(e){if(c(e)&&!h(e)){var t=u(this);return t.frozen||(t.frozen=new n),v.call(this,e)?y.call(this,e):t.frozen.get(e)}return y.call(this,e)},set:function(e,t){if(c(e)&&!h(e)){var a=u(this);a.frozen||(a.frozen=new n),v.call(this,e)?_.call(this,e,t):a.frozen.set(e,t)}else _.call(this,e,t);return this}})}},function(e,t,a){"use strict";var n=a(124),i=a(149).getWeakData,o=a(28),r=a(22),l=a(126),s=a(104),c=a(158),u=a(23),d=a(33),p=d.set,h=d.getterFor,m=c.find,f=c.findIndex,b=0,g=function(e){return e.frozen||(e.frozen=new v)},v=function(){this.entries=[]},y=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var a=y(this,e);a?a[1]=t:this.entries.push([e,t])},delete:function(e){var t=f(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,a,c){var d=e((function(e,n){l(e,d,t),p(e,{type:t,id:b++,frozen:void 0}),void 0!=n&&s(n,e[c],e,a)})),m=h(t),f=function(e,t,a){var n=m(e),r=i(o(t),!0);return!0===r?g(n).set(t,a):r[n.id]=a,e};return n(d.prototype,{delete:function(e){var t=m(this);if(!r(e))return!1;var a=i(e);return!0===a?g(t)["delete"](e):a&&u(a,t.id)&&delete a[t.id]},has:function(e){var t=m(this);if(!r(e))return!1;var a=i(e);return!0===a?g(t).has(e):a&&u(a,t.id)}}),n(d.prototype,a?{get:function(e){var t=m(this);if(r(e)){var a=i(e);return!0===a?g(t).get(e):a?a[t.id]:void 0}},set:function(e,t){return f(this,e,t)}}:{add:function(e){return f(this,e,!0)}}),d}}},function(e,t,a){var n=a(62),i=a(18),o=a(83),r=a(47),l=a(159),s=[].push,c=function(e){var t=1==e,a=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d;return function(h,m,f,b){for(var g,v,y=o(h),_=i(y),x=n(m,f,3),w=r(_.length),k=0,T=b||l,D=t?T(h,w):a?T(h,0):void 0;w>k;k++)if((p||k in _)&&(g=_[k],v=x(g,k,y),e))if(t)D[k]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:s.call(D,g)}else if(u)return!1;return d?-1:c||u?u:D}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,a){var n=a(22),i=a(160),o=a(57),r=o("species");e.exports=function(e,t){var a;return i(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},function(e,t,a){var n=a(19);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,a){a(118),a(162),a(120);var n=a(43);e.exports=n.WeakSet},function(e,t,a){"use strict";var n=a(148),i=a(157);n("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,a){a(164);var n=a(61);e.exports=n("String","codePointAt")},function(e,t,a){"use strict";var n=a(10),i=a(78).codeAt;n({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},function(e,t,a){a(166);var n=a(43);e.exports=n.String.fromCodePoint},function(e,t,a){var n=a(10),i=a(49),o=String.fromCharCode,r=String.fromCodePoint,l=!!r&&1!=r.length;n({target:"String",stat:!0,forced:l},{fromCodePoint:function(e){var t,a=[],n=arguments.length,r=0;while(n>r){if(t=+arguments[r++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");a.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return a.join("")}})},function(e,t,a){a(168),a(118),a(170),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187),a(188),a(189);var n=a(43);e.exports=n.Symbol},function(e,t,a){"use strict";var n=a(10),i=a(14),o=a(160),r=a(22),l=a(83),s=a(47),c=a(93),u=a(159),d=a(169),p=a(57),h=a(135),m=p("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",g=h>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!r(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)},_=!g||!v;n({target:"Array",proto:!0,forced:_},{concat:function(e){var t,a,n,i,o,r=l(this),d=u(r,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?r:arguments[t],y(o)){if(i=s(o.length),p+i>f)throw TypeError(b);for(a=0;a<i;a++,p++)a in o&&c(d,p,o[a])}else{if(p>=f)throw TypeError(b);c(d,p++,o)}return d.length=p,d}})},function(e,t,a){var n=a(14),i=a(57),o=a(135),r=i("species");e.exports=function(e){return o>=51||!n((function(){var t=[],a=t.constructor={};return a[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,a){"use strict";var n=a(10),i=a(11),o=a(42),r=a(37),l=a(13),s=a(58),c=a(59),u=a(14),d=a(23),p=a(160),h=a(22),m=a(28),f=a(83),b=a(17),g=a(21),v=a(16),y=a(71),_=a(73),x=a(44),w=a(171),k=a(51),T=a(12),D=a(27),S=a(15),O=a(26),N=a(29),P=a(36),C=a(35),A=a(39),F=a(38),I=a(57),E=a(172),R=a(173),z=a(85),j=a(33),L=a(158).forEach,q=C("hidden"),$="Symbol",M="prototype",B=I("toPrimitive"),W=j.set,U=j.getterFor($),V=Object[M],H=i.Symbol,Q=o("JSON","stringify"),G=T.f,K=D.f,Y=w.f,X=S.f,Z=P("symbols"),J=P("op-symbols"),ee=P("string-to-symbol-registry"),te=P("symbol-to-string-registry"),ae=P("wks"),ne=i.QObject,ie=!ne||!ne[M]||!ne[M].findChild,oe=l&&u((function(){return 7!=y(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,a){var n=G(V,t);n&&delete V[t],K(e,t,a),n&&e!==V&&K(V,t,n)}:K,re=function(e,t){var a=Z[e]=y(H[M]);return W(a,{type:$,tag:e,description:t}),l||(a.description=t),a},le=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},se=function(e,t,a){e===V&&se(J,t,a),m(e);var n=g(t,!0);return m(a),d(Z,n)?(a.enumerable?(d(e,q)&&e[q][n]&&(e[q][n]=!1),a=y(a,{enumerable:v(0,!1)})):(d(e,q)||K(e,q,v(1,{})),e[q][n]=!0),oe(e,n,a)):K(e,n,a)},ce=function(e,t){m(e);var a=b(t),n=_(a).concat(me(a));return L(n,(function(t){l&&!de.call(a,t)||se(e,t,a[t])})),e},ue=function(e,t){return void 0===t?y(e):ce(y(e),t)},de=function(e){var t=g(e,!0),a=X.call(this,t);return!(this===V&&d(Z,t)&&!d(J,t))&&(!(a||!d(this,t)||!d(Z,t)||d(this,q)&&this[q][t])||a)},pe=function(e,t){var a=b(e),n=g(t,!0);if(a!==V||!d(Z,n)||d(J,n)){var i=G(a,n);return!i||!d(Z,n)||d(a,q)&&a[q][n]||(i.enumerable=!0),i}},he=function(e){var t=Y(b(e)),a=[];return L(t,(function(e){d(Z,e)||d(A,e)||a.push(e)})),a},me=function(e){var t=e===V,a=Y(t?J:b(e)),n=[];return L(a,(function(e){!d(Z,e)||t&&!d(V,e)||n.push(Z[e])})),n};if(s||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=F(e),a=function(e){this===V&&a.call(J,e),d(this,q)&&d(this[q],t)&&(this[q][t]=!1),oe(this,t,v(1,e))};return l&&ie&&oe(V,t,{configurable:!0,set:a}),re(t,e)},N(H[M],"toString",(function(){return U(this).tag})),N(H,"withoutSetter",(function(e){return re(F(e),e)})),S.f=de,D.f=se,T.f=pe,x.f=w.f=he,k.f=me,E.f=function(e){return re(I(e),e)},l&&(K(H[M],"description",{configurable:!0,get:function(){return U(this).description}}),r||N(V,"propertyIsEnumerable",de,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:H}),L(_(ae),(function(e){R(e)})),n({target:$,stat:!0,forced:!s},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var a=H(t);return ee[t]=a,te[a]=t,a},keyFor:function(e){if(!le(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),n({target:"Object",stat:!0,forced:!s,sham:!l},{create:ue,defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:pe}),n({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:he,getOwnPropertySymbols:me}),n({target:"Object",stat:!0,forced:u((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(f(e))}}),Q){var fe=!s||u((function(){var e=H();return"[null]"!=Q([e])||"{}"!=Q({a:e})||"{}"!=Q(Object(e))}));n({target:"JSON",stat:!0,forced:fe},{stringify:function(e,t,a){var n,i=[e],o=1;while(arguments.length>o)i.push(arguments[o++]);if(n=t,(h(t)||void 0!==e)&&!le(e))return p(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!le(t))return t}),i[1]=t,Q.apply(null,i)}})}H[M][B]||O(H[M],B,H[M].valueOf),z(H,$),A[q]=!0},function(e,t,a){var n=a(17),i=a(44).f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return i(e)}catch(t){return r.slice()}};e.exports.f=function(e){return r&&"[object Window]"==o.call(e)?l(e):i(n(e))}},function(e,t,a){var n=a(57);t.f=n},function(e,t,a){var n=a(43),i=a(23),o=a(172),r=a(27).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||r(t,e,{value:o.f(e)})}},function(e,t,a){var n=a(173);n("asyncIterator")},function(e,t,a){"use strict";var n=a(10),i=a(13),o=a(11),r=a(23),l=a(22),s=a(27).f,c=a(40),u=o.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(p,u);var h=p.prototype=u.prototype;h.constructor=p;var m=h.toString,f="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;s(h,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=m.call(e);if(r(d,e))return"";var a=f?t.slice(7,-1):t.replace(b,"$1");return""===a?void 0:a}}),n({global:!0,forced:!0},{Symbol:p})}},function(e,t,a){var n=a(173);n("hasInstance")},function(e,t,a){var n=a(173);n("isConcatSpreadable")},function(e,t,a){var n=a(173);n("iterator")},function(e,t,a){var n=a(173);n("match")},function(e,t,a){var n=a(173);n("matchAll")},function(e,t,a){var n=a(173);n("replace")},function(e,t,a){var n=a(173);n("search")},function(e,t,a){var n=a(173);n("species")},function(e,t,a){var n=a(173);n("split")},function(e,t,a){var n=a(173);n("toPrimitive")},function(e,t,a){var n=a(173);n("toStringTag")},function(e,t,a){var n=a(173);n("unscopables")},function(e,t,a){var n=a(85);n(Math,"Math",!0)},function(e,t,a){var n=a(11),i=a(85);i(n.JSON,"JSON",!0)},function(e,t,a){a(191);var n=a(61);e.exports=n("String","padStart")},function(e,t,a){"use strict";var n=a(10),i=a(192).start,o=a(194);n({target:"String",proto:!0,forced:o},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,a){var n=a(47),i=a(193),o=a(20),r=Math.ceil,l=function(e){return function(t,a,l){var s,c,u=String(o(t)),d=u.length,p=void 0===l?" ":String(l),h=n(a);return h<=d||""==p?u:(s=h-d,c=i.call(p,r(s/p.length)),c.length>s&&(c=c.slice(0,s)),e?u+c:c+u)}};e.exports={start:l(!1),end:l(!0)}},function(e,t,a){"use strict";var n=a(48),i=a(20);e.exports="".repeat||function(e){var t=String(i(this)),a="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(a+=t);return a}},function(e,t,a){var n=a(129);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},function(e,t,a){a(196);var n=a(61);e.exports=n("String","padEnd")},function(e,t,a){"use strict";var n=a(10),i=a(192).end,o=a(194);n({target:"String",proto:!0,forced:o},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,a){a(198);var n=a(43);e.exports=n.Object.values},function(e,t,a){var n=a(10),i=a(199).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,a){var n=a(13),i=a(73),o=a(17),r=a(15).f,l=function(e){return function(t){var a,l=o(t),s=i(l),c=s.length,u=0,d=[];while(c>u)a=s[u++],n&&!r.call(l,a)||d.push(e?[a,l[a]]:l[a]);return d}};e.exports={entries:l(!0),values:l(!1)}},function(e,t,a){a(201);var n=a(43);e.exports=n.Object.entries},function(e,t,a){var n=a(10),i=a(199).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(203),_node_utils=__w_pdfjs_require__(204),_annotation_storage=__w_pdfjs_require__(205),_api_compatibility=__w_pdfjs_require__(206),_canvas=__w_pdfjs_require__(207),_worker_options=__w_pdfjs_require__(209),_is_node=__w_pdfjs_require__(7),_message_handler=__w_pdfjs_require__(210),_metadata=__w_pdfjs_require__(211),_optional_content_config=__w_pdfjs_require__(213),_transport_stream=__w_pdfjs_require__(214),_webgl=__w_pdfjs_require__(215);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){asyncGeneratorStep(o,n,i,r,l,"next",e)}function l(e){asyncGeneratorStep(o,n,i,r,l,"throw",e)}r(void 0)}))}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory,DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory,createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){var t,a=new PDFDocumentLoadingTask;if("string"===typeof e)t={url:e};else if((0,_util.isArrayBuffer)(e))t={data:e};else if(e instanceof PDFDataRangeTransport)t={range:e};else{if("object"!==_typeof(e))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=e}var n=Object.create(null),i=null,o=null;for(var r in t)if("url"!==r||"undefined"===typeof window)if("range"!==r)if("worker"!==r)if("data"!==r||t[r]instanceof Uint8Array)n[r]=t[r];else{var l=t[r];if("string"===typeof l)n[r]=(0,_util.stringToBytes)(l);else if("object"!==_typeof(l)||null===l||isNaN(l.length)){if(!(0,_util.isArrayBuffer)(l))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");n[r]=new Uint8Array(l)}else n[r]=new Uint8Array(l)}else o=t[r];else i=t[r];else n[r]=new URL(t[r],window.location).href;if(n.rangeChunkSize=n.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,Number.isInteger(n.maxImageSize)||(n.maxImageSize=-1),"boolean"!==typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!==typeof n.disableFontFace&&(n.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),"undefined"===typeof n.ownerDocument&&(n.ownerDocument=globalThis.document),"boolean"!==typeof n.disableRange&&(n.disableRange=!1),"boolean"!==typeof n.disableStream&&(n.disableStream=!1),"boolean"!==typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!o){var s={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=s.port?PDFWorker.fromPort(s):new PDFWorker(s),a._worker=o}var c=a.docId;return o.promise.then((function(){if(a.destroyed)throw new Error("Loading aborted");var e=_fetchDocument(o,n,i,c),t=new Promise((function(e){var t;i?t=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,disableRange:n.disableRange,disableStream:n.disableStream},i):n.data||(t=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),e(t)}));return Promise.all([e,t]).then((function(e){var t=_slicedToArray(e,2),i=t[0],r=t[1];if(a.destroyed)throw new Error("Loading aborted");var l=new _message_handler.MessageHandler(c,i,o.port);l.postMessageTransfers=o.postMessageTransfers;var s=new WorkerTransport(l,a,r,n);a._transport=s,l.send("Ready",null)}))}))["catch"](a._capability.reject),a}function _fetchDocument(e,t,a,n){return e.destroyed?Promise.reject(new Error("Worker was destroyed")):(a&&(t.length=a.length,t.initialData=a.initialData,t.progressiveDone=a.progressiveDone),e.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.6.347",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties}).then((function(t){if(e.destroyed)throw new Error("Worker was destroyed");return t})))}var PDFDocumentLoadingTask=function(){var e=0,t=function(){function t(){_classCallCheck(this,t),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(t,[{key:"destroy",value:function(){var e=this;this.destroyed=!0;var t=this._transport?this._transport.destroy():Promise.resolve();return t.then((function(){e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)}))}},{key:"promise",get:function(){return this._capability.promise}}]),t}();return t}(),PDFDataRangeTransport=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.length=t,this.initialData=a,this.progressiveDone=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(e,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,t){var a,n=_createForOfIteratorHelper(this._rangeListeners);try{for(n.s();!(a=n.n()).done;){var i=a.value;i(e,t)}}catch(o){n.e(o)}finally{n.f()}}},{key:"onDataProgress",value:function(e,t){var a=this;this._readyCapability.promise.then((function(){var n,i=_createForOfIteratorHelper(a._progressListeners);try{for(i.s();!(n=i.n()).done;){var o=n.value;o(e,t)}}catch(r){i.e(r)}finally{i.f()}}))}},{key:"onDataProgressiveRead",value:function(e){var t=this;this._readyCapability.promise.then((function(){var a,n=_createForOfIteratorHelper(t._progressiveReadListeners);try{for(n.s();!(a=n.n()).done;){var i=a.value;i(e)}}catch(o){n.e(o)}finally{n.f()}}))}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then((function(){var t,a=_createForOfIteratorHelper(e._progressiveDoneListeners);try{for(a.s();!(t=a.n()).done;){var n=t.value;n()}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function e(t,a){_classCallCheck(this,e),this._pdfInfo=t,this._transport=a}return _createClass(e,[{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){return this._transport.startCleanup()}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"saveDocument",value:function(e){return this._transport.saveDocument(e)}},{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}}]),e}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function e(t,a,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this._pageIndex=t,this._pageInfo=a,this._ownerDocument=i,this._transport=n,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}return _createClass(e,[{key:"getViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,a=e.rotation,n=void 0===a?this.rotate:a,i=e.offsetX,o=void 0===i?0:i,r=e.offsetY,l=void 0===r?0:r,s=e.dontFlip,c=void 0!==s&&s;return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:o,offsetY:l,dontFlip:c})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intent,a=void 0===t?null:t;return this.annotationsPromise&&this.annotationsIntent===a||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,a),this.annotationsIntent=a),this.annotationsPromise}},{key:"render",value:function(e){var t=this,a=e.canvasContext,n=e.viewport,i=e.intent,o=void 0===i?"display":i,r=e.enableWebGL,l=void 0!==r&&r,s=e.renderInteractiveForms,c=void 0!==s&&s,u=e.transform,d=void 0===u?null:u,p=e.imageLayer,h=void 0===p?null:p,m=e.canvasFactory,f=void 0===m?null:m,b=e.background,g=void 0===b?null:b,v=e.annotationStorage,y=void 0===v?null:v,_=e.optionalContentConfigPromise,x=void 0===_?null:_;this._stats&&this._stats.time("Overall");var w="print"===o?"print":"display";this.pendingCleanup=!1,x||(x=this._transport.getOptionalContentConfig());var k=this._intentStates.get(w);k||(k=Object.create(null),this._intentStates.set(w,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);var T=f||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),D=new _webgl.WebGLContext({enable:l});k.displayReadyCapability||(k.displayReadyCapability=(0,_util.createPromiseCapability)(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:w,renderInteractiveForms:!0===c,annotationStorage:y&&y.getAll()||null}));var S=function(e){var a=k.renderTasks.indexOf(O);a>=0&&k.renderTasks.splice(a,1),(t.cleanupAfterRender||"print"===w)&&(t.pendingCleanup=!0),t._tryCleanup(),e?(O.capability.reject(e),t._abortOperatorList({intentState:k,reason:e})):O.capability.resolve(),t._stats&&(t._stats.timeEnd("Rendering"),t._stats.timeEnd("Overall"))},O=new InternalRenderTask({callback:S,params:{canvasContext:a,viewport:n,transform:d,imageLayer:h,background:g},objs:this.objs,commonObjs:this.commonObjs,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:T,webGLContext:D,useRequestAnimationFrame:"print"!==w,pdfBug:this._pdfBug});k.renderTasks||(k.renderTasks=[]),k.renderTasks.push(O);var N=O.task;return Promise.all([k.displayReadyCapability.promise,x]).then((function(e){var a=_slicedToArray(e,2),n=a[0],i=a[1];t.pendingCleanup?S():(t._stats&&t._stats.time("Rendering"),O.initializeGraphics({transparency:n,optionalContentConfig:i}),O.operatorListChanged())}))["catch"](S),N}},{key:"getOperatorList",value:function(){function e(){if(n.operatorList.lastChunk){n.opListReadCapability.resolve(n.operatorList);var e=n.renderTasks.indexOf(t);e>=0&&n.renderTasks.splice(e,1)}}var t,a="oplist",n=this._intentStates.get(a);return n||(n=Object.create(null),this._intentStates.set(a,n)),n.opListReadCapability||(t=Object.create(null),t.operatorListChanged=e,n.opListReadCapability=(0,_util.createPromiseCapability)(),n.renderTasks=[],n.renderTasks.push(t),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:a})),n.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.normalizeWhitespace,a=void 0!==t&&t,n=e.disableCombineTextItems,i=void 0!==n&&n,o=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===a,combineTextItems:!0!==i},{highWaterMark:o,size:function(e){return e.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.streamTextContent(e);return new Promise((function(e,a){function n(){i.read().then((function(t){var a,i=t.value,r=t.done;r?e(o):(Object.assign(o.styles,i.styles),(a=o.items).push.apply(a,_toConsumableArray(i.items)),n())}),a)}var i=t.getReader(),o={items:[],styles:Object.create(null)};n()}))}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;var e,t=[],a=_createForOfIteratorHelper(this._intentStates);try{for(a.s();!(e=a.n()).done;){var n=_slicedToArray(e.value,2),i=n[0],o=n[1];if(this._abortOperatorList({intentState:o,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==i){var r,l=_createForOfIteratorHelper(o.renderTasks);try{for(l.s();!(r=l.n()).done;){var s=r.value;t.push(s.completed),s.cancel()}}catch(c){l.e(c)}finally{l.f()}}}}catch(c){a.e(c)}finally{a.f()}return this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var t,a=_createForOfIteratorHelper(this._intentStates.values());try{for(a.s();!(t=a.n()).done;){var n=t.value,i=n.renderTasks,o=n.operatorList;if(0!==i.length||!o.lastChunk)return!1}}catch(r){a.e(r)}finally{a.f()}return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(e,t){var a=this._intentStates.get(t);a&&(this._stats&&this._stats.timeEnd("Page Request"),a.displayReadyCapability&&a.displayReadyCapability.resolve(e))}},{key:"_renderPageChunk",value:function(e,t){for(var a=0,n=e.length;a<n;a++)t.operatorList.fnArray.push(e.fnArray[a]),t.operatorList.argsArray.push(e.argsArray[a]);t.operatorList.lastChunk=e.lastChunk;for(var i=0;i<t.renderTasks.length;i++)t.renderTasks[i].operatorListChanged();e.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(e){var t=this;(0,_util.assert)(e.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');var a=this._transport.messageHandler.sendWithStream("GetOperatorList",e),n=a.getReader(),i=this._intentStates.get(e.intent);i.streamReader=n;var o=function e(){n.read().then((function(a){var n=a.value,o=a.done;o?i.streamReader=null:t._transport.destroyed||(t._renderPageChunk(n,i),e())}),(function(e){if(i.streamReader=null,!t._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(var a=0;a<i.renderTasks.length;a++)i.renderTasks[a].operatorListChanged();t._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(e);else{if(!i.opListReadCapability)throw e;i.opListReadCapability.reject(e)}}}))};o()}},{key:"_abortOperatorList",value:function(e){var t=this,a=e.intentState,n=e.reason,i=e.force,o=void 0!==i&&i;if((0,_util.assert)(n instanceof Error||"object"===_typeof(n)&&null!==n,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),a.streamReader){if(!o){if(0!==a.renderTasks.length)return;if(n instanceof _display_utils.RenderingCancelledException)return void(a.streamReaderCancelTimeout=setTimeout((function(){t._abortOperatorList({intentState:a,reason:n,force:!0}),a.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(a.streamReader.cancel(new _util.AbortException(n&&n.message)),a.streamReader=null,!this._transport.destroyed){var r,l=_createForOfIteratorHelper(this._intentStates);try{for(l.s();!(r=l.n()).done;){var s=_slicedToArray(r.value,2),c=s[0],u=s[1];if(u===a){this._intentStates["delete"](c);break}}}catch(d){l.e(d)}finally{l.f()}this.cleanup()}}}},{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"stats",get:function(){return this._stats}}]),e}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,e),this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}return _createClass(e,[{key:"postMessage",value:function(e,t){var a=this;function n(e){if("object"!==_typeof(e)||null===e)return e;if(i.has(e))return i.get(e);var a,o;if((a=e.buffer)&&(0,_util.isArrayBuffer)(a)){var r=t&&t.includes(a);return o=r?new e.constructor(a,e.byteOffset,e.byteLength):new e.constructor(e),i.set(e,o),o}for(var l in o=Array.isArray(e)?[]:{},i.set(e,o),e){var s=void 0,c=e;while(!(s=Object.getOwnPropertyDescriptor(c,l)))c=Object.getPrototypeOf(c);if("undefined"!==typeof s.value)if("function"!==typeof s.value)o[l]=n(s.value);else if(e.hasOwnProperty&&e.hasOwnProperty(l))throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(e[l]))}return o}if(this._defer){var i=new WeakMap,o={data:n(e)};this._deferred.then((function(){a._listeners.forEach((function(e){e.call(a,o)}))}))}else this._listeners.forEach((function(t){t.call(a,{data:e})}))}},{key:"addEventListener",value:function(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function(e,t){var a=this._listeners.indexOf(t);this._listeners.splice(a,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),e}();exports.LoopbackPort=LoopbackPort;var PDFWorker=function PDFWorkerClosure(){var pdfWorkerPorts=new WeakMap,isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"===typeof document?"undefined":_typeof(document))&&"currentScript"in document){var pdfjsFilePath=document.currentScript&&document.currentScript.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function _getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if("undefined"!==typeof fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var e;try{e=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(t){}return e||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();var loader=function(){var _ref12=_asyncToGenerator(_regenerator["default"].mark((function _callee(){var mainWorkerMessageHandler,worker;return _regenerator["default"].wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(mainWorkerMessageHandler=getMainThreadWorkerMessageHandler(),!mainWorkerMessageHandler){_context.next=3;break}return _context.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS){_context.next=6;break}return worker=eval("require")(_getWorkerSrc()),_context.abrupt("return",worker.WorkerMessageHandler);case 6:return _context.next=8,(0,_display_utils.loadScript)(_getWorkerSrc());case 8:return _context.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context.stop()}}),_callee)})));return function(){return _ref12.apply(this,arguments)}}();return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(e){var t="importScripts('"+e+"');";return URL.createObjectURL(new Blob([t]))}var PDFWorker=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.name,n=void 0===a?null:a,i=t.port,o=void 0===i?null:i,r=t.verbosity,l=void 0===r?(0,_util.getVerbosityLevel)():r;if(_classCallCheck(this,e),o&&pdfWorkerPorts.has(o))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=n,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=l,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return pdfWorkerPorts.set(o,this),void this._initializeFromPort(o);this._initialize()}return _createClass(e,[{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e=this;if("undefined"!==typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){var t=_getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,t)||(t=createCDNWrapper(new URL(t,window.location).href));var a=new Worker(t),n=new _message_handler.MessageHandler("main","worker",a),i=function(){a.removeEventListener("error",o),n.destroy(),a.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},o=function(){e._webWorker||i()};a.addEventListener("error",o),n.on("test",(function(t){a.removeEventListener("error",o),e.destroyed?i():t?(e._messageHandler=n,e._port=a,e._webWorker=a,t.supportTransfers||(e.postMessageTransfers=!1),e._readyCapability.resolve(),n.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),n.destroy(),a.terminate())})),n.on("ready",(function(t){if(a.removeEventListener("error",o),e.destroyed)i();else try{r()}catch(n){e._setupFakeWorker()}}));var r=function(){var t=new Uint8Array([e.postMessageTransfers?255:0]);try{n.send("test",t,[t.buffer])}catch(a){(0,_util.warn)("Cannot use postMessage transfers."),t[0]=0,n.send("test",t)}};return void r()}catch(l){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var a=new LoopbackPort;e._port=a;var n="fake"+nextFakeWorkerId++,i=new _message_handler.MessageHandler(n+"_worker",n,a);t.setup(i,a);var o=new _message_handler.MessageHandler(n,n+"_worker",a);e._messageHandler=o,e._readyCapability.resolve(),o.send("configure",{verbosity:e.verbosity})}}))["catch"]((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts["delete"](this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}}],[{key:"fromPort",value:function(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new e(t)}},{key:"getWorkerSrc",value:function(){return _getWorkerSrc()}}]),e}();return PDFWorker}();exports.PDFWorker=PDFWorker;var WorkerTransport=function(){function e(t,a,n,i){_classCallCheck(this,e),this.messageHandler=t,this.loadingTask=a,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:a.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument}),this._params=i,this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(e,[{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var t=[];this.pageCache.forEach((function(e){e&&t.push(e._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;var a=this.messageHandler.sendWithPromise("Terminate",null);return t.push(a),Promise.all(t).then((function(){e.fontLoader.clear(),e._networkStream&&e._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this,t=this.messageHandler,a=this.loadingTask;t.on("GetReader",(function(t,a){(0,_util.assert)(e._networkStream,"GetReader - no `IPDFStream` instance available."),e._fullReader=e._networkStream.getFullReader(),e._fullReader.onProgress=function(t){e._lastProgress={loaded:t.loaded,total:t.total}},a.onPull=function(){e._fullReader.read().then((function(e){var t=e.value,n=e.done;n?a.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(t),1,[t]))}))["catch"]((function(e){a.error(e)}))},a.onCancel=function(t){e._fullReader.cancel(t),a.ready["catch"]((function(t){if(!e.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(function(t){var n=(0,_util.createPromiseCapability)(),i=e._fullReader;return i.headersReady.then((function(){i.isStreamingSupported&&i.isRangeSupported||(e._lastProgress&&a.onProgress&&a.onProgress(e._lastProgress),i.onProgress=function(e){a.onProgress&&a.onProgress({loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),n.reject),n.promise})),t.on("GetRangeReader",(function(t,a){(0,_util.assert)(e._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var n=e._networkStream.getRangeReader(t.begin,t.end);n?(a.onPull=function(){n.read().then((function(e){var t=e.value,n=e.done;n?a.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(t),1,[t]))}))["catch"]((function(e){a.error(e)}))},a.onCancel=function(t){n.cancel(t),a.ready["catch"]((function(t){if(!e.destroyed)throw t}))}):a.close()})),t.on("GetDoc",(function(t){var n=t.pdfInfo;e._numPages=n.numPages,a._capability.resolve(new PDFDocumentProxy(n,e))})),t.on("DocException",(function(e){var t;switch(e.name){case"PasswordException":t=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":t=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":t=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":t=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":t=new _util.UnknownErrorException(e.message,e.details);break}if(!(t instanceof Error)){var n="DocException - expected a valid Error.";(0,_util.warn)(n)}a._capability.reject(t)})),t.on("PasswordRequest",(function(t){if(e._passwordCapability=(0,_util.createPromiseCapability)(),a.onPassword){var n=function(t){e._passwordCapability.resolve({password:t})};try{a.onPassword(n,t.code)}catch(i){e._passwordCapability.reject(i)}}else e._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return e._passwordCapability.promise})),t.on("DataLoaded",(function(t){a.onProgress&&a.onProgress({loaded:t.length,total:t.length}),e.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(function(t){if(!e.destroyed){var a=e.pageCache[t.pageIndex];a._startRenderPage(t.transparency,t.intent)}})),t.on("commonobj",(function(a){if(!e.destroyed){var n=_slicedToArray(a,3),i=n[0],o=n[1],r=n[2];if(!e.commonObjs.has(i))switch(o){case"Font":var l=e._params;if("error"in r){var s=r.error;(0,_util.warn)("Error during font loading: ".concat(s)),e.commonObjs.resolve(i,s);break}var c=null;l.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(c={registerFont:function(e,t){globalThis.FontInspector.fontAdded(e,t)}});var u=new _font_loader.FontFaceObject(r,{isEvalSupported:l.isEvalSupported,disableFontFace:l.disableFontFace,ignoreErrors:l.ignoreErrors,onUnsupportedFeature:e._onUnsupportedFeature.bind(e),fontRegistry:c});e.fontLoader.bind(u)["catch"]((function(e){return t.sendWithPromise("FontFallback",{id:i})}))["finally"]((function(){!l.fontExtraProperties&&u.data&&(u.data=null),e.commonObjs.resolve(i,u)}));break;case"FontPath":case"Image":e.commonObjs.resolve(i,r);break;default:throw new Error("Got unknown common object type ".concat(o))}}})),t.on("obj",(function(t){if(!e.destroyed){var a=_slicedToArray(t,4),n=a[0],i=a[1],o=a[2],r=a[3],l=e.pageCache[i];if(!l.objs.has(n))switch(o){case"Image":l.objs.resolve(n,r);var s=8e6;r&&"data"in r&&r.data.length>s&&(l.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(o))}}})),t.on("DocProgress",(function(t){e.destroyed||a.onProgress&&a.onProgress({loaded:t.loaded,total:t.total})})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(function(t,a){if(e.destroyed)a.error(new Error("Worker was destroyed"));else{var n=!1;a.onPull=function(){n?a.close():(n=!0,e.CMapReaderFactory.fetch(t).then((function(e){a.enqueue(e,1,[e.cMapData.buffer])}))["catch"]((function(e){a.error(e)})))}}}))}},{key:"_onUnsupportedFeature",value:function(e){var t=e.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var t=this;if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));var a=e-1;if(a in this.pagePromises)return this.pagePromises[a];var n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then((function(e){if(t.destroyed)throw new Error("Transport destroyed");var n=new PDFPageProxy(a,e,t,t._params.ownerDocument,t._params.pdfBug);return t.pageCache[a]=n,n}));return this.pagePromises[a]=n,n}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e})["catch"]((function(e){return Promise.reject(new Error(e))}))}},{key:"getAnnotations",value:function(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"saveDocument",value:function(e){return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:e&&e.getAll()||null,filename:this._fullReader?this._fullReader.filename:null})["finally"]((function(){e&&e.resetModified()}))}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(e){return new _optional_content_config.OptionalContentConfig(e)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(t){return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:e._fullReader?e._fullReader.filename:null}}))}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function(){var e=this;return this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var t=0,a=e.pageCache.length;t<a;t++){var n=e.pageCache[t];if(n){var i=n.cleanup();if(!i)throw new Error("startCleanup: Page ".concat(t+1," is currently rendering."))}}e.commonObjs.clear(),e.fontLoader.clear()}))}},{key:"loadingParams",get:function(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}]),e}(),PDFObjects=function(){function e(){_classCallCheck(this,e),this._objs=Object.create(null)}return _createClass(e,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return this._ensureObj(e).capability.promise.then(t),null;var a=this._objs[e];if(!a||!a.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return a.data}},{key:"has",value:function(e){var t=this._objs[e];return!!t&&t.resolved}},{key:"resolve",value:function(e,t){var a=this._ensureObj(e);a.resolved=!0,a.data=t,a.capability.resolve(t)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),e}(),RenderTask=function(){function e(t){_classCallCheck(this,e),this._internalRenderTask=t,this.onContinue=null}return _createClass(e,[{key:"cancel",value:function(){this._internalRenderTask.cancel()}},{key:"promise",get:function(){return this._internalRenderTask.capability.promise}}]),e}(),InternalRenderTask=function(){var e=new WeakSet,t=function(){function t(e){var a=e.callback,n=e.params,i=e.objs,o=e.commonObjs,r=e.operatorList,l=e.pageIndex,s=e.canvasFactory,c=e.webGLContext,u=e.useRequestAnimationFrame,d=void 0!==u&&u,p=e.pdfBug,h=void 0!==p&&p;_classCallCheck(this,t),this.callback=a,this.params=n,this.objs=i,this.commonObjs=o,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=l,this.canvasFactory=s,this.webGLContext=c,this._pdfBug=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}return _createClass(t,[{key:"initializeGraphics",value:function(t){var a=t.transparency,n=void 0!==a&&a,i=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var o=this.params,r=o.canvasContext,l=o.viewport,s=o.transform,c=o.imageLayer,u=o.background;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,c,i),this.gfx.beginDrawing({transform:s,viewport:l,transparency:n,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&e["delete"](this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){e._nextBound()["catch"](e.cancel.bind(e))})):Promise.resolve().then(this._nextBound)["catch"](this.cancel.bind(this))}},{key:"_next",value:function(){var t=_asyncToGenerator(_regenerator["default"].mark((function t(){return _regenerator["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&e["delete"](this._canvas),this.callback()));case 4:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}()},{key:"completed",get:function(){return this.capability.promise["catch"]((function(){}))}}]),t}();return t}(),version="2.6.347";exports.version=version;var build="3be9c65f";exports.build=build},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=o(a(2)),i=a(5);function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=p();return function(){var a,n=h(e);if(t){var i=h(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){m(o,n,i,r,l,"next",e)}function l(e){m(o,n,i,r,l,"throw",e)}r(void 0)}))}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,a){return t&&g(e.prototype,t),a&&g(e,a),e}var y,_=function(){function e(t){var a=t.docId,n=t.onUnsupportedFeature,o=t.ownerDocument,r=void 0===o?globalThis.document:o;b(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=a,this._onUnsupportedFeature=n,this._document=r,this.nativeFontFaces=[],this.styleElement=null}return v(e,[{key:"addNativeFontFace",value:function(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}},{key:"insertRule",value:function(e){var t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));var a=t.sheet;a.insertRule(e,a.cssRules.length)}},{key:"clear",value:function(){var e=this;this.nativeFontFaces.forEach((function(t){e._document.fonts["delete"](t)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var e=f(n["default"].mark((function e(t){var a,o,r=this;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.attached&&!t.missingFile){e.next=2;break}return e.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){e.next=19;break}if(a=t.createNativeFontFace(),!a){e.next=18;break}return this.addNativeFontFace(a),e.prev=7,e.next=10,a.loaded;case 10:e.next=18;break;case 12:throw e.prev=12,e.t0=e["catch"](7),this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)("Failed to load font '".concat(a.family,"': '").concat(e.t0,"'.")),t.disableFontFace=!0,e.t0;case 18:return e.abrupt("return");case 19:if(o=t.createFontFaceRule(),!o){e.next=26;break}if(this.insertRule(o),!this.isSyncFontLoadingSupported){e.next=24;break}return e.abrupt("return");case 24:return e.next=26,new Promise((function(e){var a=r._queueLoadingCallback(e);r._prepareFontLoadEvent([o],[t],a)}));case 26:case"end":return e.stop()}}),e,this,[[7,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_queueLoadingCallback",value:function(e){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function(e,t,a){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function(){var e="undefined"!==typeof this._document&&!!this._document.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",e)}},{key:"isSyncFontLoadingSupported",get:function(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}}]),e}();t.FontLoader=y,t.FontLoader=y=function(e){l(a,e);var t=c(a);function a(e){var n;return b(this,a),n=t.call(this,e),n.loadingContext={requests:[],nextRequestId:0},n.loadTestFontId=0,n}return v(a,[{key:"_queueLoadingCallback",value:function(e){function t(){(0,i.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;while(a.requests.length>0&&a.requests[0].done){var e=a.requests.shift();setTimeout(e.callback,0)}}var a=this.loadingContext,n={id:"pdfjs-font-loading-".concat(a.nextRequestId++),done:!1,complete:t,callback:e};return a.requests.push(n),n}},{key:"_prepareFontLoadEvent",value:function(e,t,a){var n,o,r=this;function l(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function s(e,t,a,n){var i=e.substring(0,t),o=e.substring(t+a);return i+n+o}var c=this._document.createElement("canvas");c.width=1,c.height=1;var u=c.getContext("2d"),d=0;function p(e,t){if(d++,d>30)return(0,i.warn)("Load test font never loaded."),void t();u.font="30px "+e,u.fillText(".",0,20);var a=u.getImageData(0,0,1,1);a.data[3]>0?t():setTimeout(p.bind(null,e,t))}var h="lt".concat(Date.now()).concat(this.loadTestFontId++),m=this._loadTestFont,f=976;m=s(m,f,h.length,h);var b=16,g=1482184792,v=l(m,b);for(n=0,o=h.length-3;n<o;n+=4)v=v-g+l(h,n)|0;n<h.length&&(v=v-g+l(h+"XXX",n)|0),m=s(m,b,4,(0,i.string32)(v));var y="url(data:font/opentype;base64,".concat(btoa(m),");"),_='@font-face {font-family:"'.concat(h,'";src:').concat(y,"}");this.insertRule(_);var x=[];for(n=0,o=t.length;n<o;n++)x.push(t[n].loadedName);x.push(h);var w=this._document.createElement("div");for(w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px",n=0,o=x.length;n<o;++n){var k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=x[n],w.appendChild(k)}this._document.body.appendChild(w),p(h,(function(){r._document.body.removeChild(w),a.complete()}))}},{key:"isSyncFontLoadingSupported",get:function(){var e=!1;if("undefined"===typeof navigator)e=!0;else{var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);t&&t[1]>=14&&(e=!0)}return(0,i.shadow)(this,"isSyncFontLoadingSupported",e)}},{key:"_loadTestFont",get:function(){var e=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,i.shadow)(this,"_loadTestFont",e())}}]),a}(_);var x=function(){function e(t,a){var n=a.isEvalSupported,i=void 0===n||n,o=a.disableFontFace,r=void 0!==o&&o,l=a.ignoreErrors,s=void 0!==l&&l,c=a.onUnsupportedFeature,u=void 0===c?null:c,d=a.fontRegistry,p=void 0===d?null:d;for(var h in b(this,e),this.compiledGlyphs=Object.create(null),t)this[h]=t[h];this.isEvalSupported=!1!==i,this.disableFontFace=!0===r,this.ignoreErrors=!0===s,this._onUnsupportedFeature=u,this.fontRegistry=p}return v(e,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var e=(0,i.bytesToString)(new Uint8Array(this.data)),t="url(data:".concat(this.mimetype,";base64,").concat(btoa(e),");"),a='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,t),a}},{key:"getPathGenerator",value:function(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];var a,n;try{a=e.get(this.loadedName+"_path_"+t)}catch(c){if(!this.ignoreErrors)throw c;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)('getPathGenerator - ignoring character: "'.concat(c,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&i.IsEvalSupportedCached.value){for(var o,r="",l=0,s=a.length;l<s;l++)n=a[l],o=void 0!==n.args?n.args.join(","):"",r+="c."+n.cmd+"("+o+");\n";return this.compiledGlyphs[t]=new Function("c","size",r)}return this.compiledGlyphs[t]=function(e,t){for(var i=0,o=a.length;i<o;i++)n=a[i],"scale"===n.cmd&&(n.args=[t,-t]),e[n.cmd].apply(e,n.args)}}}]),e}();t.FontFaceObject=x},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeCMapReaderFactory=t.NodeCanvasFactory=void 0;var n=a(1),i=a(7),o=a(5);function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){var t=m();return function(){var a,n=f(e);if(t){var i=f(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return p(this,a)}}function p(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=function e(){b(this,e),(0,o.unreachable)("Not implemented: NodeCanvasFactory")};t.NodeCanvasFactory=g;var v=function e(){b(this,e),(0,o.unreachable)("Not implemented: NodeCMapReaderFactory")};t.NodeCMapReaderFactory=v,i.isNodeJS&&(t.NodeCanvasFactory=g=function(e){c(a,e);var t=d(a);function a(){return b(this,a),t.apply(this,arguments)}return s(a,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var a=__webpack_require__(2),n=a.createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}}]),a}(n.BaseCanvasFactory),t.NodeCMapReaderFactory=v=function(e){c(a,e);var t=d(a);function a(){return b(this,a),t.apply(this,arguments)}return s(a,[{key:"_fetchData",value:function(e,t){return new Promise((function(a,n){var i=__webpack_require__(1);i.readFile(e,(function(e,i){!e&&i?a({cMapData:new Uint8Array(i),compressionType:t}):n(new Error(e))}))}))}}]),a}(n.BaseCMapReaderFactory))},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationStorage=void 0;var r=function(){function e(){n(this,e),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}return o(e,[{key:"getOrCreateValue",value:function(e,t){return this._storage.has(e)?this._storage.get(e):(this._storage.set(e,t),t)}},{key:"setValue",value:function(e,t){this._storage.get(e)!==t&&this._setModified(),this._storage.set(e,t)}},{key:"getAll",value:function(){return 0===this._storage.size?null:Object.fromEntries(this._storage)}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,"function"===typeof this.onSetModified&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,"function"===typeof this.onResetModified&&this.onResetModified())}},{key:"size",get:function(){return this._storage.size}}]),e}();t.AnnotationStorage=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiCompatibilityParams=void 0;var n=a(7),i=Object.create(null);(function(){n.isNodeJS&&(i.disableFontFace=!0)})();var o=Object.freeze(i);t.apiCompatibilityParams=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=a(5),i=a(208);function o(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=r(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==a["return"]||a["return"]()}finally{if(s)throw o}}}}function r(e,t){if(e){if("string"===typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var s=16,c=100,u=4096,d=.65,p=!0,h=1e3,m=16;function f(e){e.mozCurrentTransform||(e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[],Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var e=this._transformMatrix,t=e[0],a=e[1],n=e[2],i=e[3],o=e[4],r=e[5],l=t*i-a*n,s=a*n-t*i;return[i/l,a/s,n/s,t/l,(i*o-n*r)/s,(a*o-t*r)/l]}}),e.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){var a=this._transformMatrix;a[4]=a[0]*e+a[2]*t+a[4],a[5]=a[1]*e+a[3]*t+a[5],this._originalTranslate(e,t)},e.scale=function(e,t){var a=this._transformMatrix;a[0]=a[0]*e,a[1]=a[1]*e,a[2]=a[2]*t,a[3]=a[3]*t,this._originalScale(e,t)},e.transform=function(t,a,n,i,o,r){var l=this._transformMatrix;this._transformMatrix=[l[0]*t+l[2]*a,l[1]*t+l[3]*a,l[0]*n+l[2]*i,l[1]*n+l[3]*i,l[0]*o+l[2]*r+l[4],l[1]*o+l[3]*r+l[5]],e._originalTransform(t,a,n,i,o,r)},e.setTransform=function(t,a,n,i,o,r){this._transformMatrix=[t,a,n,i,o,r],e._originalSetTransform(t,a,n,i,o,r)},e.rotate=function(e){var t=Math.cos(e),a=Math.sin(e),n=this._transformMatrix;this._transformMatrix=[n[0]*t+n[2]*a,n[1]*t+n[3]*a,n[0]*-a+n[2]*t,n[1]*-a+n[3]*t,n[4],n[5]],this._originalRotate(e)})}var b=function(){function e(e){this.canvasFactory=e,this.cache=Object.create(null)}return e.prototype={getCanvas:function(e,t,a,n){var i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,a),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(t,a),this.cache[e]=i),n&&f(i.context),i},clear:function(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}},e}();function g(e){var t,a,n,i,o=1e3,r=e.width,l=e.height,s=r+1,c=new Uint8Array(s*(l+1)),u=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=r+7&-8,p=e.data,h=new Uint8Array(d*l),m=0;for(t=0,i=p.length;t<i;t++){var f=128,b=p[t];while(f>0)h[m++]=b&f?0:255,f>>=1}var g=0;for(m=0,0!==h[m]&&(c[0]=1,++g),a=1;a<r;a++)h[m]!==h[m+1]&&(c[a]=h[m]?2:1,++g),m++;for(0!==h[m]&&(c[a]=2,++g),t=1;t<l;t++){m=t*d,n=t*s,h[m-d]!==h[m]&&(c[n]=h[m]?1:8,++g);var v=(h[m]?4:0)+(h[m-d]?8:0);for(a=1;a<r;a++)v=(v>>2)+(h[m+1]?4:0)+(h[m-d+1]?8:0),u[v]&&(c[n+a]=u[v],++g),m++;if(h[m-d]!==h[m]&&(c[n+a]=h[m]?2:4,++g),g>o)return null}for(m=d*(l-1),n=t*s,0!==h[m]&&(c[n]=8,++g),a=1;a<r;a++)h[m]!==h[m+1]&&(c[n+a]=h[m]?4:8,++g),m++;if(0!==h[m]&&(c[n+a]=4,++g),g>o)return null;var y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),_=[];for(t=0;g&&t<=l;t++){var x=t*s,w=x+r;while(x<w&&!c[x])x++;if(x!==w){var k,T=[x%s,t],D=c[x],S=x;do{var O=y[D];do{x+=O}while(!c[x]);k=c[x],5!==k&&10!==k?(D=k,c[x]=0):(D=k&51*D>>4,c[x]&=D>>2|D<<2),T.push(x%s),T.push(x/s|0),c[x]||--g}while(S!==x);_.push(T),--t}}var N=function(e){e.save(),e.scale(1/r,-1/l),e.translate(0,-l),e.beginPath();for(var t=0,a=_.length;t<a;t++){var n=_[t];e.moveTo(n[0],n[1]);for(var i=2,o=n.length;i<o;i+=2)e.lineTo(n[i],n[i+1])}e.fill(),e.beginPath(),e.restore()};return N}var v=function(){function e(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}(),y=function(){var e=15,t=10;function a(e,t,a,n,i,o,r){this.ctx=e,this.current=new v,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=a,this.canvasFactory=n,this.webGLContext=i,this.imageLayer=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=r,this.cachedCanvases=new b(this.canvasFactory),e&&f(e),this._cachedGetSinglePixelWidth=null}function r(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!==typeof ImageData&&t instanceof ImageData)e.putImageData(t,0,0);else{var i,o,r,l,s,c,u,d,p,h=t.height,f=t.width,b=h%m,g=(h-b)/m,v=0===b?g:g+1,y=e.createImageData(f,m),_=0,x=t.data,w=y.data;if(a)switch(a.length){case 1:c=a[0],u=a[0],d=a[0],p=a[0];break;case 4:c=a[0],u=a[1],d=a[2],p=a[3];break}if(t.kind===n.ImageKind.GRAYSCALE_1BPP){var k=x.byteLength,T=new Uint32Array(w.buffer,0,w.byteLength>>2),D=T.length,S=f+7>>3,O=4294967295,N=n.IsLittleEndianCached.value?4278190080:255;if(p&&255===p[0]&&0===p[255]){var P=[N,O];O=P[0],N=P[1]}for(o=0;o<v;o++){for(l=o<g?m:b,i=0,r=0;r<l;r++){for(var C=k-_,A=0,F=C>S?f:8*C-7,I=-8&F,E=0,R=0;A<I;A+=8)R=x[_++],T[i++]=128&R?O:N,T[i++]=64&R?O:N,T[i++]=32&R?O:N,T[i++]=16&R?O:N,T[i++]=8&R?O:N,T[i++]=4&R?O:N,T[i++]=2&R?O:N,T[i++]=1&R?O:N;for(;A<F;A++)0===E&&(R=x[_++],E=128),T[i++]=R&E?O:N,E>>=1}while(i<D)T[i++]=0;e.putImageData(y,0,o*m)}}else if(t.kind===n.ImageKind.RGBA_32BPP){var z=!!(c||u||d);for(r=0,s=f*m*4,o=0;o<g;o++){if(w.set(x.subarray(_,_+s)),_+=s,z)for(var j=0;j<s;j+=4)c&&(w[j+0]=c[w[j+0]]),u&&(w[j+1]=u[w[j+1]]),d&&(w[j+2]=d[w[j+2]]);e.putImageData(y,0,r),r+=m}if(o<v){if(s=f*b*4,w.set(x.subarray(_,_+s)),z)for(var L=0;L<s;L+=4)c&&(w[L+0]=c[w[L+0]]),u&&(w[L+1]=u[w[L+1]]),d&&(w[L+2]=d[w[L+2]]);e.putImageData(y,0,r)}}else{if(t.kind!==n.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));var q=!!(c||u||d);for(l=m,s=f*l,o=0;o<v;o++){for(o>=g&&(l=b,s=f*l),i=0,r=s;r--;)w[i++]=x[_++],w[i++]=x[_++],w[i++]=x[_++],w[i++]=255;if(q)for(var $=0;$<i;$+=4)c&&(w[$+0]=c[w[$+0]]),u&&(w[$+1]=u[w[$+1]]),d&&(w[$+2]=d[w[$+2]]);e.putImageData(y,0,o*m)}}}}function l(e,t){for(var a=t.height,n=t.width,i=a%m,o=(a-i)/m,r=0===i?o:o+1,l=e.createImageData(n,m),s=0,c=t.data,u=l.data,d=0;d<r;d++){for(var p=d<o?m:i,h=3,f=0;f<p;f++)for(var b=0,g=0;g<n;g++){if(!b){var v=c[s++];b=128}u[h]=v&b?0:255,h+=4,b>>=1}e.putImageData(l,0,d*m)}}function y(e,t){for(var a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,i=a.length;n<i;n++){var o=a[n];void 0!==e[o]&&(t[o]=e[o])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function _(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function x(e,t,a,n){for(var i=e.length,o=3;o<i;o+=4){var r=e[o];if(0===r)e[o-3]=t,e[o-2]=a,e[o-1]=n;else if(r<255){var l=255-r;e[o-3]=e[o-3]*r+t*l>>8,e[o-2]=e[o-2]*r+a*l>>8,e[o-1]=e[o-1]*r+n*l>>8}}}function w(e,t,a){for(var n=e.length,i=1/255,o=3;o<n;o+=4){var r=a?a[e[o]]:e[o];t[o]=t[o]*r*i|0}}function k(e,t,a){for(var n=e.length,i=3;i<n;i+=4){var o=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=a?t[i]*a[o>>8]>>8:t[i]*o>>16}}function T(e,t,a,n,i,o,r){var l,s=!!o,c=s?o[0]:0,u=s?o[1]:0,d=s?o[2]:0;l="Luminosity"===i?k:w;for(var p=1048576,h=Math.min(n,Math.ceil(p/a)),m=0;m<n;m+=h){var f=Math.min(h,n-m),b=e.getImageData(0,m,a,f),g=t.getImageData(0,m,a,f);s&&x(b.data,c,u,d),l(b.data,g.data,r),e.putImageData(g,0,m)}}function D(e,t,a,n){var i=t.canvas,o=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);var r=t.backdrop||null;if(!t.transferMap&&n.isEnabled){var l=n.composeSMask({layer:a.canvas,mask:i,properties:{subtype:t.subtype,backdrop:r}});return e.setTransform(1,0,0,1,0,0),void e.drawImage(l,t.offsetX,t.offsetY)}T(o,a,i.width,i.height,t.subtype,r,t.transferMap),e.drawImage(i,0,0)}var S=["butt","round","square"],O=["miter","round","bevel"],N={},P={};for(var C in a.prototype={beginDrawing:function(e){var t=e.transform,a=e.viewport,n=e.transparency,i=void 0!==n&&n,o=e.background,r=void 0===o?null:o,l=this.ctx.canvas.width,s=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=r||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,l,s),this.ctx.restore(),i){var c=this.cachedCanvases.getCanvas("transparent",l,s,!0);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),_(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,a.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,i,r,l){var s=a.argsArray,c=a.fnArray,u=i||0,d=s.length;if(d===u)return u;var p,h=d-u>t&&"function"===typeof r,m=h?Date.now()+e:0,f=0,b=this.commonObjs,g=this.objs;while(1){if(void 0!==l&&u===l.nextBreakPoint)return l.breakIt(u,r),u;if(p=c[u],p!==n.OPS.dependency)this[p].apply(this,s[u]);else{var v,y=o(s[u]);try{for(y.s();!(v=y.n()).done;){var _=v.value,x=_.startsWith("g_")?b:g;if(!x.has(_))return x.get(_,r),u}}catch(w){y.e(w)}finally{y.f()}}if(u++,u===d)return u;if(h&&++f>t){if(Date.now()>m)return r(),u;f=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=S[e]},setLineJoin:function(e){this.ctx.lineJoin=O[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){var a=this.ctx;void 0!==a.setLineDash&&(a.setLineDash(e),a.lineDashOffset=t)},setRenderingIntent:function(e){},setFlatness:function(e){},setGState:function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],i=n[0],o=n[1];switch(i){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o[0],o[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=o;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=o?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=o}}},beginSMaskGroup:function(){var e=this.current.activeSMask,t=e.canvas.width,a=e.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,a,!0),o=this.ctx,r=o.mozCurrentTransform;this.ctx.save();var l=i.context;l.scale(1/e.scaleX,1/e.scaleY),l.translate(-e.offsetX,-e.offsetY),l.transform.apply(l,r),e.startTransformInverse=l.mozCurrentTransformInverse,y(o,l),this.ctx=l,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++},suspendSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),D(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),this.ctx.save(),y(e,this.ctx),this.current.resumeSMaskCtx=e;var t=n.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},resumeSMaskGroup:function(){var e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e,this.groupStack.push(t),this.groupLevel++},endSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),D(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),y(e,this.ctx);var t=n.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t)},save:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(e,t,a,n,i,o){this.ctx.transform(e,t,a,n,i,o),this._cachedGetSinglePixelWidth=null},constructPath:function(e,t){for(var a=this.ctx,i=this.current,o=i.x,r=i.y,l=0,s=0,c=e.length;l<c;l++)switch(0|e[l]){case n.OPS.rectangle:o=t[s++],r=t[s++];var u=t[s++],d=t[s++];0===u&&a.lineWidth<this.getSinglePixelWidth()&&(u=this.getSinglePixelWidth()),0===d&&a.lineWidth<this.getSinglePixelWidth()&&(d=this.getSinglePixelWidth());var p=o+u,h=r+d;a.moveTo(o,r),a.lineTo(p,r),a.lineTo(p,h),a.lineTo(o,h),a.lineTo(o,r),a.closePath();break;case n.OPS.moveTo:o=t[s++],r=t[s++],a.moveTo(o,r);break;case n.OPS.lineTo:o=t[s++],r=t[s++],a.lineTo(o,r);break;case n.OPS.curveTo:o=t[s+4],r=t[s+5],a.bezierCurveTo(t[s],t[s+1],t[s+2],t[s+3],o,r),s+=6;break;case n.OPS.curveTo2:a.bezierCurveTo(o,r,t[s],t[s+1],t[s+2],t[s+3]),o=t[s+2],r=t[s+3],s+=4;break;case n.OPS.curveTo3:o=t[s+2],r=t[s+3],a.bezierCurveTo(t[s],t[s+1],o,r,o,r),s+=4;break;case n.OPS.closePath:a.closePath();break}i.setCurrentPoint(o,r)},closePath:function(){this.ctx.closePath()},stroke:function(e){e="undefined"===typeof e||e;var t=this.ctx,a=this.current.strokeColor;if(t.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(a&&a.hasOwnProperty("type")&&"Pattern"===a.type){t.save();var i=t.mozCurrentTransform,o=n.Util.singularValueDecompose2dScale(i)[0];t.strokeStyle=a.getPattern(t,this),t.lineWidth=Math.max(this.getSinglePixelWidth()*d,this.current.lineWidth*o),t.stroke(),t.restore()}else t.lineWidth=Math.max(this.getSinglePixelWidth()*d,this.current.lineWidth),t.stroke();e&&this.consumePath(),t.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(e){e="undefined"===typeof e||e;var t=this.ctx,a=this.current.fillColor,n=this.current.patternFill,i=!1;n&&(t.save(),this.baseTransform&&t.setTransform.apply(t,this.baseTransform),t.fillStyle=a.getPattern(t,this),i=!0),this.contentVisible&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=N},eoClip:function(){this.pendingClip=P},beginText:function(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(var a=0;a<e.length;a++){var n=e[a];t.setTransform.apply(t,n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(e,t){var a=this.commonObjs.get(e),i=this.current;if(!a)throw new Error("Can't find font for ".concat(e));if(i.fontMatrix=a.fontMatrix?a.fontMatrix:n.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=a,this.current.fontSize=t,!a.isType3Font){var o=a.loadedName||"sans-serif",r="normal";a.black?r="900":a.bold&&(r="bold");var l=a.italic?"italic":"normal",u='"'.concat(o,'", ').concat(a.fallbackName),d=t;t<s?d=s:t>c&&(d=c),this.current.fontSizeScale=t/d,this.ctx.font="".concat(l," ").concat(r," ").concat(d,"px ").concat(u)}},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},setTextMatrix:function(e,t,a,n,i,o){this.current.textMatrix=[e,t,a,n,i,o],this.current.textMatrixScale=Math.sqrt(e*e+t*t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(e,t,a,i){var o,r=this.ctx,l=this.current,s=l.font,c=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,d=c&n.TextRenderingMode.FILL_STROKE_MASK,p=!!(c&n.TextRenderingMode.ADD_TO_PATH_FLAG),h=l.patternFill&&!s.missingFile;if((s.disableFontFace||p||h)&&(o=s.getPathGenerator(this.commonObjs,e)),s.disableFontFace||h?(r.save(),r.translate(t,a),r.beginPath(),o(r,u),i&&r.setTransform.apply(r,i),d!==n.TextRenderingMode.FILL&&d!==n.TextRenderingMode.FILL_STROKE||r.fill(),d!==n.TextRenderingMode.STROKE&&d!==n.TextRenderingMode.FILL_STROKE||r.stroke(),r.restore()):(d!==n.TextRenderingMode.FILL&&d!==n.TextRenderingMode.FILL_STROKE||r.fillText(e,t,a),d!==n.TextRenderingMode.STROKE&&d!==n.TextRenderingMode.FILL_STROKE||r.strokeText(e,t,a)),p){var m=this.pendingTextPaths||(this.pendingTextPaths=[]);m.push({transform:r.mozCurrentTransform,x:t,y:a,fontSize:u,addToPath:o})}},get isFontSubpixelAAEnabled(){var e=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),t=e.context;t.scale(1.5,1),t.fillText("I",0,10);for(var a=t.getImageData(0,0,10,10).data,i=!1,o=3;o<a.length;o+=4)if(a[o]>0&&a[o]<255){i=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",i)},showText:function(e){var t=this.current,a=t.font;if(a.isType3Font)return this.showType3Text(e);var i=t.fontSize;if(0!==i){var o,r=this.ctx,l=t.fontSizeScale,s=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,p=t.textHScale*u,h=e.length,m=a.vertical,f=m?1:-1,b=a.defaultVMetrics,g=i*t.fontMatrix[0],v=t.textRenderingMode===n.TextRenderingMode.FILL&&!a.disableFontFace&&!t.patternFill;if(r.save(),t.patternFill){r.save();var y=t.fillColor.getPattern(r,this);o=r.mozCurrentTransform,r.restore(),r.fillStyle=y}r.transform.apply(r,t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(p,-1):r.scale(p,1);var _=t.lineWidth,x=t.textMatrixScale;if(0===x||0===_){var w=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;w!==n.TextRenderingMode.STROKE&&w!==n.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,_=this.getSinglePixelWidth()*d)}else _/=x;1!==l&&(r.scale(l,l),_/=l),r.lineWidth=_;var k,T=0;for(k=0;k<h;++k){var D=e[k];if((0,n.isNum)(D))T+=f*D*i/1e3;else{var S,O,N,P,C,A,F,I,E=!1,R=(D.isSpace?c:0)+s,z=D.fontChar,j=D.accent,L=D.width;if(m)C=D.vmetric||b,A=D.vmetric?C[1]:.5*L,A=-A*g,F=C[2]*g,L=C?-C[0]:L,S=A/l,O=(T+F)/l;else S=T/l,O=0;if(a.remeasure&&L>0){var q=1e3*r.measureText(z).width/i*l;if(L<q&&this.isFontSubpixelAAEnabled){var $=L/q;E=!0,r.save(),r.scale($,1),S/=$}else L!==q&&(S+=(L-q)/2e3*i/l)}this.contentVisible&&(D.isInFont||a.missingFile)&&(v&&!j?r.fillText(z,S,O):(this.paintChar(z,S,O,o),j&&(N=S+i*j.offset.x/l,P=O-i*j.offset.y/l,this.paintChar(j.fontChar,N,P,o)))),I=m?L*g-R*u:L*g+R*u,T+=I,E&&r.restore()}}m?t.y-=T:t.x+=T*p,r.restore()}},showType3Text:function(e){var t,a,i,o,r=this.ctx,l=this.current,s=l.font,c=l.fontSize,u=l.fontDirection,d=s.vertical?1:-1,p=l.charSpacing,h=l.wordSpacing,m=l.textHScale*u,f=l.fontMatrix||n.FONT_IDENTITY_MATRIX,b=e.length,g=l.textRenderingMode===n.TextRenderingMode.INVISIBLE;if(!g&&0!==c){for(this._cachedGetSinglePixelWidth=null,r.save(),r.transform.apply(r,l.textMatrix),r.translate(l.x,l.y),r.scale(m,u),t=0;t<b;++t)if(a=e[t],(0,n.isNum)(a))o=d*a*c/1e3,this.ctx.translate(o,0),l.x+=o*m;else{var v=(a.isSpace?h:0)+p,y=s.charProcOperatorList[a.operatorListId];if(y){this.contentVisible&&(this.processingType3=a,this.save(),r.scale(c,c),r.transform.apply(r,f),this.executeOperatorList(y),this.restore());var _=n.Util.applyTransform([a.width,0],f);i=_[0]*c+v,r.translate(i,0),l.x+=i*m}else(0,n.warn)('Type3 character "'.concat(a.operatorListId,'" is not available.'))}r.restore(),this.processingType3=null}},setCharWidth:function(e,t){},setCharWidthAndBounds:function(e,t,a,n,i,o){this.ctx.rect(a,n,i-a,o-n),this.clip(),this.endPath()},getColorN_Pattern:function(e){var t,n=this;if("TilingPattern"===e[0]){var o=e[1],r=this.baseTransform||this.ctx.mozCurrentTransform.slice(),l={createCanvasGraphics:function(e){return new a(e,n.commonObjs,n.objs,n.canvasFactory,n.webGLContext)}};t=new i.TilingPattern(e,o,this.ctx,l,r)}else t=(0,i.getShadingPatternFromIR)(e);return t},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(e,t,a){var i=n.Util.makeCssRgb(e,t,a);this.ctx.strokeStyle=i,this.current.strokeColor=i},setFillRGBColor:function(e,t,a){var i=n.Util.makeCssRgb(e,t,a);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1},shadingFill:function(e){if(this.contentVisible){var t=this.ctx;this.save();var a=(0,i.getShadingPatternFromIR)(e);t.fillStyle=a.getPattern(t,this,!0);var o=t.mozCurrentTransformInverse;if(o){var r=t.canvas,l=r.width,s=r.height,c=n.Util.applyTransform([0,0],o),u=n.Util.applyTransform([0,s],o),d=n.Util.applyTransform([l,0],o),p=n.Util.applyTransform([l,s],o),h=Math.min(c[0],u[0],d[0],p[0]),m=Math.min(c[1],u[1],d[1],p[1]),f=Math.max(c[0],u[0],d[0],p[0]),b=Math.max(c[1],u[1],d[1],p[1]);this.ctx.fillRect(h,m,f-h,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}},beginInlineImage:function(){(0,n.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,n.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t)){var a=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],a,n),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function(e){if(this.contentVisible){this.save();var t=this.ctx;e.isolated||(0,n.info)("TODO: Support non-isolated groups."),e.knockout&&(0,n.warn)("Knockout groups not supported.");var a=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var i=n.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform),o=[0,0,t.canvas.width,t.canvas.height];i=n.Util.intersect(i,o)||[0,0,0,0];var r=Math.floor(i[0]),l=Math.floor(i[1]),s=Math.max(Math.ceil(i[2])-r,1),c=Math.max(Math.ceil(i[3])-l,1),d=1,p=1;s>u&&(d=s/u,s=u),c>u&&(p=c/u,c=u);var h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);var m=this.cachedCanvases.getCanvas(h,s,c,!0),f=m.context;f.scale(1/d,1/p),f.translate(-r,-l),f.transform.apply(f,a),e.smask?this.smaskStack.push({canvas:m.canvas,context:f,offsetX:r,offsetY:l,scaleX:d,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,l),t.scale(d,p)),y(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++,this.current.activeSMask=null}},endGroup:function(e){if(this.contentVisible){this.groupLevel--;var t=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore()}},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,a){if(this.save(),_(this.ctx),this.current=new v,Array.isArray(e)&&4===e.length){var n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.clip(),this.endPath()}this.transform.apply(this,t),this.transform.apply(this,a)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(e){if(this.contentVisible){var t=this.ctx,a=e.width,n=e.height,i=this.current.fillColor,o=this.current.patternFill,r=this.processingType3;if(p&&r&&void 0===r.compiled&&(r.compiled=a<=h&&n<=h?g({data:e.data,width:a,height:n}):null),r&&r.compiled)r.compiled(t);else{var s=this.cachedCanvases.getCanvas("maskCanvas",a,n),c=s.context;c.save(),l(c,e),c.globalCompositeOperation="source-in",c.fillStyle=o?i.getPattern(c,this):i,c.fillRect(0,0,a,n),c.restore(),this.paintInlineImageXObject(s.canvas)}}},paintImageMaskXObjectRepeat:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){var r=e.width,s=e.height,c=this.current.fillColor,u=this.current.patternFill,d=this.cachedCanvases.getCanvas("maskCanvas",r,s),p=d.context;p.save(),l(p,e),p.globalCompositeOperation="source-in",p.fillStyle=u?c.getPattern(p,this):c,p.fillRect(0,0,r,s),p.restore();for(var h=this.ctx,m=0,f=o.length;m<f;m+=2)h.save(),h.transform(t,a,n,i,o[m],o[m+1]),h.scale(1,-1),h.drawImage(d.canvas,0,0,r,s,0,-1,1,1),h.restore()}},paintImageMaskXObjectGroup:function(e){if(this.contentVisible)for(var t=this.ctx,a=this.current.fillColor,n=this.current.patternFill,i=0,o=e.length;i<o;i++){var r=e[i],s=r.width,c=r.height,u=this.cachedCanvases.getCanvas("maskCanvas",s,c),d=u.context;d.save(),l(d,r),d.globalCompositeOperation="source-in",d.fillStyle=n?a.getPattern(d,this):a,d.fillRect(0,0,s,c),d.restore(),t.save(),t.transform.apply(t,r.transform),t.scale(1,-1),t.drawImage(u.canvas,0,0,s,c,0,-1,1,1),t.restore()}},paintImageXObject:function(e){if(this.contentVisible){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,n.warn)("Dependent image isn't ready yet")}},paintImageXObjectRepeat:function(e,t,a,i){if(this.contentVisible){var o=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(o){for(var r=o.width,l=o.height,s=[],c=0,u=i.length;c<u;c+=2)s.push({transform:[t,0,0,a,i[c],i[c+1]],x:0,y:0,w:r,h:l});this.paintInlineImageXObjectGroup(o,s)}else(0,n.warn)("Dependent image isn't ready yet")}},paintInlineImageXObject:function(e){if(this.contentVisible){var t=e.width,a=e.height,n=this.ctx;this.save(),n.scale(1/t,-1/a);var i,o,l=n.mozCurrentTransformInverse,s=l[0],c=l[1],u=Math.max(Math.sqrt(s*s+c*c),1),d=l[2],p=l[3],h=Math.max(Math.sqrt(d*d+p*p),1);if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)i=e;else{o=this.cachedCanvases.getCanvas("inlineImage",t,a);var m=o.context;r(m,e,this.current.transferMaps),i=o.canvas}var f=t,b=a,g="prescale1";while(u>2&&f>1||h>2&&b>1){var v=f,y=b;u>2&&f>1&&(v=Math.ceil(f/2),u/=f/v),h>2&&b>1&&(y=Math.ceil(b/2),h/=b/y),o=this.cachedCanvases.getCanvas(g,v,y),m=o.context,m.clearRect(0,0,v,y),m.drawImage(i,0,0,f,b,0,0,v,y),i=o.canvas,f=v,b=y,g="prescale1"===g?"prescale2":"prescale1"}if(n.drawImage(i,0,0,f,b,0,-a,t,a),this.imageLayer){var _=this.getCanvasPosition(0,-a);this.imageLayer.appendImage({imgData:e,left:_[0],top:_[1],width:t/l[0],height:a/l[3]})}this.restore()}},paintInlineImageXObjectGroup:function(e,t){if(this.contentVisible){var a=this.ctx,n=e.width,i=e.height,o=this.cachedCanvases.getCanvas("inlineImage",n,i),l=o.context;r(l,e,this.current.transferMaps);for(var s=0,c=t.length;s<c;s++){var u=t[s];if(a.save(),a.transform.apply(a,u.transform),a.scale(1,-1),a.drawImage(o.canvas,u.x,u.y,u.w,u.h,0,-1,1,1),this.imageLayer){var d=this.getCanvasPosition(u.x,u.y);this.imageLayer.appendImage({imgData:e,left:d[0],top:d[1],width:n,height:i})}a.restore()}}},paintSolidColorImageMask:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function(e){},markPointProps:function(e,t){},beginMarkedContent:function(e){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){var e=this.ctx;this.pendingClip&&(this.pendingClip===P?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()},getSinglePixelWidth:function(e){if(null===this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1],t[2]*t[2]+t[3]*t[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){var a=this.ctx.mozCurrentTransform;return[a[0]*e+a[2]*t+a[4],a[1]*e+a[3]*t+a[5]]},isContentVisible:function(){for(var e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}},n.OPS)a.prototype[n.OPS[C]]=a.prototype[C];return a}();t.CanvasGraphics=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=l,t.TilingPattern=void 0;var n=a(5),i={};function o(e,t){if(t&&"undefined"!==typeof Path2D){var a=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],a,n),e.clip(i)}}i.RadialAxial={fromIR:function(e){var t=e[1],a=e[2],n=e[3],i=e[4],r=e[5],l=e[6],s=e[7];return{type:"Pattern",getPattern:function(e){var c;o(e,a),"axial"===t?c=e.createLinearGradient(i[0],i[1],r[0],r[1]):"radial"===t&&(c=e.createRadialGradient(i[0],i[1],l,r[0],r[1],s));for(var u=0,d=n.length;u<d;++u){var p=n[u];c.addColorStop(p[0],p[1])}return c}}}};var r=function(){function e(e,t,a,n,i,o,r,l){var s,c=t.coords,u=t.colors,d=e.data,p=4*e.width;c[a+1]>c[n+1]&&(s=a,a=n,n=s,s=o,o=r,r=s),c[n+1]>c[i+1]&&(s=n,n=i,i=s,s=r,r=l,l=s),c[a+1]>c[n+1]&&(s=a,a=n,n=s,s=o,o=r,r=s);var h=(c[a]+t.offsetX)*t.scaleX,m=(c[a+1]+t.offsetY)*t.scaleY,f=(c[n]+t.offsetX)*t.scaleX,b=(c[n+1]+t.offsetY)*t.scaleY,g=(c[i]+t.offsetX)*t.scaleX,v=(c[i+1]+t.offsetY)*t.scaleY;if(!(m>=v))for(var y,_,x,w,k,T,D,S,O=u[o],N=u[o+1],P=u[o+2],C=u[r],A=u[r+1],F=u[r+2],I=u[l],E=u[l+1],R=u[l+2],z=Math.round(m),j=Math.round(v),L=z;L<=j;L++){if(L<b){var q=void 0;q=L<m?0:m===b?1:(m-L)/(m-b),y=h-(h-f)*q,_=O-(O-C)*q,x=N-(N-A)*q,w=P-(P-F)*q}else{var $=void 0;$=L>v?1:b===v?0:(b-L)/(b-v),y=f-(f-g)*$,_=C-(C-I)*$,x=A-(A-E)*$,w=F-(F-R)*$}var M=void 0;M=L<m?0:L>v?1:(m-L)/(m-v),k=h-(h-g)*M,T=O-(O-I)*M,D=N-(N-E)*M,S=P-(P-R)*M;for(var B=Math.round(Math.min(y,k)),W=Math.round(Math.max(y,k)),U=p*L+4*B,V=B;V<=W;V++)M=(y-V)/(y-k),M<0?M=0:M>1&&(M=1),d[U++]=_-(_-T)*M|0,d[U++]=x-(x-D)*M|0,d[U++]=w-(w-S)*M|0,d[U++]=255}}function t(t,a,n){var i,o,r=a.coords,l=a.colors;switch(a.type){case"lattice":var s=a.verticesPerRow,c=Math.floor(r.length/s)-1,u=s-1;for(i=0;i<c;i++)for(var d=i*s,p=0;p<u;p++,d++)e(t,n,r[d],r[d+1],r[d+s],l[d],l[d+1],l[d+s]),e(t,n,r[d+s+1],r[d+1],r[d+s],l[d+s+1],l[d+1],l[d+s]);break;case"triangles":for(i=0,o=r.length;i<o;i+=3)e(t,n,r[i],r[i+1],r[i+2],l[i],l[i+1],l[i+2]);break;default:throw new Error("illegal figure")}}function a(e,a,n,i,o,r,l,s){var c,u,d,p,h=1.1,m=3e3,f=2,b=Math.floor(e[0]),g=Math.floor(e[1]),v=Math.ceil(e[2])-b,y=Math.ceil(e[3])-g,_=Math.min(Math.ceil(Math.abs(v*a[0]*h)),m),x=Math.min(Math.ceil(Math.abs(y*a[1]*h)),m),w=v/_,k=y/x,T={coords:n,colors:i,offsetX:-b,offsetY:-g,scaleX:1/w,scaleY:1/k},D=_+2*f,S=x+2*f;if(s.isEnabled)c=s.drawFigures({width:_,height:x,backgroundColor:r,figures:o,context:T}),u=l.getCanvas("mesh",D,S,!1),u.context.drawImage(c,f,f),c=u.canvas;else{u=l.getCanvas("mesh",D,S,!1);var O=u.context,N=O.createImageData(_,x);if(r){var P=N.data;for(d=0,p=P.length;d<p;d+=4)P[d]=r[0],P[d+1]=r[1],P[d+2]=r[2],P[d+3]=255}for(d=0;d<o.length;d++)t(N,o[d],T);O.putImageData(N,f,f),c=u.canvas}return{canvas:c,offsetX:b-f*w,offsetY:g-f*k,scaleX:w,scaleY:k}}return a}();function l(e){var t=i[e[0]];if(!t)throw new Error("Unknown IR type: ".concat(e[0]));return t.fromIR(e)}i.Mesh={fromIR:function(e){var t=e[2],a=e[3],i=e[4],l=e[5],s=e[6],c=e[7],u=e[8];return{type:"Pattern",getPattern:function(e,d,p){var h;if(o(e,c),p)h=n.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(h=n.Util.singularValueDecompose2dScale(d.baseTransform),s){var m=n.Util.singularValueDecompose2dScale(s);h=[h[0]*m[0],h[1]*m[1]]}var f=r(l,h,t,a,i,p?null:u,d.cachedCanvases,d.webGLContext);return p||(e.setTransform.apply(e,d.baseTransform),s&&e.transform.apply(e,s)),e.translate(f.offsetX,f.offsetY),e.scale(f.scaleX,f.scaleY),e.createPattern(f.canvas,"no-repeat")}}}},i.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var s=function(){var e={COLORED:1,UNCOLORED:2},t=3e3;function a(e,t,a,n,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.canvasGraphicsFactory=n,this.baseTransform=i,this.type="Pattern",this.ctx=a}return a.prototype={createPatternCanvas:function(e){var t=this.operatorList,a=this.bbox,i=this.xstep,o=this.ystep,r=this.paintType,l=this.tilingType,s=this.color,c=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+l);var u=a[0],d=a[1],p=a[2],h=a[3],m=n.Util.singularValueDecompose2dScale(this.matrix),f=n.Util.singularValueDecompose2dScale(this.baseTransform),b=[m[0]*f[0],m[1]*f[1]],g=this.getSizeAndScale(i,this.ctx.canvas.width,b[0]),v=this.getSizeAndScale(o,this.ctx.canvas.height,b[1]),y=e.cachedCanvases.getCanvas("pattern",g.size,v.size,!0),_=y.context,x=c.createCanvasGraphics(_);return x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,r,s),x.transform(g.scale,0,0,v.scale,0,0),x.transform(1,0,0,1,-u,-d),this.clipBbox(x,a,u,d,p,h),x.executeOperatorList(t),this.ctx.transform(1,0,0,1,u,d),this.ctx.scale(1/g.scale,1/v.scale),y.canvas},getSizeAndScale:function(e,a,n){e=Math.abs(e);var i=Math.max(t,a),o=Math.ceil(e*n);return o>=i?o=i:n=o/e,{scale:n,size:o}},clipBbox:function(e,t,a,n,i,o){if(Array.isArray(t)&&4===t.length){var r=i-a,l=o-n;e.ctx.rect(a,n,r,l),e.clip(),e.endPath()}},setFillAndStrokeStyleToContext:function(t,a,i){var o=t.ctx,r=t.current;switch(a){case e.COLORED:var l=this.ctx;o.fillStyle=l.fillStyle,o.strokeStyle=l.strokeStyle,r.fillColor=l.fillStyle,r.strokeColor=l.strokeStyle;break;case e.UNCOLORED:var s=n.Util.makeCssRgb(i[0],i[1],i[2]);o.fillStyle=s,o.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new n.FormatError("Unsupported paint type: ".concat(a))}},getPattern:function(e,t){e=this.ctx,e.setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix);var a=this.createPatternCanvas(t);return e.createPattern(a,"repeat")}},a}();t.TilingPattern=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;var n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=o(a(2)),i=a(5);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function l(e){r(o,n,i,l,s,"next",e)}function s(e){r(o,n,i,l,s,"throw",e)}l(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return t&&c(e.prototype,t),a&&c(e,a),e}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p={UNKNOWN:0,DATA:1,ERROR:2},h={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m(e){if("object"!==d(e)||null===e)return e;switch(e.name){case"AbortException":return new i.AbortException(e.message);case"MissingPDFException":return new i.MissingPDFException(e.message);case"UnexpectedResponseException":return new i.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new i.UnknownErrorException(e.message,e.details);default:return new i.UnknownErrorException(e.message,e.toString())}}var f=function(){function e(t,a,n){var i=this;s(this,e),this.sourceName=t,this.targetName=a,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName===i.sourceName)if(t.stream)i._processStreamMessage(t);else if(t.callback){var a=t.callbackId,o=i.callbackCapabilities[a];if(!o)throw new Error("Cannot resolve callback ".concat(a));if(delete i.callbackCapabilities[a],t.callback===p.DATA)o.resolve(t.data);else{if(t.callback!==p.ERROR)throw new Error("Unexpected callback case");o.reject(m(t.reason))}}else{var r=i.actionHandler[t.action];if(!r)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){var l=i.sourceName,s=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(e){n.postMessage({sourceName:l,targetName:s,callback:p.DATA,callbackId:t.callbackId,data:e})}),(function(e){n.postMessage({sourceName:l,targetName:s,callback:p.ERROR,callbackId:t.callbackId,reason:m(e)})}))}else t.streamId?i._createStreamSink(t):r(t.data)}},n.addEventListener("message",this._onComObjOnMessage)}return u(e,[{key:"on",value:function(e,t){var a=this.actionHandler;if(a[e])throw new Error('There is already an actionName called "'.concat(e,'"'));a[e]=t}},{key:"send",value:function(e,t,a){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},a)}},{key:"sendWithPromise",value:function(e,t,a){var n=this.callbackId++,o=(0,i.createPromiseCapability)();this.callbackCapabilities[n]=o;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},a)}catch(r){o.reject(r)}return o.promise}},{key:"sendWithStream",value:function(e,t,a,n){var o=this,r=this.streamId++,l=this.sourceName,s=this.targetName,c=this.comObj;return new ReadableStream({start:function(a){var c=(0,i.createPromiseCapability)();return o.streamControllers[r]={controller:a,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},o._postMessage({sourceName:l,targetName:s,action:e,streamId:r,data:t,desiredSize:a.desiredSize},n),c.promise},pull:function(e){var t=(0,i.createPromiseCapability)();return o.streamControllers[r].pullCall=t,c.postMessage({sourceName:l,targetName:s,stream:h.PULL,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:function(e){(0,i.assert)(e instanceof Error,"cancel must have a valid reason");var t=(0,i.createPromiseCapability)();return o.streamControllers[r].cancelCall=t,o.streamControllers[r].isClosed=!0,c.postMessage({sourceName:l,targetName:s,stream:h.CANCEL,streamId:r,reason:m(e)}),t.promise}},a)}},{key:"_createStreamSink",value:function(e){var t=this,a=this.actionHandler[e.action],n=e.streamId,o=this.sourceName,r=e.sourceName,l=this.comObj,s={enqueue:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var s=this.desiredSize;this.desiredSize-=a,s>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),t._postMessage({sourceName:o,targetName:r,stream:h.ENQUEUE,streamId:n,chunk:e},l)}},close:function(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:o,targetName:r,stream:h.CLOSE,streamId:n}),delete t.streamSinks[n])},error:function(e){(0,i.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:o,targetName:r,stream:h.ERROR,streamId:n,reason:m(e)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};s.sinkCapability.resolve(),s.ready=s.sinkCapability.promise,this.streamSinks[n]=s,new Promise((function(t){t(a(e.data,s))})).then((function(){l.postMessage({sourceName:o,targetName:r,stream:h.START_COMPLETE,streamId:n,success:!0})}),(function(e){l.postMessage({sourceName:o,targetName:r,stream:h.START_COMPLETE,streamId:n,reason:m(e)})}))}},{key:"_processStreamMessage",value:function(e){var t=e.streamId,a=this.sourceName,n=e.sourceName,o=this.comObj;switch(e.stream){case h.START_COMPLETE:e.success?this.streamControllers[t].startCall.resolve():this.streamControllers[t].startCall.reject(m(e.reason));break;case h.PULL_COMPLETE:e.success?this.streamControllers[t].pullCall.resolve():this.streamControllers[t].pullCall.reject(m(e.reason));break;case h.PULL:if(!this.streamSinks[t]){o.postMessage({sourceName:a,targetName:n,stream:h.PULL_COMPLETE,streamId:t,success:!0});break}this.streamSinks[t].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[t].sinkCapability.resolve(),this.streamSinks[t].desiredSize=e.desiredSize;var r=this.streamSinks[e.streamId].onPull;new Promise((function(e){e(r&&r())})).then((function(){o.postMessage({sourceName:a,targetName:n,stream:h.PULL_COMPLETE,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:a,targetName:n,stream:h.PULL_COMPLETE,streamId:t,reason:m(e)})}));break;case h.ENQUEUE:if((0,i.assert)(this.streamControllers[t],"enqueue should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].controller.enqueue(e.chunk);break;case h.CLOSE:if((0,i.assert)(this.streamControllers[t],"close should have stream controller"),this.streamControllers[t].isClosed)break;this.streamControllers[t].isClosed=!0,this.streamControllers[t].controller.close(),this._deleteStreamController(t);break;case h.ERROR:(0,i.assert)(this.streamControllers[t],"error should have stream controller"),this.streamControllers[t].controller.error(m(e.reason)),this._deleteStreamController(t);break;case h.CANCEL_COMPLETE:e.success?this.streamControllers[t].cancelCall.resolve():this.streamControllers[t].cancelCall.reject(m(e.reason)),this._deleteStreamController(t);break;case h.CANCEL:if(!this.streamSinks[t])break;var l=this.streamSinks[e.streamId].onCancel;new Promise((function(t){t(l&&l(m(e.reason)))})).then((function(){o.postMessage({sourceName:a,targetName:n,stream:h.CANCEL_COMPLETE,streamId:t,success:!0})}),(function(e){o.postMessage({sourceName:a,targetName:n,stream:h.CANCEL_COMPLETE,streamId:t,reason:m(e)})})),this.streamSinks[t].sinkCapability.reject(m(e.reason)),this.streamSinks[t].isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:function(){var e=l(n["default"].mark((function e(t){return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(e){return e&&e.promise})));case 2:delete this.streamControllers[t];case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_postMessage",value:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),e}();t.MessageHandler=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=a(5),i=a(212);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}var s=function(){function e(t){o(this,e),(0,n.assert)("string"===typeof t,"Metadata: input is not a string"),t=this._repair(t);var a=new i.SimpleXMLParser,r=a.parseFromString(t);this._metadataMap=new Map,r&&this._parse(r)}return l(e,[{key:"_repair",value:function(e){return e.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(e,t){for(var a=t.replace(/\\([0-3])([0-7])([0-7])/g,(function(e,t,a,n){return String.fromCharCode(64*t+8*a+1*n)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(e,t){switch(t){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(t," isn't defined."))})),n="",i=0,o=a.length;i<o;i+=2){var r=256*a.charCodeAt(i)+a.charCodeAt(i+1);n+=r>=32&&r<127&&60!==r&&62!==r&&38!==r?String.fromCharCode(r):"&#x"+(65536+r).toString(16).substring(1)+";"}return">"+n}))}},{key:"_parse",value:function(e){var t=e.documentElement;if("rdf:rdf"!==t.nodeName.toLowerCase()){t=t.firstChild;while(t&&"rdf:rdf"!==t.nodeName.toLowerCase())t=t.nextSibling}var a=t?t.nodeName.toLowerCase():null;if(t&&"rdf:rdf"===a&&t.hasChildNodes())for(var n=t.childNodes,i=0,o=n.length;i<o;i++){var r=n[i];if("rdf:description"===r.nodeName.toLowerCase())for(var l=0,s=r.childNodes.length;l<s;l++)if("#text"!==r.childNodes[l].nodeName.toLowerCase()){var c=r.childNodes[l],u=c.nodeName.toLowerCase();this._metadataMap.set(u,c.textContent.trim())}}}},{key:"get",value:function(e){return this._metadataMap.has(e)?this._metadataMap.get(e):null}},{key:"getAll",value:function(){return Object.fromEntries(this._metadataMap)}},{key:"has",value:function(e){return this._metadataMap.has(e)}}]),e}();t.Metadata=s},function(e,t,a){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return c(e)||s(e,t)||r(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"===typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function s(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}}function c(e){if(Array.isArray(e))return e}function u(e,t,a){return u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=d(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}},u(e,t,a||e)}function d(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=v(e),null===e)break;return e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=g();return function(){var a,n=v(e);if(t){var i=v(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return f(this,a)}}function f(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,a){return t&&_(e.prototype,t),a&&_(e,a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=void 0;var w={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function k(e,t){var a=e[t];return" "===a||"\n"===a||"\r"===a||"\t"===a}function T(e){for(var t=0,a=e.length;t<a;t++)if(!k(e,t))return!1;return!0}var D=function(){function e(){y(this,e)}return x(e,[{key:"_resolveEntities",value:function(e){var t=this;return e.replace(/&([^;]+);/g,(function(e,a){if("#x"===a.substring(0,2))return String.fromCharCode(parseInt(a.substring(2),16));if("#"===a.substring(0,1))return String.fromCharCode(parseInt(a.substring(1),10));switch(a){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return t.onResolveEntity(a)}))}},{key:"_parseContent",value:function(e,t){var a=[],n=t;function i(){while(n<e.length&&k(e,n))++n}while(n<e.length&&!k(e,n)&&">"!==e[n]&&"/"!==e[n])++n;var o=e.substring(t,n);i();while(n<e.length&&">"!==e[n]&&"/"!==e[n]&&"?"!==e[n]){i();var r="",l="";while(n<e.length&&!k(e,n)&&"="!==e[n])r+=e[n],++n;if(i(),"="!==e[n])return null;++n,i();var s=e[n];if('"'!==s&&"'"!==s)return null;var c=e.indexOf(s,++n);if(c<0)return null;l=e.substring(n,c),a.push({name:r,value:this._resolveEntities(l)}),n=c+1,i()}return{name:o,attributes:a,parsed:n-t}}},{key:"_parseProcessingInstruction",value:function(e,t){var a=t;function n(){while(a<e.length&&k(e,a))++a}while(a<e.length&&!k(e,a)&&">"!==e[a]&&"/"!==e[a])++a;var i=e.substring(t,a);n();var o=a;while(a<e.length&&("?"!==e[a]||">"!==e[a+1]))++a;var r=e.substring(o,a);return{name:i,value:r,parsed:a-t}}},{key:"parseXml",value:function(e){var t=0;while(t<e.length){var a=e[t],n=t;if("<"===a){++n;var i=e[n],o=void 0;switch(i){case"/":if(++n,o=e.indexOf(">",n),o<0)return void this.onError(w.UnterminatedElement);this.onEndElement(e.substring(n,o)),n=o+1;break;case"?":++n;var r=this._parseProcessingInstruction(e,n);if("?>"!==e.substring(n+r.parsed,n+r.parsed+2))return void this.onError(w.UnterminatedXmlDeclaration);this.onPi(r.name,r.value),n+=r.parsed+2;break;case"!":if("--"===e.substring(n+1,n+3)){if(o=e.indexOf("--\x3e",n+3),o<0)return void this.onError(w.UnterminatedComment);this.onComment(e.substring(n+3,o)),n=o+3}else if("[CDATA["===e.substring(n+1,n+8)){if(o=e.indexOf("]]>",n+8),o<0)return void this.onError(w.UnterminatedCdat);this.onCdata(e.substring(n+8,o)),n=o+3}else{if("DOCTYPE"!==e.substring(n+1,n+8))return void this.onError(w.MalformedElement);var l=e.indexOf("[",n+8),s=!1;if(o=e.indexOf(">",n+8),o<0)return void this.onError(w.UnterminatedDoctypeDeclaration);if(l>0&&o>l){if(o=e.indexOf("]>",n+8),o<0)return void this.onError(w.UnterminatedDoctypeDeclaration);s=!0}var c=e.substring(n+8,o+(s?1:0));this.onDoctype(c),n=o+(s?2:1)}break;default:var u=this._parseContent(e,n);if(null===u)return void this.onError(w.MalformedElement);var d=!1;if("/>"===e.substring(n+u.parsed,n+u.parsed+2))d=!0;else if(">"!==e.substring(n+u.parsed,n+u.parsed+1))return void this.onError(w.UnterminatedElement);this.onBeginElement(u.name,u.attributes,d),n+=u.parsed+(d?2:1);break}}else{while(n<e.length&&"<"!==e[n])n++;var p=e.substring(t,n);this.onText(this._resolveEntities(p))}t=n}}},{key:"onResolveEntity",value:function(e){return"&".concat(e,";")}},{key:"onPi",value:function(e,t){}},{key:"onComment",value:function(e){}},{key:"onCdata",value:function(e){}},{key:"onDoctype",value:function(e){}},{key:"onText",value:function(e){}},{key:"onBeginElement",value:function(e,t,a){}},{key:"onEndElement",value:function(e){}},{key:"onError",value:function(e){}}]),e}(),S=function(){function e(t,a){y(this,e),this.nodeName=t,this.nodeValue=a,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return x(e,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var e=this.parentNode.childNodes;if(e){var t=e.indexOf(this);if(-1!==t)return e[t+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(e){return e.textContent})).join(""):this.nodeValue||""}}]),e}(),O=function(e){p(a,e);var t=m(a);function a(){var e;return y(this,a),e=t.call(this),e._currentFragment=null,e._stack=null,e._errorCode=w.NoError,e}return x(a,[{key:"parseFromString",value:function(e){if(this._currentFragment=[],this._stack=[],this._errorCode=w.NoError,this.parseXml(e),this._errorCode===w.NoError){var t=i(this._currentFragment,1),a=t[0];if(a)return{documentElement:a}}}},{key:"onResolveEntity",value:function(e){switch(e){case"apos":return"'"}return u(v(a.prototype),"onResolveEntity",this).call(this,e)}},{key:"onText",value:function(e){if(!T(e)){var t=new S("#text",e);this._currentFragment.push(t)}}},{key:"onCdata",value:function(e){var t=new S("#text",e);this._currentFragment.push(t)}},{key:"onBeginElement",value:function(e,t,a){var n=new S(e);n.childNodes=[],this._currentFragment.push(n),a||(this._stack.push(this._currentFragment),this._currentFragment=n.childNodes)}},{key:"onEndElement",value:function(e){this._currentFragment=this._stack.pop()||[];var t=this._currentFragment[this._currentFragment.length-1];if(t)for(var a=0,n=t.childNodes.length;a<n;a++)t.childNodes[a].parentNode=t}},{key:"onError",value:function(e){this._errorCode=e}}]),a}(D);t.SimpleXMLParser=O},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=a(5);function i(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=o(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==a["return"]||a["return"]()}finally{if(s)throw r}}}}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function e(t,a){c(this,e),this.visible=!0,this.name=t,this.intent=a},d=function(){function e(t){if(c(this,e),this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;var a,n=i(t.groups);try{for(n.s();!(a=n.n()).done;){var o=a.value;this._groups.set(o.id,new u(o.name,o.intent))}}catch(g){n.e(g)}finally{n.f()}if("OFF"===t.baseState){var r,l=i(this._groups);try{for(l.s();!(r=l.n()).done;){var s=r.value;s.visible=!1}}catch(g){l.e(g)}finally{l.f()}}var d,p=i(t.on);try{for(p.s();!(d=p.n()).done;){var h=d.value;this._groups.get(h).visible=!0}}catch(g){p.e(g)}finally{p.f()}var m,f=i(t.off);try{for(f.s();!(m=f.n()).done;){var b=m.value;this._groups.get(b).visible=!1}}catch(g){f.e(g)}finally{f.f()}}}return s(e,[{key:"isVisible",value:function(e){if("OCG"===e.type)return this._groups.has(e.id)?this._groups.get(e.id).visible:((0,n.warn)("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression&&(0,n.warn)("Visibility expression not supported yet."),!e.policy||"AnyOn"===e.policy){var t,a=i(e.ids);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!this._groups.has(o))return(0,n.warn)("Optional content group not found: ".concat(o)),!0;if(this._groups.get(o).visible)return!0}}catch(f){a.e(f)}finally{a.f()}return!1}if("AllOn"===e.policy){var r,l=i(e.ids);try{for(l.s();!(r=l.n()).done;){var s=r.value;if(!this._groups.has(s))return(0,n.warn)("Optional content group not found: ".concat(s)),!0;if(!this._groups.get(s).visible)return!1}}catch(f){l.e(f)}finally{l.f()}return!0}if("AnyOff"===e.policy){var c,u=i(e.ids);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!this._groups.has(d))return(0,n.warn)("Optional content group not found: ".concat(d)),!0;if(!this._groups.get(d).visible)return!0}}catch(f){u.e(f)}finally{u.f()}return!1}if("AllOff"===e.policy){var p,h=i(e.ids);try{for(h.s();!(p=h.n()).done;){var m=p.value;if(!this._groups.has(m))return(0,n.warn)("Optional content group not found: ".concat(m)),!0;if(this._groups.get(m).visible)return!1}}catch(f){h.e(f)}finally{h.f()}return!0}return(0,n.warn)("Unknown optional content policy ".concat(e.policy,".")),!0}return(0,n.warn)("Unknown group type ".concat(e.type,".")),!0}},{key:"setVisibility",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._groups.has(e)?this._groups.get(e).visible=!!t:(0,n.warn)("Optional content group not found: ".concat(e))}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size?Object.fromEntries(this._groups):null}},{key:"getGroup",value:function(e){return this._groups.get(e)||null}}]),e}();t.OptionalContentConfig=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=o(a(2)),i=a(5);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function l(e){r(o,n,i,l,s,"next",e)}function s(e){r(o,n,i,l,s,"throw",e)}l(void 0)}))}}function s(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),e}var m=function(){function e(t,a){var n=this;d(this,e),(0,i.assert)(a,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1;var o=t.initialData;if(o&&o.length>0){var r=new Uint8Array(o).buffer;this._queuedChunks.push(r)}this._pdfDataRangeTransport=a,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(e,t){n._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener((function(e,t){n._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(e){n._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){n._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return h(e,[{key:"_onReceiveData",value:function(e){var t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{var a=this._rangeReaders.some((function(a){return a._begin===e.begin&&(a._enqueue(t),!0)}));(0,i.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_onProgress",value:function(e){if(void 0===e.total){var t=this._rangeReaders[0];t&&t.onProgress&&t.onProgress({loaded:e.loaded})}else{var a=this._fullRequestReader;a&&a.onProgress&&a.onProgress({loaded:e.loaded,total:e.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(e){var t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}},{key:"getFullReader",value:function(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var e=this._queuedChunks;return this._queuedChunks=null,new f(this,e,this._progressiveDone)}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var a=new b(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(a),a}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t=this._rangeReaders.slice(0);t.forEach((function(t){t.cancel(e)})),this._pdfDataRangeTransport.abort()}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),e}();t.PDFDataTransportStream=m;var f=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,e),this._stream=t,this._done=n||!1,this._filename=null,this._queuedChunks=a||[],this._loaded=0;var i,o=s(this._queuedChunks);try{for(o.s();!(i=o.n()).done;){var r=i.value;this._loaded+=r.byteLength}}catch(l){o.e(l)}finally{o.f()}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}return h(e,[{key:"_enqueue",value:function(e){if(!this._done){if(this._requests.length>0){var t=this._requests.shift();t.resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}},{key:"read",value:function(){var e=l(n["default"].mark((function e(){var t,a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this._queuedChunks.length>0)){e.next=3;break}return t=this._queuedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 3:if(!this._done){e.next=5;break}return e.abrupt("return",{value:void 0,done:!0});case 5:return a=(0,i.createPromiseCapability)(),this._requests.push(a),e.abrupt("return",a.promise);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}}]),e}(),b=function(){function e(t,a,n){d(this,e),this._stream=t,this._begin=a,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return h(e,[{key:"_enqueue",value:function(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{var t=this._requests.shift();t.resolve({value:e,done:!1}),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"read",value:function(){var e=l(n["default"].mark((function e(){var t,a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return a=(0,i.createPromiseCapability)(),this._requests.push(a),e.abrupt("return",a.promise);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}},{key:"isStreamingSupported",get:function(){return!1}}]),e}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var n=a(5);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}var l=function(){function e(t){var a=t.enable,n=void 0!==a&&a;i(this,e),this._enabled=!0===n}return r(e,[{key:"composeSMask",value:function(e){var t=e.layer,a=e.mask,n=e.properties;return s.composeSMask(t,a,n)}},{key:"drawFigures",value:function(e){var t=e.width,a=e.height,n=e.backgroundColor,i=e.figures,o=e.context;return s.drawFigures(t,a,n,i,o)}},{key:"clear",value:function(){s.cleanup()}},{key:"isEnabled",get:function(){var e=this._enabled;return e&&(e=s.tryInitGL()),(0,n.shadow)(this,"isEnabled",e)}}]),e}();t.WebGLContext=l;var s=function(){function e(e,t,a){var n=e.createShader(a);e.shaderSource(n,t),e.compileShader(n);var i=e.getShaderParameter(n,e.COMPILE_STATUS);if(!i){var o=e.getShaderInfoLog(n);throw new Error("Error during shader compilation: "+o)}return n}function t(t,a){return e(t,a,t.VERTEX_SHADER)}function a(t,a){return e(t,a,t.FRAGMENT_SHADER)}function n(e,t){for(var a=e.createProgram(),n=0,i=t.length;n<i;++n)e.attachShader(a,t[n]);e.linkProgram(a);var o=e.getProgramParameter(a,e.LINK_STATUS);if(!o){var r=e.getProgramInfoLog(a);throw new Error("Error during program linking: "+r)}return a}function i(e,t,a){e.activeTexture(a);var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),n}var o,r;function l(){o||(r=document.createElement("canvas"),o=r.getContext("webgl",{premultipliedalpha:!1}))}var s="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",c="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",u=null;function d(){var e,i;l(),e=r,r=null,i=o,o=null;var d=t(i,s),p=a(i,c),h=n(i,[d,p]);i.useProgram(h);var m={};m.gl=i,m.canvas=e,m.resolutionLocation=i.getUniformLocation(h,"u_resolution"),m.positionLocation=i.getAttribLocation(h,"a_position"),m.backdropLocation=i.getUniformLocation(h,"u_backdrop"),m.subtypeLocation=i.getUniformLocation(h,"u_subtype");var f=i.getAttribLocation(h,"a_texCoord"),b=i.getUniformLocation(h,"u_image"),g=i.getUniformLocation(h,"u_mask"),v=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,v),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(f),i.vertexAttribPointer(f,2,i.FLOAT,!1,0,0),i.uniform1i(b,0),i.uniform1i(g,1),u=m}function p(e,t,a){var n=e.width,o=e.height;u||d();var r=u,l=r.canvas,s=r.gl;l.width=n,l.height=o,s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.uniform2f(r.resolutionLocation,n,o),a.backdrop?s.uniform4f(r.resolutionLocation,a.backdrop[0],a.backdrop[1],a.backdrop[2],1):s.uniform4f(r.resolutionLocation,0,0,0,0),s.uniform1i(r.subtypeLocation,"Luminosity"===a.subtype?1:0);var c=i(s,e,s.TEXTURE0),p=i(s,t,s.TEXTURE1),h=s.createBuffer();return s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,o,0,o,n,0,n,o]),s.STATIC_DRAW),s.enableVertexAttribArray(r.positionLocation),s.vertexAttribPointer(r.positionLocation,2,s.FLOAT,!1,0,0),s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.clear(s.COLOR_BUFFER_BIT),s.drawArrays(s.TRIANGLES,0,6),s.flush(),s.deleteTexture(c),s.deleteTexture(p),s.deleteBuffer(h),l}var h="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",m="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",f=null;function b(){var e,i;l(),e=r,r=null,i=o,o=null;var s=t(i,h),c=a(i,m),u=n(i,[s,c]);i.useProgram(u);var d={};d.gl=i,d.canvas=e,d.resolutionLocation=i.getUniformLocation(u,"u_resolution"),d.scaleLocation=i.getUniformLocation(u,"u_scale"),d.offsetLocation=i.getUniformLocation(u,"u_offset"),d.positionLocation=i.getAttribLocation(u,"a_position"),d.colorLocation=i.getAttribLocation(u,"a_color"),f=d}function g(e,t,a,n,i){f||b();var o=f,r=o.canvas,l=o.gl;r.width=e,r.height=t,l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight),l.uniform2f(o.resolutionLocation,e,t);var s,c,u,d=0;for(s=0,c=n.length;s<c;s++)switch(n[s].type){case"lattice":u=n[s].coords.length/n[s].verticesPerRow|0,d+=(u-1)*(n[s].verticesPerRow-1)*6;break;case"triangles":d+=n[s].coords.length;break}var p=new Float32Array(2*d),h=new Uint8Array(3*d),m=i.coords,g=i.colors,v=0,y=0;for(s=0,c=n.length;s<c;s++){var _=n[s],x=_.coords,w=_.colors;switch(_.type){case"lattice":var k=_.verticesPerRow;u=x.length/k|0;for(var T=1;T<u;T++)for(var D=T*k+1,S=1;S<k;S++,D++)p[v]=m[x[D-k-1]],p[v+1]=m[x[D-k-1]+1],p[v+2]=m[x[D-k]],p[v+3]=m[x[D-k]+1],p[v+4]=m[x[D-1]],p[v+5]=m[x[D-1]+1],h[y]=g[w[D-k-1]],h[y+1]=g[w[D-k-1]+1],h[y+2]=g[w[D-k-1]+2],h[y+3]=g[w[D-k]],h[y+4]=g[w[D-k]+1],h[y+5]=g[w[D-k]+2],h[y+6]=g[w[D-1]],h[y+7]=g[w[D-1]+1],h[y+8]=g[w[D-1]+2],p[v+6]=p[v+2],p[v+7]=p[v+3],p[v+8]=p[v+4],p[v+9]=p[v+5],p[v+10]=m[x[D]],p[v+11]=m[x[D]+1],h[y+9]=h[y+3],h[y+10]=h[y+4],h[y+11]=h[y+5],h[y+12]=h[y+6],h[y+13]=h[y+7],h[y+14]=h[y+8],h[y+15]=g[w[D]],h[y+16]=g[w[D]+1],h[y+17]=g[w[D]+2],v+=12,y+=18;break;case"triangles":for(var O=0,N=x.length;O<N;O++)p[v]=m[x[O]],p[v+1]=m[x[O]+1],h[y]=g[w[O]],h[y+1]=g[w[O]+1],h[y+2]=g[w[O]+2],v+=2,y+=3;break}}a?l.clearColor(a[0]/255,a[1]/255,a[2]/255,1):l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT);var P=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,P),l.bufferData(l.ARRAY_BUFFER,p,l.STATIC_DRAW),l.enableVertexAttribArray(o.positionLocation),l.vertexAttribPointer(o.positionLocation,2,l.FLOAT,!1,0,0);var C=l.createBuffer();return l.bindBuffer(l.ARRAY_BUFFER,C),l.bufferData(l.ARRAY_BUFFER,h,l.STATIC_DRAW),l.enableVertexAttribArray(o.colorLocation),l.vertexAttribPointer(o.colorLocation,3,l.UNSIGNED_BYTE,!1,0,0),l.uniform2f(o.scaleLocation,i.scaleX,i.scaleY),l.uniform2f(o.offsetLocation,i.offsetX,i.offsetY),l.drawArrays(l.TRIANGLES,0,d),l.flush(),l.deleteBuffer(P),l.deleteBuffer(C),r}return{tryInitGL:function(){try{return l(),!!o}catch(e){}return!1},composeSMask:p,drawFigures:g,cleanup:function(){u&&u.canvas&&(u.canvas.width=0,u.canvas.height=0),f&&f.canvas&&(f.canvas.width=0,f.canvas.height=0),u=null,f=null}}}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var n=a(1),i=a(5),o=a(205);function r(e,t,a){return r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}},r(e,t,a||e)}function l(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=v(e),null===e)break;return e}function s(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=g();return function(){var a,n=v(e);if(t){var i=v(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return f(this,a)}}function f(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,a){return t&&_(e.prototype,t),a&&_(e,a),e}var w=function(){function e(){y(this,e)}return x(e,null,[{key:"create",value:function(e){var t=e.data.annotationType;switch(t){case i.AnnotationType.LINK:return new T(e);case i.AnnotationType.TEXT:return new D(e);case i.AnnotationType.WIDGET:var a=e.data.fieldType;switch(a){case"Tx":return new O(e);case"Btn":return e.data.radioButton?new P(e):e.data.checkBox?new N(e):new C(e);case"Ch":return new A(e)}return new S(e);case i.AnnotationType.POPUP:return new F(e);case i.AnnotationType.FREETEXT:return new E(e);case i.AnnotationType.LINE:return new R(e);case i.AnnotationType.SQUARE:return new z(e);case i.AnnotationType.CIRCLE:return new j(e);case i.AnnotationType.POLYLINE:return new L(e);case i.AnnotationType.CARET:return new $(e);case i.AnnotationType.INK:return new M(e);case i.AnnotationType.POLYGON:return new q(e);case i.AnnotationType.HIGHLIGHT:return new B(e);case i.AnnotationType.UNDERLINE:return new W(e);case i.AnnotationType.SQUIGGLY:return new U(e);case i.AnnotationType.STRIKEOUT:return new V(e);case i.AnnotationType.STAMP:return new H(e);case i.AnnotationType.FILEATTACHMENT:return new Q(e);default:return new k(e)}}}]),e}(),k=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y(this,e),this.isRenderable=a,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,a&&(this.container=this._createContainer(n))}return x(e,[{key:"_createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data,a=this.page,n=this.viewport,o=document.createElement("section"),r=t.rect[2]-t.rect[0],l=t.rect[3]-t.rect[1];o.setAttribute("data-annotation-id",t.id);var s=i.Util.normalizeRect([t.rect[0],a.view[3]-t.rect[1]+a.view[1],t.rect[2],a.view[3]-t.rect[3]+a.view[1]]);if(o.style.transform="matrix(".concat(n.transform.join(","),")"),o.style.transformOrigin="-".concat(s[0],"px -").concat(s[1],"px"),!e&&t.borderStyle.width>0){o.style.borderWidth="".concat(t.borderStyle.width,"px"),t.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(r-=2*t.borderStyle.width,l-=2*t.borderStyle.width);var c=t.borderStyle.horizontalCornerRadius,u=t.borderStyle.verticalCornerRadius;if(c>0||u>0){var d="".concat(c,"px / ").concat(u,"px");o.style.borderRadius=d}switch(t.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid";break;default:break}t.color?o.style.borderColor=i.Util.makeCssRgb(0|t.color[0],0|t.color[1],0|t.color[2]):o.style.borderWidth=0}return o.style.left="".concat(s[0],"px"),o.style.top="".concat(s[1],"px"),o.style.width="".concat(r,"px"),o.style.height="".concat(l,"px"),o}},{key:"_createPopup",value:function(e,t,a){t||(t=document.createElement("div"),t.style.height=e.style.height,t.style.width=e.style.width,e.appendChild(t));var n=new I({container:e,trigger:t,color:a.color,title:a.title,modificationDate:a.modificationDate,contents:a.contents,hideWrapper:!0}),i=n.render();i.style.left=e.style.width,e.appendChild(i)}},{key:"render",value:function(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}]),e}(),T=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.url||e.data.dest||e.data.action);return t.call(this,e,n)}return x(a,[{key:"render",value:function(){this.container.className="linkAnnotation";var e=this.data,t=this.linkService,a=document.createElement("a");return e.url?(0,n.addLinkAttributes)(a,{url:e.url,target:e.newWindow?n.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel,enabled:t.externalLinkEnabled}):e.action?this._bindNamedAction(a,e.action):this._bindLink(a,e.dest),this.container.appendChild(a),this.container}},{key:"_bindLink",value:function(e,t){var a=this;e.href=this.linkService.getDestinationHash(t),e.onclick=function(){return t&&a.linkService.navigateTo(t),!1},t&&(e.className="internalLink")}},{key:"_bindNamedAction",value:function(e,t){var a=this;e.href=this.linkService.getAnchorUrl(""),e.onclick=function(){return a.linkService.executeNamedAction(t),!1},e.className="internalLink"}}]),a}(k),D=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n)}return x(a,[{key:"render",value:function(){this.container.className="textAnnotation";var e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}}]),a}(k),S=function(e){p(a,e);var t=m(a);function a(){return y(this,a),t.apply(this,arguments)}return x(a,[{key:"render",value:function(){return this.container}}]),a}(k),O=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;return t.call(this,e,n)}return x(a,[{key:"render",value:function(){var e=["left","center","right"],t=this.annotationStorage,a=this.data.id;this.container.className="textWidgetAnnotation";var n=null;if(this.renderInteractiveForms){var i=t.getOrCreateValue(a,this.data.fieldValue);if(this.data.multiLine?(n=document.createElement("textarea"),n.textContent=i):(n=document.createElement("input"),n.type="text",n.setAttribute("value",i)),n.addEventListener("input",(function(e){t.setValue(a,e.target.value)})),n.disabled=this.data.readOnly,n.name=this.data.fieldName,null!==this.data.maxLen&&(n.maxLength=this.data.maxLen),this.data.comb){var o=this.data.rect[2]-this.data.rect[0],r=o/this.data.maxLen;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(r,"px - 1ch)")}}else{n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";var l=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(l=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(n,l)}return null!==this.data.textAlignment&&(n.style.textAlign=e[this.data.textAlignment]),this.container.appendChild(n),this.container}},{key:"_setTextStyle",value:function(e,t){var a=e.style;if(a.fontSize="".concat(this.data.fontSize,"px"),a.direction=this.data.fontDirection<0?"rtl":"ltr",t){var n="normal";t.black?n="900":t.bold&&(n="bold"),a.fontWeight=n,a.fontStyle=t.italic?"italic":"normal";var i=t.loadedName?'"'.concat(t.loadedName,'", '):"",o=t.fallbackName||"Helvetica, sans-serif";a.fontFamily=i+o}}}]),a}(S),N=function(e){p(a,e);var t=m(a);function a(e){return y(this,a),t.call(this,e,e.renderInteractiveForms)}return x(a,[{key:"render",value:function(){var e=this.annotationStorage,t=this.data,a=t.id,n=e.getOrCreateValue(a,t.fieldValue&&"Off"!==t.fieldValue);this.container.className="buttonWidgetAnnotation checkBox";var i=document.createElement("input");return i.disabled=t.readOnly,i.type="checkbox",i.name=this.data.fieldName,n&&i.setAttribute("checked",!0),i.addEventListener("change",(function(t){e.setValue(a,t.target.checked)})),this.container.appendChild(i),this.container}}]),a}(S),P=function(e){p(a,e);var t=m(a);function a(e){return y(this,a),t.call(this,e,e.renderInteractiveForms)}return x(a,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var e=this.annotationStorage,t=this.data,a=t.id,n=e.getOrCreateValue(a,t.fieldValue===t.buttonValue),i=document.createElement("input");return i.disabled=t.readOnly,i.type="radio",i.name=t.fieldName,n&&i.setAttribute("checked",!0),i.addEventListener("change",(function(t){var n,i=t.target.name,o=s(document.getElementsByName(i));try{for(o.s();!(n=o.n()).done;){var r=n.value;r!==t.target&&e.setValue(r.parentNode.getAttribute("data-annotation-id"),!1)}}catch(l){o.e(l)}finally{o.f()}e.setValue(a,t.target.checked)})),this.container.appendChild(i),this.container}}]),a}(S),C=function(e){p(a,e);var t=m(a);function a(){return y(this,a),t.apply(this,arguments)}return x(a,[{key:"render",value:function(){var e=r(v(a.prototype),"render",this).call(this);return e.className="buttonWidgetAnnotation pushButton",e}}]),a}(T),A=function(e){p(a,e);var t=m(a);function a(e){return y(this,a),t.call(this,e,e.renderInteractiveForms)}return x(a,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var e=this.annotationStorage,t=this.data.id;e.getOrCreateValue(t,this.data.fieldValue.length>0?this.data.fieldValue[0]:null);var a=document.createElement("select");a.disabled=this.data.readOnly,a.name=this.data.fieldName,this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0));var n,i=s(this.data.options);try{for(i.s();!(n=i.n()).done;){var o=n.value,r=document.createElement("option");r.textContent=o.displayValue,r.value=o.exportValue,this.data.fieldValue.includes(o.exportValue)&&r.setAttribute("selected",!0),a.appendChild(r)}}catch(l){i.e(l)}finally{i.f()}return a.addEventListener("input",(function(a){var n=a.target.options,i=n[n.selectedIndex].value;e.setValue(t,i)})),this.container.appendChild(a),this.container}}]),a}(S),F=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!(!e.data.title&&!e.data.contents);return t.call(this,e,n)}return x(a,[{key:"render",value:function(){var e=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",e.includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),a=this.layer.querySelector(t);if(!a)return this.container;var n=new I({container:this.container,trigger:a,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),i=parseFloat(a.style.left),o=parseFloat(a.style.width);return this.container.style.transformOrigin="-".concat(i+o,"px -").concat(a.style.top),this.container.style.left="".concat(i+o,"px"),this.container.appendChild(n.render()),this.container}}]),a}(k),I=function(){function e(t){y(this,e),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return x(e,[{key:"render",value:function(){var e=.7,t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);var a=document.createElement("div");a.className="popup";var o=this.color;if(o){var r=e*(255-o[0])+o[0],l=e*(255-o[1])+o[1],s=e*(255-o[2])+o[2];a.style.backgroundColor=i.Util.makeCssRgb(0|r,0|l,0|s)}var c=document.createElement("h1");c.textContent=this.title,a.appendChild(c);var u=n.PDFDateString.toDateObject(this.modificationDate);if(u){var d=document.createElement("span");d.textContent="{{date}}, {{time}}",d.dataset.l10nId="annotation_date_string",d.dataset.l10nArgs=JSON.stringify({date:u.toLocaleDateString(),time:u.toLocaleTimeString()}),a.appendChild(d)}var p=this._formatContents(this.contents);return a.appendChild(p),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),a.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(a),t}},{key:"_formatContents",value:function(e){for(var t=document.createElement("p"),a=e.split(/(?:\r\n?|\n)/),n=0,i=a.length;n<i;++n){var o=a[n];t.appendChild(document.createTextNode(o)),n<i-1&&t.appendChild(document.createElement("br"))}return t}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),e}(),E=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),R=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),n.appendChild(i),this.container.append(n),this._createPopup(this.container,i,e),this.container}}]),a}(k),z=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),i=e.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",t-i),o.setAttribute("height",a-i),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),n.appendChild(o),this.container.append(n),this._createPopup(this.container,o,e),this.container}}]),a}(k),j=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1],n=this.svgFactory.create(t,a),i=e.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",a/2),o.setAttribute("rx",t/2-i/2),o.setAttribute("ry",a/2-i/2),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),n.appendChild(o),this.container.append(n),this._createPopup(this.container,o,e),this.container}}]),a}(k),L=function(e){p(a,e);var t=m(a);function a(e){var n;y(this,a);var i=!!(e.data.hasPopup||e.data.title||e.data.contents);return n=t.call(this,e,i,!0),n.containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return x(a,[{key:"render",value:function(){this.container.className=this.containerClassName;var e,t=this.data,a=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(a,n),o=[],r=s(t.vertices);try{for(r.s();!(e=r.n()).done;){var l=e.value,c=l.x-t.rect[0],u=t.rect[3]-l.y;o.push(c+","+u)}}catch(p){r.e(p)}finally{r.f()}o=o.join(" ");var d=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",o),d.setAttribute("stroke-width",t.borderStyle.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","none"),i.appendChild(d),this.container.append(i),this._createPopup(this.container,d,t),this.container}}]),a}(k),q=function(e){p(a,e);var t=m(a);function a(e){var n;return y(this,a),n=t.call(this,e),n.containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return a}(L),$=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),M=function(e){p(a,e);var t=m(a);function a(e){var n;y(this,a);var i=!!(e.data.hasPopup||e.data.title||e.data.contents);return n=t.call(this,e,i,!0),n.containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n}return x(a,[{key:"render",value:function(){this.container.className=this.containerClassName;var e,t=this.data,a=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(a,n),o=s(t.inkLists);try{for(o.s();!(e=o.n()).done;){var r,l=e.value,c=[],u=s(l);try{for(u.s();!(r=u.n()).done;){var d=r.value,p=d.x-t.rect[0],h=t.rect[3]-d.y;c.push("".concat(p,",").concat(h))}}catch(f){u.e(f)}finally{u.f()}c=c.join(" ");var m=this.svgFactory.createElement(this.svgElementName);m.setAttribute("points",c),m.setAttribute("stroke-width",t.borderStyle.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","none"),this._createPopup(this.container,m,t),i.appendChild(m)}}catch(f){o.e(f)}finally{o.f()}return this.container.append(i),this.container}}]),a}(k),B=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),W=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),U=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),V=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),H=function(e){p(a,e);var t=m(a);function a(e){y(this,a);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return t.call(this,e,n,!0)}return x(a,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),a}(k),Q=function(e){p(a,e);var t=m(a);function a(e){var o;y(this,a),o=t.call(this,e,!0);var r=o.data.file,l=r.filename,s=r.content;return o.filename=(0,n.getFilenameFromUrl)(l),o.content=s,o.linkService.eventBus&&o.linkService.eventBus.dispatch("fileattachmentannotation",{source:b(o),id:(0,i.stringToPDFString)(l),filename:l,content:s}),o}return x(a,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,i.warn)("Download cannot be started due to unavailable download manager")}}]),a}(k),G=function(){function e(){y(this,e)}return x(e,null,[{key:"render",value:function(e){var t,a=[],r=[],l=s(e.annotations);try{for(l.s();!(t=l.n()).done;){var c=t.value;c&&(c.annotationType!==i.AnnotationType.POPUP?a.push(c):r.push(c))}}catch(m){l.e(m)}finally{l.f()}r.length&&a.push.apply(a,r);for(var u=0,d=a;u<d.length;u++){var p=d[u],h=w.create({data:p,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:"boolean"!==typeof e.renderInteractiveForms||e.renderInteractiveForms,svgFactory:new n.DOMSVGFactory,annotationStorage:e.annotationStorage||new o.AnnotationStorage});h.isRenderable&&e.div.appendChild(h.render())}}},{key:"update",value:function(e){var t,a=s(e.annotations);try{for(a.s();!(t=a.n()).done;){var n=t.value,i=e.div.querySelector('[data-annotation-id="'.concat(n.id,'"]'));i&&(i.style.transform="matrix(".concat(e.viewport.transform.join(","),")"))}}catch(o){a.e(o)}finally{a.f()}e.div.removeAttribute("hidden")}}]),e}();t.AnnotationLayer=G},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var n=a(5),i=function(){var e=1e5,t=/\S/;function a(e){return!t.test(e)}function i(e,t,i){var o=document.createElement("span"),r={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(e._textDivs.push(o),a(t.str))return r.isWhitespace=!0,void e._textDivProperties.set(o,r);var l=n.Util.transform(e._viewport.transform,t.transform),s=Math.atan2(l[1],l[0]),c=i[t.fontName];c.vertical&&(s+=Math.PI/2);var u,d,p=Math.sqrt(l[2]*l[2]+l[3]*l[3]),h=p;c.ascent?h=c.ascent*h:c.descent&&(h=(1+c.descent)*h),0===s?(u=l[4],d=l[5]-h):(u=l[4]+h*Math.sin(s),d=l[5]-h*Math.cos(s)),o.style.left="".concat(u,"px"),o.style.top="".concat(d,"px"),o.style.fontSize="".concat(p,"px"),o.style.fontFamily=c.fontFamily,o.textContent=t.str,e._fontInspectorEnabled&&(o.dataset.fontName=t.fontName),0!==s&&(r.angle=s*(180/Math.PI));var m=!1;if(t.str.length>1)m=!0;else if(t.transform[0]!==t.transform[3]){var f=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);f!==b&&Math.max(f,b)/Math.min(f,b)>1.5&&(m=!0)}if(m&&(c.vertical?r.canvasWidth=t.height*e._viewport.scale:r.canvasWidth=t.width*e._viewport.scale),e._textDivProperties.set(o,r),e._textContentStream&&e._layoutText(o),e._enhanceTextSelection){var g=1,v=0;0!==s&&(g=Math.cos(s),v=Math.sin(s));var y,_,x=(c.vertical?t.height:t.width)*e._viewport.scale,w=p;0!==s?(y=[g,v,-v,g,u,d],_=n.Util.getAxialAlignedBoundingBox([0,0,x,w],y)):_=[u,d,u+x,d+w],e._bounds.push({left:_[0],top:_[1],right:_[2],bottom:_[3],div:o,size:[x,w],m:y})}}function o(t){if(!t._canceled){var a=t._textDivs,n=t._capability,i=a.length;if(i>e)return t._renderingDone=!0,void n.resolve();if(!t._textContentStream)for(var o=0;o<i;o++)t._layoutText(a[o]);t._renderingDone=!0,n.resolve()}}function r(e,t,a){for(var n=0,i=0;i<a;i++){var o=e[t++];o>0&&(n=n?Math.min(o,n):o)}return n}function l(e){for(var t=e._bounds,a=e._viewport,i=s(a.width,a.height,t),o=0;o<i.length;o++){var l=t[o].div,c=e._textDivProperties.get(l);if(0!==c.angle){var u=i[o],d=t[o],p=d.m,h=p[0],m=p[1],f=[[0,0],[0,d.size[1]],[d.size[0],0],d.size],b=new Float64Array(64);f.forEach((function(e,t){var a=n.Util.applyTransform(e,p);b[t+0]=h&&(u.left-a[0])/h,b[t+4]=m&&(u.top-a[1])/m,b[t+8]=h&&(u.right-a[0])/h,b[t+12]=m&&(u.bottom-a[1])/m,b[t+16]=m&&(u.left-a[0])/-m,b[t+20]=h&&(u.top-a[1])/h,b[t+24]=m&&(u.right-a[0])/-m,b[t+28]=h&&(u.bottom-a[1])/h,b[t+32]=h&&(u.left-a[0])/-h,b[t+36]=m&&(u.top-a[1])/-m,b[t+40]=h&&(u.right-a[0])/-h,b[t+44]=m&&(u.bottom-a[1])/-m,b[t+48]=m&&(u.left-a[0])/m,b[t+52]=h&&(u.top-a[1])/-h,b[t+56]=m&&(u.right-a[0])/m,b[t+60]=h&&(u.bottom-a[1])/-h}));var g=1+Math.min(Math.abs(h),Math.abs(m));c.paddingLeft=r(b,32,16)/g,c.paddingTop=r(b,48,16)/g,c.paddingRight=r(b,0,16)/g,c.paddingBottom=r(b,16,16)/g,e._textDivProperties.set(l,c)}else c.paddingLeft=t[o].left-i[o].left,c.paddingTop=t[o].top-i[o].top,c.paddingRight=i[o].right-t[o].right,c.paddingBottom=i[o].bottom-t[o].bottom,e._textDivProperties.set(l,c)}}function s(e,t,a){var n=a.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));c(e,n);var i=new Array(a.length);return n.forEach((function(e){var t=e.index;i[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}})),a.map((function(t,a){var o=i[a],r=n[a];r.x1=t.top,r.y1=e-o.right,r.x2=t.bottom,r.y2=e-o.left,r.index=a,r.x1New=void 0,r.x2New=void 0})),c(t,n),n.forEach((function(e){var t=e.index;i[t].top=e.x1New,i[t].bottom=e.x2New})),i}function c(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));var a={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},n=[{start:-1/0,end:1/0,boundary:a}];t.forEach((function(e){var t=0;while(t<n.length&&n[t].end<=e.y1)t++;var a,i,o=n.length-1;while(o>=0&&n[o].start>=e.y2)o--;var r,l,s=-1/0;for(r=t;r<=o;r++){var c;a=n[r],i=a.boundary,c=i.x2>e.x1?i.index>e.index?i.x1New:e.x1:void 0===i.x2New?(i.x2+e.x1)/2:i.x2New,c>s&&(s=c)}for(e.x1New=s,r=t;r<=o;r++)a=n[r],i=a.boundary,void 0===i.x2New?i.x2>e.x1?i.index>e.index&&(i.x2New=i.x2):i.x2New=s:i.x2New>s&&(i.x2New=Math.max(s,i.x2));var u=[],d=null;for(r=t;r<=o;r++){a=n[r],i=a.boundary;var p=i.x2>e.x2?i:e;d===p?u[u.length-1].end=a.end:(u.push({start:a.start,end:a.end,boundary:p}),d=p)}for(n[t].start<e.y1&&(u[0].start=e.y1,u.unshift({start:n[t].start,end:e.y1,boundary:n[t].boundary})),e.y2<n[o].end&&(u[u.length-1].end=e.y2,u.push({start:e.y2,end:n[o].end,boundary:n[o].boundary})),r=t;r<=o;r++)if(a=n[r],i=a.boundary,void 0===i.x2New){var h=!1;for(l=t-1;!h&&l>=0&&n[l].start>=i.y1;l--)h=n[l].boundary===i;for(l=o+1;!h&&l<n.length&&n[l].end<=i.y2;l++)h=n[l].boundary===i;for(l=0;!h&&l<u.length;l++)h=u[l].boundary===i;h||(i.x2New=s)}Array.prototype.splice.apply(n,[t,o-t+1].concat(u))})),n.forEach((function(t){var a=t.boundary;void 0===a.x2New&&(a.x2New=Math.max(e,a.x2))}))}function u(e){var t=this,a=e.textContent,i=e.textContentStream,o=e.container,r=e.viewport,l=e.textDivs,s=e.textContentItemsStr,c=e.enhanceTextSelection;this._textContent=a,this._textContentStream=i,this._container=o,this._document=o.ownerDocument,this._viewport=r,this._textDivs=l||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!c,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise["finally"]((function(){t._layoutTextCtx&&(t._layoutTextCtx.canvas.width=0,t._layoutTextCtx.canvas.height=0,t._layoutTextCtx=null)}))["catch"]((function(){}))}function d(e){var t=new u({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t}return u.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function(e,t){for(var a=0,n=e.length;a<n;a++)this._textContentItemsStr.push(e[a].str),i(this,e[a],t)},_layoutText:function(e){var t=this._textDivProperties.get(e);if(!t.isWhitespace){var a="";if(0!==t.canvasWidth){var n=e.style,i=n.fontSize,o=n.fontFamily;i===this._layoutTextLastFontSize&&o===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(i," ").concat(o),this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=o);var r=this._layoutTextCtx.measureText(e.textContent),l=r.width;l>0&&(t.scale=t.canvasWidth/l,a="scaleX(".concat(t.scale,")"))}0!==t.angle&&(a="rotate(".concat(t.angle,"deg) ").concat(a)),a.length>0&&(this._enhanceTextSelection&&(t.originalTransform=a),e.style.transform=a),this._textDivProperties.set(e,t),this._container.appendChild(e)}},_render:function(e){var t=this,a=(0,n.createPromiseCapability)(),i=Object.create(null),r=this._document.createElement("canvas");if(r.mozOpaque=!0,this._layoutTextCtx=r.getContext("2d",{alpha:!1}),this._textContent){var l=this._textContent.items,s=this._textContent.styles;this._processItems(l,s),a.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');var c=function e(){t._reader.read().then((function(n){var o=n.value,r=n.done;r?a.resolve():(Object.assign(i,o.styles),t._processItems(o.items,i),e())}),a.reject)};this._reader=this._textContentStream.getReader(),c()}a.promise.then((function(){i=null,e?t._renderTimer=setTimeout((function(){o(t),t._renderTimer=null}),e):o(t)}),this._capability.reject)},expandTextDivs:function(e){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(l(this),this._bounds=null);for(var t=[],a=[],n=0,i=this._textDivs.length;n<i;n++){var o=this._textDivs[n],r=this._textDivProperties.get(o);r.isWhitespace||(e?(t.length=0,a.length=0,r.originalTransform&&t.push(r.originalTransform),r.paddingTop>0?(a.push("".concat(r.paddingTop,"px")),t.push("translateY(".concat(-r.paddingTop,"px)"))):a.push(0),r.paddingRight>0?a.push("".concat(r.paddingRight/r.scale,"px")):a.push(0),r.paddingBottom>0?a.push("".concat(r.paddingBottom,"px")):a.push(0),r.paddingLeft>0?(a.push("".concat(r.paddingLeft/r.scale,"px")),t.push("translateX(".concat(-r.paddingLeft/r.scale,"px)"))):a.push(0),o.style.padding=a.join(" "),t.length&&(o.style.transform=t.join(" "))):(o.style.padding=null,o.style.transform=r.originalTransform))}}}},d}();t.renderTextLayer=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=a(5),i=a(1),o=a(7);function r(e){return c(e)||s(e)||f(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return b(e)}function u(e,t){return h(e)||p(e,t)||f(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}}function h(e){if(Array.isArray(e))return e}function m(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=f(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}function f(e,t){if(e){if("string"===typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,a){return t&&v(e.prototype,t),a&&v(e,a),e}var _=function(){throw new Error("Not implemented: SVGGraphics")};t.SVGGraphics=_;var x=function(e){var t,a=[],n=[],i=m(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;"save"!==o.fn?"restore"===o.fn?a=n.pop():a.push(o):(a.push({fnId:92,fn:"group",items:[]}),n.push(a),a=a[a.length-1].items)}}catch(r){i.e(r)}finally{i.f()}return a},w=function(e){if(Number.isInteger(e))return e.toString();var t=e.toFixed(10),a=t.length-1;if("0"!==t[a])return t;do{a--}while("0"===t[a]);return t.substring(0,"."===t[a]?a:a+1)},k=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(w(e[0])," ").concat(w(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){var t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(w(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(w(e[4])," ").concat(w(e[5]),")");return"matrix(".concat(w(e[0])," ").concat(w(e[1])," ").concat(w(e[2])," ").concat(w(e[3])," ").concat(w(e[4])," ")+"".concat(w(e[5]),")")},T={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},D="http://www.w3.org/XML/1998/namespace",S="http://www.w3.org/1999/xlink",O=["butt","round","square"],N=["miter","round","bevel"],P=function(){for(var e=new Uint8Array([137,80,78,71,13,10,26,10]),t=12,a=new Int32Array(256),i=0;i<256;i++){for(var r=i,l=0;l<8;l++)r=1&r?3988292384^r>>1&2147483647:r>>1&2147483647;a[i]=r}function s(e,t,n){for(var i=-1,o=t;o<n;o++){var r=255&(i^e[o]),l=a[r];i=i>>>8^l}return-1^i}function c(e,t,a,n){var i=n,o=t.length;a[i]=o>>24&255,a[i+1]=o>>16&255,a[i+2]=o>>8&255,a[i+3]=255&o,i+=4,a[i]=255&e.charCodeAt(0),a[i+1]=255&e.charCodeAt(1),a[i+2]=255&e.charCodeAt(2),a[i+3]=255&e.charCodeAt(3),i+=4,a.set(t,i),i+=t.length;var r=s(a,n+4,i);a[i]=r>>24&255,a[i+1]=r>>16&255,a[i+2]=r>>8&255,a[i+3]=255&r}function u(e,t,a){for(var n=1,i=0,o=t;o<a;++o)n=(n+(255&e[o]))%65521,i=(i+n)%65521;return i<<16|n}function d(e){if(!o.isNodeJS)return p(e);try{var t;t=parseInt(process.versions.node)>=8?e:Buffer.from(e);var a=__webpack_require__(3).deflateSync(t,{level:9});return a instanceof Uint8Array?a:new Uint8Array(a)}catch(i){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+i)}return p(e)}function p(e){var t=e.length,a=65535,n=Math.ceil(t/a),i=new Uint8Array(2+t+5*n+4),o=0;i[o++]=120,i[o++]=156;var r=0;while(t>a)i[o++]=0,i[o++]=255,i[o++]=255,i[o++]=0,i[o++]=0,i.set(e.subarray(r,r+a),o),o+=a,r+=a,t-=a;i[o++]=1,i[o++]=255&t,i[o++]=t>>8&255,i[o++]=255&~t,i[o++]=(65535&~t)>>8&255,i.set(e.subarray(r),o),o+=e.length-r;var l=u(e,0,e.length);return i[o++]=l>>24&255,i[o++]=l>>16&255,i[o++]=l>>8&255,i[o++]=255&l,i}function h(a,i,o,r){var l,s,u,p=a.width,h=a.height,m=a.data;switch(i){case n.ImageKind.GRAYSCALE_1BPP:s=0,l=1,u=p+7>>3;break;case n.ImageKind.RGB_24BPP:s=2,l=8,u=3*p;break;case n.ImageKind.RGBA_32BPP:s=6,l=8,u=4*p;break;default:throw new Error("invalid format")}for(var f=new Uint8Array((1+u)*h),b=0,g=0,v=0;v<h;++v)f[b++]=0,f.set(m.subarray(g,g+u),b),g+=u,b+=u;if(i===n.ImageKind.GRAYSCALE_1BPP&&r){b=0;for(var y=0;y<h;y++){b++;for(var _=0;_<u;_++)f[b++]^=255}}var x=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,h>>24&255,h>>16&255,h>>8&255,255&h,l,s,0,0,0]),w=d(f),k=e.length+3*t+x.length+w.length,T=new Uint8Array(k),D=0;return T.set(e,D),D+=e.length,c("IHDR",x,T,D),D+=t+x.length,c("IDATA",w,T,D),D+=t+w.length,c("IEND",new Uint8Array(0),T,D),(0,n.createObjectURL)(T,"image/png",o)}return function(e,t,a){var i=void 0===e.kind?n.ImageKind.GRAYSCALE_1BPP:e.kind;return h(e,i,t,a)}}(),C=function(){function e(){g(this,e),this.fontSizeScale=1,this.fontWeight=T.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=T.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return y(e,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(e,t){this.x=e,this.y=t}}]),e}(),A=0,F=0,I=0;t.SVGGraphics=_=function(){function e(t,a){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r in g(this,e),this.svgFactory=new i.DOMSVGFactory,this.current=new C,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!o,this._operatorIdMapping=[],n.OPS)this._operatorIdMapping[n.OPS[r]]=r}return y(e,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(e){this.save(),this.executeOpTree(e),this.restore()}},{key:"loadDependencies",value:function(e){for(var t=this,a=e.fnArray,i=e.argsArray,o=0,r=a.length;o<r;o++)if(a[o]===n.OPS.dependency){var l,s=m(i[o]);try{var c=function(){var e=l.value,a=e.startsWith("g_")?t.commonObjs:t.objs,n=new Promise((function(t){a.get(e,t)}));t.current.dependencies.push(n)};for(s.s();!(l=s.n()).done;)c()}catch(u){s.e(u)}finally{s.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(e,t,a,i,o,r){var l=[e,t,a,i,o,r];this.transformMatrix=n.Util.transform(this.transformMatrix,l),this.tgrp=null}},{key:"getSVG",value:function(e,t){var a=this;this.viewport=t;var i=this._initialize(t);return this.loadDependencies(e).then((function(){return a.transformMatrix=n.IDENTITY_MATRIX,a.executeOpTree(a.convertOpList(e)),i}))}},{key:"convertOpList",value:function(e){for(var t=this._operatorIdMapping,a=e.argsArray,n=e.fnArray,i=[],o=0,r=n.length;o<r;o++){var l=n[o];i.push({fnId:l,fn:t[l],args:a[o]})}return x(i)}},{key:"executeOpTree",value:function(e){var t,a=m(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=i.fn,r=i.fnId,l=i.args;switch(0|r){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(l);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case n.OPS.setFont:this.setFont(l);break;case n.OPS.showText:this.showText(l[0]);break;case n.OPS.showSpacedText:this.showText(l[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(l[0],l[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case n.OPS.setHScale:this.setHScale(l[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case n.OPS.setTextRise:this.setTextRise(l[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case n.OPS.setLineWidth:this.setLineWidth(l[0]);break;case n.OPS.setLineJoin:this.setLineJoin(l[0]);break;case n.OPS.setLineCap:this.setLineCap(l[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case n.OPS.setFillColorN:this.setFillColorN(l);break;case n.OPS.shadingFill:this.shadingFill(l[0]);break;case n.OPS.setDash:this.setDash(l[0],l[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case n.OPS.setFlatness:this.setFlatness(l[0]);break;case n.OPS.setGState:this.setGState(l[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case n.OPS.constructPath:this.constructPath(l[0],l[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,n.warn)("Unimplemented operator ".concat(o));break}}}catch(s){a.e(s)}finally{a.f()}}},{key:"setWordSpacing",value:function(e){this.current.wordSpacing=e}},{key:"setCharSpacing",value:function(e){this.current.charSpacing=e}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(e,t,a,n,i,o){var r=this.current;r.textMatrix=r.lineMatrix=[e,t,a,n,i,o],r.textMatrixScale=Math.sqrt(e*e+t*t),r.x=r.lineX=0,r.y=r.lineY=0,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size","".concat(w(r.fontSize),"px")),r.tspan.setAttributeNS(null,"y",w(-r.y)),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtElement.appendChild(r.tspan)}},{key:"beginText",value:function(){var e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=n.IDENTITY_MATRIX,e.lineMatrix=n.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}},{key:"moveText",value:function(e,t){var a=this.current;a.x=a.lineX+=e,a.y=a.lineY+=t,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size","".concat(w(a.fontSize),"px")),a.tspan.setAttributeNS(null,"y",w(-a.y))}},{key:"showText",value:function(e){var t=this.current,a=t.font,i=t.fontSize;if(0!==i){var o,r=t.fontSizeScale,l=t.charSpacing,s=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,d=a.vertical,p=d?1:-1,h=a.defaultVMetrics,f=i*t.fontMatrix[0],b=0,g=m(e);try{for(g.s();!(o=g.n()).done;){var v=o.value;if(null!==v)if((0,n.isNum)(v))b+=p*v*i/1e3;else{var y=(v.isSpace?s:0)+l,_=v.fontChar,x=void 0,S=void 0,O=v.width;if(d){var N=void 0,P=v.vmetric||h;N=v.vmetric?P[1]:.5*O,N=-N*f;var C=P[2]*f;O=P?-P[0]:O,x=N/r,S=(b+C)/r}else x=b/r,S=0;(v.isInFont||a.missingFile)&&(t.xcoords.push(t.x+x),d&&t.ycoords.push(-t.y+S),t.tspan.textContent+=_);var A=void 0;A=d?O*f-y*c:O*f+y*c,b+=A}else b+=c*s}}catch(R){g.e(R)}finally{g.f()}t.tspan.setAttributeNS(null,"x",t.xcoords.map(w).join(" ")),d?t.tspan.setAttributeNS(null,"y",t.ycoords.map(w).join(" ")):t.tspan.setAttributeNS(null,"y",w(-t.y)),d?t.y-=b:t.x+=b*u,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(w(t.fontSize),"px")),t.fontStyle!==T.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==T.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);var F=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(F===n.TextRenderingMode.FILL||F===n.TextRenderingMode.FILL_STROKE?(t.fillColor!==T.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),F===n.TextRenderingMode.STROKE||F===n.TextRenderingMode.FILL_STROKE){var I=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,I)}var E=t.textMatrix;0!==t.textRise&&(E=E.slice(),E[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(k(E)," scale(").concat(w(u),", -1)")),t.txtElement.setAttributeNS(D,"xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}}},{key:"setLeadingMoveText",value:function(e,t){this.setLeading(-t),this.moveText(e,t)}},{key:"addFontStyle",value:function(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=(0,n.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}},{key:"setFont",value:function(e){var t=this.current,a=this.commonObjs.get(e[0]),i=e[1];t.font=a,!this.embedFonts||a.missingFile||this.embeddedFonts[a.loadedName]||(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),t.fontMatrix=a.fontMatrix?a.fontMatrix:n.FONT_IDENTITY_MATRIX;var o="normal";a.black?o="900":a.bold&&(o="bold");var r=a.italic?"italic":"normal";i<0?(i=-i,t.fontDirection=-1):t.fontDirection=1,t.fontSize=i,t.fontFamily=a.loadedName,t.fontWeight=o,t.fontStyle=r,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",w(-t.y)),t.xcoords=[],t.ycoords=[]}},{key:"endText",value:function(){var e=this.current;e.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement&&e.txtElement.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(e){e>0&&(this.current.lineWidth=e)}},{key:"setLineCap",value:function(e){this.current.lineCap=O[e]}},{key:"setLineJoin",value:function(e){this.current.lineJoin=N[e]}},{key:"setMiterLimit",value:function(e){this.current.miterLimit=e}},{key:"setStrokeAlpha",value:function(e){this.current.strokeAlpha=e}},{key:"setStrokeRGBColor",value:function(e,t,a){this.current.strokeColor=n.Util.makeCssRgb(e,t,a)}},{key:"setFillAlpha",value:function(e){this.current.fillAlpha=e}},{key:"setFillRGBColor",value:function(e,t,a){this.current.fillColor=n.Util.makeCssRgb(e,t,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(e){this.current.strokeColor=this._makeColorN_Pattern(e)}},{key:"setFillColorN",value:function(e){this.current.fillColor=this._makeColorN_Pattern(e)}},{key:"shadingFill",value:function(e){var t=this.viewport.width,a=this.viewport.height,i=n.Util.inverseTransform(this.transformMatrix),o=n.Util.applyTransform([0,0],i),r=n.Util.applyTransform([0,a],i),l=n.Util.applyTransform([t,0],i),s=n.Util.applyTransform([t,a],i),c=Math.min(o[0],r[0],l[0],s[0]),u=Math.min(o[1],r[1],l[1],s[1]),d=Math.max(o[0],r[0],l[0],s[0]),p=Math.max(o[1],r[1],l[1],s[1]),h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",c),h.setAttributeNS(null,"y",u),h.setAttributeNS(null,"width",d-c),h.setAttributeNS(null,"height",p-u),h.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&h.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(h)}},{key:"_makeColorN_Pattern",value:function(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}},{key:"_makeTilingPattern",value:function(e){var t=e[1],a=e[2],i=e[3]||n.IDENTITY_MATRIX,o=u(e[4],4),l=o[0],s=o[1],c=o[2],d=o[3],p=e[5],h=e[6],m=e[7],f="shading".concat(I++),b=n.Util.applyTransform([l,s],i),g=u(b,2),v=g[0],y=g[1],_=n.Util.applyTransform([c,d],i),x=u(_,2),w=x[0],k=x[1],T=n.Util.singularValueDecompose2dScale(i),D=u(T,2),S=D[0],O=D[1],N=p*S,P=h*O,C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",f),C.setAttributeNS(null,"patternUnits","userSpaceOnUse"),C.setAttributeNS(null,"width",N),C.setAttributeNS(null,"height",P),C.setAttributeNS(null,"x","".concat(v)),C.setAttributeNS(null,"y","".concat(y));var A=this.svg,F=this.transformMatrix,E=this.current.fillColor,R=this.current.strokeColor,z=this.svgFactory.create(w-v,k-y);if(this.svg=z,this.transformMatrix=i,2===m){var j=n.Util.makeCssRgb.apply(n.Util,r(t));this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(a)),this.svg=A,this.transformMatrix=F,this.current.fillColor=E,this.current.strokeColor=R,C.appendChild(z.childNodes[0]),this.defs.appendChild(C),"url(#".concat(f,")")}},{key:"_makeShadingPattern",value:function(e){switch(e[0]){case"RadialAxial":var t,a="shading".concat(I++),i=e[3];switch(e[1]){case"axial":var o=e[4],r=e[5];t=this.svgFactory.createElement("svg:linearGradient"),t.setAttributeNS(null,"id",a),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"x1",o[0]),t.setAttributeNS(null,"y1",o[1]),t.setAttributeNS(null,"x2",r[0]),t.setAttributeNS(null,"y2",r[1]);break;case"radial":var l=e[4],s=e[5],c=e[6],u=e[7];t=this.svgFactory.createElement("svg:radialGradient"),t.setAttributeNS(null,"id",a),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"cx",s[0]),t.setAttributeNS(null,"cy",s[1]),t.setAttributeNS(null,"r",u),t.setAttributeNS(null,"fx",l[0]),t.setAttributeNS(null,"fy",l[1]),t.setAttributeNS(null,"fr",c);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}var d,p=m(i);try{for(p.s();!(d=p.n()).done;){var h=d.value,f=this.svgFactory.createElement("svg:stop");f.setAttributeNS(null,"offset",h[0]),f.setAttributeNS(null,"stop-color",h[1]),t.appendChild(f)}}catch(b){p.e(b)}finally{p.f()}return this.defs.appendChild(t),"url(#".concat(a,")");case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}},{key:"setDash",value:function(e,t){this.current.dashArray=e,this.current.dashPhase=t}},{key:"constructPath",value:function(e,t){var a,i=this.current,o=i.x,r=i.y,l=[],s=0,c=m(e);try{for(c.s();!(a=c.n()).done;){var u=a.value;switch(0|u){case n.OPS.rectangle:o=t[s++],r=t[s++];var d=t[s++],p=t[s++],h=o+d,f=r+p;l.push("M",w(o),w(r),"L",w(h),w(r),"L",w(h),w(f),"L",w(o),w(f),"Z");break;case n.OPS.moveTo:o=t[s++],r=t[s++],l.push("M",w(o),w(r));break;case n.OPS.lineTo:o=t[s++],r=t[s++],l.push("L",w(o),w(r));break;case n.OPS.curveTo:o=t[s+4],r=t[s+5],l.push("C",w(t[s]),w(t[s+1]),w(t[s+2]),w(t[s+3]),w(o),w(r)),s+=6;break;case n.OPS.curveTo2:l.push("C",w(o),w(r),w(t[s]),w(t[s+1]),w(t[s+2]),w(t[s+3])),o=t[s+2],r=t[s+3],s+=4;break;case n.OPS.curveTo3:o=t[s+2],r=t[s+3],l.push("C",w(t[s]),w(t[s+1]),w(o),w(r),w(o),w(r)),s+=4;break;case n.OPS.closePath:l.push("Z");break}}}catch(b){c.e(b)}finally{c.f()}l=l.join(" "),i.path&&e.length>0&&e[0]!==n.OPS.rectangle&&e[0]!==n.OPS.moveTo?l=i.path.getAttributeNS(null,"d")+l:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(i.path)),i.path.setAttributeNS(null,"d",l),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(o,r)}},{key:"endPath",value:function(){var e=this.current;if(e.path=null,this.pendingClip)if(e.element){var t="clippath".concat(A++),a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",t),a.setAttributeNS(null,"transform",k(this.transformMatrix));var n=e.element.cloneNode(!0);"evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,a.appendChild(n),this.defs.appendChild(a),e.activeClipUrl&&(e.clipGroup=null,this.extraStack.forEach((function(e){e.clipGroup=null})),a.setAttributeNS(null,"clip-path",e.activeClipUrl)),e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(e){this.pendingClip=e}},{key:"closePath",value:function(){var e=this.current;if(e.path){var t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}},{key:"setLeading",value:function(e){this.current.leading=-e}},{key:"setTextRise",value:function(e){this.current.textRise=e}},{key:"setTextRenderingMode",value:function(e){this.current.textRenderingMode=e}},{key:"setHScale",value:function(e){this.current.textHScale=e/100}},{key:"setRenderingIntent",value:function(e){}},{key:"setFlatness",value:function(e){}},{key:"setGState",value:function(e){var t,a=m(e);try{for(a.s();!(t=a.n()).done;){var i=u(t.value,2),o=i[0],r=i[1];switch(o){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,n.warn)("Unimplemented graphic state operator ".concat(o));break}}}catch(l){a.e(l)}finally{a.f()}}},{key:"fill",value:function(){var e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.current,n=a.dashArray;1!==t&&n.length>0&&(n=n.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",a.strokeColor),e.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",w(a.miterLimit)),e.setAttributeNS(null,"stroke-linecap",a.lineCap),e.setAttributeNS(null,"stroke-linejoin",a.lineJoin),e.setAttributeNS(null,"stroke-width",w(t*a.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",n.map(w).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",w(t*a.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}},{key:"paintImageXObject",value:function(e){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,n.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(e,t){var a=e.width,n=e.height,i=P(e,this.forceDataSchema,!!t),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",w(a)),o.setAttributeNS(null,"height",w(n)),this.current.element=o,this.clip("nonzero");var r=this.svgFactory.createElement("svg:image");r.setAttributeNS(S,"xlink:href",i),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y",w(-n)),r.setAttributeNS(null,"width",w(a)+"px"),r.setAttributeNS(null,"height",w(n)+"px"),r.setAttributeNS(null,"transform","scale(".concat(w(1/a)," ").concat(w(-1/n),")")),t?t.appendChild(r):this._ensureTransformGroup().appendChild(r)}},{key:"paintImageMaskXObject",value:function(e){var t=this.current,a=e.width,n=e.height,i=t.fillColor;t.maskId="mask".concat(F++);var o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",t.maskId);var r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width",w(a)),r.setAttributeNS(null,"height",w(n)),r.setAttributeNS(null,"fill",i),r.setAttributeNS(null,"mask","url(#".concat(t.maskId,")")),this.defs.appendChild(o),this._ensureTransformGroup().appendChild(r),this.paintInlineImageXObject(e,o)}},{key:"paintFormXObjectBegin",value:function(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){var a=t[2]-t[0],n=t[3]-t[1],i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x",t[0]),i.setAttributeNS(null,"y",t[1]),i.setAttributeNS(null,"width",w(a)),i.setAttributeNS(null,"height",w(n)),this.current.element=i,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(e){var t=this.svgFactory.create(e.width,e.height),a=this.svgFactory.createElement("svg:defs");t.appendChild(a),this.defs=a;var n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",k(e.transform)),t.appendChild(n),this.svg=n,t}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",k(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),e}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=r(a(2)),i=a(5),o=a(220);function r(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=h();return function(){var a,n=m(e);if(t){var i=m(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return d(this,a)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function f(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){f(o,n,i,r,l,"next",e)}function l(e){f(o,n,i,r,l,"throw",e)}r(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,a){return t&&v(e.prototype,t),a&&v(e,a),e}var _=__webpack_require__(1),x=__webpack_require__(4),w=__webpack_require__(5),k=__webpack_require__(6),T=/^file:\/\/\/[a-zA-Z]:\//;function D(e){var t=k.parse(e);return"file:"===t.protocol||t.host?t:/^[a-z]:[/\\]/i.test(e)?k.parse("file:///".concat(e)):(t.host||(t.protocol="file:"),t)}var S=function(){function e(t){g(this,e),this.source=t,this.url=D(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return y(e,[{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new F(this):new C(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var a=this.isFsUrl?new I(this,e,t):new A(this,e,t);return this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t=this._rangeRequestReaders.slice(0);t.forEach((function(t){t.cancel(e)}))}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),e}();t.PDFNodeStream=S;var O=function(){function e(t){g(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var a=t.source;this._contentLength=a.length,this._loaded=0,this._filename=null,this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}return y(e,[{key:"read",value:function(){var e=b(n["default"].mark((function e(){var t,a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(t=this._readableStream.read(),null!==t){e.next=10;break}return this._readCapability=(0,i.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),a=new Uint8Array(t).buffer,e.abrupt("return",{value:a,done:!1});case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}(),N=function(){function e(t){g(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();var a=t.source;this._isStreamingSupported=!a.disableStream}return y(e,[{key:"read",value:function(){var e=b(n["default"].mark((function e(){var t,a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(t=this._readableStream.read(),null!==t){e.next=10;break}return this._readCapability=(0,i.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),a=new Uint8Array(t).buffer,e.abrupt("return",{value:a,done:!1});case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}();function P(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}var C=function(e){s(a,e);var t=u(a);function a(e){var n;g(this,a),n=t.call(this,e);var r=function(t){if(404===t.statusCode){var a=new i.MissingPDFException('Missing PDF "'.concat(n._url,'".'));return n._storedError=a,void n._headersCapability.reject(a)}n._headersCapability.resolve(),n._setReadableStream(t);var r=function(e){return n._readableStream.headers[e.toLowerCase()]},l=(0,o.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=l.allowRangeRequests,c=l.suggestedLength;n._isRangeSupported=s,n._contentLength=c||n._contentLength,n._filename=(0,o.extractFilenameFromHeader)(r)};return n._request=null,"http:"===n._url.protocol?n._request=x.request(P(n._url,e.httpHeaders),r):n._request=w.request(P(n._url,e.httpHeaders),r),n._request.on("error",(function(e){n._storedError=e,n._headersCapability.reject(e)})),n._request.end(),n}return a}(O),A=function(e){s(a,e);var t=u(a);function a(e,n,o){var r;for(var l in g(this,a),r=t.call(this,e),r._httpHeaders={},e.httpHeaders){var s=e.httpHeaders[l];"undefined"!==typeof s&&(r._httpHeaders[l]=s)}r._httpHeaders.Range="bytes=".concat(n,"-").concat(o-1);var c=function(e){if(404!==e.statusCode)r._setReadableStream(e);else{var t=new i.MissingPDFException('Missing PDF "'.concat(r._url,'".'));r._storedError=t}};return r._request=null,"http:"===r._url.protocol?r._request=x.request(P(r._url,r._httpHeaders),c):r._request=w.request(P(r._url,r._httpHeaders),c),r._request.on("error",(function(e){r._storedError=e})),r._request.end(),r}return a}(N),F=function(e){s(a,e);var t=u(a);function a(e){var n;g(this,a),n=t.call(this,e);var o=decodeURIComponent(n._url.path);return T.test(n._url.href)&&(o=o.replace(/^\//,"")),_.lstat(o,(function(e,t){if(e)return"ENOENT"===e.code&&(e=new i.MissingPDFException('Missing PDF "'.concat(o,'".'))),n._storedError=e,void n._headersCapability.reject(e);n._contentLength=t.size,n._setReadableStream(_.createReadStream(o)),n._headersCapability.resolve()})),n}return a}(O),I=function(e){s(a,e);var t=u(a);function a(e,n,i){var o;g(this,a),o=t.call(this,e);var r=decodeURIComponent(o._url.path);return T.test(o._url.href)&&(r=r.replace(/^\//,"")),o._setReadableStream(_.createReadStream(r,{start:n,end:i-1})),o}return a}(N)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=l,t.extractFilenameFromHeader=r,t.validateRangeRequestCapabilities=o,t.validateResponseStatus=s;var n=a(5),i=a(221);function o(e){var t=e.getResponseHeader,a=e.isHttp,i=e.rangeChunkSize,o=e.disableRange;(0,n.assert)(i>0,"Range chunk size must be larger than zero");var r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(t("Content-Length"),10);if(!Number.isInteger(l))return r;if(r.suggestedLength=l,l<=2*i)return r;if(o||!a)return r;if("bytes"!==t("Accept-Ranges"))return r;var s=t("Content-Encoding")||"identity";return"identity"!==s||(r.allowRangeRequests=!0),r}function r(e){var t=e("Content-Disposition");if(t){var a=(0,i.getFilenameFromContentDispositionHeader)(t);if(a.includes("%"))try{a=decodeURIComponent(a)}catch(n){}if(/\.pdf$/i.test(a))return a}return null}function l(e,t){return 404===e||0===e&&t.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+t+'".'):new n.UnexpectedResponseException("Unexpected server response ("+e+') while retrieving PDF "'+t+'".',e)}function s(e){return 200===e||206===e}},function(e,t,a){"use strict";function n(e,t){return s(e)||l(e,t)||o(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function l(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}}function s(e){if(Array.isArray(e))return e}function c(e){var t=!0,a=l("filename\\*","i").exec(e);if(a){a=a[1];var i=d(a);return i=unescape(i),i=p(i),i=h(i),c(i)}if(a=u(e),a){var o=h(a);return c(o)}if(a=l("filename","i").exec(e),a){a=a[1];var r=d(a);return r=h(r),c(r)}function l(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,a){if(e){if(!/^[\x00-\xFF]+$/.test(a))return a;try{var n=new TextDecoder(e,{fatal:!0}),i=Array.from(a,(function(e){return 255&e.charCodeAt(0)}));a=n.decode(new Uint8Array(i)),t=!1}catch(o){if(/^utf-?8$/i.test(e))try{a=decodeURIComponent(escape(a)),t=!1}catch(r){}}}return a}function c(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function u(e){var t,a=[],i=l("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while(null!==(t=i.exec(e))){var o=t,r=n(o,4),s=r[1],c=r[2],u=r[3];if(s=parseInt(s,10),s in a){if(0===s)break}else a[s]=[c,u]}for(var h=[],m=0;m<a.length;++m){if(!(m in a))break;var f=n(a[m],2),b=f[0],g=f[1];g=d(g),b&&(g=unescape(g),0===m&&(g=p(g))),h.push(g)}return h.join("")}function d(e){if(e.startsWith('"')){for(var t=e.slice(1).split('\\"'),a=0;a<t.length;++a){var n=t[a].indexOf('"');-1!==n&&(t[a]=t[a].slice(0,n),t.length=a+1),t[a]=t[a].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function p(e){var t=e.indexOf("'");if(-1===t)return e;var a=e.slice(0,t),n=e.slice(t+1),i=n.replace(/^[^']*'/,"");return s(a,i)}function h(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,a,n){if("q"===a||"Q"===a)return n=n.replace(/_/g," "),n=n.replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})),s(t,n);try{n=atob(n)}catch(i){}return s(t,n)}))}return""}Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=r(a(2)),i=a(5),o=a(220);function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){l(o,n,i,r,s,"next",e)}function s(e){l(o,n,i,r,s,"throw",e)}r(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,a){return t&&u(e.prototype,t),a&&u(e,a),e}var p=200,h=206;function m(e){var t=e.response;if("string"!==typeof t)return t;var a=(0,i.stringToBytes)(t);return a.buffer}var f=function(){function e(t,a){c(this,e),this.url=t,a=a||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&a.httpHeaders||{},this.withCredentials=a.withCredentials||!1,this.getXhr=a.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return d(e,[{key:"requestRange",value:function(e,t,a){var n={begin:e,end:t};for(var i in a)n[i]=a[i];return this.request(n)}},{key:"requestFull",value:function(e){return this.request(e)}},{key:"request",value:function(e){var t=this.getXhr(),a=this.currXhrId++,n=this.pendingRequests[a]={xhr:t};for(var i in t.open("GET",this.url),t.withCredentials=this.withCredentials,this.httpHeaders){var o=this.httpHeaders[i];"undefined"!==typeof o&&t.setRequestHeader(i,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),n.expectedStatus=h):n.expectedStatus=p,t.responseType="arraybuffer",e.onError&&(t.onerror=function(a){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,a),t.onprogress=this.onProgress.bind(this,a),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),a}},{key:"onProgress",value:function(e,t){var a=this.pendingRequests[e];a&&a.onProgress&&a.onProgress(t)}},{key:"onStateChange",value:function(e,t){var a=this.pendingRequests[e];if(a){var n=a.xhr;if(n.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),4===n.readyState&&e in this.pendingRequests)if(delete this.pendingRequests[e],0===n.status&&this.isHttp)a.onError&&a.onError(n.status);else{var i=n.status||p,o=i===p&&a.expectedStatus===h;if(o||i===a.expectedStatus){var r=m(n);if(i===h){var l=n.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);a.onDone({begin:parseInt(s[1],10),chunk:r})}else r?a.onDone({begin:0,chunk:r}):a.onError&&a.onError(n.status)}else a.onError&&a.onError(n.status)}}}},{key:"getRequestXhr",value:function(e){return this.pendingRequests[e].xhr}},{key:"isPendingRequest",value:function(e){return e in this.pendingRequests}},{key:"abortRequest",value:function(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}]),e}(),b=function(){function e(t){c(this,e),this._source=t,this._manager=new f(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(e,[{key:"_onRangeRequestReaderClosed",value:function(e){var t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){var a=new v(this._manager,e,t);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t=this._rangeRequestReaders.slice(0);t.forEach((function(t){t.cancel(e)}))}}]),e}();t.PDFNetworkStream=b;var g=function(){function e(t,a){c(this,e),this._manager=t;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=a.disableRange||!1,this._contentLength=a.length,this._rangeChunkSize=a.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}return d(e,[{key:"_onHeadersReceived",value:function(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),a=function(e){return t.getResponseHeader(e)},n=(0,o.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),i=n.allowRangeRequests,r=n.suggestedLength;i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(e){if(e)if(this._requests.length>0){var t=this._requests.shift();t.resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[])}},{key:"_onError",value:function(e){var t=this._url,a=(0,o.createResponseStatusError)(e,t);this._storedError=a,this._headersReceivedCapability.reject(a),this._requests.forEach((function(e){e.reject(a)})),this._requests=[],this._cachedChunks=[]}},{key:"_onProgress",value:function(e){this.onProgress&&this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}},{key:"read",value:function(){var e=s(n["default"].mark((function e(){var t,a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){e.next=5;break}return t=this._cachedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 5:if(!this._done){e.next=7;break}return e.abrupt("return",{value:void 0,done:!0});case 7:return a=(0,i.createPromiseCapability)(),this._requests.push(a),e.abrupt("return",a.promise);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._done=!0,this._headersReceivedCapability.reject(e),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}}]),e}(),v=function(){function e(t,a,n){c(this,e),this._manager=t;var i={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(a,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}return d(e,[{key:"_close",value:function(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function(e){var t=e.chunk;if(this._requests.length>0){var a=this._requests.shift();a.resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}},{key:"_onProgress",value:function(e){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:e.loaded})}},{key:"read",value:function(){var e=s(n["default"].mark((function e(){var t,a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return a=(0,i.createPromiseCapability)(),this._requests.push(a),e.abrupt("return",a.promise);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},{key:"isStreamingSupported",get:function(){return!1}}]),e}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=r(a(2)),i=a(5),o=a(220);function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){l(o,n,i,r,s,"next",e)}function s(e){l(o,n,i,r,s,"throw",e)}r(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,a){return t&&u(e.prototype,t),a&&u(e,a),e}function p(e,t,a){return{method:"GET",headers:e,signal:a&&a.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function h(e){var t=new Headers;for(var a in e){var n=e[a];"undefined"!==typeof n&&t.append(a,n)}return t}var m=function(){function e(t){c(this,e),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(e,[{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var a=new b(this,e,t);return this._rangeRequestReaders.push(a),a}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t=this._rangeRequestReaders.slice(0);t.forEach((function(t){t.cancel(e)}))}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),e}();t.PDFFetchStream=m;var f=function(){function e(t){var a=this;c(this,e),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._headers=h(this._stream.httpHeaders);var r=n.url;fetch(r,p(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,o.validateResponseStatus)(e.status))throw(0,o.createResponseStatusError)(e.status,r);a._reader=e.body.getReader(),a._headersCapability.resolve();var t=function(t){return e.headers.get(t)},n=(0,o.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:a._stream.isHttp,rangeChunkSize:a._rangeChunkSize,disableRange:a._disableRange}),l=n.allowRangeRequests,s=n.suggestedLength;a._isRangeSupported=l,a._contentLength=s||a._contentLength,a._filename=(0,o.extractFilenameFromHeader)(t),!a._isStreamingSupported&&a._isRangeSupported&&a.cancel(new i.AbortException("Streaming is disabled."))}))["catch"](this._headersCapability.reject),this.onProgress=null}return d(e,[{key:"read",value:function(){var e=s(n["default"].mark((function e(){var t,a,i,o;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._headersCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,a=t.value,i=t.done,!i){e.next=9;break}return e.abrupt("return",{value:a,done:i});case 9:return this._loaded+=a.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),o=new Uint8Array(a).buffer,e.abrupt("return",{value:o,done:!1});case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}(),b=function(){function e(t,a,n){var r=this;c(this,e),this._stream=t,this._reader=null,this._loaded=0;var l=t.source;this._withCredentials=l.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!l.disableStream,"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._headers=h(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(a,"-").concat(n-1));var s=l.url;fetch(s,p(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,o.validateResponseStatus)(e.status))throw(0,o.createResponseStatusError)(e.status,s);r._readCapability.resolve(),r._reader=e.body.getReader()}))["catch"]((function(e){if(!e||"AbortError"!==e.name)throw e})),this.onProgress=null}return d(e,[{key:"read",value:function(){var e=s(n["default"].mark((function e(){var t,a,i,o;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,a=t.value,i=t.done,!i){e.next=9;break}return e.abrupt("return",{value:a,done:i});case 9:return this._loaded+=a.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),o=new Uint8Array(a).buffer,e.abrupt("return",{value:o,done:!1});case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}()}])}))}).call(this,__webpack_require__("b639").Buffer,__webpack_require__("4362"),__webpack_require__("c8ba"))},4543:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container",staticStyle:{height:"100%"},attrs:{"element-loading-text":"数据同步中","element-loading-custom-class":"el-loading-main","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-alert",{attrs:{title:"确认签名仅在征期内进行，签名后若还未进行申报则支持撤销签名（撤销签名后不影响之前已勾选发票的勾选状态）",type:"warning",closable:!1,"show-icon":""}}),a("div",{staticClass:"sign_tips"},[e._v(" 当前状态： "),"0"==e.tjzt?a("b",[e._v("尚未申请统计")]):e._e(),"1"==e.tjzt?a("b",[e._v("已勾选未签名"),a("span",{staticClass:"sign_tips_catching"},[e._v(e._s(e.getInvoiceNum))]),e._v("张发票")]):e._e(),"2"==e.tjzt?a("b",[e._v("已勾选已签名"),a("span",{staticClass:"sign_tips_catching"},[e._v(e._s(e.getInvoiceNum))]),e._v("张发票")]):e._e(),"0"==e.tjzt?a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:statist"],expression:"['income:gxrz:statist']"}],staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.signNameSure(1)}}},[e._v("申请统计")]):e._e(),"1"==e.tjzt||"2"==e.tjzt?a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:statist"],expression:"['income:gxrz:statist']"}],staticStyle:{"margin-left":"30px"},attrs:{type:"warning",icon:"el-icon-close",size:"mini"},on:{click:function(t){return e.signNameSure(2)}}},[e._v("撤销统计")]):e._e(),"1"==e.tjzt?a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:statist"],expression:"['income:gxrz:statist']"}],staticStyle:{"margin-left":"30px"},attrs:{type:"success",icon:"el-icon-check",size:"mini"},on:{click:function(t){return e.signNameSure(3)}}},[e._v("确认签名")]):e._e()],1),a("el-table",{attrs:{data:0==e.tjxx.length?e.defaultData:e.tjxx}},[a("el-table-column",{attrs:{label:"发票实时统计表",align:"center","render-header":e.renderHeader}},[a("el-table-column",{attrs:{label:"发票类型",align:"center",prop:"invoiceType"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getInvoiceTypeName(t.row.invoiceType))+" ")]}}])}),a("el-table-column",{attrs:{label:"抵扣",align:"center"}},[a("el-table-column",{attrs:{label:"份数",align:"center",prop:"deductibleNum"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.deductibleNum?"0":t.row.deductibleNum||"—")+" ")]}}])}),a("el-table-column",{attrs:{label:"金额（元）",align:"right",prop:"deductibleAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.deductibleAmount?"0":t.row.deductibleAmount||"—")+" ")]}}])}),a("el-table-column",{attrs:{label:"有效税额（元）",align:"right",prop:"deductibleTax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.deductibleTax?"0":t.row.deductibleTax||"—")+" ")]}}])})],1),a("el-table-column",{attrs:{label:"不抵扣",align:"center"}},[a("el-table-column",{attrs:{label:"份数",align:"center",prop:"unDeductibleNum"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.unDeductibleNum?"0":t.row.unDeductibleNum||"—")+" ")]}}])}),a("el-table-column",{attrs:{label:"金额（元）",align:"right",prop:"unDeductibleAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.unDeductibleAmount?"0":t.row.unDeductibleAmount||"—")+" ")]}}])}),a("el-table-column",{attrs:{label:"税额（元）",align:"right",prop:"unDeductibleTax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.unDeductibleTax?"0":t.row.unDeductibleTax||"—")+" ")]}}])})],1)],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"确认签名密码",visible:e.signNamePassOpen,width:"400px","append-to-body":"",id:"signNamePassModal","close-on-click-modal":!1},on:{"update:visible":function(t){e.signNamePassOpen=t},close:e.signNamePassDialogClose}},[a("div",[a("el-form",{ref:"signNamePassForm",attrs:{model:e.signNamePassForm,rules:e.signNamePassFormRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"签名密码",prop:"qrmm"}},[a("el-input",{attrs:{type:"password"},model:{value:e.signNamePassForm.qrmm,callback:function(t){e.$set(e.signNamePassForm,"qrmm",t)},expression:"signNamePassForm.qrmm"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitSignNamePass}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.signNamePassOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("45c6"),r=a("ed3b"),l=a("b526"),s=(a("ed08"),a("c38a")),c={name:"signname",components:{TotalRowTable:l["default"]},data:function(){return{tjzt:null,tjsjstr:null,tjxx:[],defaultData:[{invoiceType:"01",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"03",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"08",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"14",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"17",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"24",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"30",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"99",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""}],routeLoading:!1,pageSizes:[],tableHeight:null,loading:!1,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,gxrzList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],gxztOptions:[],glztOptions:[],abnormalTypeOptions:[],operationStateOptions:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,buyTaxNo:null,buyName:null,sellTaxNo:null,sellName:null,invType:null,state:null,gxzt:"0",gxTime:null,totalWithoutAmount:null,taxAmount:null,validTaxAmount:null,sssq:null,glzt:null,abnormalType:null,operationState:null,operationMsg:null,deptId:null,gxMode:null,cxMode:null},form:{},rules:{},gxModeOptions:[],cxModeOptions:[],functionName:"签名中",showProgress:!1,loadingTime:null,signNamePassOpen:!1,signNamePassForm:{qrmm:null},signNamePassFormRules:{qrmm:[{required:!0,message:"密码不能为空",trigger:["blur","change"]}]},statisticsStatusOverLoadTimes:0}},computed:{getInvoiceNum:function(){if(0!=this.tjxx.length)for(var e=0,t=this.tjxx.length;e<t;e++)if("99"==this.tjxx[e].invoiceType)return parseFloat(this.tjxx[e].deductibleNum)+parseFloat(this.tjxx[e].unDeductibleNum);return 0}},created:function(){this.initGet()},methods:{initGet:function(){var e=this;this.routeLoading=!0,Object(o["e"])().then((function(t){200==t.code?(e.tjzt=t.data.tjzt,e.tjsjstr=t.data.tjsjstr,e.tjxx=t.data.tjxx,e.routeLoading=!1):(e.msgError(t.msg),e.statisticsStatusOverLoadTimes<3?(e.statisticsStatusOverLoadTimes++,e.initGet()):(e.routeLoading=!1,e.msgError("请重新刷新页面！")))}))},renderHeader:function(e,t){var a=t.column;return e("div",[e("span",a.label),e("el-tooltip",{props:{effect:"dark",content:"发票实时统计表",placement:"top"}},[e("i",{class:"el-icon-question",style:"font-size: 16px;vertical-align: -1px"})])])},signNameSure:function(e){var t=this;if("3"==e)this.signNamePassOpen=!0,this.$nextTick((function(){t.$refs.signNamePassForm.clearValidate()}));else{var a={type:e,tjsjstr:this.tjsjstr,qrmm:this.signNamePassForm.qrmm};Object(s["g"])(200,"1"==e?"申请统计中":"撤销统计中",this,!1),Object(r["a"])(a).then((function(e){t.showProgress=!1,clearInterval(t.loadingTime),200==e.code?t.initGet():t.msgError(e.msg)}))}},submitSignNamePass:function(){var e=this,t={type:"3",tjsjstr:this.tjsjstr,qrmm:this.signNamePassForm.qrmm};Object(s["g"])(200,"确认签名中",this,!1),Object(r["a"])(t).then((function(t){e.signNamePassOpen=!1,e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?e.initGet():e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))},signNamePassDialogClose:function(){this.signNamePassForm.qrmm=null},getInvoiceTypeName:function(e){switch(e){case"01":return"增值税专用发票";case"03":return"机动车销售统一发票";case"08":return"增值税电子专用发票";case"14":return"通行费电子发票";case"17":return"海关缴款书";case"24":return"出口转内销发票";case"30":return"出口转内销海关缴纳书";case"66":return"增值税专用发票（代办退税专用）";case"67":return"增值税电子专用发票（代办退税专用）";case"80":return"出口转内销电子专用发票";default:return"总计"}}}},u=c,d=(a("fd22"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"6d71168e",null);t["default"]=p.exports},4544:function(e,t,a){"use strict";a("9fe7")},4599:function(e,t,a){"use strict";a("f861")},"45bd":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/invoice/statistics",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/bill/statistics",method:"post",params:e})}},"45c6":function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"j",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"i",(function(){return h}));var n=a("b775");function i(e){return Object(n["a"])({url:"/income/gxrz/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/income/gxrz/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/income/gxrz",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/income/gxrz",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/income/gxrz/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/income/gxrz/export",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/income/gxrz/submitGxData",method:"post",data:e})}function d(){return Object(n["a"])({url:"/income/gxrz/initGxData",method:"get"})}function p(){return Object(n["a"])({url:"/income/gxrz/getStatisticsStatus",method:"get"})}function h(e){return Object(n["a"])({url:"/income/gxrz/synchGxDataAndReturn",method:"post",data:e})}},4771:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"88px"}},[a("el-form-item",{attrs:{label:"流程KEY",prop:"key"}},[a("el-input",{attrs:{placeholder:"请输入流程KEY",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.key,callback:function(t){e.$set(e.queryParams,"key",t)},expression:"queryParams.key"}})],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:modeler"],expression:"['activiti:modeler']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.OnlineDrawingProcess}},[e._v("在线绘制流程 ")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:modeler"],expression:"['activiti:modeler']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleImport}},[e._v("部署流程 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.Modeler,height:e.tableHeight}},[a("el-table-column",{attrs:{label:"流程ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"流程KEY",align:"center",prop:"key"}}),a("el-table-column",{attrs:{label:"流程名称",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"版本",align:"center",prop:"version"}}),a("el-table-column",{attrs:{label:"部署时间",align:"center",prop:"deploymentTime"}}),a("el-table-column",{attrs:{label:"部署ID",align:"center",prop:"deploymentId"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"suspendState"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1!=t.row.suspendState?"挂起":"激活"))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:modeler"],expression:"['activiti:modeler']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.OnlineModificationProcess(t.row)}}},[e._v("查看 ")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:modeler"],expression:"['activiti:modeler']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.suspendOrActiveApply(t.row)}}},[e._v(e._s(1==t.row.suspendState?"挂起":"激活")+" ")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["activiti:modeler"],expression:"['activiti:modeler']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{visible:e.modelVisible,title:"流程图",width:"1680px","append-to-body":""},on:{"update:visible":function(t){e.modelVisible=t},close:e.modelCancel}},[a("div",{staticStyle:{position:"relative",height:"100%"}},[a("iframe",{attrs:{id:"iframe",src:e.modelerUrl,frameborder:"0",width:"100%",height:"720px",scrolling:"auto"}})])]),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".bpmn, .bar, .zip",headers:e.upload.headers,action:e.upload.url,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“bpmn”、“bar”或“zip”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("ca4d"),r=a("5f87"),l={name:"definition",data:function(){return{tableHeight:null,modelerUrl:"",modelVisible:!1,loading:!0,single:!0,multiple:!0,showSearch:!0,total:0,Modeler:[],title:"",open:!1,src:"",queryParams:{pageNum:1,pageSize:10,id:null,rev:null,name:null,type:null},upload:{open:!1,title:"",isUploading:!1,headers:{Authorization:"Bearer "+Object(r["a"])()},url:"/prod-api/act/define/uploadStreamAndDeployment"}}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()},this.getList()},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){},methods:{getList:function(){var e=this;this.loading=!0,Object(o["c"])(this.queryParams).then((function(t){e.Modeler=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},suspendOrActiveApply:function(e){var t=this,a="2"===e.suspendState?"激活":"挂起";this.$confirm("确认要"+a+"流程定义吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:e.id,suspendState:e.suspendState};return Object(o["d"])(t)})).then((function(){t.getList(),t.msgSuccess("转换成功")})).catch((function(){}))},handleImport:function(){this.upload.title="上传模型图",this.upload.open=!0},OnlineDrawingProcess:function(){localStorage.setItem("VUE_APP_BASE_API","/prod-api"),localStorage.setItem("modelerUrl","/bpmnjs/index.html?type=addBpmn"),this.$router.push({name:"flow"})},OnlineModificationProcess:function(e){localStorage.setItem("VUE_APP_BASE_API","/prod-api"),localStorage.setItem("modelerUrl","/bpmnjs/index.html?type=lookBpmn&deploymentFileUUID="+e.deploymentId+"&deploymentName="+encodeURI(e.resourceName)),this.$router.push({name:"flow"})},submitFileForm:function(){this.$refs.upload.submit()},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},handleDelete:function(e){var t=this;this.$confirm('是否确认删除编号为"'+e.key+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["a"])(e.deploymentId)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},modelCancel:function(){this.getList()}}},s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports},"491b":function(e,t,a){},4923:function(e,t,a){"use strict";a.r(t);a("d81d");var n=a("1980"),i=a.n(n),o=a("a85b"),r={itemBtns:function(e,t,a,n){var i=this.$listeners,o=i.copyItem,r=i.deleteItem;return[e("span",{class:"drawing-item-copy",attrs:{title:"复制"},on:{click:function(e){o(t,n),e.stopPropagation()}}},[e("i",{class:"el-icon-copy-document"})]),e("span",{class:"drawing-item-delete",attrs:{title:"删除"},on:{click:function(e){r(a,n),e.stopPropagation()}}},[e("i",{class:"el-icon-delete"})])]}},l={colFormItem:function(e,t,a,n){var i=this,l=this.$listeners.activeItem,s=this.activeId===t.formId?"drawing-item active-from-item":"drawing-item";return this.formConf.unFocusedComponentBorder&&(s+=" unfocus-bordered"),e("el-col",{attrs:{span:t.span},class:s,nativeOn:{click:function(e){l(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":t.labelWidth?"".concat(t.labelWidth,"px"):null,label:t.label,required:t.required}},[e(o["a"],{key:t.renderKey,attrs:{conf:t},on:{input:function(e){i.$set(t,"defaultValue",e)}}})]),r.itemBtns.apply(this,arguments)])},rowFormItem:function(e,t,a,n){var o=this.$listeners.activeItem,l=this.activeId===t.formId?"drawing-row-item active-from-item":"drawing-row-item",c=s.apply(this,arguments);return"flex"===t.type&&(c=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[c])),e("el-col",{attrs:{span:t.span}},[e("el-row",{attrs:{gutter:t.gutter},class:l,nativeOn:{click:function(e){o(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[t.componentName]),e(i.a,{attrs:{list:t.children,animation:340,group:"componentsGroup"},class:"drag-wrapper"},[c]),r.itemBtns.apply(this,arguments)])])}};function s(e,t,a,n){var i=this;return Array.isArray(t.children)?t.children.map((function(a,n){var o=l[a.layout];return o?o.call(i,e,a,n,t.children):c()})):null}function c(){throw new Error("没有与".concat(this.element.layout,"匹配的layout"))}var u,d,p={components:{render:o["a"],draggable:i.a},props:["element","index","drawingList","activeId","formConf"],render:function(e){var t=l[this.element.layout];return t?t.call(this,e,this.element,this.index,this.drawingList):c()}},h=p,m=a("2877"),f=Object(m["a"])(h,u,d,!1,null,null,null);t["default"]=f.exports},"49a2":function(e,t,a){},"4a49":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:"height:"+e.height},[a("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.src,frameborder:"no",scrolling:"auto"}})])},i=[],o={name:"Swagger",data:function(){return{src:"/prod-api/swagger-ui.html",height:document.documentElement.clientHeight-94.5+"px;",loading:!0}},mounted:function(){var e=this;setTimeout((function(){e.loading=!1}),230);var t=this;window.onresize=function(){t.height=document.documentElement.clientHeight-94.5+"px;"}}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},"4a61":function(e,t,a){},"4a95":function(e,t,a){"use strict";a("4a61")},"4ab16":function(e,t,a){"use strict";a("f6ed")},"4b3b":function(e,t,a){var n={"./":"1e4b","./approve/flow":"8562","./approve/flow/":"8562","./approve/flow/index":"8562","./approve/flow/index.vue":"8562","./base/ext/billSetting":"1732","./base/ext/billSetting.vue":"1732","./base/ext/setting":"27f7","./base/ext/setting.vue":"27f7","./base/info":"2ccb","./base/info/":"2ccb","./base/info/index":"2ccb","./base/info/index.vue":"2ccb","./base/qd/qdregister":"359c","./base/qd/qdregister.vue":"359c","./base/seller":"c967","./base/seller/":"c967","./base/seller/index":"c967","./base/seller/index.vue":"c967","./base/taxno":"18d6","./base/taxno/":"18d6","./base/taxno/index":"18d6","./base/taxno/index.vue":"18d6","./base/taxnoext":"10b7","./base/taxnoext/":"10b7","./base/taxnoext/index":"10b7","./base/taxnoext/index.vue":"10b7","./chooseDept":"586f","./chooseDept.vue":"586f","./components/icons":"3a7e","./components/icons/":"3a7e","./components/icons/element-icons":"bb49","./components/icons/element-icons.js":"bb49","./components/icons/index":"3a7e","./components/icons/index.vue":"3a7e","./components/icons/svg-icons":"c7e9","./components/icons/svg-icons.js":"c7e9","./dashboard/BarChart":"9488","./dashboard/BarChart.vue":"9488","./dashboard/LineChart":"eab4","./dashboard/LineChart.vue":"eab4","./dashboard/PanelGroup":"fbc4","./dashboard/PanelGroup.vue":"fbc4","./dashboard/PieChart":"d153","./dashboard/PieChart.vue":"d153","./dashboard/RaddarChart":"0a5c","./dashboard/RaddarChart.vue":"0a5c","./dashboard/mixins/resize":"feb2","./dashboard/mixins/resize.js":"feb2","./editpassword":"ea30","./editpassword.vue":"ea30","./error/401":"ec55","./error/401.vue":"ec55","./error/404":"2754","./error/404.vue":"2754","./flowpage/activiti/definition":"4771","./flowpage/activiti/definition/":"4771","./flowpage/activiti/definition/index":"4771","./flowpage/activiti/definition/index.vue":"4771","./flowpage/activiti/flowsheet/flow":"6173","./flowpage/activiti/flowsheet/flow.vue":"6173","./flowpage/businessapproval/approval":"3afa","./flowpage/businessapproval/approval/":"3afa","./flowpage/businessapproval/approval/index":"3afa","./flowpage/businessapproval/approval/index.vue":"3afa","./flowpage/businessapproval/approval/leaveHistoryForm":"1f6e","./flowpage/businessapproval/approval/leaveHistoryForm.vue":"1f6e","./flowpage/done/donetask":"259a","./flowpage/done/donetask/":"259a","./flowpage/done/donetask/index":"259a","./flowpage/done/donetask/index.vue":"259a","./flowpage/history/history":"85b0","./flowpage/history/history/":"85b0","./flowpage/history/history/index":"85b0","./flowpage/history/history/index.vue":"85b0","./flowpage/todo/task":"7e1f","./flowpage/todo/task/":"7e1f","./flowpage/todo/task/index":"7e1f","./flowpage/todo/task/index.vue":"7e1f","./income/authentication":"7062","./income/authentication/":"7062","./income/authentication/index":"7062","./income/authentication/index.vue":"7062","./income/certificate":"5881","./income/certificate/":"5881","./income/certificate/index":"5881","./income/certificate/index.vue":"5881","./income/components/fileAnalysis":"35d5","./income/components/fileAnalysis.vue":"35d5","./income/components/invoiceDetailShowModal":"0ca4","./income/components/invoiceDetailShowModal.vue":"0ca4","./income/components/secondHandInvoiceDetailShowModal":"f82b","./income/components/secondHandInvoiceDetailShowModal.vue":"f82b","./income/components/uploadFileDialog":"a5e7","./income/components/uploadFileDialog.vue":"a5e7","./income/components/vehicleInvoiceDetailShowModal":"66b5","./income/components/vehicleInvoiceDetailShowModal.vue":"66b5","./income/gxrz":"6101","./income/gxrz/":"6101","./income/gxrz/cywgx":"6c0c","./income/gxrz/cywgx.vue":"6c0c","./income/gxrz/index":"6101","./income/gxrz/index.vue":"6101","./income/invoicepool":"1aa2","./income/invoicepool/":"1aa2","./income/invoicepool/index":"1aa2","./income/invoicepool/index.vue":"1aa2","./income/mergeIncome":"d7e0","./income/mergeIncome/":"d7e0","./income/mergeIncome/index":"d7e0","./income/mergeIncome/index.vue":"d7e0","./income/ocrrecord":"b5a3","./income/ocrrecord/":"b5a3","./income/ocrrecord/index":"b5a3","./income/ocrrecord/index.vue":"b5a3","./income/other":"74ae","./income/other/":"74ae","./income/other/index":"74ae","./income/other/index.vue":"74ae","./income/packageOcr":"d7ab","./income/packageOcr/":"d7ab","./income/packageOcr/index":"d7ab","./income/packageOcr/index.vue":"d7ab","./income/record":"3914","./income/record/":"3914","./income/record/index":"3914","./income/record/index.vue":"3914","./income/reimRecord":"1b86","./income/reimRecord/":"1b86","./income/reimRecord/index":"1b86","./income/reimRecord/index.vue":"1b86","./income/signname":"ae27","./income/signname/":"ae27","./income/signname/index":"ae27","./income/signname/index.vue":"ae27","./income/signname/oldindex":"4543","./income/signname/oldindex.vue":"4543","./income/zzsinvoice":"15da","./income/zzsinvoice/":"15da","./income/zzsinvoice/index":"15da","./income/zzsinvoice/index.vue":"15da","./index":"1e4b","./index.vue":"1e4b","./login":"dd7b","./login.vue":"dd7b","./monitor/druid":"5194","./monitor/druid/":"5194","./monitor/druid/index":"5194","./monitor/druid/index.vue":"5194","./monitor/job":"3eac","./monitor/job/":"3eac","./monitor/job/index":"3eac","./monitor/job/index.vue":"3eac","./monitor/job/log":"0062","./monitor/job/log.vue":"0062","./monitor/logininfor":"67ef","./monitor/logininfor/":"67ef","./monitor/logininfor/index":"67ef","./monitor/logininfor/index.vue":"67ef","./monitor/online":"6b08","./monitor/online/":"6b08","./monitor/online/index":"6b08","./monitor/online/index.vue":"6b08","./monitor/operlog":"02f2","./monitor/operlog/":"02f2","./monitor/operlog/index":"02f2","./monitor/operlog/index.vue":"02f2","./monitor/server":"2a33","./monitor/server/":"2a33","./monitor/server/index":"2a33","./monitor/server/index.vue":"2a33","./output/auto":"7a09","./output/auto/":"7a09","./output/auto/index":"7a09","./output/auto/index.vue":"7a09","./output/bill":"ceee","./output/bill/":"ceee","./output/bill/index":"ceee","./output/bill/index.vue":"ceee","./output/components/billDetailEditModal":"59e6","./output/components/billDetailEditModal.vue":"59e6","./output/components/billDetailShowModal":"059f","./output/components/billDetailShowModal.vue":"059f","./output/components/mergeBillModal":"17ac","./output/components/mergeBillModal.vue":"17ac","./output/components/newBillDetailShowModal":"7bd4","./output/components/newBillDetailShowModal.vue":"7bd4","./output/components/sapBillImort":"6540","./output/components/sapBillImort.vue":"6540","./output/components/splitBillModal":"5509","./output/components/splitBillModal.vue":"5509","./output/components/totalRowTable":"b526","./output/components/totalRowTable.vue":"b526","./output/components/vehicleInvoiceDetailEditModal":"9e9f","./output/components/vehicleInvoiceDetailEditModal.vue":"9e9f","./output/components/vehicleInvoiceDetailShowModal":"7eff","./output/components/vehicleInvoiceDetailShowModal.vue":"7eff","./output/customer":"f40a","./output/customer/":"f40a","./output/customer/index":"f40a","./output/customer/index.vue":"f40a","./output/errorbill":"1a33","./output/errorbill/":"1a33","./output/errorbill/index":"1a33","./output/errorbill/index.vue":"1a33","./output/fptk/detail":"bbc3","./output/fptk/detail.vue":"bbc3","./output/fptk/detailshow":"1055","./output/fptk/detailshow.vue":"1055","./output/goods":"e261","./output/goods/":"e261","./output/goods/choose":"af2f","./output/goods/choose.vue":"af2f","./output/goods/index":"e261","./output/goods/index.vue":"e261","./output/history":"a766","./output/history/":"a766","./output/history/components/historyDetailShowModal":"1926","./output/history/components/historyDetailShowModal.vue":"1926","./output/history/components/historyVehicleDetailShowModal":"ff2e9","./output/history/components/historyVehicleDetailShowModal.vue":"ff2e9","./output/history/index":"a766","./output/history/index.vue":"a766","./output/invoice":"058c","./output/invoice/":"058c","./output/invoice/components/applyDetailShowModal":"0509","./output/invoice/components/applyDetailShowModal.vue":"0509","./output/invoice/components/applyRedInvoiceEditModal":"ab09","./output/invoice/components/applyRedInvoiceEditModal.vue":"ab09","./output/invoice/index":"058c","./output/invoice/index.vue":"058c","./output/invoice/lodopPrint":"27ef","./output/invoice/lodopPrint.vue":"27ef","./output/invoice/printTest":"b1cc","./output/invoice/printTest.vue":"b1cc","./output/margin":"c786","./output/margin/":"c786","./output/margin/index":"c786","./output/margin/index.vue":"c786","./output/newcomponents/billDetailEditModal":"7af1","./output/newcomponents/billDetailEditModal.vue":"7af1","./output/newcomponents/billDetailShowModal":"b015","./output/newcomponents/billDetailShowModal.vue":"b015","./output/redinvoice":"93d9","./output/redinvoice/":"93d9","./output/redinvoice/components/redInvoiceDownload":"7cfa","./output/redinvoice/components/redInvoiceDownload.vue":"7cfa","./output/redinvoice/components/redInvoiceEditModal":"747b","./output/redinvoice/components/redInvoiceEditModal.vue":"747b","./output/redinvoice/components/redInvoiceInfoSelect":"6f50f","./output/redinvoice/components/redInvoiceInfoSelect.vue":"6f50f","./output/redinvoice/components/redInvoiceShowModal":"dc68","./output/redinvoice/components/redInvoiceShowModal.vue":"dc68","./output/redinvoice/index":"93d9","./output/redinvoice/index.vue":"93d9","./output/request":"f657","./output/request/":"f657","./output/request/index":"f657","./output/request/index.vue":"f657","./output/signsetting":"eeb3","./output/signsetting/":"eeb3","./output/signsetting/index":"eeb3","./output/signsetting/index.vue":"eeb3","./output/singlehistory":"c9fb","./output/singlehistory/":"c9fb","./output/singlehistory/components/historyDetailShowModal":"ba69","./output/singlehistory/components/historyDetailShowModal.vue":"ba69","./output/singlehistory/components/historyVehicleDetailShowModal":"994d","./output/singlehistory/components/historyVehicleDetailShowModal.vue":"994d","./output/singlehistory/index":"c9fb","./output/singlehistory/index.vue":"c9fb","./output/statistics":"1b863","./output/statistics/":"1b863","./output/statistics/index":"1b863","./output/statistics/index.vue":"1b863","./output/stock":"f4ef","./output/stock/":"f4ef","./output/stock/index":"f4ef","./output/stock/index.vue":"f4ef","./output/taxcode":"bbec","./output/taxcode/":"bbec","./output/taxcode/choose":"b9aa","./output/taxcode/choose.vue":"b9aa","./output/taxcode/index":"bbec","./output/taxcode/index.vue":"bbec","./output/taxno":"7523","./output/taxno/":"7523","./output/taxno/index":"7523","./output/taxno/index.vue":"7523","./output/terminalmanager":"2195","./output/terminalmanager/":"2195","./output/terminalmanager/index":"2195","./output/terminalmanager/index.vue":"2195","./output/ticket":"b5e8","./output/ticket/":"b5e8","./output/ticket/components/ticketDetailShowModal":"ec99","./output/ticket/components/ticketDetailShowModal.vue":"ec99","./output/ticket/index":"b5e8","./output/ticket/index.vue":"b5e8","./output/usemanager":"10f9","./output/usemanager/":"10f9","./output/usemanager/index":"10f9","./output/usemanager/index.vue":"10f9","./output/vehicle":"0891","./output/vehicle/":"0891","./output/vehicle/index":"0891","./output/vehicle/index.vue":"0891","./output/vehiclegoods":"9370","./output/vehiclegoods/":"9370","./output/vehiclegoods/choose":"b175","./output/vehiclegoods/choose.vue":"b175","./output/vehiclegoods/index":"9370","./output/vehiclegoods/index.vue":"9370","./output/vehicleinvoice":"620b","./output/vehicleinvoice/":"620b","./output/vehicleinvoice/index":"620b","./output/vehicleinvoice/index.vue":"620b","./qdoutput/account":"ee7c","./qdoutput/account/":"ee7c","./qdoutput/account/index":"ee7c","./qdoutput/account/index.vue":"ee7c","./qdoutput/auto":"0cb2","./qdoutput/auto/":"0cb2","./qdoutput/auto/index":"0cb2","./qdoutput/auto/index.vue":"0cb2","./qdoutput/baseQdReq":"db62","./qdoutput/baseQdReq/":"db62","./qdoutput/baseQdReq/index":"db62","./qdoutput/baseQdReq/index.vue":"db62","./qdoutput/bill":"1b1e","./qdoutput/bill/":"1b1e","./qdoutput/bill/index":"1b1e","./qdoutput/bill/index.vue":"1b1e","./qdoutput/components/qdbillDetailEditModal":"9694","./qdoutput/components/qdbillDetailEditModal.vue":"9694","./qdoutput/components/qdbillDetailShowModal":"1389","./qdoutput/components/qdbillDetailShowModal.vue":"1389","./qdoutput/invoice":"03e7","./qdoutput/invoice/":"03e7","./qdoutput/invoice/components/applyDetailShowModal":"c2f6","./qdoutput/invoice/components/applyDetailShowModal.vue":"c2f6","./qdoutput/invoice/components/applyRedInvoiceEditModal":"0fb5","./qdoutput/invoice/components/applyRedInvoiceEditModal.vue":"0fb5","./qdoutput/invoice/components/redInvoiceInfoSelect":"5570","./qdoutput/invoice/components/redInvoiceInfoSelect.vue":"5570","./qdoutput/invoice/index":"03e7","./qdoutput/invoice/index.vue":"03e7","./qdoutput/monthstatistics":"e6a1","./qdoutput/monthstatistics/":"e6a1","./qdoutput/monthstatistics/index":"e6a1","./qdoutput/monthstatistics/index.vue":"e6a1","./qdoutput/qdrecord":"d41d","./qdoutput/qdrecord/":"d41d","./qdoutput/qdrecord/index":"d41d","./qdoutput/qdrecord/index.vue":"d41d","./qdoutput/redbill":"d0ce","./qdoutput/redbill/":"d0ce","./qdoutput/redbill/index":"d0ce","./qdoutput/redbill/index.vue":"d0ce","./qdoutput/ticket":"331c","./qdoutput/ticket/":"331c","./qdoutput/ticket/components/ticketDetailShowModal":"0d34","./qdoutput/ticket/components/ticketDetailShowModal.vue":"0d34","./qdoutput/ticket/index":"331c","./qdoutput/ticket/index.vue":"331c","./redirect":"9b8f","./redirect.vue":"9b8f","./single":"de03","./single.vue":"de03","./ssologin":"6c8a","./ssologin.vue":"6c8a","./system/apilog":"0205","./system/apilog/":"0205","./system/apilog/index":"0205","./system/apilog/index.vue":"0205","./system/config":"cdb7","./system/config/":"cdb7","./system/config/index":"cdb7","./system/config/index.vue":"cdb7","./system/dept":"5cfa","./system/dept/":"5cfa","./system/dept/index":"5cfa","./system/dept/index.vue":"5cfa","./system/dict":"046a","./system/dict/":"046a","./system/dict/data":"bfc4","./system/dict/data.vue":"bfc4","./system/dict/index":"046a","./system/dict/index.vue":"046a","./system/log":"b380","./system/log/":"b380","./system/log/index":"b380","./system/log/index.vue":"b380","./system/menu":"f794","./system/menu/":"f794","./system/menu/index":"f794","./system/menu/index.vue":"f794","./system/message":"b75a","./system/message/":"b75a","./system/message/index":"b75a","./system/message/index.vue":"b75a","./system/monitor":"cc4f","./system/monitor/":"cc4f","./system/monitor/index":"cc4f","./system/monitor/index.vue":"cc4f","./system/notice":"202d","./system/notice/":"202d","./system/notice/index":"202d","./system/notice/index.vue":"202d","./system/post":"5788","./system/post/":"5788","./system/post/index":"5788","./system/post/index.vue":"5788","./system/recharge":"71b1","./system/recharge/":"71b1","./system/recharge/index":"71b1","./system/recharge/index.vue":"71b1","./system/role":"70eb","./system/role/":"70eb","./system/role/index":"70eb","./system/role/index.vue":"70eb","./system/rulesetting":"4c44","./system/rulesetting/":"4c44","./system/rulesetting/BarChart":"52ef","./system/rulesetting/BarChart.vue":"52ef","./system/rulesetting/PanelGroup":"2113","./system/rulesetting/PanelGroup.vue":"2113","./system/rulesetting/index":"4c44","./system/rulesetting/index.vue":"4c44","./system/rulesetting/mixins/resize":"00ea","./system/rulesetting/mixins/resize.js":"00ea","./system/setting":"7ee9","./system/setting/":"7ee9","./system/setting/index":"7ee9","./system/setting/index.vue":"7ee9","./system/tables":"6d66","./system/tables/":"6d66","./system/tables/index":"6d66","./system/tables/index.vue":"6d66","./system/user":"1f34","./system/user/":"1f34","./system/user/index":"1f34","./system/user/index.vue":"1f34","./system/user/profile":"4c1b","./system/user/profile/":"4c1b","./system/user/profile/index":"4c1b","./system/user/profile/index.vue":"4c1b","./system/user/profile/resetPwd":"ee46","./system/user/profile/resetPwd.vue":"ee46","./system/user/profile/userAvatar":"9429","./system/user/profile/userAvatar.vue":"9429","./system/user/profile/userInfo":"1e8b","./system/user/profile/userInfo.vue":"1e8b","./test":"2762","./test.vue":"2762","./ticket/billrule":"ab98","./ticket/billrule/":"ab98","./ticket/billrule/index":"ab98","./ticket/billrule/index.vue":"ab98","./ticket/personal":"b149","./ticket/personal/":"b149","./ticket/personal/index":"b149","./ticket/personal/index.vue":"b149","./ticket/personalOther":"ad77","./ticket/personalOther/":"ad77","./ticket/personalOther/index":"ad77","./ticket/personalOther/index.vue":"ad77","./ticket/personalOtherStatistics":"f269","./ticket/personalOtherStatistics/":"f269","./ticket/personalOtherStatistics/index":"f269","./ticket/personalOtherStatistics/index.vue":"f269","./ticket/personalStatistics":"6691","./ticket/personalStatistics/":"6691","./ticket/personalStatistics/index":"6691","./ticket/personalStatistics/index.vue":"6691","./ticket/riskcom":"6254","./ticket/riskcom/":"6254","./ticket/riskcom/index":"6254","./ticket/riskcom/index.vue":"6254","./ticket/sensitivewords":"59c5","./ticket/sensitivewords/":"59c5","./ticket/sensitivewords/index":"59c5","./ticket/sensitivewords/index.vue":"59c5","./ticket/ticketcontrolsetting":"815e","./ticket/ticketcontrolsetting/":"815e","./ticket/ticketcontrolsetting/index":"815e","./ticket/ticketcontrolsetting/index.vue":"815e","./tool/build":"2855","./tool/build/":"2855","./tool/build/CodeTypeDialog":"a92a","./tool/build/CodeTypeDialog.vue":"a92a","./tool/build/DraggableItem":"4923","./tool/build/DraggableItem.vue":"4923","./tool/build/IconsDialog":"d0b2","./tool/build/IconsDialog.vue":"d0b2","./tool/build/RightPanel":"766b","./tool/build/RightPanel.vue":"766b","./tool/build/TreeNodeDialog":"c81a","./tool/build/TreeNodeDialog.vue":"c81a","./tool/build/index":"2855","./tool/build/index.vue":"2855","./tool/gen":"82c8","./tool/gen/":"82c8","./tool/gen/basicInfoForm":"ed69","./tool/gen/basicInfoForm.vue":"ed69","./tool/gen/editTable":"76f8","./tool/gen/editTable.vue":"76f8","./tool/gen/genInfoForm":"8586","./tool/gen/genInfoForm.vue":"8586","./tool/gen/importTable":"6f72","./tool/gen/importTable.vue":"6f72","./tool/gen/index":"82c8","./tool/gen/index.vue":"82c8","./tool/swagger":"4a49","./tool/swagger/":"4a49","./tool/swagger/index":"4a49","./tool/swagger/index.vue":"4a49"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="4b3b"},"4b72":function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"h",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var n=a("b775");function i(e){return Object(n["a"])({url:"/tool/gen/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/tool/gen/db/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/tool/gen/"+e,method:"get"})}function l(e){return Object(n["a"])({url:"/tool/gen",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/tool/gen/importTable",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/tool/gen/preview/"+e,method:"get"})}function u(e){return Object(n["a"])({url:"/tool/gen/"+e,method:"delete"})}function d(e){return Object(n["a"])({url:"/tool/gen/genCode/"+e,method:"get"})}},"4bd5":function(e,t,a){},"4c1b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("个人信息")])]),a("div",[a("div",{staticClass:"text-center"},[a("userAvatar",{attrs:{user:e.user}})],1),a("ul",{staticClass:"list-group list-group-striped"},[a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"user"}}),e._v("用户名称 "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.userName))])],1),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"phone"}}),e._v("手机号码 "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.phonenumber))])],1),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"email"}}),e._v("用户邮箱 "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.email))])],1),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"tree"}}),e._v("所属部门 "),e.dept?a("div",{staticClass:"pull-right"},[e._v(e._s(e.dept.deptName))]):e._e()],1),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v("所属角色 "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.roleGroup))])],1),a("li",{staticClass:"list-group-item"},[a("svg-icon",{attrs:{"icon-class":"date"}}),e._v("创建日期 "),a("div",{staticClass:"pull-right"},[e._v(e._s(e.user.createTime))])],1)])])])],1),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基本资料")])]),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"基本资料",name:"userinfo"}},[a("userInfo",{attrs:{user:e.user}})],1),a("el-tab-pane",{attrs:{label:"修改密码",name:"resetPwd"}},[a("resetPwd",{attrs:{user:e.user}})],1)],1)],1)],1)],1)],1)},i=[],o=a("9429"),r=a("1e8b"),l=a("ee46"),s=a("c0c7"),c={name:"Profile",components:{userAvatar:o["default"],userInfo:r["default"],resetPwd:l["default"]},data:function(){return{user:{},dept:{},roleGroup:{},postGroup:{},activeTab:"userinfo"}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;Object(s["h"])().then((function(t){e.user=t.data.user,e.dept=t.data.dept,e.roleGroup=t.roleGroup,e.postGroup=t.postGroup}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},"4c44":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-editor-container"},[a("div",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:statistics"],expression:"['output:invoice:statistics']"}],staticClass:"public-output-statistics"},[a("panel-group",{attrs:{statisticsData:e.statisticsData},on:{handleSetBarChartData:e.handleSetBarChartData}}),a("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[a("bar-chart",{ref:"barChat",attrs:{chartData:e.currData1,yAxis:"1"}})],1),a("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[a("bar-chart",{ref:"barChat",attrs:{chartData:e.currData2,yAxis:"2"}})],1)],1),e.checkPermi(["output:invoice:statistics"])?e._e():a("div",{staticClass:"main-home"})])},i=[],o=(a("d3b7"),a("159b"),a("2113")),r=a("52ef"),l=(a("45bd"),a("b775"));function s(e){return Object(l["a"])({url:"/income/zzsinvoice/invSettingStatistics",method:"post",params:e})}var c=a("e350"),u={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},d={name:"ruleSetting",components:{PanelGroup:o["default"],BarChart:r["default"]},data:function(){return{lineChartData:u.newVisitis,statisticsData:{normalCountZzs:0,normalCountFzzs:0,normalAmountZzs:0,normalAmountFzzs:0,errorCountZzs:0,errorCountFzzs:0,errorAmountZzs:0,errorAmountFzzs:0},openData:[],cancelData:[],redData:[],allData:[],currData1:[],currData2:[]}},created:function(){var e=this,t=this.$moment(new Date),a={beginTime:t.startOf("month").format("YYYY-MM-DD"),endTime:t.endOf("month").format("YYYY-MM-DD")};s(a).then((function(t){if(200==t.code){var a=t.data;for(var n in e.statisticsData)e.$set(e.statisticsData,n,a[n]);for(var i=["normalCountZzsPp","normalCountZzsZp","normalCountZzsDzp","normalCountZzsJdc","normalCountZzsDzzp","normalCountZzsJsp","normalCountZzsTxfp"],o=["normalAmountZzsPp","normalAmountZzsZp","normalAmountZzsDzp","normalAmountZzsJdc","normalAmountZzsDzzp","normalAmountZzsJsp","normalAmountZzsTxfp"],r=["errorCountZzsPp","errorCountZzsZp","errorCountZzsDzp","errorCountZzsJdc","errorCountZzsDzzp","errorCountZzsJsp","errorCountZzsTxfp"],l=["errorAmountZzsPp","errorAmountZzsZp","errorAmountZzsDzp","errorAmountZzsJdc","errorAmountZzsDzzp","errorAmountZzsJsp","errorAmountZzsTxfp"],s=["type","增值税普通发票","增值税专用发票","增值税电子发票","增值税机动车","增值税电子专票","增值税卷式票","增值税通行费票"],c=["数量"],u=["金额"],d=["数量"],p=["金额"],h=0,m=i.length;h<m;h++)c.push(a[i[h]]),u.push(a[o[h]]),d.push(a[r[h]]),p.push(a[l[h]]);e.currData1=[],e.currData1.push(s,c,u),e.currData2=[],e.currData2.push(s,d,p)}else e.msgError(t.msg)}))},methods:{handleSetBarChartData:function(e){var t=this;this.currData=[],"open"==e?this.openData.forEach((function(e,a,n){t.$set(t.currData,a,e)})):"cancel"==e?this.cancelData.forEach((function(e,a,n){t.$set(t.currData,a,e)})):"red"==e&&this.redData.forEach((function(e,a,n){t.$set(t.currData,a,e)}))},checkPermi:function(e){return Object(c["a"])(e)}}},p=d,h=(a("4ab16"),a("2877")),m=Object(h["a"])(p,n,i,!1,null,"54090287",null);t["default"]=m.exports},"4c80":function(e,t,a){"use strict";a.d(t,"n",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"q",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return h})),a.d(t,"e",(function(){return m})),a.d(t,"o",(function(){return f})),a.d(t,"p",(function(){return b})),a.d(t,"m",(function(){return g})),a.d(t,"k",(function(){return v})),a.d(t,"f",(function(){return y})),a.d(t,"l",(function(){return _}));var n=a("b775");a("4328");function i(e){return Object(n["a"])({url:"/income/zzsinvoice/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/income/zzsinvoice/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/income/zzsinvoice",method:"post",data:e})}function l(e,t){var a={url:"/income/zzsinvoice",method:"put",data:e};return t&&(a.params={forceEdit:t}),Object(n["a"])(a)}function s(e){return Object(n["a"])({url:"/income/zzsinvoice/remove",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/income/zzsinvoice/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/income/zzsinvoice/exportDetail",method:"post",data:e,responseType:"blob"})}function d(e){return Object(n["a"])({url:"/income/zzsinvoice/"+e,method:"get"})}function p(e){return Object(n["a"])({url:"/income/zzsinvoice/checkInvoice",method:"post",params:e})}function h(e){return Object(n["a"])({url:"/income/zzsinvoice/discernFile",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/income/zzsinvoice/discernFileScan",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/income/zzsinvoice/saveTicket",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/income/zzsinvoice/updateInvStatus",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/income/zzsinvoice/isVoucherNoUsed",method:"post",params:e})}function v(e){return Object(n["a"])({url:"/income/zzsinvoice/incomeInvConfirm",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/income/zzsinvoice/downloadPdfZip",method:"get",params:e})}function _(e){return Object(n["a"])({url:"/income/zzsinvoice/invAscription",method:"post",data:e})}},"4cf7":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/goods/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/goods/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/output/goods",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/output/goods",method:"put",data:e})}function s(e){var t={};if(e instanceof Array)t={ids:e};else{var a=[];a.push(e),t={ids:a}}return Object(n["a"])({url:"/output/goods/remove",method:"post",data:t})}function c(e){return Object(n["a"])({url:"/output/goods/export",method:"post",data:e,responseType:"blob"})}},"4d2c":function(e,t,a){"use strict";a("df8d")},"4d7c":function(e,t,a){var n,i;(function(){var a=function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=15)}([,,function(e,t,a){"use strict";function n(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new n(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}n.prototype.clone_empty=function(){var e=new n(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},n.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},n.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},n.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},n.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},n.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},n.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},n.prototype.is_empty=function(){return 0===this.__items.length},n.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},n.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},n.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},n.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},n.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},n.prototype.trim=function(){while(" "===this.last())this.__items.pop(),this.__character_count-=1},n.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var a=this.__base_string_length;return t=t||0,e<0&&(a=0),a+=e*this.__indent_size,a+=t,a},i.prototype.get_indent_string=function(e,t){var a=this.__base_string;return t=t||0,e<0&&(e=0,a=""),t+=e*this.__indent_size,this.__ensure_cache(t),a+=this.__cache[t],a},i.prototype.__ensure_cache=function(e){while(e>=this.__cache.length)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,a="";this.__indent_size&&e>=this.__indent_size&&(t=Math.floor(e/this.__indent_size),e-=t*this.__indent_size,a=new Array(t+1).join(this.__indent_string)),e&&(a+=new Array(e+1).join(" ")),this.__cache.push(a)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var a=this.__lines.join("\n");return"\n"!==e&&(a=a.replace(/[\n]/g,e)),a},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){var t=this.__lines.length;while(e<t)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){e=void 0!==e&&e,this.current_line.trim();while(e&&this.__lines.length>1&&this.current_line.is_empty())this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){var a=this.__lines.length-2;while(a>=0){var i=this.__lines[a];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(a+1,0,new n(this)),this.previous_line=this.__lines[this.__lines.length-2];break}a--}},e.exports.Output=o},,,,function(e,t,a){"use strict";function n(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function i(e,t){var a,n={};for(a in e=o(e),e)a!==t&&(n[a]=e[a]);if(t&&e[t])for(a in e[t])n[a]=e[t][a];return n}function o(e){var t,a={};for(t in e){var n=t.replace(/-/g,"_");a[n]=e[t]}return a}n.prototype._get_array=function(e,t){var a=this.raw_options[e],n=t||[];return"object"===typeof a?null!==a&&"function"===typeof a.concat&&(n=a.concat()):"string"===typeof a&&(n=a.split(/[^a-zA-Z0-9_\/\-]+/)),n},n.prototype._get_boolean=function(e,t){var a=this.raw_options[e],n=void 0===a?!!t:!!a;return n},n.prototype._get_characters=function(e,t){var a=this.raw_options[e],n=t||"";return"string"===typeof a&&(n=a.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),n},n.prototype._get_number=function(e,t){var a=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var n=parseInt(a,10);return isNaN(n)&&(n=t),n},n.prototype._get_selection=function(e,t,a){var n=this._get_selection_list(e,t,a);if(1!==n.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n[0]},n.prototype._get_selection_list=function(e,t,a){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(a=a||[t[0]],!this._is_valid_selection(a,t))throw new Error("Invalid Default Value!");var n=this._get_array(e,a);if(!this._is_valid_selection(n,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n},n.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=n,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},,function(e,t,a){"use strict";var n=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var a=e.exec(this.__input);return!a||n&&e.sticky||a.index!==t&&(a=null),a},i.prototype.test=function(e,t){return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var a=this.peek(t);return e.lastIndex=0,null!==a&&e.test(a)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,a){var n,i="";return e&&(n=this.match(e),n&&(i+=n[0])),!t||!n&&e||(i+=this.readUntil(t,a)),i},i.prototype.readUntil=function(e,t){var a="",n=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(n=i.index,t&&(n+=i[0].length)):n=this.__input_length,a=this.__input.substring(this.__position,n),this.__position=n,a},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var a=null,i="g";return t&&n&&(i="y"),"string"===typeof e&&""!==e?a=new RegExp(e,i):e&&(a=new RegExp(e.source,i)),a},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,a=this.readUntilAfter(e);return this.__position=t,a},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},,,,,function(e,t,a){"use strict";function n(e,t){e="string"===typeof e?e:e.source,t="string"===typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}n.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;var a=this.__directive_pattern.exec(e);while(a)t[a[1]]=a[2],a=this.__directive_pattern.exec(e);return t},n.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=n},,function(e,t,a){"use strict";var n=a(16).Beautifier,i=a(17).Options;function o(e,t){var a=new n(e,t);return a.beautify()}e.exports=o,e.exports.defaultOptions=function(){return new i}},function(e,t,a){"use strict";var n=a(17).Options,i=a(2).Output,o=a(8).InputScanner,r=a(13).Directives,l=new r(/\/\*/,/\*\//),s=/\r\n|[\r\n]/,c=/\r\n|[\r\n]/g,u=/\s/,d=/(?:\s|\n)+/g,p=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,h=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function m(e,t){this._source_text=e||"",this._options=new n(t),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}m.prototype.eatString=function(e){var t="";this._ch=this._input.next();while(this._ch){if(t+=this._ch,"\\"===this._ch)t+=this._input.next();else if(-1!==e.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return t},m.prototype.eatWhitespace=function(e){var t=u.test(this._input.peek()),a=!0;while(u.test(this._input.peek()))this._ch=this._input.next(),e&&"\n"===this._ch&&(this._options.preserve_newlines||a)&&(a=!1,this._output.add_new_line(!0));return t},m.prototype.foundNestedPseudoClass=function(){var e=0,t=1,a=this._input.peek(t);while(a){if("{"===a)return!0;if("("===a)e+=1;else if(")"===a){if(0===e)return!1;e-=1}else if(";"===a||"}"===a)return!1;t++,a=this._input.peek(t)}return!1},m.prototype.print_string=function(e){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(e)},m.prototype.preserveSingleSpace=function(e){e&&(this._output.space_before_token=!0)},m.prototype.indent=function(){this._indentLevel++},m.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},m.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===t&&(t="\n",e&&s.test(e||"")&&(t=e.match(s)[0])),e=e.replace(c,"\n");var a=e.match(/^[\t ]*/)[0];this._output=new i(this._options,a),this._input=new o(e),this._indentLevel=0,this._nestedLevel=0,this._ch=null;var n,r,m,f=0,b=!1,g=!1,v=!1,y=!1,_=!1,x=this._ch;while(1){if(n=this._input.read(d),r=""!==n,m=x,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),x=this._ch,!this._ch)break;if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var w=this._input.read(p),k=l.get_directives(w);k&&"start"===k.ignore&&(w+=l.readIgnored(this._input)),this.print_string(w),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(h)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(r),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var T=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);T.match(/[ :]$/)&&(T=this.eatString(": ").replace(/\s$/,""),this.print_string(T),this._output.space_before_token=!0),T=T.replace(/\s$/,""),"extend"===T?y=!0:"import"===T&&(_=!0),T in this.NESTED_AT_RULE?(this._nestedLevel+=1,T in this.CONDITIONAL_GROUP_RULE&&(v=!0)):b||0!==f||-1===T.indexOf(":")||(g=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(r),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(g&&(g=!1,this.outdent()),this.indent(),this._output.space_before_token=!0,this.print_string(this._ch),v?(v=!1,b=this._indentLevel>this._nestedLevel):b=this._indentLevel>=this._nestedLevel,this._options.newline_between_rules&&b&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===m&&this._output.trim(!0),_=!1,y=!1,g&&(this.outdent(),g=!1),this.print_string(this._ch),b=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!b&&!v||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||y||0!==f?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),g||(g=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(r),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?0===f?(g&&(this.outdent(),g=!1),y=!1,_=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),f++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),f&&(f--,this.outdent()))):(this.preserveSingleSpace(r),this.print_string(this._ch),this.eatWhitespace(),f++,this.indent()):")"===this._ch?(f&&(f--,this.outdent()),this.print_string(this._ch)):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||g||0!==f||_?this._output.space_before_token=!0:this._output.add_new_line()):">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||g||0!==f?"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(r),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),u.test(this._ch)&&(this._ch="")):"!"!==this._ch||this._input.lookBack("\\")?(this.preserveSingleSpace(r),this.print_string(this._ch)):(this.print_string(" "),this.print_string(this._ch)):this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&u.test(this._ch)&&(this._ch=""))}var D=this._output.get_code(t);return D},e.exports.Beautifier=m},function(e,t,a){"use strict";var n=a(6).Options;function i(e){n.call(this,e,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var t=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||t}i.prototype=new n,e.exports.Options=i}]),o=a;n=[],i=function(){return{css_beautify:o}}.apply(t,n),void 0===i||(e.exports=i)})()},"4e25":function(e,t,a){"use strict";a("5fc3")},"4e2d":function(e,t,a){"use strict";a("a8e6")},"4f12":function(e,t,a){},"4fad":function(e,t,a){var n=a("23e7"),i=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},5:function(e,t){},"517d":function(e,t,a){},5194:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:"height:"+e.height},[a("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.src,frameborder:"no",scrolling:"auto"}})])},i=[],o={name:"Druid",data:function(){return{src:"/prod-api/druid/index.html",height:document.documentElement.clientHeight-94.5+"px;",loading:!0}},mounted:function(){var e=this;setTimeout((function(){e.loading=!1}),230);var t=this;window.onresize=function(){t.height=document.documentElement.clientHeight-94.5+"px;"}}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},"51e0":function(e,t,a){"use strict";a("c6ce")},"52ef":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=(a("d3b7"),a("159b"),a("313e")),r=a.n(o),l=a("00ea");a("817d");var s=6e3,c={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Array,default:function(){return[]}},yAxis:{type:String,default:""}},data:function(){return{chart:null}},watch:{chartData:function(e,t){this.initChart()}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart&&this.chart.dispose();var e=[],t=0,a=0,n=0,i=0;this.chartData.forEach((function(o,r,l){0!=r&&(e.push({type:"bar",animationDuration:s,yAxisIndex:r%2==0?1:0,seriesLayoutBy:"row"}),r%2==0?o.forEach((function(e,t,a){0!=t&&(e>n&&(n=e),e<i&&(i=e))})):o.forEach((function(e,n,i){0!=n&&(e>t&&(t=e),e<a&&(a=e))})))})),i>=0&&a>=0?(i=0,a=0):(Math.abs(i)>Math.abs(n)?n=Math.abs(i):i=-1*Math.abs(n),Math.abs(a)>Math.abs(t)?t=Math.abs(a):a=-1*Math.abs(t)),this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({legend:{},dataset:{source:this.chartData},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){for(var t="<span>"+e[0].axisValue+"</span><br/>",a=0,n=e.length;a<n;a++){var i=e[a];-1!=i.seriesName.indexOf("数量")?t+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: '+i.color+'"></span>'+i.seriesName+"："+i.value[i.seriesIndex+1]+"份":-1!=i.seriesName.indexOf("金额")&&(t+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: '+i.color+'"></span>'+i.seriesName+"："+i.value[i.seriesIndex+1]+"元"),a<n-1&&(t+="<br/>")}return t}},grid:{top:30,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1},name:("1"==this.yAxis?"(正常)":"2"==this.yAxis?"(异常)":"")+"数量/份",min:a,max:t},{type:"value",axisTick:{show:!1},name:("1"==this.yAxis?"(正常)":"2"==this.yAxis?"(异常)":"")+"金额/元",min:i,max:n}],series:e},!0)}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},5336:function(e,t,a){},"54fbe":function(e,t,a){"use strict";a("dc4c")},5509:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1100px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-left"},[a("el-checkbox",{model:{value:e.detailFlag,callback:function(t){e.detailFlag=t},expression:"detailFlag"}},[e._v("拆分结果强制以清单存储")])],1),a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.multiple},on:{click:e.splitDetails}},[e._v("拆分明细")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.multiple},on:{click:e.splitSelectRow}},[e._v("拆出选中")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.restSplit}},[e._v("复位")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveSplit}},[e._v("保存拆分")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单据编号"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"购方名称"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName",t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单据日期"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.bizDate,callback:function(t){e.$set(e.form,"bizDate",t)},expression:"form.bizDate"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"splitMainTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":""},on:{"row-click":e.currClickRow,select:e.checkboxSelect,"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2015419679)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2295175998)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])}),a("u-table-column",{attrs:{label:"CRM单号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.ext1,callback:function(a){e.$set(t.row,"ext1",a)},expression:"scope.row.ext1"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"total"}})],1)],1)],1)],1),a("div",{staticClass:"gap-top"},[a("el-tabs",{attrs:{type:"border-card"}},e._l(e.splitDetailsInfo,(function(t,n){return a("el-tab-pane",{key:n,attrs:{label:t.title}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"splitBillDetailTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:e.splitDetailsData[n],"max-height":"250","use-virtual":""}},[a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}],null,!0)}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}],null,!0)}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}],null,!0)}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}],null,!0)}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}],null,!0)}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}],null,!0)}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!0)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}],null,!0)}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!0)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}],null,!0)}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}],null,!0)}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}],null,!0)}),a("u-table-column",{attrs:{label:"CRM单号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.ext1,callback:function(a){e.$set(t.row,"ext1",a)},expression:"scope.row.ext1"}})]}}],null,!0)})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.splitTotalTableData(n),"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"total"}})],1)],1)],1)],1)})),1)],1)],1)]),a("el-dialog",{attrs:{title:"明细拆分选项",visible:e.splitDetailsOptionOpen,width:"400px","append-to-body":"",id:"splitDetailsModal"},on:{"update:visible":function(t){e.splitDetailsOptionOpen=t},close:e.splitDetailsDialogClose}},[a("div",[a("el-form",{ref:"splitDetailsForm",attrs:{model:e.splitDetailsForm,size:"small","label-width":""}},[a("el-radio-group",{on:{change:e.splitTypeChange},model:{value:e.splitDetailsForm.splitType,callback:function(t){e.$set(e.splitDetailsForm,"splitType",t)},expression:"splitDetailsForm.splitType"}},[a("el-radio",{attrs:{label:"1"}},[e._v(" 明细行金额不大于 "),a("el-form-item",[a("el-input",{staticStyle:{width:"80%"},on:{focus:e.detailsMoneyFocus},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.splitDetailsForm.detailsMoney,callback:function(t){e.$set(e.splitDetailsForm,"detailsMoney",t)},expression:"splitDetailsForm.detailsMoney"}})],1),a("el-checkbox",{staticStyle:{"margin-left":"-20px"},attrs:{label:"含税"},model:{value:e.splitDetailsForm.splitHsbz,callback:function(t){e.$set(e.splitDetailsForm,"splitHsbz",t)},expression:"splitDetailsForm.splitHsbz"}})],1),a("el-radio",{attrs:{label:"2"}},[e._v(" 明细行数量不大于 "),a("el-form-item",[a("el-input",{staticStyle:{width:"80%"},on:{focus:e.numberFocus},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.splitDetailsForm.number,callback:function(t){e.$set(e.splitDetailsForm,"number",t)},expression:"splitDetailsForm.number"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitSplitDetail}},[e._v("执行拆分")]),a("el-button",{on:{click:function(t){e.splitDetailsOptionOpen=!1}}},[e._v("取消拆分")])],1)])],1)},i=[],o=a("b85c"),r=(a("4e82"),a("caad"),a("d3b7"),a("25f0"),a("4de4"),a("a434"),a("b680"),a("159b"),a("c85c")),l=a("00c6"),s=a("ed08"),c=a("c38a"),u=(a("a18c"),{name:"splitBillModal",data:function(){return{title:"单据拆分(电票明细不能超过100行,普票明细不能超过2000行)",open:!1,single:!0,multiple:!0,splitDetailsOptionOpen:!1,detailFlag:!1,rows:[],selectRowsIndexArr:[],taxRateOptions:[],flagOptions:[],billId:"",form:{billNo:"",invType:"2",bizDate:"",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},hsbz:"0",billDetailsData:[{index:0,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",ext1:""}],splitDetailsInfo:[{title:"待形成单据"}],splitDetailsData:[],splitDetailsForm:{splitType:"1",splitHsbz:!1,detailsMoney:"",number:""},clickSelect:!1,quota:0}},computed:{totalTableData:function(){var e=[{total:""}],t="";return t="合计金额:"+this.form.totalAmountWithoutTax+" ,合计税额:"+this.form.totalTaxAmount+" ,价税合计:"+this.form.totalAmount,e[0].total=t,e},splitTotalTableData:function(){var e=this;return function(t){var a=[{total:""}],n="";return n=""!=e.splitDetailsInfo[t].totalAmountWithoutTax&&void 0!=e.splitDetailsInfo[t].totalAmountWithoutTax?"合计金额:"+e.splitDetailsInfo[t].totalAmountWithoutTax+" ,合计税额:"+e.splitDetailsInfo[t].totalTaxAmount+" ,价税合计:"+e.splitDetailsInfo[t].totalAmount:"暂无数据",a[0].total=n,a}}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data}))},methods:{billDialogShow:function(){this.open=!0},billDialogClose:function(){this.splitDetailsData=[],this.splitDetailsInfo=[{title:"待形成单据"}]},handleSelectionChange:function(e){e=this.$refs.splitMainTable.getCheckboxRecords(),e.sort((function(e,t){return e.index-t.index})),this.rows=e,this.single=1!=e.length&&!(2==e.length&&"2"==e[0].discountFlag&&"1"==e[1].discountFlag),this.multiple=!e.length},fillBillDialog:function(e){var t=this;Object(r["k"])(e).then((function(a){200==a.code?(t.quota=a.data,Object(r["j"])(e).then((function(e){var a=e.data;t.billId=a.id,t.form.invType=a.invType,t.form.billNo=a.billNo,t.form.buyName=a.buyName,t.form.bizDate=a.bizDate,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount;var n=a.details;t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=void 0!=o.rate?t.specialRateFormalEcho(o):"",t.billDetailsData.push(o)}t.open=!0}))):t.msgError(a.msg)}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},splitSelectRow:function(){var e=this;if(("51"==this.form.invType||"52"==this.form.invType)&&this.rows.length>100)this.msgError("电票明细不能超过100行");else if(("0"==this.form.invType||"2"==this.form.invType)&&this.rows.length>2e3)this.msgError("纸票明细不能超过2000行");else{for(var t=0,a=0;a<this.rows.length;a++)t+=parseFloat(this.rows[a].amountWithoutTax);if((null!=this.quota||""!=this.quota)&&t>this.quota)this.msgError("拆分选中行的不含税金额合计超过限额("+this.quota+")");else{for(var n=this.billDetailsData.filter((function(t,a){for(var n=0;n<e.rows.length;n++)if(e.rows[n].index==a)return!1;return!0})),i=0;i<n.length;i++)n[i].index=i;this.billDetailsData=Object(s["e"])(n),this.useCalc();var o=Object(s["e"])(this.rows);this.rows=[];for(var r=0;r<o.length;r++)o[r].index=r;this.splitDetailsData.splice(this.splitDetailsData.length,0,o);var l=this.splitDetailsData.length-1;console.log("currIndex:"+l+"---"+this.splitDetailsData[l][0]),console.log(this.splitDetailsInfo.length),this.splitDetailsInfo.splice(this.splitDetailsInfo.length-1,0,{title:"拆分单据"+this.splitDetailsInfo.length,totalAmount:this.splitCalcTotalAmount(l),totalAmountWithoutTax:this.splitCalcTotalAmountWithoutTax(l),totalTaxAmount:this.splitCalcTotalTaxAmount(l)})}}},saveSplit:function(){var e=this;if(this.rows.sort((function(e,t){return e.index-t.index})),0!=this.splitDetailsData.length)if((null!=this.quota||""!=this.quota)&&parseFloat(this.form.totalAmountWithoutTax)>parseFloat(this.quota))this.msgError("原单据的不含税金额超过限额("+this.quota+")");else{for(var t=0;t<this.splitDetailsInfo.length;t++)if((null!=this.quota||""!=this.quota)&&parseFloat(this.splitDetailsInfo[t].totalAmountWithoutTax)>parseFloat(this.quota))return void this.msgError("拆分单据"+(t+1)+"的不含税金额超过限额("+this.quota+")");var a=[],n=Object(s["e"])(this.form);n.splitFromId=this.billId,n.detailFlag?n.detailFlag="1":n.detailFlag="0";for(var i=0;i<this.splitDetailsData.length;i++){for(var o=Object(s["e"])(this.splitDetailsData[i]),r=0;r<o.length;r++)o[r].rowIndex=r,o[r].rate=isNaN(o[r].rate)?0:o[r].rate;n.details=o,n.totalAmount=this.splitDetailsInfo[i].totalAmount,n.totalAmountWithoutTax=this.splitDetailsInfo[i].totalAmountWithoutTax,n.totalTaxAmount=this.splitDetailsInfo[i].totalTaxAmount,a.push(Object(s["e"])(n))}if(this.billDetailsData.length>0){for(var c=Object(s["e"])(this.billDetailsData),u=0,d=c.length;u<d;u++)c[u].rowIndex=u,c[u].rate=isNaN(c[u].rate)?0:c[u].rate;n.details=c,n.totalAmount=this.form.totalAmount,n.totalAmountWithoutTax=this.form.totalAmountWithoutTax,n.totalTaxAmount=this.form.totalTaxAmount,a.push(Object(s["e"])(n))}Object(l["a"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.open=!1,e.$emit("updateBillTable")):e.msgError(t.msg)}))}else this.msgError("请进行拆分再保存")},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},splitCalcTotalTaxAmount:function(e){var t,a=0,n=Object(o["a"])(this.splitDetailsData[e]);try{for(n.s();!(t=n.n()).done;){var i=t.value;""!=i.taxAmount&&(a+=parseFloat(i.taxAmount))}}catch(r){n.e(r)}finally{n.f()}return a.toFixed(2)},splitCalcTotalAmountWithoutTax:function(e){var t,a=0,n=Object(o["a"])(this.splitDetailsData[e]);try{for(n.s();!(t=n.n()).done;){var i=t.value;""!=i.amountWithoutTax&&(a+=parseFloat(i.amountWithoutTax))}}catch(r){n.e(r)}finally{n.f()}return a.toFixed(2)},splitCalcTotalAmount:function(e){var t,a=0,n=Object(o["a"])(this.splitDetailsData[e]);try{for(n.s();!(t=n.n()).done;){var i=t.value;""!=i.amountWithTax&&(a+=parseFloat(i.amountWithTax))}}catch(r){n.e(r)}finally{n.f()}return a.toFixed(2)},splitDetails:function(){this.splitDetailsOptionOpen=!0},splitTypeChange:function(){"2"==this.splitDetailsForm.splitType?(this.splitDetailsForm.splitHsbz=!1,this.splitDetailsForm.detailsMoney=""):this.splitDetailsForm.number=""},submitSplitDetail:function(){var e=this.rows[0];if(2==this.rows.length&&"1"==this.rows[1].discountFlag&&this.rows[1],""!=e.number&&null!=e.number&&void 0!=e.number){if(parseFloat(e.number)>=0?(this.splitDetailsForm.number=""==this.splitDetailsForm.number?"":Math.abs(parseFloat(this.splitDetailsForm.number)).toString(),this.splitDetailsForm.detailsMoney=""==this.splitDetailsForm.detailsMoney?"":Math.abs(parseFloat(this.splitDetailsForm.detailsMoney)).toString()):(this.splitDetailsForm.number=""==this.splitDetailsForm.number?"":(-1*Math.abs(parseFloat(this.splitDetailsForm.number))).toString(),this.splitDetailsForm.detailsMoney=""==this.splitDetailsForm.detailsMoney?"":(-1*Math.abs(parseFloat(this.splitDetailsForm.detailsMoney))).toString()),Math.abs(parseFloat(e.number))<Math.abs(parseFloat(this.splitDetailsForm.number)))return this.msgError("所填数量大于选择行明细数量"),void(this.splitDetailsForm.number="");if(this.splitDetailsForm.splitHsbz){if(Math.abs(parseFloat(e.amountWithTax))<Math.abs(parseFloat(this.splitDetailsForm.detailsMoney)))return this.msgError("所填金额大于选择行含税金额"),void(this.splitDetailsForm.detailsMoney="")}else if(Math.abs(parseFloat(e.amountWithoutTax))<Math.abs(parseFloat(this.splitDetailsForm.detailsMoney)))return this.msgError("所填金额大于选择行不含税金额"),void(this.splitDetailsForm.detailsMoney="")}"1"==this.splitDetailsForm.splitType?this.splitDetailsForm.splitHsbz?(this.multilineSplitAmountHS(),this.sortForIndex()):(this.multilineSplitAmount(),this.sortForIndex()):"2"==this.splitDetailsForm.splitType?(this.multilineSplitNumber(),this.sortForIndex()):this.splitDetailsForm.splitTypeAmount&&this.splitDetailsForm.splitTypeNumber,this.splitDetailsOptionOpen=!1},splitAmount:function(e,t){for(var a,n,i=Math.ceil(parseFloat(e.amountWithoutTax)/parseFloat(this.splitDetailsForm.detailsMoney)),o=parseFloat(this.splitDetailsForm.detailsMoney/parseFloat(e.amountWithoutTax)),r=[],l=0,c=0,u=0,d=0,p=0,h=0,m=1;m<i;m++)a=Object(s["e"])(e),a.number=null==a.number||""==a?"":(o*parseFloat(a.number)).toFixed(2),a.amountWithoutTax=this.splitDetailsForm.detailsMoney,a.amountWithTax=(parseFloat(a.amountWithTax)*o).toFixed(2),a.taxAmount=(parseFloat(a.taxAmount)*o).toFixed(2),l+=parseFloat(this.splitDetailsForm.detailsMoney),c+=parseFloat((parseFloat(e.amountWithTax)*o).toFixed(2)),u+=parseFloat((parseFloat(e.taxAmount)*o).toFixed(2)),r.push(a),null!=t&&(n=Object(s["e"])(t),n.amountWithoutTax=(parseFloat(n.amountWithoutTax)*o).toFixed(2),n.amountWithTax=(parseFloat(n.amountWithTax)*o).toFixed(2),n.taxAmount=(parseFloat(n.taxAmount)*o).toFixed(2),d+=parseFloat((parseFloat(t.amountWithoutTax)*o).toFixed(2)),p+=parseFloat((parseFloat(t.amountWithTax)*o).toFixed(2)),h+=parseFloat((parseFloat(t.taxAmount)*o).toFixed(2)),r.push(n));var f=parseFloat(e.amountWithoutTax)-l,b=0;if(null!=t&&(b=parseFloat(t.amountWithoutTax)-d),0!=f&&(a=Object(s["e"])(e),a.number=null==a.number||""==a?"":(parseFloat(a.number)-o*parseFloat(a.number)*(i-1)).toFixed(2),a.amountWithoutTax=f.toFixed(2),a.amountWithTax=(parseFloat(a.amountWithTax)-c).toFixed(2),a.taxAmount=(parseFloat(a.taxAmount)-u).toFixed(2),r.push(a),null!=t&&(n=Object(s["e"])(t),n.amountWithoutTax=b.toFixed(2),n.amountWithTax=(parseFloat(t.amountWithTax)-p).toFixed(2),n.taxAmount=(parseFloat(t.taxAmount)-h).toFixed(2),r.push(n))),this.judgeDetailsLength(this.form.invType,this.billDetailsData.length+r.length-1)){this.billDetailsData.splice(e.index,1),null!=t&&this.billDetailsData.splice(e.index,1);for(var g=0;g<r.length;g++)this.billDetailsData.splice(e.index+g,0,r[g])}},multilineSplitAmount:function(){for(var e=[],t=0,a=this.rows.length;t<a;t++){var n=this.rows[t],i=null;"2"==n.discountFlag&&(t++,i=this.rows[t]);for(var o=Math.ceil(parseFloat(n.amountWithoutTax)/parseFloat(this.splitDetailsForm.detailsMoney)),r=parseFloat(this.splitDetailsForm.detailsMoney/parseFloat(n.amountWithoutTax)),l=void 0,c=0,u=0,d=0,p=void 0,h=0,m=0,f=0,b=1;b<o;b++)l=Object(s["e"])(n),l.number=null==l.number||""==l?"":(r*parseFloat(l.number)).toFixed(2),l.amountWithoutTax=this.splitDetailsForm.detailsMoney,l.taxAmount=(parseFloat(l.taxAmount)*r).toFixed(2),l.amountWithTax=(parseFloat(l.amountWithoutTax)+parseFloat(l.taxAmount)).toFixed(2),c+=parseFloat(this.splitDetailsForm.detailsMoney),u+=parseFloat((parseFloat(n.amountWithTax)*r).toFixed(2)),d+=parseFloat((parseFloat(n.taxAmount)*r).toFixed(2)),e.push(l),null!=i&&(p=Object(s["e"])(i),p.amountWithoutTax=(parseFloat(p.amountWithoutTax)*r).toFixed(2),p.taxAmount=(parseFloat(p.taxAmount)*r).toFixed(2),p.amountWithTax=(parseFloat(p.amountWithoutTax)+parseFloat(p.taxAmount)).toFixed(2),h+=parseFloat((parseFloat(i.amountWithoutTax)*r).toFixed(2)),m+=parseFloat((parseFloat(i.amountWithTax)*r).toFixed(2)),f+=parseFloat((parseFloat(i.taxAmount)*r).toFixed(2)),e.push(p));var g=parseFloat(n.amountWithoutTax)-c,v=0;null!=i&&(v=parseFloat(i.amountWithoutTax)-h),0!=g&&(l=Object(s["e"])(n),l.number=null==l.number||""==l?"":(parseFloat(l.number)-r*parseFloat(l.number)*(o-1)).toFixed(2),l.amountWithoutTax=g.toFixed(2),l.amountWithTax=(parseFloat(l.amountWithTax)-u).toFixed(2),l.taxAmount=(parseFloat(l.taxAmount)-d).toFixed(2),e.push(l),null!=i&&(p=Object(s["e"])(i),p.amountWithoutTax=v.toFixed(2),p.amountWithTax=(parseFloat(i.amountWithTax)-m).toFixed(2),p.taxAmount=(parseFloat(i.taxAmount)-f).toFixed(2),e.push(p)))}var y=[];this.rows.forEach((function(e,t,a){y.push(e.index)}));var _=this.billDetailsData.filter((function(e,t,a){return!y.includes(e.index)}));if(1==this.rows.length||2==this.rows.length&&"1"==this.rows[1].discountFlag){var x=this.rows[0],w=null;2==this.rows.length&&"1"==this.rows[1].discountFlag&&(w=this.rows[1]),this.billDetailsData.splice(x.index,1),null!=w&&this.billDetailsData.splice(x.index,1);for(var k=0;k<e.length;k++)this.billDetailsData.splice(x.index+k,0,e[k])}else{this.billDetailsData=_,this.useCalc();for(var T=0,D=e.length;T<D;T++){var S=Object(s["e"])(e[T]),O=[];if("2"!=S.discountFlag)O.push(S);else{T++;var N=Object(s["e"])(e[T]);O.push(S),O.push(N)}this.splitDetailsData.splice(this.splitDetailsData.length,0,O);var P=this.splitDetailsData.length-1;this.splitDetailsInfo.splice(this.splitDetailsInfo.length-1,0,{title:"拆分单据"+this.splitDetailsInfo.length,totalAmount:this.splitCalcTotalAmount(P),totalAmountWithoutTax:this.splitCalcTotalAmountWithoutTax(P),totalTaxAmount:this.splitCalcTotalTaxAmount(P)})}this.splitSortForIndex()}},splitAmountHS:function(e,t){for(var a,n,i=Math.ceil(parseFloat(e.amountWithTax)/parseFloat(this.splitDetailsForm.detailsMoney)),o=parseFloat(this.splitDetailsForm.detailsMoney/parseFloat(e.amountWithTax)),r=[],l=0,c=0,u=0,d=0,p=0,h=0,m=1;m<i;m++)a=Object(s["e"])(e),a.number=null==a.number||""==a?"":(o*parseFloat(a.number)).toFixed(2),a.amountWithoutTax=(parseFloat(a.amountWithoutTax)*o).toFixed(2),a.amountWithTax=this.splitDetailsForm.detailsMoney,a.taxAmount=(parseFloat(a.amountWithTax)-parseFloat(a.amountWithoutTax)).toFixed(2),l+=parseFloat((parseFloat(e.amountWithoutTax)*o).toFixed(2)),c+=parseFloat(this.splitDetailsForm.detailsMoney),u+=parseFloat((parseFloat(e.taxAmount)*o).toFixed(2)),r.push(a),null!=t&&(n=Object(s["e"])(t),n.amountWithoutTax=(parseFloat(n.amountWithoutTax)*o).toFixed(2),n.amountWithTax=(parseFloat(n.amountWithTax)*o).toFixed(2),n.taxAmount=(parseFloat(n.amountWithTax)-parseFloat(n.amountWithoutTax)).toFixed(2),d+=parseFloat((parseFloat(t.amountWithoutTax)*o).toFixed(2)),p+=parseFloat((parseFloat(t.amountWithTax)*o).toFixed(2)),h+=parseFloat((parseFloat(t.taxAmount)*o).toFixed(2)),r.push(n));var f=parseFloat(e.amountWithTax)-c,b=0;if(null!=t&&(b=parseFloat(t.amountWithTax)-p),0!=f&&(a=Object(s["e"])(e),a.number=null==a.number||""==a?"":(parseFloat(a.number)-o*parseFloat(a.number)*(i-1)).toFixed(2),a.amountWithoutTax=(parseFloat(a.amountWithoutTax)-l).toFixed(2),a.amountWithTax=f.toFixed(2),a.taxAmount=(parseFloat(a.taxAmount)-u).toFixed(2),r.push(a),null!=t&&(n=Object(s["e"])(t),n.amountWithoutTax=(parseFloat(t.amountWithoutTax)-d).toFixed(2),n.amountWithTax=b.toFixed(2),n.taxAmount=(parseFloat(t.taxAmount)-h).toFixed(2),r.push(n))),this.judgeDetailsLength(this.form.invType,this.billDetailsData.length+r.length-1)){this.billDetailsData.splice(e.index,1),null!=t&&this.billDetailsData.splice(e.index,1);for(var g=0;g<r.length;g++)this.billDetailsData.splice(e.index+g,0,r[g])}},multilineSplitAmountHS:function(){for(var e=[],t=0,a=this.rows.length;t<a;t++){var n=this.rows[t],i=null;"2"==n.discountFlag&&(t++,i=this.rows[t]);for(var o=Math.ceil(parseFloat(n.amountWithTax)/parseFloat(this.splitDetailsForm.detailsMoney)),r=parseFloat(this.splitDetailsForm.detailsMoney/parseFloat(n.amountWithTax)),l=void 0,c=0,u=0,d=0,p=void 0,h=0,m=0,f=0,b=1;b<o;b++)l=Object(s["e"])(n),l.number=null==l.number||""==l?"":(r*parseFloat(l.number)).toFixed(2),l.amountWithoutTax=(parseFloat(l.amountWithoutTax)*r).toFixed(2),l.amountWithTax=this.splitDetailsForm.detailsMoney,l.taxAmount=(parseFloat(l.amountWithTax)-parseFloat(l.amountWithoutTax)).toFixed(2),c+=parseFloat((parseFloat(n.amountWithoutTax)*r).toFixed(2)),u+=parseFloat(this.splitDetailsForm.detailsMoney),d+=parseFloat((parseFloat(n.taxAmount)*r).toFixed(2)),e.push(l),null!=i&&(p=Object(s["e"])(i),p.amountWithoutTax=(parseFloat(p.amountWithoutTax)*r).toFixed(2),p.amountWithTax=(parseFloat(p.amountWithTax)*r).toFixed(2),p.taxAmount=(parseFloat(p.amountWithTax)-parseFloat(p.amountWithoutTax)).toFixed(2),h+=parseFloat((parseFloat(i.amountWithoutTax)*r).toFixed(2)),m+=parseFloat((parseFloat(i.amountWithTax)*r).toFixed(2)),f+=parseFloat((parseFloat(i.taxAmount)*r).toFixed(2)),e.push(p));var g=parseFloat(n.amountWithTax)-u,v=0;null!=i&&(v=parseFloat(i.amountWithTax)-m),0!=g&&(l=Object(s["e"])(n),l.number=null==l.number||""==l?"":(parseFloat(l.number)-r*parseFloat(l.number)*(o-1)).toFixed(2),l.amountWithoutTax=(parseFloat(l.amountWithoutTax)-c).toFixed(2),l.amountWithTax=g.toFixed(2),l.taxAmount=(parseFloat(l.taxAmount)-d).toFixed(2),e.push(l),null!=i&&(p=Object(s["e"])(i),p.amountWithoutTax=(parseFloat(i.amountWithoutTax)-h).toFixed(2),p.amountWithTax=v.toFixed(2),p.taxAmount=(parseFloat(i.taxAmount)-f).toFixed(2),e.push(p)))}var y=[];this.rows.forEach((function(e,t,a){y.push(e.index)}));var _=this.billDetailsData.filter((function(e,t,a){return!y.includes(e.index)}));if(1==this.rows.length||2==this.rows.length&&"1"==this.rows[1].discountFlag){var x=this.rows[0],w=null;2==this.rows.length&&"1"==this.rows[1].discountFlag&&(w=this.rows[1]),this.billDetailsData.splice(x.index,1),null!=w&&this.billDetailsData.splice(x.index,1);for(var k=0;k<e.length;k++)this.billDetailsData.splice(x.index+k,0,e[k])}else{this.billDetailsData=_,this.useCalc();for(var T=0,D=e.length;T<D;T++){var S=Object(s["e"])(e[T]),O=[];if("2"!=S.discountFlag)O.push(S);else{T++;var N=Object(s["e"])(e[T]);O.push(S),O.push(N)}this.splitDetailsData.splice(this.splitDetailsData.length,0,O);var P=this.splitDetailsData.length-1;this.splitDetailsInfo.splice(this.splitDetailsInfo.length-1,0,{title:"拆分单据"+this.splitDetailsInfo.length,totalAmount:this.splitCalcTotalAmount(P),totalAmountWithoutTax:this.splitCalcTotalAmountWithoutTax(P),totalTaxAmount:this.splitCalcTotalTaxAmount(P)})}this.splitSortForIndex()}},splitNumber:function(e,t){for(var a,n,i=Math.ceil(parseFloat(e.number)/parseFloat(this.splitDetailsForm.number)),o=parseFloat(this.splitDetailsForm.number/parseFloat(e.number)),r=[],l=0,c=0,u=0,d=0,p=0,h=0,m=1;m<i;m++)a=Object(s["e"])(e),a.number=this.splitDetailsForm.number,a.amountWithoutTax=(parseFloat(a.amountWithoutTax)*o).toFixed(2),a.amountWithTax=(parseFloat(a.amountWithTax)*o).toFixed(2),a.taxAmount=(parseFloat(a.taxAmount)*o).toFixed(2),l+=parseFloat((parseFloat(e.amountWithoutTax)*o).toFixed(2)),c+=parseFloat((parseFloat(e.amountWithTax)*o).toFixed(2)),u+=parseFloat((parseFloat(e.taxAmount)*o).toFixed(2)),r.push(a),null!=t&&(n=Object(s["e"])(t),n.amountWithoutTax=(parseFloat(n.amountWithoutTax)*o).toFixed(2),n.amountWithTax=(parseFloat(n.amountWithTax)*o).toFixed(2),n.taxAmount=(parseFloat(n.taxAmount)*o).toFixed(2),d+=parseFloat((parseFloat(t.amountWithoutTax)*o).toFixed(2)),p+=parseFloat((parseFloat(t.amountWithTax)*o).toFixed(2)),h+=parseFloat((parseFloat(t.taxAmount)*o).toFixed(2)),r.push(n));var f=parseFloat(e.number)-(i-1)*parseFloat(this.splitDetailsForm.number);if(0!=f&&(a=Object(s["e"])(e),a.number=f.toFixed(2),a.amountWithoutTax=(parseFloat(a.amountWithoutTax)-l).toFixed(2),a.amountWithTax=(parseFloat(a.amountWithTax)-c).toFixed(2),a.taxAmount=(parseFloat(a.taxAmount)-u).toFixed(2),r.push(a),null!=t&&(n=Object(s["e"])(t),n.amountWithoutTax=(parseFloat(t.amountWithoutTax)-d).toFixed(2),n.amountWithTax=(parseFloat(t.amountWithTax)-p).toFixed(2),n.taxAmount=(parseFloat(t.taxAmount)-h).toFixed(2),r.push(n))),this.judgeDetailsLength(this.form.invType,this.billDetailsData.length+r.length-1)){this.billDetailsData.splice(e.index,1),null!=t&&this.billDetailsData.splice(e.index,1);for(var b=0;b<r.length;b++)this.billDetailsData.splice(e.index+b,0,r[b])}},multilineSplitNumber:function(){for(var e=[],t=0,a=this.rows.length;t<a;t++){var n=this.rows[t],i=null;"2"==n.discountFlag&&(t++,i=this.rows[t]);for(var o=Math.ceil(parseFloat(n.number)/parseFloat(this.splitDetailsForm.number)),r=parseFloat(this.splitDetailsForm.number/parseFloat(n.number)),l=void 0,c=0,u=0,d=void 0,p=0,h=0,m=1;m<o;m++)l=Object(s["e"])(n),l.number=this.splitDetailsForm.number,l.amountWithoutTax=(parseFloat(l.amountWithoutTax)*r).toFixed(2),l.taxAmount=(parseFloat(l.taxAmount)*r).toFixed(2),l.amountWithTax=(parseFloat(l.amountWithoutTax)+parseFloat(l.taxAmount)).toFixed(2),c+=parseFloat((parseFloat(n.amountWithoutTax)*r).toFixed(2)),parseFloat((parseFloat(n.amountWithTax)*r).toFixed(2)),u+=parseFloat((parseFloat(n.taxAmount)*r).toFixed(2)),e.push(l),null!=i&&(d=Object(s["e"])(i),d.amountWithoutTax=(parseFloat(d.amountWithoutTax)*r).toFixed(2),d.taxAmount=(parseFloat(d.taxAmount)*r).toFixed(2),d.amountWithTax=(parseFloat(d.amountWithoutTax)+parseFloat(d.taxAmount)).toFixed(2),p+=parseFloat((parseFloat(i.amountWithoutTax)*r).toFixed(2)),parseFloat((parseFloat(i.amountWithTax)*r).toFixed(2)),h+=parseFloat((parseFloat(i.taxAmount)*r).toFixed(2)),e.push(d));var f=parseFloat(n.number)-(o-1)*parseFloat(this.splitDetailsForm.number);0!=f&&(l=Object(s["e"])(n),l.number=f.toFixed(2),l.amountWithoutTax=(parseFloat(l.amountWithoutTax)-c).toFixed(2),l.taxAmount=(parseFloat(l.taxAmount)-u).toFixed(2),l.amountWithTax=(parseFloat(l.amountWithoutTax)+parseFloat(l.taxAmount)).toFixed(2),e.push(l),null!=i&&(d=Object(s["e"])(i),d.amountWithoutTax=(parseFloat(i.amountWithoutTax)-p).toFixed(2),d.taxAmount=(parseFloat(i.taxAmount)-h).toFixed(2),d.amountWithTax=(parseFloat(d.amountWithoutTax)+parseFloat(d.taxAmount)).toFixed(2),e.push(d)))}var b=[];this.rows.forEach((function(e,t,a){b.push(e.index)}));var g=this.billDetailsData.filter((function(e,t,a){return!b.includes(e.index)}));if(1==this.rows.length||2==this.rows.length&&"1"==this.rows[1].discountFlag){var v=this.rows[0],y=null;if(2==this.rows.length&&"1"==this.rows[1].discountFlag&&(y=this.rows[1]),!this.judgeDetailsLength(this.form.invType,this.billDetailsData.length+e.length-1))return;this.billDetailsData.splice(v.index,1),null!=y&&this.billDetailsData.splice(v.index,1);for(var _=0;_<e.length;_++)this.billDetailsData.splice(v.index+_,0,e[_])}else{this.billDetailsData=g,this.useCalc();for(var x=0,w=e.length;x<w;x++){var k=Object(s["e"])(e[x]),T=[];if("2"!=k.discountFlag)T.push(k);else{x++;var D=Object(s["e"])(e[x]);T.push(k),T.push(D)}this.splitDetailsData.splice(this.splitDetailsData.length,0,T);var S=this.splitDetailsData.length-1;this.splitDetailsInfo.splice(this.splitDetailsInfo.length-1,0,{title:"拆分单据"+this.splitDetailsInfo.length,totalAmount:this.splitCalcTotalAmount(S),totalAmountWithoutTax:this.splitCalcTotalAmountWithoutTax(S),totalTaxAmount:this.splitCalcTotalTaxAmount(S)})}this.splitSortForIndex()}},splitDetailsDialogClose:function(){this.splitDetailsForm={splitType:"1",splitHsbz:!1,detailsMoney:"",number:""}},sortForIndex:function(){for(var e=0;e<this.billDetailsData.length;e++)this.billDetailsData[e].index=e},splitSortForIndex:function(){for(var e=0,t=this.splitDetailsData.length;e<t;e++)for(var a=this.splitDetailsData[e],n=0,i=a.length;n<i;n++)a[n].index=n},restSplit:function(){var e=this,t={id:this.billId,bizDate:this.form.bizDate};Object(r["j"])(t).then((function(t){var a=t.data;e.billId=a.id,e.form.billNo=a.billNo,e.form.buyName=a.buyName,e.form.bizDate=a.bizDate,e.form.totalAmount=a.totalAmount,e.form.totalAmountWithoutTax=a.totalAmountWithoutTax,e.form.totalTaxAmount=a.totalTaxAmount;var n=a.details;e.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=void 0!=o.rate?o.rate.toString():"",e.billDetailsData.push(o)}})),this.splitDetailsData=[],this.splitDetailsInfo=[{title:"待形成单据"}]},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.splitMainTable.toggleRowSelection(i),"1"==e.discountFlag?(n.row=this.billDetailsData[e.index-1],this.$refs.splitMainTable.toggleRowSelection(i)):"2"==e.discountFlag&&(n.row=this.billDetailsData[e.index+1],this.$refs.splitMainTable.toggleRowSelection(i))},checkboxSelect:function(e,t){var a={row:t},n=[];n.push(a),"1"==t.discountFlag?(a.row=this.billDetailsData[t.index-1],this.$refs.splitMainTable.toggleRowSelection(n)):"2"==t.discountFlag&&(a.row=this.billDetailsData[t.index+1],this.$refs.splitMainTable.toggleRowSelection(n))},validIsNumber:function(e){e.target.value=Object(c["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},detailsMoneyFocus:function(){this.splitDetailsForm.splitType="1"},numberFocus:function(){this.splitDetailsForm.splitType="2"}}}),d=u,p=(a("140c"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,null,null);t["default"]=h.exports},5570:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"红字发票信息选择",visible:e.redInfoShow,width:"600px","append-to-body":"",id:"redInfoModal"},on:{"update:visible":function(t){e.redInfoShow=t},close:e.redInfoDialogClose}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.redInfoForm,size:"small","label-position":"left","label-width":"85px",rules:e.rules}},[a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("开具红字增值税专用发票信息表信息选择")]),a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{attrs:{disabled:""},on:{change:e.handleCheckedChangeApply},model:{value:e.redInfoForm.checkedApply,callback:function(t){e.$set(e.redInfoForm,"checkedApply",t)},expression:"redInfoForm.checkedApply"}},[a("el-radio",{staticClass:"public-radio",attrs:{label:"1"}},[e._v("一.购买方申请")]),a("el-radio",{staticClass:"public-radio",attrs:{label:"0"}},[e._v("二.销售方申请")])],1)],1)],1),a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("对应蓝字增值税专用发票信息")]),a("div",{staticClass:"public-info-item-body"},[a("el-row",[["81","82"].includes(e.redInfoForm.invType)?e._e():a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"发票代码:",prop:"sourceInvCode"}},[a("el-input",{attrs:{maxlength:12,clearable:"",readonly:"2"==e.redInfoForm.checkedBuyer},model:{value:e.redInfoForm.sourceInvCode,callback:function(t){e.$set(e.redInfoForm,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"redInfoForm.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"发票号码:",prop:"sourceInvNo"}},[a("el-input",{attrs:{clearable:"",maxlength:20,readonly:"2"==e.redInfoForm.checkedBuyer},model:{value:e.redInfoForm.sourceInvNo,callback:function(t){e.$set(e.redInfoForm,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"redInfoForm.sourceInvNo"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"开票时间:",prop:"sourceInvDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,readonly:"0"==e.redInfoForm.checkedBuyer},model:{value:e.redInfoForm.sourceInvDate,callback:function(t){e.$set(e.redInfoForm,"sourceInvDate",t)},expression:"redInfoForm.sourceInvDate"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"红冲原因",prop:"reason"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.redInfoForm.reason,callback:function(t){e.$set(e.redInfoForm,"reason",t)},expression:"redInfoForm.reason"}},e._l(e.qdRedReasonOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1)],1)],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRedInfo}},[e._v("下一步")]),a("el-button",{on:{click:function(t){e.redInfoShow=!1}}},[e._v("取 消")])],1)])},i=[],o=(a("caad"),a("ed08")),r={name:"qdRedInvoiceInfoSelect",props:{},data:function(){return{redInfoShow:!1,buyerApplyType:[{value:"2",label:"1.已抵扣"},{value:"1",label:"2.未抵扣"}],redInfoForm:{checkedApply:"0",checkedBuyer:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:"",reason:"",invType:""},rules:{sourceInvCode:[{required:!1,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"}],sourceInvNo:[{required:!1,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"}],sourceInvDate:[{required:!1,message:"请选择开票时间",trigger:["change","blur"]}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},qdRedReasonOptions:[]}},created:function(){var e=this;this.getDicts("qd_red_reason").then((function(t){e.qdRedReasonOptions=t.data}))},methods:{redInfoDialogShow:function(){this.redInfoShow=!0},redInfoDialogClose:function(){this.redInfoForm={checkedApply:"0",checkedBuyer:"0",sourceInvCode:"",sourceInvNo:"",sourceInvDate:""},this.rules={sourceInvCode:[{required:!1,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"}],sourceInvNo:[{required:!1,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"}],sourceInvDate:[{required:!1,message:"请选择开票时间",trigger:["change","blur"]}]}},handleCheckedChangeApply:function(e){"0"==this.redInfoForm.checkedApply?this.redInfoForm.checkedBuyer="":this.redInfoForm.checkedBuyer="2",this.validRulesChange()},handleCheckedChangeBuyer:function(e){this.validRulesChange()},validRulesChange:function(){"0"==this.redInfoForm.checkedApply||"1"==this.redInfoForm.checkedBuyer?(this.rules.sourceInvCode[0].required=!0,this.rules.sourceInvNo[0].required=!0,this.rules.sourceInvDate[0].required=!0):(this.rules.sourceInvCode[0].required=!1,this.rules.sourceInvNo[0].required=!1,this.rules.sourceInvDate[0].required=!1)},submitRedInfo:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=Object(o["e"])(e.redInfoForm);["81","82"].includes(a.invType)&&(a.sourceInvCode=a.sourceInvNo.substr(0,12),a.sourceInvNo=a.sourceInvNo.substr(12)),e.$emit("submitRedInfoP",a),e.redInfoDialogClose(),e.redInfoShow=!1}}))},setRedInfo:function(e){["81","82"].includes(e.invType)&&(e.sourceInvNo=e.sourceInvCode+e.sourceInvNo),this.redInfoForm=e}}},l=r,s=(a("f80b"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},"55fc":function(e,t,a){e.exports=a.p+"static/img/pdf_icon.6d745a65.png"},5640:function(e,t,a){"use strict";a("992c")},5788:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"岗位编码",prop:"postCode"}},[a("el-input",{attrs:{placeholder:"请输入岗位编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.postCode,callback:function(t){e.$set(e.queryParams,"postCode",t)},expression:"queryParams.postCode"}})],1),a("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[a("el-input",{attrs:{placeholder:"请输入岗位名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.postName,callback:function(t){e.$set(e.queryParams,"postName",t)},expression:"queryParams.postName"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"岗位状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:post:add"],expression:"['system:post:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:post:edit"],expression:"['system:post:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:post:remove"],expression:"['system:post:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:post:export"],expression:"['system:post:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.postList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"岗位编号",align:"center",prop:"postId"}}),a("el-table-column",{attrs:{label:"岗位编码",align:"center",prop:"postCode"}}),a("el-table-column",{attrs:{label:"岗位名称",align:"center",prop:"postName"}}),a("el-table-column",{attrs:{label:"岗位排序",align:"center",prop:"postSort"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:post:edit"],expression:"['system:post:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:post:remove"],expression:"['system:post:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[a("el-input",{attrs:{placeholder:"请输入岗位名称"},model:{value:e.form.postName,callback:function(t){e.$set(e.form,"postName",t)},expression:"form.postName"}})],1),a("el-form-item",{attrs:{label:"岗位编码",prop:"postCode"}},[a("el-input",{attrs:{placeholder:"请输入编码名称"},model:{value:e.form.postCode,callback:function(t){e.$set(e.form,"postCode",t)},expression:"form.postCode"}})],1),a("el-form-item",{attrs:{label:"岗位顺序",prop:"postSort"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.postSort,callback:function(t){e.$set(e.form,"postSort",t)},expression:"form.postSort"}})],1),a("el-form-item",{attrs:{label:"岗位状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/system/post/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/post/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/post",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/post",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/system/post/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/system/post/export",method:"get",params:e,responseType:"blob"})}var p=a("c38a"),h={name:"Post",components:{},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,postList:[],title:"",open:!1,statusOptions:[],queryParams:{pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0},form:{},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.postList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={postId:void 0,postCode:void 0,postName:void 0,postSort:0,status:"1",remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.postId})),this.single=1!=e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加岗位"},handleUpdate:function(e){var t=this;this.reset();var a=e.postId||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改岗位"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.postId?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.postId||this.ids;this.$confirm('是否确认删除岗位编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有岗位数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(p["g"])(10,"导出中",e),d(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"岗位数据.xls",e)})).catch((function(){}))}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},"586f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],o=a("2877"),r={},l=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},5881:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"缴款书号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入缴款书号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"填发日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择填发日期"},model:{value:e.queryParams.invDate,callback:function(t){e.$set(e.queryParams,"invDate",t)},expression:"queryParams.invDate"}})],1),a("el-form-item",{attrs:{label:"合同",prop:"contractNo"}},[a("el-input",{attrs:{placeholder:"请输入合同",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.contractNo,callback:function(t){e.$set(e.queryParams,"contractNo",t)},expression:"queryParams.contractNo"}})],1),a("el-form-item",{attrs:{label:"报关单编号",prop:"customsNo"}},[a("el-input",{attrs:{placeholder:"请输入报关单编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.customsNo,callback:function(t){e.$set(e.queryParams,"customsNo",t)},expression:"queryParams.customsNo"}})],1),a("el-form-item",{attrs:{label:"海关名称",prop:"customsName"}},[a("el-input",{attrs:{placeholder:"请输入海关名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.customsName,callback:function(t){e.$set(e.queryParams,"customsName",t)},expression:"queryParams.customsName"}})],1),a("el-form-item",{attrs:{label:"提/装货单号",prop:"deliveryNo"}},[a("el-input",{attrs:{placeholder:"请输入提/装货单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deliveryNo,callback:function(t){e.$set(e.queryParams,"deliveryNo",t)},expression:"queryParams.deliveryNo"}})],1),a("el-form-item",{attrs:{label:"海关口岸代码",prop:"portCode"}},[a("el-input",{attrs:{placeholder:"请输入海关口岸代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.portCode,callback:function(t){e.$set(e.queryParams,"portCode",t)},expression:"queryParams.portCode"}})],1),a("el-form-item",{attrs:{label:"收入机关",prop:"revenueAgency"}},[a("el-input",{attrs:{placeholder:"请输入收入机关",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.revenueAgency,callback:function(t){e.$set(e.queryParams,"revenueAgency",t)},expression:"queryParams.revenueAgency"}})],1),a("el-form-item",{attrs:{label:"缴款单位(人)公司名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入缴款单位(人)公司名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"是否双抬头",prop:"multiFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否双抬头",clearable:"",size:"small"},model:{value:e.queryParams.multiFlag,callback:function(t){e.$set(e.queryParams,"multiFlag",t)},expression:"queryParams.multiFlag"}},e._l(e.multiFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"稽核组织名称",prop:"auditDeptName"}},[a("el-input",{attrs:{placeholder:"请输入稽核组织名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.auditDeptName,callback:function(t){e.$set(e.queryParams,"auditDeptName",t)},expression:"queryParams.auditDeptName"}})],1),a("el-form-item",{attrs:{label:"稽核时间",prop:"auditTime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择稽核时间"},model:{value:e.queryParams.auditTime,callback:function(t){e.$set(e.queryParams,"auditTime",t)},expression:"queryParams.auditTime"}})],1),a("el-form-item",{attrs:{label:"稽核结果",prop:"auditResult"}},[a("el-select",{attrs:{placeholder:"请选择稽核结果",clearable:"",size:"small"},model:{value:e.queryParams.auditResult,callback:function(t){e.$set(e.queryParams,"auditResult",t)},expression:"queryParams.auditResult"}},[a("el-option",{attrs:{label:"请选择字典生成",value:""}})],1)],1),a("el-form-item",{attrs:{label:"录入人",prop:"createByUserName"}},[a("el-input",{attrs:{placeholder:"请输入录入人",clearable:"",size:"small"},model:{value:e.queryParams.createByUserName,callback:function(t){e.$set(e.queryParams,"createByUserName",t)},expression:"queryParams.createByUserName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:certificate:add"],expression:"['income:certificate:add']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("新增")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:ocr"],expression:"['income:zzsinvoice:ocr']"}],attrs:{icon:"el-icon-picture-outline"},nativeOn:{click:function(t){return e.handleImage(t)}}},[e._v("图片识别")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:smy"],expression:"['income:zzsinvoice:smy']"}],attrs:{icon:"el-icon-full-screen"},nativeOn:{click:function(t){return e.handleScanner(t)}}},[e._v("扫描仪录入")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:certificate:edit"],expression:"['income:certificate:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:certificate:remove"],expression:"['income:certificate:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:certificate:export"],expression:"['income:certificate:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:certificate:collect"],expression:"['income:certificate:collect']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.handleCheck}},[e._v("稽核")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.certificateList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"缴款书号码",align:"center",prop:"invNo",width:"200px"}}),a("el-table-column",{attrs:{label:"填发日期",align:"center",prop:"invDate",width:"120px"}}),a("el-table-column",{attrs:{label:"合计金额",align:"center",prop:"totalAmount",width:"120px"}}),a("el-table-column",{attrs:{label:"合同",align:"center",prop:"contractNo",width:"200px"}}),a("el-table-column",{attrs:{label:"报关单编号",align:"center",prop:"customsNo",width:"200px"}}),a("el-table-column",{attrs:{label:"海关名称",align:"center",prop:"customsName",width:"120px"}}),a("el-table-column",{attrs:{label:"提/装货单号",align:"center",prop:"deliveryNo",width:"120px"}}),a("el-table-column",{attrs:{label:"海关口岸代码",align:"center",prop:"portCode",width:"120px"}}),a("el-table-column",{attrs:{label:"备注币种",align:"center",prop:"currencyCode",width:"120px"}}),a("el-table-column",{attrs:{label:"收入机关",align:"center",prop:"revenueAgency",width:"120px"}}),a("el-table-column",{attrs:{label:"缴款单位(人)帐号",align:"center",prop:"buyAccount",width:"120px"}}),a("el-table-column",{attrs:{label:"缴款单位(人)开户银行",align:"center",prop:"buyBankAccount",width:"140px"}}),a("el-table-column",{attrs:{label:"缴款单位(人)公司名称",align:"center",prop:"buyName",width:"140px"}}),a("el-table-column",{attrs:{label:"科目",align:"center",prop:"subject",width:"120px"}}),a("el-table-column",{attrs:{label:"备注计税汇率",align:"center",prop:"taxExchangeRateComment",width:"120px"}}),a("el-table-column",{attrs:{label:"填制单位",align:"center",prop:"fillingOrg",width:"120px"}}),a("el-table-column",{attrs:{label:"运输工具",align:"center",prop:"transportationTools",width:"120px"}}),a("el-table-column",{attrs:{label:"是否双抬头",align:"center",prop:"multiFlag",formatter:e.multiFlagFormat,width:"120px"}}),a("el-table-column",{attrs:{label:"稽核组织名称",align:"center",prop:"auditDeptName",width:"120px"}}),a("el-table-column",{attrs:{label:"稽核时间",align:"center",prop:"auditTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.auditTime,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"稽核结果",align:"center",prop:"auditResult"}}),a("el-table-column",{attrs:{label:"录入时间",align:"center",prop:"createTime",width:"180"}}),a("el-table-column",{attrs:{label:"录入人",align:"center",prop:"createBy",width:"180"}}),a("el-table-column",{attrs:{label:"报销状态",align:"center",width:"100",prop:"reimStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.reimStatus?a("span",[e._v("未报销")]):"1"==t.row.reimStatus?a("span",[e._v("全额报销")]):"2"==t.row.reimStatus?a("span",[e._v("部分报销")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"可用报销金额",align:"center",width:"100",prop:"usableReimAmount"}}),a("el-table-column",{attrs:{label:"报销单号",align:"center",width:"100",prop:"reimBillNo","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"凭证号",align:"center",width:"100",prop:"voucherNo","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"结算单号",align:"center",width:"100",prop:"settlementNo","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"AP单号",align:"center",width:"100",prop:"apBillNo","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"凭证制单人",align:"center",width:"100",prop:"voucherMaker","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"凭证编码",align:"center",width:"100",prop:"voucherCode","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"数据来源",align:"center",prop:"dataSource",formatter:e.dataSourceFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:certificate:edit"],expression:"['income:certificate:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize,"page-sizes":e.pageSizes},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticStyle:{"max-height":"60vh",overflow:"auto"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"缴款书号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入缴款书号码"},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo",t)},expression:"form.invNo"}})],1),a("el-form-item",{attrs:{label:"填发日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择填发日期"},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate",t)},expression:"form.invDate"}})],1),a("el-form-item",{attrs:{label:"合计金额",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入合计金额"},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount",t)},expression:"form.totalAmount"}})],1),a("el-form-item",{attrs:{label:"合计金额大写",prop:"totalMoneyUp"}},[a("el-input",{attrs:{placeholder:"请输入合计金额大写"},model:{value:e.form.totalMoneyUp,callback:function(t){e.$set(e.form,"totalMoneyUp",t)},expression:"form.totalMoneyUp"}})],1),a("el-form-item",{attrs:{label:"合同",prop:"contractNo"}},[a("el-input",{attrs:{placeholder:"请输入合同"},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo",t)},expression:"form.contractNo"}})],1),a("el-form-item",{attrs:{label:"报关单编号",prop:"customsNo"}},[a("el-input",{attrs:{placeholder:"请输入报关单编号"},model:{value:e.form.customsNo,callback:function(t){e.$set(e.form,"customsNo",t)},expression:"form.customsNo"}})],1),a("el-form-item",{attrs:{label:"海关名称",prop:"customsName"}},[a("el-input",{attrs:{placeholder:"请输入海关名称"},model:{value:e.form.customsName,callback:function(t){e.$set(e.form,"customsName",t)},expression:"form.customsName"}})],1),a("el-form-item",{attrs:{label:"提/装货单号",prop:"deliveryNo"}},[a("el-input",{attrs:{placeholder:"请输入提/装货单号"},model:{value:e.form.deliveryNo,callback:function(t){e.$set(e.form,"deliveryNo",t)},expression:"form.deliveryNo"}})],1),a("el-form-item",{attrs:{label:"海关口岸代码",prop:"portCode"}},[a("el-input",{attrs:{placeholder:"请输入海关口岸代码"},model:{value:e.form.portCode,callback:function(t){e.$set(e.form,"portCode",t)},expression:"form.portCode"}})],1),a("el-form-item",{attrs:{label:"备注币种",prop:"currencyCode"}},[a("el-input",{attrs:{placeholder:"请输入备注币种"},model:{value:e.form.currencyCode,callback:function(t){e.$set(e.form,"currencyCode",t)},expression:"form.currencyCode"}})],1),a("el-form-item",{attrs:{label:"收入机关",prop:"revenueAgency"}},[a("el-input",{attrs:{placeholder:"请输入收入机关"},model:{value:e.form.revenueAgency,callback:function(t){e.$set(e.form,"revenueAgency",t)},expression:"form.revenueAgency"}})],1),a("el-form-item",{attrs:{label:"缴款单位(人)帐号",prop:"buyAccount"}},[a("el-input",{attrs:{placeholder:"请输入缴款单位(人)帐号"},model:{value:e.form.buyAccount,callback:function(t){e.$set(e.form,"buyAccount",t)},expression:"form.buyAccount"}})],1),a("el-form-item",{attrs:{label:"缴款单位(人)开户银行",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入缴款单位(人)开户银行"},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1),a("el-form-item",{attrs:{label:"缴款单位(人)公司名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入缴款单位(人)公司名称"},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName",t)},expression:"form.buyName"}})],1),a("el-form-item",{attrs:{label:"科目",prop:"subject"}},[a("el-input",{attrs:{placeholder:"请输入科目"},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}})],1),a("el-form-item",{attrs:{label:"备注计税汇率",prop:"taxExchangeRateComment"}},[a("el-input",{attrs:{placeholder:"请输入备注计税汇率"},model:{value:e.form.taxExchangeRateComment,callback:function(t){e.$set(e.form,"taxExchangeRateComment",t)},expression:"form.taxExchangeRateComment"}})],1),a("el-form-item",{attrs:{label:"填制单位",prop:"fillingOrg"}},[a("el-input",{attrs:{placeholder:"请输入填制单位"},model:{value:e.form.fillingOrg,callback:function(t){e.$set(e.form,"fillingOrg",t)},expression:"form.fillingOrg"}})],1),a("el-form-item",{attrs:{label:"运输工具",prop:"transportationTools"}},[a("el-input",{attrs:{placeholder:"请输入运输工具"},model:{value:e.form.transportationTools,callback:function(t){e.$set(e.form,"transportationTools",t)},expression:"form.transportationTools"}})],1),a("el-form-item",{attrs:{label:"是否双抬头"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否双抬头"},model:{value:e.form.multiFlag,callback:function(t){e.$set(e.form,"multiFlag",t)},expression:"form.multiFlag"}},e._l(e.multiFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:parseInt(e.dictValue)}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)]),a("UploadFileDialog",{ref:"uploadFileDialog",on:{discernFileResult:e.discernFileResult}}),a("FileAnalysis",{ref:"fileAnalysis",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("el-dialog",{attrs:{title:"稽核",visible:e.checkDialog.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.checkDialog,"open",t)},close:e.checkDialogClose}},[a("el-input",{attrs:{placeholder:"输入名称进行搜索",size:"small",clearable:""},model:{value:e.checkDialog.filterText,callback:function(t){e.$set(e.checkDialog,"filterText",t)},expression:"checkDialog.filterText"}}),a("el-tree",{ref:"checkDeptTree",staticStyle:{height:"50vh",overflow:"auto"},attrs:{data:e.checkDialog.deptList,"show-checkbox":"","node-key":"deptId","default-expand-all":"","check-on-click-node":!0,"check-strictly":!0,props:e.checkDialog.defaultProps,"filter-node-method":e.filterNode},on:{check:e.treeCheck}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.checkSure}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.checkDialog.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative",width:"100%"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e()],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("d81d"),a("25f0"),a("ac1f"),a("5319"),a("b775")),l=a("4328"),s=a.n(l);function c(e){return Object(r["a"])({url:"/income/certificate/list",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/income/certificate/"+e,method:"get"})}function d(e){return Object(r["a"])({url:"/income/certificate",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/income/certificate",method:"put",data:e})}function h(e){return Object(r["a"])({url:"/income/certificate/"+e,method:"delete"})}function m(e){return Object(r["a"])({url:"/income/certificate/export",method:"get",params:e,responseType:"blob",paramsSerializer:function(e){return s.a.stringify(e,{arrayFormat:"repeat"})}})}function f(){return Object(r["a"])({url:"/income/certificate/getAuditDeptList",method:"post"})}function b(e){return Object(r["a"])({url:"/income/certificate/collect",method:"post",data:e})}var g=a("a5e7"),v=a("35d5"),y=a("ed08"),_=a("23b1"),x=a("4c80"),w={name:"Certificate",components:{UploadFileDialog:g["default"],FileAnalysis:v["default"]},data:function(){return{tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,certificateList:[],title:"",open:!1,multiFlagOptions:[],dataSourceOptions:[],pageSizes:[],queryParams:{pageNum:1,pageSize:10,invNo:null,invDate:null,contractNo:null,customsNo:null,customsName:null,deliveryNo:null,portCode:null,revenueAgency:null,buyName:null,multiFlag:null,auditDeptName:null,auditTime:null,auditResult:null},form:{},rules:{},checkDialog:{open:!1,filterText:"",deptList:[],defaultProps:{children:"children",label:"nsrmc"}},originImageOpen:!1,currOriginImageUrl:null,imgShowParams:{deg:0,scale:1},currOperationRow:{},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'}}},watch:{"checkDialog.filterText":function(e){this.$refs.checkDeptTree.filter(e)},showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getList(),this.getDicts("sys_yes_no_num").then((function(t){e.multiFlagOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(y["e"])(this.queryParams));(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),c(this.queryParams).then((function(t){e.certificateList=t.rows,e.total=t.total,e.loading=!1}))},multiFlagFormat:function(e,t){return this.selectDictLabel(this.multiFlagOptions,e.multiFlag)},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invNo:null,invDate:null,totalAmount:null,totalMoneyUp:null,contractNo:null,customsNo:null,customsName:null,deliveryNo:null,portCode:null,currencyCode:null,revenueAgency:null,buyAccount:null,buyBankAccount:null,buyName:null,subject:null,taxExchangeRateComment:null,fillingOrg:null,transportationTools:null,multiFlag:null,auditDeptId:null,auditDeptName:null,auditTime:null,auditResult:null,uploadTime:null,fileUrl:null,checkApplyFlag:0,checkApplyStatus:null,dataSource:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.rows=e,this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加海关缴款单"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;u(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改海关缴款单"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?p(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):d(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除海关缴款单编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return h(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(y["e"])(this.queryParams);this.ids.length&&(t.idList=this.ids),this.$confirm("是否确认导出所有海关缴款单数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.$vLoading.show(),m(t)})).then((function(t){e.$vLoading.hide(),e.currencyDownload(t,"海关缴款单.xls",e)})).catch((function(){e.$vLoading.hide()}))},handleImage:function(){this.$refs.uploadFileDialog.uploadFileDialogShow()},handleScanner:function(){this.scanConnectOperation()},scanConnectOperation:function(){var e=_["a"].FF_JPEG,t={deviceName:"DS-870",connectType:0},a={};a.docSource=_["a"].SRC_AUTO,a.imgType=_["a"].IT_AUTO,a.resolution=200,a.docSize=_["a"].DS_AUTO,a.docRotate=_["a"].DR_NONE,a.brightness=0,a.contrast=0,a.threshold=126,a.colorFilter=_["a"].CF_NONE,a.numScan=0,a.docEnhance=0,a.imgFilter=0,a.optDoubleFeedDetect=_["a"].DFD_NONE,a.optBlankPageSkip=_["a"].BPS_NONE,a.skewCorrect=_["a"].SC_EDGE;var n={};n.destination=_["a"].DEST_BASE64,n.fileFormat=e,n.imgQuality=60;var i=_["a"].ESLCreate(),o=this,r=[];this.$vLoading.show(),i.ScanAndSave_Simple(t,a,n,(function(e,t){e?(t.eventType==_["a"].EVENT_SCANPAGE_COMPLETE&&console.log("scan page complete"),t.eventType==_["a"].EVENT_ALLSCAN_COMPLETE&&console.log("all scan page complete"),t.eventType==_["a"].EVENT_SAVEPAGE_COMPLETE&&r.push("jpeg_"+t.base64),t.eventType==_["a"].EVENT_ALLSAVE_COMPLETE&&(o.msgSuccess("扫描完成，正在识别"),Object(x["e"])(r).then((function(e){o.$vLoading.hide(),o.discernFileResult(new Array(e))})).catch((function(){o.$vLoading.hide()})))):(o.$vLoading.hide(),o.msgError("扫描失败： "+t.errorCode.toString(16)))}))},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},updateInvoiceTable:function(){this.getList()},handleCheck:function(){var e=this,t=this.rows.filter((function(e){return"1"==e.multiFlag})),a=this.rows.filter((function(e){return e.auditDeptName}));t.length?a.length?this.checkSureLogic2(a,0):(this.$vLoading.show(),f().then((function(t){e.$vLoading.hide(),e.checkDialog.deptList=t,e.checkDialog.open=!0})).catch((function(){e.$vLoading.hide()}))):this.msgError("该海关缴款单非双抬头，无需稽核")},checkSureLogic2:function(e,t){var a=this;if(t<e.length){var n=Object(y["e"])(e[t]);b(n).then((function(n){200==n.code?a.msgSuccess(n.msg):a.msgError(n.msg),a.checkSureLogic(e,t+1)})).catch((function(){a.checkSureLogic(e,t+1)}))}else this.$vLoading.hide(),this.checkDialog.open=!1,this.getList()},filterNode:function(e,t){return!e||-1!==t.nsrmc.indexOf(e)},treeCheck:function(e,t){t.checkedKeys.length>0?this.$refs.checkDeptTree.setCheckedKeys([e.deptId]):this.$refs.checkDeptTree.setCheckedKeys([])},checkSure:function(){var e=this.$refs.checkDeptTree.getCheckedNodes();e.length?(this.$vLoading.show(),this.checkSureLogic(e[0],0)):this.msgError("稽核组织不能为空")},checkSureLogic:function(e,t){var a=this;if(t<this.ids.length){var n=Object(y["e"])(this.rows[t]);n.auditDeptId=e.deptId,n.auditDeptName=e.nsrmc,b(n).then((function(n){200==n.code?a.msgSuccess(n.msg):a.msgError(n.msg),a.checkSureLogic(e,t+1)})).catch((function(){a.checkSureLogic(e,t+1)}))}else this.$vLoading.hide(),this.checkDialog.open=!1,this.getList()},checkDialogClose:function(){this.$refs.checkDeptTree.setCheckedKeys([]),this.checkDialog.filterText=""},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(y["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),1e3)}}},k=w,T=(a("12cf"),a("2877")),D=Object(T["a"])(k,n,i,!1,null,null,null);t["default"]=D.exports},5888:function(e,t,a){},"597a":function(e,t,a){},"59c5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"敏感词",prop:"sensitiveWord"}},[a("el-input",{attrs:{placeholder:"请输入敏感词",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sensitiveWord,callback:function(t){e.$set(e.queryParams,"sensitiveWord",t)},expression:"queryParams.sensitiveWord"}})],1),a("el-form-item",{attrs:{label:"敏感级别",prop:"sensitiveLevel"}},[a("el-select",{attrs:{placeholder:"请选择敏感级别",clearable:"",size:"small"},model:{value:e.queryParams.sensitiveLevel,callback:function(t){e.$set(e.queryParams,"sensitiveLevel",t)},expression:"queryParams.sensitiveLevel"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"普通",value:"1"}}),a("el-option",{attrs:{label:"警告",value:"2"}}),a("el-option",{attrs:{label:"严重",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"适用模块",prop:"applyModul"}},[a("el-select",{attrs:{placeholder:"请选择使用模块",clearable:"",size:"small"},model:{value:e.queryParams.applyModul,callback:function(t){e.$set(e.queryParams,"applyModul",t)},expression:"queryParams.applyModul"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),a("el-option",{attrs:{label:"进项",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[a("el-select",{attrs:{placeholder:"请选择是否启用",clearable:"",size:"small"},model:{value:e.queryParams.enable,callback:function(t){e.$set(e.queryParams,"enable",t)},expression:"queryParams.enable"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"是",value:"1"}}),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:add"],expression:"['system:words:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:edit"],expression:"['system:words:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:remove"],expression:"['system:words:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:export"],expression:"['system:words:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:export"],expression:"['system:words:export']"}],attrs:{type:"warning",icon:"el-icon-upload2",size:"mini"},on:{click:e.handleImport}},[e._v("导入")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-check",size:"mini",disabled:e.single||e.multiple},on:{click:function(t){return e.handleEnableStatus("1")}}},[e._v("启用")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-close",size:"mini",disabled:e.single||e.multiple},on:{click:function(t){return e.handleEnableStatus("0")}}},[e._v("禁用")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"wordsMainTable",attrs:{data:e.wordsList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["sensitiveLevel"==t.prop?a("span",["1"==n.row.sensitiveLevel?[a("span",[e._v("普通")])]:"2"==n.row.sensitiveLevel?[a("span",[e._v("警告")])]:"3"==n.row.sensitiveLevel?[a("span",[e._v("严重")])]:e._e()],2):"applyModul"==t.prop?a("span",[e._v(" "+e._s("0"==n.row.enable?"全部":"进项")+" ")]):"enable"==t.prop?a("span",[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){return e.handleEnableChange(n.row)}},model:{value:n.row.enable+"",callback:function(t){e.$set(n.row,"enable + ''",t)},expression:"scope.row.enable + ''"}})],1):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"160",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:edit"],expression:"['system:words:edit']"}],staticStyle:{display:"inline-block",margin:"0 5px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:remove"],expression:"['system:words:remove']"}],staticStyle:{display:"inline-block",margin:"0 5px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"敏感词",prop:"sensitiveWord"}},[a("el-input",{attrs:{placeholder:"请输入敏感词"},model:{value:e.form.sensitiveWord,callback:function(t){e.$set(e.form,"sensitiveWord",t)},expression:"form.sensitiveWord"}})],1),a("el-form-item",{attrs:{label:"敏感级别",prop:"sensitiveLevel"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:e.sensitiveLevelChange},model:{value:e.form.sensitiveLevel,callback:function(t){e.$set(e.form,"sensitiveLevel",t)},expression:"form.sensitiveLevel"}},[a("el-option",{attrs:{label:"普通",value:1}}),a("el-option",{attrs:{label:"警告",value:2}}),a("el-option",{attrs:{label:"严重",value:3}})],1)],1),1!=e.form.sensitiveLevel?a("el-form-item",{attrs:{label:"限制金额",prop:"limitAmount"}},[a("el-input",{attrs:{placeholder:"请输入限制金额"},model:{value:e.form.limitAmount,callback:function(t){e.$set(e.form,"limitAmount",t)},expression:"form.limitAmount"}})],1):e._e(),a("el-form-item",{attrs:{label:"适用模块",prop:"applyModul"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.applyModul,callback:function(t){e.$set(e.form,"applyModul",t)},expression:"form.applyModul"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"进项",value:1}})],1)],1),a("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}},[a("el-option",{attrs:{label:"启用",value:1}}),a("el-option",{attrs:{label:"关闭",value:0}})],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx,.xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("b775"));function l(e){return Object(r["a"])({url:"/system/words/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/system/words/"+e,method:"get"})}function c(e){return Object(r["a"])({url:"/system/words",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/system/words",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/system/words/"+e,method:"delete"})}function p(e){return Object(r["a"])({url:"/system/words/export",method:"post",data:e,responseType:"blob"})}function h(e){return Object(r["a"])({url:"/system/words/changeEnable",method:"post",data:e})}var m=a("ed08"),f=a("c38a"),b=a("5f87"),g=a("7b93"),v={name:"Words",components:{MyElProgress:g["a"]},data:function(){return{functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,wordsList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:500,sensitiveWord:null,sensitiveLevel:"",limitAmount:null,applyModul:"",enable:"",note:null},form:{id:"",sensitiveWord:"",sensitiveLevel:1,limitAmount:"",applyModul:0,enable:1,note:""},rules:{sensitiveWord:[{required:!0,message:"敏感词不能为空",trigger:"blur"}],sensitiveLevel:[{required:!0,message:"敏感级别不能为空",trigger:"blur"}],applyModul:[{required:!0,message:"适用模块不能为空",trigger:"blur"}],enable:[{required:!0,message:"是否启用：1是  其他否不能为空",trigger:"blur"}],limitAmount:[{required:!1,message:"敏感级别为2警告时需要有限制金额",trigger:"blur"}]},columnsArr:[{label:"敏感词",prop:"sensitiveWord",align:"center",show:!0,width:220,columnSort:20},{label:"敏感级别",prop:"sensitiveLevel",align:"center",show:!0,width:220,columnSort:0},{label:"限制金额",prop:"limitAmount",align:"center",show:!0,width:220,columnSort:1},{label:"创建人",prop:"ext1",align:"center",show:!0,width:220,columnSort:2},{label:"创建时间",prop:"createTime",align:"center",show:!0,width:220,columnSort:3},{label:"是否启用",prop:"enable",align:"center",show:!0,width:220,columnSort:4},{label:"适用范围",prop:"applyModul",align:"center",show:!0,width:220,columnSort:5},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:6}],sortParam:{column:"",columnOrder:""},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(b["a"])()},url:"/prod-api/system/words/importData"}}},created:function(){var e=this;this.getList(),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(m["e"])(this.queryParams),Object(m["e"])(this.sortParam));l(t).then((function(t){e.wordsList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={sensitiveWord:"",sensitiveLevel:1,limitAmount:"",applyModul:0,enable:1,note:""},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(m["e"])(e)},handleAdd:function(){var e=this;this.reset(),this.open=!0,this.title="添加敏感词",this.$nextTick((function(){e.$refs.form.clearValidate()}))},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;s(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改敏感词",t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?u(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):c(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除敏感词编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(m["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出敏感词数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(f["g"])(100,"导出中",e,!0),p(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"敏感词数据.xls",e)})).catch((function(){}))},handleImport:function(){this.upload.open=!0,this.upload.title="敏感词导入"},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()},importTemplate:function(){window.location.href="/data/敏感词导入模板.xlsx"},handleEnableChange:function(e){var t=this;console.log(e);var a={};a.ids=e.id.split("nothing"),a.status="1"==e.enable?"0":"1",h(a).then((function(e){200==e.code?("1"==a.status?t.msgSuccess("启用成功"):t.msgSuccess("禁用成功"),t.getList()):t.msgError(e.msg)})).catch((function(){}))},sensitiveLevelChange:function(){"1"!=this.form.sensitiveLevel?this.rules.limitAmount[0].required=!0:(this.rules.limitAmount[0].required=!1,this.form.limitAmount="")},handleEnableStatus:function(e){var t=this,a="";a="1"==e?"是否确认启用所选敏感词数据项?":"是否确认禁用所选敏感词数据项?",this.$confirm(a,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.ids=t.ids,a.status=e,h(a).then((function(a){200==a.code?("1"==e?t.msgSuccess("启用成功"):t.msgSuccess("禁用成功"),t.getList()):t.msgError(a.msg)})).catch((function(){}))})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.wordsMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.wordsList,"wordsMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}},y=v,_=a("2877"),x=Object(_["a"])(y,n,i,!1,null,null,null);t["default"]=x.exports},"59e6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1100px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6","inactive-text":"红字",disabled:e.invoiceDiscountFlag},on:{change:e.redInvoiceSwitch},model:{value:e.redInvoiceFlag,callback:function(t){e.redInvoiceFlag=t},expression:"redInvoiceFlag"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveBill("1")}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveBill("2")}}},[e._v("保存并开具")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBillDetailRow}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.redInvoiceFlag},on:{click:e.discountSetUp}},[e._v("折扣")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setDifferenceDeduct}},[e._v("差额")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.mergeDiscount}},[e._v("合并折扣")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.mergeBillDetail}},[e._v("合并明细")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,readonly:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型"},on:{change:e.billTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-select",{attrs:{disabled:"51"==e.form.invType||"52"==e.form.invType},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}},e._l(e.flagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"票种性质",prop:"specialTicket"}},[a("el-select",{model:{value:e.form.specialTicket,callback:function(t){e.$set(e.form,"specialTicket",t)},expression:"form.specialTicket"}},e._l(e.specialTicketOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",[e.redInvoiceFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票代码",maxlength:12,clearable:""},on:{change:e.sourceChange},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票号码",maxlength:8,clearable:""},on:{change:e.sourceChange},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag&&"0"==e.form.invType,expression:"redInvoiceFlag && form.invType == '0'"}],attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{placeholder:"请输入红字申请单",maxlength:20,clearable:""},on:{change:e.sourceChange},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo","string"===typeof t?t.trim():t)},expression:"form.negNativeNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行及账号",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入购方邮箱",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入购方手机",maxlength:11,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsCode,size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsCode,callback:function(a){e.$set(t.row,"goodsCode",a)},expression:"scope.row.goodsCode"}})]}}])}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称","min-width":120,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,413564692)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2046099838)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{change:function(a){return e.taxAmountChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注",maxlength:230,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier","string"===typeof t?t.trim():t)},expression:"form.cashier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker","string"===typeof t?t.trim():t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountLine,callback:function(t){e.$set(e.discountForm,"discountLine",t)},expression:"discountForm.discountLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"红冲引入",visible:e.introduceOpen,width:"400px","append-to-body":"",id:"introduceModal"},on:{"update:visible":function(t){e.introduceOpen=t},close:e.introduceDialogClose}},[a("div",[a("el-form",{ref:"introduceForm",attrs:{model:e.introduceForm,rules:e.introduceRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.introduceForm.invCode,callback:function(t){e.$set(e.introduceForm,"invCode",t)},expression:"introduceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8},model:{value:e.introduceForm.invNo,callback:function(t){e.$set(e.introduceForm,"invNo",t)},expression:"introduceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitIntroduce}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.introduceOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("caad"),a("d3b7"),a("25f0"),a("b0c0"),a("4de4"),a("ac1f"),a("5319"),a("b680"),a("13d5"),a("a434"),a("c85c")),l=a("c394"),s=a("2ba5"),c=a("b9aa"),u=a("ad11"),d=a("ed08"),p=a("c38a"),h={name:"billDetailEditModal",components:{ChooseCode:c["default"]},props:{},data:function(){return{selfAdaptionWidth:null,form:{billNo:"",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",specialTicket:"0",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},hsbz:"1",sourceHsbz:null,kpdy:null,fplxdesc:"增值税普通发票",billDetailsData:[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"添加单据管理",isAdd:!0,taxCodeSignRow:0,invoiceTypeOptions:[],flagOptions:[],billDetailModalData:{billTitle:"",billNo:"",billType:"2",detailFlag:"0",taxPlateIdSelect:"",billCode:"",billInvNo:"",billDate:"",billCheckCode:"",billBuyName:"",billBuyTaxNo:"",billBuyAddrTel:"",billBuyBankAccount:"",billSellName:"",snsrsbh:"",sdzdh:"",syhzh:"",billNote:"",detailDate:[{trChecked:!1,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],billTotalMoney:0,billTotalTaxMoney:0,billTotalMoneyWithTax:0,billTotalMoneyWithTaxUpperCase:"",skr:"",checker:"",kpr:""},taxRateOptions:[],specialTicketOptions:[],invTypeOptions:[],redInvoiceFlag:!1,buyerSearchData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}],goodsNameSearchData:[{value:"苹果"},{value:"橘子"},{value:"火龙果"},{value:"吃的"}],goodsNameInputData:"",rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"blur"}],detailFlag:[{required:!0,message:"清单标志不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"销方名称不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}]},discountOpen:!1,discountForm:{discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},introduceOpen:!1,introduceForm:{invCode:"",invNo:""},introduceRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]}}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e},invoiceDiscountFlag:function(){for(var e=0;e<this.billDetailsData.length;e++){var t=this.billDetailsData[e];if("0"!=t.discountFlag)return!0}return!1}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("special_ticket").then((function(t){e.specialTicketOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data,e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType)})),Object(s["a"])().then((function(t){200==t.code&&(e.hsbz=t.data.hsbz,e.kpdy=t.data.kpdy,e.sourceHsbz=t.data.hsbz)}))},mounted:function(){this.billTypeChange()},methods:{billDialogShow:function(){var e=this;this.open=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},dialogClose:function(){this.open=!1},editDialogTitle:function(e){"1"==e?(this.getSubjectInfo(),this.getTaxNoSeller(),this.title="添加单据管理"):this.title="修改单据管理"},getSubjectInfo:function(){var e=this;Object(r["l"])().then((function(t){e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc}))},getTaxNoSeller:function(){var e=this;Object(r["m"])().then((function(t){var a=t.nickName,n=t.sellers;if(null!=n&&0!=n.length){for(var i,o=0;o<n.length;o++)if("1"==n[o].status){i=n[o];break}if(null==i)for(var r=0;r<n.length;r++)if(n[r].drawer==a){i=n[r];break}null==i&&(i=n[0]),e.form.cashier=i.payee,e.form.checker=i.checker,e.form.invoicer=i.drawer,e.form.sellAddrTel=i.bankAddrTel,e.form.sellBankAccount=i.bankAccount}}))},billDialogClose:function(){var e=this;this.$nextTick((function(){e.$refs["form"].clearValidate()})),this.form={billNo:"",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",specialTicket:"0"},this.hsbz=this.sourceHsbz,this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],this.redInvoiceFlag=!1,this.billTypeChange()},fillBillDialog:function(e){var t=this;return Object(r["j"])(e).then((function(e){var a=e.data;t.form=a,t.billTypeChange(),parseFloat(a.totalAmount)<0?t.redInvoiceFlag=!0:t.redInvoiceFlag=!1,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer;var n=a.details;t.billDetailsData.length=0;for(var i=0,o=0;o<n.length;o++){var r=n[o];r.index=o,r.rate=void 0!=r.rate?t.specialRateFormalEcho(r):"",null!=r.goodsName&&r.goodsName.length>n[i].goodsName.length&&(i=o),t.billDetailsData.push(r)}t.goodsNameChange(i),t.open=!0,t.$nextTick((function(){t.$refs.form.clearValidate()})),t.title="修改单据管理",t.isAdd=!1}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(u["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(u["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(u["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsCode:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={code:e};Object(u["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].code;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(u["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(p["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].unit=e.unit,this.billDetailsData[this.taxCodeSignRow].rate=null==e.rate||void 0==e.rate?"":e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),this.billDetailsData[this.taxCodeSignRow].preferentialFlag=e.preferentialPolicy,this.billDetailsData[this.taxCodeSignRow].preferentialType=e.preferentialPolicyType,this.billDetailsData[this.taxCodeSignRow].goodsCode=e.code,this.billDetailsData[this.taxCodeSignRow].goodsName=e.name,"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow-1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow-1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow-1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow+1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow+1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow+1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow+1))},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},billTypeChange:function(){this.fplxdesc=this.selectDictLabel(this.invTypeOptions,this.form.invType),"0"==this.form.invType?(this.rules.buyTaxNo[1].required=!0,this.rules.buyAddrTel[0].required=!0,this.rules.buyBankAccount[0].required=!0):"2"!=this.form.invType&&"51"!=this.form.invType||(this.rules.buyTaxNo[1].required=!1,this.rules.buyAddrTel[0].required=!1,this.rules.buyBankAccount[0].required=!1)},saveBill:function(e){var t=this;this.judgeExistPNLine(-1)?this.msgError("明细行内不能同时存在正负数明细行"):this.$refs["form"].validate((function(a){if(a&&t.validDetailRequired()){t.form.details=Object(d["e"])(t.billDetailsData);for(var n=0;n<t.form.details.length;n++)"免税"==t.form.details[n].rate?(t.form.details[n].rate=0,t.form.details[n].preferentialFlag="1",t.form.details[n].preferentialType="免税",t.form.details[n].taxZeroRate="1"):"不征税"==t.form.details[n].rate?(t.form.details[n].rate=0,t.form.details[n].preferentialFlag="1",t.form.details[n].preferentialType="不征税",t.form.details[n].taxZeroRate="2"):"0"==t.form.details[n].rate?(t.form.details[n].preferentialFlag="0",t.form.details[n].preferentialType="",t.form.details[n].taxZeroRate="3"):(t.form.details[n].preferentialFlag="0",t.form.details[n].preferentialType="",t.form.details[n].taxZeroRate=""),t.form.details[n].number||(t.form.details[n].taxPrice="",t.form.details[n].withoutTaxPrice=""),t.form.details[n].taxPrice||(t.form.details[n].number="",t.form.details[n].withoutTaxPrice=""),t.form.details[n].withoutTaxPrice||(t.form.details[n].number="",t.form.details[n].taxPrice="");for(var i=0;i<t.form.details.length;i++)t.form.details[i].rowIndex=t.form.details[i].index;t.isAdd?Object(r["a"])(t.form).then((function(a){200===a.code&&(t.msgSuccess("新增成功"),t.$emit("updateBillTable"),"2"==e?(t.open=!1,t.$emit("openBill",a.data)):t.open=!1)})):Object(r["v"])(t.form).then((function(a){200===a.code&&(t.msgSuccess("修改成功"),t.$emit("updateBillTable"),"2"==e?(t.open=!1,t.$emit("openBill",{id:t.form.id,invType:t.form.invType,bizDate:t.form.bizDate})):t.open=!1)})),console.log(t.form)}}))},addBillDetailRow:function(){if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)}}else if(""!=n&&null!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if(("1"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].taxPrice))&&"0"!=this.billDetailsData[e].taxPrice&&("0"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].withoutTaxPrice))&&"0"!=this.billDetailsData[e].withoutTaxPrice&&"-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&(""!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=i&&(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&(""!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=o&&(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if(("1"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].amountWithTax))&&("0"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].amountWithoutTax))){if("1"==this.billDetailsData[e].discountFlag){if(Math.abs(parseFloat(this.billDetailsData[e].amountWithTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithTax="");if(Math.abs(parseFloat(this.billDetailsData[e].amountWithoutTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithoutTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithoutTax="")}var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t||null==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8)}"1"!=this.billDetailsData[e].discountFlag&&this.judgeExistPNLine(e),this.billDetailsData[e].differenceDeduct="",this.useCalc()}},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].rate=this.billDetailsData[e].rate:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].rate=this.billDetailsData[e].rate),""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].rate=this.billDetailsData[e].rate,this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e-1].amountWithoutTax=(parseFloat(this.billDetailsData[e-1].amountWithTax)-parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e+1].amountWithoutTax=(parseFloat(this.billDetailsData[e+1].amountWithTax)-parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2))):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e-1].amountWithTax=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)+parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e+1].amountWithTax=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2)))),this.billDetailsData[e].differenceDeduct="",this.useCalc()},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.billDetailsData[e].differenceDeduct="",this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=e>=0?e:0,a=!1,n=0;n<this.billDetailsData.length;n++)if(parseFloat(this.billDetailsData[n].amountWithTax)*parseFloat(this.billDetailsData[t].amountWithTax)<0&&"1"!=this.billDetailsData[n].discountFlag){a=!0;break}return a&&e>=0&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行")),a},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow-1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow+1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow+1))},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discountLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(d["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.discountFlag="1",a.standard="",a.unit="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1,this.useCalc()}else this.msgError("请输入折扣金额或折扣率")},sourceChange:function(){var e=this;if(""!=this.form.sourceInvNo&&""!=this.form.sourceInvCode){var t={sourceInvNo:this.form.sourceInvNo,sourceInvCode:this.form.sourceInvCode};gteXXXInfo(t).then((function(t){0!=t.data.length||e.msgError(t.msg)}))}},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){""!=this.deductForm.differenceDeductAmount?""!=this.billDetailsData[0].amountWithTax?Math.abs(parseFloat(this.deductForm.differenceDeductAmount))>Math.abs(parseFloat(this.billDetailsData[0].amountWithTax))?this.msgError("所填扣除额必须小于等于含税金额"):(this.billDetailsData[0].taxAmount=(parseFloat((parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.deductForm.differenceDeductAmount)).toFixed(2))*(parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)/(1+parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)).toFixed(2),this.billDetailsData[0].amountWithoutTax=(parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.billDetailsData[0].taxAmount)).toFixed(2),this.billDetailsData[0].differenceDeduct=this.deductForm.differenceDeductAmount,this.useCalc(),this.deductOpen=!1):this.msgError("请先填写含税金额"):this.msgError("请输入扣除额")},redInvoiceSwitch:function(){var e=this;this.redInvoiceFlag||(this.redInvoiceFlag=!0),this.redInvoiceFlag&&(this.introduceOpen=!0,this.$nextTick((function(){e.$refs.introduceForm.clearValidate()})))},introduceDialogClose:function(){parseFloat(this.form.totalAmount)>=0&&(this.redInvoiceFlag=!1),this.introduceOpen=!1,this.introduceForm={invCode:"",invNo:"",invCodeNo:""}},submitIntroduce:function(){var e=this;this.$refs.introduceForm.validate((function(t){t&&(e.introduceForm.invCodeNo=e.introduceForm.invCode+"_"+e.introduceForm.invNo,Object(l["s"])(e.introduceForm).then((function(t){if(200==t.code){var a=t.data.details,n=e.form.billNo;e.form=t.data,""!=t.data.billNo&&void 0!=t.data.billNo&&null!=t.data.billNo||(e.form.billNo=n),e.billDetailsData.length=0;for(var i=0;i<a.length;i++){var o=a[i];o.index=i,parseFloat(o.amountWithTax)>0&&(o.amountWithTax="-"+o.amountWithTax,o.amountWithTax="-"+o.amountWithTax,o.taxAmount="-"+o.taxAmount),e.billDetailsData.push(o)}e.introduceDialogClose()}else e.msgError(t.msg)})).catch((function(e){console.log(e)})))}))},validIsNumber:function(e){e.target.value=Object(p["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(p["a"])(e.target.value)},goodsNameChange:function(e){var t=this.billDetailsData[e].goodsName;"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].goodsName=t:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].goodsName=t),this.selfAdaptionWidth=Object(p["c"])("",t)},validDetailRequired:function(){var e,t=Object(o["a"])(this.billDetailsData);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(""==a.goodsName)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的货物名称为空"),!1;if(""==a.amountWithoutTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的不含税金额为空"),!1;if(""==a.amountWithTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的含税金额为空"),!1;if(""==a.rate)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的税率为空"),!1}}catch(n){t.e(n)}finally{t.f()}return!0},fillBillDialogByInvCodeNo:function(e){var t=this;return Object(l["q"])(e).then((function(e){var a=e.data;if(null==a)return t.msgError("未找到此发票"),!1;t.form.billNo=a.billNo,t.form.invType=a.invType,t.billTypeChange(),t.form.detailFlag=a.detailFlag,t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,parseFloat(a.totalAmount)<0?t.redInvoiceFlag=!0:t.redInvoiceFlag=!1,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer;var n=a.details;t.billDetailsData.length=0;for(var i=0,o=0;o<n.length;o++){var r=n[o];r.index=o,r.rate=void 0!=r.rate?r.rate.toString():"",null!=r.goodsName&&r.goodsName.length>n[i].goodsName.length&&(i=o),t.billDetailsData.push(r)}t.goodsNameChange(i),t.open=!0,t.title="添加单据管理",t.getBillNo()}))},mergeDiscount:function(){for(var e=0,t=this.billDetailsData.length;e<t;e++)"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithTax)+parseFloat(this.billDetailsData[e+1].amountWithTax)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].amountWithoutTax)).toFixed(2),""!=this.billDetailsData[e].number&&null!=this.billDetailsData[e].number&&(this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8)),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2));this.billDetailsData=this.billDetailsData.filter((function(e,t){return"1"!=e.discountFlag}));for(var a=0,n=this.billDetailsData.length;a<n;a++)this.billDetailsData[a].discountFlag="0",this.billDetailsData[a].index=a},mergeBillDetail:function(){for(var e=!0,t=parseFloat(this.billDetailsData[0].amountWithTax),a=0,n=1,i=this.billDetailsData.length;n<i;n++)parseFloat(this.billDetailsData[n].amountWithTax)>t&&(t=parseFloat(this.billDetailsData[n].amountWithTax),a=n),e&&this.billDetailsData[0].rate!=this.billDetailsData[n].rate&&(e=!1);if(e){for(var o=0,r=0,l=0,s=0,c=0,u=this.billDetailsData.length;c<u;c++)o+=""==this.billDetailsData[c].amountWithTax?0:parseFloat(this.billDetailsData[c].amountWithTax),r+=""==this.billDetailsData[c].amountWithoutTax?0:parseFloat(this.billDetailsData[c].amountWithoutTax),l+=""==this.billDetailsData[c].taxAmount?0:parseFloat(this.billDetailsData[c].taxAmount),s+=""==this.billDetailsData[c].number?0:parseFloat(this.billDetailsData[c].number);var p=Object(d["e"])(this.billDetailsData[a]);p.index=0,p.discountFlag="0",p.amountWithTax=o.toFixed(2),p.amountWithoutTax=r.toFixed(2),p.taxAmount=l.toFixed(2),p.number=s,p.taxPrice=(parseFloat(o.toFixed(2))/s).toFixed(8),p.withoutTaxPrice=(parseFloat(r.toFixed(2))/s).toFixed(8),this.billDetailsData=[],this.billDetailsData.push(p)}else this.msgError("存在税率不一样的明细，不能合并")}}},m=h,f=(a("5640"),a("2877")),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},"5ade":function(e,t,a){"use strict";a("fc6c")},"5be0":function(e,t,a){"use strict";a("6d54")},"5cfa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"组织名称",prop:"deptName"}},[a("el-input",{attrs:{placeholder:"请输入组织名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.deptName,callback:function(t){e.$set(e.queryParams,"deptName",t)},expression:"queryParams.deptName"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"组织状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:add"],expression:"['system:dept:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.deptList,"row-key":"deptId","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"deptName",label:"组织名称",width:"400"}}),a("el-table-column",{attrs:{prop:"orderNum",label:"排序",width:"200"}}),a("el-table-column",{attrs:{prop:"status",label:"是否虚体",formatter:e.virtralFormat,width:"100"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",formatter:e.statusFormat,width:"100"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:edit"],expression:"['system:dept:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:add"],expression:"['system:dept:add']"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(a){return e.handleAdd(t.row)}}},[e._v("新增")]),0!=t.row.parentId?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dept:remove"],expression:"['system:dept:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-row",[e.form.deptId!==this.topId?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上级组织",prop:"parentId"}},[a("treeselect",{attrs:{options:e.deptOptions,normalizer:e.normalizer,placeholder:"选择上级组织"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织名称",prop:"deptName"}},[a("el-input",{attrs:{placeholder:"请输入组织名称"},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示排序",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"组织编码",prop:"compyCode"}},[a("el-input",{attrs:{placeholder:"请输入组织编码",maxlength:"50"},model:{value:e.form.compyCode,callback:function(t){e.$set(e.form,"compyCode",t)},expression:"form.compyCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[a("el-input",{attrs:{placeholder:"请输入负责人",maxlength:"20"},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否虚体"}},[a("el-radio-group",{attrs:{disabled:e.virtralStatus},model:{value:e.form.virtral,callback:function(t){e.$set(e.form,"virtral",t)},expression:"form.virtral"}},e._l(e.virtralOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1),"1"==e.form.virtral?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单权限"}},[a("el-tree",{ref:"menu",attrs:{data:e.menuOptions,"show-checkbox":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1)],1):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("fcb7"),r=a("ca17"),l=a.n(r),s=a("a6dc"),c=(a("542c"),{name:"Dept",components:{Treeselect:l.a},data:function(){return{loading:!0,topId:void 0,showSearch:!0,virtralStatus:!1,deptList:[],menuOptions:[],deptOptions:[],title:"",open:!1,statusOptions:[],virtralOptions:[],queryParams:{deptName:void 0,status:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{parentId:[{required:!0,message:"上级组织不能为空",trigger:"blur"}],deptName:[{required:!0,message:"组织名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},created:function(){var e=this;this.getList(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.virtralOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(o["g"])(this.queryParams).then((function(t){e.topId=t.data[0].deptId,e.deptList=e.handleTree(t.data,"deptId",t.data[0].parentId),e.loading=!1}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.deptId,label:e.deptName,children:e.children}},getMenuTreeselect:function(){var e=this;Object(s["g"])().then((function(t){e.menuOptions=t.data}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},virtralFormat:function(e,t){return this.selectDictLabel(this.virtralOptions,e.virtral)},getMenuAllCheckedKeys:function(){var e=this.$refs.menu.getHalfCheckedKeys(),t=this.$refs.menu.getCheckedKeys();return e.unshift.apply(e,t),e},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={deptId:void 0,parentId:void 0,deptName:void 0,orderNum:void 0,leader:void 0,phone:void 0,email:void 0,compyCode:void 0,status:"1",virtral:"0",menuIds:[]},this.resetForm("form")},getDeptMenuTreeselect:function(e){var t=this;return Object(s["c"])(e).then((function(e){return t.menuOptions=e.menus,e}))},handleQuery:function(){this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(e){var t=this;this.reset(),this.getMenuTreeselect(),void 0!=e&&(this.form.parentId=e.deptId),this.virtralStatus=!1,this.open=!0,this.title="添加组织",Object(o["g"])().then((function(e){t.deptOptions=t.handleTree(e.data,"deptId",e.data[0].parentId)}))},handleUpdate:function(e){var t=this;this.reset();var a=null;"1"==e.virtral&&(a=this.getDeptMenuTreeselect(e.deptId)),Object(o["c"])(e.deptId).then((function(n){t.form=n.data,t.open=!0,t.virtralStatus=!0,t.title="修改组织","1"==e.virtral&&t.$nextTick((function(){a.then((function(e){t.$refs.menu.setCheckedKeys([]),t.$refs.menu.setCheckedKeys(e.checkedKeys)}))}))})),Object(o["h"])(e.deptId).then((function(e){0!=e.data.length&&(t.deptOptions=t.handleTree(e.data,"deptId"))}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.deptId?("1"==e.form.virtral&&(e.form.menuIds=e.getMenuAllCheckedKeys()),Object(o["k"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())}))):("1"==e.form.virtral&&(e.form.menuIds=e.getMenuAllCheckedKeys()),Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))))}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除名称为"'+e.deptName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["b"])(e.deptId)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))}}}),u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},"5dae":function(e,t,a){},"5e4e":function(e,t,a){"use strict";a("e416")},"5e91":function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"i",(function(){return s})),a.d(t,"j",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"h",(function(){return h}));var n=a("b775");function i(e){return Object(n["a"])({url:"/baseinfo/taxno/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/baseinfo/taxno/"+e,method:"get"})}function r(e,t){var a={taxnoId:e,module:t};return Object(n["a"])({url:"/baseinfo/taxno/users",method:"get",params:a})}function l(e){return Object(n["a"])({url:"/baseinfo/taxno",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/baseinfo/taxno/savePerm",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/baseinfo/taxno",method:"put",data:e})}function u(e){return Object(n["a"])({url:"/baseinfo/taxno",method:"put",data:e})}function d(e){return Object(n["a"])({url:"/baseinfo/taxno/"+e,method:"delete"})}function p(e){return Object(n["a"])({url:"/baseinfo/taxno/export",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/output/panel/registerTaxno",method:"post",params:e})}},"5fc3":function(e,t,a){},"5ffd":function(e,t,a){"use strict";a("8f06")},6:function(e,t){},"606d":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"j",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"d",(function(){return h}));var n=a("b775");function i(e){return Object(n["a"])({url:"/ticket/personal/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/ticket/personal/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/ticket/personal",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/ticket/personal",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/ticket/personal/deletePersonalInvoice",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/ticket/personal/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/ticket/personal/listTicketFilesAll",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/ticket/personal/checkInvoiceCp",method:"post",params:e})}function p(e){return Object(n["a"])({url:"/ticket/personal/"+e,method:"get"})}function h(e){return Object(n["a"])({url:"/ticket/personal/exportDetail",method:"post",data:e,responseType:"blob"})}},6092:function(e,t,a){"use strict";a("82fd")},6101:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.gxMainLoading,expression:"gxMainLoading"}],staticClass:"app-container",attrs:{"element-loading-text":"数据同步中","element-loading-custom-class":"el-loading-main","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-tabs",{ref:"gxTabs",attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待勾选",name:"stayGx"}}),a("el-tab-pane",{attrs:{label:"已勾选",name:"alreadyGx"}})],1),a("h3",{staticStyle:{margin:"0 0 10px 0","font-weight":"500"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("当前税款所属期:")]),e._v(e._s(e.skssq)+" ")]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},["stayGx"==e.activeName?[a("el-form-item",{attrs:{label:"勾选方式",prop:"gxMode"}},[a("el-select",{attrs:{placeholder:"请选择勾选方式",clearable:"",size:"small"},on:{change:function(t){return e.modeChange("gx")}},model:{value:e.queryParams.gxMode,callback:function(t){e.$set(e.queryParams,"gxMode",t)},expression:"queryParams.gxMode"}},[a("el-option",{attrs:{label:"按发票号码后四位勾选",value:"1"}}),a("el-option",{attrs:{label:"按销方名称搜索",value:"2"}}),a("el-option",{attrs:{label:"按发票日期范围勾选",value:"3"}}),a("el-option",{attrs:{label:"所有未勾选",value:"0"}})],1)],1),"1"==e.queryParams.gxMode||"0"==e.queryParams.gxMode?a("el-form-item",{key:"invNo",attrs:{label:"发票号码后四位",prop:"invNo","label-width":"120px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"输入发票号码后四位，回车即可选中发票",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1):e._e(),"2"==e.queryParams.gxMode||"0"==e.queryParams.gxMode?a("el-form-item",{key:"sellName",attrs:{label:"销方名称",prop:"sellName","label-width":"120px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"模糊搜索销方名称，回车即可选中发票",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName","string"===typeof t?t.trim():t)},expression:"queryParams.sellName"}})],1):e._e(),"3"==e.queryParams.gxMode||"0"==e.queryParams.gxMode?a("el-form-item",{key:"invDate",attrs:{label:"开票日期"}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.handleQuery},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),a("el-form-item",[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:gx"],expression:"['income:gxrz:gx']"}],attrs:{type:"primary",icon:"el-icon-check",size:"mini",disabled:0==e.ids.length},on:{click:e.gxOrCxSure}},[e._v("确认勾选")]),a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:synch"],expression:"['income:gxrz:synch']"}],attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:e.handleSync}},[e._v("同步")])],1)]:[a("el-form-item",{attrs:{label:"撤销方式",prop:"cxMode"}},[a("el-select",{attrs:{placeholder:"请选择撤销方式",clearable:"",size:"small"},on:{change:function(t){return e.modeChange("cx")}},model:{value:e.queryParams.cxMode,callback:function(t){e.$set(e.queryParams,"cxMode",t)},expression:"queryParams.cxMode"}},[a("el-option",{attrs:{label:"按发票号码后四位勾选",value:"1"}}),a("el-option",{attrs:{label:"按销方名称搜索",value:"2"}}),a("el-option",{attrs:{label:"按发票日期范围勾选",value:"3"}}),a("el-option",{attrs:{label:"所有已勾选",value:"0"}})],1)],1),"1"==e.queryParams.cxMode||"0"==e.queryParams.cxMode?a("el-form-item",{key:"invNo",attrs:{label:"发票号码后四位",prop:"invNo","label-width":"120px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"输入发票号码后四位，回车即可选中发票",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1):e._e(),"2"==e.queryParams.cxMode||"0"==e.queryParams.cxMode?a("el-form-item",{key:"sellName",attrs:{label:"销方名称",prop:"sellName","label-width":"120px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"模糊搜索销方名称，回车即可选中发票",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName","string"===typeof t?t.trim():t)},expression:"queryParams.sellName"}})],1):e._e(),"3"==e.queryParams.cxMode||"0"==e.queryParams.cxMode?a("el-form-item",{key:"invDate",attrs:{label:"开票日期"}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.handleQuery},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"3"==e.queryParams.cxMode||"0"==e.queryParams.cxMode?a("el-form-item",{key:"gxTime",attrs:{label:"勾选日期"}},[a("el-date-picker",{staticStyle:{width:"400px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.handleQuery},model:{value:e.dateRange2,callback:function(t){e.dateRange2=t},expression:"dateRange2"}})],1):e._e(),a("el-form-item",[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:gx"],expression:"['income:gxrz:gx']"}],attrs:{type:"warning",icon:"el-icon-check",size:"mini",disabled:0==e.ids.length},on:{click:e.gxOrCxSure}},[e._v("确认撤销")])],1)]],2),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"gxMainTable",attrs:{data:e.gxrzList,height:e.tableHeight-56-38,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"state"==t.prop?a("span",[e._v(e._s(e.stateFormat(n.row)))]):"gxzt"==t.prop?a("span",[e._v(e._s(e.gxztFormat(n.row)))]):"glzt"==t.prop?a("span",[e._v(e._s(e.glztFormat(n.row)))]):"abnormalType"==t.prop?a("span",[e._v(e._s(e.abnormalTypeFormat(n.row)))]):"gxTime"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row.gxTime)))]):"operationState"==t.prop?a("span",[e._v(e._s(e.operationStateFormat(n.row)))]):"invDate"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row.invDate)))]):"invCode"==t.prop?a("span",[e._v(e._s(["08xdp","10xdp","17"].includes(n.row.invType)?"":n.row.invCode))]):"invNo"==t.prop?a("span",[e._v(e._s(["08xdp","10xdp","17"].includes(n.row.invType)?n.row.invCode+n.row.invNo:n.row.invNo))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,type:"gx"}}),1!=e.queryParams.gxMode&&1!=e.queryParams.cxMode?a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}):e._e(),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"同步",visible:e.syncDialog.open,width:"400px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.syncDialog,"open",t)},close:e.syncDialogClose}},[a("el-form",{ref:"syncDialogForm",attrs:{model:e.syncDialog.form,rules:e.syncDialog.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"认证状态",prop:"rzzt"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.syncDialog.form.rzzt,callback:function(t){e.$set(e.syncDialog.form,"rzzt",t)},expression:"syncDialog.form.rzzt"}},[a("el-option",{attrs:{label:"未勾选发票",value:"10"}}),a("el-option",{attrs:{label:"当期已勾选发票",value:"11"}}),a("el-option",{attrs:{label:"未勾选缴款书",value:"16"}}),a("el-option",{attrs:{label:"当期已勾选缴款书",value:"17"}}),a("el-option",{attrs:{label:"未勾选完税凭证",value:"31"}}),a("el-option",{attrs:{label:"当期已勾选完税凭证",value:"32"}}),a("el-option",{attrs:{label:"不抵扣已勾选发票",value:"15"}}),a("el-option",{attrs:{label:"不抵扣已勾选完税凭证",value:"33"}}),a("el-option",{attrs:{label:"未到期发票",value:"14"}}),a("el-option",{attrs:{label:"未到期缴款书",value:"19"}}),a("el-option",{attrs:{label:"往期抵扣发票",value:"12"}}),a("el-option",{attrs:{label:"往期抵扣缴款书",value:"18"}}),a("el-option",{attrs:{label:"往期抵扣完税凭证",value:"34"}}),a("el-option",{attrs:{label:"往期出口退税",value:"3"}}),a("el-option",{attrs:{label:"往期出口退税-缴款书",value:"24"}})],1)],1),["12","18","34","3","24"].includes(e.syncDialog.form.rzzt)?[a("el-form-item",{attrs:{label:"税款所属期",prop:"skssq"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"month","value-format":"yyyy-MM"},model:{value:e.syncDialog.form.skssq,callback:function(t){e.$set(e.syncDialog.form,"skssq",t)},expression:"syncDialog.form.skssq"}})],1)]:[a("el-form-item",{attrs:{label:["11","17","15"].includes(e.syncDialog.form.rzzt)?"勾选日期":"票据日期",prop:"dateRange"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"日期起","end-placeholder":"日期止"},model:{value:e.syncDialog.form.dateRange,callback:function(t){e.$set(e.syncDialog.form,"dateRange",t)},expression:"syncDialog.form.dateRange"}})],1)]],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitSyncForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.syncDialog.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("caad"),a("99af"),a("d81d"),a("ac1f"),a("5319"),a("45c6")),l=a("b526"),s=a("ed08"),c=a("c38a"),u={name:"Gxrz",components:{TotalRowTable:l["default"]},data:function(){var e=this,t=function(t,a,n){if(!a||0==a.length)return["11","17","15"].includes(e.syncDialog.form.rzzt)?n(new Error("勾选日期不能为空")):n(new Error("票据日期不能为空"));n()};return{gxMainLoading:!0,tjzt:null,skssq:null,pageSizes:[],tableHeight:null,loading:!1,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,gxrzList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],gxztOptions:[],glztOptions:[],abnormalTypeOptions:[],operationStateOptions:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,buyTaxNo:null,buyName:null,sellTaxNo:null,sellName:null,invType:null,state:null,gxzt:"0",gxTime:null,totalWithoutAmount:null,taxAmount:null,validTaxAmount:null,sssq:null,glzt:null,abnormalType:null,operationState:null,operationMsg:null,deptId:null,gxMode:"1",cxMode:"1"},dateRange:[],dateRange2:[],form:{},rules:{},gxModeOptions:[],cxModeOptions:[],activeName:"stayGx",columnsArr:[{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:0},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:3},{label:"发票类型",prop:"state",align:"center",show:!0,width:220,columnSort:5},{label:"有效税额",prop:"validTaxAmount",align:"center",show:!0,width:220,columnSort:10},{label:"不含税金额",prop:"totalWithoutAmount",align:"center",show:!0,width:220,columnSort:8},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:4},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:0},{label:"勾选状态",prop:"gxzt",align:"center",show:!0,width:220,columnSort:6},{label:"勾选时间",prop:"gxTime",align:"center",show:!0,width:220,columnSort:7},{label:"管理状态",prop:"glzt",align:"center",show:!0,width:200,columnSort:11},{label:"异常类型",prop:"abnormalType",align:"center",show:!0,width:180,columnSort:0},{label:"操作状态",prop:"operationState",align:"center",show:!0,width:180,columnSort:0},{label:"操作描述",prop:"operationMsg",align:"center",show:!0,width:180,columnSort:0},{label:"凭证编号",prop:"voucherCode",align:"center",show:!0,width:180,columnSort:0}],sortParam:{column:"",columnOrder:""},functionName:"勾选中",showProgress:!1,loadingTime:null,isGxOrCxAfter:!1,statisticsStatusOverLoadTimes:0,syncDialog:{open:!1,form:{rzzt:"",dateRange:[],skssq:""},rules:{rzzt:[{required:!0,message:"认证状态不能为空",trigger:"change"}],dateRange:[{required:!0,message:"日期不能为空",trigger:"change"},{validator:t,trigger:"change"}],skssq:[{required:!0,message:"税款所属期不能为空",trigger:"blur"}]}}}},computed:{totalTableData:function(){var e=Object(s["e"])(this.rows);return 0==e.length&&(e=[]),e}},created:function(){var e=this;this.initGet(),this.getDicts("income_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("incom_gxzt").then((function(t){e.gxztOptions=t.data})),this.getDicts("gxrz_glzt").then((function(t){e.glztOptions=t.data})),this.getDicts("gxrz_yclx").then((function(t){e.abnormalTypeOptions=t.data})),this.getDicts("income_czzt").then((function(t){e.operationStateOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{initGet:function(){var e=this;Object(r["e"])().then((function(t){200==t.code?(e.tjzt=t.data.tjzt,e.skssq=t.data.skssq,Object(r["f"])().then((function(t){e.gxMainLoading=!1})).catch((function(){e.gxMainLoading=!1})),e.gxMainLoading=!1):(e.msgError(t.msg),e.statisticsStatusOverLoadTimes<3?(e.statisticsStatusOverLoadTimes++,e.initGet()):(e.gxMainLoading=!1,e.msgError("请重新刷新页面！")))})).catch((function(){e.gxMainLoading=!1}))},handleTabClick:function(){"stayGx"==this.activeName?this.queryParams.gxzt="0":this.queryParams.gxzt="1",this.queryParams.invNo="",this.gxrzList=[],this.dateRange=[],this.getList()},getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(s["e"])(this.queryParams),Object(s["e"])(this.sortParam));this.dateRange&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),this.dateRange2&&(t.beginTime2=this.dateRange2[0],t.endTime2=this.dateRange2[1]);var a=Object(s["e"])(this.gxrzList);Object(r["g"])(t).then((function(t){!e.isGxOrCxAfter&&("1"==e.queryParams.gxMode&&"stayGx"==e.activeName||"1"==e.queryParams.cxMode&&"alreadyGx"==e.activeName)?e.gxrzList=Object(c["f"])(t.rows.concat(a),"id"):e.gxrzList=t.rows,e.isGxOrCxAfter=!1,e.total=t.total,e.$refs.gxMainTable.toggleAllSelection(),e.loading=!1}))},cutTime:function(e){return null!=e?e.substring(0,10):""},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},gxztFormat:function(e,t){return this.selectDictLabel(this.gxztOptions,e.gxzt)},glztFormat:function(e,t){return this.selectDictLabel(this.glztOptions,e.glzt)},abnormalTypeFormat:function(e,t){return this.selectDictLabel(this.abnormalTypeOptions,e.abnormalType)},operationStateFormat:function(e,t){return this.selectDictLabel(this.operationStateOptions,e.operationState)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,buyTaxNo:null,buyName:null,sellTaxNo:null,sellName:null,invType:null,state:null,gxzt:null,gxTime:null,totalWithoutAmount:null,taxAmount:null,validTaxAmount:null,sssq:null,glzt:null,abnormalType:null,operationState:null,operationMsg:null,createTime:null,updateTime:null,createBy:null,updateBy:null,deptId:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleAdd:function(){this.reset(),this.open=!0,this.title="添加进项勾选"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(r["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改进项勾选"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["j"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除进项勾选编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有进项勾选数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["c"])(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.gxMainTable.toggleRowSelection(i)},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;"1"==this.queryParams.gxMode||"1"==this.queryParams.cxMode?this.gxrzList=Object(c["r"])(this.gxrzList,a,n):(console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList())},gxOrCxSure:function(){var e=this;if("0"==this.tjzt){var t={datas:this.rows,gxzt:"0"==this.queryParams.gxzt?"1":"0",rzms:"1",sssq:this.skssq};Object(c["g"])(200,"0"==this.queryParams.gxzt?"勾选中":"撤销中",this),Object(r["h"])(t).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.isGxOrCxAfter=!0,e.getList()}))}else this.msgError("当前所属期已进行过统计，不允许执行勾选、撤销操作")},modeChange:function(e){var t=this;this.queryParams.invNo="",this.queryParams.sellName="",this.dateRange=[],"gx"==e&&"0"==this.queryParams.gxMode||"cx"==e&&"0"==this.queryParams.cxMode?this.getList():this.gxrzList=[],this.$nextTick((function(){t.tableHeight=t.calcTableHeight()}))},handleSync:function(){var e=this;this.syncDialog.open=!0,this.$nextTick((function(){e.$refs.syncDialogForm.clearValidate()}))},syncDialogClose:function(){this.syncDialog.form={rzzt:"",dateRange:[],skssq:""}},submitSyncForm:function(){var e=this;this.$refs.syncDialogForm.validate((function(t){if(t){var a=Object(s["e"])(e.syncDialog.form);a.dateRange&&a.dateRange.length>0&&(a.rq_q=a.dateRange[0],a.rq_z=a.dateRange[1],a.skssq=""),delete a.dateRange,e.$vLoading.show(),Object(r["i"])(a).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("同步成功"),e.syncDialog.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}}))}}},d=u,p=(a("4544"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,"52b2d751",null);t["default"]=h.exports},6173:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("iframe",{attrs:{id:"iframe",src:e.modelerUrl,frameborder:"0",width:"100%",height:"100%",scrolling:"auto"}})])},i=[],o={name:"flow",data:function(){return{modelerUrl:""}},activated:function(){this.modelerUrl=localStorage.getItem("modelerUrl")}},r=o,l=(a("a7b0"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"6ec36d13",null);t["default"]=s.exports},"620b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{attrs:{placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.billNo,callback:function(t){e.$set(e.queryParams,"billNo",t)},expression:"queryParams.billNo"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-input",{attrs:{placeholder:"请输入单据来源",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber",t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo",t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{attrs:{placeholder:"请输入身份证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.idCard,callback:function(t){e.$set(e.queryParams,"idCard",t)},expression:"queryParams.idCard"}})],1),a("el-form-item",{attrs:{label:"红冲标志",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"回写标志",prop:"rewriteFlag"}},[a("el-select",{attrs:{placeholder:"请选择回写标志",clearable:"",size:"small"},model:{value:e.queryParams.rewriteFlag,callback:function(t){e.$set(e.queryParams,"rewriteFlag",t)},expression:"queryParams.rewriteFlag"}},e._l(e.rewriteFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.handleRed}},[e._v("红冲")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.flagRed}},[e._v("标记红冲")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:vehicleinvoice:export"],expression:"['output:vehicleinvoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"vehicleInvoiceMainTable",attrs:{data:e.vehicleinvoiceList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceInfo(n.row)}}},[e._v(" "+e._s(n.row[t.prop])+" ")]):"redFlag"==t.prop?a("span",[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]):"bizDate"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}"))+" ")]):"rate"==t.prop?a("span",[e._v(" "+e._s(e.rateFormat(n.row))+" ")]):"cancelFlag"==t.prop?a("span",[e._v(" "+e._s(e.cancelFlagFormat(n.row))+" ")]):"headType"==t.prop?a("span",[e._v(" "+e._s(e.headTypeFormat(n.row))+" ")]):"billType"==t.prop?a("span",[e._v(" 机动车发票 ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"0"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("vehicle-invoice-detail-show-modal",{ref:"vehicleInvoiceDetailShowModal"}),a("vehicle-invoice-detail-edit-modal",{ref:"vehicleInvoiceDetailEditModal",on:{updateBillTable:e.updateBillTable}}),a("el-dialog",{attrs:{title:"标记红冲",visible:e.flagRedopen,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.flagRedopen=t}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagRedForm",attrs:{model:e.flagRedForm,rules:e.redRules,size:"medium","label-width":"110px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"蓝字发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{maxlength:12,readonly:""},model:{value:e.flagRedForm.sourceInvCode,callback:function(t){e.$set(e.flagRedForm,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"蓝字发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{maxlength:8,readonly:""},model:{value:e.flagRedForm.sourceInvNo,callback:function(t){e.$set(e.flagRedForm,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.sourceInvNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12,clearable:""},model:{value:e.flagRedForm.invCode,callback:function(t){e.$set(e.flagRedForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8,clearable:""},model:{value:e.flagRedForm.invNo,callback:function(t){e.$set(e.flagRedForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagRedForm.invDate,callback:function(t){e.$set(e.flagRedForm,"invDate",t)},expression:"flagRedForm.invDate"}})],1)],1),"0"==e.flagRedForm.invType||"52"==e.flagRedForm.invType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{maxlength:24,clearable:""},model:{value:e.flagRedForm.negNativeNo,callback:function(t){e.$set(e.flagRedForm,"negNativeNo","string"===typeof t?t.trim():t)},expression:"flagRedForm.negNativeNo"}})],1)],1):e._e(),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},model:{value:e.flagRedForm.cashier,callback:function(t){e.$set(e.flagRedForm,"cashier","string"===typeof t?t.trim():t)},expression:"flagRedForm.cashier"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},model:{value:e.flagRedForm.checker,callback:function(t){e.$set(e.flagRedForm,"checker","string"===typeof t?t.trim():t)},expression:"flagRedForm.checker"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagRedForm.invoicer,callback:function(t){e.$set(e.flagRedForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagRedForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagRedForm.checkCode,callback:function(t){e.$set(e.flagRedForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.checkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密文",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密文",maxlength:200,clearable:""},model:{value:e.flagRedForm.pwdCode,callback:function(t){e.$set(e.flagRedForm,"pwdCode","string"===typeof t?t.trim():t)},expression:"flagRedForm.pwdCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagRedForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagRedCancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("d3b7"),a("3ca3"),a("ddb0"),a("0cb6")),l=a("c85c"),s=a("b526"),c=a("7eff"),u=a("9e9f"),d=a("ed08"),p=(a("c38a"),{name:"Vehicleinvoice",components:{TotalRowTable:s["default"],vehicleInvoiceDetailShowModal:c["default"],VehicleInvoiceDetailEditModal:u["default"]},data:function(){return{mainLoading:!1,functionName:"",showProgress:!1,loadingTime:null,operationRowArr:[],operationIndex:0,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,vehicleinvoiceList:[],title:"",open:!1,billSplitTypeOptions:[],redFlagOptions:[],cancelFlagOptions:[],rewriteFlagOptions:[],headTypeOptions:[],rateOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,billGuid:null,billNo:null,billType:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billSplitType:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,idCard:null,sellName:null,sellTaxNo:null,sellAddr:null,sellTel:null,sellBank:null,sellAccount:null,machineNo:null,pwdCode:null,note:null,vehicleType:null,goodsVersion:null,invoicer:null,rate:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,preferentialFlag:null,preferentialType:null,taxZeroRate:null,taxTypeCode:null,factoryNo:null,origin:null,eligibilityNo:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,importCertificateNumber:null,taxAuthorityCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null,taxAuthorityName:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,taxnoInfo:null,rewriteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,billId:null},form:{},rules:{},sortParam:{column:"",columnOrder:""},columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:220,columnSort:1},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:2},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:3},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:4},{label:"税率",prop:"rate",align:"center",show:!0,width:220,columnSort:5},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:6},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:7},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:8},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:220,columnSort:9},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:220,columnSort:10},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:11},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:220,columnSort:12},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:13},{label:"身份证号",prop:"idCard",align:"center",show:!0,width:220,columnSort:14},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:15},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:16},{label:"销方地址",prop:"sellAddr",align:"center",show:!0,width:220,columnSort:17},{label:"销方电话",prop:"sellTel",align:"center",show:!0,width:220,columnSort:18},{label:"销方银行",prop:"sellBank",align:"center",show:!0,width:220,columnSort:19},{label:"销方银行账号",prop:"sellAccount",align:"center",show:!0,width:220,columnSort:20},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:220,columnSort:21},{label:"密文",prop:"pwdCode",align:"center",show:!0,width:220,columnSort:22},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:23},{label:"车辆类型",prop:"vehicleType",align:"center",show:!0,width:220,columnSort:24},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:220,columnSort:25},{label:"厂牌型号",prop:"factoryNo",align:"center",show:!0,width:220,columnSort:26},{label:"产地",prop:"origin",align:"center",show:!0,width:220,columnSort:27},{label:"合格证号",prop:"eligibilityNo",align:"center",show:!0,width:220,columnSort:28},{label:"商检单号",prop:"commodityInspectionNo",align:"center",show:!0,width:220,columnSort:29},{label:"发动机号",prop:"engineNo",align:"center",show:!0,width:220,columnSort:30},{label:"车辆识别代号/车架号码",prop:"vehicleIdentificationCode",align:"center",show:!0,width:220,columnSort:31},{label:"进口证明书号",prop:"importCertificateNumber",align:"center",show:!0,width:220,columnSort:32},{label:"主管税务机关代码",prop:"taxAuthorityCode",align:"center",show:!0,width:220,columnSort:33},{label:"完税凭证号码",prop:"completionVoucherNo",align:"center",show:!0,width:220,columnSort:34},{label:"吨位",prop:"tonnage",align:"center",show:!0,width:220,columnSort:35},{label:"限乘人数",prop:"limitedNumberOfPassengers",align:"center",show:!0,width:220,columnSort:36},{label:"主管税务机关名称",prop:"taxAuthorityName",align:"center",show:!0,width:220,columnSort:37},{label:"源正数发票代码",prop:"sourceInvCode",align:"center",show:!0,width:220,columnSort:38},{label:"源正数发票号码",prop:"sourceInvNo",align:"center",show:!0,width:220,columnSort:39},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:220,columnSort:40},{label:"是否作废",prop:"cancelFlag",align:"center",show:!0,width:220,columnSort:41},{label:"回写标志",prop:"ext5",align:"center",show:!0,width:220,columnSort:42}],flagRedopen:!1,flagRedForm:{},redRules:{invCode:[{required:!0,message:"发票代码不能为空",trigger:"blur"}],invNo:[{required:!0,message:"发票号码不能为空",trigger:"blur"}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],negNativeNo:[{required:!0,message:"红字申请单号不能为空",trigger:"blur"}]}}},computed:{totalTableData:function(){var e=Object(d["e"])(this.rows);return 0==e.length&&(e=Object(d["e"])(this.vehicleinvoiceList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getList(),this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("red_flag").then((function(t){e.redFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.cancelFlagOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(d["e"])(this.queryParams),Object(d["e"])(this.sortParam));Object(r["j"])(this.addDateRange(t,this.dateRange)).then((function(t){e.vehicleinvoiceList=t.rows,e.total=t.total,e.loading=!1}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},rateFormat:function(e,t){return this.selectDictLabel(this.rateOptions,e.rate)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billSplitType:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,idCard:null,sellName:null,sellTaxNo:null,sellAddr:null,sellTel:null,sellBank:null,sellAccount:null,machineNo:null,pwdCode:null,note:null,vehicleType:null,goodsVersion:null,invoicer:null,rate:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,preferentialFlag:null,preferentialType:null,taxZeroRate:null,taxTypeCode:null,factoryNo:null,origin:null,eligibilityNo:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,importCertificateNumber:null,taxAuthorityCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null,taxAuthorityName:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,taxnoInfo:null,rewriteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,billId:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(d["e"])(e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加机动车发票管理"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(r["i"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改机动车发票管理"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["k"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除机动车发票管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["d"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1],t.idsArr=this.ids,this.$confirm("是否确认导出所有机动车发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["e"])(t)})).then((function(t){e.currencyDownload(t,"机动车发票.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.vehicleInvoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.vehicleinvoiceList,"vehicleInvoiceMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},showInvoiceInfo:function(e){var t=this,a=e.id;this.mainLoading=!0,this.$refs.vehicleInvoiceDetailShowModal.fillInvoiceDialog(a).then((function(){t.mainLoading=!1})).catch((function(){t.mainLoading=!1}))},handleRed:function(){var e=this;this.$confirm("是否确认对所选发票进行红冲?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.checkAmountEnableRed(e.rows[0])})).then((function(){var t=e.rows[0].id;e.mainLoading=!0,e.$refs.vehicleInvoiceDetailEditModal.redFillBillDialog(t).then((function(){e.mainLoading=!1})).catch((function(){e.mainLoading=!1}))}))},checkAmountEnableRed:function(e){var t=this,a=e.id,n=e.invDate,i={id:a,invDate:n};return Object(r["c"])(i).then((function(e){if(200!=e.code)return t.msgError(e.msg),new Promise((function(){}))}))},updateBillTable:function(){this.getList()},handleCancel:function(){var e=this;this.operationIndex=0,this.operationRowArr=Object(d["e"])(this.rows),this.$confirm("是否确认对所选发票进行作废?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.openValid1()})).then((function(){e.functionName="作废中:",e.showProgress=!0,e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.cancelInvoiceList()})).catch((function(t){e.showProgress=!1,e.operationIndex=0,e.operationRowArr=[],void 0!=t.message&&e.msgError(t.measure)}))},openValid1:function(){var e=this,t=Object(l["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},cancelInvoiceList:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100)),this.cancelInvoice(this.operationRowArr[this.operationIndex-1]).then((function(t){"200"==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据作废失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.operationIndex=0,e.getList()):e.cancelInvoiceList()})).catch((function(t){e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.operationIndex=0):e.$confirm(t.message+"是否继续作废发票?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.operationIndex=0):e.cancelInvoiceList()})).catch((function(){e.showProgress=!1,e.operationRowArr=[],e.operationIndex=0}))}))},cancelInvoice:function(e){var t=e.id,a={id:t,beginTime:this.dateRange[0],endTime:this.dateRange[1]};return Object(r["b"])(a)},flagRed:function(){var e=this,t=this.rows,a=t[0];this.flagRedopen=!0,this.$nextTick((function(){e.$refs.flagRedForm.clearValidate()})),this.flagRedForm.id=a.id,this.flagRedForm.invType=a.invType,this.flagRedForm.sourceInvDate=a.invDate,this.flagRedForm.sourceInvCode=a.invCode,this.flagRedForm.sourceInvNo=a.invNo},flagRedCancel:function(){this.flagRedopen=!1,this.resetRed()},resetRed:function(){this.flagRedForm={},this.resetForm("flagRedForm")},submitFlagRedForm:function(){var e=this;this.$refs["flagRedForm"].validate((function(t){t&&Object(r["g"])(e.flagRedForm).then((function(t){"200"==t.code?(e.msgSuccess(t.msg),e.flagRedopen=!1,e.getList()):e.msgError(t.msg)}))}))},flagCancel:function(){var e=this;this.operationIndex=0,this.operationRowArr=Object(d["e"])(this.rows),this.$confirm("您确定要标记作废当前发票吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.showProgress=!0,e.functionName="作废中:",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.flagCancelLogic()}))},flagCancelLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(r["f"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号为:"+e.operationRowArr[e.operationIndex-1].billNo+"的发票作废成功"):e.msgError("单据编号为:"+e.operationRowArr[e.operationIndex-1].billNo+"的发票"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.flagCancelLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1)})).catch((function(t){e.operationIndex<e.operationRowArr.length?e.flagCancelLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1)}))}}}),h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},6254:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"公司名称",prop:"comName"}},[a("el-input",{attrs:{placeholder:"请输入公司名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.comName,callback:function(t){e.$set(e.queryParams,"comName",t)},expression:"queryParams.comName"}})],1),a("el-form-item",{attrs:{label:"公司税号",prop:"comTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入公司税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.comTaxNo,callback:function(t){e.$set(e.queryParams,"comTaxNo",t)},expression:"queryParams.comTaxNo"}})],1),a("el-form-item",{attrs:{label:"适用模块",prop:"applyModul"}},[a("el-select",{model:{value:e.queryParams.applyModul,callback:function(t){e.$set(e.queryParams,"applyModul",t)},expression:"queryParams.applyModul"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"进项",value:1}})],1)],1),a("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[a("el-select",{model:{value:e.queryParams.enable,callback:function(t){e.$set(e.queryParams,"enable",t)},expression:"queryParams.enable"}},[a("el-option",{attrs:{label:"启用",value:1}}),a("el-option",{attrs:{label:"禁用",value:0}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:com:add"],expression:"['system:com:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:com:edit"],expression:"['system:com:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:com:remove"],expression:"['system:com:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:com:export"],expression:"['system:com:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-check",size:"mini",disabled:e.single||e.multiple},on:{click:function(t){return e.handleEnableStatus("1")}}},[e._v("启用")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-close",size:"mini",disabled:e.single||e.multiple},on:{click:function(t){return e.handleEnableStatus("0")}}},[e._v("禁用")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"riskComMainTable",attrs:{data:e.comList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["applyModul"==t.prop?a("span",[e._v(" "+e._s("0"==n.row.enable?"全部":"进项")+" ")]):"enable"==t.prop?a("span",[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){return e.handleEnableChange(n.row)}},model:{value:n.row.enable+"",callback:function(t){e.$set(n.row,"enable + ''",t)},expression:"scope.row.enable + ''"}})],1):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:edit"],expression:"['system:words:edit']"}],staticStyle:{display:"inline-block",margin:"0 5px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:words:remove"],expression:"['system:words:remove']"}],staticStyle:{display:"inline-block",margin:"0 5px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),a("el-button",{staticStyle:{display:"inline-block",margin:"0 5px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"公司名称",prop:"comName"}},[a("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:e.form.comName,callback:function(t){e.$set(e.form,"comName",t)},expression:"form.comName"}})],1),a("el-form-item",{attrs:{label:"公司税号",prop:"comTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入公司税号"},model:{value:e.form.comTaxNo,callback:function(t){e.$set(e.form,"comTaxNo",t)},expression:"form.comTaxNo"}})],1),a("el-form-item",{attrs:{label:"企业地址电话",prop:"comAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入企业地址电话"},model:{value:e.form.comAddrTel,callback:function(t){e.$set(e.form,"comAddrTel",t)},expression:"form.comAddrTel"}})],1),a("el-form-item",{attrs:{label:"企业银行账号",prop:"comBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入企业银行账号"},model:{value:e.form.comBankAccount,callback:function(t){e.$set(e.form,"comBankAccount",t)},expression:"form.comBankAccount"}})],1),a("el-form-item",{attrs:{label:"适用模块",prop:"applyModul"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.applyModul,callback:function(t){e.$set(e.form,"applyModul",t)},expression:"form.applyModul"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"进项",value:1}})],1)],1),a("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.detailTitle,visible:e.detailOpen,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.detailOpen=t}}},[a("table",{staticClass:"riskComDetailTable"},[a("tbody",[a("tr",[a("td",{staticStyle:{width:"15%"}},[e._v("企业名称")]),a("td",[e._v(e._s(e.riskComDetail.comName||"——"))]),a("td",{staticStyle:{width:"15%"}},[e._v("公司企业税号")]),a("td",[e._v(e._s(e.riskComDetail.comTaxNo||"——"))]),a("td",{staticStyle:{width:"15%"}},[e._v("注册地址")]),a("td",[e._v(e._s(e.riskComDetail.regeditAddress||"——"))])]),a("tr",[a("td",[e._v("公司代码")]),a("td",[e._v(e._s(e.riskComDetail.orgCode||"——"))]),a("td",[e._v("公司所在省份")]),a("td",[e._v(e._s(e.riskComDetail.province||"——"))]),a("td",[e._v("法人名称")]),a("td",[e._v(e._s(e.riskComDetail.legalName||"——"))])]),a("tr",[a("td",[e._v("法人性别")]),a("td",[e._v(e._s(e.riskComDetail.legalSex||"——"))]),a("td",[e._v("法人卡类别")]),a("td",[e._v(e._s(e.riskComDetail.legalCardType||"——"))]),a("td",[e._v("法人卡号")]),a("td",[e._v(e._s(e.riskComDetail.legalCardNo||"——"))])]),a("tr",[a("td",[e._v("黑名单发布时间")]),a("td",[e._v(e._s(e.riskComDetail.publicDate||"——"))]),a("td",[e._v("案例细节")]),a("td",[e._v(e._s(e.riskComDetail.caseDetail||"——"))]),a("td",[e._v("案例性质")]),a("td",[e._v(e._s(e.riskComDetail.caseNature||"——"))])])])])])],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("b775"));function l(e){return Object(r["a"])({url:"/system/com/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/system/com/"+e,method:"get"})}function c(e){return Object(r["a"])({url:"/system/com",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/system/com",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/system/com/"+e,method:"delete"})}function p(e){return Object(r["a"])({url:"/system/com/export",method:"post",data:e,responseType:"blob"})}function h(e){return Object(r["a"])({url:"/system/com/changeComEnable",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/system/com/riskComDetail",method:"post",data:e})}var f=a("ed08"),b=a("c38a"),g={name:"Com",components:{},data:function(){return{routeLoading:!1,functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,comList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:500,comName:null,comTaxNo:null,comAddrTel:null,comBankAccount:null,applyModul:null,enable:null,note:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null},form:{},rules:{comName:[{required:!0,message:"公司名称不能为空",trigger:"blur"}],comTaxNo:[{required:!0,message:"公司税号不能为空",trigger:"blur"}],applyModul:[{required:!0,message:"适用模块：0全部  1进项（叫法具体由数字字典控制）  2销项不能为空",trigger:"blur"}],enable:[{required:!0,message:"是否启用：1是  其他否不能为空",trigger:"blur"}],createBy:[{required:!0,message:"创建人id不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],updateTime:[{required:!0,message:"更新时间不能为空",trigger:"blur"}]},columnsArr:[{label:"企业名称",prop:"comName",align:"center",show:!0,width:220,columnSort:20},{label:"企业税号",prop:"comTaxNo",align:"center",show:!0,width:220,columnSort:0},{label:"地址电话",prop:"comAddrTel",align:"center",show:!0,width:220,columnSort:1},{label:"银行账号",prop:"comBankAccount",align:"center",show:!0,width:220,columnSort:2},{label:"创建人",prop:"ext1",align:"center",show:!0,width:220,columnSort:3},{label:"创建时间",prop:"createTime",align:"center",show:!0,width:220,columnSort:4},{label:"是否启用",prop:"enable",align:"center",show:!0,width:220,columnSort:5},{label:"适用范围",prop:"applyModul",align:"center",show:!0,width:220,columnSort:6},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:6}],sortParam:{column:"",columnOrder:""},detailTitle:"风险企业详情",detailOpen:!1,riskComDetail:{}}},created:function(){var e=this;this.getList(),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(f["e"])(this.queryParams),Object(f["e"])(this.sortParam));l(t).then((function(t){e.comList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,comName:null,comTaxNo:null,comAddrTel:null,comBankAccount:null,applyModul:0,enable:1,note:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(f["e"])(e)},handleAdd:function(){var e=this;this.reset(),this.open=!0,this.title="添加风险企业",this.$nextTick((function(){e.$refs.form.clearValidate()}))},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;s(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改风险企业",t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?u(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):c(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除风险企业编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(f["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出所有风险企业数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(b["g"])(100,"导出中",e,!0),p(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"风险企业.xls",e)})).catch((function(){}))},handleDetail:function(e){var t=this,a={riskComId:e.id};this.routeLoading=!0,m(a).then((function(e){200==e.code?(t.riskComDetail=e.data[0]||{},t.detailOpen=!0):t.msgError(e.msg),t.routeLoading=!1})).catch((function(){t.routeLoading=!1}))},handleEnableChange:function(e){var t=this,a={};a.ids=e.id.split("nothing"),a.status="1"==e.enable?"0":"1",h(a).then((function(e){200==e.code?("1"==a.status?t.msgSuccess("启用成功"):t.msgSuccess("禁用成功"),t.getList()):t.msgError(e.msg)})).catch((function(){}))},handleEnableStatus:function(e){var t=this,a="";a="1"==e?"是否确认启用所选敏感词数据项?":"是否确认禁用所选敏感词数据项?",this.$confirm(a,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.ids=t.ids,a.status=e,h(a).then((function(a){200==a.code?("1"==e?t.msgSuccess("启用成功"):t.msgSuccess("禁用成功"),t.getList()):t.msgError(a.msg)})).catch((function(){}))})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.riskComMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.comList,"riskComMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}},v=g,y=(a("1693"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"4340612c",null);t["default"]=_.exports},6368:function(e,t,a){},6540:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"单据号",prop:"name"}},[a("el-input",{attrs:{placeholder:"单据号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("el-form-item",{attrs:{label:"税号",prop:"goodsNameAbbreviation"}},[a("el-input",{attrs:{placeholder:"请输入商品简称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.mergeCode,callback:function(t){e.$set(e.queryParams,"mergeCode",t)},expression:"queryParams.mergeCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("引入")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"codeTable",attrs:{data:e.taxcodeList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"单据编码",align:"center",prop:"code1","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"购方税号",align:"center",prop:"code2","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"购方名称",align:"center",prop:"code3","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"金额",align:"center",prop:"code4","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"税额",align:"center",prop:"code5","show-overflow-tooltip":!0}})],1)],1)],1)},i=[],o={name:"sapBillImort",data:function(){return{open:!1,multiple:!0,showSearch:!0,total:0,title:"单据引入",queryParams:{pageNum:1,pageSize:10,code:null,mergeCode:null},taxcodeList:[{code1:"MT001",code2:"91256778G445P1",code3:"测试",code4:"30",code5:"5"}]}},methods:{openDialog:function(){this.open=!0}}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,"65400c07",null);t["default"]=s.exports},"65e4":function(e,t,a){"use strict";a("d064")},"65ff":function(e,t,a){"use strict";a("6634")},6634:function(e,t,a){},6691:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"代码号码",prop:"invCodeNo"}},[a("el-input",{attrs:{placeholder:"请输入发票代码号码组合",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCodeNo,callback:function(t){e.$set(e.queryParams,"invCodeNo",t)},expression:"queryParams.invCodeNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择开票日期"},model:{value:e.queryParams.invDate,callback:function(t){e.$set(e.queryParams,"invDate",t)},expression:"queryParams.invDate"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择发票状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.queryParams.fileId,callback:function(t){e.$set(e.queryParams,"fileId",t)},expression:"queryParams.fileId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"报销状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择报销状态",clearable:"",size:"small"},model:{value:e.queryParams.reimStatus,callback:function(t){e.$set(e.queryParams,"reimStatus",t)},expression:"queryParams.reimStatus"}},e._l(e.reimStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证类型",prop:"voucherType"}},[a("el-input",{attrs:{placeholder:"请输入凭证类型",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherType,callback:function(t){e.$set(e.queryParams,"voucherType",t)},expression:"queryParams.voucherType"}})],1),a("el-form-item",{attrs:{label:"凭证日期",prop:"voucherDate"}},[a("el-input",{attrs:{placeholder:"请输入凭证日期",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherDate,callback:function(t){e.$set(e.queryParams,"voucherDate",t)},expression:"queryParams.voucherDate"}})],1),a("el-form-item",{attrs:{label:"录入人",prop:"ext1"}},[a("el-input",{attrs:{placeholder:"请输入录入人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.ext1,callback:function(t){e.$set(e.queryParams,"ext1",t)},expression:"queryParams.ext1"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["incomecp:zzsinvoice:check"],expression:"['incomecp:zzsinvoice:check']"}],attrs:{type:"success",icon:"el-icon-circle-check",size:"mini",disabled:e.multiple},on:{click:e.handleCheck}},[e._v("查验")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:exportStatistics"],expression:"['ticket:personal:exportStatistics']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:exportStatistics"],expression:"['ticket:personal:exportStatistics']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"personalMainTable",attrs:{data:e.personalList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.handleShowInvoiceDetail(n.row)}}},[e._v(e._s((["08xdp","10xdp"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo))]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["08xdp","10xdp"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"state"==t.prop?a("span",[e._v(" "+e._s(e.stateFormat(n.row))+" ")]):"reimStatus"==t.prop?a("span",[e._v(" "+e._s(e.reimStatusFormat(n.row))+" ")]):"checked"==t.prop?a("span",[e._v(" "+e._s(e.checkedFormat(n.row))+" ")]):"fileName"==t.prop?a("span",[e._v(" "+e._s(e.fileOptionsFormat(n.row))+" ")]):"invDate"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.invDate,"{y}-{m}-{d}"))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{on:{click:function(t){return e.downloadImg("previewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),a("el-dialog",{attrs:{visible:e.open,width:e.isUpdate&&e.manualForm.fileUrl?"1200px":"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.manualDialogClose},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.title)}})]},proxy:!0}])},[a("div",{staticStyle:{display:"flex","max-height":"60vh"}},[a("el-form",{ref:"manualForm",staticStyle:{flex:"1",overflow:"auto"},attrs:{model:e.manualForm,rules:e.manualRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxLength:12,clearable:"",placeholder:"请输入发票代码"},on:{change:e.manualFormInvCodeChange},model:{value:e.manualForm.invCode,callback:function(t){e.$set(e.manualForm,"invCode",t)},expression:"manualForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxLength:8,placeholder:"请输入发票号码",clearable:""},model:{value:e.manualForm.invNo,callback:function(t){e.$set(e.manualForm,"invNo",t)},expression:"manualForm.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",placeholder:"请输入开票日期"},model:{value:e.manualForm.invDate,callback:function(t){e.$set(e.manualForm,"invDate",t)},expression:"manualForm.invDate"}})],1),e.isSpecial&&!e.isSecondHand?a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{placeholder:"请输入合计不含税金额",clearable:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmountWithoutTax,callback:function(t){e.$set(e.manualForm,"totalAmountWithoutTax",t)},expression:"manualForm.totalAmountWithoutTax"}})],1):e._e(),e.isSpecial||e.isSecondHand?e._e():a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{maxLength:6,placeholder:"请输入校验码后六位",clearable:""},model:{value:e.manualForm.checkCode,callback:function(t){e.$set(e.manualForm,"checkCode",t)},expression:"manualForm.checkCode"}})],1),e.isSecondHand?a("el-form-item",{attrs:{label:"价税合计",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入价税合计",clearable:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmount,callback:function(t){e.$set(e.manualForm,"totalAmount",t)},expression:"manualForm.totalAmount"}})],1):e._e(),e._l(e.buySellField.field,(function(t,n){return a("el-form-item",{key:n,attrs:{label:e.buySellField.name[n],prop:t}},[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small",type:"textarea",autosize:""},model:{value:e.manualForm[t],callback:function(a){e.$set(e.manualForm,t,a)},expression:"manualForm[buySellItem]"}})],1)})),a("el-form-item",{attrs:{label:"发票联次",prop:"formName"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.manualForm["formName"],callback:function(t){e.$set(e.manualForm,"formName",t)},expression:"manualForm['formName']"}},e._l(e.invJointOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.manualForm.fileId,callback:function(t){e.$set(e.manualForm,"fileId",t)},expression:"manualForm.fileId"}},e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})})),1)],1)],2),e.isUpdate&&e.manualForm.fileUrl?a("div",{staticClass:"public-update-right-div"},[a("div",{staticStyle:{flex:"1",overflow:"hidden",border:"2px dashed #ccc",padding:"10px"}},[e.manualForm.fileUrl&&"pdf"==e.manualForm.fileUrl.split(".").pop().toLowerCase()?[a("div",{ref:"updatePreviewImg",staticStyle:{width:"100%",position:"relative"},attrs:{draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}},[a("pdf",{ref:"pdf",staticStyle:{width:"100%"},attrs:{src:e.pdfUrldata}})],1)]:[a("img",{ref:"updatePreviewImg",staticStyle:{width:"100%",position:"relative"},attrs:{src:e.manualForm.fileUrl,id:"zoomImg",draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),a("div",{staticClass:"public-img-operation2"},[a("div",{staticClass:"public-img-left-operation2"},[a("div",{on:{click:function(t){return e.restoreImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")])]),a("div",{staticClass:"public-img-right-operation2"},[a("div",{on:{click:function(t){return e.handleImgChecked("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-circle-check"}),e._v("查验")]),a("div",{on:{click:function(t){return e.downloadImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),e.currOperationRow.fileUrl&&"pdf"==e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?[a("div",{on:{click:function(t){return e.printPdf("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]:[a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]],2)]),a("div",{staticClass:"public-invoice-status"},[a("div",[e._v("识别状态:已识别")]),a("div",[e._v("查验状态:"+e._s(e.checkedFormat(e.currOperationRow)))]),a("div",[e._v("稽核状态:"+e._s(e.currOperationRow&&"0"==e.currOperationRow.ruleStatus?"正常":"异常"))])])]):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.isUploading},on:{click:e.submitManualForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e(),a("iframe",{staticStyle:{height:"60vh",width:"100%",position:"fixed",bottom:"-1000px"},attrs:{id:"printIFrame",src:e.getLocalhostIFrame(e.currOperationRow.fileUrl)}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("invoice-detail-show-modal",{ref:"invoiceDetailShowModal",attrs:{isPersonal:"1"}}),a("vehicle-invoice-detail-show-modal",{ref:"vehicleInvoiceDetailShowModal",attrs:{isPersonal:"1"}}),a("second-hand-invoice-detail-show-modal",{ref:"secondHandInvoiceDetailShowModal",attrs:{isPersonal:"1"}})],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("d81d"),a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b64b"),a("16de")),l=a("4c80"),s=a("b526"),c=a("0ca4"),u=a("66b5"),d=a("f82b"),p=a("858e"),h=a("ed08"),m=a("5f87"),f=a("c38a"),b={name:"Personal",components:{TotalRowTable:s["default"],InvoiceDetailShowModal:c["default"],VehicleInvoiceDetailShowModal:u["default"],SecondHandInvoiceDetailShowModal:d["default"],pdf:p["a"]},data:function(){return{imgShowParams:{deg:0,scale:1},isUploading:!1,imageUploadFileList:[],showUploadFileProgress:!1,percentage:0,uploadStatus:null,images:{ofdIcon:a("086e"),pdfIcon:a("55fc")},imageUpload:{open:!1,title:"图片识别(最多选择9个文件)",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(m["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},base64Arr:{},uploadResult:{},pdfUrldata:null,fileOptions:[],routeLoading:!1,isSpecial:!0,isSecondHand:!1,functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,personalList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],invJointOptions:[],reimStatusOptions:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,state:null,buyName:null,fileId:null,reimStatus:null,voucherNo:null,voucherType:null,voucherDate:null,ext1:null},form:{},manualForm:{id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,totalAmount:null,fileUrl:null,fileId:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,buyName:null,buyTaxNo:null,buyAddrTel:null,buyBankAccount:null},manualRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:["blur","change"]}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:["blur","change"]}],checkCode:[{required:!0,message:"校验码不能为空",trigger:["blur","change"]},{pattern:/^\d{0,10}$/,message:"请输入正确的校验码",trigger:"blur"}],totalAmount:[{required:!0,message:"价税合计不能为空",trigger:["blur","change"]}],fileUrl:[{required:!0,message:"发票文件不能为空"}],fileId:[{required:!0,message:"所属票夹不能为空"}]},columnsArr:[{label:"发票类型",prop:"invType",align:"center",show:!0,width:120,columnSort:3},{label:"发票状态",prop:"state",align:"center",show:!0,width:120,columnSort:4},{label:"查验状态",prop:"checked",align:"center",show:!0,width:120,columnSort:4},{label:"报销状态",prop:"reimStatus",align:"center",show:!0,width:120,columnSort:4},{label:"凭证号",prop:"voucherNo",align:"center",show:!0,width:220,columnSort:4},{label:"凭证类型",prop:"voucherType",align:"center",show:!0,width:100,columnSort:4},{label:"凭证日期",prop:"voucherDate",align:"center",show:!0,width:150,columnSort:4},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:130,columnSort:20},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:100,columnSort:0},{label:"发票代码号码",prop:"invCodeNo",align:"center",show:!0,width:200,columnSort:1},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:2},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:5},{label:"所属发票夹",prop:"fileName",align:"center",show:!0,width:180,columnSort:6},{label:"录入人",prop:"ext1",align:"center",show:!0,width:180,columnSort:6}],sortParam:{column:"",columnOrder:""},operationIndex:0,operationRowArr:[],originImageOpen:!1,currOriginImageUrl:null,isUpdate:!1,buySellField:{name:["销方名称","销方税号","销方地址","销方银行","购方名称","购方税号","购方地址","购方银行"],field:["sellName","sellTaxNo","sellAddrTel","sellBankAccount","buyName","buyTaxNo","buyAddrTel","buyBankAccount"]},aspectRatio:null,currOperationRow:{},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'}}},computed:{judgeFileUrl:function(){return function(e){return"pdf"==e.name.split(".").pop()?this.images.pdfIcon:"ofd"==e.name.split(".").pop()?this.images.ofdIcon:e.url}},progressStatus:function(){return void 0==this.uploadStatus?null:this.uploadStatus?"success":"exception"}},created:function(){var e=this;this.getList(),this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("inv_joint").then((function(t){e.invJointOptions=t.data})),this.getDicts("reim_status").then((function(t){e.reimStatusOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),Object(r["h"])().then((function(t){e.fileOptions=t.rows,e.manualForm.fileId=e.fileOptions[0].id}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0,Object(r["g"])(this.queryParams).then((function(t){e.personalList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},checkedFormat:function(e,t){return e?this.selectDictLabel(this.checkedOptions,e.checked):""},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},blockChainFormat:function(e,t){return this.selectDictLabel(this.blockChainOptions,e.blockChain)},reimStatusFormat:function(e,t){return this.selectDictLabel(this.reimStatusOptions,e.reimStatus)},fileOptionsFormat:function(e){for(var t=0,a=this.fileOptions.length;t<a;t++)if(this.fileOptions[t].id==e.fileId)return this.fileOptions[t].fileName;return"未知"},cutTime:function(e){return null!=e.invDate?e.invDate.substring(0,10):""},manualDialogClose:function(){this.isSpecial=!0,this.isSecondHand=!1,this.resetManualForm(),this.imageUploadFileList=[];var e=document.getElementById("zoomImg");e&&(e.style.top=0,e.style.left=0),this.currOperationRow={}},resetManualForm:function(){this.manualForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,fileUrl:null,fileId:this.fileOptions[0].id,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,buyName:null,buyTaxNo:null,buyAddrTel:null,buyBankAccount:null}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleShowInvoiceDetail:function(e){var t=this;"1"==e.checked?(this.routeLoading=!0,"03"==e.invType?this.$refs.vehicleInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):"15"==e.invType?this.$refs.secondHandInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):this.$refs.invoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1}))):this.msgError("查验成功发票才能查看详情")},handleUpdate:function(e){var t=this;if(this.isUpdate=!0,void 0!=e.id?this.currOperationRow=e:this.currOperationRow=this.rows[0],void 0!=e.id&&"1"==e.checked||1==this.rows.length&&"1"==this.rows[0].checked)this.msgError("已查验发票不能够修改");else{var a=e.id||this.ids;Object(r["f"])(a).then((function(a){var n;t.manualForm=a.data,t.manualForm.id=e.id||t.ids[0],t.manualFormInvCodeChange(),t.open=!0,t.$nextTick((function(){t.$refs.manualForm.clearValidate()})),t.title="修改增值税发票","pdf"==(null===(n=t.manualForm.fileUrl)||void 0===n?void 0:n.split(".").pop().toLowerCase())&&t.pdfPreviewUrl(t.manualForm.fileUrl)}))}},pdfPreviewUrl:function(e){var t=this;if(!e)return"";var a="https://unpkg.com/pdfjs-dist@2.0.943/cmaps/",n=p["a"].createLoadingTask({url:"/einvoices"+e.replace("https://vat.zzhcn.net",""),withCredentials:!1,cMapUrl:a,cMapPacked:!0});n.promise.then((function(e){t.pdfUrldata=n})).catch((function(){return t.msgError("加载失败"),""}))},submitManualForm:function(){var e=this;this.$refs["manualForm"].validate((function(t){if(t)if(null!=e.manualForm.id){var a=Object(h["e"])(e.manualForm);a.other=e.manualForm.checkCode||e.manualForm.totalAmount||e.manualForm.totalAmountWithoutTax,a.dataSource="01",Object(r["i"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}else{var n=Object(h["e"])(e.manualForm);n.other=e.manualForm.checkCode||e.manualForm.totalAmount||e.manualForm.totalAmountWithoutTax,n.dataSource="01",n.fileUrl=e.uploadResult.fileUrl,Object(r["a"])(n).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}}))},handleDelete:function(){var e=this;this.$confirm('<span style="word-break: break-all;">是否确认删除所选发票?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(f["g"])(100,"删除中",e),e.operationIndex=0,e.operationRowArr=e.rows,e.deleteInvoiceLogic()}))},deleteInvoiceLogic:function(){var e=this;this.operationIndex++;var t={fileId:this.operationRowArr[this.operationIndex-1].fileId,id:this.operationRowArr[this.operationIndex-1].id};Object(r["c"])(t).then((function(t){200==t.code?e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除成功"):e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除失败，"+t.msg),e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())}))},handleCheck:function(){var e=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="查验中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.checkLogic()},checkLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id};Object(r["b"])(t).then((function(t){"200"==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},handleExport:function(){var e=this,t=Object(h["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出增值税发票（个人）数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(f["g"])(10,"导出中",e),Object(r["e"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票（个人）.xls",e)})).catch((function(){}))},handleManual:function(){var e=this;this.isUpdate=!1,this.open=!0,this.$nextTick((function(){e.$refs.manualForm.clearValidate()})),this.title="添加增值税发票"},manualFormInvCodeChange:function(){var e=this,t=Object(f["i"])(this.manualForm.invCode);"08"==t||"03"==t||"01"==t||"02"==t?(this.isSpecial=!0,this.manualForm.checkCode="",this.isSecondHand=!1,this.manualForm.totalAmount=""):"15"==t?(this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.manualForm.totalAmountWithoutTax="",this.isSecondHand=!1,this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))},handleManualFileUploadProgress:function(e,t,a){this.manualUpload.isUploading=!0},handleManualFileSuccess:function(e,t,a){this.manualUpload.isUploading=!1,200==e.code?this.msgSuccess(e.msg):this.msgError(e.msg)},submitFileForm:function(){this.$refs.manualUpload.submit()},handleImage:function(){this.$refs.uploadFileDialog.uploadFileDialogShow()},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},updateInvoiceTable:function(){this.getList()},validIsNumber:function(e){e.target.value=Object(f["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(f["a"])(e.target.value)},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},imageUploadFileChange:function(e,t){var a=this;console.log(e,t),this.imageUploadFileList=t,Object(h["g"])(e.raw||e).then((function(t){var n=Object(h["p"])(t.split(",")[0]);a.base64Arr[e.uid]=n+"_"+t.split(",")[1],a.showUploadFileProgress=!0;var i=1e3,o=a;o.percentage=0;var r=setInterval((function(){o.percentage++,o.percentage>=99?clearInterval(r):o.percentage>80?i=2e3:o.percentage>50&&(i=1500)}),i),s=new FormData;s.append("baseArray",n+"_"+t.split(",")[1]),o.isUploading=!0,Object(l["d"])(s).then((function(e){if(o.isUploading=!1,clearInterval(r),o.percentage=100,200==e.code?(o.uploadStatus=!0,o.msgSuccess("发票上传成功")):(o.uploadStatus=!1,o.msgError(e.msg)),"[object Array]"==Object.prototype.toString.call(e.data)){o.uploadResult=Object(h["e"])(e.data[0]);var t=Object(h["e"])(e.data[0]),n=JSON.parse(t.data);for(var i in Object.assign(t,n),o.manualForm)t[i]&&("checkCode"==i&&(t[i]=t[i].substr(t[i].length-6)),o.manualForm[i]=t[i],"invCode"==i&&a.manualFormInvCodeChange())}else o.uploadResult=e.data})).catch((function(){o.isUploading=!1}))}))},previewRemove:function(e){this.$refs.imageUpload.handleRemove(e),this.showUploadFileProgress=!1,this.percentage=0,this.uploadStatus=null},handleRemove:function(e,t){this.imageUploadFileList=t,delete this.base64Arr[e.uid]},handleImport:function(){},handleExportDetail:function(){var e=this,t=Object(h["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出增值税发票（个人）数据项明细?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(f["g"])(10,"导出中",e),Object(r["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},handleImgChecked:function(){var e=this,t=null;t=this.currOperationRow?this.currOperationRow.id:this.rows[0].id;var a={id:t};this.open=!1,this.showProgress=!0,this.functionName="查验中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(100),e.$refs.myProgress.setProgressNum(0)})),Object(r["b"])(a).then((function(t){e.showProgress=!1,"200"==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)})).catch((function(){e.showProgress=!1}))},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(h["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},printPdf:function(){document.getElementById("printIFrame").contentWindow.print()},getLocalhostIFrame:function(e){return e?"/einvoices"+e.replace("https://vat.zzhcn.net",""):""},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.personalMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.personalList,"personalMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}},g=b,v=(a("e631"),a("2877")),y=Object(v["a"])(g,n,i,!1,null,"0b903430",null);t["default"]=y.exports},"66b5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-row",[a("el-row",[a("el-col",{staticStyle:{visibility:"hidden"},attrs:{span:20}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{readonly:""}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票日期:"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate",t)},expression:"form.invDate"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:7}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码:"}},[a("el-input",{attrs:{maxlength:100,readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码:"}},[a("el-input",{attrs:{maxlength:11,readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"120px"}},[a("div",[e._v("机打代码")]),a("div",{staticStyle:{width:"100%"}},[e._v("机打号码")]),a("div",[e._v("机器编号")])])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"120px"}},[a("div",[e._v(e._s(e.form.invCode))]),a("div",{staticStyle:{width:"100%"}},[e._v(e._s(e.form.invNo))]),null==e.form.machineNo?a("div",{staticStyle:{color:"white"}},[e._v("fillText")]):a("div",[e._v(e._s(e.form.machineNo))])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div3 public-vertical-div",staticStyle:{height:"120px"}},[a("span",[e._v("税控码")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"120px"}})])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"60px"}},[a("span",[e._v("购买方名称及身份证号码/组织机构代码")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"60px"}},[e._v(" "+e._s(e.form.buyName)+" "),a("br"),e._v(" "+e._s(e.vehicleDetails[0].idCardNo)+" ")])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"60px"}},[a("span",[e._v("纳税人识别号")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"60px"}},[e._v(" "+e._s(e.form.buyTaxNo)+" ")])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("车辆类型")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].vehicleType)+" ")])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("厂牌型号")])])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].factoryNo)+" ")])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("产地")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].origin)+" ")])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("合格证号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].eligibilityNo)+" ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("进口证明书号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].importCertificateNumber)+" ")])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("商检单号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].commodityInspectionNo)+" ")])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("发动机号码")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].engineNo)+" ")])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("车辆识别代号/车架号码")])])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(" "+e._s(e.vehicleDetails[0].vehicleIdentificationCode)+" ")])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("价税合计")])])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.totalMoneyUp))]),a("span",{staticStyle:{"margin-left":"60%"}},[a("span",{staticStyle:{color:"#cc7431","margin-right":"10px"}},[e._v("小写")]),e._v(" "+e._s("￥"+e.form.totalAmount)+" ")])])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("销货单位名称")])])]),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.sellName))])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("电话")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.tel))])])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("纳税人识别号")])])]),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.sellTaxNo))])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("账号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.account))])])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("地址")])])]),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.addr))])])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("开户银行")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.form.bank))])])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"60px"}},[a("span",[e._v("增值税税率或征收率")])])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"60px"}},[a("span",[e._v(e._s(e.vehicleDetails[0].rate+"%"))])])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"60px"}},[a("span",[e._v("增值税税额")])])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"60px"}},[a("span",[e._v(e._s("￥"+e.form.totalTaxAmount))])])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"60px"}},[a("span",[e._v("主管税务机关及代码")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"60px"}},[e._v(" "+e._s(e.vehicleDetails[0].taxAuthorityName)),a("br"),e._v(" "+e._s(e.vehicleDetails[0].taxAuthorityCode)+" ")])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("不含税价")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[a("span",{staticStyle:{color:"#cc7431","margin-right":"10px"}},[e._v("小写")]),a("span",[e._v(e._s("￥"+e.form.totalAmountWithoutTax))])])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("完税凭证号码")])])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.vehicleDetails[0].completionVoucherNo))])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("吨位")])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.vehicleDetails[0].tonnage))])])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("限乘人数")])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[a("span",[e._v(e._s(e.vehicleDetails[0].limitedNumberOfPassengers))])])])],1)],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("4c80")),r=a("606d"),l={name:"secondHandInvoiceDetailShowModal",props:{isPersonal:{type:String,default:"0"}},data:function(){return{form:{blockChain:"0",buyAddrTel:"测试一下",buyBankAccount:"测试一下",buyName:"测试一下",buyTaxNo:"测试一下",cashier:"测试一下",checkCode:null,checkMsg:null,checked:null,checker:"测试一下",createBy:null,id:"1222222222222222222",invCode:"122222222222",invDate:"2021-03-06",invNo:"23568569",invType:"02",invoicer:"测试一下",machineNo:null,note:"测试一下",searchValue:null,sellAddrTel:"测试一下",sellBankAccount:"测试一下",sellName:"测试一下",sellTaxNo:"测试一下",sourceInvCode:null,sourceInvNo:null,state:null,totalAmount:null,totalAmountWithoutTax:23.5,totalMoneyUp:null,totalTaxAmount:null,updateBy:null,updateTime:"2021-03-15 15:36:26"},vehicleDetails:[{vehicleType:null,factoryNo:null,origin:null,eligibilityNo:null,importCertificateNumber:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,rate:null,taxAuthorityName:null,taxAuthorityCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null}],fplxdesc:"",open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[]}},watch:{},computed:{},created:function(){var e=this;this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return"1"==this.isPersonal?Object(r["f"])(e).then((function(e){var a=e.data;t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form=a,t.vehicleDetails=a.details;var n=a.sellBankAccount.split(","),i=a.sellAddrTel.split(",");t.form.bank=n[0],t.form.account=n[1],t.form.addr=i[0],t.form.tel=i[1],t.open=!0,t.title="发票详情"})):Object(o["i"])(e).then((function(e){var a=e.data;t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form=a,t.vehicleDetails=a.details;var n=a.sellBankAccount.split(","),i=a.sellAddrTel.split(",");t.form.bank=n[0],t.form.account=n[1],t.form.addr=i[0],t.form.tel=i[1],t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")}}},s=l,c=(a("b22c"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"da40a5fc",null);t["default"]=u.exports},"67ef":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"登录地址",prop:"ipaddr"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入登录地址",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.ipaddr,callback:function(t){e.$set(e.queryParams,"ipaddr",t)},expression:"queryParams.ipaddr"}})],1),a("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"登录状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"登录时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:logininfor:remove"],expression:"['monitor:logininfor:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:logininfor:remove"],expression:"['monitor:logininfor:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.handleClean}},[e._v("清空")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:logininfor:export"],expression:"['system:logininfor:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"访问编号",align:"center",prop:"infoId"}}),a("el-table-column",{attrs:{label:"用户名称",align:"center",prop:"userName"}}),a("el-table-column",{attrs:{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"浏览器",align:"center",prop:"browser"}}),a("el-table-column",{attrs:{label:"操作系统",align:"center",prop:"os"}}),a("el-table-column",{attrs:{label:"登录状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"操作信息",align:"center",prop:"msg"}}),a("el-table-column",{attrs:{label:"登录日期",align:"center",prop:"loginTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.loginTime)))])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/monitor/logininfor/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/monitor/logininfor/"+e,method:"delete"})}function s(){return Object(o["a"])({url:"/monitor/logininfor/clean",method:"delete"})}function c(e){return Object(o["a"])({url:"/monitor/logininfor/export",method:"get",params:e,responseType:"blob"})}var u=a("c38a"),d={name:"Logininfor",components:{},data:function(){return{loading:!0,ids:[],multiple:!0,showSearch:!0,total:0,list:[],statusOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,ipaddr:void 0,userName:void 0,status:void 0},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_common_status").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.list=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.infoId})),this.multiple=!e.length},handleDelete:function(e){var t=this,a=e.infoId||this.ids;this.$confirm('是否确认删除访问编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleClean:function(){var e=this;this.$confirm("是否确认清空所有登录日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s()})).then((function(){e.getList(),e.msgSuccess("清空成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有操作日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(u["g"])(10,"导出中",e),c(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"操作日志.xls",e)})).catch((function(){}))}}},p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},6936:function(e,t,a){},"6a13":function(e,t,a){},"6b08":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"登录地址",prop:"ipaddr"}},[a("el-input",{attrs:{placeholder:"请输入登录地址",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.ipaddr,callback:function(t){e.$set(e.queryParams,"ipaddr",t)},expression:"queryParams.ipaddr"}})],1),a("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list.slice((e.pageNum-1)*e.pageSize,e.pageNum*e.pageSize)}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.pageNum-1)*e.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"部门名称",align:"center",prop:"deptName"}}),a("el-table-column",{attrs:{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"浏览器",align:"center",prop:"browser"}}),a("el-table-column",{attrs:{label:"操作系统",align:"center",prop:"os"}}),a("el-table-column",{attrs:{label:"登录时间",align:"center",prop:"loginTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.loginTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["monitor:online:forceLogout"],expression:"['monitor:online:forceLogout']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleForceLogout(t.row)}}},[e._v("强退")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.pageNum,limit:e.pageSize},on:{"update:page":function(t){e.pageNum=t},"update:limit":function(t){e.pageSize=t}}})],1)},i=[],o=a("b775");function r(e){return Object(o["a"])({url:"/monitor/online/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/monitor/online/"+e,method:"delete"})}var s={name:"Online",data:function(){return{loading:!0,total:0,list:[],pageNum:1,pageSize:10,queryParams:{ipaddr:void 0,userName:void 0}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.list=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleForceLogout:function(e){var t=this;this.$confirm('是否确认强退名称为"'+e.userName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(e.tokenId)})).then((function(){t.getList(),t.msgSuccess("强退成功")})).catch((function(){}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},"6c0c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName",t)},expression:"queryParams.sellName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:gxrz:gx"],expression:"['income:gxrz:gx']"}],attrs:{type:"primary",icon:"el-icon-check",size:"mini",disabled:0==e.ids.length||!e.statisticsFinished},on:{click:e.gxOrCxSure}},[e._v("勾选")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"cywgxMainTable",attrs:{data:e.listData,height:e.tableHeight,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"state"==t.prop?a("span",[e._v(e._s(e.stateFormat(n.row)))]):"gxzt"==t.prop?a("span",[e._v(e._s(e.gxztFormat(n.row)))]):"glzt"==t.prop?a("span",[e._v(e._s(e.glztFormat(n.row)))]):"abnormalType"==t.prop?a("span",[e._v(e._s(e.abnormalTypeFormat(n.row)))]):"gxTime"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row.gxTime)))]):"invDate"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row.invDate)))]):"operationState"==t.prop?a("span",[e._v(e._s(e.operationStateFormat(n.row)))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d81d"),a("b775"));function l(e){return Object(r["a"])({url:"/income/gxrz/listCheckedWaitGx",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/income/gxrz/submitGxData",method:"post",data:e})}function c(){return Object(r["a"])({url:"/income/gxrz/getStatisticsStatus",method:"get"})}var u=a("7b93"),d=(a("ed08"),a("c38a")),p={name:"Cywgx",components:{MyElProgress:u["a"]},data:function(){return{statisticsFinished:!1,pageSizes:[],tableHeight:null,gxMainLoading:!0,tjzt:null,skssq:null,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,rows:[],listData:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],gxztOptions:[],glztOptions:[],abnormalTypeOptions:[],operationStateOptions:[],queryParams:{pageNum:1,pageSize:500},columnsArr:[{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:0},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:3},{label:"发票类型",prop:"state",align:"center",show:!0,width:220,columnSort:5},{label:"有效税额",prop:"validTaxAmount",align:"center",show:!0,width:220,columnSort:10},{label:"不含税金额",prop:"totalWithoutAmount",align:"center",show:!0,width:220,columnSort:8},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:4},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:0},{label:"勾选状态",prop:"gxzt",align:"center",show:!0,width:220,columnSort:6},{label:"勾选时间",prop:"gxTime",align:"center",show:!0,width:220,columnSort:7},{label:"管理状态",prop:"glzt",align:"center",show:!0,width:200,columnSort:11},{label:"异常类型",prop:"abnormalType",align:"center",show:!0,width:180,columnSort:0},{label:"操作状态",prop:"operationState",align:"center",show:!0,width:180,columnSort:0},{label:"操作描述",prop:"operationMsg",align:"center",show:!0,width:180,columnSort:0}],form:{},rules:{},functionName:"勾选中",showProgress:!1,loadingTime:null,isGxOrCxAfter:!1}},created:function(){var e=this;this.getList(),c().then((function(t){e.statisticsFinished=!0,200==t.code?(e.tjzt=t.data.tjzt,e.skssq=t.data.skssq,e.gxMainLoading=!1):(e.gxMainLoading=!1,e.msgError(t.msg))})).catch((function(){e.gxMainLoading=!1})),this.getDicts("income_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("incom_gxzt").then((function(t){e.gxztOptions=t.data})),this.getDicts("gxrz_glzt").then((function(t){e.glztOptions=t.data})),this.getDicts("gxrz_yclx").then((function(t){e.abnormalTypeOptions=t.data})),this.getDicts("income_czzt").then((function(t){e.operationStateOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0,l(this.queryParams).then((function(t){e.listData=t.rows,e.total=t.total,e.loading=!1}))},cutTime:function(e){return null!=e?e.substring(0,10):""},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},gxztFormat:function(e,t){return this.selectDictLabel(this.gxztOptions,e.gxzt)},glztFormat:function(e,t){return this.selectDictLabel(this.glztOptions,e.glzt)},abnormalTypeFormat:function(e,t){return this.selectDictLabel(this.abnormalTypeOptions,e.abnormalType)},operationStateFormat:function(e,t){return this.selectDictLabel(this.operationStateOptions,e.operationState)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={sellName:void 0,invNo:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length,this.rows=e},gxOrCxSure:function(){var e=this;if("0"==this.tjzt){var t={datas:this.rows,gxzt:"1",rzms:"1",sssq:this.skssq};Object(d["g"])(200,"0"==this.queryParams.gxzt?"勾选中":"撤销中",this),s(t).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.isGxOrCxAfter=!0,e.getList()}))}else this.msgError("当前所属期已进行过统计，不允许执行勾选、撤销操作")},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.postId?updatePost(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):addPost(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有岗位数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(d["g"])(10,"导出中",e),exportPost(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.cywgxMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.listData,"cywgxMainTable")}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},"6c8a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],o=(a("ac1f"),a("5319"),{name:"ssologin",data:function(){return{loginForm:{accessToken:null,account:null}}},created:function(){this.loginForm.accessToken=encodeURIComponent(this.$route.query.accessToken),this.loginForm.account=this.$route.query.account},mounted:function(){this.ssoLogin()},methods:{ssoLogin:function(){var e=this;this.$store.dispatch("ssoLogin",this.loginForm).then((function(){e.$router.push({path:"/"})})).catch((function(){e.$router.replace({path:"/login"})}))}}}),r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,"3e57b23b",null);t["default"]=s.exports},"6d46":function(e,t,a){},"6d54":function(e,t,a){},"6d66":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"字段标签",prop:"label"}},[a("el-input",{attrs:{placeholder:"请输入字段标签",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.label,callback:function(t){e.$set(e.queryParams,"label",t)},expression:"queryParams.label"}})],1),a("el-form-item",{attrs:{label:"属性",prop:"prop"}},[a("el-input",{attrs:{placeholder:"请输入属性",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.prop,callback:function(t){e.$set(e.queryParams,"prop",t)},expression:"queryParams.prop"}})],1),a("el-form-item",{attrs:{label:"业务模块",prop:"module"}},[a("el-select",{attrs:{placeholder:"请选择业务模块",filterable:"",clearable:"",size:"small"},on:{change:e.handleQuery},model:{value:e.queryParams.module,callback:function(t){e.$set(e.queryParams,"module",t)},expression:"queryParams.module"}},e._l(e.moduleOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:tables:add"],expression:"['system:tables:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:tables:edit"],expression:"['system:tables:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:tables:remove"],expression:"['system:tables:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:tables:export"],expression:"['system:tables:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"baseTablesMainTable",attrs:{data:e.tablesList,height:e.tableHeight},on:{"row-click":e.currClickRow,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"字段标签",align:"center",prop:"label"}}),a("el-table-column",{attrs:{label:"属性",align:"center",prop:"prop"}}),a("el-table-column",{attrs:{label:"业务模块",align:"center",prop:"module",formatter:e.moduleFormat}}),a("el-table-column",{attrs:{label:"字段排序",align:"center",prop:"labelSort"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:tables:edit"],expression:"['system:tables:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:tables:remove"],expression:"['system:tables:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"业务模块"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择业务模块"},on:{change:e.moduleChange},model:{value:e.form.module,callback:function(t){e.$set(e.form,"module",t)},expression:"form.module"}},e._l(e.moduleOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"字段标签",prop:"label"}},[a("el-input",{attrs:{placeholder:"请输入字段标签"},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("el-form-item",{attrs:{label:"属性",prop:"prop"}},[a("el-input",{attrs:{placeholder:"请输入属性"},model:{value:e.form.prop,callback:function(t){e.$set(e.form,"prop",t)},expression:"form.prop"}})],1),a("el-form-item",{attrs:{label:"字段排序",prop:"labelSort"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.labelSort,callback:function(t){e.$set(e.form,"labelSort",t)},expression:"form.labelSort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("caad"),a("2532"),a("d81d"),a("4de4"),a("d3b7"),a("13d5"),a("b775"));function r(e){return Object(o["a"])({url:"/system/tables/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/tables/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/tables",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/tables",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/system/tables/remove",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/system/tables/export",method:"get",params:e,responseType:"blob"})}function p(e){return Object(o["a"])({url:"/system/tables/getModuleProp",method:"get",params:e})}var h=a("ed45"),m={name:"Tables",data:function(){var e=this,t=function(t,a,n){""===a?n(new Error("属性不能为空")):e.moduleProps.includes(a)?n(new Error("此业务模块中已有此属性，不允许重复")):n()};return{tableHeight:null,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,tablesList:[],title:"",open:!1,moduleOptions:[],dictOptions:[],queryParams:{pageNum:1,pageSize:10,label:null,prop:null,module:null,labelSort:null},form:{id:"",module:"",label:"",prop:"",labelSort:null},rules:{module:[{required:!0,message:"业务模块不能为空",trigger:"blur"}],label:[{required:!0,message:"字段标签不能为空",trigger:"blur"}],prop:[{required:!0,message:"属性不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],labelSort:[{required:!0,message:"字段排序不能为空",trigger:"blur"}]},moduleProps:[],sourceProp:""}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getDicts("module_list").then((function(t){var a;e.moduleOptions=t.data,(null===(a=e.moduleOptions)||void 0===a?void 0:a.length)>0&&(e.queryParams.module=e.moduleOptions[0].dictValue),e.getList()})),Object(h["g"])().then((function(t){e.dictOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.tablesList=t.rows,e.total=t.total,e.loading=!1}))},moduleFormat:function(e,t){return this.selectDictLabel(this.moduleOptions,e.module)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,label:null,prop:null,module:null,labelSort:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},currClickRow:function(e,t,a){this.$refs.baseTablesMainTable.toggleRowSelection(e)},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加默认列"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改默认列",t.sourceProp=e.data.prop,t.moduleChange()}))},moduleChange:function(){var e=this,t={module:this.form.module};p(t).then((function(t){200==t.code&&(e.form.id?e.moduleProps=t.data.filter((function(t){return t!=e.sourceProp})):e.moduleProps=t.data)}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a={};a=e.id?{ids:new Array(e.id),modules:new Array(e.module),props:new Array(e.prop)}:{ids:this.ids,modules:this.rows.reduce((function(e,t){return e.push(t.module),e}),[]),props:this.rows.reduce((function(e,t){return e.push(t.prop),e}),[])};var n=e.id||this.ids;this.$confirm('是否确认删除默认列编号为"'+n+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有默认列数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.currencyDownload(t,"默认列.xls",e)})).catch((function(){}))}}},f=m,b=a("2877"),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"6f35":function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"i",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"j",(function(){return p})),a.d(t,"h",(function(){return h}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/vehicle/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/vehicle/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/output/vehicle",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/output/vehicle",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/output/vehicle/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/output/vehicle/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/output/vehicle/openInvoice",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/output/vehicle/flagOpen",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/output/vehicle/validateBillEnableOpen",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/output/vehicle/saveAndOpen",method:"post",data:e})}},"6f50f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"红字发票信息选择",visible:e.redInfoShow,width:"600px","append-to-body":"",id:"redInfoModal"},on:{"update:visible":function(t){e.redInfoShow=t},close:e.redInfoDialogClose}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.redInfoForm,size:"small","label-position":"left","label-width":"85px",rules:e.rules}},[a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("开具红字增值税专用发票信息表信息选择")]),a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{on:{change:e.handleCheckedChangeApply},model:{value:e.redInfoForm.checkedApply,callback:function(t){e.$set(e.redInfoForm,"checkedApply",t)},expression:"redInfoForm.checkedApply"}},[a("el-radio",{staticClass:"public-radio",attrs:{label:"1"}},[e._v("一.购买方申请")]),a("div",{staticClass:"indent-div"},[a("el-radio-group",{on:{change:e.handleCheckedChangeBuyer},model:{value:e.redInfoForm.checkedBuyer,callback:function(t){e.$set(e.redInfoForm,"checkedBuyer",t)},expression:"redInfoForm.checkedBuyer"}},e._l(e.buyerApplyType,(function(t){return a("el-radio",{key:t.value,staticClass:"public-radio",attrs:{label:t.value,disabled:"1"!=e.redInfoForm.checkedApply}},[e._v(e._s(t.label))])})),1)],1),a("el-radio",{staticClass:"public-radio",attrs:{label:"2"}},[e._v("二.销售方申请")])],1)],1)],1),a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("对应蓝字增值税专用发票信息")]),a("div",{staticClass:"public-info-item-body"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"发票代码:",prop:"sourceInvCode"}},[a("el-input",{attrs:{maxlength:12,clearable:"",readonly:"2"==e.redInfoForm.checkedBuyer},model:{value:e.redInfoForm.sourceInvCode,callback:function(t){e.$set(e.redInfoForm,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"redInfoForm.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"发票号码:",prop:"sourceInvNo"}},[a("el-input",{attrs:{clearable:"",maxlength:8,readonly:"2"==e.redInfoForm.checkedBuyer},model:{value:e.redInfoForm.sourceInvNo,callback:function(t){e.$set(e.redInfoForm,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"redInfoForm.sourceInvNo"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"开票时间:",prop:"sourceInvDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,readonly:"2"==e.redInfoForm.checkedBuyer},model:{value:e.redInfoForm.sourceInvDate,callback:function(t){e.$set(e.redInfoForm,"sourceInvDate",t)},expression:"redInfoForm.sourceInvDate"}})],1)],1)],1)],1)],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRedInfo}},[e._v("下一步")]),a("el-button",{on:{click:function(t){e.redInfoShow=!1}}},[e._v("取 消")])],1)])},i=[],o={name:"redInvoiceInfoSelect",props:{},data:function(){return{redInfoShow:!1,buyerApplyType:[{value:"2",label:"1.已抵扣"},{value:"1",label:"2.未抵扣"}],redInfoForm:{checkedApply:"2",checkedBuyer:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:""},rules:{sourceInvCode:[{required:!1,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"}],sourceInvNo:[{required:!1,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"}],sourceInvDate:[{required:!1,message:"请选择开票时间",trigger:["change","blur"]}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},methods:{redInfoDialogShow:function(){this.redInfoShow=!0},redInfoDialogClose:function(){this.redInfoForm={checkedApply:"2",checkedBuyer:"0",sourceInvCode:"",sourceInvNo:"",sourceInvDate:""},this.rules={sourceInvCode:[{required:!1,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"}],sourceInvNo:[{required:!1,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"}],sourceInvDate:[{required:!1,message:"请选择开票时间",trigger:["change","blur"]}]}},handleCheckedChangeApply:function(e){"2"==this.redInfoForm.checkedApply?this.redInfoForm.checkedBuyer="":this.redInfoForm.checkedBuyer="2",this.validRulesChange()},handleCheckedChangeBuyer:function(e){this.validRulesChange()},validRulesChange:function(){"2"==this.redInfoForm.checkedApply||"1"==this.redInfoForm.checkedBuyer?(this.rules.sourceInvCode[0].required=!0,this.rules.sourceInvNo[0].required=!0,this.rules.sourceInvDate[0].required=!0):(this.rules.sourceInvCode[0].required=!1,this.rules.sourceInvNo[0].required=!1,this.rules.sourceInvDate[0].required=!1)},submitRedInfo:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.$emit("submitRedInfoP",e.redInfoForm),e.redInfoDialogClose(),e.redInfoShow=!1)}))},setRedInfo:function(e){this.redInfoForm=e}}},r=o,l=(a("5ffd"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},"6f72":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"导入表",visible:e.visible,width:"800px",top:"5vh","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入表名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableName,callback:function(t){e.$set(e.queryParams,"tableName",t)},expression:"queryParams.tableName"}})],1),a("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[a("el-input",{attrs:{placeholder:"请输入表描述",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableComment,callback:function(t){e.$set(e.queryParams,"tableComment",t)},expression:"queryParams.tableComment"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",[a("el-table",{ref:"table",attrs:{data:e.dbTableList,height:"260px"},on:{"row-click":e.clickRow,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"tableName",label:"表名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"tableComment",label:"表描述","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleImportTable}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)],1)},i=[],o=(a("d81d"),a("a15b"),a("4b72")),r={data:function(){return{visible:!1,tables:[],total:0,dbTableList:[],queryParams:{pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0}}},methods:{show:function(){this.getList(),this.visible=!0},clickRow:function(e){this.$refs.table.toggleRowSelection(e)},handleSelectionChange:function(e){this.tables=e.map((function(e){return e.tableName}))},getList:function(){var e=this;Object(o["e"])(this.queryParams).then((function(t){200===t.code&&(e.dbTableList=t.rows,e.total=t.total)}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleImportTable:function(){var e=this;Object(o["d"])({tables:this.tables.join(",")}).then((function(t){e.msgSuccess(t.msg),200===t.code&&(e.visible=!1,e.$emit("ok"))}))}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},7025:function(e,t,a){"use strict";a("8582")},7062:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{ref:"authenticationTabs",attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"认证统计表",name:"authStatistics"}}),a("el-tab-pane",{attrs:{label:"认证清单",name:"authDetailsList"}})],1),"authStatistics"==e.activeName?[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"税款所属期",prop:"sssq"}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择税款所属期"},on:{change:e.sssqChange},model:{value:e.queryParams.sssq,callback:function(t){e.$set(e.queryParams,"sssq",t)},expression:"queryParams.sssq"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],attrs:{type:"warning",icon:"el-icon-printer",size:"mini","income:gxrz:print":""},on:{click:e.beforePrint}},[e._v("打印")])],1)],1),a("el-table",{attrs:{data:0==e.tjxx.length?e.defaultData:e.tjxx,id:"statisticsTable"}},[a("el-table-column",{attrs:{label:"发票类型",align:"center",prop:"invoiceType"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getInvoiceTypeName(t.row.invoiceType))+" ")]}}],null,!1,2911000109)}),a("el-table-column",{attrs:{label:"抵扣",align:"center"}},[a("el-table-column",{attrs:{label:"份数",align:"center",prop:"deductibleNum"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.deductibleNum?"0":t.row.deductibleNum||"—")+" ")]}}],null,!1,924183149)}),a("el-table-column",{attrs:{label:"金额（元）",align:"right",prop:"deductibleAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.deductibleAmount?"0":t.row.deductibleAmount||"—")+" ")]}}],null,!1,2257005997)}),a("el-table-column",{attrs:{label:"有效税额（元）",align:"right",prop:"deductibleTax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.deductibleTax?"0":t.row.deductibleTax||"—")+" ")]}}],null,!1,387916525)})],1),a("el-table-column",{attrs:{label:"不抵扣",align:"center"}},[a("el-table-column",{attrs:{label:"份数",align:"center",prop:"unDeductibleNum"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.unDeductibleNum?"0":t.row.unDeductibleNum||"—")+" ")]}}],null,!1,123268589)}),a("el-table-column",{attrs:{label:"金额（元）",align:"right",prop:"unDeductibleAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.unDeductibleAmount?"0":t.row.unDeductibleAmount||"—")+" ")]}}],null,!1,2520063501)}),a("el-table-column",{attrs:{label:"税额（元）",align:"right",prop:"unDeductibleTax"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.unDeductibleTax?"0":t.row.unDeductibleTax||"—")+" ")]}}],null,!1,254964845)})],1)],1)]:[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"税款所属期",prop:"sssq"}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"选择税款所属期"},model:{value:e.queryParams.sssq,callback:function(t){e.$set(e.queryParams,"sssq",t)},expression:"queryParams.sssq"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode","string"===typeof t?t.trim():t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName","string"===typeof t?t.trim():t)},expression:"queryParams.sellName"}})],1),a("el-form-item",{attrs:{label:"用途",prop:"rzms"}},[a("el-select",{attrs:{placeholder:"请选择发票用途",clearable:"",size:"small"},model:{value:e.queryParams.rzms,callback:function(t){e.$set(e.queryParams,"rzms",t)},expression:"queryParams.rzms"}},e._l(e.rzmsOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:export"],expression:"['income:gxrz:export']"}],attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetailList}},[e._v("导出")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"detailMainTable",attrs:{data:e.gxrzList,height:e.tableHeight-56,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"invCode"==t.prop?a("span",[e._v(e._s(["08xdp","10xdp","17"].includes(n.row.invType)?"":n.row.invCode))]):"invNo"==t.prop?a("span",[e._v(e._s(["08xdp","10xdp","17"].includes(n.row.invType)?n.row.invCode+n.row.invNo:n.row.invNo))]):"gxTime"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row.gxTime)))]):"invDate"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row.invDate)))]):"rzms"==t.prop?a("span",[e._v(e._s(e.rzmsFormat(n.row)))]):"state"==t.prop?a("span",[e._v(e._s(e.stateFormat(n.row)))]):"gxzt"==t.prop?a("span",[e._v(e._s(e.gxztFormat(n.row)))]):"glzt"==t.prop?a("span",[e._v(e._s(e.glztFormat(n.row)))]):"abnormalType"==t.prop?a("span",[e._v(e._s(e.abnormalTypeFormat(n.row)))]):"operationState"==t.prop?a("span",[e._v(e._s(e.operationStateFormat(n.row)))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,type:"gx"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],e.isPrint?a("div",{attrs:{id:"print-body"}},[e._m(0),a("table",{staticClass:"print-table"},[e._m(1),a("tbody",e._l(0==e.tjxx.length?e.defaultData:e.tjxx,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(e.getInvoiceTypeName(t.invoiceType)))]),a("td",[e._v(e._s("0"==t.deductibleNum?"0":t.deductibleNum||"—"))]),a("td",[e._v(e._s("0"==t.deductibleAmount?"0":t.deductibleAmount||"—"))]),a("td",[e._v(e._s("0"==t.deductibleTax?"0":t.deductibleTax||"—"))]),a("td",[e._v(e._s("0"==t.unDeductibleNum?"0":t.unDeductibleNum||"—"))]),a("td",[e._v(e._s("0"==t.unDeductibleAmount?"0":t.unDeductibleAmount||"—"))]),a("td",[e._v(e._s("0"==t.unDeductibleTax?"0":t.unDeductibleTax||"—"))])])})),0)])]):e._e(),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],2)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("h3",{staticStyle:{margin:"0px",padding:"18px"}},[e._v("认证统计表")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[e._v("发票类型")]),a("th",{attrs:{colspan:"3"}},[e._v("抵扣")]),a("th",{attrs:{colspan:"3"}},[e._v("不抵扣")])]),a("tr",[a("th",[e._v("份数")]),a("th",[e._v("金额（元）")]),a("th",[e._v("有效税额（元）")]),a("th",[e._v("份数")]),a("th",[e._v("金额（元）")]),a("th",[e._v("有效税额（元）")])])])}],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("b680"),a("45c6")),l=a("b775");function s(e){return Object(l["a"])({url:"/income/gxrz/statisticsHistory",method:"get",params:e})}function c(e){return Object(l["a"])({url:"/income/gxrz/authDetailsListExport",method:"post",data:e})}var u=a("b526"),d=a("ed08"),p=a("c38a"),h={name:"authentication",components:{TotalRowTable:u["default"]},data:function(){return{pageSizes:[],tableHeight:null,loading:!1,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,gxrzList:[],title:"",open:!1,invTypeOptions:[],rzmsOptions:[],stateOptions:[],gxztOptions:[],glztOptions:[],abnormalTypeOptions:[],operationStateOptions:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,buyTaxNo:null,buyName:null,sellTaxNo:null,sellName:null,invType:null,state:null,gxzt:"",gxTime:null,totalWithoutAmount:null,taxAmount:null,validTaxAmount:null,sssq:null,glzt:null,abnormalType:null,operationState:null,operationMsg:null,deptId:null,gxMode:null,cxMode:null,rzms:null},form:{},rules:{},gxModeOptions:[],cxModeOptions:[],functionName:"",showProgress:!1,loadingTime:null,tjxx:[],defaultData:[{invoiceType:"01",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"03",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"08",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"14",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"17",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"24",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"30",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""},{invoiceType:"99",deductibleNum:"",deductibleAmount:"",deductibleTax:"",unDeductibleNum:"",unDeductibleAmount:"",unDeductibleTax:""}],activeName:"authStatistics",printObj:{id:"print-body",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},isPrint:!1,columnsArr:[{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:0},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:180,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:1},{label:"发票状态",prop:"state",align:"center",show:!0,width:180,columnSort:5},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:180,columnSort:3},{label:"有效税额",prop:"validTaxAmount",align:"center",show:!0,width:180,columnSort:10},{label:"税额",prop:"taxAmount",align:"center",show:!0,width:180,columnSort:9},{label:"不含税金额",prop:"totalWithoutAmount",align:"center",show:!0,width:180,columnSort:8},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:180,columnSort:4},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:180,columnSort:0},{label:"勾选状态",prop:"gxzt",align:"center",show:!0,width:180,columnSort:6},{label:"勾选时间",prop:"gxTime",align:"center",show:!0,columnSort:7}],sortParam:{column:"",columnOrder:""}}},computed:{totalTableData:function(){var e=Object(d["e"])(this.rows);return 0==e.length&&(e=[]),e}},created:function(){var e=this;this.getDicts("income_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("incom_gxzt").then((function(t){e.gxztOptions=t.data})),this.getDicts("gxrz_glzt").then((function(t){e.glztOptions=t.data})),this.getDicts("gxrz_yclx").then((function(t){e.abnormalTypeOptions=t.data})),this.getDicts("income_czzt").then((function(t){e.operationStateOptions=t.data})),this.getDicts("gxrz_rzms").then((function(t){e.rzmsOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},rzmsFormat:function(e,t){return this.selectDictLabel(this.rzmsOptions,e.rzms)},cutTime:function(e){return null!=e?e.substring(0,10):""},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},gxztFormat:function(e,t){return this.selectDictLabel(this.gxztOptions,e.gxzt)},glztFormat:function(e,t){return this.selectDictLabel(this.glztOptions,e.glzt)},abnormalTypeFormat:function(e,t){return this.selectDictLabel(this.abnormalTypeOptions,e.abnormalType)},operationStateFormat:function(e,t){return this.selectDictLabel(this.operationStateOptions,e.operationState)},handleTabClick:function(){var e=this;this.resetForm("queryForm"),this.$nextTick((function(){e.tableHeight=e.calcTableHeight()}))},getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(d["e"])(this.queryParams),Object(d["e"])(this.sortParam));t.gxzt="1",Object(r["g"])(t).then((function(t){e.gxrzList=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},beforePrint:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},handleExportStatistics:function(){},handleExportDetailList:function(){var e=this,t=Object.assign(Object(d["e"])(this.queryParams),Object(d["e"])(this.sortParam));t.gxzt="1",t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(p["g"])(10,"导出中",e,!1),c(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.detailMainTable.toggleRowSelection(i)},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},sssqChange:function(){var e=this,t={ssyf:this.queryParams.sssq};Object(p["g"])(100,"统计中",this,!1),s(t).then((function(t){if(e.showProgress=!1,clearInterval(e.loadingTime),200==t.code){e.msgSuccess(t.msg);for(var a=t.data.dk,n=t.data.bdk,i=Object(d["e"])(e.defaultData),o=0,r=a.length;o<r;o++)for(var l=a[o],s=0,c=i.length;s<c;s++)if(l["invoiceType"]==i[s]["invoiceType"]){for(var u in l)i[s][u]=l[u];break}for(var h=0,m=n.length;h<m;h++)for(var f=n[h],b=0,g=i.length;b<g;b++)if(f["invoiceType"]==i[b]["invoiceType"]){for(var v in f)i[b][v]=f[v];break}for(var y=0,_=i.length;y<_;y++){var x=i[y];"99"==x["invoiceType"]&&(i[y]["deductibleNum"]=Object(p["j"])(i,"deductibleNum").toFixed(2),i[y]["deductibleAmount"]=Object(p["j"])(i,"deductibleAmount").toFixed(2),i[y]["deductibleTax"]=Object(p["j"])(i,"deductibleTax").toFixed(2),i[y]["unDeductibleNum"]=Object(p["j"])(i,"unDeductibleNum").toFixed(2),i[y]["unDeductibleAmount"]=Object(p["j"])(i,"unDeductibleAmount").toFixed(2),i[y]["unDeductibleTax"]=Object(p["j"])(i,"unDeductibleTax").toFixed(2))}e.tjxx=i}else e.msgError(t.msg)})).then((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))},getInvoiceTypeName:function(e){switch(e){case"01":return"增值税专用发票";case"08xdp":return"数电专票";case"08xdpzz":return"数电专票（纸质）";case"03":return"机动车销售统一发票";case"08":return"增值税电子专用发票";case"14":return"通行费电子发票";case"17":return"海关缴款书";case"24":return"出口转内销发票";case"30":return"出口转内销海关缴纳书";case"66":return"增值税专用发票（代办退税专用）";case"67":return"增值税电子专用发票（代办退税专用）";case"80":return"出口转内销电子专用发票";default:return"总计"}}}},m=h,f=(a("2f0e"),a("2877")),b=Object(f["a"])(m,n,i,!1,null,"7dc81ffa",null);t["default"]=b.exports},"70eb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入角色名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.roleName,callback:function(t){e.$set(e.queryParams,"roleName",t)},expression:"queryParams.roleName"}})],1),a("el-form-item",{attrs:{label:"权限字符",prop:"roleKey"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入权限字符",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.roleKey,callback:function(t){e.$set(e.queryParams,"roleKey",t)},expression:"queryParams.roleKey"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"角色状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:add"],expression:"['system:role:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:edit"],expression:"['system:role:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:synch"],expression:"['system:role:synch']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.synch}},[e._v("同步给下级")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:remove"],expression:"['system:role:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:export"],expression:"['system:role:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.roleList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName","show-overflow-tooltip":!0,width:"150"}}),a("el-table-column",{attrs:{label:"权限字符",prop:"roleKey","show-overflow-tooltip":!0,width:"150"}}),a("el-table-column",{attrs:{label:"显示顺序",prop:"roleSort",width:"100"}}),a("el-table-column",{attrs:{label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:edit"],expression:"['system:role:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:remove"],expression:"['system:role:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),a("el-form-item",{attrs:{label:"权限字符",prop:"roleKey"}},[a("el-input",{attrs:{placeholder:"请输入权限字符"},model:{value:e.form.roleKey,callback:function(t){e.$set(e.form,"roleKey",t)},expression:"form.roleKey"}})],1),a("el-form-item",{attrs:{label:"角色顺序",prop:"roleSort"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.roleSort,callback:function(t){e.$set(e.form,"roleSort",t)},expression:"form.roleSort"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1),a("el-form-item",{attrs:{label:"菜单权限"}},[a("el-tree",{ref:"menu",attrs:{data:e.menuOptions,"show-checkbox":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.openDataScope,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.openDataScope=t}}},[a("el-form",{attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),a("el-form-item",{attrs:{label:"权限字符"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.roleKey,callback:function(t){e.$set(e.form,"roleKey",t)},expression:"form.roleKey"}})],1),a("el-form-item",{attrs:{label:"权限范围"}},[a("el-select",{model:{value:e.form.dataScope,callback:function(t){e.$set(e.form,"dataScope",t)},expression:"form.dataScope"}},e._l(e.dataScopeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.form.dataScope,expression:"form.dataScope == 2"}],attrs:{label:"数据权限"}},[a("el-tree",{ref:"dept",attrs:{data:e.deptOptions,"show-checkbox":"","default-expand-all":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDataScope}},[e._v("确 定")]),a("el-button",{on:{click:e.cancelDataScope}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/system/role/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/role/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/role",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/role",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/system/role/synchToRole",method:"get",params:{roleId:e}})}function d(e){return Object(o["a"])({url:"/system/role/dataScope",method:"put",data:e})}function p(e,t){var a={roleId:e,status:t};return Object(o["a"])({url:"/system/role/changeStatus",method:"put",data:a})}function h(e){return Object(o["a"])({url:"/system/role/"+e,method:"delete"})}function m(e){return Object(o["a"])({url:"/system/role/export",method:"get",params:e,responseType:"blob"})}var f=a("a6dc"),b=a("fcb7"),g=a("c38a"),v={name:"Role",components:{},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,roleList:[],title:"",open:!1,openDataScope:!1,dateRange:[],statusOptions:[],dataScopeOptions:[{value:"1",label:"全部数据权限"},{value:"2",label:"自定数据权限"},{value:"3",label:"本部门数据权限"},{value:"4",label:"本部门及以下数据权限"},{value:"5",label:"仅本人数据权限"}],menuOptions:[],deptOptions:[],queryParams:{pageNum:1,pageSize:10,roleName:void 0,roleKey:void 0,status:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{roleName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],roleKey:[{required:!0,message:"权限字符不能为空",trigger:"blur"}],roleSort:[{required:!0,message:"角色顺序不能为空",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.roleList=t.rows,e.total=t.total,e.loading=!1}))},getMenuTreeselect:function(){var e=this;Object(f["g"])().then((function(t){e.menuOptions=t.data}))},getDeptTreeselect:function(){var e=this;Object(b["j"])().then((function(t){e.deptOptions=t.data}))},getMenuAllCheckedKeys:function(){var e=this.$refs.menu.getHalfCheckedKeys(),t=this.$refs.menu.getCheckedKeys();return e.unshift.apply(e,t),e},getDeptAllCheckedKeys:function(){var e=this.$refs.dept.getHalfCheckedKeys(),t=this.$refs.dept.getCheckedKeys();return e.unshift.apply(e,t),e},getRoleMenuTreeselect:function(e){var t=this;return Object(f["f"])(e).then((function(e){return t.menuOptions=e.menus,e}))},getRoleDeptTreeselect:function(e){var t=this;return Object(b["i"])(e).then((function(e){return t.deptOptions=e.depts,e}))},handleStatusChange:function(e){var t=this,a="1"===e.status?"启用":"停用";this.$confirm('确认要"'+a+'""'+e.roleName+'"角色吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(e.roleId,e.status)})).then((function(){t.msgSuccess(a+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},cancel:function(){this.open=!1,this.reset()},cancelDataScope:function(){this.openDataScope=!1,this.reset()},reset:function(){void 0!=this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),this.form={roleId:void 0,roleName:void 0,roleKey:void 0,roleSort:0,status:"1",menuIds:[],deptIds:[],remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.roleId})),this.single=1!=e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.getMenuTreeselect(),this.open=!0,this.title="添加角色"},handleUpdate:function(e){var t=this;this.reset();var a=e.roleId||this.ids,n=this.getRoleMenuTreeselect(a);l(a).then((function(e){t.form=e.data,t.open=!0,t.$nextTick((function(){n.then((function(e){t.$refs.menu.setCheckedKeys(e.checkedKeys)}))})),t.title="修改角色"}))},synch:function(e){var t=this;this.reset();var a=e.roleId||this.ids;this.$confirm("是否确认同步角色给所有下级?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a[0])})).then((function(){t.getList(),t.msgSuccess("同步成功")})).catch((function(){}))},handleDataScope:function(e){var t=this;this.reset();var a=this.getRoleDeptTreeselect(e.roleId);l(e.roleId).then((function(e){t.form=e.data,t.openDataScope=!0,t.$nextTick((function(){a.then((function(e){t.$refs.dept.setCheckedKeys(e.checkedKeys)}))})),t.title="分配数据权限"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.roleId?(e.form.menuIds=e.getMenuAllCheckedKeys(),c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())}))):(e.form.menuIds=e.getMenuAllCheckedKeys(),s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))))}))},submitDataScope:function(){var e=this;void 0!=this.form.roleId&&(this.form.deptIds=this.getDeptAllCheckedKeys(),d(this.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.openDataScope=!1,e.getList())})))},handleDelete:function(e){var t=this,a=e.roleId||this.ids;this.$confirm("是否确认删除选中角色数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return h(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有角色数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(g["g"])(10,"导出中",e),m(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"角色数据.xls",e)})).catch((function(){}))}}},y=v,_=a("2877"),x=Object(_["a"])(y,n,i,!1,null,null,null);t["default"]=x.exports},"71b1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container",attrs:{"element-loading-text":e.routeLoadingText}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"接口账号",prop:"appKey"}},[a("el-input",{attrs:{placeholder:"请输入接口账号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.appKey,callback:function(t){e.$set(e.queryParams,"appKey",t)},expression:"queryParams.appKey"}})],1),a("el-form-item",{attrs:{label:"公司名称",prop:"userComName"}},[a("el-input",{attrs:{placeholder:"请输入公司名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userComName,callback:function(t){e.$set(e.queryParams,"userComName",t)},expression:"queryParams.userComName"}})],1),a("el-form-item",{attrs:{label:"接口类型",prop:"invInterfaceType"}},[a("el-select",{attrs:{placeholder:"请选择接口类型",clearable:"",size:"small"},model:{value:e.queryParams.invInterfaceType,callback:function(t){e.$set(e.queryParams,"invInterfaceType",t)},expression:"queryParams.invInterfaceType"}},e._l(e.invInterfaceTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单次充值的次数",prop:"rechargeNum"}},[a("el-input",{attrs:{placeholder:"请输入单次充值的次数",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.rechargeNum,callback:function(t){e.$set(e.queryParams,"rechargeNum",t)},expression:"queryParams.rechargeNum"}})],1),a("el-form-item",{attrs:{label:"单次充值的金额",prop:"rechargeMoney"}},[a("el-input",{attrs:{placeholder:"请输入单次充值的金额",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.rechargeMoney,callback:function(t){e.$set(e.queryParams,"rechargeMoney",t)},expression:"queryParams.rechargeMoney"}})],1),a("el-form-item",{attrs:{label:"充值后的总购买量",prop:"totalNum"}},[a("el-input",{attrs:{placeholder:"请输入充值后的总购买量",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.totalNum,callback:function(t){e.$set(e.queryParams,"totalNum",t)},expression:"queryParams.totalNum"}})],1),a("el-form-item",{attrs:{label:"总充值金额",prop:"amount"}},[a("el-input",{attrs:{placeholder:"请输入总充值金额",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.amount,callback:function(t){e.$set(e.queryParams,"amount",t)},expression:"queryParams.amount"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"bz"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bz,callback:function(t){e.$set(e.queryParams,"bz",t)},expression:"queryParams.bz"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:recharge:add"],expression:"['system:recharge:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleSync}},[e._v("同步")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:recharge:export"],expression:"['system:recharge:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"rechargeMainTable",attrs:{data:e.rechargeList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invInterfaceType"==t.prop?a("span",[e._v(" "+e._s(e.invInterfaceTypeFormat(n.row))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("b775"));function l(e){return Object(r["a"])({url:"/system/recharge/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/system/recharge/export",method:"post",data:e})}function c(){return Object(r["a"])({url:"/system/recharge/refreshRecord",method:"post"})}var u=a("ed08"),d=(a("c38a"),{name:"Recharge",components:{},data:function(){return{routeLoading:!1,routeLoadingText:"",functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,rechargeList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,appKey:null,userComName:null,invInterfaceType:null,rechargeNum:null,rechargeMoney:null,totalNum:null,amount:null,bz:null},invInterfaceTypeOptions:[],form:{},rules:{},columnsArr:[{label:"接口账号",prop:"appKey",align:"center",show:!0,width:"",columnSort:20},{label:"公司名称",prop:"userComName",align:"center",show:!0,width:"",columnSort:0},{label:"接口类型",prop:"invInterfaceType",align:"center",show:!0,width:"",columnSort:1},{label:"单次充值的次数",prop:"rechargeNum",align:"center",show:!0,width:"",columnSort:2},{label:"单次充值的金额",prop:"rechargeMoney",align:"center",show:!0,width:"",columnSort:20},{label:"充值后的总购买量",prop:"totalNum",align:"center",show:!0,width:"",columnSort:0},{label:"总充值金额",prop:"amount",align:"center",show:!0,width:"",columnSort:1},{label:"备注",prop:"bz",align:"center",show:!0,width:"",columnSort:2}],sortParam:{column:"",columnOrder:""}}},created:function(){var e=this;this.getList(),this.getDicts("inv_interface_type").then((function(t){e.invInterfaceTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(u["e"])(this.queryParams),Object(u["e"])(this.sortParam));l(t).then((function(t){e.rechargeList=t.rows,e.total=t.total,e.loading=!1}))},invInterfaceTypeFormat:function(e,t){return this.selectDictLabel(this.invInterfaceTypeOptions,e.invInterfaceType)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(u["e"])(e)},handleExport:function(){var e=this,t=Object(u["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出所有系统接口充值记录数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},handleSync:function(){var e=this;this.routeLoading=!0,this.routeLoadingText="同步中",c().then((function(t){e.routeLoading=!1,200==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)})).catch((function(){e.routeLoading=!1}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.rechargeMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.rechargeList,"rechargeMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}}),p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},"720f":function(e,t,a){},"722a":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"l",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"k",(function(){return p})),a.d(t,"e",(function(){return h})),a.d(t,"d",(function(){return m}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/redbill/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/redbill",method:"post",data:e})}function r(e){var t={ids:e};return Object(n["a"])({url:"/output/redbill/remove",method:"post",data:t})}function l(e){return Object(n["a"])({url:"/output/redbill/"+e,method:"get"})}function s(e){return Object(n["a"])({url:"/output/redbill/getRedBill",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/output/redbill/upload/"+e,method:"get"})}function u(e){var t={id:e};return Object(n["a"])({url:"/output/redbill/transfToBill",method:"post",params:t})}function d(e){return Object(n["a"])({url:"/output/redbill/cancel/"+e,method:"get"})}function p(e){return Object(n["a"])({url:"/output/redbill",method:"put",data:e})}function h(e){return Object(n["a"])({url:"/output/redbill/export",method:"post",data:e,responseType:"blob"})}function m(e){return Object(n["a"])({url:"/output/redbill/downLoadRedBill",method:"post",params:e})}},"747b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.invoiceEnter?"红字申请单申请":e.title,visible:e.open,width:"1100px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.applyBill}},[e._v("保存")]),e.invoiceEnter?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBillDetailRow}},[e._v("增行")]),e.invoiceEnter?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),e.invoiceEnter?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"填开日期"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,readonly:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请经办人"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,readonly:""},model:{value:e.form.applyPerson,callback:function(t){e.$set(e.form,"applyPerson",t)},expression:"form.applyPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"No"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,readonly:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer},on:{select:e.handleSelectBuyer},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno},on:{select:e.handleSelectBuyer},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel","string"===typeof t?t.trim():t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入开户行及账号",maxlength:100,clearable:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount","string"===typeof t?t.trim():t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType =='52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入购方邮箱",maxlength:100,clearable:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51'|| this.form.invType =='52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入购方手机",maxlength:11,clearable:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称","min-width":120,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,445657953)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,1094475867)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"1"==t.row.discountFlag||"2"==t.row.discountFlag,size:"small"},on:{change:function(a){return e.taxAmountChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入销方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer},on:{select:e.handleSelectSeller},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入销方税号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno},on:{select:e.handleSelectSeller},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-info-item-special"},[a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedApply,callback:function(t){e.$set(e.redSelectInfo,"checkedApply",t)},expression:"redSelectInfo.checkedApply"}},[a("el-radio",{staticClass:"public-radio",attrs:{label:"1",disabled:""}},[e._v("一.购买方申请")]),a("div",{staticClass:"indent-div"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedBuyer,callback:function(t){e.$set(e.redSelectInfo,"checkedBuyer",t)},expression:"redSelectInfo.checkedBuyer"}},e._l(e.buyerApplyType,(function(t){return a("el-radio",{key:t.value,staticClass:"public-radio",attrs:{label:t.value,disabled:""}},[e._v(e._s(t.label))])})),1)],1),a("el-radio",{staticClass:"public-radio",attrs:{label:"2",disabled:""}},[e._v("二.销售方申请")])],1)],1)])]),a("el-col",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","padding-left":"10px"},attrs:{span:16}},[a("div",{staticClass:"item-title"},[a("label",[e._v("对应蓝字专用发票密码区内打印的信息:")])]),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:12,readonly:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:8,readonly:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1),a("el-form-item",{attrs:{label:"发票种类"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small"},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(t){return"0"==t.dictValue||"52"==t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),"1"!=e.redSelectInfo.checkedBuyer?a("el-form-item",{attrs:{label:"开票时间"}},[a("el-date-picker",{staticStyle:{width:"92%"},attrs:{placeholder:"","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.form.openDate,callback:function(t){e.$set(e.form,"openDate",t)},expression:"form.openDate"}})],1):e._e()],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discoutLine,callback:function(t){e.$set(e.discountForm,"discoutLine",t)},expression:"discountForm.discoutLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("25f0"),a("caad"),a("b0c0"),a("4de4"),a("ac1f"),a("5319"),a("b680"),a("13d5"),a("a434"),a("c85c")),l=a("722a"),s=a("c0c7"),c=a("c394"),u=a("b9aa"),d=a("ad11"),p=a("ed08"),h=a("c38a"),m={name:"redInvoiceEditModal",components:{ChooseCode:u["default"]},props:{},data:function(){return{selfAdaptionWidth:null,form:{createTime:"",applyPerson:"",billNo:"",invType:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",applyType:"0",sourceInvCode:"",sourceInvNo:"",openDate:""},invTypeOptions:[],hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"添加单据管理",isAdd:!0,taxCodeSignRow:0,invoiceTypeOptions:[],flagOptions:[],billDetailModalData:{billTitle:"",billNo:"",billType:"2",taxPlateIdSelect:"",billCode:"",billInvNo:"",billDate:"",billCheckCode:"",billBuyName:"",billBuyTaxNo:"",billBuyAddrTel:"",billBuyBankAccount:"",billSellName:"",snsrsbh:"",sdzdh:"",syhzh:"",billNote:"",detailDate:[{trChecked:!1,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],billTotalMoney:0,billTotalTaxMoney:0,billTotalMoneyWithTax:0,billTotalMoneyWithTaxUpperCase:"",skr:"",checker:"",kpr:""},taxRateOptions:[],redInvoiceFlag:!1,buyerSearchData:[],goodsNameSearchData:[],goodsNameInputData:"",rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:["blur","change"]},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:["blur","change"]}],sellName:[{required:!0,message:"销方名称不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},discountOpen:!1,discountForm:{discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},buyerApplyType:[{value:"2",label:"1.已抵扣"},{value:"1",label:"2.未抵扣"}],redSelectInfo:{checkedApply:"2",checkedBuyer:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:"",invType:"0"},invoiceEnter:!1}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data,e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType)}))},mounted:function(){},methods:{billDialogShow:function(e){this.open=!0,this.redSelectInfo=e,this.form.sourceInvNo=e.sourceInvNo,this.form.sourceInvCode=e.sourceInvCode,this.form.openDate=e.sourceInvDate,"2"==e.checkedApply?(this.form.applyType="0",this.getNeedRedInvoice(e)):this.form.applyType=e.checkedBuyer},getNeedRedInvoice:function(e){var t=this,a={invCode:e.sourceInvCode,invNo:e.sourceInvNo,invDate:e.sourceInvDate,invCodeNo:e.sourceInvCode+"_"+e.sourceInvNo};Object(c["s"])(a).then((function(a){if(200==a.code){var n=a.data;for(var i in t.form)t.form[i]=n[i];t.form.invDate=e.sourceInvDate,t.form.openDate=e.sourceInvDate,t.form.applyType="0",t.billDetailsData=n.details;for(var o=0;o<t.billDetailsData.length;o++)t.billDetailsData[o].rate=t.billDetailsData[o].rate.toString();["51","52"].includes(n.invType)?(t.rules.buyEmail=[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],t.rules.buyTelNo=[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]):(t.rules.buyEmail=[],t.rules.buyTelNo=[]),t.getBillNo()}else t.msgError(a.msg)}))},editDialogTitle:function(e){"1"==e?(this.getSubjectInfo(),this.getTaxNoSeller(),this.title="开具红字发票信息表"):this.title="修改单据管理"},getSubjectInfo:function(){var e=this;Object(r["l"])().then((function(t){"1"==e.redSelectInfo.checkedApply?(e.form.buyTaxNo=t.data.nsrsbh,e.form.buyName=t.data.nsrmc):(e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc)}))},getTaxNoSeller:function(){var e=this;Object(r["m"])().then((function(t){var a=t.sellers;if(null!=a&&0!=a.length){for(var n,i=0;i<a.length;i++)if("1"==a[i].status){n=a[i];break}null==n&&(n=a[0]),e.form.cashier=n.payee,e.form.checker=n.checker,e.form.invoicer=n.drawer,"1"==e.redSelectInfo.checkedApply?(e.form.buyAddrTel=n.bankAddrTel,e.form.buyBankAccount=n.bankAccount):(e.form.sellAddrTel=n.bankAddrTel,e.form.sellBankAccount=n.bankAccount)}}))},billDialogClose:function(){var e=this;this.form={openDate:"",applyPerson:"",billNo:"",invType:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",applyType:"",sourceInvCode:"",sourceInvNo:""},this.hsbz="0",this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],this.$nextTick((function(){e.$refs.form.clearValidate()}))},fillBillDialog:function(e){var t=this;return Object(l["g"])(e.id).then((function(e){var a=e.data;t.form=e.data,"0"==a.applyType||null==a.applyType||void 0==a.applyType?t.redSelectInfo.checkedApply="2":(t.redSelectInfo.checkedApply="1",t.redSelectInfo.checkedBuyer=a.applyType);var n=a.details;t.billDetailsData.length=0;for(var i=0,o=0;o<n.length;o++){var r=n[o];r.index=o,r.rate=null!=r.rate||void 0!=r.rate?t.specialRateFormalEcho(r):"",t.billDetailsData.push(r),null!=r.goodsName&&r.goodsName.length>n[i].goodsName.length&&(i=o)}t.goodsNameChange(i),t.open=!0,t.title="修改单据管理",t.isAdd=!1}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(d["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){var e=this;this.form.createTime=this.$moment(new Date).format("yyyy-MM-DD HH:mm:ss"),this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),Object(s["h"])().then((function(t){var a=t.data.user;e.form.applyPerson=a.nickName})),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(d["a"])(n).then((function(e){for(var n=0;n<e.rows.length;n++)e.rows[n].value=e.rows[n].name;a.buyerSearchData=e.rows;var i=a.buyerSearchData;t(i)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(d["a"])(n).then((function(e){for(var n=0;n<e.rows.length;n++)e.rows[n].value=e.rows[n].taxNo;a.buyerSearchData=e.rows;var i=a.buyerSearchData;t(i)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount},handleSelectSeller:function(e){this.form.sellTaxNo=e.taxNo,this.form.sellName=e.name,this.form.sellAddrTel=e.addrTel,this.form.sellBankAccount=e.bankAccount},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(h["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].units=e.units,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},applyBill:function(){var e=this;console.log(this.form),this.$refs["form"].validate((function(t){t&&(e.form.details=e.billDetailsData,e.isAdd?Object(l["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.invoiceEnter?e.$confirm("申请成功,是否需要跳转到红字页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/output/redinvoice")})).catch((function(){e.$emit("updateInvoiceTable")})):e.$emit("updateInvoiceTable"))})):Object(l["k"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.$emit("updateInvoiceTable"))})),console.log(e.form))}))},addBillDetailRow:function(){if(this.billDetailsData.length>=8)this.msgError("已达到发票能开具的最大商品行明细数");else if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n}}else this.msgError("明细行不可为空")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){if(parseFloat(this.billDetailsData[e].number)>=0)return this.msgError("红字发票的商品数量不能为正数"),void(this.billDetailsData[e].number="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)}}else if(""!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if("-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&(""!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=i&&(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&(""!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=o&&(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if(parseFloat(this.billDetailsData[e].amountWithTax)>=0)return this.billDetailsData[e].amountWithTax="",void this.msgError("红字发票中商品金额不能大于0");if(parseFloat(this.billDetailsData[e].amountWithoutTax)>=0)return this.billDetailsData[e].amountWithoutTax="",void this.msgError("红字发票中商品金额不能大于0");var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8)}this.judgeExistPNLine(e),this.useCalc()},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):""):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"")),this.useCalc()},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=!1,a=0;a<this.billDetailsData.length;a++)if(parseFloat(this.billDetailsData[a].amountWithTax)*parseFloat(this.billDetailsData[e].amountWithTax)<0){t=!0;break}t&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行"))},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discoutLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(p["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.discountFlag="1",a.standard="",a.units="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1}else this.msgError("请输入折扣金额或折扣率")},sourceChange:function(){var e=this;if(""!=this.form.sourceInvNo&&""!=this.form.sourceInvCode){var t={sourceInvNo:this.form.sourceInvNo,sourceInvCode:this.form.sourceInvCode};gteXXXInfo(t).then((function(t){0!=t.data.length||e.msgError(t.msg)}))}},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){this.deductOpen=!1},validIsNumber:function(e){e.target.value=this.plusOrMinus(e.target.value)},invoiceApplicationForm:function(){this.invoiceEnter=!0},goodsNameChange:function(e){var t=this.billDetailsData[e].goodsName;this.selfAdaptionWidth=Object(h["c"])("",t)}}},f=m,b=(a("6092"),a("2877")),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"74ae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"稽查结果",prop:"ruleStatus"}},[a("el-select",{attrs:{placeholder:"请选择票控规则稽查结果",clearable:"",size:"small"},model:{value:e.queryParams.ruleStatus,callback:function(t){e.$set(e.queryParams,"ruleStatus",t)},expression:"queryParams.ruleStatus"}},[a("el-option",{attrs:{label:"正常",value:0}}),a("el-option",{attrs:{label:"异常",value:1}})],1)],1),a("el-form-item",{attrs:{label:"票据类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择票据类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"票据号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入票据号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"票据日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"数据来源",prop:"dataSource"}},[a("el-select",{attrs:{placeholder:"请选择数据来源",clearable:"",size:"small"},model:{value:e.queryParams.dataSource,callback:function(t){e.$set(e.queryParams,"dataSource",t)},expression:"queryParams.dataSource"}},e._l(e.dataSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"录入人",prop:"createByUserName"}},[a("el-input",{attrs:{placeholder:"请输入录入人",clearable:"",size:"small"},model:{value:e.queryParams.createByUserName,callback:function(t){e.$set(e.queryParams,"createByUserName",t)},expression:"queryParams.createByUserName"}})],1),a("el-form-item",{attrs:{label:"流程单号",prop:"reimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入流程单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reimBillNo,callback:function(t){e.$set(e.queryParams,"reimBillNo",t)},expression:"queryParams.reimBillNo"}})],1),a("el-form-item",{attrs:{label:"BPM报销单号",prop:"bpmBillNo"}},[a("el-input",{attrs:{placeholder:"请输入BPM报销单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bpmBillNo,callback:function(t){e.$set(e.queryParams,"bpmBillNo",t)},expression:"queryParams.bpmBillNo"}})],1),a("el-form-item",{attrs:{label:"AP单号",prop:"apBillNo"}},[a("el-input",{attrs:{placeholder:"请输入AP单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.apBillNo,callback:function(t){e.$set(e.queryParams,"apBillNo",t)},expression:"queryParams.apBillNo"}})],1),a("el-form-item",{attrs:{label:"结算单号",prop:"settlementNo"}},[a("el-input",{attrs:{placeholder:"请输入结算单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.settlementNo,callback:function(t){e.$set(e.queryParams,"settlementNo",t)},expression:"queryParams.settlementNo"}})],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证制单人",prop:"voucherMaker"}},[a("el-input",{attrs:{placeholder:"请输入凭证制单人",clearable:"",size:"small"},model:{value:e.queryParams.voucherMaker,callback:function(t){e.$set(e.queryParams,"voucherMaker",t)},expression:"queryParams.voucherMaker"}})],1),a("el-form-item",{attrs:{label:"凭证编码",prop:"voucherCode"}},[a("el-input",{attrs:{placeholder:"请输入凭证编码",clearable:"",size:"small"},model:{value:e.queryParams.voucherCode,callback:function(t){e.$set(e.queryParams,"voucherCode",t)},expression:"queryParams.voucherCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:add"],expression:"['income:other:add']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("新增")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:hand"],expression:"['income:other:hand']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleManual(t)}}},[e._v("手工录入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:ocr"],expression:"['income:other:ocr']"}],attrs:{icon:"el-icon-picture-outline"},nativeOn:{click:function(t){return e.handleImage(t)}}},[e._v("图片识别")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:smy"],expression:"['income:zzsinvoice:smy']"}],attrs:{icon:"el-icon-full-screen"},nativeOn:{click:function(t){return e.handleScanner(t)}}},[e._v("扫描仪录入")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:edit"],expression:"['income:other:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:remove"],expression:"['income:other:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:export"],expression:"['income:other:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-rank",size:"mini"},on:{click:e.handleMove}},[e._v("迁移")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"otherMainTable",attrs:{data:e.otherList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"uploadTime"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.uploadTime,"{y}-{m}-{d}"))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):e.dataJsonFieldArr.includes(t.prop)?a("span",[e._v(" "+e._s(e.dataJsonFieldFormat(n.row,t.prop))+" ")]):"ruleStatus"==t.prop?a("span",[e._v(" 异常 ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"稽查结果",align:"center",width:"100",prop:"ruleStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.ruleStatus?a("span",[e._v("正常")]):"1"==t.row.ruleStatus?a("span",[e._v("异常")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"稽查描述",align:"center",width:"100",prop:"ruleDes"}}),a("u-table-column",{attrs:{label:"报销状态",align:"center",width:"100",prop:"reimStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.reimStatus?a("span",[e._v("未报销")]):"1"==t.row.reimStatus?a("span",[e._v("全额报销")]):"2"==t.row.reimStatus?a("span",[e._v("部分报销")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"可用报销金额",align:"center",width:"100",prop:"usableReimAmount"}}),a("u-table-column",{attrs:{label:"流程单号",align:"center",width:"100",prop:"reimBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"BPM报销单号",align:"center",width:"100",prop:"bpmBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"AP单号",align:"center",width:"100",prop:"apBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"结算单号",align:"center",width:"100",prop:"settlementNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证号",align:"center",width:"100",prop:"voucherNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证制单人",align:"center",width:"100",prop:"voucherMaker","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证编码",align:"center",width:"100",prop:"voucherCode","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:other:edit"],expression:"['income:other:edit']"}],staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"510px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:e.manualDialogClose}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"票据类型"}},[a("el-select",{attrs:{placeholder:"请选择票据类型",disabled:e.isUpdate},on:{change:e.invTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.filterInvtypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("div",{staticStyle:{"max-height":"60vh",overflow:"auto"}},[e._l(e.InputField.field,(function(t,n){return"0"!=e.form.multiFlag||"assistantBuyName"!=t?a("el-form-item",{key:t,attrs:{label:e.InputField.name[n],prop:t}},["invDate"==t?[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:""},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}})]:"multiFlag"==t?[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}},[a("el-option",{attrs:{value:1,label:"是"}}),a("el-option",{attrs:{value:0,label:"否"}})],1)]:[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small"},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}})]],2):e._e()})),e.form.id?e._e():a("el-form-item",{attrs:{label:"发票原图",prop:"fileUrl"}},[a("el-upload",{ref:"manualUpload",staticClass:"manual-upload",attrs:{limit:1,accept:"image/*,.pdf,.ofd",headers:e.manualUpload.headers,action:e.manualUpload.url+"?updateSupport="+e.manualUpload.updateSupport,disabled:e.manualUpload.isUploading,"on-progress":e.handleManualFileUploadProgress,"on-success":e.handleManualFileSuccess,"on-remove":e.handleManualRemove,"auto-upload":!0,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("点击上传")])])])],1)],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("upload-file-dialog",{ref:"uploadFileDialog",on:{discernFileResult:e.discernFileResult}}),a("file-analysis",{ref:"fileAnalysis",on:{updateInvoiceTable:e.updateInvoiceTable}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"确认报销",visible:e.reimDialog.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.reimDialog,"open",t)},close:e.reimDialogClose}},[a("el-form",{ref:"reimForm",attrs:{model:e.reimDialog.form,rules:e.reimDialog.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"报销单号",prop:"bxdh"}},[a("el-input",{attrs:{placeholder:"请输入报销单号",readonly:""},model:{value:e.reimDialog.form.bxdh,callback:function(t){e.$set(e.reimDialog.form,"bxdh",t)},expression:"reimDialog.form.bxdh"}})],1),a("el-form-item",{attrs:{label:"报销凭证号",prop:"pzh"}},[a("el-input",{attrs:{placeholder:"请输入报销凭证号"},on:{change:e.pzhChange},model:{value:e.reimDialog.form.pzh,callback:function(t){e.$set(e.reimDialog.form,"pzh",t)},expression:"reimDialog.form.pzh"}})],1),a("el-collapse",{model:{value:e.reimActiveNames,callback:function(t){e.reimActiveNames=t},expression:"reimActiveNames"}},[a("el-collapse-item",{attrs:{title:"报销信息",name:"1"}},[a("el-table",{attrs:{data:e.reimInvoiceInfoData,"max-height":"400px"}},[a("el-table-column",{attrs:{label:"发票号码",prop:"invNo"}}),a("el-table-column",{attrs:{label:"报销金额",prop:"bxje"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.bxjeChange(t.row)}},model:{value:t.row.bxje,callback:function(a){e.$set(t.row,"bxje",a)},expression:"scope.row.bxje"}})]}}])})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.disabledButton},on:{click:e.submitReim}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.reimDialog.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e(),a("el-dialog",{attrs:{title:"迁移发票",visible:e.moveDialog.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.moveDialog,"open",t)},close:e.moveDialogClose}},[a("div",{staticClass:"move-wrapper"},[a("div",{staticClass:"move-wrapper-left"},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.moveDialog.searchDeptName,callback:function(t){e.$set(e.moveDialog,"searchDeptName",t)},expression:"moveDialog.searchDeptName"}})],1),a("div",{staticClass:"head-container tree-wrapper"},[a("el-tree",{ref:"moveTree",attrs:{data:e.moveDialog.deptOptions,props:e.moveDialog.defaultProps,"show-checkbox":"","check-strictly":!0,"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.fmoveFilterNode,"node-key":"id","default-expand-all":""},on:{"node-click":e.handleMoveNodeClick}})],1)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitMove}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.moveDialog.open=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("caad"),a("b0c0"),a("99af"),a("d81d"),a("25f0"),a("b64b"),a("e9c4"),a("ac1f"),a("5319"),a("13d5"),a("4338")),l=a("4c80"),s=a("b526"),c=a("7b93"),u=a("a5e7"),d=a("35d5"),p=a("ed08"),h=a("c38a"),m=a("23b1"),f=a("5f87"),b=a("fcb7"),g=a("606d"),v=a("cf99"),y={name:"Other",components:{TotalRowTable:s["default"],MyElProgress:c["a"],UploadFileDialog:u["default"],FileAnalysis:d["default"]},data:function(){return{errorPage:!1,functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,otherList:[],title:"",open:!1,invTypeOptions:[],dataSourceOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:500,invType:null,invCode:null,invNo:null,invDate:null,totalAmount:null,totalAmountWithoutTax:null,totalTaxAmount:null,totalMoneyUp:null,uniqueStr:null,uploadTime:null,fileUrl:null,dataJson:null,dataSource:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,ruleStatus:0,voucherNo:null,reimBillNo:null,apBillNo:null},form:{fileUrl:""},rules:{fileUrl:[{required:!0,message:"发票文件不能为空"}]},InputField:{},isUpdate:!1,sortParam:{column:"",columnOrder:""},columnsArr:[{label:"票据类型",prop:"invType",align:"center",show:!0,width:220,columnSort:0},{label:"票据号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"票据代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:2},{label:"票据日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:3},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:4},{label:"可抵扣金额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:6},{label:"录入时间",prop:"uploadTime",align:"center",show:!0,width:220,columnSort:5},{label:"数据来源",prop:"dataSource",align:"center",show:!0,width:220,columnSort:6},{label:"发票所在地",prop:"location",align:"center",show:!0,width:220,columnSort:6},{label:"出发地",prop:"departureStation",align:"center",show:!0,width:220,columnSort:6},{label:"目的地",prop:"arrivalStation",align:"center",show:!0,width:220,columnSort:6},{label:"火车票ID",prop:"ticketId",align:"center",show:!0,width:220,columnSort:6},{label:"票价",prop:"fare",align:"center",show:!0,width:220,columnSort:6},{label:"民航发展基金",prop:"civilAviationFund",align:"center",show:!0,width:220,columnSort:6},{label:"燃油附加费",prop:"fuelSurcharge",align:"center",show:!0,width:220,columnSort:6},{label:"其他税费",prop:"otherTaxes",align:"center",show:!0,width:220,columnSort:6},{label:"印刷序号",prop:"serialNo",align:"center",show:!0,width:220,columnSort:6},{label:"乘车时间",prop:"boardingTime",align:"center",show:!0,width:220,columnSort:6},{label:"购方名称(旅客姓名)",prop:"buyName",align:"center",show:!0,width:220,columnSort:6},{label:"购方税号(身份证号)",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:6},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"未税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:6},{label:"录入人",prop:"ext1",align:"center",show:!0,width:220,columnSort:22}],dataJsonFieldArr:["location","departureStation","arrivalStation","ticketId","fare","civilAviationFund","fuelSurcharge","otherTaxes","serialNo","boardingTime","buyName","buyTaxNo","sellName","sellTaxNo","totalWithoutTaxMoney"],disabledButton:!1,reimDialog:{open:!1,form:{pzh:"",bxdh:""},rules:{pzh:[{required:!0,message:"报销凭证号不能为空",trigger:"blur"}]}},reimInvoiceInfoData:[],reimActiveNames:"",originImageOpen:!1,currOriginImageUrl:null,imgShowParams:{deg:0,scale:1},currOperationRow:{},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},manualUpload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(f["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},moveDialog:{open:!1,deptOptions:[],searchDeptName:null,defaultProps:{children:"children",label:"label"},transferFileId:null,fileOptions:[]}}},computed:{totalTableData:function(){var e=Object(p["e"])(this.rows);return 0==e.length&&(e=Object(p["e"])(this.otherList)),e},filterInvtypeOptions:function(){if(this.form.id)return this.invTypeOptions;var e=this.invTypeOptions.filter((function(e){return["0004"].includes(e.dictValue)}));return e}},created:function(){var e=this;if("errorother"==this.$route.name.toLowerCase()){this.errorPage=!0;var t=[{label:"是否正常",prop:"ruleStatus",align:"center",show:!0,width:220,columnSort:20},{label:"异常描述",prop:"ruleDes",align:"center",show:!0,width:220,columnSort:0}];this.columnsArr=t.concat(this.columnsArr),this.queryParams.ruleStatus=1}this.getList(),this.getDicts("other_ticket").then((function(t){e.invTypeOptions=t.data})),this.getDicts("other_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(p["e"])(this.queryParams),Object(p["e"])(this.sortParam));t.beginTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[0],t.endTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[1],(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),Object(r["e"])(t).then((function(t){e.otherList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invType:null,invCode:null,invNo:null,invDate:null,totalAmount:null,totalAmountWithoutTax:null,totalTaxAmount:null,totalMoneyUp:null,uniqueStr:null,uploadTime:null,fileUrl:null,dataJson:null,dataSource:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(p["e"])(e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加其他票据"},handleManual:function(){var e=this;this.isUpdate=!1,this.open=!0,this.title="添加其他票据",this.$nextTick((function(){e.$refs.manualUpload.clearFiles(),e.$refs.form.clearValidate()}))},handleImage:function(){this.$refs.uploadFileDialog.uploadFileDialogShow()},handleScanner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";"1"==e?this.$store.commit("SET_IS_SECOND_CONFIRM",!1):"2"==e&&this.$store.commit("SET_IS_SECOND_CONFIRM",!0),this.scanConnectOperation()},scanConnectOperation:function(){var e=m["a"].FF_JPEG,t={deviceName:"DS-870",connectType:0},a={};a.docSource=m["a"].SRC_AUTO,a.imgType=m["a"].IT_AUTO,a.resolution=200,a.docSize=m["a"].DS_AUTO,a.docRotate=m["a"].DR_NONE,a.brightness=0,a.contrast=0,a.threshold=126,a.colorFilter=m["a"].CF_NONE,a.numScan=0,a.docEnhance=0,a.imgFilter=0,a.optDoubleFeedDetect=m["a"].DFD_NONE,a.optBlankPageSkip=m["a"].BPS_NONE,a.skewCorrect=m["a"].SC_EDGE;var n={};n.destination=m["a"].DEST_BASE64,n.fileFormat=e,n.imgQuality=60;var i=m["a"].ESLCreate(),o=this,r=[];this.$vLoading.show(),i.ScanAndSave_Simple(t,a,n,(function(e,t){e?(t.eventType==m["a"].EVENT_SCANPAGE_COMPLETE&&console.log("scan page complete"),t.eventType==m["a"].EVENT_ALLSCAN_COMPLETE&&console.log("all scan page complete"),t.eventType==m["a"].EVENT_SAVEPAGE_COMPLETE&&r.push("jpeg_"+t.base64),t.eventType==m["a"].EVENT_ALLSAVE_COMPLETE&&(o.msgSuccess("扫描完成，正在识别"),Object(l["e"])(r).then((function(e){o.$vLoading.hide(),o.discernFileResult(new Array(e))})).catch((function(){o.$vLoading.hide()})))):(o.$vLoading.hide(),o.msgError("扫描失败： "+t.errorCode.toString(16)))}))},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},updateInvoiceTable:function(){this.getList()},handleUpdate:function(e){var t=this,a=this.rows[0];if(e.id&&(a=e),"0"==a.reimStatus){this.isUpdate=!0;var n=e.id||this.ids;this.getEl(e.id?e.invType:this.rows[0].invType),Object(r["d"])(n).then((function(e){t.form=Object(p["e"])(e.data);var a=JSON.parse(e.data.dataJson);for(var n in a)t.$set(t.form,n,a[n]);t.open=!0,t.title="修改其他票据"}))}else this.msgError("已报销发票不能修改！")},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=Object(p["e"])(e.form);"17"===a.invType&&"0"==a.multiFlag&&(a.assistantBuyName=""),"0004"!=a.invType||a.invNo||(a.invNo=e.$moment(new Date).format("YYYYMMDDHHmmssSSS"));var n={};for(var i in a)n[i]=a[i];a.totalMoney&&(a.totalAmount=a.totalMoney),a.dataJson=JSON.stringify(n),null!=a.id?Object(r["f"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})):(a.dataSource="01",Object(r["a"])(a).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)})))}}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('<span style="word-break: break-all;">是否确认删除其他票据编号为["'+a+'"]的数据项?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){return Object(r["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(p["e"])(this.queryParams);t.beginTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[0],t.endTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[1],(params.voucherNo||params.reimBillNo||params.apBillNo)&&(params.reimFlag=!0),t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(h["g"])(10,"导出中",e),Object(r["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"其他发票.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.otherMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.otherList,"otherMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},manualDialogClose:function(){this.InputField={},this.form.invType=null,this.form.fileUrl=""},invTypeChange:function(){this.getEl(this.form.invType)},getEl:function(e){void 0!=this.$refs.form&&this.$refs.form.clearValidate();for(var t=this.getElementFromType(e),a={invType:this.form.invType,fileUrl:this.form.fileUrl},n=0,i=t.field.length;n<i;n++)a[t.field[n]]=null;"17"===e&&(a.multiFlag="0"),this.form=Object(p["e"])(a),this.InputField=Object(p["e"])(t);for(var o=0,r=t.OrRequired.length;o<r;o++)if("1"==t.OrRequired[o]){var l=t.name[o]+"不能为空";"01"==e||"08"==e||"03"==e||"04"==e||"10"==e||"11"==e||"15"==e?"invCode"==t.field[o]?this.rules[t.field[o]]=[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}]:"invNo"==t.field[o]&&(this.rules[t.field[o]]=[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]):"totalAmount"==t.field[o]||"totalAmountWithoutTax"==t.field[o]||"totalTaxAmount"==t.field[o]||"totalAmount"==t.field[o]?this.rules[t.field[o]]=[{pattern:/^-?[0-9]+(\.[0-9]+)?$/,message:"请输入正确的数字",trigger:["blur","change"]},{required:!0,message:"金额不能为空",trigger:["blur","change"]}]:this.rules[t.field[o]]=[{required:!0,message:l,trigger:["blur","change"]}]}},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},dataJsonFieldFormat:function(e,t){if(e.dataJson){var a=JSON.parse(e.dataJson);return void 0==a[t]?"":a[t]}return""},handleCancelReim:function(){for(var e=this,t=0;t<this.rows.length;t++)if("0"==this.rows[t].reimStatus)return void this.msgError("未报销发票不能进行取消报销操作！");for(var a=[],n=0;n<this.rows.length;n++)a[n]={wyid:this.rows[n].id,bxzt:"3"};var i={updateInvRequests:a};this.$vLoading.show(),Object(l["p"])(i).then((function(t){e.$vLoading.hide(),200==t.code?(e.getList(),e.msgSuccess("取消报销成功")):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))},handleReim:function(){var e=this;this.reimDialog.open=!0,this.reimDialog.form.bxdh=Object(p["m"])(),this.reimInvoiceInfoData=this.rows.reduce((function(e,t){return e.push({wyid:t.id,invNo:t.invNo,bxje:t.usableReimAmount}),e}),[]),this.$nextTick((function(){e.$refs.reimForm.clearValidate()}))},submitReim:function(){var e=this;this.$refs.reimForm.validate((function(t){if(t){for(var a=0;a<e.reimInvoiceInfoData.length;a++)if(!e.reimInvoiceInfoData[a].bxje)return e.msgError("报销金额不能为空"),!1;for(var n=Object(p["e"])(e.reimInvoiceInfoData),i=0;i<n.length;i++)n[i].bxje=parseFloat(n[i].bxje),n[i].bxdh=e.reimDialog.form.bxdh,n[i].pzh=e.reimDialog.form.pzh,n[i].bxzt="2";var o={updateInvRequests:n};e.$vLoading.show(),Object(l["p"])(o).then((function(t){e.$vLoading.hide(),200==t.code?(e.getList(),e.msgSuccess("报销成功"),e.reimDialog.open=!1):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}}))},pzhChange:function(){var e=this;if(this.reimDialog.form.pzh){var t={voucherNo:this.reimDialog.form.pzh,type:2};this.disabledButton=!0,Object(l["m"])(t).then((function(t){e.disabledButton=!1,t.data&&e.msgError("此凭证号已经被使用！")}))}},bxjeChange:function(e){e.bxje=this.plusOrMinus(e.bxje),"."==e.bxje.substr(-1)&&(e.bxje=e.bxje.substr(0,e.bxje.length-1))},reimDialogClose:function(){this.reimDialog.form={pzh:"",voucherNo:""}},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(p["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},handleManualFileUploadProgress:function(e,t,a){this.manualUpload.isUploading=!0},handleManualFileSuccess:function(e,t,a){this.manualUpload.isUploading=!1,200==e.code?(this.msgSuccess(e.msg),this.form.fileUrl=e.data[0],this.$refs["form"].validateField("fileUrl")):this.msgError(e.msg)},handleManualRemove:function(){this.form.fileUrl="",this.$refs["form"].validateField("fileUrl")},handleMove:function(){var e=this;this.$vLoading.show(),Object(b["f"])().then((function(t){e.moveDialog.deptOptions=t.data,e.$vLoading.hide(),e.moveDialog.open=!0}))},fmoveFilterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleMoveNodeClick:function(e){var t=this;Object(g["i"])({deptId:e.id}).then((function(e){var a;t.moveDialog.fileOptions=e.rows,t.moveDialog.transferFileId=null===(a=t.fileOptions[0])||void 0===a?void 0:a.id}))},submitMove:function(){var e=this,t=this.$refs.moveTree.getCheckedNodes();if(t.length){var a={invInfoId:this.rows.map((function(e){return e.id})),deptId:t[0].id};this.$vLoading.show(),Object(v["b"])(a).then((function(t){200==t.code?(e.msgSuccess("迁移成功"),e.moveDialog.open=!1,e.getList()):e.msgError(t.msg)})).finally((function(){e.$vLoading.hide()}))}else this.msgError("迁移组织不能为空")},moveDialogClose:function(){this.moveDialog.searchDeptName="",this.$refs.moveTree.setCheckedKeys([])}}},_=y,x=(a("0013"),a("2877")),w=Object(x["a"])(_,n,i,!1,null,"70a49509",null);t["default"]=w.exports},7523:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"税盘状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择税盘状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已使用",prop:"used"}},[a("el-select",{attrs:{placeholder:"请选择是否使用",clearable:"",size:"small"},model:{value:e.queryParams.used,callback:function(t){e.$set(e.queryParams,"used",t)},expression:"queryParams.used"}},e._l(e.usedOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"mainTable",attrs:{data:e.taxnoList,height:e.tableHeight,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return["onlineStatus"==t.prop?a("span",[e._v(e._s(e.stateFormat(n.row)))]):"used"==t.prop?a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){return e.handleStatusChange(n.row)}},model:{value:n.row.used,callback:function(t){e.$set(n.row,"used",t)},expression:"scope.row.used"}}):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},i=[],o=a("b85c"),r=(a("d81d"),a("e98e")),l=a("c10b"),s={name:"Taxno",props:{useType:{type:String,default:"owner"}},data:function(){return{module:"taxno",tableHeight:null,pageSizes:[],loading:!0,ids:[],single:!0,multiple:!1,showSearch:!0,total:0,taxnoList:[],title:"",open:!1,stateOptions:[],usedOptions:[],queryParams:{pageNum:1,pageSize:10,state:null,used:null,usePersonId:null,usePersonName:null,useTime:null,taxnoId:null},form:{},rules:{},columnsArr:[{label:"纳税人识别号",prop:"taxNo",align:"center",show:!0,width:"",columnSort:0},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:"",columnSort:1},{label:"分机号",prop:"extensionNo",align:"center",show:!0,width:"",columnSort:2},{label:"税盘状态",prop:"onlineStatus",align:"center",show:!0,width:"",columnSort:3},{label:"是否已使用",prop:"used",align:"center",show:!0,width:"",columnSort:4},{label:"使用人姓名",prop:"usePersonName",align:"center",show:!0,width:"",columnSort:5},{label:"使用时间",prop:"useTime",align:"center",show:!0,width:180,columnSort:6}]}},created:function(){var e=this;this.getList(),this.getDicts("sys_normal_disable").then((function(t){e.stateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.usedOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var t={module:this.module};Object(l["b"])(t).then((function(t){if(200==t.code){e.columnsArr=t.data;for(var a=0;a<e.columnsArr.length;a++)e.columnsArr[a].columnSort=a}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight()-("component"==this.useType?"54":0),window.onresize=function(){e.tableHeight=e.calcTableHeight()-("component"==e.useType?"54":0)}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight()-("component"==this.useType?"54":0),window.onresize=function(){e.tableHeight=e.calcTableHeight()-("component"==e.useType?"54":0)}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()-("component"==a.useType?"54":0)}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.mainTable.doLayout()}))},getList:function(){var e=this;this.loading=!0,Object(r["c"])(this.queryParams).then((function(t){e.taxnoList=t.rows,e.total=t.total,e.loading=!1}))},handleStatusChange:function(e){var t=this,a="1"===e.used?"启用":"停用";this.$confirm('确认要"'+a+'"该税盘吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["d"])(e)})).then((function(n){200==n.code?(t.msgSuccess(a+"成功"),t.getList()):(t.msgError(n.msg),e.used="0"===e.used?"1":"0")})).catch((function(){e.used="0"===e.used?"1":"0"}))},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.onlineStatus)},usedFormat:function(e,t){return this.selectDictLabel(this.usedOptions,e.used)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={state:null,used:null,usePersonId:null,usePersonName:null,useTime:null,remark:null,taxnoId:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.state})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加销项税盘管理"},handleUpdate:function(e){var t=this;this.reset();var a=e.state||this.ids;Object(r["a"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改销项税盘管理"}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.mainTable.toggleRowSelection(i)}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},"754f":function(e,t,a){"use strict";a("4bd5")},"766b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-board"},[a("el-tabs",{staticClass:"center-tabs",model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:"组件属性",name:"field"}}),a("el-tab-pane",{attrs:{label:"表单属性",name:"form"}})],1),a("div",{staticClass:"field-box"},[a("a",{staticClass:"document-link",attrs:{target:"_blank",href:e.documentLink,title:"查看组件文档"}},[a("i",{staticClass:"el-icon-link"})]),a("el-scrollbar",{staticClass:"right-scrollbar"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"field"===e.currentTab&&e.showField,expression:"currentTab==='field' && showField"}],attrs:{size:"small","label-width":"90px"}},[e.activeData.changeTag?a("el-form-item",{attrs:{label:"组件类型"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择组件类型"},on:{change:e.tagChange},model:{value:e.activeData.tagIcon,callback:function(t){e.$set(e.activeData,"tagIcon",t)},expression:"activeData.tagIcon"}},e._l(e.tagList,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.tagIcon}},[a("svg-icon",{staticClass:"node-icon",attrs:{"icon-class":t.tagIcon}}),a("span",[e._v(" "+e._s(t.label))])],1)})),1)})),1)],1):e._e(),void 0!==e.activeData.vModel?a("el-form-item",{attrs:{label:"字段名"}},[a("el-input",{attrs:{placeholder:"请输入字段名（v-model）"},model:{value:e.activeData.vModel,callback:function(t){e.$set(e.activeData,"vModel",t)},expression:"activeData.vModel"}})],1):e._e(),void 0!==e.activeData.componentName?a("el-form-item",{attrs:{label:"组件名"}},[e._v(" "+e._s(e.activeData.componentName)+" ")]):e._e(),void 0!==e.activeData.label?a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.activeData.label,callback:function(t){e.$set(e.activeData,"label",t)},expression:"activeData.label"}})],1):e._e(),void 0!==e.activeData.placeholder?a("el-form-item",{attrs:{label:"占位提示"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData.placeholder,callback:function(t){e.$set(e.activeData,"placeholder",t)},expression:"activeData.placeholder"}})],1):e._e(),void 0!==e.activeData["start-placeholder"]?a("el-form-item",{attrs:{label:"开始占位"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData["start-placeholder"],callback:function(t){e.$set(e.activeData,"start-placeholder",t)},expression:"activeData['start-placeholder']"}})],1):e._e(),void 0!==e.activeData["end-placeholder"]?a("el-form-item",{attrs:{label:"结束占位"}},[a("el-input",{attrs:{placeholder:"请输入占位提示"},model:{value:e.activeData["end-placeholder"],callback:function(t){e.$set(e.activeData,"end-placeholder",t)},expression:"activeData['end-placeholder']"}})],1):e._e(),void 0!==e.activeData.span?a("el-form-item",{attrs:{label:"表单栅格"}},[a("el-slider",{attrs:{max:24,min:1,marks:{12:""}},on:{change:e.spanChange},model:{value:e.activeData.span,callback:function(t){e.$set(e.activeData,"span",t)},expression:"activeData.span"}})],1):e._e(),"rowFormItem"===e.activeData.layout?a("el-form-item",{attrs:{label:"栅格间隔"}},[a("el-input-number",{attrs:{min:0,placeholder:"栅格间隔"},model:{value:e.activeData.gutter,callback:function(t){e.$set(e.activeData,"gutter",t)},expression:"activeData.gutter"}})],1):e._e(),"rowFormItem"===e.activeData.layout?a("el-form-item",{attrs:{label:"布局模式"}},[a("el-radio-group",{model:{value:e.activeData.type,callback:function(t){e.$set(e.activeData,"type",t)},expression:"activeData.type"}},[a("el-radio-button",{attrs:{label:"default"}}),a("el-radio-button",{attrs:{label:"flex"}})],1)],1):e._e(),void 0!==e.activeData.justify&&"flex"===e.activeData.type?a("el-form-item",{attrs:{label:"水平排列"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择水平排列"},model:{value:e.activeData.justify,callback:function(t){e.$set(e.activeData,"justify",t)},expression:"activeData.justify"}},e._l(e.justifyOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),void 0!==e.activeData.align&&"flex"===e.activeData.type?a("el-form-item",{attrs:{label:"垂直排列"}},[a("el-radio-group",{model:{value:e.activeData.align,callback:function(t){e.$set(e.activeData,"align",t)},expression:"activeData.align"}},[a("el-radio-button",{attrs:{label:"top"}}),a("el-radio-button",{attrs:{label:"middle"}}),a("el-radio-button",{attrs:{label:"bottom"}})],1)],1):e._e(),void 0!==e.activeData.labelWidth?a("el-form-item",{attrs:{label:"标签宽度"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入标签宽度"},model:{value:e.activeData.labelWidth,callback:function(t){e.$set(e.activeData,"labelWidth",e._n(t))},expression:"activeData.labelWidth"}})],1):e._e(),e.activeData.style&&void 0!==e.activeData.style.width?a("el-form-item",{attrs:{label:"组件宽度"}},[a("el-input",{attrs:{placeholder:"请输入组件宽度",clearable:""},model:{value:e.activeData.style.width,callback:function(t){e.$set(e.activeData.style,"width",t)},expression:"activeData.style.width"}})],1):e._e(),void 0!==e.activeData.vModel?a("el-form-item",{attrs:{label:"默认值"}},[a("el-input",{attrs:{value:e.setDefaultValue(e.activeData.defaultValue),placeholder:"请输入默认值"},on:{input:e.onDefaultValueInput}})],1):e._e(),"el-checkbox-group"===e.activeData.tag?a("el-form-item",{attrs:{label:"至少应选"}},[a("el-input-number",{attrs:{value:e.activeData.min,min:0,placeholder:"至少应选"},on:{input:function(t){return e.$set(e.activeData,"min",t||void 0)}}})],1):e._e(),"el-checkbox-group"===e.activeData.tag?a("el-form-item",{attrs:{label:"最多可选"}},[a("el-input-number",{attrs:{value:e.activeData.max,min:0,placeholder:"最多可选"},on:{input:function(t){return e.$set(e.activeData,"max",t||void 0)}}})],1):e._e(),void 0!==e.activeData.prepend?a("el-form-item",{attrs:{label:"前缀"}},[a("el-input",{attrs:{placeholder:"请输入前缀"},model:{value:e.activeData.prepend,callback:function(t){e.$set(e.activeData,"prepend",t)},expression:"activeData.prepend"}})],1):e._e(),void 0!==e.activeData.append?a("el-form-item",{attrs:{label:"后缀"}},[a("el-input",{attrs:{placeholder:"请输入后缀"},model:{value:e.activeData.append,callback:function(t){e.$set(e.activeData,"append",t)},expression:"activeData.append"}})],1):e._e(),void 0!==e.activeData["prefix-icon"]?a("el-form-item",{attrs:{label:"前图标"}},[a("el-input",{attrs:{placeholder:"请输入前图标名称"},model:{value:e.activeData["prefix-icon"],callback:function(t){e.$set(e.activeData,"prefix-icon",t)},expression:"activeData['prefix-icon']"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-thumb"},on:{click:function(t){return e.openIconsDialog("prefix-icon")}},slot:"append"},[e._v(" 选择 ")])],1)],1):e._e(),void 0!==e.activeData["suffix-icon"]?a("el-form-item",{attrs:{label:"后图标"}},[a("el-input",{attrs:{placeholder:"请输入后图标名称"},model:{value:e.activeData["suffix-icon"],callback:function(t){e.$set(e.activeData,"suffix-icon",t)},expression:"activeData['suffix-icon']"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-thumb"},on:{click:function(t){return e.openIconsDialog("suffix-icon")}},slot:"append"},[e._v(" 选择 ")])],1)],1):e._e(),"el-cascader"===e.activeData.tag?a("el-form-item",{attrs:{label:"选项分隔符"}},[a("el-input",{attrs:{placeholder:"请输入选项分隔符"},model:{value:e.activeData.separator,callback:function(t){e.$set(e.activeData,"separator",t)},expression:"activeData.separator"}})],1):e._e(),void 0!==e.activeData.autosize?a("el-form-item",{attrs:{label:"最小行数"}},[a("el-input-number",{attrs:{min:1,placeholder:"最小行数"},model:{value:e.activeData.autosize.minRows,callback:function(t){e.$set(e.activeData.autosize,"minRows",t)},expression:"activeData.autosize.minRows"}})],1):e._e(),void 0!==e.activeData.autosize?a("el-form-item",{attrs:{label:"最大行数"}},[a("el-input-number",{attrs:{min:1,placeholder:"最大行数"},model:{value:e.activeData.autosize.maxRows,callback:function(t){e.$set(e.activeData.autosize,"maxRows",t)},expression:"activeData.autosize.maxRows"}})],1):e._e(),void 0!==e.activeData.min?a("el-form-item",{attrs:{label:"最小值"}},[a("el-input-number",{attrs:{placeholder:"最小值"},model:{value:e.activeData.min,callback:function(t){e.$set(e.activeData,"min",t)},expression:"activeData.min"}})],1):e._e(),void 0!==e.activeData.max?a("el-form-item",{attrs:{label:"最大值"}},[a("el-input-number",{attrs:{placeholder:"最大值"},model:{value:e.activeData.max,callback:function(t){e.$set(e.activeData,"max",t)},expression:"activeData.max"}})],1):e._e(),void 0!==e.activeData.step?a("el-form-item",{attrs:{label:"步长"}},[a("el-input-number",{attrs:{placeholder:"步数"},model:{value:e.activeData.step,callback:function(t){e.$set(e.activeData,"step",t)},expression:"activeData.step"}})],1):e._e(),"el-input-number"===e.activeData.tag?a("el-form-item",{attrs:{label:"精度"}},[a("el-input-number",{attrs:{min:0,placeholder:"精度"},model:{value:e.activeData.precision,callback:function(t){e.$set(e.activeData,"precision",t)},expression:"activeData.precision"}})],1):e._e(),"el-input-number"===e.activeData.tag?a("el-form-item",{attrs:{label:"按钮位置"}},[a("el-radio-group",{model:{value:e.activeData["controls-position"],callback:function(t){e.$set(e.activeData,"controls-position",t)},expression:"activeData['controls-position']"}},[a("el-radio-button",{attrs:{label:""}},[e._v(" 默认 ")]),a("el-radio-button",{attrs:{label:"right"}},[e._v(" 右侧 ")])],1)],1):e._e(),void 0!==e.activeData.maxlength?a("el-form-item",{attrs:{label:"最多输入"}},[a("el-input",{attrs:{placeholder:"请输入字符长度"},model:{value:e.activeData.maxlength,callback:function(t){e.$set(e.activeData,"maxlength",t)},expression:"activeData.maxlength"}},[a("template",{slot:"append"},[e._v(" 个字符 ")])],2)],1):e._e(),void 0!==e.activeData["active-text"]?a("el-form-item",{attrs:{label:"开启提示"}},[a("el-input",{attrs:{placeholder:"请输入开启提示"},model:{value:e.activeData["active-text"],callback:function(t){e.$set(e.activeData,"active-text",t)},expression:"activeData['active-text']"}})],1):e._e(),void 0!==e.activeData["inactive-text"]?a("el-form-item",{attrs:{label:"关闭提示"}},[a("el-input",{attrs:{placeholder:"请输入关闭提示"},model:{value:e.activeData["inactive-text"],callback:function(t){e.$set(e.activeData,"inactive-text",t)},expression:"activeData['inactive-text']"}})],1):e._e(),void 0!==e.activeData["active-value"]?a("el-form-item",{attrs:{label:"开启值"}},[a("el-input",{attrs:{value:e.setDefaultValue(e.activeData["active-value"]),placeholder:"请输入开启值"},on:{input:function(t){return e.onSwitchValueInput(t,"active-value")}}})],1):e._e(),void 0!==e.activeData["inactive-value"]?a("el-form-item",{attrs:{label:"关闭值"}},[a("el-input",{attrs:{value:e.setDefaultValue(e.activeData["inactive-value"]),placeholder:"请输入关闭值"},on:{input:function(t){return e.onSwitchValueInput(t,"inactive-value")}}})],1):e._e(),void 0!==e.activeData.type&&"el-date-picker"===e.activeData.tag?a("el-form-item",{attrs:{label:"时间类型"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择时间类型"},on:{change:e.dateTypeChange},model:{value:e.activeData.type,callback:function(t){e.$set(e.activeData,"type",t)},expression:"activeData.type"}},e._l(e.dateOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),void 0!==e.activeData.name?a("el-form-item",{attrs:{label:"文件字段名"}},[a("el-input",{attrs:{placeholder:"请输入上传文件字段名"},model:{value:e.activeData.name,callback:function(t){e.$set(e.activeData,"name",t)},expression:"activeData.name"}})],1):e._e(),void 0!==e.activeData.accept?a("el-form-item",{attrs:{label:"文件类型"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择文件类型",clearable:""},model:{value:e.activeData.accept,callback:function(t){e.$set(e.activeData,"accept",t)},expression:"activeData.accept"}},[a("el-option",{attrs:{label:"图片",value:"image/*"}}),a("el-option",{attrs:{label:"视频",value:"video/*"}}),a("el-option",{attrs:{label:"音频",value:"audio/*"}}),a("el-option",{attrs:{label:"excel",value:".xls,.xlsx"}}),a("el-option",{attrs:{label:"word",value:".doc,.docx"}}),a("el-option",{attrs:{label:"pdf",value:".pdf"}}),a("el-option",{attrs:{label:"txt",value:".txt"}})],1)],1):e._e(),void 0!==e.activeData.fileSize?a("el-form-item",{attrs:{label:"文件大小"}},[a("el-input",{attrs:{placeholder:"请输入文件大小"},model:{value:e.activeData.fileSize,callback:function(t){e.$set(e.activeData,"fileSize",e._n(t))},expression:"activeData.fileSize"}},[a("el-select",{style:{width:"66px"},attrs:{slot:"append"},slot:"append",model:{value:e.activeData.sizeUnit,callback:function(t){e.$set(e.activeData,"sizeUnit",t)},expression:"activeData.sizeUnit"}},[a("el-option",{attrs:{label:"KB",value:"KB"}}),a("el-option",{attrs:{label:"MB",value:"MB"}}),a("el-option",{attrs:{label:"GB",value:"GB"}})],1)],1)],1):e._e(),void 0!==e.activeData.action?a("el-form-item",{attrs:{label:"上传地址"}},[a("el-input",{attrs:{placeholder:"请输入上传地址",clearable:""},model:{value:e.activeData.action,callback:function(t){e.$set(e.activeData,"action",t)},expression:"activeData.action"}})],1):e._e(),void 0!==e.activeData["list-type"]?a("el-form-item",{attrs:{label:"列表类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData["list-type"],callback:function(t){e.$set(e.activeData,"list-type",t)},expression:"activeData['list-type']"}},[a("el-radio-button",{attrs:{label:"text"}},[e._v(" text ")]),a("el-radio-button",{attrs:{label:"picture"}},[e._v(" picture ")]),a("el-radio-button",{attrs:{label:"picture-card"}},[e._v(" picture-card ")])],1)],1):e._e(),void 0!==e.activeData.buttonText?a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"picture-card"!==e.activeData["list-type"],expression:"'picture-card' !== activeData['list-type']"}],attrs:{label:"按钮文字"}},[a("el-input",{attrs:{placeholder:"请输入按钮文字"},model:{value:e.activeData.buttonText,callback:function(t){e.$set(e.activeData,"buttonText",t)},expression:"activeData.buttonText"}})],1):e._e(),void 0!==e.activeData["range-separator"]?a("el-form-item",{attrs:{label:"分隔符"}},[a("el-input",{attrs:{placeholder:"请输入分隔符"},model:{value:e.activeData["range-separator"],callback:function(t){e.$set(e.activeData,"range-separator",t)},expression:"activeData['range-separator']"}})],1):e._e(),void 0!==e.activeData["picker-options"]?a("el-form-item",{attrs:{label:"时间段"}},[a("el-input",{attrs:{placeholder:"请输入时间段"},model:{value:e.activeData["picker-options"].selectableRange,callback:function(t){e.$set(e.activeData["picker-options"],"selectableRange",t)},expression:"activeData['picker-options'].selectableRange"}})],1):e._e(),void 0!==e.activeData.format?a("el-form-item",{attrs:{label:"时间格式"}},[a("el-input",{attrs:{value:e.activeData.format,placeholder:"请输入时间格式"},on:{input:function(t){return e.setTimeValue(t)}}})],1):e._e(),["el-checkbox-group","el-radio-group","el-select"].indexOf(e.activeData.tag)>-1?[a("el-divider",[e._v("选项")]),a("draggable",{attrs:{list:e.activeData.options,animation:340,group:"selectItem",handle:".option-drag"}},e._l(e.activeData.options,(function(t,n){return a("div",{key:n,staticClass:"select-item"},[a("div",{staticClass:"select-line-icon option-drag"},[a("i",{staticClass:"el-icon-s-operation"})]),a("el-input",{attrs:{placeholder:"选项名",size:"small"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"item.label"}}),a("el-input",{attrs:{placeholder:"选项值",size:"small",value:t.value},on:{input:function(a){return e.setOptionValue(t,a)}}}),a("div",{staticClass:"close-btn select-line-icon",on:{click:function(t){return e.activeData.options.splice(n,1)}}},[a("i",{staticClass:"el-icon-remove-outline"})])],1)})),0),a("div",{staticStyle:{"margin-left":"20px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addSelectItem}},[e._v(" 添加选项 ")])],1),a("el-divider")]:e._e(),["el-cascader"].indexOf(e.activeData.tag)>-1?[a("el-divider",[e._v("选项")]),a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.activeData.dataType,callback:function(t){e.$set(e.activeData,"dataType",t)},expression:"activeData.dataType"}},[a("el-radio-button",{attrs:{label:"dynamic"}},[e._v(" 动态数据 ")]),a("el-radio-button",{attrs:{label:"static"}},[e._v(" 静态数据 ")])],1)],1),"dynamic"===e.activeData.dataType?[a("el-form-item",{attrs:{label:"标签键名"}},[a("el-input",{attrs:{placeholder:"请输入标签键名"},model:{value:e.activeData.labelKey,callback:function(t){e.$set(e.activeData,"labelKey",t)},expression:"activeData.labelKey"}})],1),a("el-form-item",{attrs:{label:"值键名"}},[a("el-input",{attrs:{placeholder:"请输入值键名"},model:{value:e.activeData.valueKey,callback:function(t){e.$set(e.activeData,"valueKey",t)},expression:"activeData.valueKey"}})],1),a("el-form-item",{attrs:{label:"子级键名"}},[a("el-input",{attrs:{placeholder:"请输入子级键名"},model:{value:e.activeData.childrenKey,callback:function(t){e.$set(e.activeData,"childrenKey",t)},expression:"activeData.childrenKey"}})],1)]:e._e(),"static"===e.activeData.dataType?a("el-tree",{attrs:{draggable:"",data:e.activeData.options,"node-key":"id","expand-on-click-node":!1,"render-content":e.renderContent}}):e._e(),"static"===e.activeData.dataType?a("div",{staticStyle:{"margin-left":"20px"}},[a("el-button",{staticStyle:{"padding-bottom":"0"},attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addTreeItem}},[e._v(" 添加父级 ")])],1):e._e(),a("el-divider")]:e._e(),void 0!==e.activeData.optionType?a("el-form-item",{attrs:{label:"选项样式"}},[a("el-radio-group",{model:{value:e.activeData.optionType,callback:function(t){e.$set(e.activeData,"optionType",t)},expression:"activeData.optionType"}},[a("el-radio-button",{attrs:{label:"default"}},[e._v(" 默认 ")]),a("el-radio-button",{attrs:{label:"button"}},[e._v(" 按钮 ")])],1)],1):e._e(),void 0!==e.activeData["active-color"]?a("el-form-item",{attrs:{label:"开启颜色"}},[a("el-color-picker",{model:{value:e.activeData["active-color"],callback:function(t){e.$set(e.activeData,"active-color",t)},expression:"activeData['active-color']"}})],1):e._e(),void 0!==e.activeData["inactive-color"]?a("el-form-item",{attrs:{label:"关闭颜色"}},[a("el-color-picker",{model:{value:e.activeData["inactive-color"],callback:function(t){e.$set(e.activeData,"inactive-color",t)},expression:"activeData['inactive-color']"}})],1):e._e(),void 0!==e.activeData["allow-half"]?a("el-form-item",{attrs:{label:"允许半选"}},[a("el-switch",{model:{value:e.activeData["allow-half"],callback:function(t){e.$set(e.activeData,"allow-half",t)},expression:"activeData['allow-half']"}})],1):e._e(),void 0!==e.activeData["show-text"]?a("el-form-item",{attrs:{label:"辅助文字"}},[a("el-switch",{on:{change:e.rateTextChange},model:{value:e.activeData["show-text"],callback:function(t){e.$set(e.activeData,"show-text",t)},expression:"activeData['show-text']"}})],1):e._e(),void 0!==e.activeData["show-score"]?a("el-form-item",{attrs:{label:"显示分数"}},[a("el-switch",{on:{change:e.rateScoreChange},model:{value:e.activeData["show-score"],callback:function(t){e.$set(e.activeData,"show-score",t)},expression:"activeData['show-score']"}})],1):e._e(),void 0!==e.activeData["show-stops"]?a("el-form-item",{attrs:{label:"显示间断点"}},[a("el-switch",{model:{value:e.activeData["show-stops"],callback:function(t){e.$set(e.activeData,"show-stops",t)},expression:"activeData['show-stops']"}})],1):e._e(),void 0!==e.activeData.range?a("el-form-item",{attrs:{label:"范围选择"}},[a("el-switch",{on:{change:e.rangeChange},model:{value:e.activeData.range,callback:function(t){e.$set(e.activeData,"range",t)},expression:"activeData.range"}})],1):e._e(),void 0!==e.activeData.border&&"default"===e.activeData.optionType?a("el-form-item",{attrs:{label:"是否带边框"}},[a("el-switch",{model:{value:e.activeData.border,callback:function(t){e.$set(e.activeData,"border",t)},expression:"activeData.border"}})],1):e._e(),"el-color-picker"===e.activeData.tag?a("el-form-item",{attrs:{label:"颜色格式"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择颜色格式"},on:{change:e.colorFormatChange},model:{value:e.activeData["color-format"],callback:function(t){e.$set(e.activeData,"color-format",t)},expression:"activeData['color-format']"}},e._l(e.colorFormatOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),void 0===e.activeData.size||"button"!==e.activeData.optionType&&!e.activeData.border&&"el-color-picker"!==e.activeData.tag?e._e():a("el-form-item",{attrs:{label:"选项尺寸"}},[a("el-radio-group",{model:{value:e.activeData.size,callback:function(t){e.$set(e.activeData,"size",t)},expression:"activeData.size"}},[a("el-radio-button",{attrs:{label:"medium"}},[e._v(" 中等 ")]),a("el-radio-button",{attrs:{label:"small"}},[e._v(" 较小 ")]),a("el-radio-button",{attrs:{label:"mini"}},[e._v(" 迷你 ")])],1)],1),void 0!==e.activeData["show-word-limit"]?a("el-form-item",{attrs:{label:"输入统计"}},[a("el-switch",{model:{value:e.activeData["show-word-limit"],callback:function(t){e.$set(e.activeData,"show-word-limit",t)},expression:"activeData['show-word-limit']"}})],1):e._e(),"el-input-number"===e.activeData.tag?a("el-form-item",{attrs:{label:"严格步数"}},[a("el-switch",{model:{value:e.activeData["step-strictly"],callback:function(t){e.$set(e.activeData,"step-strictly",t)},expression:"activeData['step-strictly']"}})],1):e._e(),"el-cascader"===e.activeData.tag?a("el-form-item",{attrs:{label:"是否多选"}},[a("el-switch",{model:{value:e.activeData.props.props.multiple,callback:function(t){e.$set(e.activeData.props.props,"multiple",t)},expression:"activeData.props.props.multiple"}})],1):e._e(),"el-cascader"===e.activeData.tag?a("el-form-item",{attrs:{label:"展示全路径"}},[a("el-switch",{model:{value:e.activeData["show-all-levels"],callback:function(t){e.$set(e.activeData,"show-all-levels",t)},expression:"activeData['show-all-levels']"}})],1):e._e(),"el-cascader"===e.activeData.tag?a("el-form-item",{attrs:{label:"可否筛选"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1):e._e(),void 0!==e.activeData.clearable?a("el-form-item",{attrs:{label:"能否清空"}},[a("el-switch",{model:{value:e.activeData.clearable,callback:function(t){e.$set(e.activeData,"clearable",t)},expression:"activeData.clearable"}})],1):e._e(),void 0!==e.activeData.showTip?a("el-form-item",{attrs:{label:"显示提示"}},[a("el-switch",{model:{value:e.activeData.showTip,callback:function(t){e.$set(e.activeData,"showTip",t)},expression:"activeData.showTip"}})],1):e._e(),void 0!==e.activeData.multiple?a("el-form-item",{attrs:{label:"多选文件"}},[a("el-switch",{model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1):e._e(),void 0!==e.activeData["auto-upload"]?a("el-form-item",{attrs:{label:"自动上传"}},[a("el-switch",{model:{value:e.activeData["auto-upload"],callback:function(t){e.$set(e.activeData,"auto-upload",t)},expression:"activeData['auto-upload']"}})],1):e._e(),void 0!==e.activeData.readonly?a("el-form-item",{attrs:{label:"是否只读"}},[a("el-switch",{model:{value:e.activeData.readonly,callback:function(t){e.$set(e.activeData,"readonly",t)},expression:"activeData.readonly"}})],1):e._e(),void 0!==e.activeData.disabled?a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-switch",{model:{value:e.activeData.disabled,callback:function(t){e.$set(e.activeData,"disabled",t)},expression:"activeData.disabled"}})],1):e._e(),"el-select"===e.activeData.tag?a("el-form-item",{attrs:{label:"是否可搜索"}},[a("el-switch",{model:{value:e.activeData.filterable,callback:function(t){e.$set(e.activeData,"filterable",t)},expression:"activeData.filterable"}})],1):e._e(),"el-select"===e.activeData.tag?a("el-form-item",{attrs:{label:"是否多选"}},[a("el-switch",{on:{change:e.multipleChange},model:{value:e.activeData.multiple,callback:function(t){e.$set(e.activeData,"multiple",t)},expression:"activeData.multiple"}})],1):e._e(),void 0!==e.activeData.required?a("el-form-item",{attrs:{label:"是否必填"}},[a("el-switch",{model:{value:e.activeData.required,callback:function(t){e.$set(e.activeData,"required",t)},expression:"activeData.required"}})],1):e._e(),e.activeData.layoutTree?[a("el-divider",[e._v("布局结构树")]),a("el-tree",{attrs:{data:[e.activeData],props:e.layoutTreeProps,"node-key":"renderKey","default-expand-all":"",draggable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return a("span",{},[a("span",{staticClass:"node-label"},[a("svg-icon",{staticClass:"node-icon",attrs:{"icon-class":i.tagIcon}}),e._v(" "+e._s(n.label)+" ")],1)])}}],null,!1,921874089)})]:e._e(),"colFormItem"===e.activeData.layout?[a("el-divider",[e._v("正则校验")]),e._l(e.activeData.regList,(function(t,n){return a("div",{key:n,staticClass:"reg-item"},[a("span",{staticClass:"close-btn",on:{click:function(t){return e.activeData.regList.splice(n,1)}}},[a("i",{staticClass:"el-icon-close"})]),a("el-form-item",{attrs:{label:"表达式"}},[a("el-input",{attrs:{placeholder:"请输入正则"},model:{value:t.pattern,callback:function(a){e.$set(t,"pattern",a)},expression:"item.pattern"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"错误提示"}},[a("el-input",{attrs:{placeholder:"请输入错误提示"},model:{value:t.message,callback:function(a){e.$set(t,"message",a)},expression:"item.message"}})],1)],1)})),a("div",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"text"},on:{click:e.addReg}},[e._v(" 添加规则 ")])],1)]:e._e()],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"form"===e.currentTab,expression:"currentTab === 'form'"}],attrs:{size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"表单名"}},[a("el-input",{attrs:{placeholder:"请输入表单名（ref）"},model:{value:e.formConf.formRef,callback:function(t){e.$set(e.formConf,"formRef",t)},expression:"formConf.formRef"}})],1),a("el-form-item",{attrs:{label:"表单模型"}},[a("el-input",{attrs:{placeholder:"请输入数据模型"},model:{value:e.formConf.formModel,callback:function(t){e.$set(e.formConf,"formModel",t)},expression:"formConf.formModel"}})],1),a("el-form-item",{attrs:{label:"校验模型"}},[a("el-input",{attrs:{placeholder:"请输入校验模型"},model:{value:e.formConf.formRules,callback:function(t){e.$set(e.formConf,"formRules",t)},expression:"formConf.formRules"}})],1),a("el-form-item",{attrs:{label:"表单尺寸"}},[a("el-radio-group",{model:{value:e.formConf.size,callback:function(t){e.$set(e.formConf,"size",t)},expression:"formConf.size"}},[a("el-radio-button",{attrs:{label:"medium"}},[e._v(" 中等 ")]),a("el-radio-button",{attrs:{label:"small"}},[e._v(" 较小 ")]),a("el-radio-button",{attrs:{label:"mini"}},[e._v(" 迷你 ")])],1)],1),a("el-form-item",{attrs:{label:"标签对齐"}},[a("el-radio-group",{model:{value:e.formConf.labelPosition,callback:function(t){e.$set(e.formConf,"labelPosition",t)},expression:"formConf.labelPosition"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v(" 左对齐 ")]),a("el-radio-button",{attrs:{label:"right"}},[e._v(" 右对齐 ")]),a("el-radio-button",{attrs:{label:"top"}},[e._v(" 顶部对齐 ")])],1)],1),a("el-form-item",{attrs:{label:"标签宽度"}},[a("el-input-number",{attrs:{placeholder:"标签宽度"},model:{value:e.formConf.labelWidth,callback:function(t){e.$set(e.formConf,"labelWidth",t)},expression:"formConf.labelWidth"}})],1),a("el-form-item",{attrs:{label:"栅格间隔"}},[a("el-input-number",{attrs:{min:0,placeholder:"栅格间隔"},model:{value:e.formConf.gutter,callback:function(t){e.$set(e.formConf,"gutter",t)},expression:"formConf.gutter"}})],1),a("el-form-item",{attrs:{label:"禁用表单"}},[a("el-switch",{model:{value:e.formConf.disabled,callback:function(t){e.$set(e.formConf,"disabled",t)},expression:"formConf.disabled"}})],1),a("el-form-item",{attrs:{label:"表单按钮"}},[a("el-switch",{model:{value:e.formConf.formBtns,callback:function(t){e.$set(e.formConf,"formBtns",t)},expression:"formConf.formBtns"}})],1),a("el-form-item",{attrs:{label:"显示未选中组件边框"}},[a("el-switch",{model:{value:e.formConf.unFocusedComponentBorder,callback:function(t){e.$set(e.formConf,"unFocusedComponentBorder",t)},expression:"formConf.unFocusedComponentBorder"}})],1)],1)],1)],1),a("treeNode-dialog",{attrs:{visible:e.dialogVisible,title:"添加选项"},on:{"update:visible":function(t){e.dialogVisible=t},commit:e.addNode}}),a("icons-dialog",{attrs:{visible:e.iconsVisible,current:e.activeData[e.currentIconModel]},on:{"update:visible":function(t){e.iconsVisible=t},select:e.setIcon}})],1)},i=[],o=(a("99af"),a("c740"),a("a434"),a("a15b"),a("d81d"),a("b64b"),a("7db0"),a("d3b7"),a("3022")),r=a("c81a"),l=a("ed08"),s=a("d0b2"),c=a("2e2a"),u={date:"yyyy-MM-dd",week:"yyyy 第 WW 周",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss"},d={components:{TreeNodeDialog:r["default"],IconsDialog:s["default"]},props:["showField","activeData","formConf"],data:function(){return{currentTab:"field",currentNode:null,dialogVisible:!1,iconsVisible:!1,currentIconModel:null,dateTypeOptions:[{label:"日(date)",value:"date"},{label:"周(week)",value:"week"},{label:"月(month)",value:"month"},{label:"年(year)",value:"year"},{label:"日期时间(datetime)",value:"datetime"}],dateRangeTypeOptions:[{label:"日期范围(daterange)",value:"daterange"},{label:"月范围(monthrange)",value:"monthrange"},{label:"日期时间范围(datetimerange)",value:"datetimerange"}],colorFormatOptions:[{label:"hex",value:"hex"},{label:"rgb",value:"rgb"},{label:"rgba",value:"rgba"},{label:"hsv",value:"hsv"},{label:"hsl",value:"hsl"}],justifyOptions:[{label:"start",value:"start"},{label:"end",value:"end"},{label:"center",value:"center"},{label:"space-around",value:"space-around"},{label:"space-between",value:"space-between"}],layoutTreeProps:{label:function(e,t){return e.componentName||"".concat(e.label,": ").concat(e.vModel)}}}},computed:{documentLink:function(){return this.activeData.document||"https://element.eleme.cn/#/zh-CN/component/installation"},dateOptions:function(){return void 0!==this.activeData.type&&"el-date-picker"===this.activeData.tag?void 0===this.activeData["start-placeholder"]?this.dateTypeOptions:this.dateRangeTypeOptions:[]},tagList:function(){return[{label:"输入型组件",options:c["b"]},{label:"选择型组件",options:c["d"]}]}},methods:{addReg:function(){this.activeData.regList.push({pattern:"",message:""})},addSelectItem:function(){this.activeData.options.push({label:"",value:""})},addTreeItem:function(){++this.idGlobal,this.dialogVisible=!0,this.currentNode=this.activeData.options},renderContent:function(e,t){var a=this,n=t.node,i=t.data;t.store;return e("div",{class:"custom-tree-node"},[e("span",[n.label]),e("span",{class:"node-operation"},[e("i",{on:{click:function(){return a.append(i)}},class:"el-icon-plus",attrs:{title:"添加"}}),e("i",{on:{click:function(){return a.remove(n,i)}},class:"el-icon-delete",attrs:{title:"删除"}})])])},append:function(e){e.children||this.$set(e,"children",[]),this.dialogVisible=!0,this.currentNode=e.children},remove:function(e,t){var a=e.parent,n=a.data.children||a.data,i=n.findIndex((function(e){return e.id===t.id}));n.splice(i,1)},addNode:function(e){this.currentNode.push(e)},setOptionValue:function(e,t){e.value=Object(l["j"])(t)?+t:t},setDefaultValue:function(e){return Array.isArray(e)?e.join(","):["string","number"].indexOf(e)>-1?e:"boolean"===typeof e?"".concat(e):e},onDefaultValueInput:function(e){Object(o["isArray"])(this.activeData.defaultValue)?this.$set(this.activeData,"defaultValue",e.split(",").map((function(e){return Object(l["j"])(e)?+e:e}))):["true","false"].indexOf(e)>-1?this.$set(this.activeData,"defaultValue",JSON.parse(e)):this.$set(this.activeData,"defaultValue",Object(l["j"])(e)?+e:e)},onSwitchValueInput:function(e,t){["true","false"].indexOf(e)>-1?this.$set(this.activeData,t,JSON.parse(e)):this.$set(this.activeData,t,Object(l["j"])(e)?+e:e)},setTimeValue:function(e,t){var a="week"===t?u.date:e;this.$set(this.activeData,"defaultValue",null),this.$set(this.activeData,"value-format",a),this.$set(this.activeData,"format",e)},spanChange:function(e){this.formConf.span=e},multipleChange:function(e){this.$set(this.activeData,"defaultValue",e?[]:"")},dateTypeChange:function(e){this.setTimeValue(u[e],e)},rangeChange:function(e){this.$set(this.activeData,"defaultValue",e?[this.activeData.min,this.activeData.max]:this.activeData.min)},rateTextChange:function(e){e&&(this.activeData["show-score"]=!1)},rateScoreChange:function(e){e&&(this.activeData["show-text"]=!1)},colorFormatChange:function(e){this.activeData.defaultValue=null,this.activeData["show-alpha"]=e.indexOf("a")>-1,this.activeData.renderKey=+new Date},openIconsDialog:function(e){this.iconsVisible=!0,this.currentIconModel=e},setIcon:function(e){this.activeData[this.currentIconModel]=e},tagChange:function(e){var t=c["b"].find((function(t){return t.tagIcon===e}));t||(t=c["d"].find((function(t){return t.tagIcon===e}))),this.$emit("tag-change",t)}}},p=d,h=(a("c24a"),a("2877")),m=Object(h["a"])(p,n,i,!1,null,"80832d0c",null);t["default"]=m.exports},"76f8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[a("basic-info-form",{ref:"basicInfo",attrs:{info:e.info}})],1),a("el-tab-pane",{attrs:{label:"字段信息",name:"cloum"}},[a("el-table",{ref:"dragTable",attrs:{data:e.cloumns,"row-key":"columnId","max-height":e.tableHeight}},[a("el-table-column",{attrs:{label:"序号",type:"index","min-width":"5%","class-name":"allowDrag"}}),a("el-table-column",{attrs:{label:"字段列名",prop:"columnName","min-width":"10%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"字段描述","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.columnComment,callback:function(a){e.$set(t.row,"columnComment",a)},expression:"scope.row.columnComment"}})]}}])}),a("el-table-column",{attrs:{label:"物理类型",prop:"columnType","min-width":"10%","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Java类型","min-width":"11%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.javaType,callback:function(a){e.$set(t.row,"javaType",a)},expression:"scope.row.javaType"}},[a("el-option",{attrs:{label:"Long",value:"Long"}}),a("el-option",{attrs:{label:"String",value:"String"}}),a("el-option",{attrs:{label:"Integer",value:"Integer"}}),a("el-option",{attrs:{label:"Double",value:"Double"}}),a("el-option",{attrs:{label:"BigDecimal",value:"BigDecimal"}}),a("el-option",{attrs:{label:"Date",value:"Date"}})],1)]}}])}),a("el-table-column",{attrs:{label:"java属性","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.javaField,callback:function(a){e.$set(t.row,"javaField",a)},expression:"scope.row.javaField"}})]}}])}),a("el-table-column",{attrs:{label:"插入","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{"true-label":"1"},model:{value:t.row.isInsert,callback:function(a){e.$set(t.row,"isInsert",a)},expression:"scope.row.isInsert"}})]}}])}),a("el-table-column",{attrs:{label:"编辑","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{"true-label":"1"},model:{value:t.row.isEdit,callback:function(a){e.$set(t.row,"isEdit",a)},expression:"scope.row.isEdit"}})]}}])}),a("el-table-column",{attrs:{label:"列表","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{"true-label":"1"},model:{value:t.row.isList,callback:function(a){e.$set(t.row,"isList",a)},expression:"scope.row.isList"}})]}}])}),a("el-table-column",{attrs:{label:"查询","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{"true-label":"1"},model:{value:t.row.isQuery,callback:function(a){e.$set(t.row,"isQuery",a)},expression:"scope.row.isQuery"}})]}}])}),a("el-table-column",{attrs:{label:"查询方式","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.queryType,callback:function(a){e.$set(t.row,"queryType",a)},expression:"scope.row.queryType"}},[a("el-option",{attrs:{label:"=",value:"EQ"}}),a("el-option",{attrs:{label:"!=",value:"NE"}}),a("el-option",{attrs:{label:">",value:"GT"}}),a("el-option",{attrs:{label:">=",value:"GTE"}}),a("el-option",{attrs:{label:"<",value:"LT"}}),a("el-option",{attrs:{label:"<=",value:"LTE"}}),a("el-option",{attrs:{label:"LIKE",value:"LIKE"}}),a("el-option",{attrs:{label:"BETWEEN",value:"BETWEEN"}})],1)]}}])}),a("el-table-column",{attrs:{label:"必填","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{"true-label":"1"},model:{value:t.row.isRequired,callback:function(a){e.$set(t.row,"isRequired",a)},expression:"scope.row.isRequired"}})]}}])}),a("el-table-column",{attrs:{label:"显示类型","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.htmlType,callback:function(a){e.$set(t.row,"htmlType",a)},expression:"scope.row.htmlType"}},[a("el-option",{attrs:{label:"文本框",value:"input"}}),a("el-option",{attrs:{label:"文本域",value:"textarea"}}),a("el-option",{attrs:{label:"下拉框",value:"select"}}),a("el-option",{attrs:{label:"单选框",value:"radio"}}),a("el-option",{attrs:{label:"复选框",value:"checkbox"}}),a("el-option",{attrs:{label:"日期控件",value:"datetime"}})],1)]}}])}),a("el-table-column",{attrs:{label:"字典类型","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.row.dictType,callback:function(a){e.$set(t.row,"dictType",a)},expression:"scope.row.dictType"}},e._l(e.dictOptions,(function(t){return a("el-option",{key:t.dictType,attrs:{label:t.dictName,value:t.dictType}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.dictName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.dictType))])])})),1)]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"生成信息",name:"genInfo"}},[a("gen-info-form",{ref:"genInfo",attrs:{info:e.info,menus:e.menus}})],1)],1),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{staticStyle:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.close()}}},[e._v("返回")])],1)],1)],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("a434"),a("4e82"),a("4b72")),r=a("ed45"),l=a("a6dc"),s=a("ed69"),c=a("8586"),u=a("53fe"),d=a.n(u),p={name:"GenEdit",components:{basicInfoForm:s["default"],genInfoForm:c["default"]},data:function(){return{activeName:"cloum",tableHeight:document.documentElement.scrollHeight-245+"px",cloumns:[],dictOptions:[],menus:[],info:{}}},created:function(){var e=this,t=this.$route.params&&this.$route.params.tableId;t&&(Object(o["c"])(t).then((function(t){e.cloumns=t.data.rows,e.info=t.data.info})),Object(r["g"])().then((function(t){e.dictOptions=t.data})),Object(l["e"])().then((function(t){e.menus=e.handleTree(t.data,"menuId")})))},methods:{submitForm:function(){var e=this,t=this.$refs.basicInfo.$refs.basicInfoForm,a=this.$refs.genInfo.$refs.genInfoForm;Promise.all([t,a].map(this.getFormPromise)).then((function(n){var i=n.every((function(e){return!!e}));if(i){var r=Object.assign({},t.model,a.model);r.columns=e.cloumns,r.params={treeCode:r.treeCode,treeName:r.treeName,treeParentCode:r.treeParentCode,parentMenuId:r.parentMenuId},Object(o["h"])(r).then((function(t){e.msgSuccess(t.msg),200===t.code&&e.close()}))}else e.msgError("表单校验未通过，请重新检查提交内容")}))},getFormPromise:function(e){return new Promise((function(t){e.validate((function(e){t(e)}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/tool/gen",query:{t:Date.now()}})}},mounted:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];d.a.create(t,{handle:".allowDrag",onEnd:function(t){var a=e.cloumns.splice(t.oldIndex,1)[0];for(var n in e.cloumns.splice(t.newIndex,0,a),e.cloumns)e.cloumns[n].sort=parseInt(n)+1}})}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},"782a":function(e,t,a){"use strict";a("8027c")},7941:function(e,t,a){"use strict";a("c54b")},"7a07":function(e,t,a){"use strict";a("c37f")},"7a09":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticStyle:{width:"475px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"单据日期",prop:"bizDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"拆分状态",prop:"billSplitType"}},[a("el-select",{attrs:{placeholder:"请选择拆分状态",clearable:"",size:"small"},model:{value:e.queryParams.billSplitType,callback:function(t){e.$set(e.queryParams,"billSplitType",t)},expression:"queryParams.billSplitType"}},e._l(e.billSplitTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据状态",prop:"billStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",size:"small"},model:{value:e.queryParams.billStatus,callback:function(t){e.$set(e.queryParams,"billStatus",t)},expression:"queryParams.billStatus"}},e._l(e.billStatusOptions,(function(t){return"1"!=t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:sycnGoods"],expression:"['output:bill:sycnGoods']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.synchClassCode}},[e._v("同步税编")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:adjust"],expression:"['output:bill:adjust']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.adjustError}},[e._v("调整误差")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:flagOpen"],expression:"['output:bill:flagOpen']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.flagOpen}},[e._v("标记已开")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:remove"],expression:"['output:bill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:tohand"],expression:"['output:bill:tohand']"}],attrs:{type:"info",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleHandOpen}},[e._v("转手动开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:openQuick"],expression:"['output:bill:openQuick']"}],attrs:{type:"info",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleOpen}},[e._v("直接开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("导入导出")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:export"],expression:"['output:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleExport(t)}}},[e._v("导出主体")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:export"],expression:"['output:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleDetailExport(t)}}},[e._v("导出明细")])],1)],1)],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module,colorExplain:"1"},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"billMainTable",attrs:{data:e.billList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"cell-click":e.cellClick,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{style:e.setFontColor(n.row),on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(e._s(n.row[t.prop]))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}")))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{prop:"note",width:"200",label:"备注",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showInput?a("el-input",{attrs:{type:"textarea"},on:{blur:function(a){return e.noteInputBlur(t.row)}},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}}):a("span",[e._v(e._s(t.row.note))])]}}])}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"1"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"标记为已开票",visible:e.flagopen,"append-to-body":""},on:{"update:visible":function(t){e.flagopen=t},close:e.flagopenDialogClose}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagForm",attrs:{model:e.flagForm,rules:e.flagRules,size:"medium","label-width":"110px"}},[["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",maxlength:12,clearable:""},model:{value:e.flagForm.invCode,callback:function(t){e.$set(e.flagForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:["81","82"].includes(e.flagForm.invType)?20:8,clearable:""},model:{value:e.flagForm.invNo,callback:function(t){e.$set(e.flagForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagForm.invDate,callback:function(t){e.$set(e.flagForm,"invDate",t)},expression:"flagForm.invDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{readonly:""},model:{value:e.flagForm.totalAmountWithoutTax,callback:function(t){e.$set(e.flagForm,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"flagForm.totalAmountWithoutTax"}})],1)],1),["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},model:{value:e.flagForm.cashier,callback:function(t){e.$set(e.flagForm,"cashier","string"===typeof t?t.trim():t)},expression:"flagForm.cashier"}})],1)],1),["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},model:{value:e.flagForm.checker,callback:function(t){e.$set(e.flagForm,"checker","string"===typeof t?t.trim():t)},expression:"flagForm.checker"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagForm.invoicer,callback:function(t){e.$set(e.flagForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagForm.checkCode,callback:function(t){e.$set(e.flagForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagForm.checkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密文",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密文",maxlength:200,clearable:""},model:{value:e.flagForm.pwdCode,callback:function(t){e.$set(e.flagForm,"pwdCode","string"===typeof t?t.trim():t)},expression:"flagForm.pwdCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagCancel}},[e._v("取 消")])],1)],1),a("Fptk",{ref:"billdetailcomp",on:{updateBillTable:e.updateBillTable,openBill:e.handleOpen}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("split-bill-modal",{ref:"splitModal",on:{updateBillTable:e.updateBillTable}}),a("merge-bill-modal",{ref:"mergeModal",on:{updateBillTable:e.updateBillTable}}),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"复制发票",visible:e.copyInvoiceOpen,width:"400px","append-to-body":"",id:"copyInvoiceModal"},on:{"update:visible":function(t){e.copyInvoiceOpen=t},close:e.copyInvoiceClose}},[a("div",[a("el-form",{ref:"copyInvoiceForm",attrs:{model:e.copyInvoiceForm,rules:e.copyInvoiceFormRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.copyInvoiceForm.invCode,callback:function(t){e.$set(e.copyInvoiceForm,"invCode",t)},expression:"copyInvoiceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8},model:{value:e.copyInvoiceForm.invNo,callback:function(t){e.$set(e.copyInvoiceForm,"invNo",t)},expression:"copyInvoiceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureCopyInvoice}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.copyInvoiceOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("d81d"),a("4de4"),a("25f0"),a("ac1f"),a("5319"),a("498a"),a("5f87")),l=a("c85c"),s=a("7e6f"),c=a("c92e"),u=a("00c6"),d=a("e98e"),p=a("c10b"),h=a("bbc3"),m=a("5509"),f=a("17ac"),b=a("b526"),g=a("c38a"),v=a("ed08"),y={name:"Auto",components:{Fptk:h["default"],SplitBillModal:m["default"],MergeBillModal:f["default"],TotalRowTable:b["default"]},data:function(){return{updateInvTypeForm:{invType:"2"},updateInvTypeOpen:!1,mainLoading:!1,module:"bill",pageSizes:[],tableHeight:null,showProgress:!1,functionName:"开具中:",loading:!0,ids:[],rows:[],dateRange:[],single:!0,multiple:!0,many:!0,showSearch:!0,total:0,billList:[],billListPart:[],rollLoadTimes:0,title:"",open:!1,flagopen:!1,sapopen:!1,billSplitTypeOptions:[],templateOptions:[],invTypeOptions:[],billStatusOptions:[],billSourceOptions:[],billTypeOptions:[],detailFlagOptions:[],applyStatusOptions:[],redFlagOptions:[],taxnoIdOptions:[],headTypeOptions:[],queryParams:{billNos:null,pageNum:1,pageSize:500,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null,tdyslxdm:"",shopNo:null},form:{},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(r["a"])()},url:"/prod-api/output/bill/importBillData"},flagForm:{},rules:{},openInvoiceIndex:0,openIdsArr:[],openRowsArr:[],openResult:[],openValidIndex:0,openValidError:[],openEnd:!1,flagRules:{invCode:[{required:!0,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:["blur","change"]}],invNo:[{required:!0,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:"blur"}]},operationIndex:0,operationIdArr:[],operationRowArr:[],columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:2},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:180,columnSort:3},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:180,columnSort:4},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:180,columnSort:5},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:6},{label:"拆分状态",prop:"billSplitType",align:"center",show:!0,width:180,columnSort:7},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:180,columnSort:8},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:9},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:10},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:200,columnSort:11}],stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null},sortParam:{column:"",columnOrder:""},copyInvoiceOpen:!1,copyInvoiceForm:{invCode:null,invNo:null},copyInvoiceFormRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},checkboxClick:!1,loadingTime:null}},computed:{totalTableData:function(){var e=Object(v["e"])(this.rows);return 0==e.length&&(e=Object(v["e"])(this.billList)),e},setFontColor:function(){return function(e){return"1"==e.allStatus?"color: violet;cursor: pointer;":"2"==e.allStatus?"color: blue;cursor: pointer;":"3"==e.allStatus?"color: red;cursor: pointer;":"4"==e.allStatus?"color: orange;cursor: pointer;":"5"==e.allStatus?"color: green;cursor: pointer;":"color: rgb(24, 144, 255);cursor: pointer;"}}},created:function(){var e=this,t={module:this.module};Promise.all([Object(p["b"])(t),Object(p["a"])(t)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].columnSort=n,null==e.columnsArr[n].width&&("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:e.columnsArr[n].width=100)}}));var a=this.$moment(new Date);this.dateRange=[a.startOf("month").format("YYYY-MM-DD"),a.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.getList()})),this.getDicts("bill_status").then((function(t){e.billStatusOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.redFlagOptions=t.data,e.taxnoIdOptions=t.data})),this.getDicts("approve_status").then((function(t){e.applyStatusOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.billMainTable.doLayout()}))},importTemplate:function(){var e=this.selectDictLabel(this.templateOptions,"billTemplate");document.location=e},getList:function(){var e=this;if(this.loading=!0,0!=this.dateRange.length){this.queryParams.autoOpen="1",this.queryParams.beginBizDate=this.dateRange[0]+" 00:00:00",this.queryParams.endBizDate=this.dateRange[1]+" 23:59:59";var t=Object.assign(Object(v["e"])(this.queryParams),Object(v["e"])(this.sortParam));Object(l["o"])(t).then((function(t){e.billList=t.rows;var a,n=Object(o["a"])(e.billList);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.$set(i,"showInput",!1)}}catch(r){n.e(r)}finally{n.f()}e.total=t.total,e.loading=!1}))}else this.msgError("请选择单据日期")},getTaxNoSeller:function(e){var t=this;["81","82","85","86"].includes(e.invType)?Object(s["b"])().then((function(a){var n,i=a.sellers;if(null==i||0==i.length)return t.flagopen=!0,void t.$nextTick((function(){t.$refs.flagForm.clearValidate()}));for(var o=0;o<i.length;o++)if("1"==i[o].status){n=i[o];break}null==n&&(n=i[0]),t.$set(t.flagForm,"invoicer",n.drawer),["85","86"].includes(e.invType)&&(t.$set(t.flagForm,"checker",n.checker),t.$set(t.flagForm,"cashier",n.drawer)),t.flagopen=!0,t.$nextTick((function(){t.$refs.flagForm.clearValidate()}))})):Object(l["m"])().then((function(e){var a,n=e.sellers;if(null==n||0==n.length)return t.flagopen=!0,void t.$nextTick((function(){t.$refs.flagForm.clearValidate()}));for(var i=0;i<n.length;i++)if("1"==n[i].status){a=n[i];break}null==a&&(a=n[0]),t.$set(t.flagForm,"cashier",a.payee),t.$set(t.flagForm,"checker",a.checker),t.$set(t.flagForm,"invoicer",a.drawer),t.flagopen=!0,t.$nextTick((function(){t.$refs.flagForm.clearValidate()}))}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.billStatus)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},taxnoIdFormat:function(e,t){return this.selectDictLabel(this.taxnoIdOptions,e.taxnoId)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},cancel:function(){this.open=!1,this.reset()},flagCancel:function(){this.flagopen=!1,this.flagReset()},flagReset:function(){this.flagForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,cashier:null,checker:null,invoicer:null,checkCode:null,pwdCode:null},this.resetForm("flagForm")},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},flagOpen:function(){var e=this.rows;this.$set(this.flagForm,"id",e[0].id),this.$set(this.flagForm,"invType",e[0].invType),this.$set(this.flagForm,"bizDate",e[0].bizDate),this.$set(this.flagForm,"totalAmountWithoutTax",e[0].totalAmountWithoutTax),this.getTaxNoSeller(e[0])},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.many=e.length<2,this.rows=e)},handleAdd:function(){var e=this;this.reset(),this.$refs.billdetailcomp.billDialogShow(),this.$refs.billdetailcomp.editDialogTitle("1"),this.$nextTick((function(){e.$refs.billdetailcomp.getBillNo()}))},checkBaseInfo:function(){var e=this;return Object(l["d"])().then((function(t){return 1001==t.code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){})),new Promise((function(){}))):2002==t.code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid1:function(){var e,t=this,a=!1;return["81","82","85","86"].includes(this.openRowsArr[0].invType)?(e=Object(s["a"])(),a=!0):e=Object(l["d"])(),Promise.all([e]).then((function(e){return 1001==e[0].code?(t.showProgress=!1,clearInterval(t.loadingTime),t.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==e[0].code?(t.showProgress=!1,clearInterval(t.loadingTime),t.$confirm("".concat(a?"全电账号需要刷脸验证，是否跳转到账号管理页面?":"您还未启用税盘，是否跳转到终端启用管理页面?"),"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({name:"Usemanager",params:{isQd:a}})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid2:function(){var e=this;if(this.openValidIndex++,this.openValidIndex<=this.openIdsArr.length&&!this.openEnd)this.invoiceOwnValid(this.openValidIndex-1);else{var t=this.openIdsArr.filter((function(t,a){return-1==e.openValidError.indexOf(a)}));this.openEnd||(t.length>0?(this.openIdsArr=Object(v["e"])(t),this.openValidSuccess()):this.msgError("请重新选择发票")),this.openValidIndex=0,this.openValidError.length=0,this.openEnd=!1}},invoiceOwnValid:function(e){var t=this,a=this.openIdsArr[e],n={id:a,beginBizDate:this.dateRange[0]+" 00:00:00",endBizDate:this.dateRange[1]+" 23:59:59"},i=Object(l["z"])(n);return Promise.all([i]).then((function(a){"200"!=a[0].code?e==t.openIdsArr.length-1?t.$confirm(a[0].msg,"警告",{confirmButtonText:"完成",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.$confirm(a[0].msg+",是否继续开票?","警告",{confirmButtonText:"跳过",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(e),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()})):t.openValid2()}))},handleUpdate:function(e){var t=this;void 0==e.id&&(e=this.rows[0]),this.reset();var a=e.id||this.ids[0],n={id:a,bizDate:e.bizDate};this.mainLoading=!0,this.$refs.billdetailcomp.fillBillDialog(n).then((function(e){t.mainLoading=!1})).catch((function(){t.mainLoading=!1}))},adjustError:function(e){var t=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="误差调整中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationRowArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.adjustErrorLogic()},adjustErrorLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(l["b"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg):e.msgError("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(l["v"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(l["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagForm:function(){var e=this;this.$refs["flagForm"].validate((function(t){if(t){Object(g["g"])(100,"标记中",e,!1);var a,n,i,o=Object(v["e"])(e.flagForm);if(o.pwdCode=window.btoa(o.pwdCode),["81","82"].includes(o.invType))o.invCode=null===(n=o.invNo)||void 0===n?void 0:n.substr(0,12),o.invNo=null===(i=o.invNo)||void 0===i?void 0:i.substr(12),a=Object(l["i"])(o);else a=["85","86"].includes(o.invType)?Object(l["i"])(o):Object(l["h"])(o);Promise.all([a]).then((function(t){var a=t[0];200===a.code?(e.msgSuccess("标记成功"),e.flagopen=!1,e.getList()):e.msgError(a.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))}}))},flagopenDialogClose:function(){this.flagForm={}},synchClassCode:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否同步所选商品税收编码?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="同步中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["u"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否确认删除所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="删除中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["e"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleHandOpen:function(){var e=this;this.$confirm("是否转为手动开具?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=Object(v["e"])(e.dateRange);t[0]=t[0]+" 00:00:00",t[1]=t[1]+" 23:59:59";var a={ids:Object(v["e"])(e.ids),autoOpen:"0",dateRange:t};Object(l["x"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)}))}))},handleOpen:function(e){var t=this;if(!this.queryParams.invType&&!e.id&&this.ids.length>1)this.msgError("发票类型搜索条件为空时只允许开具一行！");else{var a=e.id||this.ids;"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a)),this.openIdsArr=Object(v["e"])(a);var n=void 0!=e.id?e:this.rows;"[object Array]"!=Object.prototype.toString.call(n)&&(n=new Array(n)),this.openRowsArr=Object(v["e"])(n),this.$confirm("是否确认开具所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(g["g"])(100,"加载中",t,!1),t.openValid1()})).then((function(){t.openValid2()})).catch((function(e){console.log("执行中断了"),t.showProgress=!1,clearInterval(t.loadingTime)}))}},openValidSuccess:function(){var e=this;if(console.log("校验完成了!!!!"),["81","82","85","86"].includes(this.openRowsArr[0].invType))this.sureStockInfo();else{var t=this.openRowsArr[0].invType,a={invType:t};Object(d["b"])(a).then((function(t){200==t.code?(e.stockInfoForm=t.data,e.stockInfoForm.fplx=e.selectDictLabel(e.invTypeOptions,e.stockInfoForm.fplx),e.stockInfoOpen=!0):e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.msgError("获取税盘库存信息失败"),e.showProgress=!1,clearInterval(e.loadingTime)}))}},sureStockInfo:function(){var e=this;this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openInvoiceList:function(){var e=this;this.openInvoiceIndex++,1!=this.openInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.openInvoiceIndex/this.openIdsArr.length*100));var t=this.openRowsArr[this.openInvoiceIndex-1],a=!1;this.openInvoice(t).then((function(n){console.log("dang qian row:"+t),"200"==n.code?e.msgSuccess("第"+e.openInvoiceIndex+"张单据"+n.msg):1008==n.code?(a=!0,e.$confirm(n.msg+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"跳过",type:"warning",closeOnClickModal:!1}).then((function(){e.specialOpenInvoice(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){e.openInvoiceIndex>=e.openRowsArr.length?(e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))):e.msgError("第"+e.openInvoiceIndex+"张单据开具失败："+n.msg),a||(e.openResult.push(n),e.$refs.myProgress.setProgressNum(parseInt(e.openInvoiceIndex/e.openIdsArr.length*100)),e.openInvoiceIndex<e.openIdsArr.length?e.openInvoiceList():(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()))})).catch((function(t){console.log("这里是失败的"),e.openInvoiceIndex>=e.openIdsArr.length?(e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.$confirm(t.message+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.openInvoiceList()})).catch((function(){e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()}))}))},openInvoice:function(e){var t=e.id,a={id:t,bizDate:e.bizDate};return["81","82","85","86"].includes(e.invType)?Object(s["c"])(a):Object(l["p"])(a)},specialOpenInvoice:function(e){var t=this,a={id:e.id,bizDate:e.bizDate,special:"1"};Object(l["p"])(a).then((function(e){"200"==e.code?t.msgSuccess("第"+t.openInvoiceIndex+"张单据"+e.msg):t.msgError("第"+t.openInvoiceIndex+"张单据开具失败："+e.msg),t.$refs.myProgress.setProgressNum(parseInt(t.openInvoiceIndex/t.openIdsArr.length*100)),t.openInvoiceIndex<t.openIdsArr.length?t.openInvoiceList():(t.showProgress=!1,t.$refs.myProgress.setProgressNum(0),t.openInvoiceIndex=0,t.openResult=[],t.openIdsArr=[],t.getList())}))},handleImport:function(){this.upload.title="单据导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()},handleExport:function(){var e=this,t=Object(v["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["f"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理.xls",e)})).catch((function(){}))},handleDetailExport:function(){var e=this,t=Object(v["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["g"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.billMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.billList,"billMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.billList,"billMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},updateBillTable:function(){this.getList()},splitBill:function(){var e=this.rows[0];if("2"!=e.billSplitType){var t={id:e.id,bizDate:e.bizDate};this.$refs.splitModal.fillBillDialog(t)}else this.msgError("该单据已进行过合并，不能拆分")},revertBill:function(){var e=this;"0"!=this.rows[0].billSplitType?this.$confirm("是否确认还原所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIdArr=Object(v["e"])(e.ids),e.operationRowArr=Object(v["e"])(e.rows),e.showProgress=!0,e.functionName="还原中",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.revertBillLogic()})).catch((function(){})):this.msgError("该单据未进行过拆分合并，不能还原")},revertBillLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=this.dateRange;Object(l["r"])(t,a).then((function(t){200==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据还原失败:"+t.msg),e.operationIndex<e.operationIdArr.length?e.revertBillLogic():(e.renewOperationParam(),e.getList())})).catch((function(){e.renewOperationParam(),e.getList()}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},manualMergeBill:function(){for(var e=1;e<this.rows.length;e++)if(this.rows[0].invType!=this.rows[e].invType)return void this.msgError("合并时所选单据类型必须一致");for(var t=0;t<this.rows.length;t++)if("1"==this.rows[t].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var a=this.ids,n=this.dateRange;this.$refs.mergeModal.mergeDialogShow(a,n)},defaultMergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n={billIds:this.ids,bizDateRange:this.dateRange,goodCode:"1",withoutTaxAmoutLimit:"",noteDealType:"2",mergeType:"5",billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["c"])(n).then((function(t){clearInterval(e.loadingTime),e.showProgress=!1;var a=t.object;if(0!=a.length){for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}else e.msgError(t.msg)}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},ccdmergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n=this.ids,i=this.dateRange,o={billIds:n,bizDateRange:i,billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["a"])(o).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))},ccdmergeBillTs:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=!1,n=0;n<this.rows.length;n++)if("1"==this.rows[n].billSplitType){a=!0;break}if(a){var i=this.ids,o=this.dateRange,r={billIds:i,bizDateRange:o,billSplitType:"3"};this.dynamicLoadingShow(400,"特殊合并中"),Object(c["b"])(r).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))}else this.msgError("特殊合并时所选单据必须含有拆分状态")},splitByAmount:function(){for(var e=this,t=0;t<this.rows.length;t++)if("2"==this.rows[t].billSplitType)return void this.msgError("存在单据已进行过合并，不能拆分");this.operationIdArr=Object(v["e"])(this.ids),this.operationRowArr=Object(v["e"])(this.rows),this.showProgress=!0,this.functionName="拆分中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.splitByAmountLogic()},splitByAmountLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=null,n={id:t,roundingNumber:a,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(u["b"])(n).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.operationIndex<e.operationIdArr.length?e.splitByAmountLogic():(e.renewOperationParam(),e.getList())})).catch((function(t){e.renewOperationParam(),e.getList()}))},handleInvTypeUpdate:function(){this.updateInvTypeOpen=!0},submitUpdateInvType:function(){var e=this,t=Object(v["e"])(this.dateRange);t[0]=t[0]+" 00:00:00",t[1]=t[1]+" 23:59:59";var a={ids:Object(v["e"])(this.ids),dateRange:t,invType:this.updateInvTypeForm.invType};Object(l["y"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.updateInvTypeOpen=!1,e.getList()):e.msgError(t.msg)}))},updateInvTypeDialogClose:function(){this.updateInvTypeForm={invType:"2"}},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;return t.row_index=a,"1"==t.allStatus?"violet":"2"==t.allStatus?"deep-blue":"3"==t.allStatus?"red":"4"==t.allStatus?"orange":"5"==t.allStatus?"green":void 0},noteInputBlur:function(e){e.showInput=!1;var t={id:e.id,bizDate:e.bizDate,note:e.note};Object(l["w"])(t);for(var a=0;a<this.billList.length;a++)this.billList[a].showInput=!1},cellClick:function(e,t){"note"==t.property?0==e.showInput&&(e.showInput=!e.showInput):e.showInput=!1},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},copyInvoice:function(){var e=this;this.copyInvoiceOpen=!0,this.$nextTick((function(){e.$refs.copyInvoiceForm.clearValidate()}))},copyInvoiceClose:function(){this.copyInvoiceForm={invCode:null,invNo:null}},sureCopyInvoice:function(){var e=this;this.$refs.copyInvoiceForm.validate((function(t){if(t){var a={invCodeNo:e.copyInvoiceForm.invCode+"_"+e.copyInvoiceForm.invNo};e.$refs.billdetailcomp.fillBillDialogByInvCodeNo(a).then((function(t){0!=t&&(e.copyInvoiceOpen=!1)}))}}))},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},_=y,x=(a("8c96"),a("2877")),w=Object(x["a"])(_,n,i,!1,null,"59b991ef",null);t["default"]=w.exports},"7a18":function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"h",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return d}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/customer/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/customer/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/output/customer",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/output/customer",method:"put",data:e})}function s(e){var t={};if(e instanceof Array)t={ids:e};else{var a=[];a.push(e),t={ids:a}}return Object(n["a"])({url:"/output/customer/remove",method:"post",data:t})}function c(e){return Object(n["a"])({url:"/output/customer/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/output/customer/upOrSaveCustomerByTaxNo",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/output/customer/getInfoByTaxNo/"+e.taxNo,method:"post"})}},"7af1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"new-version-bill-manger-modal",attrs:{title:e.baseDialog.title,visible:e.baseDialog.open,"append-to-body":"",id:"newVersionBillManagerModal","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.baseDialog,"open",t)},close:e.billDialogClose}},[a("el-form",{ref:"form",staticClass:"dialog--main-form",attrs:{model:e.form,rules:e.rules,size:"mini"}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"dialog-content-top"},[a("div",{staticClass:"dialog-content-top-operation"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.saveBill("2")}}},[e._v("发票开具")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleCopy}},[e._v("复制填开")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.saveBill("1")}}},[e._v("保存单据")])],1),a("div",{staticClass:"bill-info-content"},[a("el-row",[a("el-col",{staticClass:"bill-info-content-left",attrs:{span:8}},[a("div",{staticClass:"qr-code"}),a("div",[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型"},on:{change:e.billTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1),["81","82"].includes(e.form.invType)?[a("el-form-item",{attrs:{label:"特定业务",prop:"tdyslxdm"}},[a("el-select",{model:{value:e.form.tdyslxdm,callback:function(t){e.$set(e.form,"tdyslxdm",t)},expression:"form.tdyslxdm"}},[a("el-option",{attrs:{value:"",label:"无"}}),a("el-option",{attrs:{value:"01",label:"成品油"}}),a("el-option",{attrs:{value:"03",label:"建筑服务发票"}}),a("el-option",{attrs:{value:"06",label:"不动产经营租赁服务"}})],1)],1)]:[a("el-form-item",{attrs:{label:"票种性质",prop:"specialTicket"}},[a("el-select",{model:{value:e.form.specialTicket,callback:function(t){e.$set(e.form,"specialTicket",t)},expression:"form.specialTicket"}},e._l(e.specialTicketOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],a("el-form-item",{attrs:{label:"差额征税",prop:""}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.noneDefine,callback:function(t){e.noneDefine=t},expression:"noneDefine"}})],1),a("el-form-item",{attrs:{label:"减按征税",prop:""}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.noneDefine,callback:function(t){e.noneDefine=t},expression:"noneDefine"}})],1)],2)]),a("el-col",{staticClass:"bill-info-content-middle",attrs:{span:8}},[a("div",{staticClass:"inv-type-title"},[a("span",[e._v(e._s(e.fplxdesc)+e._s("("+(e.redInvoiceFlag?"红票":"蓝票")+")"))]),a("div",{staticClass:"inv-type-title-line"}),a("div",{staticClass:"inv-type-title-line"}),a("div",{staticClass:"inv-type-title-line"})])]),a("el-col",{attrs:{span:8}},[["81","82"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票代码",maxlength:12,clearable:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票号码",maxlength:["81","82"].includes(e.form.invType)?20:8,clearable:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag&&"0"==e.form.invType,expression:"redInvoiceFlag && form.invType == '0'"}],attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{placeholder:"请输入红字申请单",maxlength:20,clearable:""},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo","string"===typeof t?t.trim():t)},expression:"form.negNativeNo"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"bill-no-content"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",[e._v("单据编号:"+e._s(e.form.billNo))])]),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同编号",prop:"","label-width":"100px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同名称",prop:"","label-width":"100px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目/门店",prop:"shopNo","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.shopNo,callback:function(t){e.$set(e.form,"shopNo",t)},expression:"form.shopNo"}})],1)],1)],1)],1)]),a("div",{staticClass:"dialog-content-middle"},[a("div",{staticClass:"dialog-buy-sell-content"},[a("el-row",[a("el-col",{class:["dialog-buy",{"dialog-buy-none":!e.showBuySell}],attrs:{span:12}},[a("div",{staticClass:"dialog-buy-left",on:{click:e.handleShowBuySell}},[e.showBuySell?[a("span",[e._v("购买方信息")]),a("i",{staticClass:"el-icon-caret-top"})]:[a("span",[e._v("购方")]),a("i",{staticClass:"el-icon-caret-bottom"})]],2),a("div",{staticClass:"dialog-buy-right"},[a("el-row",[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"统一社会信用代码/纳税人识别号",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买方地址",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方地址",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddr,callback:function(t){e.$set(e.form,"buyAddr",t)},expression:"form.buyAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方电话",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTel,callback:function(t){e.$set(e.form,"buyTel",t)},expression:"form.buyTel"}})],1)],1)]:[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1)]],2),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方开户银行",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBank,callback:function(t){e.$set(e.form,"buyBank",t)},expression:"form.buyBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行账号",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方账号",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAccount,callback:function(t){e.$set(e.form,"buyAccount",t)},expression:"form.buyAccount"}})],1)],1)]:[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行及账号",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)]],2)],1)]),a("el-col",{class:["dialog-buy",{"dialog-buy-none":!e.showBuySell}],attrs:{span:12}},[a("div",{staticClass:"dialog-buy-left",on:{click:e.handleShowBuySell}},[e.showBuySell?[a("span",[e._v("销售方信息")]),a("i",{staticClass:"el-icon-caret-top"})]:[a("span",[e._v("销方")]),a("i",{staticClass:"el-icon-caret-bottom"})]],2),a("div",{staticClass:"dialog-buy-right"},[a("el-row",[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"统一社会信用代码/纳税人识别号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销售方地址",prop:"sellAddr"}},[a("el-input",{attrs:{placeholder:"请输入销方地址",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr",t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"sellTel"}},[a("el-input",{attrs:{placeholder:"请输入销方电话",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel",t)},expression:"form.sellTel"}})],1)],1)]:[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)]],2),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销方开户银行",prop:"sellBank"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行账号",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入销方账号",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)]:[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)]],2)],1)])],1)],1),a("div",{staticClass:"operation-content"},[a("div",{staticClass:"operation-content-left"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBillDetailRow}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.redInvoiceFlag},on:{click:e.discountSetUp}},[e._v("折扣")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleDetailImport}},[e._v("明细导入")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setDifferenceDeduct}},[e._v("差额")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.mergeDiscount}},[e._v("合并折扣")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.mergeBillDetail}},[e._v("合并明细")]),a("el-switch",{staticStyle:{margin:"0 10px"},attrs:{"active-text":"含税","inactive-text":"不含税","active-value":"1","inactive-value":"0"},model:{value:e.hsbz,callback:function(t){e.hsbz=t},expression:"hsbz"}})],1),a("div",{staticClass:"operation-content-right"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleClearReset}},[e._v("清空重填")])],1)]),a("div",{staticClass:"detail-content"},[a("u-table",{ref:"billDetailTable",style:{width:"100%","min-height":"110px"},attrs:{data:e.billDetailsData,height:e.getTableMinHeight,"min-height":"120","use-virtual":"","row-height":38}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"项目名称","min-width":180,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("项目名称 ")]}},{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,size:"mini"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{size:"mini"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,3016971144)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("(不含税)金额 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,1048564850)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("(含税)金额 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("税率 ")]}},{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("税额 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.taxAmountChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])}),a("u-table-column",{attrs:{label:"是否优惠",prop:"preferentialFlag",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:"",placeholder:""},model:{value:t.row.preferentialFlag,callback:function(a){e.$set(t.row,"preferentialFlag",a)},expression:"scope.row.preferentialFlag"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)]}}])}),a("u-table-column",{attrs:{label:"优惠内容",prop:"preferentialType"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}})]}}])}),a("u-table-column",{attrs:{label:"零税率标识",prop:"taxZeroRate",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:"",placeholder:""},model:{value:t.row.taxZeroRate,callback:function(a){e.$set(t.row,"taxZeroRate",a)},expression:"scope.row.taxZeroRate"}},[a("el-option",{attrs:{value:"",label:"非零税率"}}),a("el-option",{attrs:{value:"0",label:"出口退税"}}),a("el-option",{attrs:{value:"1",label:"免税"}}),a("el-option",{attrs:{value:"2",label:"不征收"}}),a("el-option",{attrs:{value:"3",label:"普通零税率"}})],1)]}}])})],1)],1),a("div",{staticClass:"detail-total-content"},[a("el-table",{staticStyle:{},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"left",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1),a("div",{staticClass:"note-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注信息",prop:"note"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:230,clearable:"","show-word-limit":""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1)],1),"03"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-建筑服务")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地增值税项目编号",prop:"tdywxx.jzfw.tdzzsxmbh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入土地增值税项目编号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.jzfw,"tdzzsxmbh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.tdzzsxmbh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑服务发生地",prop:"tdywxx.jzfw.jzfwfsd","label-width":"160px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择建筑服务发生地"},model:{value:e.form.tdywxx.jzfw.jzfwfsd,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzfwfsd",t)},expression:"form.tdywxx.jzfw.jzfwfsd"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"fsdxxdz"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.fsdxxdz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"fsdxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.fsdxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑项目名称",prop:"tdywxx.jzfw.jzxmmc","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入建筑项目名称",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.jzxmmc,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzxmmc","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.jzxmmc"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.jzfw.kdsbz","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输详细地址",clearable:""},model:{value:e.form.tdywxx.jzfw.kdsbz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1)],1)]):e._e(),"06"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-不动产经营租赁服务")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz","label-width":"160px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择不动产地址"},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"bdcxxdz","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租赁期起止","label-width":"160px",prop:"zlqDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.zlqDateRange,callback:function(t){e.zlqDateRange=t},expression:"zlqDateRange"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跨地（市）标志",clearable:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入产权证书/不动产权证号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择面积单位",clearable:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)],1)]):e._e(),"11"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-不动产销售")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产单元代码/网签合同备案编号","label-width":"240px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz","label-width":"160px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择不动产地址"},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"bdcxxdz","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz","label-width":"240px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跨地（市）标志",clearable:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地增值税项目编号","label-width":"160px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"核定计税价格"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实际成交含税金额","label-width":"240px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入产权证书/不动产权证号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择面积单位",clearable:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)],1)]):e._e(),"12"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-拖拉机和联合收割机")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发动机号码","label-width":"160px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"底盘号/机架号","label-width":"160px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1)],1)]):e._e(),"13"==e.form.tdyslxdm?a("div",{staticClass:"special-info-transport"},[a("div",{staticClass:"special-info-transport-top"},[a("div",{staticClass:"special-info-transport-top-left"},[e._v("特定信息-货物运输服务")]),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("批量导入")])],1)]),a("div",{staticClass:"special-info-transport-bottom"},[a("el-table",[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"运输工具种类"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"运输工具牌号"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"起运地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"到达地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"运输货物名称"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)})],1)],1)]):e._e(),"14"==e.form.tdyslxdm?a("div",{staticClass:"special-info-transport"},[a("div",{staticClass:"special-info-transport-top"},[a("div",{staticClass:"special-info-transport-top-left"},[e._v("特定信息-旅客运输服务")]),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("批量导入")])],1)]),a("div",{staticClass:"special-info-transport-bottom"},[a("el-table",[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"出行人"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出行日期"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出行人证件类型"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出行人证号号码"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出发地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"到达地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"交通工具类型"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"等级"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)})],1)],1)]):e._e()],1),a("div",{staticClass:"dialog-content-bottom"},[a("el-row",[["81","82"].includes(e.form.invType)?e._e():a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier",t)},expression:"form.cashier"}})],1)],1),["81","82"].includes(e.form.invType)?e._e():a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer",t)},expression:"form.invoicer"}})],1)],1),["51","52","81","82"].includes(e.form.invType)?a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"收件邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail",t)},expression:"form.buyEmail"}})],1)],1):e._e(),["51","52","81","82"].includes(e.form.invType)?a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"收件电话",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo",t)},expression:"form.buyTelNo"}})],1)],1):e._e()],1)],1)])])],1),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountLine,callback:function(t){e.$set(e.discountForm,"discountLine",t)},expression:"discountForm.discountLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"发票引入",visible:e.introduceOpen,width:"400px","append-to-body":"",id:"introduceModal"},on:{"update:visible":function(t){e.introduceOpen=t},close:e.introduceDialogClose}},[a("div",[a("el-form",{ref:"introduceForm",attrs:{model:e.introduceForm,rules:e.introduceRules,size:"small","label-width":"100px"}},[["81","82"].includes(e.form.invType)?e._e():a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.introduceForm.invCode,callback:function(t){e.$set(e.introduceForm,"invCode",t)},expression:"introduceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:["81","82"].includes(e.form.invType)?20:8},model:{value:e.introduceForm.invNo,callback:function(t){e.$set(e.introduceForm,"invNo",t)},expression:"introduceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitIntroduce}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.introduceOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:e.detailUpload.title,visible:e.detailUpload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.detailUpload,"open",t)}}},[a("el-upload",{ref:"detailUpload",attrs:{limit:1,accept:".xlsx, .xls",headers:e.detailUpload.headers,action:e.detailUpload.url,disabled:e.detailUpload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("5530"),r=a("b85c"),l=(a("caad"),a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("ac1f"),a("1276"),a("25f0"),a("b0c0"),a("4de4"),a("5319"),a("a15b"),a("b680"),a("13d5"),a("a434"),a("c85c")),s=a("c394"),c=a("2ba5"),u=a("ad11"),d=a("5f87"),p=a("b9aa"),h=a("ed08"),m=a("c38a"),f=a("ef6c"),b=a("d9ca"),g=a.n(b),v={name:"NewBillDetailEditModal",components:{ChooseCode:p["default"]},data:function(){var e=this,t=function(t,a,n){if(!e.zlqDateRange||0==e.zlqDateRange.length)return n(new Error("租赁期不能为空"));n()};return{cascaderOptions:[],selfAdaptionWidth:null,invTypeOptions:[],taxRateOptions:[],specialTicketOptions:[],showBuySell:!0,isAdd:!0,taxCodeSignRow:0,qrcodeUrl:g.a,baseDialog:{title:"新增单据",open:!1},form:{billNo:"1234567890",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",specialTicket:"0",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",buyAddr:"",buyTel:"",buyBank:"",buyAccount:"",sellAddr:"",sellTel:"",sellBank:"",sellAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",tdyslxdm:"00",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}},shopNo:null},rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],detailFlag:[{required:!0,message:"清单标志不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"销方名称不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}],"tdywxx.bdczl.bdcdz":[{required:!0,message:"不动产地址不能为空",trigger:"blur"}],"tdywxx.bdczl.kdsbz":[{required:!0,message:"跨地（市）标志不能为空",trigger:"blur"}],"tdywxx.jzfw.kdsbz":[{required:!0,message:"跨地（市）标志不能为空",trigger:"blur"}],"tdywxx.bdczl.bdcqzh":[{required:!0,message:"产权证书/不动产权证号不能为空",trigger:"blur"}],"tdywxx.bdczl.dwmj":[{required:!0,message:"面积单位不能为空",trigger:"blur"}],"tdywxx.jzfw.jzfwfsd":[{required:!0,message:"建筑服务发生地不能为空",trigger:"blur"}],"tdywxx.jzfw.jzxmmc":[{required:!0,message:"建筑项目名称不能为空",trigger:"blur"}],zlqDate:[{validator:t,trigger:"blur"}]},hsbz:"1",sourceHsbz:null,kpdy:null,fplxdesc:"增值税普通发票",redInvoiceFlag:!1,billDetailsData:[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"",preferentialType:"",taxZeroRate:null}],discountOpen:!1,discountForm:{discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},introduceOpen:!1,introduceForm:{invCode:"",invNo:"",invType:""},introduceRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},detailUpload:{title:"明细导入",open:!1,isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(d["a"])()},url:"/prod-api/output/bill/analysisBillData"},zlqDateRange:[],noneDefine:""}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e},invoiceDiscountFlag:function(){for(var e=0;e<this.billDetailsData.length;e++){var t=this.billDetailsData[e];if("0"!=t.discountFlag)return!0}return!1},getTableMinHeight:function(){var e,t,a,n,i,o,r,l,s,c,u,d,p,h,m,f,b=document.body.clientHeight,g=document.getElementsByClassName("dialog--main-form"),v=606;g.length>0&&(v=(null!==(a=null===(n=document.getElementsByClassName("dialog-content-top")[0])||void 0===n?void 0:n.clientHeight)&&void 0!==a?a:0)+(null!==(i=null===(o=document.getElementsByClassName("dialog-buy-sell-content")[0])||void 0===o?void 0:o.clientHeight)&&void 0!==i?i:0)+(null!==(r=null===(l=document.getElementsByClassName("operation-content")[0])||void 0===l?void 0:l.clientHeight)&&void 0!==r?r:0)+(null!==(s=null===(c=document.getElementsByClassName("detail-total-content")[0])||void 0===c?void 0:c.clientHeight)&&void 0!==s?s:0)+(null!==(u=null===(d=document.getElementsByClassName("note-content")[0])||void 0===d?void 0:d.clientHeight)&&void 0!==u?u:0)+(null!==(p=null===(h=document.getElementsByClassName("special-info-jzfw")[0])||void 0===h?void 0:h.clientHeight)&&void 0!==p?p:0)+(null!==(m=null===(f=document.getElementsByClassName("dialog-content-bottom")[0])||void 0===f?void 0:f.clientHeight)&&void 0!==m?m:0),v+=75,75==v&&(v=606));["03","06"].includes(this.form.tdyslxdm)?document.getElementsByClassName("special-info-jzfw").length||(v+=120):document.getElementsByClassName("special-info-jzfw").length&&(v-=120),this.showBuySell?v+=80:(null!==(e=null===(t=document.getElementsByClassName("dialog-buy-sell-content")[0])||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)>80&&(v-=80);var y=b-v-84-55,_=38*this.billDetailsData.length+42;return y<110&&(y=110),y<_?this.billDetailsData.length<8?_:250:y}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("special_ticket").then((function(t){e.specialTicketOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType,"remark")})),Object(c["a"])().then((function(t){200==t.code&&(e.hsbz=t.data.hsbz,e.kpdy=t.data.kpdy,e.sourceHsbz=t.data.hsbz)})),this.formatRegionData(f["regionData"]),this.cascaderOptions=f["regionData"]},methods:{billDialogShow:function(){var e=this;this.baseDialog.open=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},dialogClose:function(){this.baseDialog.open=!1},editDialogTitle:function(e){"1"==e?(this.getSubjectInfo(),this.getTaxNoSeller(),this.title="添加单据管理"):this.title="修改单据管理"},getSubjectInfo:function(){var e=this;Object(l["l"])().then((function(t){var a,n;e.form.sellTaxNo=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.nsrsbh,e.form.sellName=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.nsrmc}))},getTaxNoSeller:function(){var e=this;Object(l["m"])().then((function(t){var a=t.nickName,n=t.sellers;if(null!=n&&0!=n.length){for(var i,o=0;o<n.length;o++)if("1"==n[o].status){i=n[o];break}if(null==i)for(var r=0;r<n.length;r++)if(n[r].drawer==a){i=n[r];break}null==i&&(i=n[0]),e.form.cashier=i.payee,e.form.checker=i.checker,e.form.invoicer=i.drawer,e.form.sellAddrTel=i.bankAddrTel,e.form.sellBankAccount=i.bankAccount}}))},billDialogClose:function(){var e=this;this.$nextTick((function(){e.$refs["form"].clearValidate()})),this.form={billNo:"",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",specialTicket:"0",tdyslxdm:"00",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},shopNo:null}},this.hsbz=this.sourceHsbz,this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],this.redInvoiceFlag=!1,this.billTypeChange()},fillBillDialog:function(e){var t=this;return Object(l["j"])(e).then((function(e){var a=e.data;t.baseDialog.open=!0,t.fillLogic(a),t.$nextTick((function(){t.$refs.form.clearValidate()})),t.title="修改单据管理",t.isAdd=!1}))},fillBillDialogByInvCodeNo:function(e){var t=this;return Object(s["q"])(e).then((function(e){var a=e.data;if(null==a)return t.msgError("未找到此发票"),!1;t.fillLogic(a),t.baseDialog.open=!0,t.title="添加单据管理",t.getBillNo()}))},fillLogic:function(e){this.initQDForm(e),this.form=e,this.billTypeChange(),parseFloat(e.totalAmount)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,this.form.note=e.note,this.form.cashier=e.cashier,this.form.checker=e.checker,this.form.invoicer=e.invoicer;var t=e.details;this.billDetailsData.length=0;for(var a=0,n=0;n<t.length;n++){var i=t[n];i.index=n,i.rate=void 0!=i.rate?this.specialRateFormalEcho(i):"",null!=i.goodsName&&i.goodsName.length>t[a].goodsName.length&&(a=n),this.billDetailsData.push(i)}this.goodsNameChange(a)},initQDForm:function(e){var t,a,n,i,o,r,l,s,c,u,d,p,h,m;["81","82"].includes(e.invType)&&(e.sourceInvNo&&(e.sourceInvNo=e.sourceInvCode+e.sourceInvNo),e.buyAddr=null===(n=e.buyAddrTel)||void 0===n?void 0:n.split(/[ ]+/)[0],e.buyTel=null===(i=e.buyAddrTel)||void 0===i?void 0:i.split(/[ ]+/)[1],e.buyBank=null===(o=e.buyBankAccount)||void 0===o?void 0:o.split(/[ ]+/)[0],e.buyAccount=null===(r=e.buyBankAccount)||void 0===r?void 0:r.split(/[ ]+/)[1],e.sellAddr=null===(l=e.sellAddrTel)||void 0===l?void 0:l.split(/[ ]+/)[0],e.sellTel=null===(s=e.sellAddrTel)||void 0===s?void 0:s.split(/[ ]+/)[1],e.sellBank=null===(c=e.sellBankAccount)||void 0===c?void 0:c.split(/[ ]+/)[0],e.sellAccount=null===(u=e.sellBankAccount)||void 0===u?void 0:u.split(/[ ]+/)[1]);null!==e&&void 0!==e&&null!==(t=e.tdywxx)&&void 0!==t&&null!==(t=t.bdczl)&&void 0!==t&&t.zlqqssj&&null!==e&&void 0!==e&&null!==(a=e.tdywxx)&&void 0!==a&&null!==(a=a.bdczl)&&void 0!==a&&a.zlqzssj&&(this.zlqDateRange=[null===e||void 0===e||null===(d=e.tdywxx)||void 0===d||null===(d=d.bdczl)||void 0===d?void 0:d.zlqqssj,null===e||void 0===e||null===(p=e.tdywxx)||void 0===p||null===(p=p.bdczl)||void 0===p?void 0:p.zlqzssj]);e.tdywxx?(null!==(h=e.tdywxx)&&void 0!==h&&h.jzfw?e.tdywxx.jzfw.jzfwfsd=e.tdywxx.jzfw.jzfwfsd?e.tdywxx.jzfw.jzfwfsd.split("/"):[]:e.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(m=e.tdywxx)&&void 0!==m&&m.bdczl?(e.tdywxx.bdczl.zlqqssj&&e.tdywxx.bdczl.zlqzssj&&(this.zlqDateRange=[e.tdywxx.bdczl.zlqqssj,e.tdywxx.bdczl.zlqzssj]),e.tdywxx.bdczl.bdcdz=e.tdywxx.bdczl.bdcdz?e.tdywxx.bdczl.bdcdz.split("/"):[]):e.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}):e.tdywxx={jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}}},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(u["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(u["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(u["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,["81","82"].includes(this.form.invType)?(e.addrTel?(this.form.buyAddr=e.addrTel.split(/[ ]+/)[0],this.form.buyTel=e.addrTel.split(/[ ]+/)[1]):(this.form.buyAddr="",this.form.buyTel=""),e.bankAccount?(this.form.buyBank=e.bankAccount.split(/[ ]+/)[0],this.form.buyAccount=e.bankAccount.split(/[ ]+/)[1]):(this.form.buyBank="",this.form.buyAccount="")):(this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount)},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsCode:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={code:e};Object(u["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].code;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(u["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(m["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].unit=e.unit,this.billDetailsData[this.taxCodeSignRow].rate=null==e.rate||void 0==e.rate?"":e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),this.billDetailsData[this.taxCodeSignRow].preferentialFlag=e.preferentialPolicy,this.billDetailsData[this.taxCodeSignRow].preferentialType=e.preferentialPolicyType,this.billDetailsData[this.taxCodeSignRow].goodsCode=e.code,this.billDetailsData[this.taxCodeSignRow].goodsName=e.name,"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow-1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow-1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow-1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow+1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow+1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow+1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow+1))},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},handleShowBuySell:function(){this.showBuySell=!this.showBuySell},billTypeChange:function(){var e=this;this.fplxdesc=this.selectDictLabel(this.invTypeOptions,this.form.invType,"remark"),"0"==this.form.invType?(this.rules.buyTaxNo[1].required=!0,this.rules.buyAddrTel[0].required=!0,this.rules.buyBankAccount[0].required=!0):"2"!=this.form.invType&&"51"!=this.form.invType||(this.rules.buyTaxNo[1].required=!1,this.rules.buyAddrTel[0].required=!1,this.rules.buyBankAccount[0].required=!1),["81","82"].includes(this.form.invType)?this.showBuySell=!1:this.showBuySell=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},saveBill:function(e){var t=this;this.judgeExistPNLine(-1)?this.msgError("明细行内不能同时存在正负数明细行"):this.$refs["form"].validate((function(a){if(a&&t.validDetailRequired()){var n,i,o=Object(h["e"])(t.form);o.details=Object(h["e"])(t.billDetailsData);for(var r=0;r<o.details.length;r++)"免税"==o.details[r].rate?(o.details[r].rate=0,o.details[r].preferentialFlag="1",o.details[r].preferentialType="免税",o.details[r].taxZeroRate="1"):"不征税"==o.details[r].rate?(o.details[r].rate=0,o.details[r].preferentialFlag="1",o.details[r].preferentialType="不征税",o.details[r].taxZeroRate="2"):"0"==o.details[r].rate?(o.details[r].preferentialFlag="0",o.details[r].preferentialType="",o.details[r].taxZeroRate="3"):(o.details[r].preferentialFlag="0",o.details[r].preferentialType="",o.details[r].taxZeroRate=""),o.details[r].number||(o.details[r].taxPrice="",o.details[r].withoutTaxPrice=""),o.details[r].taxPrice||(o.details[r].number="",o.details[r].withoutTaxPrice=""),o.details[r].withoutTaxPrice||(o.details[r].number="",o.details[r].taxPrice="");for(var s=0;s<o.details.length;s++)o.details[s].rowIndex=o.details[s].index;if(["81","82"].includes(o.invType))o.buyAddrTel=(o.buyAddr||"")+" "+(o.buyTel||""),o.buyBankAccount=(o.buyBank||"")+" "+(o.buyAccount||""),o.sellAddrTel=(o.sellAddr||"")+" "+(o.sellTel||""),o.sellBankAccount=(o.sellBank||"")+" "+(o.sellAccount||""),o.sourceInvCode=null===(n=o.sourceInvNo)||void 0===n?void 0:n.substr(0,12),o.sourceInvNo=null===(i=o.sourceInvNo)||void 0===i?void 0:i.substr(12),o.tdywxx.jzfw.jzfwfsd=o.tdywxx.jzfw.jzfwfsd.join("/"),o.tdywxx.bdczl.bdcdz=o.tdywxx.bdczl.bdcdz.join("/"),"06"==o.tdyslxdm&&(o.tdywxx.bdczl.zlqqssj=t.zlqDateRange[0],o.tdywxx.bdczl.zlqzssj=t.zlqDateRange[1]);else delete o.tdywxx;t.isAdd?Object(l["a"])(o).then((function(a){200===a.code&&(t.msgSuccess("新增成功"),t.$emit("updateBillTable"),"2"==e?(t.baseDialog.open=!1,t.$emit("openBill",a.data)):t.baseDialog.open=!1)})):Object(l["v"])(o).then((function(a){200===a.code&&(t.msgSuccess("修改成功"),t.$emit("updateBillTable"),"2"==e?(t.baseDialog.open=!1,t.$emit("openBill",{id:o.id,invType:o.invType,bizDate:o.bizDate})):t.baseDialog.open=!1)}))}}))},addBillDetailRow:function(){if(this.checkRowIsNone())this.msgError("存在空白行未填写");else if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)}}else if(""!=n&&null!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if(("1"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].taxPrice))&&"0"!=this.billDetailsData[e].taxPrice&&("0"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].withoutTaxPrice))&&"0"!=this.billDetailsData[e].withoutTaxPrice&&"-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&(""!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=i&&(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&(""!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=o&&(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if(("1"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].amountWithTax))&&("0"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].amountWithoutTax))){if("1"==this.billDetailsData[e].discountFlag){if(Math.abs(parseFloat(this.billDetailsData[e].amountWithTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithTax="");if(Math.abs(parseFloat(this.billDetailsData[e].amountWithoutTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithoutTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithoutTax="")}var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t||null==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8)}"1"!=this.billDetailsData[e].discountFlag&&this.judgeExistPNLine(e),this.billDetailsData[e].differenceDeduct="",this.useCalc()}},taxRateChange:function(e){this.formatPreferentialFlag(e);var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].rate=this.billDetailsData[e].rate:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].rate=this.billDetailsData[e].rate),""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].rate=this.billDetailsData[e].rate,this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e-1].amountWithoutTax=(parseFloat(this.billDetailsData[e-1].amountWithTax)-parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e+1].amountWithoutTax=(parseFloat(this.billDetailsData[e+1].amountWithTax)-parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2))):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e-1].amountWithTax=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)+parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e+1].amountWithTax=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2)))),this.billDetailsData[e].differenceDeduct="",this.useCalc()},formatPreferentialFlag:function(e){var t=this.billDetailsData[e].rate;["不征税"].includes(t)?(this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].preferentialType="不征税",this.billDetailsData[e].taxZeroRate="2"):["免税"].includes(t)?(this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].preferentialType="免税",this.billDetailsData[e].taxZeroRate="1"):"0"==t?(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].preferentialType="",this.billDetailsData[e].taxZeroRate="3"):(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].preferentialType="",this.billDetailsData[e].taxZeroRate="")},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.billDetailsData[e].differenceDeduct="",this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(r["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(r["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(r["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=e>=0?e:0,a=!1,n=0;n<this.billDetailsData.length;n++)if(parseFloat(this.billDetailsData[n].amountWithTax)*parseFloat(this.billDetailsData[t].amountWithTax)<0&&"1"!=this.billDetailsData[n].discountFlag){a=!0;break}return a&&e>=0&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行")),a},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow-1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow+1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow+1))},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discountLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(h["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.discountFlag="1",a.standard="",a.unit="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1,this.useCalc()}else this.msgError("请输入折扣金额或折扣率")},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){""!=this.deductForm.differenceDeductAmount?""!=this.billDetailsData[0].amountWithTax?Math.abs(parseFloat(this.deductForm.differenceDeductAmount))>Math.abs(parseFloat(this.billDetailsData[0].amountWithTax))?this.msgError("所填扣除额必须小于等于含税金额"):(this.billDetailsData[0].taxAmount=(parseFloat((parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.deductForm.differenceDeductAmount)).toFixed(2))*(parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)/(1+parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)).toFixed(2),this.billDetailsData[0].amountWithoutTax=(parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.billDetailsData[0].taxAmount)).toFixed(2),this.billDetailsData[0].differenceDeduct=this.deductForm.differenceDeductAmount,this.useCalc(),this.deductOpen=!1):this.msgError("请先填写含税金额"):this.msgError("请输入扣除额")},validIsNumber:function(e){e.target.value=Object(m["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(m["a"])(e.target.value)},goodsNameChange:function(e){var t=this.billDetailsData[e].goodsName;"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].goodsName=t:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].goodsName=t),this.selfAdaptionWidth=Object(m["c"])("",t)},validDetailRequired:function(){var e,t=Object(r["a"])(this.billDetailsData);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(""==a.goodsName)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的货物名称为空"),!1;if(""==a.amountWithoutTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的不含税金额为空"),!1;if(""==a.amountWithTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的含税金额为空"),!1;if(""==a.rate)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的税率为空"),!1}}catch(n){t.e(n)}finally{t.f()}return!0},mergeDiscount:function(){if(this.checkRowIsNone())this.msgError("存在空白行不允许合并折扣行");else{for(var e=0,t=this.billDetailsData.length;e<t;e++)"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithTax)+parseFloat(this.billDetailsData[e+1].amountWithTax)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].amountWithoutTax)).toFixed(2),""!=this.billDetailsData[e].number&&null!=this.billDetailsData[e].number&&(this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8)),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2));this.billDetailsData=this.billDetailsData.filter((function(e,t){return"1"!=e.discountFlag}));for(var a=0,n=this.billDetailsData.length;a<n;a++)this.billDetailsData[a].discountFlag="0",this.billDetailsData[a].index=a}},mergeBillDetail:function(){if(this.checkRowIsNone())this.msgError("存在空白行不允许合并明细");else{for(var e=!0,t=parseFloat(this.billDetailsData[0].amountWithTax),a=0,n=1,i=this.billDetailsData.length;n<i;n++)parseFloat(this.billDetailsData[n].amountWithTax)>t&&(t=parseFloat(this.billDetailsData[n].amountWithTax),a=n),e&&this.billDetailsData[0].rate!=this.billDetailsData[n].rate&&(e=!1);if(e){for(var o=0,r=0,l=0,s=0,c=0,u=this.billDetailsData.length;c<u;c++)o+=""==this.billDetailsData[c].amountWithTax?0:parseFloat(this.billDetailsData[c].amountWithTax),r+=""==this.billDetailsData[c].amountWithoutTax?0:parseFloat(this.billDetailsData[c].amountWithoutTax),l+=""==this.billDetailsData[c].taxAmount?0:parseFloat(this.billDetailsData[c].taxAmount),s+=""==this.billDetailsData[c].number?0:parseFloat(this.billDetailsData[c].number);var d=Object(h["e"])(this.billDetailsData[a]);d.index=0,d.discountFlag="0",d.amountWithTax=o.toFixed(2),d.amountWithoutTax=r.toFixed(2),d.taxAmount=l.toFixed(2),d.number=s,d.taxPrice=(parseFloat(o.toFixed(2))/s).toFixed(8),d.withoutTaxPrice=(parseFloat(r.toFixed(2))/s).toFixed(8),this.billDetailsData=[],this.billDetailsData.push(d)}else this.msgError("存在税率不一样的明细，不能合并")}},handleClearReset:function(){this.billDetailsData=[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"",preferentialType:"",taxZeroRate:null}]},checkRowIsNone:function(){var e=this.billDetailsData[this.billDetailsData.length-1];return!(e.amountWithTax||e.amountWithoutTax||e.taxTypeCode)},handleCopy:function(){var e=this;this.introduceOpen=!0,this.$nextTick((function(){e.$refs.introduceForm.clearValidate()}))},introduceDialogClose:function(){this.introduceOpen=!1,this.introduceForm={invCode:"",invNo:"",invCodeNo:""}},submitIntroduce:function(){var e=this;this.$refs.introduceForm.validate((function(t){if(t){var a=Object(h["e"])(e.introduceForm);["81","82"].includes(e.form.invType)&&20==a.invNo.length&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),a.invType=e.form.invType,a.invCodeNo=a.invCode+"_"+a.invNo,Object(s["q"])(a).then((function(t){if(200==t.code){var a=t.data.details,n=e.form.billNo;e.form=t.data,""!=t.data.billNo&&void 0!=t.data.billNo&&null!=t.data.billNo||(e.form.billNo=n),e.billDetailsData.length=0;for(var i=0;i<a.length;i++){var o=a[i];o.index=i,e.billDetailsData.push(o)}e.introduceDialogClose()}else e.msgError(t.msg)})).catch((function(e){console.log(e)}))}}))},handleDetailImport:function(){this.detailUpload.open=!0},handleFileUploadProgress:function(e,t,a){this.detailUpload.isUploading=!0},handleFileSuccess:function(e,t,a){if(this.detailUpload.open=!1,this.detailUpload.isUploading=!1,this.$refs.detailUpload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),e.data){this.checkRowIsNone()&&this.billDetailsData.splice(this.billDetailsData.length-1,1);for(var n=0;n<e.data.length;n++)this.billDetailsData.push(Object(o["a"])(Object(o["a"])({},e.data[n]),{},{index:this.billDetailsData.length}))}},submitFileForm:function(){this.$refs.detailUpload.submit()},formatRegionData:function(e){for(var t=0;t<e.length;t++)e[t].value=e[t].label,e[t].children&&this.formatRegionData(e[t].children)}}},y=v,_=(a("7941"),a("b0df"),a("2877")),x=Object(_["a"])(y,n,i,!1,null,"4309c9ec",null);t["default"]=x.exports},"7b1b":function(e,t,a){},"7bb5":function(e,t,a){},"7bd4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",{staticClass:"public-label-div"},[a("el-col",{staticStyle:{display:"flex"},attrs:{span:20}},[a("label",{staticStyle:{width:"110px"}},[e._v("单据编码")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.form.billNo,placement:"top"}},[a("span",{staticClass:"public-left-gap",staticStyle:{flex:"1","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(" "+e._s(e.form.billNo)+" ")])])],1)],1),a("el-row",{staticClass:"public-label-div"},[a("el-col",{attrs:{span:20}},[a("label",{staticStyle:{width:"110px"}},[e._v("发票种类")]),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.selectDictLabel(e.invTypeOptions,e.form.invType)))])])],1),a("el-row",{staticClass:"public-label-div"},[a("el-col",{attrs:{span:20}},[a("label",{staticStyle:{width:"110px"}},[e._v("是否清单")]),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.detailFlag))])])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"public-label-div"},[a("el-col",{attrs:{span:21}},[a("label",{staticStyle:{width:"110px"}},[e._v("发票代码")]),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.invCode))])])],1),a("el-row",{staticClass:"public-label-div"},[a("el-col",{attrs:{span:21}},[a("label",{staticStyle:{width:"110px"}},[e._v("发票号码")]),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.invNo))])])],1),a("el-row",{staticClass:"public-label-div"},[a("el-col",{attrs:{span:21}},[a("label",{staticStyle:{width:"110px"}},[e._v("开票日期")]),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.invDate))])])],1)],1)],1),a("el-row",[a("table",{staticClass:"modal-table",staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{border:"1"}},[a("tr",[a("td",{staticClass:"width-20 public-align-center",attrs:{rowspan:"4"}},[e._v("购买方")]),a("td",{staticClass:"width-600"},[a("span",{domProps:{innerHTML:e._s(e.nameTitle)}}),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.buyName))])]),a("td",{staticClass:"width-20 public-align-center",attrs:{rowspan:"4"}},[e._v("密码区")]),a("td",{attrs:{rowspan:"4"}},[e._v(e._s(e.form.pwdCode))])]),a("tr",[a("td",[e._v("纳税人识别号:"),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.buyTaxNo))])])]),a("tr",[a("td",[a("span",{domProps:{innerHTML:e._s(e.addrTelTitle)}}),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.buyAddrTel))])])]),a("tr",[a("td",[e._v("开户行及账号:"),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.buyBankAccount))])])])])]),a("el-row",[a("u-table",{ref:"billDetailTable",staticClass:"details-table",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,height:"320","use-virtual":"","row-height":30},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsNameAbbreviation,placement:"top",disabled:""==t.row.goodsNameAbbreviation||null==t.row.goodsNameAbbreviation}},[a("div",[e._v(e._s(t.row.goodsNameAbbreviation))])])]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsName,placement:"top",disabled:""==t.row.goodsName||null==t.row.goodsName}},[a("div",[e._v(e._s(t.row.goodsName))])])]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.taxTypeCode,placement:"top",disabled:""==t.row.taxTypeCode||null==t.row.taxTypeCode}},[a("div",[e._v(e._s(t.row.taxTypeCode))])])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.standard,placement:"top",disabled:""==t.row.standard||null==t.row.standard}},[a("div",[e._v(e._s(t.row.standard))])])]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.unit,placement:"top",disabled:""==t.row.unit||null==t.row.unit}},[a("div",[e._v(e._s(t.row.unit))])])]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.number)+" ")]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.withoutTaxPrice)+" ")]}}],null,!1,2636587697)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.taxPrice)+" ")]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.amountWithoutTax)+" ")]}}],null,!1,1103464656)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.amountWithTax)+" ")]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rate)+" ")]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.taxAmount)+" ")]}}])})],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticClass:"total-table",staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",[a("table",{staticClass:"modal-table",staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{border:"1"}},[a("tr",[a("td",{staticClass:"width-20 public-align-center",attrs:{rowspan:"4"}},[e._v("销售方")]),a("td",{staticClass:"width-600"},[a("span",{domProps:{innerHTML:e._s(e.nameTitle)}}),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.sellName))])]),a("td",{staticClass:"width-20 public-align-center",attrs:{rowspan:"4"}},[e._v("备注")]),a("td",{attrs:{rowspan:"4"}},[e._v(e._s(e.form.note))])]),a("tr",[a("td",[e._v("纳税人识别号:"),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.sellTaxNo))])])]),a("tr",[a("td",[a("span",{domProps:{innerHTML:e._s(e.addrTelTitle)}}),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.sellAddrTel))])])]),a("tr",[a("td",[e._v("开户行及账号:"),a("span",{staticClass:"public-left-gap"},[e._v(e._s(e.form.sellBankAccount))])])])])]),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[e._v(" "+e._s(e.form.cashier)+" ")])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[e._v(" "+e._s(e.form.checker)+" ")])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[e._v(" "+e._s(e.form.invoicer)+" ")])],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("c394")),r={name:"newBillDetailShowModal",props:{},data:function(){return{nameTitle:"名&emsp;&emsp;&emsp;&emsp;称:",addrTelTitle:"地&nbsp;址&nbsp;、电&nbsp;话:",form:{billNo:"",invType:"2",detailFlag:"0",invCode:"",invNo:"",invDate:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}]}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a=e.data;t.form.billNo=a.billNo,t.form.invCode=a.invCode,t.form.invNo=a.invNo,t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.invType=a.invType,t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,a.detailFlag),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer,t.form.pwdCode=a.pwdCode,t.form.invDate=a.invDate;var n=a.details;t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate||"0.00"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)}}},l=r,s=(a("754f"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},"7cfa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"红字发票信息选择",visible:e.redDownloadShow,width:"600px","append-to-body":"",id:"redInfoModal"},on:{"update:visible":function(t){e.redDownloadShow=t},close:e.redDownloadDialogClose}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.redDownloadForm,rules:e.rules,size:"small","label-position":"left","label-width":"100px"}},[a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("填开日期")]),a("div",{staticClass:"public-info-item-body"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"填开日期起:"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.bizDateRange,callback:function(t){e.bizDateRange=t},expression:"bizDateRange"}})],1)],1)],1)],1)],1),a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("信息表信息")]),a("div",{staticClass:"public-info-item-body"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"购买方税号:",prop:"buyTaxNo"}},[a("el-input",{attrs:{clearable:"",maxlength:20},model:{value:e.redDownloadForm.buyTaxNo,callback:function(t){e.$set(e.redDownloadForm,"buyTaxNo",t)},expression:"redDownloadForm.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"销售方税号:",prop:"sellTaxNo"}},[a("el-input",{attrs:{clearable:""},model:{value:e.redDownloadForm.sellTaxNo,callback:function(t){e.$set(e.redDownloadForm,"sellTaxNo",t)},expression:"redDownloadForm.sellTaxNo"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"信息表编号:",prop:"negNativeNo"}},[a("el-input",{attrs:{clearable:""},model:{value:e.redDownloadForm.negNativeNo,callback:function(t){e.$set(e.redDownloadForm,"negNativeNo",t)},expression:"redDownloadForm.negNativeNo"}})],1)],1)],1)],1)],1),a("div",{staticClass:"public-info-item"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("下载范围")]),a("div",{staticClass:"public-info-item-body"},[a("el-checkbox",{staticClass:"public-radio",model:{value:e.redDownloadForm.ownCompany,callback:function(t){e.$set(e.redDownloadForm,"ownCompany",t)},expression:"redDownloadForm.ownCompany"}},[e._v("本企业填写的红字信息表")]),a("el-checkbox",{staticClass:"public-radio",model:{value:e.redDownloadForm.otherCompany,callback:function(t){e.$set(e.redDownloadForm,"otherCompany",t)},expression:"redDownloadForm.otherCompany"}},[e._v("其他企业作为购买方填写的红字信息表")])],1)],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRedDownload}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.redDownloadShow=!1}}},[e._v("取 消")])],1)])},i=[],o=a("722a"),r={name:"redInvoiceDownload",data:function(){return{redDownloadShow:!1,bizDateRange:"",redDownloadForm:{beginTime:"",endTime:"",buyTaxNo:"",sellTaxNo:"",infoNo:"",ownCompany:!0,otherCompany:""},rules:{buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}]}}},props:{},watch:{bizDateRange:function(e){""==e||null==e?(this.redDownloadForm.beginTime="",this.redDownloadForm.endTime=""):(this.redDownloadForm.beginTime=this.bizDateRange[0],this.redDownloadForm.endTime=this.bizDateRange[1])}},created:function(){this.addDateRange(this.redDownloadForm,this.bizDateRange)},methods:{redDownloadDialogShow:function(){this.redDownloadShow=!0},redDownloadDialogClose:function(){this.bizDateRange="",this.redDownloadForm={beginTime:"",endTime:"",buyTaxNo:"",sellTaxNo:"",infoNo:"",ownCompany:!0,otherCompany:""},this.$refs["form"].clearValidate()},submitRedDownload:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={beginTime:e.redDownloadForm.beginTime,endTime:e.redDownloadForm.endTime,buyTaxNo:e.redDownloadForm.buyTaxNo,sellTaxNo:e.redDownloadForm.sellTaxNo,negNativeNo:e.redDownloadForm.negNativeNo};e.redDownloadForm.ownCompany&&e.redDownloadForm.otherCompany?a.range="0":e.redDownloadForm.ownCompany&&!e.redDownloadForm.otherCompany?a.range="1":!e.redDownloadForm.ownCompany&&e.redDownloadForm.otherCompany&&(a.range="2"),e.$emit("showElLoading"),e.redDownloadShow=!1,Object(o["d"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.$emit("updateInvoiceTable")):e.msgError(t.msg),e.$emit("closeElLoading")})).catch((function(){e.$emit("closeElLoading")}))}}))}}},l=r,s=(a("87c1"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,"1d89af74",null);t["default"]=c.exports},"7db0":function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").find,o=a("44d2"),r=a("ae40"),l="find",s=!0,c=r(l);l in[]&&Array(1)[l]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(l)},"7e1f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择业务类型",clearable:"",size:"small"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.approvalTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tastList,height:e.tableHeight}},[a("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"type",formatter:e.approvalTypeFormat}}),a("el-table-column",{attrs:{label:"流程名称",align:"center",prop:"instanceName"}}),a("el-table-column",{attrs:{label:"任务节点名称",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"任务状态",align:"center",prop:"status",formatter:e.stateFormat}}),a("el-table-column",{attrs:{label:"原因",align:"center",prop:"reason"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdDate"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){e.examineAndApprove(t.row)}}},[e._v("审批 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.open?a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},["leave"==e.definitionKey?a("leaveHistoryForm",{attrs:{businessKey:e.businessKey}}):e._e(),a("div",{staticClass:"show_info",on:{click:e.showInfo}},[e._v("查看详情")]),a("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form,"label-width":"100px"}},e._l(e.form.formData,(function(t,n){return a("el-form-item",{key:n,attrs:{label:t.controlLable}},["radio"==t.controlType?a("el-radio-group",{model:{value:t.controlValue,callback:function(a){e.$set(t,"controlValue",a)},expression:"domain.controlValue"}},e._l(t.controlDefault.split("--__--"),(function(t,n){return a("el-radio",{key:n,attrs:{label:n}},[e._v(e._s(t)+" ")])})),1):e._e(),"textarea"==t.controlType?a("el-input",{attrs:{type:"textarea"},model:{value:t.controlValue,callback:function(a){e.$set(t,"controlValue",a)},expression:"domain.controlValue"}}):e._e()],1)})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1):e._e(),a("new-bill-detail-show-modal",{ref:"showModal"}),a("el-dialog",{staticClass:"tax-approval-dialog",attrs:{title:"税金审核详情",visible:e.taxApproval.open,width:"960px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.taxApproval,"open",t)}}},[a("el-form",{ref:"taxApprovalForm",attrs:{model:e.taxApproval.form,"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"批次号："}},[a("el-input",{attrs:{readonly:""},model:{value:e.taxApproval.form.sjNo,callback:function(t){e.$set(e.taxApproval.form,"sjNo",t)},expression:"taxApproval.form.sjNo"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{readonly:""},model:{value:e.taxApproval.form.note,callback:function(t){e.$set(e.taxApproval.form,"note",t)},expression:"taxApproval.form.note"}})],1)],1),a("el-table",{attrs:{data:e.taxApproval.form.details}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"gsmc",label:"公司名称",align:"center"}}),a("el-table-column",{attrs:{prop:"yysr",label:"营业收入",align:"center"}}),a("el-table-column",{attrs:{prop:"jsyj",label:"增值税计税依据",align:"center"}}),a("el-table-column",{attrs:{prop:"zjs",label:"增值税",align:"center"}}),a("el-table-column",{attrs:{prop:"fjs",label:"附加税",align:"center"}}),a("el-table-column",{attrs:{prop:"qysds",label:"企业所得税",align:"center"}}),a("el-table-column",{attrs:{prop:"yhs",label:"印花税",align:"center"}}),a("el-table-column",{attrs:{prop:"fcs",label:"房产税",align:"center"}}),a("el-table-column",{attrs:{prop:"tdsys",label:"城镇土地使用税",align:"center"}}),a("el-table-column",{attrs:{prop:"ccs",label:"车般税",align:"center"}}),a("el-table-column",{attrs:{prop:"twfhf",label:"堤围防护费",align:"center"}}),a("el-table-column",{attrs:{prop:"ghjf",label:"工会经费",align:"center"}}),a("el-table-column",{attrs:{prop:"qtsf",label:"其他税费",align:"center"}}),a("el-table-column",{attrs:{prop:"grsds",label:"个人所得税",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1),a("div",{staticStyle:{"font-weight":"600","margin-top":"20px","margin-bottom":"20px","font-size":"20px"}},[e._v("附件详情")]),a("el-table",{attrs:{data:e.taxApproval.form.incomeOtherFileList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(a){return e.downloadTaxFile(t.row)}}},[e._v(e._s(t.row.fileName))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1)],1)],1)},i=[],o=a("ade3"),r=a("c7eb"),l=a("1da1"),s=(a("ac1f"),a("5319"),a("b775"));function c(e){return Object(s["a"])({url:"/act/task/myTask",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/act/task/formDataShow/"+e,method:"get"})}function d(e,t){return Object(s["a"])({url:"/act/task/formDataSave/"+e,method:"post",data:t})}var p,h=a("a2c5"),m=a("1f6e"),f=a("7bd4"),b=a("ed08"),g=(p={name:"task",components:{leaveHistoryForm:m["default"],NewBillDetailShowModal:f["default"]},data:function(){return{tableHeight:null,id:"",definitionKey:"",businessKey:"",loading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,tastList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,type:null,title:null,reason:null,leaveStartTime:null,leaveEndTime:null,instanceId:null,state:null,createBy:null},form:{formData:[]},rules:{},currApproveRow:{},isJump:!1,stateOptions:[],approvalTypeOptions:[],taxApproval:{open:!1,form:{},fileList:[]}}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getDicts("approve_process_define").then((function(t){e.approvalTypeOptions=t.data})),this.getDicts("approve_flow_state").then((function(t){e.stateOptions=t.data})),this.getList()}},Object(o["a"])(p,"activated",(function(){this.isJump&&(this.examineAndApprove(this.isJump),this.isJump=!1)})),Object(o["a"])(p,"methods",{approvalTypeFormat:function(e,t){return this.selectDictLabel(this.approvalTypeOptions,e.type)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.status)},getList:function(){var e=this;this.loading=!0,c(this.queryParams).then((function(t){e.tastList=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},cancel:function(){this.open=!1,this.reset()},reset:function(){this.definitionKey="",this.businessKey="",this.form={formData:[]},this.resetForm("form")},examineAndApprove:function(e){var t=this;this.currApproveRow=e,console.log(e),this.reset(),this.definitionKey=e.definitionKey,this.businessKey=e.businessKey,this.id=e.id,u(e.id).then((function(e){for(var a=e.data,n=[],i=0;i<a.length;i++){var o=a[i].split("--__!!"),r=null,l=null;switch(o[1]){case"radio":r=0,l=o[4];break}n.push({controlId:o[0],controlType:o[1],controlLable:o[2],controlIsParam:o[3],controlValue:r,controlDefault:l})}t.form.formData=n,t.open=!0,t.title="审批"}))},submitForm:function(){var e=this;d(this.id,this.form.formData).then((function(t){e.msgSuccess("审批成功"),e.open=!1,e.getList()}))},showInfo:function(){var e=this,t=this.currApproveRow.type;if("reverseInvoice"==t){var a={id:this.currApproveRow.bizId};this.$refs.showModal.fillBillDialog(a)}else"invoiceTaxesReport"==t?(this.$vLoading.show(),Object(h["a"])(this.currApproveRow.bizId).then((function(t){e.$vLoading.hide(),200==t.code?(e.taxApproval.form=t.object,e.taxApproval.open=!0):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))):(this.isJump=this.currApproveRow,this.open=!1,this.$router.push({name:"Jtrw",params:{ywzj:this.currApproveRow.bizId}}))},downloadTaxFile:function(e){var t=this;return Object(l["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$vLoading.show(),a.next=3,Object(b["h"])("/einvoices"+e.fileUrl.replace("https://vat.zzhcn.net",""),e.fileUrl.split("/").pop().split(".")[0]+"_",e.fileUrl.split(".").pop());case 3:t.$vLoading.hide();case 4:case"end":return a.stop()}}),a)})))()}}),p),v=g,y=(a("4e25"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"44f52f6c",null);t["default"]=_.exports},"7e6f":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return l}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/qd/bill/openInvoice",method:"post",params:e})}function o(){return Object(n["a"])({url:"/output/qd/bill/checkBaseInfo",method:"get"})}function r(){return Object(n["a"])({url:"/output/qdreg/getSeller",method:"get"})}function l(e){return Object(n["a"])({url:"/output/qd/bill/rewrite",method:"post",params:e})}},"7e79":function(e,t,a){!function(t,a){e.exports=a()}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=6)}([function(e,t,a){var n=a(2);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(4)(n,i),n.locals&&(e.exports=n.locals)},function(e,t,a){"use strict";var n=a(0);a.n(n).a},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'\n.vue-cropper[data-v-6dae58fd] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  direction: ltr;\n  touch-action: none;\n  text-align: left;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC");\n}\n.cropper-box[data-v-6dae58fd],\n.cropper-box-canvas[data-v-6dae58fd],\n.cropper-drag-box[data-v-6dae58fd],\n.cropper-crop-box[data-v-6dae58fd],\n.cropper-face[data-v-6dae58fd] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  user-select: none;\n}\n.cropper-box-canvas img[data-v-6dae58fd] {\n  position: relative;\n  text-align: left;\n  user-select: none;\n  transform: none;\n  max-width: none;\n  max-height: none;\n}\n.cropper-box[data-v-6dae58fd] {\n  overflow: hidden;\n}\n.cropper-move[data-v-6dae58fd] {\n  cursor: move;\n}\n.cropper-crop[data-v-6dae58fd] {\n  cursor: crosshair;\n}\n.cropper-modal[data-v-6dae58fd] {\n  background: rgba(0, 0, 0, 0.5);\n}\n.cropper-crop-box[data-v-6dae58fd] {\n  /*border: 2px solid #39f;*/\n}\n.cropper-view-box[data-v-6dae58fd] {\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  user-select: none;\n}\n.cropper-view-box img[data-v-6dae58fd] {\n  user-select: none;\n  text-align: left;\n  max-width: none;\n  max-height: none;\n}\n.cropper-face[data-v-6dae58fd] {\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  opacity: 0.1;\n}\n.crop-info[data-v-6dae58fd] {\n  position: absolute;\n  left: 0px;\n  min-width: 65px;\n  text-align: center;\n  color: white;\n  line-height: 20px;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-size: 12px;\n}\n.crop-line[data-v-6dae58fd] {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n  opacity: 0.1;\n}\n.line-w[data-v-6dae58fd] {\n  top: -3px;\n  left: 0;\n  height: 5px;\n  cursor: n-resize;\n}\n.line-a[data-v-6dae58fd] {\n  top: 0;\n  left: -3px;\n  width: 5px;\n  cursor: w-resize;\n}\n.line-s[data-v-6dae58fd] {\n  bottom: -3px;\n  left: 0;\n  height: 5px;\n  cursor: s-resize;\n}\n.line-d[data-v-6dae58fd] {\n  top: 0;\n  right: -3px;\n  width: 5px;\n  cursor: e-resize;\n}\n.crop-point[data-v-6dae58fd] {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  opacity: 0.75;\n  background-color: #39f;\n  border-radius: 100%;\n}\n.point1[data-v-6dae58fd] {\n  top: -4px;\n  left: -4px;\n  cursor: nw-resize;\n}\n.point2[data-v-6dae58fd] {\n  top: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: n-resize;\n}\n.point3[data-v-6dae58fd] {\n  top: -4px;\n  right: -4px;\n  cursor: ne-resize;\n}\n.point4[data-v-6dae58fd] {\n  top: 50%;\n  left: -4px;\n  margin-top: -3px;\n  cursor: w-resize;\n}\n.point5[data-v-6dae58fd] {\n  top: 50%;\n  right: -4px;\n  margin-top: -3px;\n  cursor: e-resize;\n}\n.point6[data-v-6dae58fd] {\n  bottom: -5px;\n  left: -4px;\n  cursor: sw-resize;\n}\n.point7[data-v-6dae58fd] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: s-resize;\n}\n.point8[data-v-6dae58fd] {\n  bottom: -5px;\n  right: -4px;\n  cursor: se-resize;\n}\n@media screen and (max-width: 500px) {\n.crop-point[data-v-6dae58fd] {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    opacity: 0.45;\n    background-color: #39f;\n    border-radius: 100%;\n}\n.point1[data-v-6dae58fd] {\n    top: -10px;\n    left: -10px;\n}\n.point2[data-v-6dae58fd],\n  .point4[data-v-6dae58fd],\n  .point5[data-v-6dae58fd],\n  .point7[data-v-6dae58fd] {\n    display: none;\n}\n.point3[data-v-6dae58fd] {\n    top: -10px;\n    right: -10px;\n}\n.point4[data-v-6dae58fd] {\n    top: 0;\n    left: 0;\n}\n.point6[data-v-6dae58fd] {\n    bottom: -10px;\n    left: -10px;\n}\n.point8[data-v-6dae58fd] {\n    bottom: -10px;\n    right: -10px;\n}\n}\n',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n),o=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[a].concat(o).concat([i]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&n[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),t.push(r))}},t}},function(e,t,a){var n={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}((function(){return window&&document&&document.all&&!window.atob})),o=function(e){var t={};return function(e,a){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,a);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),r=null,l=0,s=[],c=a(5);function u(e,t){for(var a=0;a<e.length;a++){var i=e[a],o=n[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(b(i.parts[r],t))}else{var l=[];for(r=0;r<i.parts.length;r++)l.push(b(i.parts[r],t));n[i.id]={id:i.id,refs:1,parts:l}}}}function d(e,t){for(var a=[],n={},i=0;i<e.length;i++){var o=e[i],r=t.base?o[0]+t.base:o[0],l={css:o[1],media:o[2],sourceMap:o[3]};n[r]?n[r].parts.push(l):a.push(n[r]={id:r,parts:[l]})}return a}function p(e,t){var a=o(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=s[s.length-1];if("top"===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),s.push(t);else if("bottom"===e.insertAt)a.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertAt.before,a);a.insertBefore(t,i)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=s.indexOf(e);t>=0&&s.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){return a.nc}();n&&(e.attrs.nonce=n)}return f(t,e.attrs),p(e,t),t}function f(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function b(e,t){var a,n,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var s=l++;a=r||(r=m(t)),n=v.bind(null,a,s,!1),i=v.bind(null,a,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",f(t,e.attrs),p(e,t),t}(t),n=function(e,t,a){var n=a.css,i=a.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=c(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(r),l&&URL.revokeObjectURL(l)}.bind(null,a,t),i=function(){h(a),a.href&&URL.revokeObjectURL(a.href)}):(a=m(t),n=function(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}.bind(null,a),i=function(){h(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=d(e,t);return u(a,t),function(e){for(var i=[],o=0;o<a.length;o++){var r=a[o];(l=n[r.id]).refs--,i.push(l)}for(e&&u(d(e,t),t),o=0;o<i.length;o++){var l;if(0===(l=i[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete n[l.id]}}}};var g=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}();function v(e,t,a,n){var i=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?a+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"cropper",staticClass:"vue-cropper",on:{mouseover:e.scaleImg,mouseout:e.cancelScale}},[a("div",{staticClass:"cropper-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"cropper-box-canvas",style:{width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+90*e.rotate+"deg)"}},[a("img",{ref:"cropperImg",attrs:{src:e.imgs,alt:"cropper-img"}})])]),e._v(" "),a("div",{staticClass:"cropper-drag-box",class:{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping},on:{mousedown:e.startMove,touchstart:e.startMove}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.cropping,expression:"cropping"}],staticClass:"cropper-crop-box",style:{width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"}},[a("span",{staticClass:"cropper-view-box"},[a("img",{style:{width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+90*e.rotate+"deg)"},attrs:{src:e.imgs,alt:"cropper-img"}})]),e._v(" "),a("span",{staticClass:"cropper-face cropper-move",on:{mousedown:e.cropMove,touchstart:e.cropMove}}),e._v(" "),e.info?a("span",{staticClass:"crop-info",style:{top:e.cropInfo.top}},[e._v(e._s(this.cropInfo.width)+" × "+e._s(this.cropInfo.height))]):e._e(),e._v(" "),e.fixedBox?e._e():a("span",[a("span",{staticClass:"crop-line line-w",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,1)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,1)}}}),e._v(" "),a("span",{staticClass:"crop-line line-a",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,1,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,1,0)}}}),e._v(" "),a("span",{staticClass:"crop-line line-s",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,2)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,2)}}}),e._v(" "),a("span",{staticClass:"crop-line line-d",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,2,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,2,0)}}}),e._v(" "),a("span",{staticClass:"crop-point point1",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,1,1)},touchstart:function(t){e.changeCropSize(t,!0,!0,1,1)}}}),e._v(" "),a("span",{staticClass:"crop-point point2",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,1)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,1)}}}),e._v(" "),a("span",{staticClass:"crop-point point3",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,2,1)},touchstart:function(t){e.changeCropSize(t,!0,!0,2,1)}}}),e._v(" "),a("span",{staticClass:"crop-point point4",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,1,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,1,0)}}}),e._v(" "),a("span",{staticClass:"crop-point point5",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,2,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,2,0)}}}),e._v(" "),a("span",{staticClass:"crop-point point6",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,1,2)},touchstart:function(t){e.changeCropSize(t,!0,!0,1,2)}}}),e._v(" "),a("span",{staticClass:"crop-point point7",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,2)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,2)}}}),e._v(" "),a("span",{staticClass:"crop-point point8",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,2,2)},touchstart:function(t){e.changeCropSize(t,!0,!0,2,2)}}})])])])};n._withStripped=!0;var i={getData:function(e){return new Promise((function(t,a){var n={};(function(e){var t=null;return new Promise((function(a,n){if(e.src)if(/^data\:/i.test(e.src))t=function(e){e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var t=atob(e),a=t.length,n=new ArrayBuffer(a),i=new Uint8Array(n),o=0;o<a;o++)i[o]=t.charCodeAt(o);return n}(e.src),a(t);else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){t=e.target.result,a(t)},function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},a.send()}(e.src,(function(e){i.readAsArrayBuffer(e)}))}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t=o.response,a(t),o=null},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else n("img error")}))})(e).then((function(e){n.arrayBuffer=e,n.orientation=function(e){var t,a,n,i,o,r,l,s,c,u=new DataView(e),d=u.byteLength;if(255===u.getUint8(0)&&216===u.getUint8(1))for(s=2;s<d;){if(255===u.getUint8(s)&&225===u.getUint8(s+1)){r=s;break}s++}if(r&&(a=r+10,"Exif"===function(e,t,a){var n,i="";for(n=t,a+=t;n<a;n++)i+=String.fromCharCode(e.getUint8(n));return i}(u,r+4,4)&&(o=u.getUint16(a),((i=18761===o)||19789===o)&&42===u.getUint16(a+2,i)&&(n=u.getUint32(a+4,i))>=8&&(l=a+n))),l)for(d=u.getUint16(l,i),c=0;c<d;c++)if(s=l+12*c+2,274===u.getUint16(s,i)){s+=8,t=u.getUint16(s,i);break}return t}(e),t(n)})).catch((function(e){a(e)}))}))}},o=i,r={data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:function(){return[1,1]}},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:Number,default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"}},computed:{cropInfo:function(){var e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){var t=1;this.high&&!this.full&&(t=window.devicePixelRatio),1!==this.enlarge&!this.full&&(t=Math.abs(Number(this.enlarge))),e.width=e.width*t,e.height=e.height*t,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1;return t}},watch:{img:function(){this.checkedImg()},imgs:function(e){""!==e&&this.reload()},cropW:function(){this.showPreview()},cropH:function(){this.showPreview()},cropOffsertX:function(){this.showPreview()},cropOffsertY:function(){this.showPreview()},scale:function(e,t){this.showPreview()},x:function(){this.showPreview()},y:function(){this.showPreview()},autoCrop:function(e){e&&this.goAutoCrop()},autoCropWidth:function(){this.autoCrop&&this.goAutoCrop()},autoCropHeight:function(){this.autoCrop&&this.goAutoCrop()},mode:function(){this.checkedImg()},rotate:function(){this.showPreview(),(this.autoCrop||this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{checkOrientationImage:function(e,t,a,n){var i=this,o=document.createElement("canvas"),r=o.getContext("2d");switch(r.save(),t){case 2:o.width=a,o.height=n,r.translate(a,0),r.scale(-1,1);break;case 3:o.width=a,o.height=n,r.translate(a/2,n/2),r.rotate(180*Math.PI/180),r.translate(-a/2,-n/2);break;case 4:o.width=a,o.height=n,r.translate(0,n),r.scale(1,-1);break;case 5:o.height=a,o.width=n,r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:o.width=n,o.height=a,r.translate(n/2,a/2),r.rotate(90*Math.PI/180),r.translate(-a/2,-n/2);break;case 7:o.height=a,o.width=n,r.rotate(.5*Math.PI),r.translate(a,-n),r.scale(-1,1);break;case 8:o.height=a,o.width=n,r.translate(n/2,a/2),r.rotate(-90*Math.PI/180),r.translate(-a/2,-n/2);break;default:o.width=a,o.height=n}r.drawImage(e,0,0,a,n),r.restore(),o.toBlob((function(e){var t=URL.createObjectURL(e);i.imgs=t}),"image/"+this.outputType,1)},checkedImg:function(){var e=this;if(""!==this.img){this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();var t=new Image;if(t.onload=function(){if(""===e.img)return e.$emit("imgLoad","error"),e.$emit("img-load","error"),!1;var a=t.width,n=t.height;o.getData(t).then((function(i){e.orientation=i.orientation||1;var o=e.maxImgSize;!e.orientation&&a<o&n<o?e.imgs=e.img:(a>o&&(n=n/a*o,a=o),n>o&&(a=a/n*o,n=o),e.checkOrientationImage(t,e.orientation,a,n))}))},t.onerror=function(){e.$emit("imgLoad","error"),e.$emit("img-load","error")},"data"!==this.img.substr(0,4)&&(t.crossOrigin=""),this.isIE){var a=new XMLHttpRequest;a.onload=function(){var e=URL.createObjectURL(this.response);t.src=e},a.open("GET",this.img,!0),a.responseType="blob",a.send()}else t.src=this.img}},startMove:function(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=(e.clientX?e.clientX:e.touches[0].clientX)-this.x,this.moveY=(e.clientY?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),2==e.touches.length&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("imgMoving",{moving:!0,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX=e.clientX?e.clientX:e.touches[0].clientX,this.cropY=e.clientY?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale:function(e){var t=this;e.preventDefault();var a=this.scale,n=this.touches[0].clientX,i=this.touches[0].clientY,o=e.touches[0].clientX,r=e.touches[0].clientY,l=this.touches[1].clientX,s=this.touches[1].clientY,c=e.touches[1].clientX,u=e.touches[1].clientY,d=Math.sqrt(Math.pow(n-l,2)+Math.pow(i-s,2)),p=Math.sqrt(Math.pow(o-c,2)+Math.pow(r-u,2))-d,h=1,m=(h=(h=h/this.trueWidth>h/this.trueHeight?h/this.trueHeight:h/this.trueWidth)>.1?.1:h)*p;if(!this.touchNow){if(this.touchNow=!0,p>0?a+=Math.abs(m):p<0&&a>Math.abs(m)&&(a-=Math.abs(m)),this.touches=e.touches,setTimeout((function(){t.touchNow=!1}),8),!this.checkoutImgAxis(this.x,this.y,a))return!1;this.scale=a}},cancelTouchScale:function(e){window.removeEventListener("touchmove",this.touchScale)},moveImg:function(e){var t=this;if(e.preventDefault(),e.touches&&2===e.touches.length)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;var a,n,i=e.clientX?e.clientX:e.touches[0].clientX,o=e.clientY?e.clientY:e.touches[0].clientY;a=i-this.moveX,n=o-this.moveY,this.$nextTick((function(){if(t.centerBox){var e,i,o,r,l=t.getImgAxis(a,n,t.scale),s=t.getCropAxis(),c=t.trueHeight*t.scale,u=t.trueWidth*t.scale;switch(t.rotate){case 1:case-1:case 3:case-3:e=t.cropOffsertX-t.trueWidth*(1-t.scale)/2+(c-u)/2,i=t.cropOffsertY-t.trueHeight*(1-t.scale)/2+(u-c)/2,o=e-c+t.cropW,r=i-u+t.cropH;break;default:e=t.cropOffsertX-t.trueWidth*(1-t.scale)/2,i=t.cropOffsertY-t.trueHeight*(1-t.scale)/2,o=e-u+t.cropW,r=i-c+t.cropH}l.x1>=s.x1&&(a=e),l.y1>=s.y1&&(n=i),l.x2<=s.x2&&(a=o),l.y2<=s.y2&&(n=r)}t.x=a,t.y=n,t.$emit("imgMoving",{moving:!0,axis:t.getImgAxis()}),t.$emit("img-moving",{moving:!0,axis:t.getImgAxis()})}))},leaveImg:function(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("imgMoving",{moving:!1,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg:function(){this.canScale&&window.addEventListener(this.support,this.changeSize,{passive:!1})},cancelScale:function(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize:function(e){var t=this;e.preventDefault();var a=this.scale,n=e.deltaY||e.wheelDelta;n=navigator.userAgent.indexOf("Firefox")>0?30*n:n,this.isIE&&(n=-n);var i=this.coe,o=(i=i/this.trueWidth>i/this.trueHeight?i/this.trueHeight:i/this.trueWidth)*n;o<0?a+=Math.abs(o):a>Math.abs(o)&&(a-=Math.abs(o));var r=o<0?"add":"reduce";if(r!==this.coeStatus&&(this.coeStatus=r,this.coe=.2),this.scaling||(this.scalingSet=setTimeout((function(){t.scaling=!1,t.coe=t.coe+=.01}),50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,a))return!1;this.scale=a},changeScale:function(e){var t=this.scale;e=e||1;var a=20;if((e*=a=a/this.trueWidth>a/this.trueHeight?a/this.trueHeight:a/this.trueWidth)>0?t+=Math.abs(e):t>Math.abs(e)&&(t-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},createCrop:function(e){var t=this;e.preventDefault();var a=e.clientX?e.clientX:e.touches?e.touches[0].clientX:0,n=e.clientY?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick((function(){var e=a-t.cropX,i=n-t.cropY;if(e>0?(t.cropW=e+t.cropChangeX>t.w?t.w-t.cropChangeX:e,t.cropOffsertX=t.cropChangeX):(t.cropW=t.w-t.cropChangeX+Math.abs(e)>t.w?t.cropChangeX:Math.abs(e),t.cropOffsertX=t.cropChangeX+e>0?t.cropChangeX+e:0),t.fixed){var o=t.cropW/t.fixedNumber[0]*t.fixedNumber[1];o+t.cropOffsertY>t.h?(t.cropH=t.h-t.cropOffsertY,t.cropW=t.cropH/t.fixedNumber[1]*t.fixedNumber[0],t.cropOffsertX=e>0?t.cropChangeX:t.cropChangeX-t.cropW):t.cropH=o,t.cropOffsertY=t.cropOffsertY}else i>0?(t.cropH=i+t.cropChangeY>t.h?t.h-t.cropChangeY:i,t.cropOffsertY=t.cropChangeY):(t.cropH=t.h-t.cropChangeY+Math.abs(i)>t.h?t.cropChangeY:Math.abs(i),t.cropOffsertY=t.cropChangeY+i>0?t.cropChangeY+i:0)}))},changeCropSize:function(e,t,a,n,i){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=t,this.canChangeY=a,this.changeCropTypeX=n,this.changeCropTypeY=i,this.cropX=e.clientX?e.clientX:e.touches[0].clientX,this.cropY=e.clientY?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0)},changeCropNow:function(e){var t=this;e.preventDefault();var a=e.clientX?e.clientX:e.touches?e.touches[0].clientX:0,n=e.clientY?e.clientY:e.touches?e.touches[0].clientY:0,i=this.w,o=this.h,r=0,l=0;if(this.centerBox){var s=this.getImgAxis(),c=s.x2,u=s.y2;r=s.x1>0?s.x1:0,l=s.y1>0?s.y1:0,i>c&&(i=c),o>u&&(o=u)}this.$nextTick((function(){var e=a-t.cropX,s=n-t.cropY;if(t.canChangeX&&(1===t.changeCropTypeX?t.cropOldW-e>0?(t.cropW=i-t.cropChangeX-e<=i-r?t.cropOldW-e:t.cropOldW+t.cropChangeX-r,t.cropOffsertX=i-t.cropChangeX-e<=i-r?t.cropChangeX+e:r):(t.cropW=Math.abs(e)+t.cropChangeX<=i?Math.abs(e)-t.cropOldW:i-t.cropOldW-t.cropChangeX,t.cropOffsertX=t.cropChangeX+t.cropOldW):2===t.changeCropTypeX&&(t.cropOldW+e>0?(t.cropW=t.cropOldW+e+t.cropOffsertX<=i?t.cropOldW+e:i-t.cropOffsertX,t.cropOffsertX=t.cropChangeX):(t.cropW=i-t.cropChangeX+Math.abs(e+t.cropOldW)<=i-r?Math.abs(e+t.cropOldW):t.cropChangeX-r,t.cropOffsertX=i-t.cropChangeX+Math.abs(e+t.cropOldW)<=i-r?t.cropChangeX-Math.abs(e+t.cropOldW):r))),t.canChangeY&&(1===t.changeCropTypeY?t.cropOldH-s>0?(t.cropH=o-t.cropChangeY-s<=o-l?t.cropOldH-s:t.cropOldH+t.cropChangeY-l,t.cropOffsertY=o-t.cropChangeY-s<=o-l?t.cropChangeY+s:l):(t.cropH=Math.abs(s)+t.cropChangeY<=o?Math.abs(s)-t.cropOldH:o-t.cropOldH-t.cropChangeY,t.cropOffsertY=t.cropChangeY+t.cropOldH):2===t.changeCropTypeY&&(t.cropOldH+s>0?(t.cropH=t.cropOldH+s+t.cropOffsertY<=o?t.cropOldH+s:o-t.cropOffsertY,t.cropOffsertY=t.cropChangeY):(t.cropH=o-t.cropChangeY+Math.abs(s+t.cropOldH)<=o-l?Math.abs(s+t.cropOldH):t.cropChangeY-l,t.cropOffsertY=o-t.cropChangeY+Math.abs(s+t.cropOldH)<=o-l?t.cropChangeY-Math.abs(s+t.cropOldH):l))),t.canChangeX&&t.fixed){var c=t.cropW/t.fixedNumber[0]*t.fixedNumber[1];c+t.cropOffsertY>o?(t.cropH=o-t.cropOffsertY,t.cropW=t.cropH/t.fixedNumber[1]*t.fixedNumber[0]):t.cropH=c}if(t.canChangeY&&t.fixed){var u=t.cropH/t.fixedNumber[1]*t.fixedNumber[0];u+t.cropOffsertX>i?(t.cropW=i-t.cropOffsertX,t.cropH=t.cropW/t.fixedNumber[0]*t.fixedNumber[1]):t.cropW=u}}))},changeCropEnd:function(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},endCrop:function(){0===this.cropW&&0===this.cropH&&(this.cropping=!1),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop:function(){this.crop=!0},stopCrop:function(){this.crop=!1},clearCrop:function(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove:function(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&2===e.touches.length)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);var t,a,n=e.clientX?e.clientX:e.touches[0].clientX,i=e.clientY?e.clientY:e.touches[0].clientY;t=n-this.cropOffsertX,a=i-this.cropOffsertY,this.cropX=t,this.cropY=a,this.$emit("cropMoving",{moving:!0,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop:function(e,t){var a=this,n=0,i=0;e&&(e.preventDefault(),n=e.clientX?e.clientX:e.touches[0].clientX,i=e.clientY?e.clientY:e.touches[0].clientY),this.$nextTick((function(){var e,o,r=n-a.cropX,l=i-a.cropY;if(t&&(r=a.cropOffsertX,l=a.cropOffsertY),e=r<=0?0:r+a.cropW>a.w?a.w-a.cropW:r,o=l<=0?0:l+a.cropH>a.h?a.h-a.cropH:l,a.centerBox){var s=a.getImgAxis();e<=s.x1&&(e=s.x1),e+a.cropW>s.x2&&(e=s.x2-a.cropW),o<=s.y1&&(o=s.y1),o+a.cropH>s.y2&&(o=s.y2-a.cropH)}a.cropOffsertX=e,a.cropOffsertY=o,a.$emit("cropMoving",{moving:!0,axis:a.getCropAxis()}),a.$emit("crop-moving",{moving:!0,axis:a.getCropAxis()})}))},getImgAxis:function(e,t,a){e=e||this.x,t=t||this.y,a=a||this.scale;var n={x1:0,x2:0,y1:0,y2:0},i=this.trueWidth*a,o=this.trueHeight*a;switch(this.rotate){case 0:n.x1=e+this.trueWidth*(1-a)/2,n.x2=n.x1+this.trueWidth*a,n.y1=t+this.trueHeight*(1-a)/2,n.y2=n.y1+this.trueHeight*a;break;case 1:case-1:case 3:case-3:n.x1=e+this.trueWidth*(1-a)/2+(i-o)/2,n.x2=n.x1+this.trueHeight*a,n.y1=t+this.trueHeight*(1-a)/2+(o-i)/2,n.y2=n.y1+this.trueWidth*a;break;default:n.x1=e+this.trueWidth*(1-a)/2,n.x2=n.x1+this.trueWidth*a,n.y1=t+this.trueHeight*(1-a)/2,n.y2=n.y1+this.trueHeight*a}return n},getCropAxis:function(){var e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop:function(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("cropMoving",{moving:!1,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked:function(e){var t=this,a=document.createElement("canvas"),n=new Image,i=this.rotate,o=this.trueWidth,r=this.trueHeight,l=this.cropOffsertX,s=this.cropOffsertY;function c(e,t){a.width=Math.round(e),a.height=Math.round(t)}n.onload=function(){if(0!==t.cropW){var u=a.getContext("2d"),d=1;t.high&!t.full&&(d=window.devicePixelRatio),1!==t.enlarge&!t.full&&(d=Math.abs(Number(t.enlarge)),console.log(d));var p=t.cropW*d,h=t.cropH*d,m=o*t.scale*d,f=r*t.scale*d,b=(t.x-l+t.trueWidth*(1-t.scale)/2)*d,g=(t.y-s+t.trueHeight*(1-t.scale)/2)*d;switch(c(p,h),u.save(),i){case 0:t.full?(c(p/t.scale,h/t.scale),u.drawImage(n,b/t.scale,g/t.scale,m/t.scale,f/t.scale)):u.drawImage(n,b,g,m,f);break;case 1:case-3:t.full?(c(p/t.scale,h/t.scale),b=b/t.scale+(m/t.scale-f/t.scale)/2,g=g/t.scale+(f/t.scale-m/t.scale)/2,u.rotate(90*i*Math.PI/180),u.drawImage(n,g,-b-f/t.scale,m/t.scale,f/t.scale)):(b+=(m-f)/2,g+=(f-m)/2,u.rotate(90*i*Math.PI/180),u.drawImage(n,g,-b-f,m,f));break;case 2:case-2:t.full?(c(p/t.scale,h/t.scale),u.rotate(90*i*Math.PI/180),b/=t.scale,g/=t.scale,u.drawImage(n,-b-m/t.scale,-g-f/t.scale,m/t.scale,f/t.scale)):(u.rotate(90*i*Math.PI/180),u.drawImage(n,-b-m,-g-f,m,f));break;case 3:case-1:t.full?(c(p/t.scale,h/t.scale),b=b/t.scale+(m/t.scale-f/t.scale)/2,g=g/t.scale+(f/t.scale-m/t.scale)/2,u.rotate(90*i*Math.PI/180),u.drawImage(n,-g-m/t.scale,b,m/t.scale,f/t.scale)):(b+=(m-f)/2,g+=(f-m)/2,u.rotate(90*i*Math.PI/180),u.drawImage(n,-g-m,b,m,f));break;default:t.full?(c(p/t.scale,h/t.scale),u.drawImage(n,b/t.scale,g/t.scale,m/t.scale,f/t.scale)):u.drawImage(n,b,g,m,f)}u.restore()}else{var v=o*t.scale,y=r*t.scale,_=a.getContext("2d");switch(_.save(),i){case 0:c(v,y),_.drawImage(n,0,0,v,y);break;case 1:case-3:c(y,v),_.rotate(90*i*Math.PI/180),_.drawImage(n,0,-y,v,y);break;case 2:case-2:c(v,y),_.rotate(90*i*Math.PI/180),_.drawImage(n,-v,-y,v,y);break;case 3:case-1:c(y,v),_.rotate(90*i*Math.PI/180),_.drawImage(n,-v,0,v,y);break;default:c(v,y),_.drawImage(n,0,0,v,y)}_.restore()}e(a)},"data"!==this.img.substr(0,4)&&(n.crossOrigin="Anonymous"),n.src=this.imgs},getCropData:function(e){var t=this;this.getCropChecked((function(a){e(a.toDataURL("image/"+t.outputType,t.outputSize))}))},getCropBlob:function(e){var t=this;this.getCropChecked((function(a){a.toBlob((function(t){return e(t)}),"image/"+t.outputType,t.outputSize)}))},showPreview:function(){var e=this;if(!this.isCanShow)return!1;this.isCanShow=!1,setTimeout((function(){e.isCanShow=!0}),16);var t=this.cropW,a=this.cropH,n=this.scale,i={};i.div={width:"".concat(t,"px"),height:"".concat(a,"px")};var o=(this.x-this.cropOffsertX)/n,r=(this.y-this.cropOffsertY)/n;i.w=t,i.h=a,i.url=this.imgs,i.img={width:"".concat(this.trueWidth,"px"),height:"".concat(this.trueHeight,"px"),transform:"scale(".concat(n,")translate3d(").concat(o,"px, ").concat(r,"px, ").concat(0,"px)rotateZ(").concat(90*this.rotate,"deg)")},i.html='\n      <div class="show-preview" style="width: '.concat(i.w,"px; height: ").concat(i.h,'px,; overflow: hidden">\n        <div style="width: ').concat(t,"px; height: ").concat(a,'px">\n          <img src=').concat(i.url,' style="width: ').concat(this.trueWidth,"px; height: ").concat(this.trueHeight,"px; transform:\n          scale(").concat(n,")translate3d(").concat(o,"px, ").concat(r,"px, ").concat(0,"px)rotateZ(").concat(90*this.rotate,'deg)">\n        </div>\n      </div>'),this.$emit("realTime",i),this.$emit("real-time",i)},reload:function(){var e=this,t=new Image;t.onload=function(){e.w=parseFloat(window.getComputedStyle(e.$refs.cropper).width),e.h=parseFloat(window.getComputedStyle(e.$refs.cropper).height),e.trueWidth=t.width,e.trueHeight=t.height,e.original?e.scale=1:e.scale=e.checkedMode(),e.$nextTick((function(){e.x=-(e.trueWidth-e.trueWidth*e.scale)/2+(e.w-e.trueWidth*e.scale)/2,e.y=-(e.trueHeight-e.trueHeight*e.scale)/2+(e.h-e.trueHeight*e.scale)/2,e.loading=!1,e.autoCrop&&e.goAutoCrop(),e.$emit("img-load","success"),e.$emit("imgLoad","success"),setTimeout((function(){e.showPreview()}),20)}))},t.onerror=function(){e.$emit("imgLoad","error"),e.$emit("img-load","error")},t.src=this.imgs},checkedMode:function(){var e=1,t=(this.trueWidth,this.trueHeight),a=this.mode.split(" ");switch(a[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":(t*=e=this.w/this.trueWidth)<this.h&&(e=(t=this.h)/this.trueHeight);break;default:try{var n=a[0];if(-1!==n.search("px")&&(n=n.replace("px",""),e=parseFloat(n)/this.trueWidth),-1!==n.search("%")&&(n=n.replace("%",""),e=parseFloat(n)/100*this.w/this.trueWidth),2===a.length&&"auto"===n){var i=a[1];-1!==i.search("px")&&(i=i.replace("px",""),e=(t=parseFloat(i))/this.trueHeight),-1!==i.search("%")&&(i=i.replace("%",""),e=(t=parseFloat(i)/100*this.h)/this.trueHeight)}}catch(t){e=1}}return e},goAutoCrop:function(e,t){this.clearCrop(),this.cropping=!0;var a=this.w,n=this.h;if(this.centerBox){var i=this.trueWidth*this.scale,o=this.trueHeight*this.scale;a=i<a?i:a,n=o<n?o:n}var r=e||parseFloat(this.autoCropWidth),l=t||parseFloat(this.autoCropHeight);0!==r&&0!==l||(r=.8*a,l=.8*n),r=r>a?a:r,l=l>n?n:l,this.fixed&&(l=r/this.fixedNumber[0]*this.fixedNumber[1]),l>this.h&&(r=(l=this.h)/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(r,l)},changeCrop:function(e,t){var a=this;if(this.centerBox){var n=this.getImgAxis();e>n.x2-n.x1&&(t=(e=n.x2-n.x1)/this.fixedNumber[0]*this.fixedNumber[1]),t>n.y2-n.y1&&(e=(t=n.y2-n.y1)/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=t,this.cropOffsertX=(this.w-e)/2,this.cropOffsertY=(this.h-t)/2,this.centerBox&&this.$nextTick((function(){a.moveCrop(null,!0)}))},refresh:function(){var e=this;this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick((function(){e.checkedImg()}))},rotateLeft:function(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight:function(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear:function(){this.rotate=0},checkoutImgAxis:function(e,t,a){e=e||this.x,t=t||this.y,a=a||this.scale;var n=!0;if(this.centerBox){var i=this.getImgAxis(e,t,a),o=this.getCropAxis();i.x1>=o.x1&&(n=!1),i.x2<=o.x2&&(n=!1),i.y1>=o.y1&&(n=!1),i.y2<=o.y2&&(n=!1)}return n}},mounted:function(){this.support="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";var e=this,t=navigator.userAgent;this.isIOS=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,a,n){for(var i=atob(this.toDataURL(a,n).split(",")[1]),o=i.length,r=new Uint8Array(o),l=0;l<o;l++)r[l]=i.charCodeAt(l);t(new Blob([r],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},destroyed:function(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop)}};a(1);var l=function(e,t,a,n,i,o,r,l){var s,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=s):i&&(s=l?function(){i.call(this,this.$root.$options.shadowRoot)}:i),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:c}}(r,n,[],!1,null,"6dae58fd",null);l.options.__file="src/vue-cropper.vue";var s=l.exports;a.d(t,"VueCropper",(function(){return s}));var c=function(e){e.component("VueCropper",s)};"undefined"!=typeof window&&window.Vue&&c(window.Vue),t.default={version:"0.4.8",install:c,VueCropper:s,vueCropper:s}}])}))},"7ed0":function(e,t,a){"use strict";a("517d")},"7ee9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:"small"}},[a("el-form-item",{attrs:{label:"归属组织",prop:"deptId"}},[a("treeselect",{staticStyle:{width:"200px"},attrs:{options:e.deptOptions,normalizer:e.normalizer,placeholder:"选择归属组织",size:"small"},model:{value:e.queryParams.deptId,callback:function(t){e.$set(e.queryParams,"deptId",t)},expression:"queryParams.deptId"}})],1),a("el-form-item",{attrs:{label:"appKey",prop:"appKey"}},[a("el-input",{attrs:{placeholder:"请输入appKey",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.appKey,callback:function(t){e.$set(e.queryParams,"appKey",t)},expression:"queryParams.appKey"}})],1),a("el-form-item",{attrs:{label:"业务类型",prop:"bizType"}},[a("el-select",{attrs:{placeholder:"请选择业务类型",clearable:"",size:"small"},model:{value:e.queryParams.bizType,callback:function(t){e.$set(e.queryParams,"bizType",t)},expression:"queryParams.bizType"}},e._l(e.bizTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"业务名称",prop:"bizName"}},[a("el-input",{attrs:{placeholder:"请输入业务名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bizName,callback:function(t){e.$set(e.queryParams,"bizName",t)},expression:"queryParams.bizName"}})],1),a("el-form-item",{attrs:{label:"是否内置",prop:"buildinFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否内置",clearable:"",size:"small"},model:{value:e.queryParams.buildinFlag,callback:function(t){e.$set(e.queryParams,"buildinFlag",t)},expression:"queryParams.buildinFlag"}},e._l(e.buildinFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否全局",prop:"situation"}},[a("el-select",{attrs:{placeholder:"请选择是否全局",clearable:"",size:"small"},model:{value:e.queryParams.situation,callback:function(t){e.$set(e.queryParams,"situation",t)},expression:"queryParams.situation"}},e._l(e.buildinFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:setting:add"],expression:"['system:setting:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:setting:edit"],expression:"['system:setting:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:setting:remove"],expression:"['system:setting:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:setting:copy"],expression:"['system:setting:copy']"}],attrs:{type:"danger",icon:"el-icon-copy-document",size:"mini",disabled:e.multiple},on:{click:e.handleCopy}},[e._v("复制")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.settingList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"归属组织",align:"center",prop:"deptName"}}),a("el-table-column",{attrs:{label:"业务名称",align:"center",prop:"bizName"}}),a("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"bizType",formatter:e.bizTypeFormat}}),a("el-table-column",{attrs:{label:"appKey",align:"center",prop:"appKey"}}),a("el-table-column",{attrs:{label:"appSecret",align:"center",prop:"appSecret"}}),a("el-table-column",{attrs:{label:"请求链接",align:"center",prop:"requestUrl"}}),a("el-table-column",{attrs:{label:"域名",align:"center",prop:"domain"}}),a("el-table-column",{attrs:{label:"是否内置",align:"center",prop:"buildinFlag",formatter:e.buildinFlagFormat}}),a("el-table-column",{attrs:{label:"是否全局",align:"center",prop:"situation",formatter:e.situationFlagFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:setting:edit"],expression:"['system:setting:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:setting:remove"],expression:"['system:setting:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"业务名称",prop:"bizName"}},[a("el-input",{attrs:{placeholder:"请输入业务名称"},model:{value:e.form.bizName,callback:function(t){e.$set(e.form,"bizName",t)},expression:"form.bizName"}})],1),a("el-form-item",{attrs:{label:"业务类型",prop:"bizType"}},[a("el-select",{attrs:{placeholder:"请选择业务类型"},model:{value:e.form.bizType,callback:function(t){e.$set(e.form,"bizType",t)},expression:"form.bizType"}},e._l(e.bizTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"appKey",prop:"appKey"}},[a("el-input",{attrs:{placeholder:"请输入appKey"},model:{value:e.form.appKey,callback:function(t){e.$set(e.form,"appKey",t)},expression:"form.appKey"}})],1),a("el-form-item",{attrs:{label:"appSecret",prop:"appSecret"}},[a("el-input",{attrs:{placeholder:"请输入appSecret"},model:{value:e.form.appSecret,callback:function(t){e.$set(e.form,"appSecret",t)},expression:"form.appSecret"}})],1),a("el-form-item",{attrs:{label:"请求链接",prop:"requestUrl"}},[a("el-input",{attrs:{placeholder:"请输入请求链接"},model:{value:e.form.requestUrl,callback:function(t){e.$set(e.form,"requestUrl",t)},expression:"form.requestUrl"}})],1),a("el-form-item",{attrs:{label:"域名",prop:"domain"}},[a("el-input",{attrs:{placeholder:"请输入域名"},model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain",t)},expression:"form.domain"}})],1),a("el-form-item",{attrs:{label:"是否内置",prop:"buildinFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否内置"},model:{value:e.form.buildinFlag,callback:function(t){e.$set(e.form,"buildinFlag",t)},expression:"form.buildinFlag"}},e._l(e.buildinFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否全局",prop:"situation"}},[a("el-select",{attrs:{placeholder:"请选择是否内置"},model:{value:e.form.situation,callback:function(t){e.$set(e.form,"situation",t)},expression:"form.situation"}},e._l(e.buildinFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"归属组织",prop:"deptId"}},[a("treeselect",{attrs:{options:e.deptOptions,normalizer:e.normalizer,placeholder:"选择归属组织"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1),a("el-form-item",{attrs:{label:"扩展参数1",prop:"ext1"}},[a("el-input",{attrs:{placeholder:"请输入扩展参数1"},model:{value:e.form.ext1,callback:function(t){e.$set(e.form,"ext1",t)},expression:"form.ext1"}})],1),a("el-form-item",{attrs:{label:"扩展参数2",prop:"ext2"}},[a("el-input",{attrs:{placeholder:"请输入扩展参数2"},model:{value:e.form.ext2,callback:function(t){e.$set(e.form,"ext2",t)},expression:"form.ext2"}})],1),a("el-form-item",{attrs:{label:"扩展参数3",prop:"ext3"}},[a("el-input",{attrs:{placeholder:"请输入扩展参数3"},model:{value:e.form.ext3,callback:function(t){e.$set(e.form,"ext3",t)},expression:"form.ext3"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.copyDialog.title,visible:e.copyDialog.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.copyDialog,"open",t)}}},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入组织名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.copyDialog.deptName,callback:function(t){e.$set(e.copyDialog,"deptName",t)},expression:"copyDialog.deptName"}})],1),a("div",{staticClass:"head-container"},[a("el-tree",{ref:"tree",attrs:{data:e.copyDialog.deptOptions,props:e.copyDialog.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"show-checkbox":"","filter-node-method":e.filterNode,"node-key":"id","default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitCopyDialog}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.copyDialog.open=!1}}},[e._v("取 消")])],1)]),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/system/setting/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/setting/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/setting",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/setting",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/system/setting/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/system/setting/export",method:"get",params:e})}function p(e){return Object(o["a"])({url:"/system/setting/copy",method:"post",data:e})}var h=a("fcb7"),m=a("c38a"),f=a("ca17"),b=a.n(f),g=(a("542c"),{name:"Setting",components:{Treeselect:b.a},data:function(){return{loading:!0,ids:[],types:[],single:!0,multiple:!0,showSearch:!0,total:0,settingList:[],title:"",open:!1,deptOptions:[],bizTypeOptions:[],buildinFlagOptions:[],queryParams:{pageNum:1,pageSize:10,appKey:null,bizType:null,bizName:null,buildinFlag:null,situation:null,deptId:null},form:{},rules:{appKey:[{required:!0,message:"appkey不能为空",trigger:"blur"}],appSecret:[{required:!0,message:"appSecret不能为空",trigger:"blur"}],bizType:[{required:!0,message:"业务类型不能为空",trigger:"blur"}],bizName:[{required:!0,message:"业务名称不能为空",trigger:"blur"}],requestUrl:[{required:!0,message:"请求链接不能为空",trigger:"blur"}],buildinFlag:[{required:!0,message:"是否内置不能为空",trigger:"blur"}],situation:[{required:!0,message:"是否全局不能为空",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null,copyDialog:{title:"复制",open:!1,deptName:"",deptOptions:[],defaultProps:{children:"children",label:"label"}}}},created:function(){var e=this;this.getList(),this.getDicts("api_setting").then((function(t){e.bizTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.buildinFlagOptions=t.data})),Object(h["g"])().then((function(t){e.deptOptions=e.handleTree(t.data,"deptId",t.data[0].parentId)})),this.getTreeselect()},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.settingList=t.rows,e.total=t.total,e.loading=!1}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.deptId,label:e.deptName,children:e.children}},bizTypeFormat:function(e,t){return this.selectDictLabel(this.bizTypeOptions,e.bizType)},buildinFlagFormat:function(e,t){return this.selectDictLabel(this.buildinFlagOptions,e.buildinFlag)},situationFlagFormat:function(e,t){return this.selectDictLabel(this.buildinFlagOptions,e.situation)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,appKey:null,appSecret:null,bizType:null,bizName:null,requestUrl:null,domain:null,buildinFlag:null,ext1:null,ext2:null,ext3:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.types=e.map((function(e){return e.bizName})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加API配置"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改API配置"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=e.bizName||this.types;this.$confirm('是否确认删除系统api接口业务类型为"'+n+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有系统api接口配置数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(m["g"])(10,"导出中",e),d(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))},handleCopy:function(){this.copyDialog.open=!0},getTreeselect:function(){var e=this;Object(h["f"])().then((function(t){e.copyDialog.deptOptions=t.data}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e,t){this.$refs.tree.setChecked(e.id,!t.checked,!0)},submitCopyDialog:function(){var e=this,t=this.$refs.tree.getCheckedKeys();if(t.length){var a={ids:this.ids,deptIds:t};this.$vLoading.show(),p(a).then((function(t){e.$vLoading.hide(),200==t.code?e.msgSuccess("复制成功"):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}else this.msgError("请选择数据再操作")}}}),v=g,y=(a("a151"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"61bb615b",null);t["default"]=_.exports},"7eff":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px",rules:e.rules}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",{staticStyle:{display:"flex"}},[a("el-col",{attrs:{span:7}}),a("el-col",{attrs:{span:10}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:7}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate","string"===typeof t?t.trim():t)},expression:"form.invDate"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机打代码",prop:"invCode"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机打号码",prop:"invNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.machineNo,callback:function(t){e.$set(e.form,"machineNo","string"===typeof t?t.trim():t)},expression:"form.machineNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税控码"}},[a("el-input",{staticStyle:{height:"114px"},attrs:{type:"textarea",size:"mini",readonly:""},model:{value:e.form.pwdCode,callback:function(t){e.$set(e.form,"pwdCode","string"===typeof t?t.trim():t)},expression:"form.pwdCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"80px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买方名称及身份证号/组织机构代码",prop:"buyName"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}}),a("br"),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard","string"===typeof t?t.trim():t)},expression:"form.idCard"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:"3",readonly:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.vehicleType,callback:function(t){e.$set(e.form,"vehicleType","string"===typeof t?t.trim():t)},expression:"form.vehicleType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.factoryNo,callback:function(t){e.$set(e.form,"factoryNo","string"===typeof t?t.trim():t)},expression:"form.factoryNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.origin,callback:function(t){e.$set(e.form,"origin","string"===typeof t?t.trim():t)},expression:"form.origin"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合格证号",prop:"eligibilityNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.eligibilityNo,callback:function(t){e.$set(e.form,"eligibilityNo","string"===typeof t?t.trim():t)},expression:"form.eligibilityNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进口证明书号",prop:"importCertificateNumber"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.importCertificateNumber,callback:function(t){e.$set(e.form,"importCertificateNumber","string"===typeof t?t.trim():t)},expression:"form.importCertificateNumber"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商检单号",prop:"commodityInspectionNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.commodityInspectionNo,callback:function(t){e.$set(e.form,"commodityInspectionNo","string"===typeof t?t.trim():t)},expression:"form.commodityInspectionNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号码",prop:"engineNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.engineNo,callback:function(t){e.$set(e.form,"engineNo","string"===typeof t?t.trim():t)},expression:"form.engineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆识别代号",prop:"vehicleIdentificationCode"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.vehicleIdentificationCode,callback:function(t){e.$set(e.form,"vehicleIdentificationCode","string"===typeof t?t.trim():t)},expression:"form.vehicleIdentificationCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"价税合计"}},[a("el-input",{attrs:{size:"mini",readonly:""},on:{change:e.totalAmountChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount","string"===typeof t?t.trim():t)},expression:"form.totalAmount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"大写￥"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalMoneyUp,callback:function(t){e.$set(e.form,"totalMoneyUp","string"===typeof t?t.trim():t)},expression:"form.totalMoneyUp"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销货单位名称",prop:"sellName"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"sellTel"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel","string"===typeof t?t.trim():t)},expression:"form.sellTel"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"sellTaxNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"账号",prop:"sellAccount"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址",prop:"sellAddr"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr","string"===typeof t?t.trim():t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开户银行",prop:"sellBank"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"80px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税率或征收率",prop:"rate"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择税率",readonly:""},model:{value:e.form.rate,callback:function(t){e.$set(e.form,"rate",t)},expression:"form.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税额",prop:"totalTaxAmount"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount","string"===typeof t?t.trim():t)},expression:"form.totalTaxAmount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"主管税务机关及代码"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.taxAuthorityName,callback:function(t){e.$set(e.form,"taxAuthorityName","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityName"}}),a("br"),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.taxAuthorityCode,callback:function(t){e.$set(e.form,"taxAuthorityCode","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"不含税价",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"form.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"完税凭证号码",prop:"completionVoucherNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.completionVoucherNo,callback:function(t){e.$set(e.form,"completionVoucherNo","string"===typeof t?t.trim():t)},expression:"form.completionVoucherNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"吨位",prop:"tonnage"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.tonnage,callback:function(t){e.$set(e.form,"tonnage","string"===typeof t?t.trim():t)},expression:"form.tonnage"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"限乘人数",prop:"limitedNumberOfPassengers"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.limitedNumberOfPassengers,callback:function(t){e.$set(e.form,"limitedNumberOfPassengers","string"===typeof t?t.trim():t)},expression:"form.limitedNumberOfPassengers"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产企业名称",prop:""}},[a("el-input",{attrs:{placeholder:"",readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.factoryName,callback:function(t){e.$set(e.form,"factoryName","string"===typeof t?t.trim():t)},expression:"form.factoryName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注",maxlength:10,readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note","string"===typeof t?t.trim():t)},expression:"form.note"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("0cb6")),r=(a("ed08"),a("c38a"),{name:"vehicleInvoiceDetailShowModal",props:{},data:function(){return{form:{billType:"03",blockChain:null,buyAddrTel:null,buyBankAccount:null,buyName:null,buyTaxNo:null,idCardNo:null,cashier:null,checkCode:null,checkMsg:null,checked:null,checker:null,createBy:null,id:null,invCode:null,invDate:null,invNo:null,invType:null,invoicer:null,machineNo:null,note:null,sellName:null,sellTaxNo:null,sellAddr:null,sellBank:null,sellTel:null,sellAccount:null,sourceInvCode:null,sourceInvNo:null,state:null,totalAmount:null,totalAmountWithoutTax:null,totalMoneyUp:null,totalTaxAmount:null,updateBy:null,updateTime:null,vehicleType:null,factoryNo:null,origin:null,eligibilityNo:null,importCertificateNumber:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,rate:null,taxAuthorityName:null,taxAuthorityCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null},fplxdesc:"机动车销售统一发票",open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],rateOptions:[],rules:{buyName:[{required:!0,message:"购买方名称不能为空",trigger:"blur"}],buyTaxNo:[{required:!0,message:"纳税人识别号不能为空",trigger:"blur"}],vehicleType:[{required:!0,message:"车辆类型不能为空",trigger:"blur"}],factoryNo:[{required:!0,message:"厂牌型号不能为空",trigger:"blur"}],origin:[{required:!0,message:"产地不能为空",trigger:"blur"}]}}},watch:{},computed:{},created:function(){var e=this;this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data}))},mounted:function(){},methods:{fillInvoiceDialog:function(e){var t=this;return Object(o["i"])(e).then((function(e){var a=e.data;a.billType="03",a.rate+="",t.form=a,t.form.totalMoneyUp=t.swapper(t.form.totalAmount),t.open=!0,t.title="发票详情",t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},openDialog:function(){this.open=!0,this.title="添加单据",this.$refs.form.clearValidate()},totalAmountChange:function(){this.form.totalMoneyUp=this.swapper(this.form.totalAmount)}}}),l=r,s=(a("ed47"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,"83490614",null);t["default"]=c.exports},"7f8e":function(e,t,a){"use strict";a("720f")},"7fa7":function(e,t,a){"use strict";a("981b")},"7ffe":function(e,t,a){},"8027c":function(e,t,a){},"809a":function(e,t,a){},"80de":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeUpJs}));var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5__),util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("3022"),util__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_6__),_utils_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ed08"),_config__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2e2a"),units={KB:"1024",MB:"1024 / 1024",GB:"1024 / 1024 / 1024"},confGlobal,inheritAttrs={file:"",dialog:"inheritAttrs: false,"};function makeUpJs(e,t){confGlobal=e=JSON.parse(JSON.stringify(e));var a=[],n=[],i=[],o=[],r=mixinMethod(t),l=[];e.fields.forEach((function(e){buildAttributes(e,a,n,i,r,o,l)}));var s=buildexport(e,t,a.join("\n"),n.join("\n"),i.join("\n"),l.join("\n"),o.join("\n"),r.join("\n"));return confGlobal=null,s}function buildAttributes(e,t,a,n,i,o,r){if(buildData(e,t),buildRules(e,a),e.options&&e.options.length&&(buildOptions(e,n),"dynamic"===e.dataType)){var l="".concat(e.vModel,"Options"),s=Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["q"])(l);buildOptionMethod("get".concat(s),l,i)}e.props&&e.props.props&&buildProps(e,o),e.action&&"el-upload"===e.tag&&(r.push("".concat(e.vModel,"Action: '").concat(e.action,"',\n      ").concat(e.vModel,"fileList: [],")),i.push(buildBeforeUpload(e)),e["auto-upload"]||i.push(buildSubmitUpload(e))),e.children&&e.children.forEach((function(e){buildAttributes(e,t,a,n,i,o,r)}))}function mixinMethod(e){var t=[],a={file:confGlobal.formBtns?{submitForm:"submitForm() {\n        this.$refs['".concat(confGlobal.formRef,"'].validate(valid => {\n          if(!valid) return\n          // TODO 提交表单\n        })\n      },"),resetForm:"resetForm() {\n        this.$refs['".concat(confGlobal.formRef,"'].resetFields()\n      },")}:null,dialog:{onOpen:"onOpen() {},",onClose:"onClose() {\n        this.$refs['".concat(confGlobal.formRef,"'].resetFields()\n      },"),close:"close() {\n        this.$emit('update:visible', false)\n      },",handelConfirm:"handelConfirm() {\n        this.$refs['".concat(confGlobal.formRef,"'].validate(valid => {\n          if(!valid) return\n          this.close()\n        })\n      },")}},n=a[e];return n&&Object.keys(n).forEach((function(e){t.push(n[e])})),t}function buildData(e,t){var a;void 0!==e.vModel&&(a="string"!==typeof e.defaultValue||e.multiple?"".concat(JSON.stringify(e.defaultValue)):"'".concat(e.defaultValue,"'"),t.push("".concat(e.vModel,": ").concat(a,",")))}function buildRules(conf,ruleList){if(void 0!==conf.vModel){var rules=[];if(_config__WEBPACK_IMPORTED_MODULE_8__["e"][conf.tag]){if(conf.required){var type=Object(util__WEBPACK_IMPORTED_MODULE_6__["isArray"])(conf.defaultValue)?"type: 'array',":"",message=Object(util__WEBPACK_IMPORTED_MODULE_6__["isArray"])(conf.defaultValue)?"请至少选择一个".concat(conf.vModel):conf.placeholder;void 0===message&&(message="".concat(conf.label,"不能为空")),rules.push("{ required: true, ".concat(type," message: '").concat(message,"', trigger: '").concat(_config__WEBPACK_IMPORTED_MODULE_8__["e"][conf.tag],"' }"))}conf.regList&&Object(util__WEBPACK_IMPORTED_MODULE_6__["isArray"])(conf.regList)&&conf.regList.forEach((function(item){item.pattern&&rules.push("{ pattern: ".concat(eval(item.pattern),", message: '").concat(item.message,"', trigger: '").concat(_config__WEBPACK_IMPORTED_MODULE_8__["e"][conf.tag],"' }"))})),ruleList.push("".concat(conf.vModel,": [").concat(rules.join(","),"],"))}}}function buildOptions(e,t){if(void 0!==e.vModel){"dynamic"===e.dataType&&(e.options=[]);var a="".concat(e.vModel,"Options: ").concat(JSON.stringify(e.options),",");t.push(a)}}function buildProps(e,t){"dynamic"===e.dataType&&("value"!==e.valueKey&&(e.props.props.value=e.valueKey),"label"!==e.labelKey&&(e.props.props.label=e.labelKey),"children"!==e.childrenKey&&(e.props.props.children=e.childrenKey));var a="".concat(e.vModel,"Props: ").concat(JSON.stringify(e.props.props),",");t.push(a)}function buildBeforeUpload(e){var t=units[e.sizeUnit],a="",n="",i=[];e.fileSize&&(a="let isRightSize = file.size / ".concat(t," < ").concat(e.fileSize,"\n    if(!isRightSize){\n      this.$message.error('文件大小超过 ").concat(e.fileSize).concat(e.sizeUnit,"')\n    }"),i.push("isRightSize")),e.accept&&(n="let isAccept = new RegExp('".concat(e.accept,"').test(file.type)\n    if(!isAccept){\n      this.$message.error('应该选择").concat(e.accept,"类型的文件')\n    }"),i.push("isAccept"));var o="".concat(e.vModel,"BeforeUpload(file) {\n    ").concat(a,"\n    ").concat(n,"\n    return ").concat(i.join("&&"),"\n  },");return i.length?o:""}function buildSubmitUpload(e){var t="submitUpload() {\n    this.$refs['".concat(e.vModel,"'].submit()\n  },");return t}function buildOptionMethod(e,t,a){var n="".concat(e,"() {\n    // TODO 发起请求获取数据\n    this.").concat(t,"\n  },");a.push(n)}function buildexport(e,t,a,n,i,o,r,l){var s="".concat(_utils_index__WEBPACK_IMPORTED_MODULE_7__["f"],"{\n  ").concat(inheritAttrs[t],"\n  components: {},\n  props: [],\n  data () {\n    return {\n      ").concat(e.formModel,": {\n        ").concat(a,"\n      },\n      ").concat(e.formRules,": {\n        ").concat(n,"\n      },\n      ").concat(o,"\n      ").concat(i,"\n      ").concat(r,"\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    ").concat(l,"\n  }\n}");return s}},"815e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,xs:24}},[a("div",{ref:"leftSearchInput",staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入组织名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),a("div",{staticClass:"head-container",style:{height:e.treeHeight+"px",overflow:"auto",marginRight:"-37px"}},[a("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"highlight-current":!0,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)]),a("el-col",{staticStyle:{background:"white",position:"relative"},attrs:{span:20,xs:24}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,"label-width":"auto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"核对购方信息",prop:"checkBuyInfo"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.queryParams.checkBuyInfo,callback:function(t){e.$set(e.queryParams,"checkBuyInfo",t)},expression:"queryParams.checkBuyInfo"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"核对发票代码号码",prop:"checkInvCodeNo"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.queryParams.checkInvCodeNo,callback:function(t){e.$set(e.queryParams,"checkInvCodeNo",t)},expression:"queryParams.checkInvCodeNo"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"核对发票联次",prop:"checkInvJoint"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.queryParams.checkInvJoint,callback:function(t){e.$set(e.queryParams,"checkInvJoint",t)},expression:"queryParams.checkInvJoint"}},[a("el-option",{attrs:{label:"不限",value:0}}),a("el-option",{attrs:{label:"必须是发票连",value:1}}),a("el-option",{attrs:{label:"必须是抵扣联",value:2}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发票日期有效性",prop:"checkInvData"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.queryParams.checkInvData,callback:function(t){e.$set(e.queryParams,"checkInvData",t)},expression:"queryParams.checkInvData"}},[a("el-option",{attrs:{label:"不检测",value:0}}),a("el-option",{attrs:{label:"月",value:1}}),a("el-option",{attrs:{label:"季度",value:2}}),a("el-option",{attrs:{label:"年",value:3}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"增值税发票保存时是否立即查验",prop:"invCheckTimely"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.queryParams.invCheckTimely,callback:function(t){e.$set(e.queryParams,"invCheckTimely",t)},expression:"queryParams.invCheckTimely"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片、文件发票录入是否立即ocr识别",prop:"fileInvOcrTimely"}},[a("el-select",{style:{width:"100%"},model:{value:e.queryParams.fileInvOcrTimely,callback:function(t){e.$set(e.queryParams,"fileInvOcrTimely",t)},expression:"queryParams.fileInvOcrTimely"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"发票类型范围",prop:"invTypeArr"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.queryParams.invTypeArr,callback:function(t){e.$set(e.queryParams,"invTypeArr",t)},expression:"queryParams.invTypeArr"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"发票税率范围",prop:"rateArr"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.queryParams.rateArr,callback:function(t){e.$set(e.queryParams,"rateArr",t)},expression:"queryParams.rateArr"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"敏感词校验",prop:"onSensitiveWords"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.queryParams.onSensitiveWords,callback:function(t){e.$set(e.queryParams,"onSensitiveWords",t)},expression:"queryParams.onSensitiveWords"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"风险企业校验",prop:"onRiskCom"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.queryParams.onRiskCom,callback:function(t){e.$set(e.queryParams,"onRiskCom",t)},expression:"queryParams.onRiskCom"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票据合规性校验",prop:"onInvRule"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.queryParams.onInvRule,callback:function(t){e.$set(e.queryParams,"onInvRule",t)},expression:"queryParams.onInvRule"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)],1)],1)],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("ade3"),r=(a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("159b"),a("ac1f"),a("5319"),a("a15b"),a("b775"));function l(e){return Object(r["a"])({url:"/system/ruleSetting/"+e,method:"get"})}function s(e){return Object(r["a"])({url:"/system/ruleSetting",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/system/ruleSetting",method:"put",data:e})}var u,d=a("7ded"),p=(a("5f87"),a("fcb7")),h=a("ca17"),m=a.n(h),f=(a("542c"),a("c38a"),u={name:"TicketControl",components:{Treeselect:m.a},data:function(){return{routeLoading:!1,loading:!0,valueConsistsOf:"BRANCH_PRIORITY",ids:[],single:!0,pickerOption:{disabledDate:function(e){return e.getTime()<Date.now()}},deptRoleOptions:[],deptRoleProp:{multiple:!0},multiple:!0,showSearch:!0,total:0,userList:null,title:"",deptOptions:void 0,open:!1,deptName:void 0,depts:[],initPassword:void 0,dateRange:[],statusOptions:[],sexOptions:[],postOptions:[],roleOptions:[],form:{},defaultProps:{children:"children",label:"label",autoSelectAncestors:!1},queryParams:{id:null,checkBuyInfo:null,checkInvCodeNo:null,checkInvJoint:null,checkInvData:null,invCheckTimely:null,fileInvOcrTimely:null,invTypeArr:[],invType:null,rateArr:[],rate:null,onSensitiveWords:null,onRiskCom:null,onInvRule:null,deptId:null},currDeptId:null,rules:{userName:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],deptrole:[{required:!0,message:"组织角色不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null,tableHeight:null,treeHeight:null,invTypeOptions:[],taxRateOptions:[]}},watch:{deptName:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this;this.getTreeselect(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_user_sex").then((function(t){e.sexOptions=t.data})),this.getConfigKey("sys.user.initPassword").then((function(t){e.initPassword=t.msg}));var t=this.getDicts("income_check_inv_type"),a=this.getDicts("other_ticket");Promise.all([t,a]).then((function(t){var a=[];e.invTypeOptions=a.concat(t[0]["data"],t[1]["data"])})),this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),setTimeout((function(){Object(d["b"])().then((function(t){e.queryParams.deptId=t.user.deptId,e.currDeptId=t.user.deptId,document.getElementsByClassName("el-tree-node__label").forEach((function(e,t){e.innerText==document.getElementsByClassName("dept-name")[0].innerText.replace("[","").replace("]","")&&e.parentNode.parentNode.classList.add("is-current")})),e.getList()}))}),200)},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.treeHeight=this.calcTreeHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.treeHeight=e.calcTreeHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.treeHeight=this.calcTreeHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.treeHeight=e.calcTreeHeight()}}},Object(o["a"])(u,"watch",{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}}),Object(o["a"])(u,"methods",{calcTreeHeight:function(){var e=window.innerHeight,t=this.$refs.leftSearchInput;t=void 0==t?0:t.offsetHeight;var a=84,n=e-t-a-50;return n<236?236:n},getList:function(){var e=this;this.routeLoading=!0,l(this.currDeptId).then((function(t){e.queryParamsReset(),t.data&&(e.queryParams=Object.assign({},e.queryParams,t.data),e.queryParams.rateArr=e.queryParams.rate?e.queryParams.rate.split(","):[],e.queryParams.invTypeArr=e.queryParams.invType?e.queryParams.invType.split(","):[]),e.routeLoading=!1}))},getTreeselect:function(){var e=this;Object(p["d"])().then((function(t){e.deptOptions=t.data}))},getOptionalDeptRoleList:function(){var e=this;Object(p["e"])().then((function(t){e.deptRoleOptions=t.data}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){document.getElementsByClassName("is-current")&&document.getElementsByClassName("is-current")[0].classList.remove("is-current"),this.currDeptId=e.id,this.getList()},queryParamsReset:function(){this.queryParams={id:null,checkBuyInfo:null,checkInvCodeNo:null,checkInvJoint:null,checkInvData:null,invCheckTimely:null,fileInvOcrTimely:null,invTypeArr:[],invType:null,rateArr:[],rate:null,onSensitiveWords:null,onRiskCom:null,onInvRule:null,deptId:null}},submitForm:function(){var e=this;this.routeLoading=!0,this.$refs["queryForm"].validate((function(t){t&&(e.queryParams.rate=e.queryParams.rateArr.join(","),e.queryParams.invType=e.queryParams.invTypeArr.join(","),e.queryParams.id?c(e.queryParams).then((function(t){e.routeLoading=!1,200==t.code?e.msgSuccess("保存成功"):e.msgError("保存失败")})).catch((function(){})):(e.queryParams.deptId=e.currDeptId,s(e.queryParams).then((function(t){e.routeLoading=!1,200==t.code?e.msgSuccess("保存成功"):e.msgError("保存失败")})).catch((function(){}))))}))}}),u),b=f,g=(a("cda1a"),a("d86c"),a("2877")),v=Object(g["a"])(b,n,i,!1,null,"05f2d854",null);t["default"]=v.exports},8163:function(e,t,a){"use strict";a("911e")},"81a9":function(e,t,a){"use strict";a("ca7a")},"81d5":function(e,t,a){"use strict";var n=a("7b0b"),i=a("23cb"),o=a("50c4");e.exports=function(e){var t=n(this),a=o(t.length),r=arguments.length,l=i(r>1?arguments[1]:void 0,a),s=r>2?arguments[2]:void 0,c=void 0===s?a:i(s,a);while(c>l)t[l++]=e;return t}},"81e2":function(e,t,a){},8202:function(e,t,a){},"82c8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入表名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableName,callback:function(t){e.$set(e.queryParams,"tableName",t)},expression:"queryParams.tableName"}})],1),a("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[a("el-input",{attrs:{placeholder:"请输入表描述",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableComment,callback:function(t){e.$set(e.queryParams,"tableComment",t)},expression:"queryParams.tableComment"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:code"],expression:"['tool:gen:code']"}],attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:e.handleGenTable}},[e._v("生成")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:import"],expression:"['tool:gen:import']"}],attrs:{type:"info",icon:"el-icon-upload",size:"mini"},on:{click:e.openImportTable}},[e._v("导入")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:edit"],expression:"['tool:gen:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleEditTable}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:remove"],expression:"['tool:gen:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.queryParams.pageNum-1)*e.queryParams.pageSize+t.$index+1))])]}}])}),a("el-table-column",{attrs:{label:"表名称",align:"center",prop:"tableName","show-overflow-tooltip":!0,width:"130"}}),a("el-table-column",{attrs:{label:"表描述",align:"center",prop:"tableComment","show-overflow-tooltip":!0,width:"130"}}),a("el-table-column",{attrs:{label:"实体",align:"center",prop:"className","show-overflow-tooltip":!0,width:"130"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"}}),a("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"updateTime",width:"160"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:preview"],expression:"['tool:gen:preview']"}],attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(a){return e.handlePreview(t.row)}}},[e._v("预览")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:edit"],expression:"['tool:gen:edit']"}],attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.handleEditTable(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:remove"],expression:"['tool:gen:remove']"}],attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:code"],expression:"['tool:gen:code']"}],attrs:{type:"text",size:"small",icon:"el-icon-download"},on:{click:function(a){return e.handleGenTable(t.row)}}},[e._v("生成代码")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.preview.title,visible:e.preview.open,width:"80%",top:"5vh","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.preview,"open",t)}}},[a("el-tabs",{model:{value:e.preview.activeName,callback:function(t){e.$set(e.preview,"activeName",t)},expression:"preview.activeName"}},e._l(e.preview.data,(function(t,n){return a("el-tab-pane",{key:n,attrs:{label:n.substring(n.lastIndexOf("/")+1,n.indexOf(".vm")),name:n.substring(n.lastIndexOf("/")+1,n.indexOf(".vm"))}},[a("pre",[e._v(e._s(t))])])})),1)],1),a("import-table",{ref:"import",on:{ok:e.handleQuery}})],1)},i=[],o=(a("d81d"),a("4b72")),r=a("6f72"),l=(a("4d63"),a("ac1f"),a("2c3e"),a("25f0"),a("5319"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("bc3a")),s=a.n(l),c=a("5f87"),u={xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",zip:"application/zip"},d="/prod-api";function p(e,t){var a=d+e;s()({method:"get",url:a,responseType:"blob",headers:{Authorization:"Bearer "+Object(c["a"])()}}).then((function(e){h(e,u.zip)}))}function h(e,t){var a=document.createElement("a"),n=new Blob([e.data],{type:t}),i=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),o=decodeURI(e.headers["content-disposition"]),r=i.exec(o),l=r[1];l=l.replace(/\"/g,""),a.href=URL.createObjectURL(n),a.setAttribute("download",l),document.body.appendChild(a),a.click(),document.body.appendChild(a)}var m={name:"Gen",components:{importTable:r["default"]},data:function(){return{loading:!0,uniqueId:"",ids:[],tableNames:[],single:!0,multiple:!0,showSearch:!0,total:0,tableList:[],dateRange:"",queryParams:{pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0},preview:{open:!1,title:"代码预览",data:{},activeName:"domain.java"}}},created:function(){this.getList()},activated:function(){var e=this.$route.query.t;null!=e&&e!=this.uniqueId&&(this.uniqueId=e,this.resetQuery())},methods:{getList:function(){var e=this;this.loading=!0,Object(o["f"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.tableList=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},handleGenTable:function(e){var t=this,a=e.tableName||this.tableNames;""!=a?"1"===e.genType?Object(o["b"])(e.tableName).then((function(a){t.msgSuccess("成功生成到自定义路径："+e.genPath)})):p("/tool/gen/batchGenCode?tables="+a,"zzh"):this.msgError("请选择要生成的数据")},openImportTable:function(){this.$refs.import.show()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handlePreview:function(e){var t=this;Object(o["g"])(e.tableId).then((function(e){t.preview.data=e.data,t.preview.open=!0}))},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.tableId})),this.tableNames=e.map((function(e){return e.tableName})),this.single=1!=e.length,this.multiple=!e.length},handleEditTable:function(e){var t=e.tableId||this.ids[0];this.$router.push("/gen/edit/"+t)},handleDelete:function(e){var t=this,a=e.tableId||this.ids;this.$confirm('是否确认删除表编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["a"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))}}},f=m,b=a("2877"),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"82fd":function(e,t,a){},8562:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"审批名称",prop:"approveName"}},[a("el-input",{attrs:{placeholder:"请输入审批名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.approveName,callback:function(t){e.$set(e.queryParams,"approveName",t)},expression:"queryParams.approveName"}})],1),a("el-form-item",{attrs:{label:"审批类型",prop:"approveType"}},[a("el-select",{attrs:{placeholder:"请选择审批类型",clearable:"",size:"small"},model:{value:e.queryParams.approveType,callback:function(t){e.$set(e.queryParams,"approveType",t)},expression:"queryParams.approveType"}},e._l(e.approveTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["approve:flow:add"],expression:"['approve:flow:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["approve:flow:edit"],expression:"['approve:flow:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["approve:flow:remove"],expression:"['approve:flow:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["approve:flow:export"],expression:"['approve:flow:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.flowList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"审批名称",align:"center",prop:"approveName"}}),a("el-table-column",{attrs:{label:"审批类型",align:"center",prop:"approveType",formatter:e.approveTypeFormat}}),a("el-table-column",{attrs:{label:"推送方式",align:"center",prop:"pushMethod",formatter:e.pushMethodFormat}}),a("el-table-column",{attrs:{label:"状态，0：禁用，1：启用",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["approve:flow:edit"],expression:"['approve:flow:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["approve:flow:remove"],expression:"['approve:flow:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"审批名称",prop:"approveName"}},[a("el-input",{attrs:{placeholder:"请输入审批名称"},model:{value:e.form.approveName,callback:function(t){e.$set(e.form,"approveName",t)},expression:"form.approveName"}})],1),a("el-form-item",{attrs:{label:"审批类型"}},[a("el-select",{attrs:{placeholder:"请选择审批类型"},model:{value:e.form.approveType,callback:function(t){e.$set(e.form,"approveType",t)},expression:"form.approveType"}},e._l(e.approveTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"推送方式"}},[a("el-checkbox-group",{model:{value:e.form.pushMethod,callback:function(t){e.$set(e.form,"pushMethod",t)},expression:"form.pushMethod"}},e._l(e.pushMethodOptions,(function(t){return a("el-checkbox",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(" "+e._s(t.dictLabel)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:parseInt(e.dictValue)}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("a15b"),a("b775"));function r(e){return Object(o["a"])({url:"/approve/flow/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/approve/flow/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/approve/flow",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/approve/flow",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/approve/flow/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/approve/flow/export",method:"get",params:e})}var p={name:"Flow",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,flowList:[],title:"",open:!1,approveTypeOptions:[],pushMethodOptions:[],statusOptions:[],queryParams:{pageNum:1,pageSize:10,approveName:null,approveType:null,status:null,deptId:null,ext1:null,ext2:null,ext3:null},form:{},rules:{}}},created:function(){var e=this;this.getList(),this.getDicts("approve_type").then((function(t){e.approveTypeOptions=t.data})),this.getDicts("sys_push_type").then((function(t){e.pushMethodOptions=t.data})),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.flowList=t.rows,e.total=t.total,e.loading=!1}))},approveTypeFormat:function(e,t){return this.selectDictLabel(this.approveTypeOptions,e.approveType)},pushMethodFormat:function(e,t){return this.selectDictLabels(this.pushMethodOptions,e.pushMethod)},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,approveName:null,approveType:null,pushMethod:[],createBy:null,updateBy:null,createTime:null,status:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加审批流定义"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.form.pushMethod=t.form.pushMethod.split(","),t.open=!0,t.title="修改审批流定义"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.pushMethod=e.form.pushMethod.join(","),null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除审批流定义编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有审批流定义数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},8582:function(e,t,a){},8586:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"genInfoForm",attrs:{model:e.info,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"tplCategory"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("生成模板")]),a("el-select",{model:{value:e.info.tplCategory,callback:function(t){e.$set(e.info,"tplCategory",t)},expression:"info.tplCategory"}},[a("el-option",{attrs:{label:"单表（增删改查）",value:"crud"}}),a("el-option",{attrs:{label:"树表（增删改查）",value:"tree"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"packageName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生成包路径 "),a("el-tooltip",{attrs:{content:"生成在哪个java包下，例如 com.zzh.system",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{model:{value:e.info.packageName,callback:function(t){e.$set(e.info,"packageName",t)},expression:"info.packageName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"moduleName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生成模块名 "),a("el-tooltip",{attrs:{content:"可理解为子系统名，例如 system",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{model:{value:e.info.moduleName,callback:function(t){e.$set(e.info,"moduleName",t)},expression:"info.moduleName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"businessName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生成业务名 "),a("el-tooltip",{attrs:{content:"可理解为功能英文名，例如 user",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{model:{value:e.info.businessName,callback:function(t){e.$set(e.info,"businessName",t)},expression:"info.businessName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"functionName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生成功能名 "),a("el-tooltip",{attrs:{content:"用作类描述，例如 用户",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{model:{value:e.info.functionName,callback:function(t){e.$set(e.info,"functionName",t)},expression:"info.functionName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 上级菜单 "),a("el-tooltip",{attrs:{content:"分配到指定菜单下，例如 系统管理",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("treeselect",{attrs:{"append-to-body":!0,options:e.menus,normalizer:e.normalizer,"show-count":!0,placeholder:"请选择系统菜单"},model:{value:e.info.parentMenuId,callback:function(t){e.$set(e.info,"parentMenuId",t)},expression:"info.parentMenuId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"genType"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生成代码方式 "),a("el-tooltip",{attrs:{content:"默认为zip压缩包下载，也可以自定义生成路径",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-radio",{attrs:{label:"0"},model:{value:e.info.genType,callback:function(t){e.$set(e.info,"genType",t)},expression:"info.genType"}},[e._v("zip压缩包")]),a("el-radio",{attrs:{label:"1"},model:{value:e.info.genType,callback:function(t){e.$set(e.info,"genType",t)},expression:"info.genType"}},[e._v("自定义路径")])],1)],1),"1"==e.info.genType?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"genPath"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 自定义路径 "),a("el-tooltip",{attrs:{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{model:{value:e.info.genPath,callback:function(t){e.$set(e.info,"genPath",t)},expression:"info.genPath"}},[a("el-dropdown",{attrs:{slot:"append"},slot:"append"},[a("el-button",{attrs:{type:"primary"}},[e._v(" 最近路径快速选择 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){e.info.genPath="/"}}},[e._v("恢复默认的生成基础路径")])],1)],1)],1)],1)],1):e._e()],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"tree"==e.info.tplCategory,expression:"info.tplCategory == 'tree'"}]},[a("h4",{staticClass:"form-header"},[e._v("其他信息")]),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 树编码字段 "),a("el-tooltip",{attrs:{content:"树显示的编码字段名， 如：dept_id",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.info.treeCode,callback:function(t){e.$set(e.info,"treeCode",t)},expression:"info.treeCode"}},e._l(e.info.columns,(function(e){return a("el-option",{key:e.columnName,attrs:{label:e.columnName+"："+e.columnComment,value:e.columnName}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 树父编码字段 "),a("el-tooltip",{attrs:{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.info.treeParentCode,callback:function(t){e.$set(e.info,"treeParentCode",t)},expression:"info.treeParentCode"}},e._l(e.info.columns,(function(e){return a("el-option",{key:e.columnName,attrs:{label:e.columnName+"："+e.columnComment,value:e.columnName}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 树名称字段 "),a("el-tooltip",{attrs:{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.info.treeName,callback:function(t){e.$set(e.info,"treeName",t)},expression:"info.treeName"}},e._l(e.info.columns,(function(e){return a("el-option",{key:e.columnName,attrs:{label:e.columnName+"："+e.columnComment,value:e.columnName}})})),1)],1)],1)],1)],1)},i=[],o=a("ca17"),r=a.n(o),l=(a("542c"),{name:"BasicInfoForm",components:{Treeselect:r.a},props:{info:{type:Object,default:null},menus:{type:Array,default:[]}},data:function(){return{rules:{tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]}}},created:function(){},methods:{normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.menuId,label:e.menuName,children:e.children}}}}),s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports},"858e":function(e,t,a){"use strict";var n,i,o={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var e=this.$el.firstChild,t=this.$el.lastChild;e.scrollLeft=1e5,e.scrollTop=1e5,t.scrollLeft=1e5,t.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(e){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(e){var t="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",a="position: absolute; left: 0; top: 0;";return e("div",{style:t+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[e("div",{style:t,on:{scroll:this.update}},[e("div",{style:a+"width: 100000px; height: 100000px;"})]),e("div",{style:t,on:{scroll:this.update}},[e("div",{style:a+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var e=function(){this.update(),t()}.bind(this),t=function(){this.$el.detachEvent("onresize",e),this.$off("resizeSensorBeforeDestroy",t)}.bind(this);this.$el.attachEvent("onresize",e),this.$on("resizeSensorBeforeDestroy",t),this.reset()}}},r=o,l=(a("2613"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,null,null),c=s.exports,u=function(e){var t=e.createLoadingTask,a=e.PDFJSWrapper;return{createLoadingTask:t,render:function(e){return e("span",{attrs:{style:"position: relative; display: block"}},[e("canvas",{attrs:{style:"display: inline-block; width: 100%; height: 100%; vertical-align: top"},ref:"canvas"}),e("span",{style:"display: inline-block; width: 100%; height: 100%",class:"annotationLayer",ref:"annotationLayer"}),e(c,{props:{initial:!0},on:{resize:this.resize}})])},props:{src:{type:[String,Object,Uint8Array],default:""},page:{type:Number,default:1},rotate:{type:Number}},watch:{src:function(){this.pdf.loadDocument(this.src)},page:function(){this.pdf.loadPage(this.page,this.rotate)},rotate:function(){this.pdf.renderPage(this.rotate)}},methods:{resize:function(e){if(null!==this.$el.parentNode&&(0!==e.width||0!==e.height)){this.$refs.canvas.style.height=this.$refs.canvas.offsetWidth*(this.$refs.canvas.height/this.$refs.canvas.width)+"px";var t=this.pdf.getResolutionScale();(t<.85||t>1.15)&&this.pdf.renderPage(this.rotate)}},print:function(e,t){this.pdf.printPage(e,t)}},mounted:function(){this.pdf=new a(this.$refs.canvas,this.$refs.annotationLayer,this.$emit.bind(this)),this.$on("loaded",(function(){this.pdf.loadPage(this.page,this.rotate)})),this.$on("page-size",(function(e,t){this.$refs.canvas.style.height=this.$refs.canvas.offsetWidth*(t/e)+"px"})),this.pdf.loadDocument(this.src)},destroyed:function(){this.pdf.destroy()}}};if("server"!==Object({NODE_ENV:"production",VUE_APP_BAG_INTERFACE_PORT:"http://127.0.0.1:8088",VUE_APP_BASE_API:"/prod-api",VUE_APP_BASE_FILE_DOMAIN:"https://vat.zzhcn.net",VUE_APP_BASE_FILE_PORT:"/einvoices",VUE_APP_NEED_PREIX:"/",VUE_APP_SINGLE_URL:"https://idm.liby.com.cn/IAM/oauth/authorize?client_id=APP032&redirect_uri=https://vat.liby.com.cn/IDM",BASE_URL:"/"}).VUE_ENV){var d=a("a068").default,p=a("4383");if("undefined"!==typeof window&&"Worker"in window&&-1===navigator.appVersion.indexOf("MSIE 10")){var h=a("2639");p.GlobalWorkerOptions.workerPort=new h}var m=u(d(p))}else m=u({});var f,b,g=m,v=g,y=(a("0610"),Object(l["a"])(v,f,b,!1,null,null,null));t["a"]=y.exports},"85b0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择业务类型",clearable:"",size:"small"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.leaveList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"type",formatter:e.typeFormat}}),a("el-table-column",{attrs:{label:"标题",align:"center",prop:"title"}}),a("el-table-column",{attrs:{label:"原因",align:"center",prop:"reason"}}),a("el-table-column",{attrs:{label:"创建人",align:"center",prop:"createName"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"state",formatter:e.stateFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.historyFory(t.row)}}},[e._v("审批详情 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open2,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open2=t}}},[a("div",{staticClass:"show_info",on:{click:e.showInfo}},[e._v("查看详情")]),a("div",{staticStyle:{overflow:"auto","max-height":"70vh"}},[e.open2?a("leaveHistoryForm",{attrs:{businessKey:e.businessKey}}):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open2=!e.open2}}},[e._v("关闭")])],1)]),a("new-bill-detail-show-modal",{ref:"showModal"}),a("el-dialog",{staticClass:"tax-approval-dialog",attrs:{title:"税金审核详情",visible:e.taxApproval.open,width:"960px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.taxApproval,"open",t)}}},[a("el-form",{ref:"taxApprovalForm",attrs:{model:e.taxApproval.form,"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"批次号："}},[a("el-input",{attrs:{readonly:""},model:{value:e.taxApproval.form.sjNo,callback:function(t){e.$set(e.taxApproval.form,"sjNo",t)},expression:"taxApproval.form.sjNo"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{readonly:""},model:{value:e.taxApproval.form.note,callback:function(t){e.$set(e.taxApproval.form,"note",t)},expression:"taxApproval.form.note"}})],1)],1),a("el-table",{attrs:{data:e.taxApproval.form.details}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"gsmc",label:"公司名称",align:"center"}}),a("el-table-column",{attrs:{prop:"yysr",label:"营业收入",align:"center"}}),a("el-table-column",{attrs:{prop:"jsyj",label:"增值税计税依据",align:"center"}}),a("el-table-column",{attrs:{prop:"zjs",label:"增值税",align:"center"}}),a("el-table-column",{attrs:{prop:"fjs",label:"附加税",align:"center"}}),a("el-table-column",{attrs:{prop:"qysds",label:"企业所得税",align:"center"}}),a("el-table-column",{attrs:{prop:"yhs",label:"印花税",align:"center"}}),a("el-table-column",{attrs:{prop:"fcs",label:"房产税",align:"center"}}),a("el-table-column",{attrs:{prop:"tdsys",label:"城镇土地使用税",align:"center"}}),a("el-table-column",{attrs:{prop:"ccs",label:"车般税",align:"center"}}),a("el-table-column",{attrs:{prop:"twfhf",label:"堤围防护费",align:"center"}}),a("el-table-column",{attrs:{prop:"ghjf",label:"工会经费",align:"center"}}),a("el-table-column",{attrs:{prop:"qtsf",label:"其他税费",align:"center"}}),a("el-table-column",{attrs:{prop:"grsds",label:"个人所得税",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1),a("div",{staticStyle:{"font-weight":"600","margin-top":"20px","margin-bottom":"20px","font-size":"20px"}},[e._v("附件详情")]),a("el-table",{attrs:{data:e.taxApproval.form.incomeOtherFileList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(a){return e.downloadTaxFile(t.row)}}},[e._v(e._s(t.row.fileName))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1)],1)],1)},i=[],o=a("c7eb"),r=a("1da1"),l=a("5530"),s=(a("ac1f"),a("5319"),a("d81d"),a("9b39")),c=a("a2c5"),u=a("7bd4"),d=a("1f6e"),p=a("ed08"),h={name:"history",components:{leaveHistoryForm:d["default"],NewBillDetailShowModal:u["default"]},data:function(){return{tableHeight:null,businessKey:"",user:{},loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,leaveList:[],title:"",open:!1,open2:!1,typeOptions:[],stateOptions:[],queryParams:{pageNum:1,pageSize:10,type:null,title:null,reason:null,leaveStartTime:null,leaveEndTime:null,instanceId:null,state:null,createBy:null},currApproveRow:{},isJump:!1,taxApproval:{open:!1,form:{},fileList:[]}}},created:function(){var e=this;this.getList(),this.getDicts("approve_process_define").then((function(t){e.typeOptions=t.data})),this.getDicts("approve_flow_state").then((function(t){e.stateOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.isJump&&(this.historyFory(this.isJump),this.isJump=!1),this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()},this.getList()},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0,Object(s["f"])(this.queryParams).then((function(t){e.leaveList=t.rows,e.total=t.total,e.loading=!1}))},typeFormat:function(e,t){return this.selectDictLabel(this.typeOptions,e.type)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},historyFory:function(e){this.currApproveRow=e,this.businessKey=e.id,this.open2=!0,this.title="审批详情"},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有业务发起数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["c"])(Object(l["a"])(Object(l["a"])({},t),{},{operationType:"2",ids:e.ids}))})).then((function(t){e.download(t.msg)}))},showInfo:function(){var e=this,t=this.currApproveRow.type;if("reverseInvoice"==t){var a={id:this.currApproveRow.bizId};this.$refs.showModal.fillBillDialog(a)}else"invoiceTaxesReport"==t?(this.$vLoading.show(),Object(c["a"])(this.currApproveRow.bizId).then((function(t){e.$vLoading.hide(),200==t.code?(e.taxApproval.form=t.object,e.taxApproval.open=!0):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))):(this.isJump=this.currApproveRow,this.open2=!1,this.$router.push({name:"Jtrw",params:{ywzj:this.currApproveRow.bizId}}))},downloadTaxFile:function(e){var t=this;return Object(r["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$vLoading.show(),a.next=3,Object(p["h"])("/einvoices"+e.fileUrl.replace("https://vat.zzhcn.net",""),e.fileUrl.split("/").pop().split(".")[0]+"_",e.fileUrl.split(".").pop());case 3:t.$vLoading.hide();case 4:case"end":return a.stop()}}),a)})))()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id}))}}},m=h,f=(a("91e4"),a("2877")),b=Object(f["a"])(m,n,i,!1,null,"7abf4972",null);t["default"]=b.exports},"87c1":function(e,t,a){"use strict";a("b928")},"87fc":function(e,t,a){"use strict";a("38c2")},"887a":function(e,t,a){},8947:function(e,t,a){"use strict";a("6936")},"8a25":function(e,t,a){"use strict";a("3a95")},"8aa2":function(e,t,a){},"8b29":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return c}));var n=a("b775");function i(e){return Object(n["a"])({url:"/system/notice/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/system/notice/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/system/notice",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/system/notice",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/system/notice/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/system/noticeLog/add",method:"post",data:e})}},"8b93":function(e,t,a){"use strict";a("ae46")},"8c74":function(e,t,a){"use strict";a("f50f")},"8c96":function(e,t,a){"use strict";a("887a")},"8cb8":function(e,t,a){},"8e1e":function(e,t,a){},"8f06":function(e,t,a){},9016:function(module,__webpack_exports__,__webpack_require__){"use strict";var F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b85c"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("13d5"),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("38cf"),core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_15__),_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("c394"),_api_qdoutput_invoice__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("3478"),_api_qdoutput_bill__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("7e6f"),_api_qdoutput_redbill__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("e1c9"),_api_base_getTableColumns__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("c10b"),_components_MyElProgress_progressIndex_vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("7b93"),_components_redInvoiceInfoSelect__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("5570"),_views_output_components_totalRowTable__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("b526"),_components_applyRedInvoiceEditModal__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("0fb5"),_components_applyDetailShowModal__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("c2f6"),_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("ed08"),_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("c38a"),_components_qdbillDetailShowModal__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("1389"),js_cookie__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("a78e"),js_cookie__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_29__);__webpack_exports__["a"]={name:"Qdinvoice",components:{MyElProgress:_components_MyElProgress_progressIndex_vue__WEBPACK_IMPORTED_MODULE_21__["a"],QDRedInvoiceInfoSelect:_components_redInvoiceInfoSelect__WEBPACK_IMPORTED_MODULE_22__["default"],ApplyRedInvoiceEditModal:_components_applyRedInvoiceEditModal__WEBPACK_IMPORTED_MODULE_24__["default"],ApplyDetailShowModal:_components_applyDetailShowModal__WEBPACK_IMPORTED_MODULE_25__["default"],TotalRowTable:_views_output_components_totalRowTable__WEBPACK_IMPORTED_MODULE_23__["default"],QDBillDetailShowModal:_components_qdbillDetailShowModal__WEBPACK_IMPORTED_MODULE_28__["default"]},data:function(){return{module:"invoice",columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:180,columnSort:0},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:150,columnSort:1},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:120,columnSort:2},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:3},{label:"单据类型",prop:"billType",align:"center",show:!0,width:120,columnSort:4},{label:"发票类型",prop:"invType",align:"center",show:!0,width:120,columnSort:5},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:120,columnSort:6},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:7},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:120,columnSort:8},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:120,columnSort:9},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:120,columnSort:10},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:11},{label:"购方纳税人识别号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:12},{label:"购方开户账号",prop:"buyBankAccount ",align:"center",show:!0,width:220,columnSort:13},{label:"购方地址电话",prop:"buyAddrTel ",align:"center",show:!0,width:220,columnSort:14},{label:"购方邮箱",prop:"buyEmail ",align:"center",show:!0,width:220,columnSort:15},{label:"购方手机号码",prop:"buyTelNo ",align:"center",show:!0,width:220,columnSort:16},{label:"备注",prop:"note ",align:"center",show:!0,width:220,columnSort:17},{label:"收款人",prop:"cashier ",align:"center",show:!0,width:120,columnSort:18},{label:"复核人",prop:"checker",align:"center",show:!0,width:120,columnSort:19},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:120,columnSort:20},{label:"源正数发票代码",prop:"sourceinvCode",align:"center",show:!0,width:120,columnSort:21},{label:"源正数发票号码",prop:"sourceinvNo",align:"center",show:!0,width:120,columnSort:22},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:120,columnSort:23},{label:"是否作废",prop:"cancelFlag",align:"center",show:!0,width:120,columnSort:24},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:120,columnSort:25},{label:"是否已打印",prop:"printedFlag",align:"center",show:!0,width:120,columnSort:26},{label:"是否已推送",prop:"pushedFlag",align:"center",show:!0,width:120,columnSort:27},{label:"回写标志",prop:"rewriteFlag",align:"center",show:!0,width:120,columnSort:28},{label:"pdf链接",prop:"pdfUrl",align:"center",show:!0,width:120,columnSort:29},{label:"密码区",prop:"pwdCode",align:"center",show:!0,width:120,columnSort:30},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:120,columnSort:31},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:120,columnSort:32},{label:"签章标志",prop:"signFlag",align:"center",show:!0,width:120,columnSort:33},{label:"记账类型",prop:"vouchType",align:"center",show:!0,width:120,columnSort:34},{label:"已记账标识",prop:"vouchFlag",align:"center",show:!0,width:120,columnSort:35},{label:"记账结果",prop:"vouchResult",align:"center",show:!0,width:120,columnSort:36}],tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,dateRange:[],showSearch:!0,total:0,invoiceList:[],flagRedopen:!1,title:"",open:!1,billSplitTypeOptions:[],invTypeOptions:[],detailFlagOptions:[],cancelApplyStatusOptions:[],redApplyStatusOptions:[],redFlagOptions:[],cancelFlagOptions:[],printedFlagOptions:[],pushedFlagOptions:[],rewriteFlagOptions:[],signFlagOptions:[],headTypeOptions:[],vouchFlagOptions:[],billSourceOptions:[],billTypeOptions:[],queryParams:{billNos:null,lzfgs:null,pageNum:1,pageSize:10,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:null,detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:"0",negNativeNo:null,invStatus:null,taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null,tdyslxdm:"",shopNo:null},form:{},flagRedForm:{},rules:{},redRules:{invCode:[{required:!0,message:"发票代码不能为空",trigger:"blur"}],invNo:[{required:!0,message:"发票号码不能为空",trigger:"blur"}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],negNativeNo:[{required:!0,message:"红字申请单号不能为空",trigger:"blur"}]},taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],invoiceDetailLoading:!1,redOrCancelIdsArr:[],redOrCancelRowsArr:[],redOrCancelIndex:0,showProgress:!1,functionName:"",loadingTime:null,checkboxClick:!1,sortParam:{column:null,columnOrder:null},operationRowArr:[],operationIndex:0,websocket:null,opsLength:0,chechNum:0,printTips:[],printNum:0,isDetail:null,printSettingOpen:!1,printSettingForm:{starttop:null,startleft:null},printSureOpen:!1,printInvType:null,printInvCode:null,printInvNo:null,printSendDataArr:[],wsServe:null,newPrintSureOpen:!1,newPrintInvType:null,newPrintInvCode:null,newPrintInvNo:null,printAfter:[],redInvoiceOpen:!1,redInvoiceList:[],pdfModalUrl:null,pdfDetailOpen:!1,editEmail:{open:!1,form:{id:"",buyEmail:""},rules:{buyEmail:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/,message:"邮箱格式不正确",trigger:["blur","change"]}]}}}},computed:{totalTableData:function(){var e=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);return 0==e.length&&(e=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.invoiceList)),e}},created:function(){var e=this;this.$route.params.redFlag&&(this.queryParams.redFlag=this.$route.params.redFlag);var t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data,e.getList()})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data})),this.getDicts("approve_status").then((function(t){e.cancelApplyStatusOptions=t.data})),this.getDicts("approve_status").then((function(t){e.redApplyStatusOptions=t.data})),this.getDicts("red_flag").then((function(t){e.redFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.cancelFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.printedFlagOptions=t.data})),this.getDicts("invoice_push").then((function(t){e.pushedFlagOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("invoice_sign_status").then((function(t){e.signFlagOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("vouch_flag").then((function(t){e.vouchFlagOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.pageSizes.push(parseFloat(o.dictValue))}}catch(r){i.e(r)}finally{i.f()}})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data}));var a={module:this.module};Promise.all([Object(_api_base_getTableColumns__WEBPACK_IMPORTED_MODULE_20__["b"])(a),Object(_api_base_getTableColumns__WEBPACK_IMPORTED_MODULE_20__["a"])(a)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].width||("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:"invCode"==e.columnsArr[n].prop||"invNo"==e.columnsArr[n].prop?e.columnsArr[n].width=150:e.columnsArr[n].width=120),e.columnsArr[n].columnSort=n}})),this.printSettingForm.startleft=null==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("startleft")||void 0==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("startleft")?"":js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("startleft"),this.printSettingForm.starttop=null==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("starttop")||void 0==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("starttop")?"":js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("starttop")},mounted:function mounted(){var _this2=this;if(this.tableHeight=this.calcTableHeight(),window.onresize=function(){_this2.tableHeight=_this2.calcTableHeight()},window.WebSocket){null!=this.websocket&&(console.log("已开页面的"),this.websocket.close()),this.websocket=new WebSocket("ws://127.0.0.1:50926/SysSvr");var $this=this;this.websocket.onmessage=function(event){console.log(event.data);var eventDate=event.data,eventDateJson=eval("("+eventDate+")"),code=eventDateJson.code,msg=eventDateJson.cmd,data=eventDateJson.data,detailMsg=data.replace("[","").replace("]","");detailMsg=detailMsg.substring(0,detailMsg.lastIndexOf("}")+1);var detailEventDateJson=eval("("+JSON.stringify(detailMsg)+")");if("print"!=msg){if(""==detailEventDateJson)return;detailEventDateJson=JSON.parse(detailEventDateJson);var startleft=detailEventDateJson.startleft,starttop=detailEventDateJson.starttop;void 0!=startleft&&void 0!=starttop&&($this.printSettingForm.startleft=startleft,$this.printSettingForm.starttop=starttop)}var showHtml="";if(console.log(_this2.printTips.length),$this.printNum==$this.printTips.length&&"print"==msg){for(var i=0;i<$this.printTips.length;i++)showHtml+=$this.printTips[i]+"请求打印成功，等待确认!<br/>";_this2.printTips.length=0,_this2.printNum=0,_this2.$message({dangerouslyUseHTMLString:!0,message:showHtml,type:"success"})}},this.websocket.onclose=function(e){console.log("断开连接"+e.data)},this.websocket.onopen=function(e){console.log("建立连接"+e.data)};var wsImpl=window.WebSocket||window.MozWebSocket;this.wsServe=new wsImpl("ws://127.0.0.1:19735/"),this.wsServe.onopen=function(e){console.log("连接成功")},this.wsServe.onmessage=function(e){var t=_this2.printAfter.shift();t.content=JSON.parse(e.data.substring(5)).data,0==_this2.printAfter.length&&(_this2.getList(),_this2.showProgress=!1,clearInterval(_this2.loadingTime)),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["e"])(t).then((function(e){200==e.code?_this2.msgSuccess("[发票代码:"+t.invCode+",发票号码:"+t.invNo+"]打印成功"):_this2.msgError("[发票代码:"+t.invCode+",发票号码:"+t.invNo+"]打印失败："+e.msg)}))},this.wsServe.onclose=function(e){console.log("连接关闭了")}}else this.msgError("浏览器不支持WebSocket")},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()},this.queryParams.cancelFlag=this.$route.params.cancelFlag,this.queryParams.redFlag=this.$route.params.redFlag,(this.$route.params.cancelFlag||this.$route.params.redFlag)&&this.getList()},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.invoiceMainTable.doLayout()}))},getList:function(){var e,t=this;this.loading=!0;var a=Object.assign(Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.queryParams),Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.sortParam));a.invType?a.invTypes=new Array(a.invType):a.invTypes=this.invTypeOptions.reduce((function(e,t){return e.push(t.dictValue),e}),[]),20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["w"])(this.addDateRange(a,this.dateRange)).then((function(e){t.invoiceList=e.rows,t.total=e.total,t.loading=!1}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},cancelApplyStatusFormat:function(e,t){return this.selectDictLabel(this.cancelApplyStatusOptions,e.cancelApplyStatus)},redApplyStatusFormat:function(e,t){return this.selectDictLabel(this.redApplyStatusOptions,e.redApplyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},printedFlagFormat:function(e,t){return this.selectDictLabel(this.printedFlagOptions,e.printedFlag)},pushedFlagFormat:function(e,t){if(null!=e.pushedFlag||""!=e.pushedFlag){if(-1==e.pushedFlag.indexOf("-"))return"0"==e.pushedFlag?"未推送":"4"==e.pushedFlag?"无需推送":"推送成功";for(var a=e.pushedFlag.split(","),n="",i=0;i<a.length;i++)a[i].indexOf("1")>=0?n+="邮箱":a[i].indexOf("2")>=0?n+="卡包":n+="短信",-1==a[i].indexOf("-")?n+="推送成功;":n+="推送失败;";return n}},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},signFlagFormat:function(e,t){return this.selectDictLabel(this.signFlagOptions,e.signFlag)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},vouchFlagFormat:function(e,t){return this.selectDictLabel(this.vouchFlagOptions,e.vouchFlag)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:null,detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:"0",negNativeNo:null,invStatus:"0",taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.queryParams.billNos="",this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},showInvoiceInfo:function(e){var t=this;this.invoiceDetailLoading=!0,this.reset();var a=this.rows;void 0==e.id&&(e=a[0]),this.reset();var n=e.id||this.ids,i=e.invDate,o={id:n,invDate:i};this.$refs.showModal.fillBillDialog(o).then((function(){t.invoiceDetailLoading=!1})).catch((function(){t.invoiceDetailLoading=!1}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["J"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagRedForm:function(){var e=this;this.$refs["flagRedForm"].validate((function(t){t&&(["81","82"].includes(e.flagRedForm.invType)&&(e.flagRedForm.invCode=e.flagRedForm.invNo.substr(0,12),e.flagRedForm.invNo=e.flagRedForm.invNo.substr(12)),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["p"])(e.flagRedForm).then((function(t){"200"==t.code?(e.msgSuccess(t.msg),e.flagRedopen=!1,e.getList()):e.msgError(t.msg)})))}))},flagRedCancel:function(){this.flagRedopen=!1,this.resetRed()},resetRed:function(){this.flagRedForm={},this.resetForm("flagRedForm")},openValid1:function(){var e=this,t=Object(_api_qdoutput_bill__WEBPACK_IMPORTED_MODULE_18__["a"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("全电账号需要刷脸验证，是否跳转到账号管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/qdoutput/account")})).catch((function(){})),new Promise((function(){}))):void 0}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},VATApplicationFormValid:function(e){var t=this;if(["81","81","85","86"].includes(e.invType)){var a={sourceInvCode:e.invCode,sourceInvNo:e.invNo,sourceInvDate:e.invDate};this.invoiceDetailLoading=!0,Object(_api_qdoutput_redbill__WEBPACK_IMPORTED_MODULE_19__["e"])(a).then((function(a){t.invoiceDetailLoading=!1;var n=a.data;if(null!=n)t.$refs.detailShowModal.fillBillDialog(n);else{t.$refs.infoModal.redInfoDialogShow();var i={checkedApply:"0",checkedBuyer:"0",sourceInvCode:e.invCode,sourceInvNo:e.invNo,sourceInvDate:e.invDate,invType:e.invType};t.$refs.infoModal.setRedInfo(i)}}))}else{var n={invCode:e.invCode,invNo:e.invNo,invDate:e.invDate,invCodeNo:e.invCodeNo};this.$refs.detailShowModal.fillBillDialog2(n)}},redInvoiceIng:function(e){var t=this,a={id:e.id,invDate:e.invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["y"])(a).then((function(e){200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg),t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0}))},handleRed:function(e){var t=this,a=e.id||this.ids;this.redOrCancelIdsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=void 0!=e.id?e:this.rows;this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(n),this.$confirm("是否确认对所选发票进行红冲?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.splitValid("1")})).then((function(){return t.checkAmountEnableRed(t.redOrCancelRowsArr[0])})).then((function(){t.VATApplicationFormValid(t.redOrCancelRowsArr[0])})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.message)}))},handlePowerRed:function(e){var t=this,a=e.id||this.ids;this.redOrCancelIdsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=void 0!=e.id?e:this.rows;this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(n),this.$confirm("是否确认对所选发票进行强制红冲?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){new Date(t.rows[0].invDate).getFullYear()<(new Date).getFullYear()||new Date(t.rows[0].invDate).getFullYear()==(new Date).getFullYear()&&(new Date(t.rows[0].invDate).getMonth(),(new Date).getMonth())})).then((function(){return t.checkAmountEnableRed(t.redOrCancelRowsArr[0])})).then((function(){t.VATApplicationFormValid(t.redOrCancelRowsArr[0])})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.message)}))},checkAmountEnableRed:function(e){var t=this,a=e.id,n=e.invDate,i=e.invCode,o=e.invNo,r={id:a,invDate:n,invCode:i,invNo:o};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["c"])(r).then((function(e){if(200!=e.code)return t.msgError(e.msg),new Promise((function(){}))}))},cancelInvoiceList:function(){var e=this;this.redOrCancelIndex++,1!=this.redOrCancelIndex&&this.$refs.myProgress.progressGrow(parseInt(this.redOrCancelIndex/this.redOrCancelIdsArr.length*100)),this.cancelInvoice(this.redOrCancelRowsArr[this.redOrCancelIndex-1]).then((function(t){"200"==t.code?e.msgSuccess("第"+e.redOrCancelIndex+"张单据"+t.msg):e.msgError("第"+e.redOrCancelIndex+"张单据作废失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.redOrCancelIndex/e.redOrCancelIdsArr.length*100)),e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成"),e.getList()):e.cancelInvoiceList()})).catch((function(t){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成")):e.$confirm(t.message+"是否继续作废发票?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成")):e.cancelInvoiceList()})).catch((function(){e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成")}))}))},cancelInvoice:function(e){var t=e.id,a={id:t,beginTime:this.dateRange[0],endTime:this.dateRange[1]};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["b"])(a)},handleCancel:function(e){var t=this;e.id||this.ids;this.redOrCancelIdsArr=[];var a=void 0!=e.id?e:this.rows;this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=[],i=[];this.redOrCancelRowsArr=this.redOrCancelRowsArr.filter((function(e){if("51"==e.invType||"52"==e.invType)n.push(e.billNo);else{if("1"!=e.cancelFlag)return t.redOrCancelIdsArr.push(e.id),!0;i.push(e.billNo)}return!1})),0!=this.redOrCancelRowsArr.length||0==n.length?0!=this.redOrCancelRowsArr.length||0==i.length?(0!=n.length&&this.msgError("发票编号为["+n.join(",")+"]的发票为电子发票，不允许作废，已过滤"),0!=i.length&&this.msgError("发票编号为["+i.join(",")+"]的发票是作废票，不允许再次作废，已过滤"),this.$confirm("是否确认对所选发票进行作废?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){return t.splitValid("2")})).then((function(){t.functionName="作废中:",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.redOrCancelIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.cancelInvoiceList()})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.measure)}))):this.msgError("所选发票全为作废票，作废票不允许再次作废"):this.msgError("所选发票全为电子发票，电子发票不允许作废")},powerCancelInvoiceList:function(){var e=this;this.redOrCancelIndex++,1!=this.redOrCancelIndex&&this.$refs.myProgress.progressGrow(parseInt(this.redOrCancelIndex/this.redOrCancelIdsArr.length*100)),this.powerCancelInvoice(this.redOrCancelRowsArr[this.redOrCancelIndex-1]).then((function(t){"200"==t.code?e.msgSuccess("第"+e.redOrCancelIndex+"张单据"+t.msg):e.msgError("第"+e.redOrCancelIndex+"张单据强制作废失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.redOrCancelIndex/e.redOrCancelIdsArr.length*100)),e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.getList()):e.powerCancelInvoiceList()})).catch((function(t){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("强制作废完成")):e.$confirm(t.message+"是否继续强制作废发票?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("强制作废完成")):e.powerCancelInvoiceList()})).catch((function(){e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("强制作废完成")}))}))},powerCancelInvoice:function(e){var t=e.id,a={id:t,beginTime:this.dateRange[0],endTime:this.dateRange[1]};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["z"])(a)},handlePowerCancel:function(e){var t=this;e.id||this.ids;this.redOrCancelIdsArr=[];var a=void 0!=e.id?e:this.rows;this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=[],i=[];this.redOrCancelRowsArr=this.redOrCancelRowsArr.filter((function(e){if("51"==e.invType||"52"==e.invType)n.push(e.billNo);else{if("1"!=e.cancelFlag)return t.redOrCancelIdsArr.push(e.id),!0;i.push(e.billNo)}return!1})),0!=this.redOrCancelRowsArr.length||0==n.length?0!=this.redOrCancelRowsArr.length||0==i.length?(0!=n.length&&this.msgError("发票编号为["+n.join(",")+"]的发票为电子发票，不允许作废，已过滤"),0!=i.length&&this.msgError("发票编号为["+i.join(",")+"]的发票是作废票，不允许再次作废，已过滤"),this.$confirm("是否确认对所选发票进行强制作废?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){t.functionName="作废中:",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.redOrCancelIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.powerCancelInvoiceList()})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.measure)}))):this.msgError("所选发票全为作废票，作废票不允许再次作废"):this.msgError("所选发票全为电子发票，电子发票不允许作废")},handleRelease:function(e){var t=this;this.operationIndex=0,this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var a=[];this.operationRowArr=this.operationRowArr.filter((function(e){return("0"==e.cancelFlag&&"0"==e.redFlag||"1"==e.redFlag)&&a.push(e.billNo),"1"==e.cancelFlag||"2"==e.redFlag})),0!=this.operationRowArr.length?(a.length>0&&this.msgError("发票编号为["+a.join(",")+"]的发票是正常发票或红冲票，不能执行释放操作，已过滤"),this.showProgress=!0,this.functionName="释放中:",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationRowArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.releaseLogic()):this.msgError("所选发票包含正常发票或红冲票，不能执行释放操作")},releaseLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["F"])(t).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.releaseLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList()}))},flagRed:function(){var e=this,t={ids:this.ids.join(","),beginTime:this.dateRange[0]+" 00:00:00",endTime:this.dateRange[1]+" 23:59:59"};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["d"])(t).then((function(t){if(1==t.data){var a=e.rows,n=a[0];e.flagRedopen=!0,e.$nextTick((function(){e.$refs.flagRedForm.clearValidate()})),e.flagRedForm.id=n.id,e.flagRedForm.invType=n.invType,e.flagRedForm.sourceInvDate=n.invDate,e.flagRedForm.sourceInvCode=n.invCode,e.flagRedForm.sourceInvNo=n.invNo,["81","82"].includes(n.invType)?e.flagRedForm.mergeSourceInvNo=n.invCode+n.invNo:e.flagRedForm.mergeSourceInvNo=n.invNo}else e.msgError("不允许拆分后部分发票红冲")}))},flagCancel:function(){var e=this;this.operationIndex=0,this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var t=[];this.operationRowArr=this.operationRowArr.filter((function(e){return"51"!=e.invType&&"52"!=e.invType||(t.push(e.billNo),!1)})),0!=this.operationRowArr.length?(0!=t.length&&this.msgError("发票编号为["+t.join(",")+"]的发票为电子发票，不允许作废，已过滤"),this.$confirm("您确定要标记作废当前发票吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.splitValid("2")})).then((function(){e.showProgress=!0,e.functionName="作废中:",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.flagCancelLogic()})).then((function(e){}))):this.msgError("所选发票全为电子发票，电子发票不允许作废")},flagCancelLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["o"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号为:"+e.operationRowArr[e.operationIndex-1].billNo+"的发票作废成功"):e.msgError("单据编号为:"+e.operationRowArr[e.operationIndex-1].billNo+"的发票"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.flagCancelLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1)})).catch((function(t){e.operationIndex<e.operationRowArr.length?e.flagCancelLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1)}))},rewrite:function(){var e=this,t=this.rows,a=t[0];a.id,a.invDate;this.$confirm("您确定要回写当前发票吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(e.rows),e.functionName="回写中:",e.showProgress=!0,e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.rewriteLogic()})).catch((function(){}))},rewriteLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["I"])(t).then((function(t){"200"==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据回写失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()})).catch((function(t){e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除已开发票管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["f"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e,t=this,a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.queryParams);a.beginTime=this.dateRange[0],a.endTime=this.dateRange[1],a.idsArr=this.ids,20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(10,"导出中",t),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["m"])(a)})).then((function(e){t.showProgress=!1,clearInterval(t.loadingTime),t.currencyDownload(e,"已开发票.xls",t)})).catch((function(){}))},handleExportDetail:function(){var e,t=this,a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.queryParams);a.beginTime=this.dateRange[0],a.endTime=this.dateRange[1],a.idsArr=this.ids,20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(10,"导出中",t),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["n"])(a)})).then((function(e){t.showProgress=!1,clearInterval(t.loadingTime),t.currencyDownload(e,"已开发票明细.xls",t)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.invoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"invoiceMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.invoiceList,"invoiceMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},submitRedInfoP:function(e){this.$refs.editModal.billDialogShow(e),this.$refs.editModal.invoiceApplicationForm(),this.$refs.editModal.editDialogTitle("1")},updateInvoiceTable:function(){this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},validIsNumber:function(e){e.target.value=Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},printInvoice:function(){var e=this;this.printSendDataArr=[];for(var t=0,a=this.rows.length;t<a;t++)if("51"==this.rows[t].invType||"52"==this.rows[t].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.operationRowArr.sort(this.invNoAsc()),parseInt(this.operationRowArr[this.operationRowArr.length-1].invNo)-parseInt(this.operationRowArr[0].invNo)>this.operationRowArr.length?this.$confirm("所选发票的发票号码不连贯，是否继续打印?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.printNum=e.rows.length,e.isDetail="0",e.printInvoiceLogic()})).catch((function(){})):(this.printNum=this.rows.length,this.isDetail="0",this.printInvoiceLogic())},printInvoiceLogic:function(){console.log("这是一次"),this.operationIndex++,this.operationIndex<=this.operationRowArr.length?(this.printInvType=this.selectDictLabel(this.invTypeOptions,this.operationRowArr[this.operationIndex-1].invType),this.printInvCode=this.operationRowArr[this.operationIndex-1].invCode,this.printInvNo=this.operationRowArr[this.operationIndex-1].invNo,"1"==this.isDetail&&"0"==this.operationRowArr[this.operationIndex-1].detailFlag&&(this.printInvoiceLogic(),this.msgError("单据编号为["+this.operationRowArr[this.operationIndex-1].billNo+"]的发票，无清单标志，不可打印清单")),1==this.operationIndex?this.printSureOpen=!0:(this.printSureOpen=!1,this.printSure())):(this.printSureOpen=!1,this.operationIndex=0,this.operationRowArr=[])},printSure:function(){var e=this;this.printSureOpen=!1;var t={id:this.operationRowArr[this.operationIndex-1].id,bizDate:this.operationRowArr[this.operationIndex-1].bizDate,isDetail:this.isDetail,repeat:"0"};1==this.operationIndex?t.isPre="1":t.isPre="0",Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"发票号码\n【"+this.operationRowArr[this.operationIndex-1].invNo+"】\n正在被打印",this,!1),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["A"])(t).then((function(a){e.showProgress=!1,clearInterval(e.loadingTime),200==a.code?(e.msgSuccess("[发票代码:"+e.operationRowArr[e.operationIndex-1].invCode+",发票号码:"+e.operationRowArr[e.operationIndex-1].invNo+"]"),e.printInvoiceLogic()):1005==a.code?(e.msgError(a.msg),e.$confirm(a.msg+",是否需要重复打印?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(a){t.repeat="1",Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"发票号码\n【"+e.operationRowArr[e.operationIndex-1].invNo+"】\n正在被打印",e,!1),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["A"])(t).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.msgSuccess("[发票代码:"+e.operationRowArr[e.operationIndex-1].invCode+",发票号码:"+e.operationRowArr[e.operationIndex-1].invNo+"]"),e.printInvoiceLogic()):(e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，"+a.msg),e.printSureOpen=!1,e.operationIndex=0,e.operationRowArr=[])}))})).catch((function(){e.printInvoiceLogic()}))):(e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，"+a.msg),e.printSureOpen=!1,e.operationIndex=0,e.operationRowArr=[])})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，请确认"),e.printSureOpen=!1,e.operationIndex=0,e.operationRowArr=[]}))},printSureDialogClose:function(){},printDetail:function(){this.printSendDataArr=[];for(var e=0,t=this.rows.length;e<t;e++)if("51"==this.rows[e].invType||"52"==this.rows[e].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var a=[];this.operationRowArr=this.operationRowArr.filter((function(e){return"0"==e.detailFlag&&a.push(e.billNo),"1"==e.detailFlag})),0!=this.operationRowArr.length?(0!=a.length&&this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤"),this.operationRowArr.sort(this.invNoAsc()),this.printNum=this.operationRowArr.length,this.isDetail="1",this.printInvoiceLogic()):this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤")},invNoAsc:function(){return function(e,t){var a=parseFloat(e["invNo"]),n=parseFloat(t["invNo"]);return console.log(a+"---"+n),a-n}},MBISocketPrint:function(e){if(window.WebSocket)return this.websocket.readyState!=WebSocket.OPEN?(this.msgError("打印服务已存在处理客户端，请关闭相关网页后刷新重试！"),void(this.printTips=[])):void this.websocket.send(e)},splitValid:function(e){var t=this,a={ids:this.ids.join(","),beginTime:this.dateRange[0]+" 00:00:00",endTime:this.dateRange[1]+" 23:59:59"};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["d"])(a).then((function(a){if(1!=a.data)return"1"==e?t.msgError("不允许拆分后部分发票红冲"):"2"==e&&t.msgError("不允许拆分后部分发票作废"),new Promise((function(){}))}))},startleftChange:function(){js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.set("startleft",this.printSettingForm.startleft,{expires:30}),js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.set("starttop",this.printSettingForm.starttop,{expires:30})},newPrintInvoice:function(){var e=this;this.printSendDataArr=[];for(var t=0,a=this.rows.length;t<a;t++)if("51"==this.rows[t].invType||"52"==this.rows[t].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.operationRowArr.sort(this.invNoAsc()),parseInt(this.operationRowArr[this.operationRowArr.length-1].invNo)-parseInt(this.operationRowArr[0].invNo)>this.operationRowArr.length?this.$confirm("所选发票的发票号码不连贯，是否继续打印?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.printNum=e.rows.length,e.isDetail="0",e.newPrintInvoiceLogic()})).catch((function(){})):(this.printNum=this.rows.length,this.isDetail="0",this.newPrintInvoiceLogic())},newPrintInvoiceLogic:function(){this.operationIndex++,this.operationIndex<=this.operationRowArr.length?(this.newPrintInvType=this.selectDictLabel(this.invTypeOptions,this.operationRowArr[this.operationIndex-1].invType),this.newPrintInvCode=this.operationRowArr[this.operationIndex-1].invCode,this.newPrintInvNo=this.operationRowArr[this.operationIndex-1].invNo,"1"==this.isDetail&&"0"==this.operationRowArr[this.operationIndex-1].detailFlag&&(this.newPrintInvoiceLogic(),this.msgError("单据编号为["+this.operationRowArr[this.operationIndex-1].billNo+"]的发票，无清单标志，不可打印清单")),1==this.operationIndex?this.newPrintSureOpen=!0:(this.newPrintSureOpen=!1,this.newPrintSure())):(this.newPrintSureOpen=!1,this.operationIndex=0,this.operationRowArr=[])},newPrintSure:function(){var e=this;this.printSureOpen=!1;var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate,isDetail:this.isDetail};1==this.operationIndex||1!=this.operationIndex&&!this.showProgress?(Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"正在打印发票",this,!1),t.isPre="1"):t.isPre="0",Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["x"])(t).then((function(a){if(200==a.code){var n=a.data;n=JSON.stringify(n),e.wsServe.send(n),t.invNo=e.operationRowArr[e.operationIndex-1].invNo,t.invCode=e.operationRowArr[e.operationIndex-1].invCode,e.printAfter.push(t),e.newPrintInvoiceLogic()}else e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，"+a.msg),e.newPrintSureOpen=!1,e.operationIndex=0,e.operationRowArr=[]})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，请确认"),e.newPrintSureOpen=!1,e.operationIndex=0,e.operationRowArr=[]}))},newPrintDetail:function(){for(var e=0,t=this.rows.length;e<t;e++)if("51"==this.rows[e].invType||"52"==this.rows[e].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var a=[];this.operationRowArr=this.operationRowArr.filter((function(e){return"0"==e.detailFlag&&a.push(e.billNo),"1"==e.detailFlag})),0!=this.operationRowArr.length?(0!=a.length&&this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤"),this.operationRowArr.sort(this.invNoAsc()),this.printNum=this.operationRowArr.length,this.isDetail="1",this.newPrintInvoiceLogic()):this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤")},invoiceRepair:function(){this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.invoiceRepairLogic()},invoiceRepairLogic:function(){var e=this;if(this.operationIndex++,this.operationIndex<=this.operationRowArr.length){var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"发票修复中",this,!1),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["G"])(t).then((function(t){200==t.code?(e.msgSuccess("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】修复成功"),e.invoiceRepairLogic()):(e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】修复失败，"+t.msg),e.invoiceRepairLogic())})).catch((function(){e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】修复失败"),e.invoiceRepairLogic()}))}else this.showProgress=!1,clearInterval(this.loadingTime),this.operationIndex=0,this.operationRowArr=[]},showReded:function(e){var t=this,a={sourceInvCode:e.invCode,sourceInvNo:e.invNo};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["v"])(a).then((function(e){t.redInvoiceList=e.data,t.redInvoiceOpen=!0}))},refreshSignature:function(){var e=this;this.operationIdArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.ids),this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.showProgress=!0,this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.refreshSignatureLogic()},refreshSignatureLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(_api_qdoutput_invoice__WEBPACK_IMPORTED_MODULE_17__["a"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():(e.msgError("第"+e.operationIndex+"张"+t.msg),e.renewOperationParam(),e.getList()))})).catch((function(t){e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():(e.renewOperationParam(),e.getList())}))},downloadInvoice:function(){var e,t=this,a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),n=Object(F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能下载")}}catch(r){n.e(r)}finally{n.f()}var o={ids:this.ids.join(",")};1==a.length?(o.id=a[0].id,o.invDate=a[0].invDate,Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["g"])(o).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))):Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["k"])(this.addDateRange(o,this.dateRange)).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))},emailPush:function(){var e,t=this,a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),n=Object(F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(o){n.e(o)}finally{n.f()}this.operationIdArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.ids),this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.emailPushLogic()},emailPushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["C"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.emailPushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.emailPushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},messagePush:function(){var e,t=this,a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),n=Object(F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(o){n.e(o)}finally{n.f()}this.operationIdArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.ids),this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.messagePushLogic()},cardPush:function(){var e,t=this,a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),n=Object(F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(o){n.e(o)}finally{n.f()}this.operationIdArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.ids),this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.messageCardPushLogic()},messageCardPushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["B"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messageCardPushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},messagePushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["D"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},handleEditEmail:function(){var e=this;this.editEmail.open=!0,this.editEmail.form.id=this.rows[0].id,this.editEmail.form.buyEmail=this.rows[0].buyEmail,this.$nextTick((function(){e.$refs.editEmailForm.clearValidate()}))},submitEditEmail:function(){var e=this;this.$refs.editEmailForm.validate((function(t){if(t){var a=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(e.editEmail.form);a.invDate=e.rows[0].invDate,e.$vLoading.show(),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_16__["J"])(a).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("修改成功"),e.editEmail.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},showPdf:function(e){"1"==e.signFlag?e.pdfUrl?(this.pdfDetailOpen=!0,this.pdfModalUrl=e.pdfUrl):this.msgError("请先给当前发票刷新签章"):this.msgError("当前发票尚未签章")},downloadPdf:function(e){e.chinaTaxFileUrl?window.open(e.chinaTaxFileUrl,"_blank"):this.msgError("请先给当前发票刷新签章")}}}},"911e":function(e,t,a){},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,a,n,i){var o,r,l=8*i-n-1,s=(1<<l)-1,c=s>>1,u=-7,d=a?i-1:0,p=a?-1:1,h=e[t+d];for(d+=p,o=h&(1<<-u)-1,h>>=-u,u+=l;u>0;o=256*o+e[t+d],d+=p,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=256*r+e[t+d],d+=p,u-=8);if(0===o)o=1-c;else{if(o===s)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,n),o-=c}return(h?-1:1)*r*Math.pow(2,o-n)},t.write=function(e,t,a,n,i,o){var r,l,s,c=8*o-i-1,u=(1<<c)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,m=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-r))<1&&(r--,s*=2),t+=r+d>=1?p/s:p*Math.pow(2,1-d),t*s>=2&&(r++,s/=2),r+d>=u?(l=0,r=u):r+d>=1?(l=(t*s-1)*Math.pow(2,i),r+=d):(l=t*Math.pow(2,d-1)*Math.pow(2,i),r=0));i>=8;e[a+h]=255&l,h+=m,l/=256,i-=8);for(r=r<<i|l,c+=i;c>0;e[a+h]=255&r,h+=m,r/=256,c-=8);e[a+h-m]|=128*f}},"91e4":function(e,t,a){"use strict";a("3a78")},9339:function(e,t,a){(function(t){
/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
(function(t,a){e.exports=a()})("undefined"!==typeof self&&self,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=109)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(17),i=a(18),o=a(19),r=a(45),l=a(46),s=a(47),c=a(48),u=a(49),d=a(12),p=a(32),h=a(33),m=a(31),f=a(1),b={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:n.default,Format:i.default,Leaf:o.default,Embed:c.default,Scroll:r.default,Block:s.default,Inline:l.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:m.default}};t.default=b},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var a=this;return t="[Parchment] "+t,a=e.call(this,t)||this,a.message=t,a.name=a.constructor.name,a}return n(t,e),t}(Error);t.ParchmentError=i;var o,r={},l={},s={},c={};function u(e,t){var a=p(e);if(null==a)throw new i("Unable to create "+e+" blot");var n=a,o=e instanceof Node||e["nodeType"]===Node.TEXT_NODE?e:n.create(t);return new n(o,t)}function d(e,a){return void 0===a&&(a=!1),null==e?null:null!=e[t.DATA_KEY]?e[t.DATA_KEY].blot:a?d(e.parentNode,a):null}function p(e,t){var a;if(void 0===t&&(t=o.ANY),"string"===typeof e)a=c[e]||r[e];else if(e instanceof Text||e["nodeType"]===Node.TEXT_NODE)a=c["text"];else if("number"===typeof e)e&o.LEVEL&o.BLOCK?a=c["block"]:e&o.LEVEL&o.INLINE&&(a=c["inline"]);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var i in n)if(a=l[n[i]],a)break;a=a||s[e.tagName]}return null==a?null:t&o.LEVEL&a.scope&&t&o.TYPE&a.scope?a:null}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>1)return e.map((function(e){return h(e)}));var a=e[0];if("string"!==typeof a.blotName&&"string"!==typeof a.attrName)throw new i("Invalid definition");if("abstract"===a.blotName)throw new i("Cannot register abstract class");if(c[a.blotName||a.attrName]=a,"string"===typeof a.keyName)r[a.keyName]=a;else if(null!=a.className&&(l[a.className]=a),null!=a.tagName){Array.isArray(a.tagName)?a.tagName=a.tagName.map((function(e){return e.toUpperCase()})):a.tagName=a.tagName.toUpperCase();var n=Array.isArray(a.tagName)?a.tagName:[a.tagName];n.forEach((function(e){null!=s[e]&&null!=a.className||(s[e]=a)}))}return a}t.DATA_KEY="__blot",function(e){e[e["TYPE"]=3]="TYPE",e[e["LEVEL"]=12]="LEVEL",e[e["ATTRIBUTE"]=13]="ATTRIBUTE",e[e["BLOT"]=14]="BLOT",e[e["INLINE"]=7]="INLINE",e[e["BLOCK"]=11]="BLOCK",e[e["BLOCK_BLOT"]=10]="BLOCK_BLOT",e[e["INLINE_BLOT"]=6]="INLINE_BLOT",e[e["BLOCK_ATTRIBUTE"]=9]="BLOCK_ATTRIBUTE",e[e["INLINE_ATTRIBUTE"]=5]="INLINE_ATTRIBUTE",e[e["ANY"]=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=u,t.find=d,t.query=p,t.register=h},function(e,t,a){var n=a(51),i=a(11),o=a(3),r=a(20),l=String.fromCharCode(0),s=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};s.prototype.insert=function(e,t){var a={};return 0===e.length?this:(a.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(a.attributes=t),this.push(a))},s.prototype["delete"]=function(e){return e<=0?this:this.push({delete:e})},s.prototype.retain=function(e,t){if(e<=0)return this;var a={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(a.attributes=t),this.push(a)},s.prototype.push=function(e){var t=this.ops.length,a=this.ops[t-1];if(e=o(!0,{},e),"object"===typeof a){if("number"===typeof e["delete"]&&"number"===typeof a["delete"])return this.ops[t-1]={delete:a["delete"]+e["delete"]},this;if("number"===typeof a["delete"]&&null!=e.insert&&(t-=1,a=this.ops[t-1],"object"!==typeof a))return this.ops.unshift(e),this;if(i(e.attributes,a.attributes)){if("string"===typeof e.insert&&"string"===typeof a.insert)return this.ops[t-1]={insert:a.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof a.retain)return this.ops[t-1]={retain:a.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},s.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},s.prototype.filter=function(e){return this.ops.filter(e)},s.prototype.forEach=function(e){this.ops.forEach(e)},s.prototype.map=function(e){return this.ops.map(e)},s.prototype.partition=function(e){var t=[],a=[];return this.forEach((function(n){var i=e(n)?t:a;i.push(n)})),[t,a]},s.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},s.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+r.length(t):t.delete?e-t.delete:e}),0)},s.prototype.length=function(){return this.reduce((function(e,t){return e+r.length(t)}),0)},s.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);var a=[],n=r.iterator(this.ops),i=0;while(i<t&&n.hasNext()){var o;i<e?o=n.next(e-i):(o=n.next(t-i),a.push(o)),i+=r.length(o)}return new s(a)},s.prototype.compose=function(e){var t=r.iterator(this.ops),a=r.iterator(e.ops),n=[],o=a.peek();if(null!=o&&"number"===typeof o.retain&&null==o.attributes){var l=o.retain;while("insert"===t.peekType()&&t.peekLength()<=l)l-=t.peekLength(),n.push(t.next());o.retain-l>0&&a.next(o.retain-l)}var c=new s(n);while(t.hasNext()||a.hasNext())if("insert"===a.peekType())c.push(a.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),a.peekLength()),d=t.next(u),p=a.next(u);if("number"===typeof p.retain){var h={};"number"===typeof d.retain?h.retain=u:h.insert=d.insert;var m=r.attributes.compose(d.attributes,p.attributes,"number"===typeof d.retain);if(m&&(h.attributes=m),c.push(h),!a.hasNext()&&i(c.ops[c.ops.length-1],h)){var f=new s(t.rest());return c.concat(f).chop()}}else"number"===typeof p["delete"]&&"number"===typeof d.retain&&c.push(p)}return c.chop()},s.prototype.concat=function(e){var t=new s(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},s.prototype.diff=function(e,t){if(this.ops===e.ops)return new s;var a=[this,e].map((function(t){return t.map((function(a){if(null!=a.insert)return"string"===typeof a.insert?a.insert:l;var n=t===e?"on":"with";throw new Error("diff() called "+n+" non-document")})).join("")})),o=new s,c=n(a[0],a[1],t),u=r.iterator(this.ops),d=r.iterator(e.ops);return c.forEach((function(e){var t=e[1].length;while(t>0){var a=0;switch(e[0]){case n.INSERT:a=Math.min(d.peekLength(),t),o.push(d.next(a));break;case n.DELETE:a=Math.min(t,u.peekLength()),u.next(a),o["delete"](a);break;case n.EQUAL:a=Math.min(u.peekLength(),d.peekLength(),t);var l=u.next(a),s=d.next(a);i(l.insert,s.insert)?o.retain(a,r.attributes.diff(l.attributes,s.attributes)):o.push(s)["delete"](a);break}t-=a}})),o.chop()},s.prototype.eachLine=function(e,t){t=t||"\n";var a=r.iterator(this.ops),n=new s,i=0;while(a.hasNext()){if("insert"!==a.peekType())return;var o=a.peek(),l=r.length(o)-a.peekLength(),c="string"===typeof o.insert?o.insert.indexOf(t,l)-l:-1;if(c<0)n.push(a.next());else if(c>0)n.push(a.next(c));else{if(!1===e(n,a.next(1).attributes||{},i))return;i+=1,n=new s}}n.length()>0&&e(n,{},i)},s.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);var a=r.iterator(this.ops),n=r.iterator(e.ops),i=new s;while(a.hasNext()||n.hasNext())if("insert"!==a.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())i.push(n.next());else{var o=Math.min(a.peekLength(),n.peekLength()),l=a.next(o),c=n.next(o);if(l["delete"])continue;c["delete"]?i.push(c):i.retain(o,r.attributes.transform(l.attributes,c.attributes,t))}else i.retain(r.length(a.next()));return i.chop()},s.prototype.transformPosition=function(e,t){t=!!t;var a=r.iterator(this.ops),n=0;while(a.hasNext()&&n<=e){var i=a.peekLength(),o=a.peekType();a.next(),"delete"!==o?("insert"===o&&(n<e||!t)&&(e+=i),n+=i):e-=Math.min(i,e-n)}return e},e.exports=s},function(e,t){"use strict";var a=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},l=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,i=a.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&a.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(t in e);return"undefined"===typeof t||a.call(e,t)},s=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!a.call(e,t))return;if(o)return o(e,t).value}return e[t]};e.exports=function e(){var t,a,n,i,o,u,d=arguments[0],p=1,h=arguments.length,m=!1;for("boolean"===typeof d&&(m=d,d=arguments[1]||{},p=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});p<h;++p)if(t=arguments[p],null!=t)for(a in t)n=c(d,a),i=c(t,a),d!==i&&(m&&i&&(l(i)||(o=r(i)))?(o?(o=!1,u=n&&r(n)?n:[]):u=n&&l(n)?n:{},s(d,{name:a,newValue:e(m,u,i)})):"undefined"!==typeof i&&s(d,{name:a,newValue:i}));return d}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(3),r=g(o),l=a(2),s=g(l),c=a(0),u=g(c),d=a(16),p=g(d),h=a(6),m=g(h),f=a(7),b=g(f);function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=1,w=function(e){function t(){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),n(t,[{key:"attach",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.default).insert(this.value(),(0,r.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var a=u.default.query(e,u.default.Scope.BLOCK_ATTRIBUTE);null!=a&&this.attributes.attribute(a,t)}},{key:"formatAt",value:function(e,t,a,n){this.format(a,n)}},{key:"insertAt",value:function(e,a,n){if("string"===typeof a&&a.endsWith("\n")){var o=u.default.create(k.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,a.slice(0,-1))}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,a,n)}}]),t}(u.default.Embed);w.scope=u.default.Scope.BLOCK_BLOT;var k=function(e){function t(e){v(this,t);var a=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.cache={},a}return _(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(u.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),T(t))}),new s.default).insert("\n",T(this))),this.cache.delta}},{key:"deleteAt",value:function(e,a){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,a),this.cache={}}},{key:"formatAt",value:function(e,a,n,o){a<=0||(u.default.query(n,u.default.Scope.BLOCK)?e+a===this.length()&&this.format(n,o):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(a,this.length()-e-1),n,o),this.cache={})}},{key:"insertAt",value:function(e,a,n){if(null!=n)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,a,n);if(0!==a.length){var o=a.split("\n"),r=o.shift();r.length>0&&(e<this.length()-1||null==this.children.tail?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var l=this;o.reduce((function(e,t){return l=l.split(e,!0),l.insertAt(0,t),t.length}),e+r.length)}}},{key:"insertBefore",value:function(e,a){var n=this.children.head;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,a),n instanceof p.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+x),this.cache.length}},{key:"moveChildren",value:function(e,a){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,a),this.cache={}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a&&(0===e||e>=this.length()-x)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var o=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,a);return this.cache={},o}}]),t}(u.default.Block);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,r.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:T(e.parent,t))}k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[m.default,u.default.Embed,b.default],t.bubbleFormats=T,t.BlockEmbed=w,t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(50);var r=a(2),l=T(r),s=a(14),c=T(s),u=a(8),d=T(u),p=a(9),h=T(p),m=a(0),f=T(m),b=a(15),g=T(b),v=a(3),y=T(v),_=a(10),x=T(_),w=a(34),k=T(w);function T(e){return e&&e.__esModule?e:{default:e}}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var O=(0,x.default)("quill"),N=function(){function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(S(this,e),this.options=P(t,n),this.container=this.options.container,null==this.container)return O.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=f.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new c.default(this.scroll),this.selection=new g.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,(function(e){e===d.default.events.TEXT_CHANGE&&a.root.classList.toggle("ql-blank",a.editor.isBlank())})),this.emitter.on(d.default.events.SCROLL_UPDATE,(function(e,t){var n=a.selection.lastRange,i=n&&0===n.length?n.index:void 0;C.call(a,(function(){return a.editor.update(null,t,i)}),e)}));var o=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+i+"<p><br></p></div>");this.setContents(o),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),x.default.level(e)}},{key:"find",value:function(e){return e.__quill||f.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&O.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var i=e.attrName||e.blotName;"string"===typeof i?this.register("formats/"+i,e,t):Object.keys(e).forEach((function(n){a.register(n,e[n],t)}))}else null==this.imports[e]||n||O.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?f.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),o(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var a=e;e=document.createElement("div"),e.classList.add(a)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,a){var n=this,o=A(e,t,a),r=i(o,4);return e=r[0],t=r[1],a=r[3],C.call(this,(function(){return n.editor.deleteText(e,t)}),a,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default.sources.API;return C.call(this,(function(){var n=a.getSelection(!0),i=new l.default;if(null==n)return i;if(f.default.query(e,f.default.Scope.BLOCK))i=a.editor.formatLine(n.index,n.length,D({},e,t));else{if(0===n.length)return a.selection.format(e,t),i;i=a.editor.formatText(n.index,n.length,D({},e,t))}return a.setSelection(n,d.default.sources.SILENT),i}),n)}},{key:"formatLine",value:function(e,t,a,n,o){var r=this,l=void 0,s=A(e,t,a,n,o),c=i(s,4);return e=c[0],t=c[1],l=c[2],o=c[3],C.call(this,(function(){return r.editor.formatLine(e,t,l)}),o,e,0)}},{key:"formatText",value:function(e,t,a,n,o){var r=this,l=void 0,s=A(e,t,a,n,o),c=i(s,4);return e=c[0],t=c[1],l=c[2],o=c[3],C.call(this,(function(){return r.editor.formatText(e,t,l)}),o,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=void 0;a="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:a.bottom-n.top,height:a.height,left:a.left-n.left,right:a.right-n.left,top:a.top-n.top,width:a.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,a=A(e,t),n=i(a,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,a=A(e,t),n=i(a,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,a,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return C.call(this,(function(){return i.editor.insertEmbed(t,a,n)}),o,t)}},{key:"insertText",value:function(e,t,a,n,o){var r=this,l=void 0,s=A(e,0,a,n,o),c=i(s,4);return e=c[0],l=c[2],o=c[3],C.call(this,(function(){return r.editor.insertText(e,t,l)}),o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,a){this.clipboard.dangerouslyPasteHTML(e,t,a)}},{key:"removeFormat",value:function(e,t,a){var n=this,o=A(e,t,a),r=i(o,4);return e=r[0],t=r[1],a=r[3],C.call(this,(function(){return n.editor.removeFormat(e,t)}),a,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default.sources.API;return C.call(this,(function(){e=new l.default(e);var a=t.getLength(),n=t.editor.deleteText(0,a),i=t.editor.applyDelta(e),o=i.ops[i.ops.length-1];null!=o&&"string"===typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),i.delete(1));var r=n.compose(i);return r}),a)}},{key:"setSelection",value:function(t,a,n){if(null==t)this.selection.setRange(null,a||e.sources.API);else{var o=A(t,a,n),r=i(o,4);t=r[0],a=r[1],n=r[3],this.selection.setRange(new b.Range(t,a),n),n!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default.sources.API,a=(new l.default).insert(e);return this.setContents(a,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default.sources.API;return C.call(this,(function(){return e=new l.default(e),t.editor.applyDelta(e,a)}),a,!0)}}]),e}();function P(e,t){if(t=(0,y.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t),t.theme&&t.theme!==N.DEFAULTS.theme){if(t.theme=N.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=k.default;var a=(0,y.default)(!0,{},t.theme.DEFAULTS);[a,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var n=Object.keys(a.modules).concat(Object.keys(t.modules)),i=n.reduce((function(e,t){var a=N.import("modules/"+t);return null==a?O.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=a.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,y.default)(!0,{},N.DEFAULTS,{modules:i},a,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,a){return t.modules[a]&&(e[a]=t.modules[a]),e}),{}),t}function C(e,t,a,n){if(this.options.strict&&!this.isEnabled()&&t===d.default.sources.USER)return new l.default;var i=null==a?null:this.getSelection(),o=this.editor.delta,r=e();if(null!=i&&(!0===a&&(a=i.index),null==n?i=F(i,r,t):0!==n&&(i=F(i,a,n,t)),this.setSelection(i,d.default.sources.SILENT)),r.length()>0){var s,c,u=[d.default.events.TEXT_CHANGE,r,o,t];if((s=this.emitter).emit.apply(s,[d.default.events.EDITOR_CHANGE].concat(u)),t!==d.default.sources.SILENT)(c=this.emitter).emit.apply(c,u)}return r}function A(e,t,a,i,o){var r={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(o=i,i=a,a=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(o=i,i=a,a=t,t=0),"object"===("undefined"===typeof a?"undefined":n(a))?(r=a,o=i):"string"===typeof a&&(null!=i?r[a]=i:o=a),o=o||d.default.sources.API,[e,t,r,o]}function F(e,t,a,n){if(null==e)return null;var o=void 0,r=void 0;if(t instanceof l.default){var s=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,n!==d.default.sources.USER)})),c=i(s,2);o=c[0],r=c[1]}else{var u=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&n===d.default.sources.USER?e:a>=0?e+a:Math.max(t,e+a)})),p=i(u,2);o=p[0],r=p[1]}return new b.Range(o,r-o)}N.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},N.events=d.default.events,N.sources=d.default.sources,N.version="1.3.7",N.imports={delta:l.default,parchment:f.default,"core/module":h.default,"core/theme":k.default},t.expandConfig=P,t.overload=A,t.default=N},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(7),r=c(o),l=a(0),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return u(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),n(t,[{key:"formatAt",value:function(e,a,n,o){if(t.compare(this.statics.blotName,n)<0&&s.default.query(n,s.default.Scope.BLOT)){var r=this.isolate(e,a);o&&r.wrap(n,o)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,a,n,o)}},{key:"optimize",value:function(e){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var a=this.parent.isolate(this.offset(),this.length());this.moveChildren(a),a.wrap(this)}}}],[{key:"compare",value:function(e,a){var n=t.order.indexOf(e),i=t.order.indexOf(a);return n>=0||i>=0?n-i:e===a?0:e<a?-1:1}}]),t}(s.default.Inline);h.allowedChildren=[h,s.default.Embed,r.default],h.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(i.default.Text);t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(54),r=c(o),l=a(10),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(0,s.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var a;e.__quill&&e.__quill.emitter&&(a=e.__quill.emitter).handleDOM.apply(a,t)}))}))}));var f=function(e){function t(){u(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",h.error),e}return p(t,e),n(t,[{key:"emit",value:function(){h.log.apply(h,arguments),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach((function(t){var n=t.node,i=t.handler;(e.target===n||n.contains(e.target))&&i.apply(void 0,[e].concat(a))}))}},{key:"listenDOM",value:function(e,t,a){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:a})}}]),t}(r.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},t.default=f},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.quill=t,this.options=a};i.DEFAULTS={},t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],i="warn";function o(e){if(n.indexOf(e)<=n.indexOf(i)){for(var t,a=arguments.length,o=Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];(t=console)[e].apply(t,o)}}function r(e){return n.reduce((function(t,a){return t[a]=o.bind(console,a,e),t}),{})}o.level=r.level=function(e){i=e},t.default=r},function(e,t,a){var n=Array.prototype.slice,i=a(52),o=a(53),r=e.exports=function(e,t,a){return a||(a={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?a.strict?e===t:e==t:c(e,t,a))};function l(e){return null===e||void 0===e}function s(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&("function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0]))}function c(e,t,a){var c,u;if(l(e)||l(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=n.call(e),t=n.call(t),r(e,t,a));if(s(e)){if(!s(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var d=i(e),p=i(t)}catch(h){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),c=d.length-1;c>=0;c--)if(d[c]!=p[c])return!1;for(c=d.length-1;c>=0;c--)if(u=d[c],!r(e[u],t[u],a))return!1;return typeof e===typeof t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),i=function(){function e(e,t,a){void 0===a&&(a={}),this.attrName=e,this.keyName=t;var i=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=a.scope?this.scope=a.scope&n.Scope.LEVEL|i:this.scope=n.Scope.ATTRIBUTE,null!=a.whitelist&&(this.whitelist=a.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){var a=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE));return null!=a&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},r=a(2),l=b(r),s=a(0),c=b(s),u=a(4),d=b(u),p=a(6),h=b(p),m=a(7),f=b(m);function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),t}(h.default);_.blotName="code",_.tagName="CODE";var x=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),i(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,a){return t.insert(a).insert("\n",e.formats())}),new l.default)}},{key:"format",value:function(e,a){if(e!==this.statics.blotName||!a){var i=this.descendant(f.default,this.length()-1),r=n(i,1),l=r[0];null!=l&&l.deleteAt(l.length()-1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,a)}}},{key:"formatAt",value:function(e,a,n,i){if(0!==a&&null!=c.default.query(n,c.default.Scope.BLOCK)&&(n!==this.statics.blotName||i!==this.statics.formats(this.domNode))){var o=this.newlineIndex(e);if(!(o<0||o>=e+a)){var r=this.newlineIndex(e,!0)+1,l=o-r+1,s=this.isolate(r,l),u=s.next;s.format(n,i),u instanceof t&&u.formatAt(0,e-r+a-l,n,i)}}}},{key:"insertAt",value:function(e,t,a){if(null==a){var i=this.descendant(f.default,e),o=n(i,2),r=o[0],l=o[1];r.insertAt(l,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var a=this.domNode.textContent.slice(e).indexOf("\n");return a>-1?e+a:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(c.default.create("text","\n")),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var a=this.next;null!=a&&a.prev===this&&a.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===a.statics.formats(a.domNode)&&(a.optimize(e),a.moveChildren(this),a.remove())}},{key:"replace",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=c.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof c.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var a=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return a.setAttribute("spellcheck",!1),a}},{key:"formats",value:function(){return!0}}]),t}(d.default);x.blotName="code-block",x.tagName="PRE",x.TAB="  ",t.Code=_,t.default=x},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(2),l=S(r),s=a(20),c=S(s),u=a(0),d=S(u),p=a(13),h=S(p),m=a(24),f=S(m),b=a(4),g=S(b),v=a(16),y=S(v),_=a(21),x=S(_),w=a(11),k=S(w),T=a(3),D=S(T);function S(e){return e&&e.__esModule?e:{default:e}}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var P=/^[ -~]*$/,C=function(){function e(t){N(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(e){var t=this,a=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),e=F(e),e.reduce((function(e,r){var l=r.retain||r.delete||r.insert.length||1,s=r.attributes||{};if(null!=r.insert){if("string"===typeof r.insert){var u=r.insert;u.endsWith("\n")&&a&&(a=!1,u=u.slice(0,-1)),e>=o&&!u.endsWith("\n")&&(a=!0),t.scroll.insertAt(e,u);var p=t.scroll.line(e),h=i(p,2),m=h[0],f=h[1],v=(0,D.default)({},(0,b.bubbleFormats)(m));if(m instanceof g.default){var y=m.descendant(d.default.Leaf,f),_=i(y,1),x=_[0];v=(0,D.default)(v,(0,b.bubbleFormats)(x))}s=c.default.attributes.diff(v,s)||{}}else if("object"===n(r.insert)){var w=Object.keys(r.insert)[0];if(null==w)return e;t.scroll.insertAt(e,w,r.insert[w])}o+=l}return Object.keys(s).forEach((function(a){t.scroll.formatAt(e,l,a,s[a])})),e+l}),0),e.reduce((function(e,a){return"number"===typeof a.delete?(t.scroll.deleteAt(e,a.delete),e):e+(a.retain||a.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new l.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach((function(i){if(null==a.scroll.whitelist||a.scroll.whitelist[i]){var o=a.scroll.lines(e,Math.max(t,1)),r=t;o.forEach((function(t){var o=t.length();if(t instanceof h.default){var l=e-t.offset(a.scroll),s=t.newlineIndex(l+r)-l+1;t.formatAt(l,s,i,n[i])}else t.format(i,n[i]);r-=o}))}})),this.scroll.optimize(),this.update((new l.default).retain(e).retain(t,(0,x.default)(n)))}},{key:"formatText",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach((function(i){a.scroll.formatAt(e,t,i,n[i])})),this.update((new l.default).retain(e).retain(t,(0,x.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new l.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=[];0===t?this.scroll.path(e).forEach((function(e){var t=i(e,1),o=t[0];o instanceof g.default?a.push(o):o instanceof d.default.Leaf&&n.push(o)})):(a=this.scroll.lines(e,t),n=this.scroll.descendants(d.default.Leaf,e,t));var o=[a,n].map((function(e){if(0===e.length)return{};var t=(0,b.bubbleFormats)(e.shift());while(Object.keys(t).length>0){var a=e.shift();if(null==a)return t;t=A((0,b.bubbleFormats)(a),t)}return t}));return D.default.apply(D.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"===typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,a){return this.scroll.insertAt(e,t,a),this.update((new l.default).retain(e).insert(O({},t,a)))}},{key:"insertText",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach((function(i){a.scroll.formatAt(e,t.length,i,n[i])})),this.update((new l.default).retain(e).insert(t,(0,x.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===g.default.blotName&&(!(e.children.length>1)&&e.children.head instanceof y.default)}},{key:"removeFormat",value:function(e,t){var a=this.getText(e,t),n=this.scroll.line(e+t),o=i(n,2),r=o[0],s=o[1],c=0,u=new l.default;null!=r&&(c=r instanceof h.default?r.newlineIndex(s)-s+1:r.length()-s,u=r.delta().slice(s,s+c-1).insert("\n"));var d=this.getContents(e,t+c),p=d.diff((new l.default).insert(a).concat(u)),m=(new l.default).retain(e).concat(p);return this.applyDelta(m)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(P)&&d.default.find(t[0].target)){var i=d.default.find(t[0].target),o=(0,b.bubbleFormats)(i),r=i.offset(this.scroll),s=t[0].oldValue.replace(f.default.CONTENTS,""),c=(new l.default).insert(s),u=(new l.default).insert(i.value()),p=(new l.default).retain(r).concat(c.diff(u,a));e=p.reduce((function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)}),new l.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,k.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,a));return e}}]),e}();function A(e,t){return Object.keys(t).reduce((function(a,n){return null==e[n]||(t[n]===e[n]?a[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(a[n]=t[n].concat([e[n]])):a[n]=[t[n],e[n]]),a}),{})}function F(e){return e.reduce((function(e,t){if(1===t.insert){var a=(0,x.default)(t.attributes);return delete a["image"],e.insert({image:t.attributes.image},a)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||(t=(0,x.default)(t),t.attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new l.default)}t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),r=f(o),l=a(21),s=f(l),c=a(11),u=f(c),d=a(8),p=f(d),h=a(10),m=f(h);function f(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=(0,m.default)("quill:selection"),y=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g(this,e),this.index=t,this.length=a},_=function(){function e(t,a){var n=this;g(this,e),this.emitter=a,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.default.create("cursor",this),this.lastRange=this.savedRange=new y(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){n.mouseDown||setTimeout(n.update.bind(n,p.default.sources.USER),1)})),this.emitter.on(p.default.events.EDITOR_CHANGE,(function(e,t){e===p.default.events.TEXT_CHANGE&&t.length()>0&&n.update(p.default.sources.SILENT)})),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,(function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(p.default.events.SCROLL_UPDATE,(function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var a=t.range,i=a.startNode,o=a.startOffset,r=a.endNode,l=a.endOffset;n.setNativeRange(i,o,r,l)}})),this.update(p.default.sources.SILENT)}return i(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(p.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var a=this.getNativeRange();if(null!=a&&a.native.collapsed&&!r.default.query(e,r.default.Scope.BLOCK)){if(a.start.node!==this.cursor.textNode){var n=r.default.find(a.start.node,!1);if(null==n)return;if(n instanceof r.default.Leaf){var i=n.split(a.start.offset);n.parent.insertBefore(this.cursor,i)}else n.insertBefore(this.cursor,a.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.scroll.length();e=Math.min(e,a-1),t=Math.min(e+t,a-1)-e;var i=void 0,o=this.scroll.leaf(e),r=n(o,2),l=r[0],s=r[1];if(null==l)return null;var c=l.position(s,!0),u=n(c,2);i=u[0],s=u[1];var d=document.createRange();if(t>0){d.setStart(i,s);var p=this.scroll.leaf(e+t),h=n(p,2);if(l=h[0],s=h[1],null==l)return null;var m=l.position(s,!0),f=n(m,2);return i=f[0],s=f[1],d.setEnd(i,s),d.getBoundingClientRect()}var b="left",g=void 0;return i instanceof Text?(s<i.data.length?(d.setStart(i,s),d.setEnd(i,s+1)):(d.setStart(i,s-1),d.setEnd(i,s),b="right"),g=d.getBoundingClientRect()):(g=l.domNode.getBoundingClientRect(),s>0&&(b="right")),{bottom:g.top+g.height,height:g.height,left:g[b],right:g[b],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var a=this.normalizeNative(t);return v.info("getNativeRange",a),a}},{key:"getRange",value:function(){var e=this.getNativeRange();if(null==e)return[null,null];var t=this.normalizedToRange(e);return[t,e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,a=[[e.start.node,e.start.offset]];e.native.collapsed||a.push([e.end.node,e.end.offset]);var i=a.map((function(e){var a=n(e,2),i=a[0],o=a[1],l=r.default.find(i,!0),s=l.offset(t.scroll);return 0===o?s:l instanceof r.default.Container?s+l.length():s+l.index(i,o)})),o=Math.min(Math.max.apply(Math,b(i)),this.scroll.length()-1),l=Math.min.apply(Math,[o].concat(b(i)));return new y(l,o-l)}},{key:"normalizeNative",value:function(e){if(!x(this.root,e.startContainer)||!e.collapsed&&!x(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){var t=e.node,a=e.offset;while(!(t instanceof Text)&&t.childNodes.length>0)if(t.childNodes.length>a)t=t.childNodes[a],a=0;else{if(t.childNodes.length!==a)break;t=t.lastChild,a=t instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=a})),t}},{key:"rangeToNative",value:function(e){var t=this,a=e.collapsed?[e.index]:[e.index,e.index+e.length],i=[],o=this.scroll.length();return a.forEach((function(e,a){e=Math.min(o-1,e);var r=void 0,l=t.scroll.leaf(e),s=n(l,2),c=s[0],u=s[1],d=c.position(u,0!==a),p=n(d,2);r=p[0],u=p[1],i.push(r,u)})),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var a=this.getBounds(t.index,t.length);if(null!=a){var i=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,i)),r=n(o,1),l=r[0],s=l;if(t.length>0){var c=this.scroll.line(Math.min(t.index+t.length,i)),u=n(c,1);s=u[0]}if(null!=l&&null!=s){var d=e.getBoundingClientRect();a.top<d.top?e.scrollTop-=d.top-a.top:a.bottom>d.bottom&&(e.scrollTop+=a.bottom-d.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(v.info("setNativeRange",e,t,a,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=a.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var r=(this.getNativeRange()||{}).native;if(null==r||i||e!==r.startContainer||t!==r.startOffset||a!==r.endContainer||n!==r.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==a.tagName&&(n=[].indexOf.call(a.parentNode.childNodes,a),a=a.parentNode);var l=document.createRange();l.setStart(e,t),l.setEnd(a,n),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.default.sources.API;if("string"===typeof t&&(a=t,t=!1),v.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,b(n).concat([t]))}else this.setNativeRange(null);this.update(a)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.default.sources.USER,t=this.lastRange,a=this.getRange(),i=n(a,2),o=i[0],r=i[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,u.default)(t,this.lastRange)){var l;!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var c,d=[p.default.events.SELECTION_CHANGE,(0,s.default)(this.lastRange),(0,s.default)(t),e];if((l=this.emitter).emit.apply(l,[p.default.events.EDITOR_CHANGE].concat(d)),e!==p.default.sources.SILENT)(c=this.emitter).emit.apply(c,d)}}}]),e}();function x(e,t){try{t.parentNode}catch(a){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=y,t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"insertInto",value:function(e,a){0===e.children.length?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,a):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(r.default.Embed);d.blotName="break",d.tagName="BR",t.default=d},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(44),o=a(30),r=a(1),l=function(e){function t(t){var a=e.call(this,t)||this;return a.build(),a}return n(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var a=s(t);e.insertBefore(a,e.children.head||void 0)}catch(n){if(n instanceof r.ParchmentError)return;throw n}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,a){e.deleteAt(t,a)}))},t.prototype.descendant=function(e,a){var n=this.children.find(a),i=n[0],o=n[1];return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,o]:i instanceof t?i.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,a,n){void 0===a&&(a=0),void 0===n&&(n=Number.MAX_VALUE);var i=[],o=n;return this.children.forEachAt(a,n,(function(a,n,r){(null==e.blotName&&e(a)||null!=e.blotName&&a instanceof e)&&i.push(a),a instanceof t&&(i=i.concat(a.descendants(e,n,o))),o-=r})),i},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,a,n){this.children.forEachAt(e,t,(function(e,t,i){e.formatAt(t,i,a,n)}))},t.prototype.insertAt=function(e,t,a){var n=this.children.find(e),i=n[0],o=n[1];if(i)i.insertAt(o,t,a);else{var l=null==a?r.create("text",t):r.create(t,a);this.appendChild(l)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new r.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(a){e.insertBefore(a,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var a=r.create(this.statics.defaultChild);this.appendChild(a),a.optimize(t)}else this.remove()},t.prototype.path=function(e,a){void 0===a&&(a=!1);var n=this.children.find(e,a),i=n[0],o=n[1],r=[[this,e]];return i instanceof t?r.concat(i.path(o,a)):(null!=i&&r.push([i,o]),r)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(a){a instanceof t&&a.moveChildren(this),e.prototype.replace.call(this,a)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var a=this.clone();return this.parent.insertBefore(a,this.next),this.children.forEachAt(e,this.length(),(function(e,n,i){e=e.split(n,t),a.appendChild(e)})),a},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var a=this,n=[],i=[];e.forEach((function(e){e.target===a.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),i.push.apply(i,e.removedNodes))})),i.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=r.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==a.domNode||t.detach())}})),n.filter((function(e){return e.parentNode==a.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=r.find(e.nextSibling));var n=s(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(a),a.insertBefore(n,t||void 0))}))},t}(o.default);function s(e){var t=r.find(e);if(null==t)try{t=r.create(e)}catch(a){t=r.create(r.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(12),o=a(31),r=a(17),l=a(1),s=function(e){function t(t){var a=e.call(this,t)||this;return a.attributes=new o.default(a.domNode),a}return n(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var a=l.query(e);a instanceof i.default?this.attributes.attribute(a,t):t&&(null==a||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,a){var n=e.prototype.replaceWith.call(this,t,a);return this.attributes.copy(n),n},t.prototype.update=function(t,a){var n=this;e.prototype.update.call(this,t,a),t.some((function(e){return e.target===n.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(a,n){var i=e.prototype.wrap.call(this,a,n);return i instanceof t&&i.statics.scope===this.statics.scope&&this.attributes.move(i),i},t}(r.default);t.default=s},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(30),o=a(1),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(a+=1),[this.parent.domNode,a]},t.prototype.value=function(){var e;return e={},e[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.Scope.INLINE_BLOT,t}(i.default);t.default=r},function(e,t,a){var n=a(11),i=a(3),o={attributes:{compose:function(e,t,a){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=i(!0,{},t);for(var o in a||(n=Object.keys(n).reduce((function(e,t){return null!=n[t]&&(e[t]=n[t]),e}),{})),e)void 0!==e[o]&&void 0===t[o]&&(n[o]=e[o]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var a=Object.keys(e).concat(Object.keys(t)).reduce((function(a,i){return n(e[i],t[i])||(a[i]=void 0===t[i]?null:t[i]),a}),{});return Object.keys(a).length>0?a:void 0},transform:function(e,t,a){if("object"!==typeof e)return t;if("object"===typeof t){if(!a)return t;var n=Object.keys(t).reduce((function(a,n){return void 0===e[n]&&(a[n]=t[n]),a}),{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new r(e)},length:function(e){return"number"===typeof e["delete"]?e["delete"]:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function r(e){this.ops=e,this.index=0,this.offset=0}r.prototype.hasNext=function(){return this.peekLength()<1/0},r.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var a=this.offset,n=o.length(t);if(e>=n-a?(e=n-a,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t["delete"])return{delete:e};var i={};return t.attributes&&(i.attributes=t.attributes),"number"===typeof t.retain?i.retain=e:"string"===typeof t.insert?i.insert=t.insert.substr(a,e):i.insert=t.insert,i}return{retain:1/0}},r.prototype.peek=function(){return this.ops[this.index]},r.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},r.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index]["delete"]?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},r.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,a=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[a].concat(n)}return[]},e.exports=o},function(e,a){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var a,n,i;try{a=Map}catch(d){a=function(){}}try{n=Set}catch(d){n=function(){}}try{i=Promise}catch(d){i=function(){}}function o(r,l,s,c,d){"object"===typeof l&&(s=l.depth,c=l.prototype,d=l.includeNonEnumerable,l=l.circular);var p=[],h=[],m="undefined"!=typeof t;function f(r,s){if(null===r)return null;if(0===s)return r;var b,g;if("object"!=typeof r)return r;if(e(r,a))b=new a;else if(e(r,n))b=new n;else if(e(r,i))b=new i((function(e,t){r.then((function(t){e(f(t,s-1))}),(function(e){t(f(e,s-1))}))}));else if(o.__isArray(r))b=[];else if(o.__isRegExp(r))b=new RegExp(r.source,u(r)),r.lastIndex&&(b.lastIndex=r.lastIndex);else if(o.__isDate(r))b=new Date(r.getTime());else{if(m&&t.isBuffer(r))return b=t.allocUnsafe?t.allocUnsafe(r.length):new t(r.length),r.copy(b),b;e(r,Error)?b=Object.create(r):"undefined"==typeof c?(g=Object.getPrototypeOf(r),b=Object.create(g)):(b=Object.create(c),g=c)}if(l){var v=p.indexOf(r);if(-1!=v)return h[v];p.push(r),h.push(b)}for(var y in e(r,a)&&r.forEach((function(e,t){var a=f(t,s-1),n=f(e,s-1);b.set(a,n)})),e(r,n)&&r.forEach((function(e){var t=f(e,s-1);b.add(t)})),r){var _;g&&(_=Object.getOwnPropertyDescriptor(g,y)),_&&null==_.set||(b[y]=f(r[y],s-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(r);for(y=0;y<x.length;y++){var w=x[y],k=Object.getOwnPropertyDescriptor(r,w);(!k||k.enumerable||d)&&(b[w]=f(r[w],s-1),k.enumerable||Object.defineProperty(b,w,{enumerable:!1}))}}if(d){var T=Object.getOwnPropertyNames(r);for(y=0;y<T.length;y++){var D=T[y];k=Object.getOwnPropertyDescriptor(r,D);k&&k.enumerable||(b[D]=f(r[D],s-1),Object.defineProperty(b,D,{enumerable:!1}))}}return b}return"undefined"==typeof l&&(l=!0),"undefined"==typeof s&&(s=1/0),f(r,s)}function r(e){return Object.prototype.toString.call(e)}function l(e){return"object"===typeof e&&"[object Date]"===r(e)}function s(e){return"object"===typeof e&&"[object Array]"===r(e)}function c(e){return"object"===typeof e&&"[object RegExp]"===r(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=r,o.__isDate=l,o.__isArray=s,o.__isRegExp=c,o.__getRegExpFlags=u,o}();"object"===typeof e&&e.exports&&(e.exports=n)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},r=a(0),l=v(r),s=a(8),c=v(s),u=a(4),d=v(u),p=a(16),h=v(p),m=a(13),f=v(m),b=a(25),g=v(b);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e){return e instanceof d.default||e instanceof u.BlockEmbed}var k=function(e){function t(e,a){y(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=a.emitter,Array.isArray(a.whitelist)&&(n.whitelist=a.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),n.domNode.addEventListener("DOMNodeInserted",(function(){})),n.optimize(),n.enable(),n}return x(t,e),i(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,a){var i=this.line(e),r=n(i,2),l=r[0],s=r[1],c=this.line(e+a),d=n(c,1),p=d[0];if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,a),null!=p&&l!==p&&s>0){if(l instanceof u.BlockEmbed||p instanceof u.BlockEmbed)return void this.optimize();if(l instanceof f.default){var m=l.newlineIndex(l.length(),!0);if(m>-1&&(l=l.split(m+1),l===p))return void this.optimize()}else if(p instanceof f.default){var b=p.newlineIndex(0);b>-1&&p.split(b+1)}var g=p.children.head instanceof h.default?null:p.children.head;l.moveChildren(p,g),l.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,a,n,i){(null==this.whitelist||this.whitelist[n])&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,a,n,i),this.optimize())}},{key:"insertAt",value:function(e,a,n){if(null==n||null==this.whitelist||this.whitelist[a]){if(e>=this.length())if(null==n||null==l.default.query(a,l.default.Scope.BLOCK)){var i=l.default.create(this.statics.defaultChild);this.appendChild(i),null==n&&a.endsWith("\n")&&(a=a.slice(0,-1)),i.insertAt(0,a,n)}else{var r=l.default.create(a,n);this.appendChild(r)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,a,n);this.optimize()}}},{key:"insertBefore",value:function(e,a){if(e.statics.scope===l.default.Scope.INLINE_BLOT){var n=l.default.create(this.statics.defaultChild);n.appendChild(e),e=n}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,a)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(w,e)}},{key:"lines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,a=function e(t,a,n){var i=[],o=n;return t.children.forEachAt(a,n,(function(t,a,n){w(t)?i.push(t):t instanceof l.default.Container&&(i=i.concat(e(t,a,o))),o-=n})),i};return a(this,e,t)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,a),e.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,e,a))}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var a=c.default.sources.USER;"string"===typeof e&&(a=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,a,e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,a,e)}}}]),t}(l.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[d.default,u.BlockEmbed,g.default],t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(21),l=T(r),s=a(11),c=T(s),u=a(3),d=T(u),p=a(2),h=T(p),m=a(20),f=T(m),b=a(0),g=T(b),v=a(5),y=T(v),_=a(10),x=T(_),w=a(9),k=T(w);function T(e){return e&&e.__esModule?e:{default:e}}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(0,x.default)("quill:keyboard"),C=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",A=function(e){function t(e,a){S(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.bindings={},Object.keys(n.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist["list"])&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])})),n.addBinding({key:t.keys.ENTER,shiftKey:null},z),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},I),n.addBinding({key:t.keys.DELETE},{collapsed:!0},E)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},I),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},E)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},R),n.addBinding({key:t.keys.DELETE},{collapsed:!1},R),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},I),n.listen(),n}return N(t,e),o(t,null,[{key:"match",value:function(e,t){return t=q(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(a){return!!t[a]!==e[a]&&null!==t[a]}))&&t.key===(e.which||e.keyCode)}}]),o(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=q(e);if(null==n||null==n.key)return P.warn("Attempted to add invalid keyboard binding",n);"function"===typeof t&&(t={handler:t}),"function"===typeof a&&(a={handler:a}),n=(0,d.default)(n,t,a),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(a){if(!a.defaultPrevented){var o=a.which||a.keyCode,r=(e.bindings[o]||[]).filter((function(e){return t.match(a,e)}));if(0!==r.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var s=e.quill.getLine(l.index),u=i(s,2),d=u[0],p=u[1],h=e.quill.getLeaf(l.index),m=i(h,2),f=m[0],b=m[1],v=0===l.length?[f,b]:e.quill.getLeaf(l.index+l.length),y=i(v,2),_=y[0],x=y[1],w=f instanceof g.default.Text?f.value().slice(0,b):"",k=_ instanceof g.default.Text?_.value().slice(x):"",T={collapsed:0===l.length,empty:0===l.length&&d.length()<=1,format:e.quill.getFormat(l),offset:p,prefix:w,suffix:k},D=r.some((function(t){if(null!=t.collapsed&&t.collapsed!==T.collapsed)return!1;if(null!=t.empty&&t.empty!==T.empty)return!1;if(null!=t.offset&&t.offset!==T.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==T.format[e]})))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=T.format[e]:!1===t.format[e]?null==T.format[e]:(0,c.default)(t.format[e],T.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(T.prefix))&&(!(null!=t.suffix&&!t.suffix.test(T.suffix))&&!0!==t.handler.call(e,l,T))}));D&&a.preventDefault()}}}}))}}]),t}(k.default);function F(e,t){var a,n=e===A.keys.LEFT?"prefix":"suffix";return a={key:e,shiftKey:t,altKey:null},D(a,n,/^$/),D(a,"handler",(function(a){var n=a.index;e===A.keys.RIGHT&&(n+=a.length+1);var o=this.quill.getLeaf(n),r=i(o,1),l=r[0];return!(l instanceof g.default.Embed)||(e===A.keys.LEFT?t?this.quill.setSelection(a.index-1,a.length+1,y.default.sources.USER):this.quill.setSelection(a.index-1,y.default.sources.USER):t?this.quill.setSelection(a.index,a.length+1,y.default.sources.USER):this.quill.setSelection(a.index+a.length+1,y.default.sources.USER),!1)})),a}function I(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var a=this.quill.getLine(e.index),n=i(a,1),o=n[0],r={};if(0===t.offset){var l=this.quill.getLine(e.index-1),s=i(l,1),c=s[0];if(null!=c&&c.length()>1){var u=o.formats(),d=this.quill.getFormat(e.index-1,1);r=f.default.attributes.diff(u,d)||{}}}var p=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-p,p,y.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index-p,p,r,y.default.sources.USER),this.quill.focus()}}function E(e,t){var a=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-a)){var n={},o=0,r=this.quill.getLine(e.index),l=i(r,1),s=l[0];if(t.offset>=s.length()-1){var c=this.quill.getLine(e.index+1),u=i(c,1),d=u[0];if(d){var p=s.formats(),h=this.quill.getFormat(e.index,1);n=f.default.attributes.diff(p,h)||{},o=d.length()}}this.quill.deleteText(e.index,a,y.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+o-1,a,n,y.default.sources.USER)}}function R(e){var t=this.quill.getLines(e),a={};if(t.length>1){var n=t[0].formats(),i=t[t.length-1].formats();a=f.default.attributes.diff(i,n)||{}}this.quill.deleteText(e,y.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(e.index,1,a,y.default.sources.USER),this.quill.setSelection(e.index,y.default.sources.SILENT),this.quill.focus()}function z(e,t){var a=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce((function(e,a){return g.default.query(a,g.default.Scope.BLOCK)&&!Array.isArray(t.format[a])&&(e[a]=t.format[a]),e}),{});this.quill.insertText(e.index,"\n",n,y.default.sources.USER),this.quill.setSelection(e.index+1,y.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&a.quill.format(e,t.format[e],y.default.sources.USER))}))}function j(e){return{key:A.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var a=g.default.query("code-block"),n=t.index,o=t.length,r=this.quill.scroll.descendant(a,n),l=i(r,2),s=l[0],c=l[1];if(null!=s){var u=this.quill.getIndex(s),d=s.newlineIndex(c,!0)+1,p=s.newlineIndex(u+c+o),h=s.domNode.textContent.slice(d,p).split("\n");c=0,h.forEach((function(t,i){e?(s.insertAt(d+c,a.TAB),c+=a.TAB.length,0===i?n+=a.TAB.length:o+=a.TAB.length):t.startsWith(a.TAB)&&(s.deleteAt(d+c,a.TAB.length),c-=a.TAB.length,0===i?n-=a.TAB.length:o-=a.TAB.length),c+=t.length+1})),this.quill.update(y.default.sources.USER),this.quill.setSelection(n,o,y.default.sources.SILENT)}}}}function L(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,a){this.quill.format(e,!a.format[e],y.default.sources.USER)}}}function q(e){if("string"===typeof e||"number"===typeof e)return q({key:e});if("object"===("undefined"===typeof e?"undefined":n(e))&&(e=(0,l.default)(e,!1)),"string"===typeof e.key)if(null!=A.keys[e.key.toUpperCase()])e.key=A.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[C]=e.shortKey,delete e.shortKey),e}A.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},A.DEFAULTS={bindings:{bold:L("bold"),italic:L("italic"),underline:L("underline"),indent:{key:A.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",y.default.sources.USER)}},outdent:{key:A.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",y.default.sources.USER)}},"outdent backspace":{key:A.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",y.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,y.default.sources.USER)}},"indent code-block":j(!0),"outdent code-block":j(!1),"remove tab":{key:A.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,y.default.sources.USER)}},tab:{key:A.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new h.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,y.default.sources.SILENT)}},"list empty enter":{key:A.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,y.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,y.default.sources.USER)}},"checklist enter":{key:A.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),a=i(t,2),n=a[0],o=a[1],r=(0,d.default)({},n.formats(),{list:"checked"}),l=(new h.default).retain(e.index).insert("\n",r).retain(n.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,y.default.sources.USER),this.quill.setSelection(e.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:A.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var a=this.quill.getLine(e.index),n=i(a,2),o=n[0],r=n[1],l=(new h.default).retain(e.index).insert("\n",t.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(l,y.default.sources.USER),this.quill.setSelection(e.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var a=t.prefix.length,n=this.quill.getLine(e.index),o=i(n,2),r=o[0],l=o[1];if(l>a)return!0;var s=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(e.index," ",y.default.sources.USER),this.quill.history.cutoff();var c=(new h.default).retain(e.index-l).delete(a+1).retain(r.length()-2-l).retain(1,{list:s});this.quill.updateContents(c,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-a,y.default.sources.SILENT)}},"code exit":{key:A.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),a=i(t,2),n=a[0],o=a[1],r=(new h.default).retain(e.index+n.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(r,y.default.sources.USER)}},"embed left":F(A.keys.LEFT,!1),"embed left shift":F(A.keys.LEFT,!0),"embed right":F(A.keys.RIGHT,!1),"embed right shift":F(A.keys.RIGHT,!0)}},t.default=A,t.SHORTKEY=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),l=u(r),s=a(7),c=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(e,a){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=a,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return h(t,e),o(t,null,[{key:"value",value:function(){}}]),o(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,a){if(0!==this._length)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,a);var n=this,o=0;while(null!=n&&n.statics.scope!==l.default.Scope.BLOCK_BLOT)o+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(o,t.CONTENTS.length,e,a),this._length=0)}},{key:"index",value:function(e,a){return e===this.textNode?0:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,a)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,a=this.selection.getNativeRange(),i=void 0,o=void 0,r=void 0;if(null!=a&&a.start.node===e&&a.end.node===e){var s=[e,a.start.offset,a.end.offset];i=s[0],o=s[1],r=s[2]}while(null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof c.default?(i=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(l.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var d=[o,r].map((function(e){return Math.max(0,Math.min(i.data.length,e-1))})),p=n(d,2);return o=p[0],r=p[1],{startNode:i,startOffset:o,endNode:i,endOffset:r}}}}},{key:"update",value:function(e,t){var a=this;if(e.some((function(e){return"characterData"===e.type&&e.target===a.textNode}))){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(l.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\ufeff",t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),i=l(n),o=a(4),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(i.default.Container);d.allowedChildren=[r.default,o.BlockEmbed,d],t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"value",value:function(e){var a=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return a.startsWith("rgb(")?(a=a.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+a.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):a}}]),t}(r.default.Attributor.Style),p=new r.default.Attributor.Class("color","ql-color",{scope:r.default.Scope.INLINE}),h=new d("color","color",{scope:r.default.Scope.INLINE});t.ColorAttributor=d,t.ColorClass=p,t.ColorStyle=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(6),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"format",value:function(e,a){if(e!==this.statics.blotName||!a)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,a);a=this.constructor.sanitize(a),this.domNode.setAttribute("href",a)}}],[{key:"create",value:function(e){var a=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),a.setAttribute("href",e),a.setAttribute("rel","noopener noreferrer"),a.setAttribute("target","_blank"),a}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return p(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(r.default);function p(e,t){var a=document.createElement("a");a.href=e;var n=a.href.slice(0,a.href.indexOf(":"));return t.indexOf(n)>-1}d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=d,t.sanitize=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(23),r=c(o),l=a(107),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=0;function p(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var h=function(){function e(t){var a=this;u(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){a.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case r.default.keys.ENTER:a.togglePicker();break;case r.default.keys.ESCAPE:a.escape(),e.preventDefault();break;default:}})),this.select.addEventListener("change",this.update.bind(this))}return i(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,a=document.createElement("span");return a.tabIndex="0",a.setAttribute("role","button"),a.classList.add("ql-picker-item"),e.hasAttribute("value")&&a.setAttribute("data-value",e.getAttribute("value")),e.textContent&&a.setAttribute("data-label",e.textContent),a.addEventListener("click",(function(){t.selectItem(a,!0)})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case r.default.keys.ENTER:t.selectItem(a,!0),e.preventDefault();break;case r.default.keys.ESCAPE:t.escape(),e.preventDefault();break;default:}})),a}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=s.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(a){var n=e.buildItem(a);t.appendChild(n),!0===a.selected&&e.selectItem(n)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.container.querySelector(".ql-selected");if(e!==a&&(null!=a&&a.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":n(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var a=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",a)}}]),e}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),i=P(n),o=a(5),r=P(o),l=a(4),s=P(l),c=a(16),u=P(c),d=a(25),p=P(d),h=a(24),m=P(h),f=a(35),b=P(f),g=a(6),v=P(g),y=a(22),_=P(y),x=a(7),w=P(x),k=a(55),T=P(k),D=a(42),S=P(D),O=a(23),N=P(O);function P(e){return e&&e.__esModule?e:{default:e}}r.default.register({"blots/block":s.default,"blots/block/embed":l.BlockEmbed,"blots/break":u.default,"blots/container":p.default,"blots/cursor":m.default,"blots/embed":b.default,"blots/inline":v.default,"blots/scroll":_.default,"blots/text":w.default,"modules/clipboard":T.default,"modules/history":S.default,"modules/keyboard":N.default}),i.default.register(s.default,u.default,m.default,v.default,_.default,w.default),t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),i=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){var a=this.isolate(e,t);a.remove()},e.prototype.formatAt=function(e,t,a,i){var o=this.isolate(e,t);if(null!=n.query(a,n.Scope.BLOT)&&i)o.wrap(a,i);else if(null!=n.query(a,n.Scope.ATTRIBUTE)){var r=n.create(this.statics.scope);o.wrap(r),r.format(a,i)}},e.prototype.insertAt=function(e,t,a){var i=null==a?n.create("text",t):n.create(t,a),o=this.split(e);this.parent.insertBefore(i,o)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var a=null;e.children.insertBefore(this,t),null!=t&&(a=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==a||e.domNode.insertBefore(this.domNode,a),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var a=this.split(e);return a.split(t),a},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var a="string"===typeof e?n.create(e,t):e;return a.replace(this),a},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var a="string"===typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(a,this.next),a.appendChild(this),a},e.blotName="abstract",e}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(12),i=a(32),o=a(33),r=a(1),l=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),a=i.default.keys(this.domNode),l=o.default.keys(this.domNode);t.concat(a).concat(l).forEach((function(t){var a=r.query(t,r.Scope.ATTRIBUTE);a instanceof n.default&&(e.attributes[a.attrName]=a)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(a){var n=t.attributes[a].value(t.domNode);e.format(a,n)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,a){return t[a]=e.attributes[a].value(e.domNode),t}),{})},e}();t.default=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(12);function o(e,t){var a=e.getAttribute("class")||"";return a.split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){var t=o(e,this.keyName);t.forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=o(e,this.keyName)[0]||"",a=t.slice(this.keyName.length+1);return this.canAdd(e,a)?a:""},t}(i.default);t.default=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(12);function o(e){var t=e.split("-"),a=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+a}var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){var t=e.split(":");return t[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[o(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[o(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[o(this.keyName)];return this.canAdd(e,t)?t:""},t}(i.default);t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,a){i(this,e),this.quill=t,this.options=a,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();o.DEFAULTS={modules:{}},o.themes={default:o},t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=c(o),l=a(7),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h="\ufeff",m=function(e){function t(e){u(this,t);var a=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.contentNode=document.createElement("span"),a.contentNode.setAttribute("contenteditable",!1),[].slice.call(a.domNode.childNodes).forEach((function(e){a.contentNode.appendChild(e)})),a.leftGuard=document.createTextNode(h),a.rightGuard=document.createTextNode(h),a.domNode.appendChild(a.leftGuard),a.domNode.appendChild(a.contentNode),a.domNode.appendChild(a.rightGuard),a}return p(t,e),n(t,[{key:"index",value:function(e,a){return e===this.leftGuard?0:e===this.rightGuard?1:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,a)}},{key:"restore",value:function(e){var t=void 0,a=void 0,n=e.data.split(h).join("");if(e===this.leftGuard)if(this.prev instanceof s.default){var i=this.prev.length();this.prev.insertAt(i,n),t={startNode:this.prev.domNode,startOffset:i+n.length}}else a=document.createTextNode(n),this.parent.insertBefore(r.default.create(a),this),t={startNode:a,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(a=document.createTextNode(n),this.parent.insertBefore(r.default.create(a),this.next),t={startNode:a,startOffset:n.length}));return e.data=h,t}},{key:"update",value:function(e,t){var a=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===a.leftGuard||e.target===a.rightGuard)){var n=a.restore(e.target);n&&(t.range=n)}}))}}]),t}(r.default.Embed);t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n=a(0),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var r={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},l=new i.default.Attributor.Attribute("align","align",r),s=new i.default.Attributor.Class("align","ql-align",r),c=new i.default.Attributor.Style("align","text-align",r);t.AlignAttribute=l,t.AlignClass=s,t.AlignStyle=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n=a(0),i=r(n),o=a(26);function r(e){return e&&e.__esModule?e:{default:e}}var l=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),s=new o.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});t.BackgroundClass=l,t.BackgroundStyle=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n=a(0),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var r={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},l=new i.default.Attributor.Attribute("direction","dir",r),s=new i.default.Attributor.Class("direction","ql-direction",r),c=new i.default.Attributor.Style("direction","direction",r);t.DirectionAttribute=l,t.DirectionClass=s,t.DirectionStyle=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d={scope:r.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new r.default.Attributor.Class("font","ql-font",d),h=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"value",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(r.default.Attributor.Style),m=new h("font","font-family",d);t.FontStyle=m,t.FontClass=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n=a(0),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var r=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),l=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=r,t.SizeStyle=l},function(e,t,a){"use strict";e.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),o=u(i),r=a(5),l=u(r),s=a(9),c=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(e,a){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(l.default.events.EDITOR_CHANGE,(function(e,t,a,i){e!==l.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&i!==l.default.sources.USER?n.transform(t):n.record(t,a))})),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return h(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var a=this.stack[e].pop();this.stack[t].push(a),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(a[e],l.default.sources.USER),this.ignoreChange=!1;var n=b(a[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var a=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var i=this.stack.undo.pop();a=a.compose(i.undo),e=i.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(c.default);function f(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=o.default.query(e,o.default.Scope.BLOCK)})))}function b(e){var t=e.reduce((function(e,t){return e+=t.delete||0,e}),0),a=e.length()-t;return f(e)&&(a-=1),a}m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=m,t.getLastChangeIndex=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(3),r=k(o),l=a(2),s=k(l),c=a(8),u=k(c),d=a(23),p=k(d),h=a(34),m=k(h),f=a(59),b=k(f),g=a(60),v=k(g),y=a(28),_=k(y),x=a(61),w=k(x);function k(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=[!1,"center","right","justify"],N=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],P=[!1,"serif","monospace"],C=["1","2","3",!1],A=["small",!1,"large","huge"],F=function(e){function t(e,a){T(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),i=function t(a){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(a.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach((function(e){e.container.contains(a.target)||e.close()}))};return e.emitter.listenDOM("click",document.body,i),n}return S(t,e),n(t,[{key:"addModule",value:function(e){var a=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(a),a}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){var a=e.getAttribute("class")||"";a.split(/\s+/).forEach((function(a){if(a.startsWith("ql-")&&(a=a.slice("ql-".length),null!=t[a]))if("direction"===a)e.innerHTML=t[a][""]+t[a]["rtl"];else if("string"===typeof t[a])e.innerHTML=t[a];else{var n=e.value||"";null!=n&&t[a][n]&&(e.innerHTML=t[a][n])}}))}))}},{key:"buildPickers",value:function(e,t){var a=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&R(e,O),new v.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var a=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&R(e,N,"background"===a?"#ffffff":"#000000"),new b.default(e,t[a])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?R(e,P):e.classList.contains("ql-header")?R(e,C):e.classList.contains("ql-size")&&R(e,A)),new _.default(e)}));var n=function(){a.pickers.forEach((function(e){e.update()}))};this.quill.on(u.default.events.EDITOR_CHANGE,n)}}]),t}(m.default);F.DEFAULTS=(0,r.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var a=new FileReader;a.onload=function(a){var n=e.quill.getSelection(!0);e.quill.updateContents((new s.default).retain(n.index).delete(n.length).insert({image:a.target.result}),u.default.sources.USER),e.quill.setSelection(n.index+1,u.default.sources.SILENT),t.value=""},a.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var I=function(e){function t(e,a){T(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return S(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){p.default.match(t,"enter")?(e.save(),t.preventDefault()):p.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,u.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=E(e);case"formula":if(!e)break;var a=this.quill.getSelection(!0);if(null!=a){var n=a.index+a.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,u.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",u.default.sources.USER),this.quill.setSelection(n+2,u.default.sources.USER)}break;default:}this.textbox.value="",this.hide()}}]),t}(w.default);function E(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}function R(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var n=document.createElement("option");t===a?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)}))}t.BaseTooltip=I,t.default=F},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){var t,a=this.iterator();while(t=a())if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){var t=0,a=this.head;while(null!=a){if(a===e)return t;t+=a.length(),a=a.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);var a,n=this.iterator();while(a=n()){var i=a.length();if(e<i||t&&e===i&&(null==a.next||0!==a.next.length()))return[a,e];e-=i}return[null,0]},e.prototype.forEach=function(e){var t,a=this.iterator();while(t=a())e(t)},e.prototype.forEachAt=function(e,t,a){if(!(t<=0)){var n,i=this.find(e),o=i[0],r=i[1],l=e-r,s=this.iterator(o);while((n=s())&&l<e+t){var c=n.length();e>l?a(n,e-l,Math.min(t,l+c-e)):a(n,0,Math.min(c,e+t-l)),l+=c}}},e.prototype.map=function(e){return this.reduce((function(t,a){return t.push(e(a)),t}),[])},e.prototype.reduce=function(e,t){var a,n=this.iterator();while(a=n())t=e(t,a);return t},e}();t.default=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(17),o=a(1),r={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=100,s=function(e){function t(t){var a=e.call(this,t)||this;return a.scroll=a,a.observer=new MutationObserver((function(e){a.update(e)})),a.observer.observe(a.domNode,r),a.attach(),a}return n(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,a){this.update(),0===t&&a===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,a)},t.prototype.formatAt=function(t,a,n,i){this.update(),e.prototype.formatAt.call(this,t,a,n,i)},t.prototype.insertAt=function(t,a,n){this.update(),e.prototype.insertAt.call(this,t,a,n)},t.prototype.optimize=function(t,a){var n=this;void 0===t&&(t=[]),void 0===a&&(a={}),e.prototype.optimize.call(this,a);var r=[].slice.call(this.observer.takeRecords());while(r.length>0)t.push(r.pop());for(var s=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[o.DATA_KEY].mutations&&(e.domNode[o.DATA_KEY].mutations=[]),t&&s(e.parent))},c=function(e){null!=e.domNode[o.DATA_KEY]&&null!=e.domNode[o.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(c),e.optimize(a))},u=t,d=0;u.length>0;d+=1){if(d>=l)throw new Error("[Parchment] Maximum optimize iterations reached");u.forEach((function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(s(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=o.find(e,!1);s(t,!1),t instanceof i.default&&t.children.forEach((function(e){s(e,!1)}))}))):"attributes"===e.type&&s(t.prev)),s(t))})),this.children.forEach(c),u=[].slice.call(this.observer.takeRecords()),r=u.slice();while(r.length>0)t.push(r.pop())}},t.prototype.update=function(t,a){var n=this;void 0===a&&(a={}),t=t||this.observer.takeRecords(),t.map((function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==n&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],a)})),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,a),this.optimize(t,a)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=s},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(18),o=a(1);function r(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e)if(e[a]!==t[a])return!1;return!0}var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(a){if(a.tagName!==t.tagName)return e.formats.call(this,a)},t.prototype.format=function(a,n){var o=this;a!==this.statics.blotName||n?e.prototype.format.call(this,a,n):(this.children.forEach((function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),o.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,a,n,i){if(null!=this.formats()[n]||o.query(n,o.Scope.ATTRIBUTE)){var r=this.isolate(t,a);r.format(n,i)}else e.prototype.formatAt.call(this,t,a,n,i)},t.prototype.optimize=function(a){e.prototype.optimize.call(this,a);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var i=this.next;i instanceof t&&i.prev===this&&r(n,i.formats())&&(i.moveChildren(this),i.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(18),o=a(1),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(a){var n=o.query(t.blotName).tagName;if(a.tagName!==n)return e.formats.call(this,a)},t.prototype.format=function(a,n){null!=o.query(a,o.Scope.BLOCK)&&(a!==this.statics.blotName||n?e.prototype.format.call(this,a,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,a,n,i){null!=o.query(n,o.Scope.BLOCK)?this.format(n,i):e.prototype.formatAt.call(this,t,a,n,i)},t.prototype.insertAt=function(t,a,n){if(null==n||null!=o.query(a,o.Scope.INLINE))e.prototype.insertAt.call(this,t,a,n);else{var i=this.split(t),r=o.create(a,n);i.parent.insertBefore(r,i)}},t.prototype.update=function(t,a){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,a)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(19),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(e){},t.prototype.format=function(t,a){e.prototype.formatAt.call(this,0,this.length(),t,a)},t.prototype.formatAt=function(t,a,n,i){0===t&&a===this.length()?this.format(n,i):e.prototype.formatAt.call(this,t,a,n,i)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(i.default);t.default=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(19),o=a(1),r=function(e){function t(t){var a=e.call(this,t)||this;return a.text=a.statics.value(a.domNode),a}return n(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t["normalize"]&&(t=t["normalize"]()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,a,n){null==n?(this.text=this.text.slice(0,t)+a+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,a,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(a){e.prototype.optimize.call(this,a),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var a=o.create(this.domNode.splitText(e));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},t.prototype.update=function(e,t){var a=this;e.some((function(e){return"characterData"===e.type&&e.target===a.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(i.default);t.default=r},function(e,t,a){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:i.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var a=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)&&(t=a.length),t-=e.length;var n=a.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,a=Object(this),n=a.length>>>0,i=arguments[1],o=0;o<n;o++)if(t=a[o],e.call(i,t,o,a))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var a=-1,n=1,i=0;function o(e,t,a){if(e==t)return e?[[i,e]]:[];(a<0||e.length<a)&&(a=null);var n=c(e,t),o=e.substring(0,n);e=e.substring(n),t=t.substring(n),n=u(e,t);var l=e.substring(e.length-n);e=e.substring(0,e.length-n),t=t.substring(0,t.length-n);var s=r(e,t);return o&&s.unshift([i,o]),l&&s.push([i,l]),p(s),null!=a&&(s=f(s,a)),s=b(s),s}function r(e,t){var r;if(!e)return[[n,t]];if(!t)return[[a,e]];var s=e.length>t.length?e:t,c=e.length>t.length?t:e,u=s.indexOf(c);if(-1!=u)return r=[[n,s.substring(0,u)],[i,c],[n,s.substring(u+c.length)]],e.length>t.length&&(r[0][0]=r[2][0]=a),r;if(1==c.length)return[[a,e],[n,t]];var p=d(e,t);if(p){var h=p[0],m=p[1],f=p[2],b=p[3],g=p[4],v=o(h,f),y=o(m,b);return v.concat([[i,g]],y)}return l(e,t)}function l(e,t){for(var i=e.length,o=t.length,r=Math.ceil((i+o)/2),l=r,c=2*r,u=new Array(c),d=new Array(c),p=0;p<c;p++)u[p]=-1,d[p]=-1;u[l+1]=0,d[l+1]=0;for(var h=i-o,m=h%2!=0,f=0,b=0,g=0,v=0,y=0;y<r;y++){for(var _=-y+f;_<=y-b;_+=2){var x=l+_;O=_==-y||_!=y&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1;var w=O-_;while(O<i&&w<o&&e.charAt(O)==t.charAt(w))O++,w++;if(u[x]=O,O>i)b+=2;else if(w>o)f+=2;else if(m){var k=l+h-_;if(k>=0&&k<c&&-1!=d[k]){var T=i-d[k];if(O>=T)return s(e,t,O,w)}}}for(var D=-y+g;D<=y-v;D+=2){k=l+D;T=D==-y||D!=y&&d[k-1]<d[k+1]?d[k+1]:d[k-1]+1;var S=T-D;while(T<i&&S<o&&e.charAt(i-T-1)==t.charAt(o-S-1))T++,S++;if(d[k]=T,T>i)v+=2;else if(S>o)g+=2;else if(!m){x=l+h-D;if(x>=0&&x<c&&-1!=u[x]){var O=u[x];w=l+O-x;if(T=i-T,O>=T)return s(e,t,O,w)}}}}return[[a,e],[n,t]]}function s(e,t,a,n){var i=e.substring(0,a),r=t.substring(0,n),l=e.substring(a),s=t.substring(n),c=o(i,r),u=o(l,s);return c.concat(u)}function c(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;var a=0,n=Math.min(e.length,t.length),i=n,o=0;while(a<i)e.substring(o,i)==t.substring(o,i)?(a=i,o=a):n=i,i=Math.floor((n-a)/2+a);return i}function u(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;var a=0,n=Math.min(e.length,t.length),i=n,o=0;while(a<i)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?(a=i,o=a):n=i,i=Math.floor((n-a)/2+a);return i}function d(e,t){var a=e.length>t.length?e:t,n=e.length>t.length?t:e;if(a.length<4||2*n.length<a.length)return null;function i(e,t,a){var n,i,o,r,l=e.substring(a,a+Math.floor(e.length/4)),s=-1,d="";while(-1!=(s=t.indexOf(l,s+1))){var p=c(e.substring(a),t.substring(s)),h=u(e.substring(0,a),t.substring(0,s));d.length<h+p&&(d=t.substring(s-h,s)+t.substring(s,s+p),n=e.substring(0,a-h),i=e.substring(a+p),o=t.substring(0,s-h),r=t.substring(s+p))}return 2*d.length>=e.length?[n,i,o,r,d]:null}var o,r,l,s,d,p=i(a,n,Math.ceil(a.length/4)),h=i(a,n,Math.ceil(a.length/2));if(!p&&!h)return null;o=h?p&&p[4].length>h[4].length?p:h:p,e.length>t.length?(r=o[0],l=o[1],s=o[2],d=o[3]):(s=o[0],d=o[1],r=o[2],l=o[3]);var m=o[4];return[r,l,s,d,m]}function p(e){e.push([i,""]);var t,o=0,r=0,l=0,s="",d="";while(o<e.length)switch(e[o][0]){case n:l++,d+=e[o][1],o++;break;case a:r++,s+=e[o][1],o++;break;case i:r+l>1?(0!==r&&0!==l&&(t=c(d,s),0!==t&&(o-r-l>0&&e[o-r-l-1][0]==i?e[o-r-l-1][1]+=d.substring(0,t):(e.splice(0,0,[i,d.substring(0,t)]),o++),d=d.substring(t),s=s.substring(t)),t=u(d,s),0!==t&&(e[o][1]=d.substring(d.length-t)+e[o][1],d=d.substring(0,d.length-t),s=s.substring(0,s.length-t))),0===r?e.splice(o-l,r+l,[n,d]):0===l?e.splice(o-r,r+l,[a,s]):e.splice(o-r-l,r+l,[a,s],[n,d]),o=o-r-l+(r?1:0)+(l?1:0)+1):0!==o&&e[o-1][0]==i?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,l=0,r=0,s="",d="";break}""===e[e.length-1][1]&&e.pop();var h=!1;o=1;while(o<e.length-1)e[o-1][0]==i&&e[o+1][0]==i&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),h=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),h=!0)),o++;h&&p(e)}var h=o;function m(e,t){if(0===t)return[i,e];for(var n=0,o=0;o<e.length;o++){var r=e[o];if(r[0]===a||r[0]===i){var l=n+r[1].length;if(t===l)return[o+1,e];if(t<l){e=e.slice();var s=t-n,c=[r[0],r[1].slice(0,s)],u=[r[0],r[1].slice(s)];return e.splice(o,1,c,u),[o+1,e]}n=l}}throw new Error("cursor_pos is out of bounds!")}function f(e,t){var a=m(e,t),n=a[1],o=a[0],r=n[o],l=n[o+1];if(null==r)return e;if(r[0]!==i)return e;if(null!=l&&r[1]+l[1]===l[1]+r[1])return n.splice(o,2,l,r),g(n,o,2);if(null!=l&&0===l[1].indexOf(r[1])){n.splice(o,2,[l[0],r[1]],[0,r[1]]);var s=l[1].slice(r[1].length);return s.length>0&&n.splice(o+2,0,[l[0],s]),g(n,o,3)}return e}function b(e){for(var t=!1,o=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},r=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},l=2;l<e.length;l+=1)e[l-2][0]===i&&r(e[l-2][1])&&e[l-1][0]===a&&o(e[l-1][1])&&e[l][0]===n&&o(e[l][1])&&(t=!0,e[l-1][1]=e[l-2][1].slice(-1)+e[l-1][1],e[l][1]=e[l-2][1].slice(-1)+e[l][1],e[l-2][1]=e[l-2][1].slice(0,-1));if(!t)return e;var s=[];for(l=0;l<e.length;l+=1)e[l][1].length>0&&s.push(e[l]);return s}function g(e,t,a){for(var n=t+a-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var i=e[n],o=e[n+1];i[0]===o[1]&&e.splice(n,2,[i[0],i[1]+o[1]])}return e}h.INSERT=n,h.DELETE=a,h.EQUAL=i,e.exports=h},function(e,t){function a(e){var t=[];for(var a in e)t.push(a);return t}t=e.exports="function"===typeof Object.keys?Object.keys:a,t.shim=a},function(e,t){var a="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}t=e.exports=a?n:i,t.supported=n,t.unsupported=i},function(e,t){"use strict";var a=Object.prototype.hasOwnProperty,n="~";function i(){}function o(e,t,a){this.fn=e,this.context=t,this.once=a||!1}function r(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),r.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)a.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},r.prototype.listeners=function(e,t){var a=n?n+e:e,i=this._events[a];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,l=new Array(r);o<r;o++)l[o]=i[o].fn;return l},r.prototype.emit=function(e,t,a,i,o,r){var l=n?n+e:e;if(!this._events[l])return!1;var s,c,u=this._events[l],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,a),!0;case 4:return u.fn.call(u.context,t,a,i),!0;case 5:return u.fn.call(u.context,t,a,i,o),!0;case 6:return u.fn.call(u.context,t,a,i,o,r),!0}for(c=1,s=new Array(d-1);c<d;c++)s[c-1]=arguments[c];u.fn.apply(u.context,s)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,a);break;case 4:u[c].fn.call(u[c].context,t,a,i);break;default:if(!s)for(p=1,s=new Array(d-1);p<d;p++)s[p-1]=arguments[p];u[c].fn.apply(u[c].context,s)}}return!0},r.prototype.on=function(e,t,a){var i=new o(t,a||this),r=n?n+e:e;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):(this._events[r]=i,this._eventsCount++),this},r.prototype.once=function(e,t,a){var i=new o(t,a||this,!0),r=n?n+e:e;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):(this._events[r]=i,this._eventsCount++),this},r.prototype.removeListener=function(e,t,a,o){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return 0===--this._eventsCount?this._events=new i:delete this._events[r],this;var l=this._events[r];if(l.fn)l.fn!==t||o&&!l.once||a&&l.context!==a||(0===--this._eventsCount?this._events=new i:delete this._events[r]);else{for(var s=0,c=[],u=l.length;s<u;s++)(l[s].fn!==t||o&&!l[s].once||a&&l[s].context!==a)&&c.push(l[s]);c.length?this._events[r]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new i:delete this._events[r]}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=n,r.EventEmitter=r,"undefined"!==typeof e&&(e.exports=r)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(3),l=S(r),s=a(2),c=S(s),u=a(0),d=S(u),p=a(5),h=S(p),m=a(10),f=S(m),b=a(9),g=S(b),v=a(36),y=a(37),_=a(13),x=S(_),w=a(26),k=a(38),T=a(39),D=a(40);function S(e){return e&&e.__esModule?e:{default:e}}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=(0,f.default)("quill:clipboard"),F="__ql-matcher",I=[[Node.TEXT_NODE,X],[Node.TEXT_NODE,G],["br",V],[Node.ELEMENT_NODE,G],[Node.ELEMENT_NODE,U],[Node.ELEMENT_NODE,K],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,Y],["li",Q],["b",B.bind(B,"bold")],["i",B.bind(B,"italic")],["style",H]],E=[v.AlignAttribute,k.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),R=[v.AlignStyle,y.BackgroundStyle,w.ColorStyle,k.DirectionStyle,T.FontStyle,D.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),z=function(e){function t(e,a){N(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],I.concat(n.options.matchers).forEach((function(e){var t=i(e,2),o=t[0],r=t[1];(a.matchVisual||r!==K)&&n.addMatcher(o,r)})),n}return C(t,e),o(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[x.default.blotName]){var a=this.container.innerText;return this.container.innerHTML="",(new c.default).insert(a,O({},x.default.blotName,t[x.default.blotName]))}var n=this.prepareMatching(),o=i(n,2),r=o[0],l=o[1],s=M(this.container,r,l);return q(s,"\n")&&null==s.ops[s.ops.length-1].attributes&&(s=s.compose((new c.default).retain(s.length()-1).delete(1))),A.log("convert",this.container.innerHTML,s),this.container.innerHTML="",s}},{key:"dangerouslyPasteHTML",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,h.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new c.default).retain(e).concat(n),a),this.quill.setSelection(e+n.length(),h.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var a=this.quill.getSelection(),n=(new c.default).retain(a.index),i=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(h.default.sources.SILENT),setTimeout((function(){n=n.concat(t.convert()).delete(a.length),t.quill.updateContents(n,h.default.sources.USER),t.quill.setSelection(n.length()-a.length,h.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=i,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],a=[];return this.matchers.forEach((function(n){var o=i(n,2),r=o[0],l=o[1];switch(r){case Node.TEXT_NODE:a.push(l);break;case Node.ELEMENT_NODE:t.push(l);break;default:[].forEach.call(e.container.querySelectorAll(r),(function(e){e[F]=e[F]||[],e[F].push(l)}));break}})),[t,a]}}]),t}(g.default);function j(e,t,a){return"object"===("undefined"===typeof t?"undefined":n(t))?Object.keys(t).reduce((function(e,a){return j(e,a,t[a])}),e):e.reduce((function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,l.default)({},O({},t,a),n.attributes))}),new c.default)}function L(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function q(e,t){for(var a="",n=e.ops.length-1;n>=0&&a.length<t.length;--n){var i=e.ops[n];if("string"!==typeof i.insert)break;a=i.insert+a}return a.slice(-1*t.length)===t}function $(e){if(0===e.childNodes.length)return!1;var t=L(e);return["block","list-item"].indexOf(t.display)>-1}function M(e,t,a){return e.nodeType===e.TEXT_NODE?a.reduce((function(t,a){return a(e,t)}),new c.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(n,i){var o=M(i,t,a);return i.nodeType===e.ELEMENT_NODE&&(o=t.reduce((function(e,t){return t(i,e)}),o),o=(i[F]||[]).reduce((function(e,t){return t(i,e)}),o)),n.concat(o)}),new c.default):new c.default}function B(e,t,a){return j(a,e,!0)}function W(e,t){var a=d.default.Attributor.Attribute.keys(e),n=d.default.Attributor.Class.keys(e),i=d.default.Attributor.Style.keys(e),o={};return a.concat(n).concat(i).forEach((function(t){var a=d.default.query(t,d.default.Scope.ATTRIBUTE);null!=a&&(o[a.attrName]=a.value(e),o[a.attrName])||(a=E[t],null==a||a.attrName!==t&&a.keyName!==t||(o[a.attrName]=a.value(e)||void 0),a=R[t],null==a||a.attrName!==t&&a.keyName!==t||(a=R[t],o[a.attrName]=a.value(e)||void 0))})),Object.keys(o).length>0&&(t=j(t,o)),t}function U(e,t){var a=d.default.query(e);if(null==a)return t;if(a.prototype instanceof d.default.Embed){var n={},i=a.value(e);null!=i&&(n[a.blotName]=i,t=(new c.default).insert(n,a.formats(e)))}else"function"===typeof a.formats&&(t=j(t,a.blotName,a.formats(e)));return t}function V(e,t){return q(t,"\n")||t.insert("\n"),t}function H(){return new c.default}function Q(e,t){var a=d.default.query(e);if(null==a||"list-item"!==a.blotName||!q(t,"\n"))return t;var n=-1,i=e.parentNode;while(!i.classList.contains("ql-clipboard"))"list"===(d.default.query(i)||{}).blotName&&(n+=1),i=i.parentNode;return n<=0?t:t.compose((new c.default).retain(t.length()-1).retain(1,{indent:n}))}function G(e,t){return q(t,"\n")||($(e)||t.length()>0&&e.nextSibling&&$(e.nextSibling))&&t.insert("\n"),t}function K(e,t){if($(e)&&null!=e.nextElementSibling&&!q(t,"\n\n")){var a=e.offsetHeight+parseFloat(L(e).marginTop)+parseFloat(L(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*a&&t.insert("\n")}return t}function Y(e,t){var a={},n=e.style||{};return n.fontStyle&&"italic"===L(e).fontStyle&&(a.italic=!0),n.fontWeight&&(L(e).fontWeight.startsWith("bold")||parseInt(L(e).fontWeight)>=700)&&(a.bold=!0),Object.keys(a).length>0&&(t=j(t,a)),parseFloat(n.textIndent||0)>0&&(t=(new c.default).insert("\t").concat(t)),t}function X(e,t){var a=e.data;if("O:P"===e.parentNode.tagName)return t.insert(a.trim());if(0===a.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!L(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return t=t.replace(/[^\u00a0]/g,""),t.length<1&&e?" ":t};a=a.replace(/\r\n/g," ").replace(/\n/g," "),a=a.replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&$(e.parentNode)||null!=e.previousSibling&&$(e.previousSibling))&&(a=a.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&$(e.parentNode)||null!=e.nextSibling&&$(e.nextSibling))&&(a=a.replace(/\s+$/,n.bind(n,!1)))}return t.insert(a)}z.DEFAULTS={matchers:[],matchVisual:!0},t.default=z,t.matchAttributor=W,t.matchBlot=U,t.matchNewline=G,t.matchSpacing=K,t.matchText=X},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(6),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(r.default);d.blotName="bold",d.tagName=["STRONG","B"],t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(2),r=f(o),l=a(0),s=f(l),c=a(5),u=f(c),d=a(10),p=f(d),h=a(9),m=f(h);function f(e){return e&&e.__esModule?e:{default:e}}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(0,p.default)("quill:toolbar"),x=function(e){function t(e,a){g(this,t);var i,o=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));if(Array.isArray(o.options.container)){var r=document.createElement("div");k(r,o.options.container),e.container.parentNode.insertBefore(r,e.container),o.container=r}else"string"===typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach((function(e){o.addHandler(e,o.options.handlers[e])})),[].forEach.call(o.container.querySelectorAll("button, select"),(function(e){o.attach(e)})),o.quill.on(u.default.events.EDITOR_CHANGE,(function(e,t){e===u.default.events.SELECTION_CHANGE&&o.update(t)})),o.quill.on(u.default.events.SCROLL_OPTIMIZE,(function(){var e=o.quill.selection.getRange(),t=n(e,1),a=t[0];o.update(a)})),o):(i=_.error("Container required for toolbar",o.options),v(o,i))}return y(t,e),i(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,a=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(a){if(a=a.slice("ql-".length),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[a]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[a])return void _.warn("ignoring attaching to disabled format",a,e);if(null==s.default.query(a))return void _.warn("ignoring attaching to nonexistent format",a,e)}var i="SELECT"===e.tagName?"change":"click";e.addEventListener(i,(function(i){var o=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var l=e.options[e.selectedIndex];o=!l.hasAttribute("selected")&&(l.value||!1)}else o=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),i.preventDefault();t.quill.focus();var c=t.quill.selection.getRange(),d=n(c,1),p=d[0];if(null!=t.handlers[a])t.handlers[a].call(t,o);else if(s.default.query(a).prototype instanceof s.default.Embed){if(o=prompt("Enter "+a),!o)return;t.quill.updateContents((new r.default).retain(p.index).delete(p.length).insert(b({},a,o)),u.default.sources.USER)}else t.quill.format(a,o,u.default.sources.USER);t.update(p)})),this.controls.push([a,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(a){var i=n(a,2),o=i[0],r=i[1];if("SELECT"===r.tagName){var l=void 0;if(null==e)l=null;else if(null==t[o])l=r.querySelector("option[selected]");else if(!Array.isArray(t[o])){var s=t[o];"string"===typeof s&&(s=s.replace(/\"/g,'\\"')),l=r.querySelector('option[value="'+s+'"]')}null==l?(r.value="",r.selectedIndex=-1):l.selected=!0}else if(null==e)r.classList.remove("ql-active");else if(r.hasAttribute("value")){var c=t[o]===r.getAttribute("value")||null!=t[o]&&t[o].toString()===r.getAttribute("value")||null==t[o]&&!r.getAttribute("value");r.classList.toggle("ql-active",c)}else r.classList.toggle("ql-active",null!=t[o])}))}}]),t}(m.default);function w(e,t,a){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=a&&(n.value=a),e.appendChild(n)}function k(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var a=document.createElement("span");a.classList.add("ql-formats"),t.forEach((function(e){if("string"===typeof e)w(a,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?T(a,t,n):w(a,t,n)}})),e.appendChild(a)}))}function T(e,t,a){var n=document.createElement("select");n.classList.add("ql-"+t),a.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)})),e.appendChild(n)}x.DEFAULTS={},x.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var a=this.quill.getFormat();Object.keys(a).forEach((function(t){null!=s.default.query(t,s.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,u.default.sources.USER)},direction:function(e){var t=this.quill.getFormat()["align"];"rtl"===e&&null==t?this.quill.format("align","right",u.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",e,u.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),a=this.quill.getFormat(t),n=parseInt(a.indent||0);if("+1"===e||"-1"===e){var i="+1"===e?1:-1;"rtl"===a.direction&&(i*=-1),this.quill.format("indent",n+i,u.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,u.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),a=this.quill.getFormat(t);"check"===e?"checked"===a["list"]||"unchecked"===a["list"]?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",e,u.default.sources.USER)}}},t.default=x,t.addControls=k},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(28),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(e,a){s(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=a,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),n}return u(t,e),n(t,[{key:"buildItem",value:function(e){var a=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return a.style.backgroundColor=e.getAttribute("value")||"",a}},{key:"selectItem",value:function(e,a){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,a);var n=this.label.querySelector(".ql-color-label"),o=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=o:n.style.fill=o)}}]),t}(r.default);t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(28),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(e,a){s(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=a[e.getAttribute("data-value")||""]})),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return u(t,e),n(t,[{key:"selectItem",value:function(e,a){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,a),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(r.default);t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,a){var n=this;i(this,e),this.quill=t,this.boundsContainer=a||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"})),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,a=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=a+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),o=0;if(i.right>n.right&&(o=n.right-i.right,this.root.style.left=t+o+"px"),i.left<n.left&&(o=n.left-i.left,this.root.style.left=t+o+"px"),i.bottom>n.bottom){var r=i.bottom-i.top,l=e.bottom-e.top+r;this.root.style.top=a-l+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{!n&&l["return"]&&l["return"]()}finally{if(i)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(3),l=g(r),s=a(8),c=g(s),u=a(43),d=g(u),p=a(27),h=g(p),m=a(15),f=a(41),b=g(f);function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],w=function(e){function t(e,a){v(this,t),null!=a.modules.toolbar&&null==a.modules.toolbar.container&&(a.modules.toolbar.container=x);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.quill.container.classList.add("ql-snow"),n}return _(t,e),o(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),b.default),this.tooltip=new k(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,a){e.handlers["link"].call(e,!a.format.link)}))}}]),t}(d.default);w.DEFAULTS=(0,l.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var a=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(a)&&0!==a.indexOf("mailto:")&&(a="mailto:"+a);var n=this.quill.theme.tooltip;n.edit("link",a)}else this.quill.format("link",!1)}}}}});var k=function(e){function t(e,a){v(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.preview=n.root.querySelector("a.ql-preview"),n}return _(t,e),o(t,[{key:"listen",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var a=e.linkRange;e.restoreFocus(),e.quill.formatText(a,"link",!1,c.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(c.default.events.SELECTION_CHANGE,(function(t,a,i){if(null!=t){if(0===t.length&&i===c.default.sources.USER){var o=e.quill.scroll.descendant(h.default,t.index),r=n(o,2),l=r[0],s=r[1];if(null!=l){e.linkRange=new m.Range(t.index-s,l.length());var u=h.default.formats(l.domNode);return e.preview.textContent=u,e.preview.setAttribute("href",u),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(u.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(29),i=ae(n),o=a(36),r=a(38),l=a(64),s=a(65),c=ae(s),u=a(66),d=ae(u),p=a(67),h=ae(p),m=a(37),f=a(26),b=a(39),g=a(40),v=a(56),y=ae(v),_=a(68),x=ae(_),w=a(27),k=ae(w),T=a(69),D=ae(T),S=a(70),O=ae(S),N=a(71),P=ae(N),C=a(72),A=ae(C),F=a(73),I=ae(F),E=a(13),R=ae(E),z=a(74),j=ae(z),L=a(75),q=ae(L),$=a(57),M=ae($),B=a(41),W=ae(B),U=a(28),V=ae(U),H=a(59),Q=ae(H),G=a(60),K=ae(G),Y=a(61),X=ae(Y),Z=a(108),J=ae(Z),ee=a(62),te=ae(ee);function ae(e){return e&&e.__esModule?e:{default:e}}i.default.register({"attributors/attribute/direction":r.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":r.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":g.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":r.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":g.SizeStyle},!0),i.default.register({"formats/align":o.AlignClass,"formats/direction":r.DirectionClass,"formats/indent":l.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":b.FontClass,"formats/size":g.SizeClass,"formats/blockquote":c.default,"formats/code-block":R.default,"formats/header":d.default,"formats/list":h.default,"formats/bold":y.default,"formats/code":E.Code,"formats/italic":x.default,"formats/link":k.default,"formats/script":D.default,"formats/strike":O.default,"formats/underline":P.default,"formats/image":A.default,"formats/video":I.default,"formats/list/item":p.ListItem,"modules/formula":j.default,"modules/syntax":q.default,"modules/toolbar":M.default,"themes/bubble":J.default,"themes/snow":te.default,"ui/icons":W.default,"ui/picker":V.default,"ui/icon-picker":K.default,"ui/color-picker":Q.default,"ui/tooltip":X.default},!0),t.default=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"add",value:function(e,a){if("+1"===a||"-1"===a){var n=this.value(e)||0;a="+1"===a?n+1:n-1}return 0===a?(this.remove(e),!0):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,a)}},{key:"canAdd",value:function(e,a){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,a)||i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(a))}},{key:"value",value:function(e){return parseInt(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(r.default.Attributor.Class),p=new d("indent","ql-indent",{scope:r.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(i.default);c.blotName="blockquote",c.tagName="blockquote",t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(4),o=r(i);function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(o.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=d(o),l=a(4),s=d(l),c=a(25),u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),n(t,[{key:"format",value:function(e,a){e!==g.blotName||a?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,a):this.replaceWith(r.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,a){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,a),this):(this.parent.unwrap(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,a))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:i(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(s.default);b.blotName="list-item",b.tagName="LI";var g=function(e){function t(e){h(this,t);var a=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=a.statics.formats(e),i=r.default.find(t.target);"checked"===n?i.format("list","unchecked"):"unchecked"===n&&i.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),a}return f(t,e),n(t,null,[{key:"create",value:function(e){var a="ordered"===e?"OL":"UL",n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,a);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(e,a){if(e instanceof b)i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,a);else{var n=null==a?this.length():a.offset(this),o=this.split(n);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var a=this.next;null!=a&&a.prev===this&&a.statics.blotName===this.statics.blotName&&a.domNode.tagName===this.domNode.tagName&&a.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(a.moveChildren(this),a.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var a=r.default.create(this.statics.defaultChild);e.moveChildren(a),this.appendChild(a)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(u.default);g.blotName="list",g.scope=r.default.Scope.BLOCK_BLOT,g.tagName=["OL","UL"],g.defaultChild="list-item",g.allowedChildren=[b],t.ListItem=b,t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(56),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(i.default);c.blotName="italic",c.tagName=["EM","I"],t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(6),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(r.default);d.blotName="script",d.tagName=["SUB","SUP"],t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(i.default);c.blotName="strike",c.tagName="S",t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(i.default);c.blotName="underline",c.tagName="U",t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=s(o),l=a(27);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=["alt","height","width"],h=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,[{key:"format",value:function(e,a){p.indexOf(e)>-1?a?this.domNode.setAttribute(e,a):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,a)}}],[{key:"create",value:function(e){var a=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&a.setAttribute("src",this.sanitize(e)),a}},{key:"formats",value:function(e){return p.reduce((function(t,a){return e.hasAttribute(a)&&(t[a]=e.getAttribute(a)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(r.default.Embed);h.blotName="image",h.tagName="IMG",t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(4),r=a(27),l=s(r);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=["height","width"],h=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,[{key:"format",value:function(e,a){p.indexOf(e)>-1?a?this.domNode.setAttribute(e,a):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,a)}}],[{key:"create",value:function(e){var a=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("src",this.sanitize(e)),a}},{key:"formats",value:function(e){return p.reduce((function(t,a){return e.hasAttribute(a)&&(t[a]=e.getAttribute(a)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.BlockEmbed);h.blotName="video",h.className="ql-video",h.tagName="IFRAME",t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(35),r=d(o),l=a(5),s=d(l),c=a(9),u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),n(t,null,[{key:"create",value:function(e){var a=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,a,{throwOnError:!1,errorColor:"#f00"}),a.setAttribute("data-value",e)),a}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(r.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var b=function(e){function t(){p(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return m(t,e),n(t,null,[{key:"register",value:function(){s.default.register(f,!0)}}]),t}(u.default);t.FormulaBlot=f,t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},o=a(0),r=h(o),l=a(5),s=h(l),c=a(9),u=h(c),d=a(13),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(p.default);g.className="ql-syntax";var v=new r.default.Attributor.Class("token","hljs",{scope:r.default.Scope.INLINE}),y=function(e){function t(e,a){m(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));if("function"!==typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var i=null;return n.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(i),i=setTimeout((function(){n.highlight(),i=null}),n.options.interval)})),n.highlight(),n}return b(t,e),n(t,null,[{key:"register",value:function(){s.default.register(v,!0),s.default.register(g,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(g).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=t&&this.quill.setSelection(t,s.default.sources.SILENT)}}}]),t}(u.default);y.DEFAULTS={highlight:function(){return null==window.hljs?null:function(e){var t=window.hljs.highlightAuto(e);return t.value}}(),interval:1e3},t.CodeBlock=g,t.CodeToken=v,t.default=y},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(3),r=m(o),l=a(8),s=m(l),c=a(43),u=m(c),d=a(15),p=a(41),h=m(p);function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],y=function(e){function t(e,a){f(this,t),null!=a.modules.toolbar&&null==a.modules.toolbar.container&&(a.modules.toolbar.container=v);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.quill.container.classList.add("ql-bubble"),n}return g(t,e),i(t,[{key:"extendToolbar",value:function(e){this.tooltip=new _(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),h.default)}}]),t}(u.default);y.DEFAULTS=(0,r.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var _=function(e){function t(e,a){f(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t,a,i){if(e===s.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&i===s.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var o=n.quill.getLines(t.index,t.length);if(1===o.length)n.position(n.quill.getBounds(t));else{var r=o[o.length-1],l=n.quill.getIndex(r),c=Math.min(r.length()-1,t.index+t.length-l),u=n.quill.getBounds(new d.Range(l,c));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()})),n}return g(t,e),i(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var a=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===a)return a;i.style.marginLeft=-1*a-i.offsetWidth/2+"px"}}]),t}(c.BaseTooltip);_.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=_,t.default=y},function(e,t,a){e.exports=a(63)}])["default"]}))}).call(this,a("b639").Buffer)},9370:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.goodsName,callback:function(t){e.$set(e.queryParams,"goodsName",t)},expression:"queryParams.goodsName"}})],1),a("el-form-item",{attrs:{label:"商品编码",prop:"goodsCode"}},[a("el-input",{attrs:{placeholder:"请输入商品编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.goodsCode,callback:function(t){e.$set(e.queryParams,"goodsCode",t)},expression:"queryParams.goodsCode"}})],1),a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{placeholder:"请选择车辆类型",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.vehicleType,callback:function(t){e.$set(e.queryParams,"vehicleType",t)},expression:"queryParams.vehicleType"}})],1),a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{placeholder:"请输入厂牌型号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.factoryNo,callback:function(t){e.$set(e.queryParams,"factoryNo",t)},expression:"queryParams.factoryNo"}})],1),a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{placeholder:"请输入产地",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.origin,callback:function(t){e.$set(e.queryParams,"origin",t)},expression:"queryParams.origin"}})],1),a("el-form-item",{attrs:{label:"生产企业名称",prop:"factoryName"}},[a("el-input",{attrs:{placeholder:"请输入生产企业名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.factoryName,callback:function(t){e.$set(e.queryParams,"factoryName",t)},expression:"queryParams.factoryName"}})],1),a("el-form-item",{attrs:{label:"税收分类编码",prop:"taxTypeCode"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxTypeCode,callback:function(t){e.$set(e.queryParams,"taxTypeCode",t)},expression:"queryParams.taxTypeCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["goods:goods:add"],expression:"['goods:goods:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["goods:goods:edit"],expression:"['goods:goods:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["goods:goods:remove"],expression:"['goods:goods:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["goods:goods:export"],expression:"['goods:goods:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"vehicleGoodsMainTable",attrs:{data:e.goodsList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["preferentialPolicyType"==t.prop?a("span",[e._v(" "+e._s(e.preferentialPolicyTypeFormat(n.row))+" ")]):"preferentialPolicy"==t.prop?a("span",["1"==n.row.preferentialPolicy?a("span",[e._v("是")]):a("span",[e._v("否")])]):"rate"==t.prop?a("span",[e._v(" "+e._s(e.rateFormat(n.row))+" ")]):"goodsCode"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(e._s(n.row.goodsCode))]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName",t)},expression:"form.goodsName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品编码",prop:"goodsCode"}},[a("el-input",{attrs:{placeholder:"请输入商品编码"},model:{value:e.form.goodsCode,callback:function(t){e.$set(e.form,"goodsCode",t)},expression:"form.goodsCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{placeholder:"请选择车辆类型"},model:{value:e.form.vehicleType,callback:function(t){e.$set(e.form,"vehicleType",t)},expression:"form.vehicleType"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{placeholder:"请输入厂牌型号"},model:{value:e.form.factoryNo,callback:function(t){e.$set(e.form,"factoryNo",t)},expression:"form.factoryNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{placeholder:"请输入产地"},model:{value:e.form.origin,callback:function(t){e.$set(e.form,"origin",t)},expression:"form.origin"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合格证号",prop:"eligibilityNo"}},[a("el-input",{attrs:{placeholder:"请输入合格证号"},model:{value:e.form.eligibilityNo,callback:function(t){e.$set(e.form,"eligibilityNo",t)},expression:"form.eligibilityNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"进口证明书号",prop:"importCertificateNumber"}},[a("el-input",{attrs:{placeholder:"请输入进口证明书号"},model:{value:e.form.importCertificateNumber,callback:function(t){e.$set(e.form,"importCertificateNumber",t)},expression:"form.importCertificateNumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商检单号",prop:"commodityInspectionNo"}},[a("el-input",{attrs:{placeholder:"请输入商检单号"},model:{value:e.form.commodityInspectionNo,callback:function(t){e.$set(e.form,"commodityInspectionNo",t)},expression:"form.commodityInspectionNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号码",prop:"engineNo"}},[a("el-input",{attrs:{placeholder:"请输入发动机号码"},model:{value:e.form.engineNo,callback:function(t){e.$set(e.form,"engineNo",t)},expression:"form.engineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆识别代号",prop:"vehicleIdentificationCode"}},[a("el-input",{attrs:{placeholder:"请输入车辆识别代号"},model:{value:e.form.vehicleIdentificationCode,callback:function(t){e.$set(e.form,"vehicleIdentificationCode",t)},expression:"form.vehicleIdentificationCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"完税凭证号码",prop:"completionVoucherNo"}},[a("el-input",{attrs:{placeholder:"请输入完税凭证号码"},model:{value:e.form.completionVoucherNo,callback:function(t){e.$set(e.form,"completionVoucherNo",t)},expression:"form.completionVoucherNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"吨位",prop:"tonnage"}},[a("el-input",{attrs:{placeholder:"请输入吨位"},model:{value:e.form.tonnage,callback:function(t){e.$set(e.form,"tonnage",t)},expression:"form.tonnage"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"限乘人数",prop:"limitedNumberOfPassengers"}},[a("el-input",{attrs:{placeholder:"请输入限乘人数"},model:{value:e.form.limitedNumberOfPassengers,callback:function(t){e.$set(e.form,"limitedNumberOfPassengers",t)},expression:"form.limitedNumberOfPassengers"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"主管税务机关代码",prop:"taxAuthorityCode"}},[a("el-input",{attrs:{placeholder:"请输入主管税务机关代码"},model:{value:e.form.taxAuthorityCode,callback:function(t){e.$set(e.form,"taxAuthorityCode",t)},expression:"form.taxAuthorityCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"主管税务机关名称",prop:"taxAuthorityName"}},[a("el-input",{attrs:{placeholder:"请输入主管税务机关名称"},model:{value:e.form.taxAuthorityName,callback:function(t){e.$set(e.form,"taxAuthorityName",t)},expression:"form.taxAuthorityName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生产企业名称",prop:"factoryName"}},[a("el-input",{attrs:{placeholder:"请输入生产企业名称"},model:{value:e.form.factoryName,callback:function(t){e.$set(e.form,"factoryName",t)},expression:"form.factoryName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税收分类编码",prop:"taxTypeCode"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码"},model:{value:e.form.taxTypeCode,callback:function(t){e.$set(e.form,"taxTypeCode",t)},expression:"form.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:e.chooseCode},slot:"suffix"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税率",prop:"rate"}},[a("el-select",{attrs:{placeholder:"请输入税率"},on:{change:function(t){return e.changeRate(e.form.rate)}},model:{value:e.form.rate,callback:function(t){e.$set(e.form,"rate",t)},expression:"form.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否享受优惠",prop:"preferentialPolicy"}},[a("el-select",{attrs:{placeholder:"请输入是否享受优惠"},on:{change:function(t){return e.changeZc(e.form.preferentialPolicy)}},model:{value:e.form.preferentialPolicy,callback:function(t){e.$set(e.form,"preferentialPolicy",t)},expression:"form.preferentialPolicy"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"优惠政策类型"}},[a("el-select",{attrs:{placeholder:"请选择优惠政策类型"},on:{change:function(t){return e.changeType(e.form.preferentialPolicyType)}},model:{value:e.form.preferentialPolicyType,callback:function(t){e.$set(e.form,"preferentialPolicyType",t)},expression:"form.preferentialPolicyType"}},e._l(e.yhzclxOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}})],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("12b7")),l=a("b9aa"),s=a("ed08"),c={name:"Goods",components:{ChooseCode:l["default"]},data:function(){return{functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,goodsList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,goodsName:null,goodsCode:null,vehicleType:null,factoryNo:null,origin:null,eligibilityNo:null,importCertificateNumber:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null,taxAuthorityCode:null,taxAuthorityName:null,factoryName:null,taxTypeCode:null,rate:null,preferentialPolicy:null,preferentialPolicyType:null,ext1:null,ext2:null},form:{},rules:{goodsName:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],vehicleType:[{required:!0,message:"车辆类型不能为空",trigger:"blur"}],factoryNo:[{required:!0,message:"厂牌型号不能为空",trigger:"blur"}]},columnsArr:[{label:"商品编码",prop:"goodsCode",align:"center",show:!0,width:220,columnSort:0},{label:"商品名称",prop:"goodsName",align:"center",show:!0,width:220,columnSort:1},{label:"车辆类型",prop:"vehicleType",align:"center",show:!0,width:220,columnSort:2},{label:"厂牌型号",prop:"factoryNo",align:"center",show:!0,width:220,columnSort:3},{label:"产地",prop:"origin",align:"center",show:!0,width:220,columnSort:4},{label:"合格证号",prop:"eligibilityNo",align:"center",show:!0,width:220,columnSort:5},{label:"进口证明书号",prop:"importCertificateNumber",align:"center",show:!0,width:220,columnSort:6},{label:"商检单号",prop:"commodityInspectionNo",align:"center",show:!0,width:220,columnSort:0},{label:"发动机号码",prop:"engineNo",align:"center",show:!0,width:220,columnSort:1},{label:"车辆识别代号",prop:"vehicleIdentificationCode",align:"center",show:!0,width:220,columnSort:2},{label:"完税凭证号码",prop:"completionVoucherNo",align:"center",show:!0,width:220,columnSort:3},{label:"吨位",prop:"tonnage",align:"center",show:!0,width:220,columnSort:4},{label:"限乘人数",prop:"limitedNumberOfPassengers",align:"center",show:!0,width:220,columnSort:5},{label:"主管税务机关代码",prop:"taxAuthorityCode",align:"center",show:!0,width:220,columnSort:6},{label:"主管税务机关名称",prop:"taxAuthorityName",align:"center",show:!0,width:220,columnSort:0},{label:"生产企业名称",prop:"factoryName",align:"center",show:!0,width:220,columnSort:1},{label:"税收分类编码",prop:"taxTypeCode",align:"center",show:!0,width:220,columnSort:2},{label:"税率",prop:"rate",align:"center",show:!0,width:220,columnSort:3},{label:"是否享受优惠",prop:"preferentialPolicy",align:"center",show:!0,width:220,columnSort:4},{label:"优惠政策类型",prop:"preferentialPolicyType",align:"center",show:!0,width:220,columnSort:5}],sortParam:{column:"",columnOrder:""},yhzclxOptions:[],rateOptions:[],preferentialPolicyOptions:[]}},created:function(){var e=this;this.getList(),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),this.getDicts("yhzclx").then((function(t){e.yhzclxOptions=t.data})),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.preferentialPolicyOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(s["e"])(this.queryParams),Object(s["e"])(this.sortParam));Object(r["e"])(t).then((function(t){e.goodsList=t.rows,e.total=t.total,e.loading=!1}))},preferentialPolicyFormat:function(e,t){return this.selectDictLabel(this.preferentialPolicyOptions,e.preferentialPolicy)},preferentialPolicyTypeFormat:function(e,t){return this.selectDictLabel(this.yhzclxOptions,e.preferentialPolicyType)},rateFormat:function(e,t){return this.selectDictLabel(this.rateOptions,e.rate)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,goodsName:null,goodsCode:null,vehicleType:null,factoryNo:null,origin:null,eligibilityNo:null,importCertificateNumber:null,commodityInspectionNo:null,engineNo:null,vehicleIdentificationCode:null,completionVoucherNo:null,tonnage:null,limitedNumberOfPassengers:null,taxAuthorityCode:null,taxAuthorityName:null,factoryName:null,taxTypeCode:null,rate:null,preferentialPolicy:null,preferentialPolicyType:null,ext1:null,ext2:null,createBy:null,updateBy:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(s["e"])(e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加机动车商品库"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(r["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改机动车商品库"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["f"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除机动车商品库编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有机动车商品库数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["c"])(t)})).then((function(t){e.currencyDownload(t,"机动车商品.xls",e)})).catch((function(){}))},chooseCode:function(){this.$refs.ChooseCode.openChoose()},showChooseCode:function(e){this.form.taxTypeCode=e.mergeCode,this.form.rate=e.rate.replace("%",""),this.changeRate(this.form.rate)},changeRate:function(e){"免税"==e||"不征税"==e?(this.form.preferentialPolicy=1,this.form.preferentialPolicyType="免税"==e?"免税":"不征税"):(this.form.preferentialPolicyType="",this.form.preferentialPolicy=0)},changeType:function(e){"免税"==e||"不征税"==e?(this.form.preferentialPolicy=1,this.form.rate=e):this.form.preferentialPolicy=0},changeZc:function(e){this.form.preferentialPolicyType=""},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.vehicleGoodsMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.goodsList,"vehicleGoodsMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},"93d9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.invoiceDetailLoading,expression:"invoiceDetailLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{attrs:{placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.billNo,callback:function(t){e.$set(e.queryParams,"billNo","string"===typeof t?t.trim():t)},expression:"queryParams.billNo"}})],1),a("el-form-item",{attrs:{label:"红字单号",prop:"negNativeNo"}},[a("el-input",{attrs:{placeholder:"请输入红字申请单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.negNativeNo,callback:function(t){e.$set(e.queryParams,"negNativeNo","string"===typeof t?t.trim():t)},expression:"queryParams.negNativeNo"}})],1),a("el-form-item",{attrs:{label:"申请日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"单据类型",prop:"applyType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.applyType,callback:function(t){e.$set(e.queryParams,"applyType",t)},expression:"queryParams.applyType"}},e._l(e.redBillTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(t){return"0"==t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"单据状态",prop:"redStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",clearable:"",size:"small"},model:{value:e.queryParams.redStatus,callback:function(t){e.$set(e.queryParams,"redStatus",t)},expression:"queryParams.redStatus"}},e._l(e.redBillStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"原发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入原发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sourceInvNo,callback:function(t){e.$set(e.queryParams,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"queryParams.sourceInvNo"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:add"],expression:"['output:redbill:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:transfer"],expression:"['output:redbill:transfer']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini",disabled:e.multiple},on:{click:e.transfBill}},[e._v("转待开单据")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:remove"],expression:"['output:redbill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:edit"],expression:"['output:redbill:edit']"}],attrs:{type:"info",icon:"el-icon-edit",size:"mini",disabled:e.single||e.noedit},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:download"],expression:"['output:redbill:download']"}],attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:e.handleDownload}},[e._v("下载")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:cancel"],expression:"['output:redbill:cancel']"}],attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:e.handleCancel}},[e._v("撤销")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:redbill:export"],expression:"['output:redbill:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:upload"],expression:"['output:redbill:upload']"}],attrs:{type:"warning",icon:"el-icon-upload2",size:"mini",disabled:e.multiple},on:{click:e.handleUpload}},[e._v("上传")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"},{name:"has-permi",rawName:"v-has-permi",value:["output:redbill:print"],expression:"['output:redbill:print']"}],attrs:{type:"primary",icon:"el-icon-printer",size:"mini",disabled:e.single&&e.multiple},on:{click:e.beforePrint}},[e._v("打印")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"invoiceMainTable",attrs:{data:e.invoiceList,height:e.tableHeight,"row-height":40,"use-virtual":"","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceInfo(n.row)}}},[e._v(e._s(n.row[t.prop]))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"applyType"==t.prop?a("span",[e._v(e._s(e.applyTypeFormat(n.row)))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"redStatus"==t.prop?a("span",[e._v(e._s(e.redStatusFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row.createTime,"{y}-{m}-{d}")))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.row.redStatus&&1!=t.row.redStatus?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:edit"],expression:"['output:invoice:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.showInvoiceInfo(t.row)}}},[e._v("修改")]):e._e()]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("red-invoice-info-select",{ref:"infoModal",on:{submitRedInfoP:e.submitRedInfoP}}),a("red-invoice-edit-modal",{ref:"editModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("red-invoice-show-modal",{ref:"showModal"}),a("red-invoice-download",{ref:"downloadModal",on:{updateInvoiceTable:e.updateInvoiceTable,showElLoading:e.showElLoading,closeElLoading:e.closeElLoading}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),e.isPrint?a("div",{ref:"print",attrs:{id:"print-body"}},e._l(e.printData,(function(t){return a("div",{staticClass:"print-page"},[e._m(0,!0),a("div",{staticClass:"print-content"},[a("p",{staticStyle:{margin:"0",padding:"16px"}},[e._v("填开日期："),a("span",[e._v(e._s(t.createTime))])]),a("div",[a("table",{staticClass:"print-table"},[a("tr",[a("td",{staticClass:"text-center",attrs:{rowspan:"2"}},[e._v("销售方")]),a("td",{staticClass:"text-center"},[e._v("名称")]),a("td",[e._v(e._s(t.sellName))]),a("td",{staticClass:"text-center",attrs:{rowspan:"2"}},[e._v("购买方")]),a("td",{staticClass:"text-center"},[e._v("名称")]),a("td",[e._v(e._s(t.buyName))])]),a("tr",[a("td",{staticClass:"text-center"},[e._v("纳税人识别号")]),a("td",[e._v(e._s(t.sellTaxNo))]),a("td",{staticClass:"text-center"},[e._v("纳税人识别号")]),a("td",[e._v(e._s(t.buyTaxNo))])]),a("tr",[e._m(1,!0),a("td",{staticStyle:{"vertical-align":"top",position:"relative",padding:"0"},attrs:{colspan:"5"}},[a("table",{staticClass:"print-table-detail"},[e._m(2,!0),e._l(t.details,(function(t){return a("tr",[a("td",[e._v(e._s(t.goodsName))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.number))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.taxPrice))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.amountWithTax))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.rate))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.taxAmount))])])}))],2),a("div",{staticStyle:{position:"absolute",bottom:"0",width:"100%"}},[e._m(3,!0),a("div",{staticStyle:{display:"inline-block",width:"65%","text-align":"center"}},[e._v("￥"),a("span",[e._v(e._s(t.totalAmount))])]),a("div",{staticStyle:{display:"inline-block",width:"14%","text-align":"left"}},[e._v("￥"),a("span",[e._v(e._s(t.totalTaxAmount))])])])])]),a("tr",[e._m(4,!0),a("td",{staticStyle:{"vertical-align":"top",position:"relative","padding-left":"20px"},attrs:{colspan:"5"}},[a("div",{staticClass:"public-info-item-body"},[a("p",[e._v(" 一、购买方 "),a("el-checkbox",{staticClass:"special-checkbox",model:{value:"1"==t.applyType||"2"==t.applyType,callback:function(a){e.$set("1"==t.applyType||t,"applyType == '2'",a)},expression:"item.applyType == '1' || item.applyType == '2'"}})],1),a("p",{staticClass:"second-level"},[e._v("对应蓝字专用发票抵扣增值税销项税额情况：")]),a("p",{staticClass:"third-level"},[e._v(" 1.已抵扣 "),a("el-checkbox",{staticClass:"special-checkbox",model:{value:"2"==t.applyType,callback:function(a){e.$set(t,"applyType == '2'",a)},expression:"item.applyType == '2'"}})],1),a("p",{staticClass:"third-level"},[e._v(" 2.未抵扣 "),a("el-checkbox",{staticClass:"special-checkbox",model:{value:"1"==t.applyType,callback:function(a){e.$set(t,"applyType == '1'",a)},expression:"item.applyType == '1'"}})],1),a("p",{staticClass:"second-level"},[e._v(" 对应蓝字专用发票的代码： "),a("span",{staticClass:"code-no-span"},[e._v(e._s("1"==t.applyType||"2"==t.applyType?t.sourceInvCode:""))]),e._v(" 号码："),a("span",{staticClass:"code-no-span"},[e._v(e._s("1"==t.applyType||"2"==t.applyType?t.sourceInvNo:""))])])]),a("div",[a("p",[e._v(" 二、销售方 "),a("el-checkbox",{staticClass:"special-checkbox",model:{value:"0"==t.applyType,callback:function(a){e.$set(t,"applyType == '0'",a)},expression:"item.applyType == '0'"}})],1),a("p",{staticClass:"second-level"},[e._v(" 对应蓝字专用发票的代码："),a("span",{staticClass:"code-no-span"},[e._v(e._s("0"==t.applyType?t.sourceInvCode:""))]),e._v(" 号码："),a("span",{staticClass:"code-no-span"},[e._v(e._s("0"==t.applyType?t.sourceInvNo:""))])])])])]),a("tr",[e._m(5,!0),a("td",{staticStyle:{"vertical-align":"top",position:"relative"},attrs:{colspan:"5"}},[e._v(e._s(t.negNativeNo))])])])])])])})),0):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("h3",{staticStyle:{margin:"0px",padding:"18px"}},[e._v("开具红字增值税专用发票信息表")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"text-center",staticStyle:{height:"350px"}},[a("span",{staticStyle:{width:"40px",display:"block",margin:"auto"}},[e._v("开具红字专用发票类容")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticStyle:{width:"30%"}},[e._v("货物(劳务服务名称)")]),a("td",[e._v("数量")]),a("td",[e._v("单价")]),a("td",[e._v("金额")]),a("td",[e._v("税率")]),a("td",[e._v("税额")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline-block",width:"20%","text-align":"center"}},[e._v("合计"),a("span")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"text-center",staticStyle:{height:"300px"}},[a("span",{staticStyle:{width:"40px",display:"block",margin:"auto"}},[e._v("说明")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"text-center"},[a("span",{staticStyle:{width:"60px",display:"block",margin:"auto"}},[e._v("红字发票信息表编号")])])}],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("4e82"),a("d81d"),a("ac1f"),a("5319"),a("b680"),a("25f0"),a("722a")),l=a("c394"),s=a("c85c"),c=a("c10b"),u=a("6f50f"),d=a("747b"),p=a("dc68"),h=a("7cfa"),m=a("b526"),f=a("ed08"),b={name:"redInvoice",components:{RedInvoiceShowModal:p["default"],RedInvoiceEditModal:d["default"],RedInvoiceInfoSelect:u["default"],RedInvoiceDownload:h["default"],TotalRowTable:m["default"]},data:function(){return{printObj:{id:"print-body",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},module:"redbill",sortParam:{column:null,columnOrder:null},tableHeight:null,pageSizes:[],showProgress:!1,functionName:"上传中:",loadingTime:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,noedit:!1,dateRange:[],showSearch:!0,total:0,invoiceList:[],title:"",open:!1,invTypeOptions:[],redBillStatusOptions:[],redBillTypeOptions:[],successFailOptions:[],applyStatusOptions:[],queryParams:{pageNum:1,pageSize:10,billNo:null,invType:null,applyType:null,applyStatus:null,redStatus:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sourceInvCode:null,sourceInvNo:null,negNativeNo:null},form:{},rules:{},taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],invoiceDetailLoading:!1,uploadInvoiceIndex:0,uploadIdsArr:[],uploadRowsArr:[],uploadResult:[],columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"发票代码",prop:"sourceInvCode",align:"center",show:!0,width:180,columnSort:1},{label:"发票号码",prop:"sourceInvNo",align:"center",show:!0,width:180,columnSort:2},{label:"申请类型",prop:"applyType",align:"center",show:!0,width:180,columnSort:3},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:4},{label:"单据状态",prop:"redStatus",align:"center",show:!0,width:220,columnSort:5},{label:"申请结果",prop:"applyDesc",align:"center",show:!0,width:180,columnSort:6},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:7},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:180,columnSort:8},{label:"购方纳税人识别号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:9},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:180,columnSort:10},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:11},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:12},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:180,columnSort:13}],checkboxClick:!1,operationIndex:0,operationRowArr:[],printData:[],isPrint:!1}},computed:{totalTableData:function(){var e=Object(f["e"])(this.rows);return 0==e.length&&(e=Object(f["e"])(this.invoiceList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getList(),this.getDicts("red_bill_status").then((function(t){e.redBillStatusOptions=t.data})),this.getDicts("red_bill_type").then((function(t){e.redBillTypeOptions=t.data})),this.getDicts("apply_success_fail").then((function(t){e.successFailOptions=t.data})),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var a={module:this.module};Promise.all([Object(c["b"])(a),Object(c["a"])(a)]).then((function(t){for(var a=t[0].data,n=t[1].data,i=[],o=0;o<n.length;o++){for(var r=!1,l=0;l<a.length;l++)if(n[o].prop==a[l].prop){r=l;break}"boolean"==typeof r?(n[o].show=!1,n[o].align="center",n[o].width=100,i.push(n[o])):i.push(a[r])}e.columnsArr=i.sort((function(e,t){return e.columnSort-t.columnSort}));for(var s=0;s<e.columnsArr.length;s++)null==e.columnsArr[s].width&&("billNo"==e.columnsArr[s].prop?e.columnsArr[s].width=200:"invCode"==e.columnsArr[s].prop||"invNo"==e.columnsArr[s].prop?e.columnsArr[s].width=150:e.columnsArr[s].width=120)}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.invoiceMainTable.doLayout()}))},getList:function(){var e=this;this.loading=!0;var t=Object(f["e"])(this.queryParams);t.beginTime=this.dateRange[0]+" 00:00:00",t.endTime=this.dateRange[1]+" 23:59:59";var a=Object.assign(Object(f["e"])(t),Object(f["e"])(this.sortParam));Object(r["h"])(a).then((function(t){e.invoiceList=t.rows,e.total=t.total,e.loading=!1}))},redStatusFormat:function(e,t){return this.selectDictLabel(this.redBillStatusOptions,e.redStatus)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},applyTypeFormat:function(e,t){return this.selectDictLabel(this.redBillTypeOptions,e.applyType)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.successFailOptions,e.applyStatus)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:null,detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,invStatus:"0",taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e,e.length>0&&(this.noedit=("0"==e[0].redStatus||"1"==e[0].redStatus)&&1==e.length),this.webPrint())},showInvoiceInfo:function(e){var t=this;this.invoiceDetailLoading=!0,this.reset();var a=this.rows;void 0==e.id&&(e=a[0]),this.reset();var n=e.id||this.ids,i={id:n};"1"==e.redStatus||"0"==e.redStatus?this.$refs.showModal.fillBillDialog(i).then((function(){t.invoiceDetailLoading=!1})):this.$refs.editModal.fillBillDialog(i).then((function(){t.invoiceDetailLoading=!1}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["updateInvoice"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):addInvoice(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleAdd:function(){this.$refs.infoModal.redInfoDialogShow()},handleUpdate:function(e){this.showInvoiceInfo(e)},handleDownload:function(e){this.$refs.downloadModal.redDownloadDialogShow()},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除已开发票管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["c"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;t.ids=this.ids,this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(r["e"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"已开发票.xls",e)}))},handleUpload:function(e){var t=this,a=e.id||this.ids,n=Object(f["e"])(this.rows);this.uploadIdsArr=Object(f["e"])(a),this.uploadRowsArr=Object(f["e"])(n),this.$confirm("本次待上传红字发票信息表张数:"+a.length,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){t.functionName="上传中",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.uploadIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.uploadInvoiceList()})).catch((function(){}))},handleCancel:function(e){var t=this,a=e.id||this.ids,n=Object(f["e"])(this.rows);this.uploadIdsArr=Object(f["e"])(a),this.uploadRowsArr=Object(f["e"])(n),this.$confirm("本次待撤销红字发票信息表张数:"+a.length,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){t.functionName="撤销中",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.uploadIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.cancelList()})).catch((function(){}))},transfBill:function(e){var t=this;this.operationIndex=0,this.operationRowArr=Object(f["e"])(this.rows);e.id||this.ids;this.$confirm("是否确定要转为待开单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){t.functionName="转换中",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.uploadIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.transfToBillList()})).catch((function(){}))},transfToBillList:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t=this.operationRowArr[this.operationIndex-1].id;Object(r["i"])(t).then((function(t){"200"==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.transfToBillList():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(t){e.operationIndex<e.operationRowArr.length?e.transfToBillList():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},cancelList:function(){var e=this;this.uploadInvoiceIndex++,1!=this.uploadInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.uploadInvoiceIndex/this.uploadIdsArr.length*100));var t=this.uploadRowsArr[this.uploadInvoiceIndex-1];Object(r["b"])(t.id).then((function(t){"200"==t.code?e.msgSuccess("第"+e.uploadInvoiceIndex+"张单据"+t.msg):e.msgError("第"+e.uploadInvoiceIndex+"张单据撤销失败："+t.msg),e.uploadResult.push(t),e.$refs.myProgress.setProgressNum(parseInt(e.uploadInvoiceIndex/e.uploadIdsArr.length*100)),e.uploadInvoiceIndex<e.uploadIdsArr.length?e.cancelList():(e.renewUploadParam(),e.getList())})).catch((function(t){e.uploadInvoiceIndex>=e.uploadIdsArr.length?e.renewUploadParam():e.$confirm(t.message+"是否继续撤销单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.cancelList()})).catch((function(){e.renewUploadParam()}))}))},uploadInvoiceList:function(){var e=this;this.uploadInvoiceIndex++,1!=this.uploadInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.uploadInvoiceIndex/this.uploadIdsArr.length*100));var t=this.uploadRowsArr[this.uploadInvoiceIndex-1];Object(r["l"])(t.id).then((function(t){"200"==t.code?e.msgSuccess("第"+e.uploadInvoiceIndex+"张单据"+t.msg):e.msgError("第"+e.uploadInvoiceIndex+"张单据上传失败："+t.msg),e.uploadResult.push(t),e.$refs.myProgress.setProgressNum(parseInt(e.uploadInvoiceIndex/e.uploadIdsArr.length*100)),e.uploadInvoiceIndex<e.uploadIdsArr.length?e.uploadInvoiceList():(e.renewUploadParam(),e.getList())})).catch((function(t){e.uploadInvoiceIndex>=e.uploadIdsArr.length?e.renewUploadParam():e.$confirm(t.message+"是否继续上传单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.uploadInvoiceList()})).catch((function(){e.renewUploadParam()}))}))},renewUploadParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.uploadInvoiceIndex=0,this.uploadResult=[],this.uploadIdsArr=[],this.uploadRowsArr=[]},openValid1:function(){var e=this,t=Object(s["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.invoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"invoiceMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.invoiceList,"invoiceMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},submitRedInfoP:function(e){var t=this;if("2"!=e.checkedApply)this.$refs.editModal.billDialogShow(e),this.$refs.editModal.editDialogTitle("1"),this.$nextTick((function(){t.$refs.editModal.getBillNo()}));else{var a={invCode:e.sourceInvCode,invNo:e.sourceInvNo,invDate:e.sourceInvDate,invCodeNo:e.sourceInvCode+"_"+e.sourceInvNo};Object(l["s"])(a).then((function(a){if(200==a.code){var n=a.data;if("2"==n.redFlag)return void t.msgError("该发票已被红冲");t.$refs.editModal.billDialogShow(e),t.$refs.editModal.editDialogTitle("1")}else t.$confirm(a.msg,"警告",{confirmButtonText:"上一步",cancelButtonText:"确定",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.$refs.infoModal.redInfoDialogShow()})).catch((function(a){"cancel"==a&&(t.$refs.editModal.billDialogShow(e),t.$refs.editModal.editDialogTitle("1"),t.$nextTick((function(){t.$refs.editModal.getBillNo()})))}))})).catch((function(){}))}},updateInvoiceTable:function(){this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)},beforePrint:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},webPrint:function(){this.printData=[],this.ids.length<1||(this.operationIndex=0,this.operationRowArr=Object(f["e"])(this.rows),this.webPrintLogic())},webPrintLogic:function(){var e=this;this.operationIndex++,Object(r["g"])(this.ids[this.operationIndex-1]).then((function(t){if(200==t.code){for(var a=t.data,n=0,i=a.details.length;n<i;n++)a.details[n].rate=e.transformRate(a.details[n]);e.printData.push(a),e.operationIndex<e.ids.length&&e.webPrintLogic()}else e.msgError(t.msg)})).catch((function(){}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},showElLoading:function(){this.invoiceDetailLoading=!0},closeElLoading:function(){this.invoiceDetailLoading=!1}}},g=b,v=(a("7f8e"),a("2877")),y=Object(v["a"])(g,n,i,!1,null,null,null);t["default"]=y.exports},9429:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{staticClass:"img-circle img-lg",attrs:{src:e.options.img,title:"点击上传头像"},on:{click:function(t){return e.editCropper()}}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.open=t},opened:e.modalOpened}},[a("el-row",[a("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[e.visible?a("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,autoCrop:e.options.autoCrop,autoCropWidth:e.options.autoCropWidth,autoCropHeight:e.options.autoCropHeight,fixedBox:e.options.fixedBox},on:{realTime:e.realTime}}):e._e()],1),a("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[a("div",{staticClass:"avatar-upload-preview"},[a("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])],1),a("br"),a("el-row",[a("el-col",{attrs:{lg:2,md:2}},[a("el-upload",{attrs:{action:"#","http-request":e.requestUpload,"show-file-list":!1,"before-upload":e.beforeUpload}},[a("el-button",{attrs:{size:"small"}},[e._v(" 上传 "),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),a("el-col",{attrs:{lg:{span:1,offset:2},md:2}},[a("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.changeScale(1)}}})],1),a("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("el-button",{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(t){return e.changeScale(-1)}}})],1),a("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small"},on:{click:function(t){return e.rotateLeft()}}})],1),a("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[a("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(t){return e.rotateRight()}}})],1),a("el-col",{attrs:{lg:{span:2,offset:6},md:2}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.uploadImg()}}},[e._v("提 交")])],1)],1)],1)],1)},i=[],o=a("4360"),r=a("7e79"),l=a("c0c7"),s={components:{VueCropper:r["VueCropper"]},props:{user:{type:Object}},data:function(){return{open:!1,visible:!1,title:"修改头像",options:{img:o["a"].getters.avatar,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},methods:{editCropper:function(){},modalOpened:function(){this.visible=!0},requestUpload:function(){},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},beforeUpload:function(e){var t=this;if(-1==e.type.indexOf("image/"))this.msgError("文件格式错误，请上传图片类型,如：JPG，PNG后缀的文件。");else{var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t.options.img=a.result}}},uploadImg:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var a=new FormData;a.append("avatarfile",t),Object(l["o"])(a).then((function(t){200===t.code&&(e.open=!1,e.options.img="/prod-api"+t.imgUrl,o["a"].commit("SET_AVATAR",e.options.img),e.msgSuccess("修改成功")),e.visible=!1}))}))},realTime:function(e){this.previews=e}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},9488:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=(a("d3b7"),a("159b"),a("313e")),r=a.n(o),l=a("feb2");a("817d");var s=6e3,c={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Array,default:function(){return[]}}},data:function(){return{chart:null}},watch:{chartData:function(e,t){this.initChart()}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart&&this.chart.dispose();var e=[],t=0,a=0,n=0,i=0;this.chartData.forEach((function(o,r,l){0!=r&&(e.push({type:"bar",animationDuration:s,yAxisIndex:r%2==0?1:0,seriesLayoutBy:"row"}),r%2==0?o.forEach((function(e,t,a){0!=t&&(e>n&&(n=e),e<i&&(i=e))})):o.forEach((function(e,n,i){0!=n&&(e>t&&(t=e),e<a&&(a=e))})))})),i>=0&&a>=0?(i=0,a=0):(Math.abs(i)>Math.abs(n)?n=Math.abs(i):i=-1*Math.abs(n),Math.abs(a)>Math.abs(t)?t=Math.abs(a):a=-1*Math.abs(t)),this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({legend:{},dataset:{source:this.chartData},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){for(var t="<span>"+e[0].axisValue+"</span><br/>",a=0,n=e.length;a<n;a++){var i=e[a];-1!=i.seriesName.indexOf("数量")?t+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: '+i.color+'"></span>'+i.seriesName+"："+i.value[i.seriesIndex+1]+"份":-1!=i.seriesName.indexOf("金额")&&(t+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: '+i.color+'"></span>'+i.seriesName+"："+i.value[i.seriesIndex+1]+"元"),a<n-1&&(t+="<br/>")}return t}},grid:{top:30,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1},name:"数量/份",min:a,max:t},{type:"value",axisTick:{show:!1},name:"金额/元",min:i,max:n}],series:e},!0)}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},"949f":function(e,t,a){},"94ff":function(e,t,a){"use strict";a("e54c")},"953d":function(e,t,a){!function(t,n){e.exports=n(a("9339"))}(0,(function(e){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(t,a){t.exports=e},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),i=a.n(n),o=a(6),r=a(5),l=r(i.a,o.a,!1,null,null,null);t.default=l.exports},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.install=t.quillEditor=t.Quill=void 0;var i=a(0),o=n(i),r=a(1),l=n(r),s=window.Quill||o.default,c=function(e,t){t&&(l.default.props.globalOptions.default=function(){return t}),e.component(l.default.name,l.default)},u={Quill:s,quillEditor:l.default,install:c};t.default=u,t.Quill=s,t.quillEditor=l.default,t.install=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert text here ...",readOnly:!1}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),o=n(i),r=a(3),l=n(r),s=window.Quill||o.default;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])}return a},writable:!0,configurable:!0}),t.default={name:"quill-editor",data:function(){return{_options:{},_content:"",defaultOptions:l.default}},props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,required:!1,default:function(){return{}}},globalOptions:{type:Object,required:!1,default:function(){return{}}}},mounted:function(){this.initialize()},beforeDestroy:function(){this.quill=null,delete this.quill},methods:{initialize:function(){var e=this;this.$el&&(this._options=Object.assign({},this.defaultOptions,this.globalOptions,this.options),this.quill=new s(this.$refs.editor,this._options),this.quill.enable(!1),(this.value||this.content)&&this.quill.pasteHTML(this.value||this.content),this.disabled||this.quill.enable(!0),this.quill.on("selection-change",(function(t){t?e.$emit("focus",e.quill):e.$emit("blur",e.quill)})),this.quill.on("text-change",(function(t,a,n){var i=e.$refs.editor.children[0].innerHTML,o=e.quill,r=e.quill.getText();"<p><br></p>"===i&&(i=""),e._content=i,e.$emit("input",e._content),e.$emit("change",{html:i,text:r,quill:o})})),this.$emit("ready",this.quill))}},watch:{content:function(e,t){this.quill&&(e&&e!==this._content?(this._content=e,this.quill.pasteHTML(e)):e||this.quill.setText(""))},value:function(e,t){this.quill&&(e&&e!==this._content?(this._content=e,this.quill.pasteHTML(e)):e||this.quill.setText(""))},disabled:function(e,t){this.quill&&this.quill.enable(!e)}}}},function(e,t){e.exports=function(e,t,a,n,i,o){var r,l=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(r=e,l=e.default);var c,u="function"==typeof l?l.options:l;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),a&&(u.functional=!0),i&&(u._scopeId=i),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=c):n&&(c=n),c){var d=u.functional,p=d?u.render:u.beforeCreate;d?(u._injectStyles=c,u.render=function(e,t){return c.call(t),p(e,t)}):u.beforeCreate=p?[].concat(p,c):[c]}return{esModule:r,exports:l,options:u}}},function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quill-editor"},[e._t("toolbar"),e._v(" "),a("div",{ref:"editor"})],2)},i=[],o={render:n,staticRenderFns:i};t.a=o}])}))},"959f":function(e,t,a){},9694:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1100px","append-to-body":"","close-on-click-modal":!1,id:"qdbillManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6","inactive-text":"红字",disabled:e.invoiceDiscountFlag},on:{change:e.redInvoiceSwitch},model:{value:e.redInvoiceFlag,callback:function(t){e.redInvoiceFlag=t},expression:"redInvoiceFlag"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveBill("1")}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveBill("2")}}},[e._v("保存并开具")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBillDetailRow}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.redInvoiceFlag},on:{click:e.discountSetUp}},[e._v("折扣")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setDifferenceDeduct}},[e._v("差额")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.mergeDiscount}},[e._v("合并折扣")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.mergeBillDetail}},[e._v("合并明细")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,readonly:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型"},on:{change:e.billTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-select",{attrs:{disabled:"51"==e.form.invType||"52"==e.form.invType},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}},e._l(e.flagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"票种性质",prop:"specialTicket"}},[a("el-select",{model:{value:e.form.specialTicket,callback:function(t){e.$set(e.form,"specialTicket",t)},expression:"form.specialTicket"}},e._l(e.specialTicketOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"特定信息",prop:"tdyslxdm"}},[a("el-select",{model:{value:e.form.tdyslxdm,callback:function(t){e.$set(e.form,"tdyslxdm",t)},expression:"form.tdyslxdm"}},[a("el-option",{attrs:{value:"00",label:"无"}}),a("el-option",{attrs:{value:"03",label:"建筑服务发票"}}),a("el-option",{attrs:{value:"06",label:"不动产经营租赁服务"}})],1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",[e.redInvoiceFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[["81","82"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票代码",maxlength:12,clearable:""},on:{change:e.sourceChange},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票号码",maxlength:20,clearable:""},on:{change:e.sourceChange},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{placeholder:"请输入红字申请单",clearable:""},on:{change:e.sourceChange},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo","string"===typeof t?t.trim():t)},expression:"form.negNativeNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"确认ID",prop:"redBillId"}},[a("el-input",{attrs:{placeholder:"请输入确认ID",clearable:""},model:{value:e.form.redBillId,callback:function(t){e.$set(e.form,"redBillId","string"===typeof t?t.trim():t)},expression:"form.redBillId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:""},model:{value:e.form.shopNo,callback:function(t){e.$set(e.form,"shopNo","string"===typeof t?t.trim():t)},expression:"form.shopNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方地址",prop:"buyAddr"}},[a("el-input",{attrs:{placeholder:"请输入购方地址",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddr,callback:function(t){e.$set(e.form,"buyAddr",t)},expression:"form.buyAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方电话",prop:"buyTel"}},[a("el-input",{attrs:{placeholder:"请输入购方电话",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTel,callback:function(t){e.$set(e.form,"buyTel",t)},expression:"form.buyTel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方开户行",prop:"buyBank"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBank,callback:function(t){e.$set(e.form,"buyBank",t)},expression:"form.buyBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方账号",prop:"buyAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方账号",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAccount,callback:function(t){e.$set(e.form,"buyAccount",t)},expression:"form.buyAccount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"81"==this.form.invType||"82"==this.form.invType,expression:"this.form.invType == '81' || this.form.invType == '82'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入购方邮箱",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"81"==this.form.invType||"82"==this.form.invType,expression:"this.form.invType == '81' || this.form.invType == '82'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入购方手机",maxlength:11,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsCode,size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsCode,callback:function(a){e.$set(t.row,"goodsCode",a)},expression:"scope.row.goodsCode"}})]}}])}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称","min-width":120,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,413564692)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2046099838)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{prop:"preferentialType",label:"优惠政策",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.preferentialTypeChange(t.row.index)}},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}},e._l(e.preferentialTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{change:function(a){return e.taxAmountChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),"03"==e.form.tdyslxdm?a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地增值税项目编号",prop:"tdywxx.jzfw.tdzzsxmbh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入土地增值税项目编号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.jzfw,"tdzzsxmbh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.tdzzsxmbh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑服务发生地",prop:"tdywxx.jzfw.jzfwfsd","label-width":"140px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择建筑服务发生地"},model:{value:e.form.tdywxx.jzfw.jzfwfsd,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzfwfsd",t)},expression:"form.tdywxx.jzfw.jzfwfsd"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"fsdxxdz"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.fsdxxdz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"fsdxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.fsdxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑项目名称",prop:"tdywxx.jzfw.jzxmmc","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入建筑项目名称",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.jzxmmc,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzxmmc","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.jzxmmc"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.jzfw.kdsbz","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输详细地址",clearable:""},model:{value:e.form.tdywxx.jzfw.kdsbz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1)],1):e._e(),"06"==e.form.tdyslxdm?a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择不动产地址"},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"bdcxxdz"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租赁期起止"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.zlqDateRange,callback:function(t){e.zlqDateRange=t},expression:"zlqDateRange"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跨地（市）标志",clearable:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh"}},[a("el-input",{attrs:{placeholder:"请输入产权证书/不动产权证号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择面积单位",clearable:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)],1):e._e(),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注",maxlength:230,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销方地址",prop:"sellAddr"}},[a("el-input",{attrs:{placeholder:"请输入销方地址",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr",t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销方电话",prop:"sellTel"}},[a("el-input",{attrs:{placeholder:"请输入销方电话",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel",t)},expression:"form.sellTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销方开户行",prop:"sellBank"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销方账号",prop:"sellAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方账号",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入制单人",maxlength:10,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountLine,callback:function(t){e.$set(e.discountForm,"discountLine",t)},expression:"discountForm.discountLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"红冲引入",visible:e.introduceOpen,width:"400px","append-to-body":"",id:"introduceModal"},on:{"update:visible":function(t){e.introduceOpen=t},close:e.introduceDialogClose}},[a("div",[a("el-form",{ref:"introduceForm",attrs:{model:e.introduceForm,rules:e.introduceRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.introduceForm.invCode,callback:function(t){e.$set(e.introduceForm,"invCode",t)},expression:"introduceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:8},model:{value:e.introduceForm.invNo,callback:function(t){e.$set(e.introduceForm,"invNo",t)},expression:"introduceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitIntroduce}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.introduceOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("ac1f"),a("1276"),a("caad"),a("d3b7"),a("25f0"),a("b0c0"),a("4de4"),a("5319"),a("a15b"),a("b680"),a("13d5"),a("a434"),a("c85c")),l=a("7e6f"),s=a("c394"),c=a("2ba5"),u=a("b9aa"),d=a("ad11"),p=a("ed08"),h=a("c38a"),m=a("ef6c"),f={name:"qdbillDetailEditModal",components:{ChooseCode:u["default"]},props:{},data:function(){return{cascaderOptions:[],selfAdaptionWidth:null,form:{billNo:"",invType:"81",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",specialTicket:"0",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",buyAddr:"",buyTel:"",buyBank:"",buyAccount:"",sellAddr:"",sellTel:"",sellBank:"",sellAccount:"",redBillId:"",tdyslxdm:"00",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}},shopNo:null},hsbz:"1",sourceHsbz:null,kpdy:null,fplxdesc:"增值税普通发票",billDetailsData:[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"0",preferentialType:""}],open:!1,title:"添加单据管理",isAdd:!0,taxCodeSignRow:0,invoiceTypeOptions:[],flagOptions:[],billDetailModalData:{billTitle:"",billNo:"",billType:"2",detailFlag:"0",taxPlateIdSelect:"",billCode:"",billInvNo:"",billDate:"",billCheckCode:"",billBuyName:"",billBuyTaxNo:"",billBuyAddrTel:"",billBuyBankAccount:"",billSellName:"",snsrsbh:"",sdzdh:"",syhzh:"",billNote:"",detailDate:[{trChecked:!1,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],billTotalMoney:0,billTotalTaxMoney:0,billTotalMoneyWithTax:0,billTotalMoneyWithTaxUpperCase:"",skr:"",checker:"",kpr:""},preferentialTypeOptions:[],taxRateOptions:[],specialTicketOptions:[],invTypeOptions:[],redInvoiceFlag:!1,buyerSearchData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}],goodsNameSearchData:[{value:"苹果"},{value:"橘子"},{value:"火龙果"},{value:"吃的"}],goodsNameInputData:"",rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"blur"}],detailFlag:[{required:!0,message:"清单标志不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"收款人不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],sourceInvNo:[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"}],"tdywxx.bdczl.bdcdz":[{required:!0,message:"不动产地址不能为空",trigger:"blur"}],"tdywxx.bdczl.kdsbz":[{required:!0,message:"跨地（市）标志不能为空",trigger:"blur"}],"tdywxx.jzfw.kdsbz":[{required:!0,message:"跨地（市）标志不能为空",trigger:"blur"}],"tdywxx.bdczl.bdcqzh":[{required:!0,message:"产权证书/不动产权证号不能为空",trigger:"blur"}],"tdywxx.bdczl.dwmj":[{required:!0,message:"面积单位不能为空",trigger:"blur"}],"tdywxx.jzfw.jzfwfsd":[{required:!0,message:"建筑服务发生地不能为空",trigger:"blur"}],"tdywxx.jzfw.jzxmmc":[{required:!0,message:"建筑项目名称不能为空",trigger:"blur"}]},discountOpen:!1,discountForm:{discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},introduceOpen:!1,introduceForm:{invCode:"",invNo:""},introduceRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},zlqDateRange:[]}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e},invoiceDiscountFlag:function(){for(var e=0;e<this.billDetailsData.length;e++){var t=this.billDetailsData[e];if("0"!=t.discountFlag)return!0}return!1}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("preferential_type").then((function(t){e.preferentialTypeOptions=t.data})),this.getDicts("special_ticket").then((function(t){e.specialTicketOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data,e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType)})),Object(c["a"])().then((function(t){200==t.code&&(e.hsbz=t.data.hsbz,e.kpdy=t.data.kpdy,e.sourceHsbz=t.data.hsbz)})),this.formatRegionData(m["regionData"]),this.cascaderOptions=m["regionData"]},mounted:function(){this.billTypeChange()},methods:{billDialogShow:function(){var e=this;this.open=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},dialogClose:function(){this.open=!1},editDialogTitle:function(e){"1"==e?(this.getSubjectInfo(),this.getTaxNoSeller(),this.title="添加单据管理"):this.title="修改单据管理"},getSubjectInfo:function(){var e=this;Object(r["l"])().then((function(t){e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc}))},getTaxNoSeller:function(){var e=this;Object(l["b"])().then((function(t){var a,n,i,o,r=t.nickName,l=t.sellers;if(null!=l&&0!=l.length){for(var s,c=0;c<l.length;c++)if("1"==l[c].status){s=l[c];break}if(null==s)for(var u=0;u<l.length;u++)if(l[u].drawer==r){s=l[u];break}null==s&&(s=l[0]),e.form.cashier=s.payee,e.form.checker=s.checker,e.form.invoicer=s.drawer,e.form.sellAddr=null===(a=s.bankAddrTel)||void 0===a?void 0:a.split(/[ ]+/)[0],e.form.sellTel=null===(n=s.bankAddrTel)||void 0===n?void 0:n.split(/[ ]+/)[1],e.form.sellBank=null===(i=s.bankAccount)||void 0===i?void 0:i.split(/[ ]+/)[0],e.form.sellAccount=null===(o=s.bankAccount)||void 0===o?void 0:o.split(/[ ]+/)[1]}}))},billDialogClose:function(){var e=this;this.$nextTick((function(){e.$refs["form"].clearValidate()})),this.form={billNo:"",invType:"81",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",specialTicket:"0",redBillId:"",tdyslxdm:"00",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},shopNo:null}},this.hsbz=this.sourceHsbz,this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],this.redInvoiceFlag=!1,this.billTypeChange()},fillBillDialog:function(e){var t=this;return Object(r["j"])(e).then((function(e){var a,n,i,o,r,l,s,c,u,d,p,h,m,f,b=e.data;(["81","82"].includes(b.invType)&&b.sourceInvNo&&(b.sourceInvNo=b.sourceInvCode+b.sourceInvNo),b.buyAddr=null===(a=b.buyAddrTel)||void 0===a?void 0:a.split(/[ ]+/)[0],b.buyTel=null===(n=b.buyAddrTel)||void 0===n?void 0:n.split(/[ ]+/)[1],b.buyBank=null===(i=b.buyBankAccount)||void 0===i?void 0:i.split(/[ ]+/)[0],b.buyAccount=null===(o=b.buyBankAccount)||void 0===o?void 0:o.split(/[ ]+/)[1],b.sellAddr=null===(r=b.sellAddrTel)||void 0===r?void 0:r.split(/[ ]+/)[0],b.sellTel=null===(l=b.sellAddrTel)||void 0===l?void 0:l.split(/[ ]+/)[1],b.sellBank=null===(s=b.sellBankAccount)||void 0===s?void 0:s.split(/[ ]+/)[0],b.sellAccount=null===(c=b.sellBankAccount)||void 0===c?void 0:c.split(/[ ]+/)[1],null!==b&&void 0!==b&&null!==(u=b.tdywxx)&&void 0!==u&&null!==(u=u.bdczl)&&void 0!==u&&u.zlqqssj&&null!==b&&void 0!==b&&null!==(d=b.tdywxx)&&void 0!==d&&null!==(d=d.bdczl)&&void 0!==d&&d.zlqzssj)&&(t.zlqDateRange=[null===b||void 0===b||null===(p=b.tdywxx)||void 0===p||null===(p=p.bdczl)||void 0===p?void 0:p.zlqqssj,null===b||void 0===b||null===(h=b.tdywxx)||void 0===h||null===(h=h.bdczl)||void 0===h?void 0:h.zlqzssj]);b.tdywxx?(null!==(m=b.tdywxx)&&void 0!==m&&m.jzfw?b.tdywxx.jzfw.jzfwfsd=b.tdywxx.jzfw.jzfwfsd?b.tdywxx.jzfw.jzfwfsd.split("/"):[]:b.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(f=b.tdywxx)&&void 0!==f&&f.bdczl?(t.zlqDateRange=[b.tdywxx.bdczl.zlqqssj,b.tdywxx.bdczl.zlqzssj],b.tdywxx.bdczl.bdcdz=b.tdywxx.bdczl.bdcdz?b.tdywxx.bdczl.bdcdz.split("/"):[]):b.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}):b.tdywxx={jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}};t.form=b,t.billTypeChange(),parseFloat(b.totalAmount)<0?t.redInvoiceFlag=!0:t.redInvoiceFlag=!1;var g=b.details;t.billDetailsData.length=0;for(var v=0,y=0;y<g.length;y++){var _=g[y];_.index=y,_.rate=void 0!=_.rate?t.specialRateFormalEcho(_):"",null!=_.goodsName&&_.goodsName.length>g[v].goodsName.length&&(v=y),t.billDetailsData.push(_)}t.goodsNameChange(v),t.open=!0,t.$nextTick((function(){t.$refs.form.clearValidate()})),t.title="修改单据管理",t.isAdd=!1}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(d["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,e.addrTel&&(this.form.buyAddr=e.addrTel.split(/[ ]+/)[0],this.form.buyTel=e.addrTel.split(/[ ]+/)[1]),e.bankAccount&&(this.form.buyBank=e.bankAccount.split(/[ ]+/)[0],this.form.buyAccount=e.bankAccount.split(/[ ]+/)[1])},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsCode:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={code:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].code;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(h["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].unit=e.unit,this.billDetailsData[this.taxCodeSignRow].rate=null==e.rate||void 0==e.rate?"":e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),this.billDetailsData[this.taxCodeSignRow].preferentialFlag=e.preferentialPolicy,this.billDetailsData[this.taxCodeSignRow].preferentialType=e.preferentialPolicyType,this.billDetailsData[this.taxCodeSignRow].goodsCode=e.code,this.billDetailsData[this.taxCodeSignRow].goodsName=e.name,"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow-1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow-1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow-1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow+1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow+1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow+1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow+1))},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},billTypeChange:function(){this.fplxdesc=this.selectDictLabel(this.invTypeOptions,this.form.invType),"0"==this.form.invType?(this.rules.buyTaxNo[1].required=!0,this.rules.buyAddrTel[0].required=!0,this.rules.buyBankAccount[0].required=!0):"2"!=this.form.invType&&"51"!=this.form.invType||(this.rules.buyTaxNo[1].required=!1,this.rules.buyAddrTel[0].required=!1,this.rules.buyBankAccount[0].required=!1)},saveBill:function(e){var t=this;this.judgeExistPNLine(-1)?this.msgError("明细行内不能同时存在正负数明细行"):this.$refs["form"].validate((function(a){if(a&&t.validDetailRequired()){t.form.details=Object(p["e"])(t.billDetailsData);for(var n=0;n<t.form.details.length;n++)"0"!=t.form.details[n].rate||t.form.details[n].preferentialType||(t.form.details[n].preferentialFlag="0",t.form.details[n].preferentialType="",t.form.details[n].preferentialNote="",t.form.details[n].taxZeroRate="3");for(var i=0;i<t.form.details.length;i++)t.form.details[i].rowIndex=t.form.details[i].index;t.form.buyAddrTel=(t.form.buyAddr||"")+" "+(t.form.buyTel||""),t.form.buyBankAccount=(t.form.buyBank||"")+" "+(t.form.buyAccount||""),t.form.sellAddrTel=(t.form.sellAddr||"")+" "+(t.form.sellTel||""),t.form.sellBankAccount=(t.form.sellBank||"")+" "+(t.form.sellAccount||"");var o,l,s=Object(p["e"])(t.form);if(["81","82"].includes(s.invType))s.sourceInvCode=null===(o=s.sourceInvNo)||void 0===o?void 0:o.substr(0,12),s.sourceInvNo=null===(l=s.sourceInvNo)||void 0===l?void 0:l.substr(12);s.tdywxx.jzfw.jzfwfsd=s.tdywxx.jzfw.jzfwfsd.join("/"),s.tdywxx.bdczl.bdcdz=s.tdywxx.bdczl.bdcdz.join("/"),"06"==s.tdyslxdm&&(s.tdywxx.bdczl.zlqqssj=t.zlqDateRange[0],s.tdywxx.bdczl.zlqzssj=t.zlqDateRange[1]),t.isAdd?Object(r["a"])(s).then((function(a){200===a.code&&(t.msgSuccess("新增成功"),t.$emit("updateBillTable"),"2"==e?(t.open=!1,t.$emit("openBill",a.data)):t.open=!1)})):Object(r["v"])(s).then((function(a){200===a.code&&(t.msgSuccess("修改成功"),t.$emit("updateBillTable"),"2"==e?(t.open=!1,t.$emit("openBill",{id:t.form.id,invType:t.form.invType,bizDate:t.form.bizDate})):t.open=!1)})),console.log(t.form)}}))},addBillDetailRow:function(){if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"0",preferentialType:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)}}else if(""!=n&&null!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if("-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&(""!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=i&&(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&(""!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=o&&(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if("1"==this.billDetailsData[e].discountFlag){if(Math.abs(parseFloat(this.billDetailsData[e].amountWithTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithTax="");if(Math.abs(parseFloat(this.billDetailsData[e].amountWithoutTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithoutTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithoutTax="")}var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t||null==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8)}"1"!=this.billDetailsData[e].discountFlag&&this.judgeExistPNLine(e),this.billDetailsData[e].differenceDeduct="",this.useCalc()},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].rate=this.billDetailsData[e].rate:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].rate=this.billDetailsData[e].rate),""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].rate=this.billDetailsData[e].rate,this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e-1].amountWithoutTax=(parseFloat(this.billDetailsData[e-1].amountWithTax)-parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e+1].amountWithoutTax=(parseFloat(this.billDetailsData[e+1].amountWithTax)-parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2))):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e-1].amountWithTax=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)+parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e+1].amountWithTax=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2)))),this.billDetailsData[e].differenceDeduct="",this.useCalc()},preferentialTypeChange:function(e){this.billDetailsData[e].preferentialType?(["免税","不征税"].includes(this.billDetailsData[e].preferentialType)&&(this.billDetailsData[e].rate="0","免税"==this.billDetailsData[e].preferentialType?this.billDetailsData[e].taxZeroRate="1":this.billDetailsData[e].taxZeroRate="2"),this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].taxZeroRate=""):(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].taxZeroRate=""),this.billDetailsData[e].preferentialNote=this.billDetailsData[e].preferentialType},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.billDetailsData[e].differenceDeduct="",this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=e>=0?e:0,a=!1,n=0;n<this.billDetailsData.length;n++)if(parseFloat(this.billDetailsData[n].amountWithTax)*parseFloat(this.billDetailsData[t].amountWithTax)<0&&"1"!=this.billDetailsData[n].discountFlag){a=!0;break}return a&&e>=0&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行")),a},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow-1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow+1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow+1))},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discountLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(p["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.discountFlag="1",a.standard="",a.unit="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1,this.useCalc()}else this.msgError("请输入折扣金额或折扣率")},sourceChange:function(){var e=this;if(""!=this.form.sourceInvNo&&""!=this.form.sourceInvCode){var t={sourceInvNo:this.form.sourceInvNo,sourceInvCode:this.form.sourceInvCode};gteXXXInfo(t).then((function(t){0!=t.data.length||e.msgError(t.msg)}))}},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){""!=this.deductForm.differenceDeductAmount?""!=this.billDetailsData[0].amountWithTax?Math.abs(parseFloat(this.deductForm.differenceDeductAmount))>Math.abs(parseFloat(this.billDetailsData[0].amountWithTax))?this.msgError("所填扣除额必须小于等于含税金额"):(this.billDetailsData[0].taxAmount=(parseFloat((parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.deductForm.differenceDeductAmount)).toFixed(2))*(parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)/(1+parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)).toFixed(2),this.billDetailsData[0].amountWithoutTax=(parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.billDetailsData[0].taxAmount)).toFixed(2),this.billDetailsData[0].differenceDeduct=this.deductForm.differenceDeductAmount,this.useCalc(),this.deductOpen=!1):this.msgError("请先填写含税金额"):this.msgError("请输入扣除额")},redInvoiceSwitch:function(){var e=this;this.redInvoiceFlag||(this.redInvoiceFlag=!0),this.redInvoiceFlag&&(this.introduceOpen=!0,this.$nextTick((function(){e.$refs.introduceForm.clearValidate()})))},introduceDialogClose:function(){parseFloat(this.form.totalAmount)>=0&&(this.redInvoiceFlag=!1),this.introduceOpen=!1,this.introduceForm={invCode:"",invNo:"",invCodeNo:""}},submitIntroduce:function(){var e=this;this.$refs.introduceForm.validate((function(t){t&&(e.introduceForm.invCodeNo=e.introduceForm.invCode+"_"+e.introduceForm.invNo,Object(s["s"])(e.introduceForm).then((function(t){if(200==t.code){var a,n,i=t.data.details,o=e.form.billNo,r=t.data;if(r.tdywxx)null!==(a=r.tdywxx)&&void 0!==a&&a.jzfw?r.tdywxx.jzfw.jzfwfsd=r.tdywxx.jzfw.jzfwfsd?r.tdywxx.jzfw.jzfwfsd.split("/"):[]:r.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(n=r.tdywxx)&&void 0!==n&&n.bdczl?(e.zlqDateRange=[r.tdywxx.bdczl.zlqqssj,r.tdywxx.bdczl.zlqzssj],r.tdywxx.bdczl.bdcdz=r.tdywxx.bdczl.bdcdz?r.tdywxx.bdczl.bdcdz.split("/"):[]):r.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null};else r.tdywxx={jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}};e.form=t.data,""!=t.data.billNo&&void 0!=t.data.billNo&&null!=t.data.billNo||(e.form.billNo=o),e.billDetailsData.length=0;for(var l=0;l<i.length;l++){var s=i[l];s.index=l,parseFloat(s.amountWithTax)>0&&(s.amountWithTax="-"+s.amountWithTax,s.amountWithTax="-"+s.amountWithTax,s.taxAmount="-"+s.taxAmount),e.billDetailsData.push(s)}e.introduceDialogClose()}else e.msgError(t.msg)})).catch((function(e){console.log(e)})))}))},validIsNumber:function(e){e.target.value=Object(h["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(h["a"])(e.target.value)},goodsNameChange:function(e){var t=this.billDetailsData[e].goodsName;"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].goodsName=t:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].goodsName=t),this.selfAdaptionWidth=Object(h["c"])("",t)},validDetailRequired:function(){var e,t=Object(o["a"])(this.billDetailsData);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(""==a.goodsName)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的货物名称为空"),!1;if(""==a.amountWithoutTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的不含税金额为空"),!1;if(""==a.amountWithTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的含税金额为空"),!1;if(""==a.rate)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的税率为空"),!1}}catch(n){t.e(n)}finally{t.f()}return!0},fillBillDialogByInvCodeNo:function(e){var t=this;return Object(s["q"])(e).then((function(e){var a=e.data;if(null==a)return t.msgError("未找到此发票"),!1;t.form.billNo=a.billNo,t.form.invType=a.invType,t.billTypeChange(),t.form.detailFlag=a.detailFlag,t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,parseFloat(a.totalAmount)<0?t.redInvoiceFlag=!0:t.redInvoiceFlag=!1,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer,t.form.redBillId=a.redBillId;var n=a.details;t.billDetailsData.length=0;for(var i=0,o=0;o<n.length;o++){var r=n[o];r.index=o,r.rate=void 0!=r.rate?r.rate.toString():"",null!=r.goodsName&&r.goodsName.length>n[i].goodsName.length&&(i=o),t.billDetailsData.push(r)}t.goodsNameChange(i),t.open=!0,t.title="添加单据管理",t.getBillNo()}))},mergeDiscount:function(){for(var e=0,t=this.billDetailsData.length;e<t;e++)"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithTax)+parseFloat(this.billDetailsData[e+1].amountWithTax)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].amountWithoutTax)).toFixed(2),""!=this.billDetailsData[e].number&&null!=this.billDetailsData[e].number&&(this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8)),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2));this.billDetailsData=this.billDetailsData.filter((function(e,t){return"1"!=e.discountFlag}));for(var a=0,n=this.billDetailsData.length;a<n;a++)this.billDetailsData[a].discountFlag="0",this.billDetailsData[a].index=a},mergeBillDetail:function(){for(var e=!0,t=parseFloat(this.billDetailsData[0].amountWithTax),a=0,n=1,i=this.billDetailsData.length;n<i;n++)parseFloat(this.billDetailsData[n].amountWithTax)>t&&(t=parseFloat(this.billDetailsData[n].amountWithTax),a=n),e&&this.billDetailsData[0].rate!=this.billDetailsData[n].rate&&(e=!1);if(e){for(var o=0,r=0,l=0,s=0,c=0,u=this.billDetailsData.length;c<u;c++)o+=""==this.billDetailsData[c].amountWithTax?0:parseFloat(this.billDetailsData[c].amountWithTax),r+=""==this.billDetailsData[c].amountWithoutTax?0:parseFloat(this.billDetailsData[c].amountWithoutTax),l+=""==this.billDetailsData[c].taxAmount?0:parseFloat(this.billDetailsData[c].taxAmount),s+=""==this.billDetailsData[c].number?0:parseFloat(this.billDetailsData[c].number);var d=Object(p["e"])(this.billDetailsData[a]);d.index=0,d.discountFlag="0",d.amountWithTax=o.toFixed(2),d.amountWithoutTax=r.toFixed(2),d.taxAmount=l.toFixed(2),d.number=s,d.taxPrice=(parseFloat(o.toFixed(2))/s).toFixed(8),d.withoutTaxPrice=(parseFloat(r.toFixed(2))/s).toFixed(8),this.billDetailsData=[],this.billDetailsData.push(d)}else this.msgError("存在税率不一样的明细，不能合并")},formatRegionData:function(e){for(var t=0;t<e.length;t++)e[t].value=e[t].label,e[t].children&&this.formatRegionData(e[t].children)}}},b=f,g=(a("1145"),a("2877")),v=Object(g["a"])(b,n,i,!1,null,null,null);t["default"]=v.exports},"981b":function(e,t,a){},"992c":function(e,t,a){},"994d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px",rules:e.rules}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",{staticStyle:{display:"flex"}},[a("el-col",{attrs:{span:7}}),a("el-col",{attrs:{span:10}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:7}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate","string"===typeof t?t.trim():t)},expression:"form.invDate"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机打代码",prop:"invCode"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机打号码",prop:"invNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.machineNo,callback:function(t){e.$set(e.form,"machineNo","string"===typeof t?t.trim():t)},expression:"form.machineNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税控码"}},[a("el-input",{staticStyle:{height:"114px"},attrs:{type:"textarea",size:"mini",readonly:""},model:{value:e.form.pwdCode,callback:function(t){e.$set(e.form,"pwdCode",t)},expression:"form.pwdCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买方名称",prop:"buyName"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.vehicleType,callback:function(t){e.$set(e.form,"vehicleType","string"===typeof t?t.trim():t)},expression:"form.vehicleType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.factoryNo,callback:function(t){e.$set(e.form,"factoryNo","string"===typeof t?t.trim():t)},expression:"form.factoryNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.origin,callback:function(t){e.$set(e.form,"origin","string"===typeof t?t.trim():t)},expression:"form.origin"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合格证号",prop:"eligibilityNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.eligibilityNo,callback:function(t){e.$set(e.form,"eligibilityNo","string"===typeof t?t.trim():t)},expression:"form.eligibilityNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进口证明书号",prop:"importCertificateNumber"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.importCertificateNumber,callback:function(t){e.$set(e.form,"importCertificateNumber","string"===typeof t?t.trim():t)},expression:"form.importCertificateNumber"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商检单号",prop:"commodityInspectionNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.commodityInspectionNo,callback:function(t){e.$set(e.form,"commodityInspectionNo","string"===typeof t?t.trim():t)},expression:"form.commodityInspectionNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号码",prop:"engineNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.engineNo,callback:function(t){e.$set(e.form,"engineNo","string"===typeof t?t.trim():t)},expression:"form.engineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆识别代号",prop:"vehicleIdentificationCode"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.vehicleIdentificationCode,callback:function(t){e.$set(e.form,"vehicleIdentificationCode","string"===typeof t?t.trim():t)},expression:"form.vehicleIdentificationCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"价税合计"}},[a("el-input",{attrs:{size:"mini",readonly:""},on:{change:e.totalAmountChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount","string"===typeof t?t.trim():t)},expression:"form.totalAmount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"大写￥"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalMoneyUp,callback:function(t){e.$set(e.form,"totalMoneyUp","string"===typeof t?t.trim():t)},expression:"form.totalMoneyUp"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销货单位名称",prop:"sellName"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"sellTel"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel","string"===typeof t?t.trim():t)},expression:"form.sellTel"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"sellTaxNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"账号",prop:"sellAccount"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址",prop:"sellAddr"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr","string"===typeof t?t.trim():t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开户银行",prop:"sellBank"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"80px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税率或征收率",prop:"rate"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择税率",readonly:""},model:{value:e.form.rate,callback:function(t){e.$set(e.form,"rate",t)},expression:"form.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税额",prop:"totalTaxAmount"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount","string"===typeof t?t.trim():t)},expression:"form.totalTaxAmount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"主管税务机关及代码"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.taxAuthorityName,callback:function(t){e.$set(e.form,"taxAuthorityName","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityName"}}),a("br"),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.taxAuthorityCode,callback:function(t){e.$set(e.form,"taxAuthorityCode","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"不含税价",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"form.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"完税凭证号码",prop:"completionVoucherNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.completionVoucherNo,callback:function(t){e.$set(e.form,"completionVoucherNo","string"===typeof t?t.trim():t)},expression:"form.completionVoucherNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"吨位",prop:"tonnage"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.tonnage,callback:function(t){e.$set(e.form,"tonnage","string"===typeof t?t.trim():t)},expression:"form.tonnage"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"限乘人数",prop:"limitedNumberOfPassengers"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.limitedNumberOfPassengers,callback:function(t){e.$set(e.form,"limitedNumberOfPassengers","string"===typeof t?t.trim():t)},expression:"form.limitedNumberOfPassengers"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产企业名称",prop:""}},[a("el-input",{attrs:{placeholder:"",readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{maxlength:10,readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note","string"===typeof t?t.trim():t)},expression:"form.note"}})],1)],1)],1)],1)],1)])],1)},i=[],o=a("ade3"),r=(a("b680"),a("d3b7"),a("25f0"),a("2f3d")),l=a("ed08"),s=(a("c38a"),{name:"historyVehicleDetailShowModal",props:{},data:function(){var e;return{form:(e={invType:"",blockChain:null,buyAddrTel:null,buyBankAccount:null,buyName:null,buyTaxNo:null,cashier:null,checkCode:null,checkMsg:null,checked:null,checker:null,createBy:null,id:null,invCode:null,invDate:null,invNo:null},Object(o["a"])(e,"invType",null),Object(o["a"])(e,"invoicer",null),Object(o["a"])(e,"machineNo",null),Object(o["a"])(e,"note",null),Object(o["a"])(e,"sellName",null),Object(o["a"])(e,"sellTaxNo",null),Object(o["a"])(e,"sellAddr",null),Object(o["a"])(e,"sellBank",null),Object(o["a"])(e,"sellTel",null),Object(o["a"])(e,"sellAccount",null),Object(o["a"])(e,"sourceInvCode",null),Object(o["a"])(e,"sourceInvNo",null),Object(o["a"])(e,"state",null),Object(o["a"])(e,"totalAmount",null),Object(o["a"])(e,"totalAmountWithoutTax",null),Object(o["a"])(e,"totalMoneyUp",null),Object(o["a"])(e,"totalTaxAmount",null),Object(o["a"])(e,"updateBy",null),Object(o["a"])(e,"updateTime",null),Object(o["a"])(e,"vehicleType",null),Object(o["a"])(e,"factoryNo",null),Object(o["a"])(e,"origin",null),Object(o["a"])(e,"eligibilityNo",null),Object(o["a"])(e,"importCertificateNumber",null),Object(o["a"])(e,"commodityInspectionNo",null),Object(o["a"])(e,"engineNo",null),Object(o["a"])(e,"vehicleIdentificationCode",null),Object(o["a"])(e,"rate",null),Object(o["a"])(e,"taxAuthorityName",null),Object(o["a"])(e,"taxAuthorityCode",null),Object(o["a"])(e,"completionVoucherNo",null),Object(o["a"])(e,"tonnage",null),Object(o["a"])(e,"limitedNumberOfPassengers",null),e),fplxdesc:"机动车销售统一发票",open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],rateOptions:[],rules:{buyName:[],buyTaxNo:[],vehicleType:[],factoryNo:[],origin:[]}}},watch:{},computed:{},created:function(){var e=this;Object(r["g"])("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),Object(r["g"])("income_inv_status").then((function(t){e.stateOptions=t.data})),Object(r["g"])("income_checked").then((function(t){e.checkedOptions=t.data})),Object(r["g"])("income_source").then((function(t){e.dataSourceOptions=t.data})),Object(r["g"])("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),Object(r["g"])("tax_rate").then((function(t){e.rateOptions=t.data}))},mounted:function(){},methods:{fillInvoiceDialog:function(e){var t=this;return Object(r["e"])(e).then((function(e){var a=e.data,n=a.details[0];for(var i in t.form=Object(l["e"])(a),delete t.form.details,null!=a.sellBankAccount&&(t.form.sellBank=a.sellBankAccount.split(" ")[0],t.form.sellAccount=a.sellBankAccount.split(" ")[1]),null!=a.sellAddrTel&&(t.form.sellAddr=a.sellAddrTel.split(" ")[0],t.form.sellTel=a.sellAddrTel.split(" ")[1]),n)t.form[i]=n[i];t.form.totalMoneyUp=t.swapper(t.form.totalAmount),t.form.rate+="",t.open=!0,t.title="发票详情",t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},openDialog:function(){this.open=!0,this.title="添加单据",this.$refs.form.clearValidate()},totalAmountChange:function(){this.form.totalMoneyUp=this.swapper(this.form.totalAmount)}}}),c=s,u=(a("4e2d"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"3fd8a42e",null);t["default"]=d.exports},"9b39":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return p}));var n=a("b775"),i=a("4328"),o=a.n(i);function r(e){return Object(n["a"])({url:"/approve/act/list",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/approve/act/listAll",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/approve/act/"+e,method:"get"})}function c(e){return Object(n["a"])({url:"/approve/act",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/approve/act",method:"put",data:e})}function d(e){return Object(n["a"])({url:"/approve/act/"+e,method:"delete"})}function p(e){return Object(n["a"])({url:"/approve/act/export",method:"get",params:e,paramsSerializer:function(e){return o.a.stringify(e,{arrayFormat:"repeat"})}})}},"9b8f":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("5319");var n,i,o={created:function(){var e=this.$route,t=e.params,a=e.query,n=t.path;this.$router.replace({path:"/"+n,query:a})},render:function(e){return e()}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},"9bb1":function(e,t,a){},"9cb1":function(e,t,a){"use strict";a("5336")},"9d99":function(e,t,a){},"9e6a":function(e,t,a){"use strict";var n=a("d233"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},r=function(e,t){for(var a={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=t.parameterLimit===1/0?void 0:t.parameterLimit,l=n.split(t.delimiter,r),s=0;s<l.length;++s){var c,u,d=l[s],p=d.indexOf("]="),h=-1===p?d.indexOf("="):p+1;-1===h?(c=t.decoder(d,o.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,h),o.decoder),u=t.decoder(d.slice(h+1),o.decoder)),i.call(a,c)?a[c]=[].concat(a[c]).concat(u):a[c]=u}return a},l=function(e,t,a){for(var n=t,i=e.length-1;i>=0;--i){var o,r=e[i];if("[]"===r&&a.parseArrays)o=[].concat(n);else{o=a.plainObjects?Object.create(null):{};var l="["===r.charAt(0)&&"]"===r.charAt(r.length-1)?r.slice(1,-1):r,s=parseInt(l,10);a.parseArrays||""!==l?!isNaN(s)&&r!==l&&String(s)===l&&s>=0&&a.parseArrays&&s<=a.arrayLimit?(o=[],o[s]=n):"__proto__"!==l&&(o[l]=n):o={0:n}}n=o}return n},s=function(e,t,a){if(e){var n=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,s=o.exec(n),c=s?n.slice(0,s.index):n,u=[];if(c){if(!a.plainObjects&&i.call(Object.prototype,c)&&!a.allowPrototypes)return;u.push(c)}var d=0;while(null!==(s=r.exec(n))&&d<a.depth){if(d+=1,!a.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!a.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+n.slice(s.index)+"]"),l(u,t,a)}};e.exports=function(e,t){var a=t?n.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!==typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"===typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:o.delimiter,a.depth="number"===typeof a.depth?a.depth:o.depth,a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:o.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"===typeof a.decoder?a.decoder:o.decoder,a.allowDots="boolean"===typeof a.allowDots?a.allowDots:o.allowDots,a.plainObjects="boolean"===typeof a.plainObjects?a.plainObjects:o.plainObjects,a.allowPrototypes="boolean"===typeof a.allowPrototypes?a.allowPrototypes:o.allowPrototypes,a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:o.parameterLimit,a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"===typeof e)return a.plainObjects?Object.create(null):{};for(var i="string"===typeof e?r(e,a):e,l=a.plainObjects?Object.create(null):{},c=Object.keys(i),u=0;u<c.length;++u){var d=c[u],p=s(d,i[d],a);l=n.merge(l,p,a)}return n.compact(l)}},"9e9f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[e.isRed?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveBill}},[e._v("保存")]),e.isRed?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleOpen}},[e._v("开具")]):e._e()],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px",rules:e.rules}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",{staticStyle:{display:"flex"}},[a("el-col",{attrs:{span:7}}),a("el-col",{attrs:{span:10}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:7}})],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"80px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买方名称及身份证号/组织机构代码",prop:"buyName"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}}),a("br"),a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard","string"===typeof t?t.trim():t)},expression:"form.idCard"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:"3",clearable:"",maxlength:20},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1)],1),a("br"),a("el-input",{attrs:{type:"hidden",size:"mini"},model:{value:e.form.taxTypeCode,callback:function(t){e.$set(e.form,"taxTypeCode","string"===typeof t?t.trim():t)},expression:"form.taxTypeCode"}}),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.vehicleType,callback:function(t){e.$set(e.form,"vehicleType","string"===typeof t?t.trim():t)},expression:"form.vehicleType"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:e.chooseCode},slot:"suffix"})])],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:100},model:{value:e.form.factoryNo,callback:function(t){e.$set(e.form,"factoryNo","string"===typeof t?t.trim():t)},expression:"form.factoryNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:100},model:{value:e.form.origin,callback:function(t){e.$set(e.form,"origin","string"===typeof t?t.trim():t)},expression:"form.origin"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合格证号",prop:"eligibilityNo"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:100},model:{value:e.form.eligibilityNo,callback:function(t){e.$set(e.form,"eligibilityNo","string"===typeof t?t.trim():t)},expression:"form.eligibilityNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进口证明书号",prop:"importCertificateNumber"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.importCertificateNumber,callback:function(t){e.$set(e.form,"importCertificateNumber","string"===typeof t?t.trim():t)},expression:"form.importCertificateNumber"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商检单号",prop:"commodityInspectionNo"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:100},model:{value:e.form.commodityInspectionNo,callback:function(t){e.$set(e.form,"commodityInspectionNo","string"===typeof t?t.trim():t)},expression:"form.commodityInspectionNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号码",prop:"engineNo"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:20},model:{value:e.form.engineNo,callback:function(t){e.$set(e.form,"engineNo","string"===typeof t?t.trim():t)},expression:"form.engineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆识别代号",prop:"vehicleIdentificationCode"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:17},model:{value:e.form.vehicleIdentificationCode,callback:function(t){e.$set(e.form,"vehicleIdentificationCode","string"===typeof t?t.trim():t)},expression:"form.vehicleIdentificationCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"价税合计",prop:"totalAmount"}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{change:e.totalAmountChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount","string"===typeof t?t.trim():t)},expression:"form.totalAmount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"大写￥"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalMoneyUp,callback:function(t){e.$set(e.form,"totalMoneyUp","string"===typeof t?t.trim():t)},expression:"form.totalMoneyUp"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销货单位名称",prop:"sellName"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"sellTel"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:40},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel","string"===typeof t?t.trim():t)},expression:"form.sellTel"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"sellTaxNo"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:20},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"账号",prop:"sellAccount"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:40},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址",prop:"sellAddr"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:80},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr","string"===typeof t?t.trim():t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开户银行",prop:"sellBank"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:80},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"80px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税率或征收率",prop:"rate"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择税率"},on:{change:e.rateChange},model:{value:e.form.rate,callback:function(t){e.$set(e.form,"rate",t)},expression:"form.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税额",prop:"totalTaxAmount"}},[a("el-input",{attrs:{size:"mini",readonly:"readonly",clearable:""},on:{change:e.totalTaxAmountChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount","string"===typeof t?t.trim():t)},expression:"form.totalTaxAmount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"主管税务机关及代码"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:100},model:{value:e.form.taxAuthorityName,callback:function(t){e.$set(e.form,"taxAuthorityName","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityName"}}),a("br"),a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.taxAuthorityCode,callback:function(t){e.$set(e.form,"taxAuthorityCode","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"不含税价",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{size:"mini",readonly:"readonly",clearable:""},on:{change:e.totalAmountWithoutTaxChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"form.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"完税凭证号码",prop:"completionVoucherNo"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:50},model:{value:e.form.completionVoucherNo,callback:function(t){e.$set(e.form,"completionVoucherNo","string"===typeof t?t.trim():t)},expression:"form.completionVoucherNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"吨位",prop:"tonnage"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:20},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.tonnage,callback:function(t){e.$set(e.form,"tonnage","string"===typeof t?t.trim():t)},expression:"form.tonnage"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"限乘人数",prop:"limitedNumberOfPassengers"}},[a("el-input",{attrs:{size:"mini",clearable:"",maxlength:10},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.limitedNumberOfPassengers,callback:function(t){e.$set(e.form,"limitedNumberOfPassengers","string"===typeof t?t.trim():t)},expression:"form.limitedNumberOfPassengers"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产企业名称",prop:"factoryName"}},[a("el-input",{attrs:{placeholder:"",clearable:"",maxlength:50},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.factoryName,callback:function(t){e.$set(e.form,"factoryName","string"===typeof t?t.trim():t)},expression:"form.factoryName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注",maxlength:10,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note","string"===typeof t?t.trim():t)},expression:"form.note"}})],1)],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)]),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("ade3"),r=(a("d3b7"),a("25f0"),a("b680"),a("b64b"),a("3ca3"),a("ddb0"),a("c85c")),l=a("6f35"),s=a("0cb6"),c=a("e98e"),u=a("b175"),d=(a("ed08"),a("c38a")),p={name:"vehicleInvoiceDetailEditModal",props:{},components:{ChooseCode:u["default"]},data:function(){var e;return{functionName:"",showProgress:!1,loadingTime:null,form:(e={billNo:"",invType:"12",blockChain:null,buyAddrTel:null,buyBankAccount:null,buyName:null,buyTaxNo:null,idCardNo:null,cashier:null,checkCode:null,checkMsg:null,checked:null,checker:null,createBy:null,id:null,invCode:null,invDate:null,invNo:null},Object(o["a"])(e,"invType",null),Object(o["a"])(e,"invoicer",null),Object(o["a"])(e,"machineNo",null),Object(o["a"])(e,"note","一车一票"),Object(o["a"])(e,"sellName",null),Object(o["a"])(e,"sellTaxNo",null),Object(o["a"])(e,"sellAddr",null),Object(o["a"])(e,"sellBank",null),Object(o["a"])(e,"sellTel",null),Object(o["a"])(e,"sellAccount",null),Object(o["a"])(e,"sourceInvCode",null),Object(o["a"])(e,"sourceInvNo",null),Object(o["a"])(e,"state",null),Object(o["a"])(e,"totalAmount",null),Object(o["a"])(e,"totalAmountWithoutTax",null),Object(o["a"])(e,"totalMoneyUp",null),Object(o["a"])(e,"totalTaxAmount",null),Object(o["a"])(e,"updateBy",null),Object(o["a"])(e,"updateTime",null),Object(o["a"])(e,"vehicleType",null),Object(o["a"])(e,"factoryNo",null),Object(o["a"])(e,"factoryName",null),Object(o["a"])(e,"origin",null),Object(o["a"])(e,"eligibilityNo",null),Object(o["a"])(e,"importCertificateNumber",null),Object(o["a"])(e,"commodityInspectionNo",null),Object(o["a"])(e,"engineNo",null),Object(o["a"])(e,"vehicleIdentificationCode",null),Object(o["a"])(e,"rate",null),Object(o["a"])(e,"taxAuthorityName",null),Object(o["a"])(e,"taxAuthorityCode",null),Object(o["a"])(e,"completionVoucherNo",null),Object(o["a"])(e,"tonnage",null),Object(o["a"])(e,"limitedNumberOfPassengers",null),Object(o["a"])(e,"taxTypeCode",null),e),fplxdesc:"机动车销售统一发票",open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],rateOptions:[],rules:{buyName:[{required:!0,message:"购买方名称不能为空",trigger:"blur"}],buyTaxNo:[{required:!0,message:"纳税人识别号不能为空",trigger:"blur"}],vehicleType:[{required:!0,message:"车辆类型不能为空",trigger:"blur"}],factoryNo:[{required:!0,message:"厂牌型号不能为空",trigger:"blur"}],origin:[{required:!0,message:"产地不能为空",trigger:"blur"}],vehicleIdentificationCode:[{required:!0,message:"车架号码不能为空",trigger:"blur"}],totalAmount:[{required:!0,message:"价税合计不能为空",trigger:"blur"}],rate:[{required:!0,message:"增值税税率或征收率不能为空",trigger:"blur"}],totalTaxAmount:[{required:!0,message:"增值税税额不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}],factoryName:[{required:!0,message:"生产企业不能为空",trigger:"blur"}]},isAdd:!1,isRed:!1,stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null}}},watch:{},computed:{},created:function(){var e=this;this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data}))},mounted:function(){},methods:{resetDialog:function(){var e;this.form=(e={billNo:"",invType:"12",blockChain:null,buyAddrTel:null,buyBankAccount:null,buyName:null,buyTaxNo:null,idCardNo:null,cashier:null,checkCode:null,checkMsg:null,checked:null,checker:null,createBy:null,id:null,invCode:null,invDate:null,invNo:null},Object(o["a"])(e,"invType",null),Object(o["a"])(e,"invoicer",null),Object(o["a"])(e,"machineNo",null),Object(o["a"])(e,"note","一车一票"),Object(o["a"])(e,"sellName",null),Object(o["a"])(e,"sellTaxNo",null),Object(o["a"])(e,"sellAddr",null),Object(o["a"])(e,"sellBank",null),Object(o["a"])(e,"sellTel",null),Object(o["a"])(e,"sellAccount",null),Object(o["a"])(e,"sourceInvCode",null),Object(o["a"])(e,"sourceInvNo",null),Object(o["a"])(e,"state",null),Object(o["a"])(e,"totalAmount",null),Object(o["a"])(e,"totalAmountWithoutTax",null),Object(o["a"])(e,"totalMoneyUp",null),Object(o["a"])(e,"totalTaxAmount",null),Object(o["a"])(e,"updateBy",null),Object(o["a"])(e,"updateTime",null),Object(o["a"])(e,"vehicleType",null),Object(o["a"])(e,"factoryNo",null),Object(o["a"])(e,"factoryName",null),Object(o["a"])(e,"origin",null),Object(o["a"])(e,"eligibilityNo",null),Object(o["a"])(e,"importCertificateNumber",null),Object(o["a"])(e,"commodityInspectionNo",null),Object(o["a"])(e,"engineNo",null),Object(o["a"])(e,"vehicleIdentificationCode",null),Object(o["a"])(e,"rate",null),Object(o["a"])(e,"taxAuthorityName",null),Object(o["a"])(e,"taxAuthorityCode",null),Object(o["a"])(e,"completionVoucherNo",null),Object(o["a"])(e,"tonnage",null),Object(o["a"])(e,"limitedNumberOfPassengers",null),Object(o["a"])(e,"taxTypeCode",null),e)},getSubjectInfo:function(){var e=this;Object(r["l"])().then((function(t){e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc}))},getTaxNoSeller:function(){var e=this;Object(r["m"])().then((function(t){var a=t.sellers;if(null!=a&&0!=a.length){for(var n,i=0;i<a.length;i++)if("1"==a[i].status){n=a[i];break}null==n&&(n=a[0]),e.form.invoicer=n.drawer}}))},fillBillDialog:function(e){var t=this;return Object(l["e"])(e).then((function(e){t.resetDialog();var a=e.data;a.invType="12",a.rate=a.rate?a.rate.toString():"",t.form=a,t.form.totalMoneyUp=t.swapper(t.form.totalAmount),t.open=!0,t.title="发票详情",t.$nextTick((function(){t.$refs.form.clearValidate()})),t.isAdd=!1}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},openDialog:function(){var e=this;this.resetDialog(),this.open=!0,this.title="添加单据",this.$nextTick((function(){e.$refs.form.clearValidate()})),this.getBillNo(),this.getSubjectInfo(),this.getTaxNoSeller(),this.isAdd=!0},getBillNo:function(){this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS")},totalAmountChange:function(){if(this.form.totalMoneyUp=this.swapper(this.form.totalAmount),this.form.rate){var e=this.getRealRate(this.form.rate);this.form.totalAmountWithoutTax=(this.form.totalAmount/(1+e/100)).toFixed(2),this.form.totalTaxAmount=(parseFloat(this.form.totalAmount)-parseFloat(this.form.totalAmountWithoutTax)).toFixed(2)}},totalTaxAmountChange:function(){if(this.form.rate&&this.form.totalTaxAmount){var e=this.getRealRate(this.form.rate);this.form.totalAmountWithoutTax=0==e?this.form.totalTaxAmount:this.form.totalTaxAmount/(e/100),this.form.totalAmount=parseFloat(this.form.totalAmountWithoutTax)+parseFloat(this.form.totalTaxAmount),this.form.totalMoneyUp=this.swapper(this.form.totalAmount)}},totalAmountWithoutTaxChange:function(){if(this.form.rate&&this.form.totalAmountWithoutTax){var e=this.getRealRate(this.form.rate);this.form.totalTaxAmount=(this.form.totalAmountWithoutTax*e/100).toFixed(2),this.form.totalAmount=parseFloat(this.form.totalAmountWithoutTax)+parseFloat(this.form.totalTaxAmount),this.form.totalMoneyUp=this.swapper(this.form.totalAmount)}},rateChange:function(){if(this.form.rate){var e=this.getRealRate(this.form.rate);this.form.totalAmountWithoutTax?(this.form.totalTaxAmount=(this.form.totalAmountWithoutTax*e/100).toFixed(2),this.form.totalAmount=parseFloat(this.form.totalAmountWithoutTax)+parseFloat(this.form.totalTaxAmount),this.form.totalMoneyUp=this.swapper(this.form.totalAmount)):this.form.totalAmount&&(this.form.totalAmountWithoutTax=(this.form.totalAmount/(1+e/100)).toFixed(2),this.form.totalTaxAmount=(parseFloat(this.form.totalAmount)-parseFloat(this.form.totalAmountWithoutTax)).toFixed(2))}},getRealRate:function(e){return e?"免税"==e||"不征税"==e?0:e:0},validIsNumber:function(e){e.target.value=Object(d["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(d["a"])(e.target.value)},saveBill:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.isAdd?Object(l["a"])(e.form).then((function(t){200==t.code?(e.open=!1,e.msgSuccess(t.msg),e.$emit("updateBillTable")):e.msgError(t.msg)})):Object(l["i"])(e.form).then((function(t){200==t.code?(e.open=!1,e.msgSuccess(t.msg),r["m"],e.$emit("updateBillTable")):e.msgError(t.msg)})))}))},chooseCode:function(e){this.$refs.ChooseCode.openChoose()},showChooseCode:function(e){var t=Object.keys(this.form);console.log(t);for(var a=0,n=t.length;a<n;a++)e[t[a]]&&"id"!=t[a]&&"deptId"!=t[a]&&"createTime"!=t[a]&&"createBy"!=t[a]&&"updateBy"!=t[a]&&(this.form[t[a]]=e[t[a]]);this.form.rate=""+this.form.rate,this.$refs.form.clearValidate(["vehicleType","factoryNo","origin","vehicleIdentificationCode","rate"]),console.log(e)},redFillBillDialog:function(e){var t=this,a={id:e};return Object(s["h"])(a).then((function(e){var a=e.data;a.invType="12",a.rate=a.rate?a.rate.toString():"",t.form=a,t.form.totalMoneyUp=t.swapper(t.form.totalAmount),t.open=!0,t.title="红字申请单申请",t.isRed=!0,t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},handleOpen:function(){var e=this;this.$confirm("是否确认开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.openValid1()})).then((function(){var t=e.form.invType,a={invType:t};Object(d["g"])(10,"正在获取开票信息",e,!1),Object(c["b"])(a).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.stockInfoForm=t.data,e.stockInfoForm.fplx="机动车",e.stockInfoOpen=!0):e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("获取税盘库存信息错误")}))}))},sureStockInfo:function(){var e=this;Object(l["h"])(this.form).then((function(t){if(200==t.code){e.stockInfoOpen=!1,e.open=!1;var a=t.data,n={id:a.id,bizDate:a.bizDate};Object(l["g"])(n).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg)}))}else e.msgError(t.msg)}))},openValid1:function(){var e=this,t=Object(r["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}}}},h=p,m=(a("65ff"),a("2877")),f=Object(m["a"])(h,n,i,!1,null,"9313c78a",null);t["default"]=f.exports},"9fe7":function(e,t,a){},a0162:function(e,t,a){"use strict";a("2bb4")},a057:function(e,t,a){},a068:function(e,t,a){"use strict";a.r(t);var n=a("f8db"),i=Promise.resolve();t["default"]=function(e){function t(e){return"object"===typeof e&&null!==e&&!0===e.__PDFDocumentLoadingTask}function a(t,a){var n;if("string"===typeof t)n={url:t};else if(t instanceof Uint8Array)n={data:t};else{if("object"!==typeof t||null===t)throw new TypeError("invalid src type");n=Object.assign({},t)}a&&a.withCredentials&&(n.withCredentials=a.withCredentials);var i=e.getDocument(n);return i.__PDFDocumentLoadingTask=!0,a&&a.onPassword&&(i.onPassword=a.onPassword),a&&a.onProgress&&(i.onProgress=a.onProgress),i}function o(o,r,l){var s=null,c=null,u=null,d=!1;function p(){o.getContext("2d").clearRect(0,0,o.width,o.height)}function h(){while(r.firstChild)r.removeChild(r.firstChild)}o.getContext("2d").save(),this.destroy=function(){null!==s&&(i=s.destroy(),s=null)},this.getResolutionScale=function(){return o.offsetWidth/o.width},this.printPage=function(e,t){if(null!==c){var a=void 0===e?150:e,n=a/72,i=96/72,o=document.createElement("iframe");new Promise((function(e,t){o.frameBorder="0",o.scrolling="no",o.width="0px;",o.height="0px;",o.style.cssText="position: absolute; top: 0; left: 0",o.onload=function(){e(this.contentWindow)},window.document.body.appendChild(o)})).then((function(e){return e.document.title="",s.getPage(1).then((function(t){var a=t.getViewport({scale:1});return e.document.head.appendChild(e.document.createElement("style")).textContent="@supports ((size:A4) and (size:1pt 1pt)) {@page { margin: 1pt; size: "+a.width*n/i+"pt "+a.height*n/i+"pt; }}@media print {body { margin: 0 }canvas { page-break-before: avoid; page-break-after: always; page-break-inside: avoid }}@media screen {body { margin: 0 }}",e}))})).then((function(e){for(var a=[],i=1;i<=s.numPages;++i)void 0!==t&&-1===t.indexOf(i)||a.push(s.getPage(i).then((function(t){var a=t.getViewport({scale:1}),i=e.document.body.appendChild(e.document.createElement("canvas"));return i.width=a.width*n,i.height=a.height*n,t.render({canvasContext:i.getContext("2d"),transform:[n,0,0,n,0,0],viewport:a,intent:"print"}).promise})));Promise.all(a).then((function(){e.focus(),e.document.queryCommandSupported("print")?e.document.execCommand("print",!1,null):e.print(),r()})).catch((function(e){r(),l("error",e)}))}))}function r(){o.parentNode.removeChild(o)}},this.renderPage=function(t){if(null!==u){if(d)return;return d=!0,void u.cancel().catch((function(e){l("error",e)}))}if(null!==c){var a=(void 0===c.rotate?0:c.rotate)+(void 0===t?0:t),p=o.offsetWidth/c.getViewport({scale:1}).width*(window.devicePixelRatio||1),m=c.getViewport({scale:p,rotation:a});l("page-size",m.width,m.height,p),o.width=m.width,o.height=m.height,u=c.render({canvasContext:o.getContext("2d"),viewport:m}),r.style.visibility="hidden",h();var f={scrollPageIntoView:function(e){l("link-clicked",e.pageNumber)}},b=new n["PDFLinkService"];b.setDocument(s),b.setViewer(f),i=i.then(function(){var a=c.getAnnotations({intent:"display"}).then((function(t){e.AnnotationLayer.render({viewport:m.clone({dontFlip:!0}),div:r,annotations:t,page:c,linkService:b,renderInteractiveForms:!1})})),n=u.promise.then((function(){r.style.visibility="",d=!1,u=null})).catch(function(a){if(u=null,a instanceof e.RenderingCancelledException)return d=!1,void this.renderPage(t);l("error",a)}.bind(this));return Promise.all([a,n])}.bind(this))}},this.forEachPage=function(e){var t=s.numPages;(function a(n){s.getPage(n).then(e).then((function(){++n<=t&&a(n)}))})(1)},this.loadPage=function(e,t){c=null,null!==s&&(i=i.then((function(){return s.getPage(e)})).then(function(e){c=e,this.renderPage(t),l("page-loaded",e.pageNumber)}.bind(this)).catch((function(e){p(),h(),l("error",e)})))},this.loadDocument=function(n){if(s=null,c=null,l("num-pages",void 0),!n)return o.removeAttribute("width"),o.removeAttribute("height"),void h();i=i.then((function(){var i;if(t(n)){if(n.destroyed)return void l("error",new Error("loadingTask has been destroyed"));i=n}else i=a(n,{onPassword:function(t,a){var n;switch(a){case e.PasswordResponses.NEED_PASSWORD:n="NEED_PASSWORD";break;case e.PasswordResponses.INCORRECT_PASSWORD:n="INCORRECT_PASSWORD";break}l("password",t,n)},onProgress:function(e){var t=e.loaded/e.total;l("progress",Math.min(t,1))}});return i.promise})).then((function(e){s=e,l("num-pages",e.numPages),l("loaded")})).catch((function(e){p(),h(),l("error",e)}))},r.style.transformOrigin="0 0"}return{createLoadingTask:a,PDFJSWrapper:o}}},a151:function(e,t,a){"use strict";a("0927")},a18b:function(e,t,a){},a2c5:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("b775");a("4328");function i(e){return Object(n["a"])({url:"/shuijin/"+e,method:"get"})}},a36b:function(e,t,a){e.exports=a.p+"static/img/404.a57b6f31.png"},a561:function(e,t,a){},a5e7:function(e,t,a){"use strict";a.r(t);var n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.imageUpload.title,visible:e.imageUpload.open,"close-on-click-modal":!1,width:"550px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.imageUpload,"open",t)},close:e.imageUploadDialogClose}},[a("el-upload",{ref:"imageUpload",staticClass:"image-upload",attrs:{multiple:"",limit:9,"on-remove":e.handleRemove,"file-list":e.imageUploadFileList,"list-type":"picture-card","auto-upload":!1,"on-change":e.imageUploadFileChange,headers:e.imageUpload.headers,action:e.imageUpload.url+"?updateSupport="+e.imageUpload.updateSupport},scopedSlots:e._u([{key:"file",fn:function(t){var n=t.file;return a("div",{staticStyle:{height:"100%",width:"100%"}},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.fileUrl(n),alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.previewRemove(n)}}},[a("i",{staticClass:"el-icon-delete"})])]),e.showUploadFileProgress?a("el-progress",{staticClass:"upload-progress",attrs:{percentage:e.percentage[e.imageUploadFileList.indexOf(n)],status:e.progressStatus(e.imageUploadFileList.indexOf(n))}}):e._e()],1)}}])},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.imageUploadFileList.length<1},on:{click:e.submitImageUpload}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.imageUpload.open=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],r=a("ade3"),l=(a("b0c0"),a("cb29"),a("4c80")),s=a("ed08"),c=a("5f87"),u=(n={name:"uploadFileDialog",props:{},data:function(){return{images:{ofdIcon:a("086e"),pdfIcon:a("55fc")},imageUpload:{open:!1,title:"图片识别(最多选择9个文件)",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(c["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},imageUploadFileList:[],showUploadFileProgress:!1,percentage:[],uploadStatus:[],loadingTime:null,operationIndex:0,uploadResult:[],base64Arr:{},finalBase64Arr:[],fileDataArr:{},fileDataFileDataArr:[]}},watch:{},computed:{fileUrl:function(){return function(e){return"pdf"==e.name.split(".").pop()?this.images.pdfIcon:"ofd"==e.name.split(".").pop()?this.images.ofdIcon:e.url}},progressStatus:function(){return function(e){return void 0==this.uploadStatus[e]?null:this.uploadStatus[e]?"success":"exception"}}}},Object(r["a"])(n,"watch",{imageUploadFileList:function(){this.percentage=new Array(this.imageUploadFileList.length).fill(0),this.uploadStatus=new Array(this.imageUploadFileList.length).fill(void 0)}}),Object(r["a"])(n,"created",(function(){})),Object(r["a"])(n,"mounted",(function(){})),Object(r["a"])(n,"methods",{uploadFileDialogShow:function(){this.imageUpload.open=!0,this.operationIndex=0,this.uploadResult=[]},imageUploadFileChange:function(e,t){var a=this;console.log(e,t),this.imageUploadFileList=t,"pdf"==e.name.split(".").pop().toLocaleLowerCase()?this.base64Arr[e.uid]=e.raw:Object(s["g"])(e.raw).then((function(t){var n=Object(s["p"])(t.split(",")[0]);a.base64Arr[e.uid]=n+"_"+t.split(",")[1]}))},previewRemove:function(e){this.$refs.imageUpload.handleRemove(e)},handleRemove:function(e,t){this.imageUploadFileList=t,delete this.base64Arr[e.uid],delete this.fileDataArr[e.uid]},submitImageUpload:function(){for(var e in this.base64Arr)this.finalBase64Arr.push(this.base64Arr[e]);this.showUploadFileProgress=!0,this.oneByOneRequest()},oneByOneRequest:function(){var e=this,t=1e3,a=this,n=setInterval((function(){a.$set(a.percentage,a.operationIndex,a.percentage[a.operationIndex]+1),console.log(a.percentage,a.operationIndex,a.percentage[a.operationIndex]+1),a.percentage[a.operationIndex]>=99?clearInterval(n):a.percentage[a.operationIndex]>80?t=2e3:a.percentage[a.operationIndex]>50&&(t=1500)}),t),i=new FormData;this.finalBase64Arr[this.operationIndex].name?i.append("fileData",this.finalBase64Arr[this.operationIndex]):i.append("baseArray",this.finalBase64Arr[this.operationIndex]),Object(l["d"])(i).then((function(t){clearInterval(n),e.$set(e.percentage,e.operationIndex,100),200==t.code?(e.$set(e.uploadStatus,e.operationIndex,!0),e.msgSuccess("第"+(e.operationIndex+1)+"张发票识别成功")):(e.$set(e.uploadStatus,e.operationIndex,!1),e.msgError("第"+(e.operationIndex+1)+"张发票识别失败："+t.msg)),e.operationIndex++,e.uploadResult.push(t),e.operationIndex<e.finalBase64Arr.length?e.oneByOneRequest():(e.operationIndex=0,e.$emit("discernFileResult",e.uploadResult),e.imageUpload.open=!1)})).catch((function(){clearInterval(n),e.$set(e.uploadStatus,e.operationIndex,!1),e.operationIndex++,e.operationIndex<e.finalBase64Arr.length?e.oneByOneRequest():(e.operationIndex=0,e.$emit("discernFileResult",e.uploadResult),e.imageUpload.open=!1)}))},imageUploadDialogClose:function(){this.percentage=[],this.uploadStatus=[],this.showUploadFileProgress=!1,this.imageUploadFileList=[],this.base64Arr=[],this.finalBase64Arr=[],this.$refs.imageUpload.clearFiles()}}),n),d=u,p=(a("af9b"),a("2877")),h=Object(p["a"])(d,i,o,!1,null,"c8f01822",null);t["default"]=h.exports},a64a:function(e,t,a){"use strict";a("5dae")},a6c1:function(e,t,a){var n,i;(function(){var o=function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=18)}([,,function(e,t,a){"use strict";function n(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new n(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}n.prototype.clone_empty=function(){var e=new n(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},n.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},n.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},n.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},n.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},n.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},n.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},n.prototype.is_empty=function(){return 0===this.__items.length},n.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},n.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},n.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},n.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},n.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},n.prototype.trim=function(){while(" "===this.last())this.__items.pop(),this.__character_count-=1},n.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var a=this.__base_string_length;return t=t||0,e<0&&(a=0),a+=e*this.__indent_size,a+=t,a},i.prototype.get_indent_string=function(e,t){var a=this.__base_string;return t=t||0,e<0&&(e=0,a=""),t+=e*this.__indent_size,this.__ensure_cache(t),a+=this.__cache[t],a},i.prototype.__ensure_cache=function(e){while(e>=this.__cache.length)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,a="";this.__indent_size&&e>=this.__indent_size&&(t=Math.floor(e/this.__indent_size),e-=t*this.__indent_size,a=new Array(t+1).join(this.__indent_string)),e&&(a+=new Array(e+1).join(" ")),this.__cache.push(a)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var a=this.__lines.join("\n");return"\n"!==e&&(a=a.replace(/[\n]/g,e)),a},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){var t=this.__lines.length;while(e<t)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){e=void 0!==e&&e,this.current_line.trim();while(e&&this.__lines.length>1&&this.current_line.is_empty())this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){var a=this.__lines.length-2;while(a>=0){var i=this.__lines[a];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(a+1,0,new n(this)),this.previous_line=this.__lines[this.__lines.length-2];break}a--}},e.exports.Output=o},function(e,t,a){"use strict";function n(e,t,a,n){this.type=e,this.text=t,this.comments_before=null,this.newlines=a||0,this.whitespace_before=n||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}e.exports.Token=n},,,function(e,t,a){"use strict";function n(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function i(e,t){var a,n={};for(a in e=o(e),e)a!==t&&(n[a]=e[a]);if(t&&e[t])for(a in e[t])n[a]=e[t][a];return n}function o(e){var t,a={};for(t in e){var n=t.replace(/-/g,"_");a[n]=e[t]}return a}n.prototype._get_array=function(e,t){var a=this.raw_options[e],n=t||[];return"object"===typeof a?null!==a&&"function"===typeof a.concat&&(n=a.concat()):"string"===typeof a&&(n=a.split(/[^a-zA-Z0-9_\/\-]+/)),n},n.prototype._get_boolean=function(e,t){var a=this.raw_options[e],n=void 0===a?!!t:!!a;return n},n.prototype._get_characters=function(e,t){var a=this.raw_options[e],n=t||"";return"string"===typeof a&&(n=a.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),n},n.prototype._get_number=function(e,t){var a=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var n=parseInt(a,10);return isNaN(n)&&(n=t),n},n.prototype._get_selection=function(e,t,a){var n=this._get_selection_list(e,t,a);if(1!==n.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n[0]},n.prototype._get_selection_list=function(e,t,a){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(a=a||[t[0]],!this._is_valid_selection(a,t))throw new Error("Invalid Default Value!");var n=this._get_array(e,a);if(!this._is_valid_selection(n,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n},n.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=n,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},,function(e,t,a){"use strict";var n=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var a=e.exec(this.__input);return!a||n&&e.sticky||a.index!==t&&(a=null),a},i.prototype.test=function(e,t){return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var a=this.peek(t);return e.lastIndex=0,null!==a&&e.test(a)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,a){var n,i="";return e&&(n=this.match(e),n&&(i+=n[0])),!t||!n&&e||(i+=this.readUntil(t,a)),i},i.prototype.readUntil=function(e,t){var a="",n=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(n=i.index,t&&(n+=i[0].length)):n=this.__input_length,a=this.__input.substring(this.__position,n),this.__position=n,a},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var a=null,i="g";return t&&n&&(i="y"),"string"===typeof e&&""!==e?a=new RegExp(e,i):e&&(a=new RegExp(e.source,i)),a},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,a=this.readUntilAfter(e);return this.__position=t,a},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},function(e,t,a){"use strict";var n=a(8).InputScanner,i=a(3).Token,o=a(10).TokenStream,r=a(11).WhitespacePattern,l={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},s=function(e,t){this._input=new n(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new r(this._input)};s.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new o,this._reset();var t=new i(l.START,""),a=null,n=[],r=new o;while(t.type!==l.EOF){e=this._get_next_token(t,a);while(this._is_comment(e))r.add(e),e=this._get_next_token(t,a);r.isEmpty()||(e.comments_before=r,r=new o),e.parent=a,this._is_opening(e)?(n.push(a),a=e):a&&this._is_closing(e,a)&&(e.opened=a,a.closed=e,a=n.pop(),e.parent=a),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},s.prototype._is_first_token=function(){return this.__tokens.isEmpty()},s.prototype._reset=function(){},s.prototype._get_next_token=function(e,t){this._readWhitespace();var a=this._input.read(/.+/g);return a?this._create_token(l.RAW,a):this._create_token(l.EOF,"")},s.prototype._is_comment=function(e){return!1},s.prototype._is_opening=function(e){return!1},s.prototype._is_closing=function(e,t){return!1},s.prototype._create_token=function(e,t){var a=new i(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return a},s.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=s,e.exports.TOKEN=l},function(e,t,a){"use strict";function n(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}n.prototype.restart=function(){this.__position=0},n.prototype.isEmpty=function(){return 0===this.__tokens_length},n.prototype.hasNext=function(){return this.__position<this.__tokens_length},n.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},n.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},n.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=n},function(e,t,a){"use strict";var n=a(12).Pattern;function i(e,t){n.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}i.prototype=new n,i.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},i.prototype.matching=function(e,t){var a=this._create();return a.__set_whitespace_patterns(e,t),a._update(),a},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(e,t){e.lastIndex=0;var a=0,n=[],i=e.exec(t);while(i)n.push(t.substring(a,i.index)),a=i.index+i[0].length,i=e.exec(t);return a<t.length?n.push(t.substring(a,t.length)):n.push(""),n},e.exports.WhitespacePattern=i},function(e,t,a){"use strict";function n(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}n.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},n.prototype.read_match=function(){return this._input.match(this._match_pattern)},n.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},n.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},n.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},n.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},n.prototype._create=function(){return new n(this._input,this)},n.prototype._update=function(){},e.exports.Pattern=n},function(e,t,a){"use strict";function n(e,t){e="string"===typeof e?e:e.source,t="string"===typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}n.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;var a=this.__directive_pattern.exec(e);while(a)t[a[1]]=a[2],a=this.__directive_pattern.exec(e);return t},n.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=n},function(e,t,a){"use strict";var n=a(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1};function o(e,t){n.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var a=new n(e);this.__patterns={handlebars_comment:a.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:a.starting_with(/{{{/).until_after(/}}}/),handlebars:a.starting_with(/{{/).until_after(/}}/),php:a.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:a.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:a.starting_with(/{%/).until_after(/%}/),django_value:a.starting_with(/{{/).until_after(/}}/),django_comment:a.starting_with(/{#/).until_after(/#}/)}}o.prototype=new n,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},o.prototype.read_options=function(e){var t=this._create();for(var a in i)t._disabled[a]=-1===e.templating.indexOf(a);return t._update(),t},o.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},o.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);var t=this._read_template();while(t)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},o.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},o.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var a=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==a||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==a||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=e||this.__patterns.handlebars_comment.read(),e=e||this.__patterns.handlebars_unescaped.read(),e=e||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=e||this.__patterns.django_comment.read(),e=e||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=o},,,,function(e,t,a){"use strict";var n=a(19).Beautifier,i=a(20).Options;function o(e,t,a,i){var o=new n(e,t,a,i);return o.beautify()}e.exports=o,e.exports.defaultOptions=function(){return new i}},function(e,t,a){"use strict";var n=a(20).Options,i=a(2).Output,o=a(21).Tokenizer,r=a(21).TOKEN,l=/\r\n|[\r\n]/,s=/\r\n|[\r\n]/g,c=function(e,t){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=e.max_preserve_newlines,this.preserve_newlines=e.preserve_newlines,this._output=new i(e,t)};c.prototype.current_line_has_match=function(e){return this._output.current_line.has_match(e)},c.prototype.set_space_before_token=function(e,t){this._output.space_before_token=e,this._output.non_breaking_space=t},c.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},c.prototype.add_raw_token=function(e){this._output.add_raw_token(e)},c.prototype.print_preserved_newlines=function(e){var t=0;e.type!==r.TEXT&&e.previous.type!==r.TEXT&&(t=e.newlines?1:0),this.preserve_newlines&&(t=e.newlines<this.max_preserve_newlines+1?e.newlines:this.max_preserve_newlines+1);for(var a=0;a<t;a++)this.print_newline(a>0);return 0!==t},c.prototype.traverse_whitespace=function(e){return!(!e.whitespace_before&&!e.newlines)&&(this.print_preserved_newlines(e)||(this._output.space_before_token=!0),!0)},c.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},c.prototype.print_newline=function(e){this._output.add_new_line(e)},c.prototype.print_token=function(e){e.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(e.text))},c.prototype.indent=function(){this.indent_level++},c.prototype.get_full_indent=function(e){return e=this.indent_level+(e||0),e<1?"":this._output.get_indent_string(e)};var u=function(e){var t=null,a=e.next;while(a.type!==r.EOF&&e.closed!==a){if(a.type===r.ATTRIBUTE&&"type"===a.text){a.next&&a.next.type===r.EQUALS&&a.next.next&&a.next.next.type===r.VALUE&&(t=a.next.next.text);break}a=a.next}return t},d=function(e,t){var a=null,n=null;return t.closed?("script"===e?a="text/javascript":"style"===e&&(a="text/css"),a=u(t)||a,a.search("text/css")>-1?n="css":a.search(/(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1?n="javascript":a.search(/(text|application|dojo)\/(x-)?(html)/)>-1?n="html":a.search(/test\/null/)>-1&&(n="null"),n):null};function p(e,t){return-1!==t.indexOf(e)}function h(e,t,a){this.parent=e||null,this.tag=t?t.tag_name:"",this.indent_level=a||0,this.parser_token=t||null}function m(e){this._printer=e,this._current_frame=null}function f(e,t,a,i){this._source_text=e||"",t=t||{},this._js_beautify=a,this._css_beautify=i,this._tag_stack=null;var o=new n(t,"html");this._options=o,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}m.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},m.prototype.record_tag=function(e){var t=new h(this._current_frame,e,this._printer.indent_level);this._current_frame=t},m.prototype._try_pop_frame=function(e){var t=null;return e&&(t=e.parser_token,this._printer.indent_level=e.indent_level,this._current_frame=e.parent),t},m.prototype._get_frame=function(e,t){var a=this._current_frame;while(a){if(-1!==e.indexOf(a.tag))break;if(t&&-1!==t.indexOf(a.tag)){a=null;break}a=a.parent}return a},m.prototype.try_pop=function(e,t){var a=this._get_frame([e],t);return this._try_pop_frame(a)},m.prototype.indent_to_tag=function(e){var t=this._get_frame(e);t&&(this._printer.indent_level=t.indent_level)},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&l.test(e)&&(t=e.match(l)[0])),e=e.replace(s,"\n");var a=e.match(/^[\t ]*/)[0],n={text:"",type:""},i=new b,u=new c(this._options,a),d=new o(e,this._options).tokenize();this._tag_stack=new m(u);var p=null,h=d.next();while(h.type!==r.EOF)h.type===r.TAG_OPEN||h.type===r.COMMENT?(p=this._handle_tag_open(u,h,i,n),i=p):h.type===r.ATTRIBUTE||h.type===r.EQUALS||h.type===r.VALUE||h.type===r.TEXT&&!i.tag_complete?p=this._handle_inside_tag(u,h,i,d):h.type===r.TAG_CLOSE?p=this._handle_tag_close(u,h,i):h.type===r.TEXT?p=this._handle_text(u,h,i):u.add_raw_token(h),n=p,h=d.next();var f=u._output.get_code(t);return f},f.prototype._handle_tag_close=function(e,t,a){var n={text:t.text,type:t.type};return e.alignment_size=0,a.tag_complete=!0,e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),a.is_unformatted?e.add_raw_token(t):("<"===a.tag_start_char&&(e.set_space_before_token("/"===t.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&a.has_wrapped_attrs&&e.print_newline(!1)),e.print_token(t)),!a.indent_content||a.is_unformatted||a.is_content_unformatted||(e.indent(),a.indent_content=!1),a.is_inline_element||a.is_unformatted||a.is_content_unformatted||e.set_wrap_point(),n},f.prototype._handle_inside_tag=function(e,t,a,n){var i=a.has_wrapped_attrs,o={text:t.text,type:t.type};if(e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),a.is_unformatted)e.add_raw_token(t);else if("{"===a.tag_start_char&&t.type===r.TEXT)e.print_preserved_newlines(t)?(t.newlines=0,e.add_raw_token(t)):e.print_token(t);else{if(t.type===r.ATTRIBUTE?(e.set_space_before_token(!0),a.attr_count+=1):(t.type===r.EQUALS||t.type===r.VALUE&&t.previous.type===r.EQUALS)&&e.set_space_before_token(!1),t.type===r.ATTRIBUTE&&"<"===a.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(e.traverse_whitespace(t),i=i||0!==t.newlines),this._is_wrap_attributes_force)){var l=a.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===a.attr_count){var s,c=!0,u=0;do{if(s=n.peek(u),s.type===r.ATTRIBUTE){c=!1;break}u+=1}while(u<4&&s.type!==r.EOF&&s.type!==r.TAG_CLOSE);l=!c}l&&(e.print_newline(!1),i=!0)}e.print_token(t),i=i||e.previous_token_wrapped(),a.has_wrapped_attrs=i}return o},f.prototype._handle_text=function(e,t,a){var n={text:t.text,type:"TK_CONTENT"};return a.custom_beautifier_name?this._print_custom_beatifier_text(e,t,a):a.is_unformatted||a.is_content_unformatted?e.add_raw_token(t):(e.traverse_whitespace(t),e.print_token(t)),n},f.prototype._print_custom_beatifier_text=function(e,t,a){var n=this;if(""!==t.text){var i,o=t.text,r=1,l="",s="";"javascript"===a.custom_beautifier_name&&"function"===typeof this._js_beautify?i=this._js_beautify:"css"===a.custom_beautifier_name&&"function"===typeof this._css_beautify?i=this._css_beautify:"html"===a.custom_beautifier_name&&(i=function(e,t){var a=new f(e,t,n._js_beautify,n._css_beautify);return a.beautify()}),"keep"===this._options.indent_scripts?r=0:"separate"===this._options.indent_scripts&&(r=-e.indent_level);var c=e.get_full_indent(r);if(o=o.replace(/\n[ \t]*$/,""),"html"!==a.custom_beautifier_name&&"<"===o[0]&&o.match(/^(<!--|<!\[CDATA\[)/)){var u=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(o);if(!u)return void e.add_raw_token(t);l=c+u[1]+"\n",o=u[4],u[5]&&(s=c+u[5]),o=o.replace(/\n[ \t]*$/,""),(u[2]||-1!==u[3].indexOf("\n"))&&(u=u[3].match(/[ \t]+$/),u&&(t.whitespace_before=u[0]))}if(o)if(i){var d=function(){this.eol="\n"};d.prototype=this._options.raw_options;var p=new d;o=i(c+o,p)}else{var h=t.whitespace_before;h&&(o=o.replace(new RegExp("\n("+h+")?","g"),"\n")),o=c+o.replace(/\n/g,"\n"+c)}l&&(o=o?l+o+"\n"+s:l+s),e.print_newline(!1),o&&(t.text=o,t.whitespace_before="",t.newlines=0,e.add_raw_token(t),e.print_newline(!0))}},f.prototype._handle_tag_open=function(e,t,a,n){var i=this._get_tag_open_token(t);return(a.is_unformatted||a.is_content_unformatted)&&t.type===r.TAG_OPEN&&0===t.text.indexOf("</")?e.add_raw_token(t):(e.traverse_whitespace(t),this._set_tag_position(e,t,i,a,n),i.is_inline_element||e.set_wrap_point(),e.print_token(t)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(i.alignment_size=t.text.length+1),i.tag_complete||i.is_unformatted||(e.alignment_size=i.alignment_size),i};var b=function(e,t){var a;(this.parent=e||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",t)?(this.tag_start_char=t.text[0],this.text=t.text,"<"===this.tag_start_char?(a=t.text.match(/^<([^\s>]*)/),this.tag_check=a?a[1]:""):(a=t.text.match(/^{{[#\^]?([^\s}]+)/),this.tag_check=a?a[1]:""),this.tag_check=this.tag_check.toLowerCase(),t.type===r.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||t.closed&&"/>"===t.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))):this.tag_complete=!0};f.prototype._get_tag_open_token=function(e){var t=new b(this._tag_stack.get_parser_token(),e);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||p(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&p(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&p(t.tag_check,this._options.content_unformatted),t.is_inline_element=p(t.tag_name,this._options.inline)||"{"===t.tag_start_char,t},f.prototype._set_tag_position=function(e,t,a,n,i){if(a.is_empty_element||(a.is_end_tag?a.start_tag_token=this._tag_stack.try_pop(a.tag_name):(this._do_optional_end_element(a)&&(a.is_inline_element||(a.parent&&(a.parent.multiline_content=!0),e.print_newline(!1))),this._tag_stack.record_tag(a),"script"!==a.tag_name&&"style"!==a.tag_name||a.is_unformatted||a.is_content_unformatted||(a.custom_beautifier_name=d(a.tag_check,t)))),p(a.tag_check,this._options.extra_liners)&&(e.print_newline(!1),e._output.just_added_blankline()||e.print_newline(!0)),a.is_empty_element){if("{"===a.tag_start_char&&"else"===a.tag_check){this._tag_stack.indent_to_tag(["if","unless","each"]),a.indent_content=!0;var o=e.current_line_has_match(/{{#if/);o||e.print_newline(!1)}"!--"===a.tag_name&&i.type===r.TAG_CLOSE&&n.is_end_tag&&-1===a.text.indexOf("\n")||a.is_inline_element||a.is_unformatted||e.print_newline(!1)}else a.is_unformatted||a.is_content_unformatted?a.is_inline_element||a.is_unformatted||e.print_newline(!1):a.is_end_tag?(a.start_tag_token&&a.start_tag_token.multiline_content||!(a.is_inline_element||n.is_inline_element||i.type===r.TAG_CLOSE&&a.start_tag_token===n||"TK_CONTENT"===i.type))&&e.print_newline(!1):(a.indent_content=!a.custom_beautifier_name,"<"===a.tag_start_char&&("html"===a.tag_name?a.indent_content=this._options.indent_inner_html:"head"===a.tag_name?a.indent_content=this._options.indent_head_inner_html:"body"===a.tag_name&&(a.indent_content=this._options.indent_body_inner_html)),a.is_inline_element||"TK_CONTENT"===i.type||(a.parent&&(a.parent.multiline_content=!0),e.print_newline(!1)))},f.prototype._do_optional_end_element=function(e){var t=null;if(!e.is_empty_element&&e.is_start_tag&&e.parent)return"body"===e.tag_name?t=t||this._tag_stack.try_pop("head"):"li"===e.tag_name?t=t||this._tag_stack.try_pop("li",["ol","ul"]):"dd"===e.tag_name||"dt"===e.tag_name?(t=t||this._tag_stack.try_pop("dt",["dl"]),t=t||this._tag_stack.try_pop("dd",["dl"])):"rp"===e.tag_name||"rt"===e.tag_name?(t=t||this._tag_stack.try_pop("rt",["ruby","rtc"]),t=t||this._tag_stack.try_pop("rp",["ruby","rtc"])):"optgroup"===e.tag_name?t=t||this._tag_stack.try_pop("optgroup",["select"]):"option"===e.tag_name?t=t||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===e.tag_name?t=t||this._tag_stack.try_pop("caption",["table"]):"thead"===e.tag_name?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"])):"tbody"===e.tag_name||"tfoot"===e.tag_name?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"]),t=t||this._tag_stack.try_pop("thead",["table"]),t=t||this._tag_stack.try_pop("tbody",["table"])):"tr"===e.tag_name?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"]),t=t||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):"th"!==e.tag_name&&"td"!==e.tag_name||(t=t||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),t=t||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"])),e.parent=this._tag_stack.get_parser_token(),t},e.exports.Beautifier=f},function(e,t,a){"use strict";var n=a(6).Options;function i(e){n.call(this,e,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}i.prototype=new n,e.exports.Options=i},function(e,t,a){"use strict";var n=a(9).Tokenizer,i=a(9).TOKEN,o=a(13).Directives,r=a(14).TemplatablePattern,l=a(12).Pattern,s={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},c=new o(/<\!--/,/-->/),u=function(e,t){n.call(this,e,t),this._current_tag_name="";var a=new r(this._input).read_options(this._options),i=new l(this._input);if(this.__patterns={word:a.until(/[\n\r\t <]/),single_quote:a.until_after(/'/),double_quote:a.until_after(/"/),attribute:a.until(/[\n\r\t =\/>]/),element_name:a.until(/[\n\r\t >\/]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var o=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(o).until_after(o)}};u.prototype=new n,u.prototype._is_comment=function(e){return!1},u.prototype._is_opening=function(e){return e.type===s.TAG_OPEN},u.prototype._is_closing=function(e,t){return e.type===s.TAG_CLOSE&&t&&((">"===e.text||"/>"===e.text)&&"<"===t.text[0]||"}}"===e.text&&"{"===t.text[0]&&"{"===t.text[1])},u.prototype._reset=function(){this._current_tag_name=""},u.prototype._get_next_token=function(e,t){var a=null;this._readWhitespace();var n=this._input.peek();return null===n?this._create_token(s.EOF,""):(a=a||this._read_open_handlebars(n,t),a=a||this._read_attribute(n,e,t),a=a||this._read_raw_content(n,e,t),a=a||this._read_close(n,t),a=a||this._read_content_word(n),a=a||this._read_comment_or_cdata(n),a=a||this._read_processing(n),a=a||this._read_open(n,t),a=a||this._create_token(s.UNKNOWN,this._input.next()),a)},u.prototype._read_comment_or_cdata=function(e){var t=null,a=null,n=null;if("<"===e){var i=this._input.peek(1);"!"===i&&(a=this.__patterns.comment.read(),a?(n=c.get_directives(a),n&&"start"===n.ignore&&(a+=c.readIgnored(this._input))):a=this.__patterns.cdata.read()),a&&(t=this._create_token(s.COMMENT,a),t.directives=n)}return t},u.prototype._read_processing=function(e){var t=null,a=null,n=null;if("<"===e){var i=this._input.peek(1);"!"!==i&&"?"!==i||(a=this.__patterns.conditional_comment.read(),a=a||this.__patterns.processing.read()),a&&(t=this._create_token(s.COMMENT,a),t.directives=n)}return t},u.prototype._read_open=function(e,t){var a=null,n=null;return t||"<"===e&&(a=this._input.next(),"/"===this._input.peek()&&(a+=this._input.next()),a+=this.__patterns.element_name.read(),n=this._create_token(s.TAG_OPEN,a)),n},u.prototype._read_open_handlebars=function(e,t){var a=null,n=null;return t||this._options.indent_handlebars&&"{"===e&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(a=this.__patterns.handlebars_comment.read(),a=a||this.__patterns.handlebars.read(),n=this._create_token(s.COMMENT,a)):(a=this.__patterns.handlebars_open.read(),n=this._create_token(s.TAG_OPEN,a))),n},u.prototype._read_close=function(e,t){var a=null,n=null;return t&&("<"===t.text[0]&&(">"===e||"/"===e&&">"===this._input.peek(1))?(a=this._input.next(),"/"===e&&(a+=this._input.next()),n=this._create_token(s.TAG_CLOSE,a)):"{"===t.text[0]&&"}"===e&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),n=this._create_token(s.TAG_CLOSE,"}}"))),n},u.prototype._read_attribute=function(e,t,a){var n=null,i="";if(a&&"<"===a.text[0])if("="===e)n=this._create_token(s.EQUALS,this._input.next());else if('"'===e||"'"===e){var o=this._input.next();o+='"'===e?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),n=this._create_token(s.VALUE,o)}else i=this.__patterns.attribute.read(),i&&(n=t.type===s.EQUALS?this._create_token(s.VALUE,i):this._create_token(s.ATTRIBUTE,i));return n},u.prototype._is_content_unformatted=function(e){return-1===this._options.void_elements.indexOf(e)&&(-1!==this._options.content_unformatted.indexOf(e)||-1!==this._options.unformatted.indexOf(e))},u.prototype._read_raw_content=function(e,t,a){var n="";if(a&&"{"===a.text[0])n=this.__patterns.handlebars_raw_close.read();else if(t.type===s.TAG_CLOSE&&"<"===t.opened.text[0]){var i=t.opened.text.substr(1).toLowerCase();if("script"===i||"style"===i){var o=this._read_comment_or_cdata(e);if(o)return o.type=s.TEXT,o;n=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(i)&&(n=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig")))}return n?this._create_token(s.TEXT,n):null},u.prototype._read_content_word=function(e){var t="";if(this._options.unformatted_content_delimiter&&e===this._options.unformatted_content_delimiter[0]&&(t=this.__patterns.unformatted_content_delimiter.read()),t||(t=this.__patterns.word.read()),t)return this._create_token(s.TEXT,t)},e.exports.Tokenizer=u,e.exports.TOKEN=s}]),r=o;n=[a,a("e943"),a("4d7c")],i=function(e){var t=a("e943"),n=a("4d7c");return{html_beautify:function(e,a){return r(e,a,t.js_beautify,n.css_beautify)}}}.apply(t,n),void 0===i||(e.exports=i)})()},a6dc:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"b",(function(){return d}));var n=a("b775");function i(e){return Object(n["a"])({url:"/system/menu/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/system/menu/"+e,method:"get"})}function r(){return Object(n["a"])({url:"/system/menu/treeselect",method:"get"})}function l(e){return Object(n["a"])({url:"/system/menu/roleMenuTreeselect/"+e,method:"get"})}function s(e){return Object(n["a"])({url:"/system/menu/deptMenuTreeselect/"+e,method:"get"})}function c(e){return Object(n["a"])({url:"/system/menu",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/system/menu",method:"put",data:e})}function d(e){return Object(n["a"])({url:"/system/menu/"+e,method:"delete"})}},a6e5:function(e,t,a){"use strict";a("12f23")},a766:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"清单标志",prop:"detailFlag"}},[a("el-select",{attrs:{placeholder:"请选择清单标志",clearable:"",size:"small"},model:{value:e.queryParams.detailFlag,callback:function(t){e.$set(e.queryParams,"detailFlag",t)},expression:"queryParams.detailFlag"}},e._l(e.detailFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方纳税人识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo",t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"红冲标志",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否作废",prop:"cancelFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否作废",clearable:"",size:"small"},model:{value:e.queryParams.cancelFlag,callback:function(t){e.$set(e.queryParams,"cancelFlag",t)},expression:"queryParams.cancelFlag"}},e._l(e.cancelFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["history:history:export"],expression:"['history:history:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["history:history:export"],expression:"['history:history:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"historyMainTable",attrs:{data:e.historyList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["id"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceDetail(n.row)}}},[e._v(" "+e._s(n.row[t.prop])+" ")]):"invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):"redFlag"==t.prop?a("span",[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]):"cancelFlag"==t.prop?a("span",[e._v(" "+e._s(e.cancelFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码"},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode",t)},expression:"form.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码"},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo",t)},expression:"form.invNo"}})],1),a("el-form-item",{attrs:{label:"发票代码号码组合",prop:"invCodeNo"}},[a("el-input",{attrs:{placeholder:"请输入发票代码号码组合"},model:{value:e.form.invCodeNo,callback:function(t){e.$set(e.form,"invCodeNo",t)},expression:"form.invCodeNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-input",{attrs:{placeholder:"请输入开票日期"},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate",t)},expression:"form.invDate"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{attrs:{placeholder:"请选择发票类型"},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"清单标志"}},[a("el-select",{attrs:{placeholder:"请选择清单标志"},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}},e._l(e.detailFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称"},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName",t)},expression:"form.buyName"}})],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号"},model:{value:e.form.buyNumber,callback:function(t){e.$set(e.form,"buyNumber",t)},expression:"form.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方纳税人识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号"},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"购方开户账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方开户账号"},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1),a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话"},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1),a("el-form-item",{attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入购方邮箱"},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail",t)},expression:"form.buyEmail"}})],1),a("el-form-item",{attrs:{label:"购方手机号码",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入购方手机号码"},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo",t)},expression:"form.buyTelNo"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称"},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName",t)},expression:"form.sellName"}})],1),a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号"},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo",t)},expression:"form.sellTaxNo"}})],1),a("el-form-item",{attrs:{label:"销方地址及电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址及电话"},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1),a("el-form-item",{attrs:{label:"销方银行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方银行及账号"},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1),a("el-form-item",{attrs:{label:"税收分类编码版本号",prop:"goodsVersion"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码版本号"},model:{value:e.form.goodsVersion,callback:function(t){e.$set(e.form,"goodsVersion",t)},expression:"form.goodsVersion"}})],1),a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人"},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier",t)},expression:"form.cashier"}})],1),a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人"},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1),a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人"},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer",t)},expression:"form.invoicer"}})],1),a("el-form-item",{attrs:{label:"合计税额",prop:"totalTaxAmount"}},[a("el-input",{attrs:{placeholder:"请输入合计税额"},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount",t)},expression:"form.totalTaxAmount"}})],1),a("el-form-item",{attrs:{label:"价税合计",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入价税合计"},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount",t)},expression:"form.totalAmount"}})],1),a("el-form-item",{attrs:{label:"合计不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{placeholder:"请输入合计不含税金额"},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax",t)},expression:"form.totalAmountWithoutTax"}})],1),a("el-form-item",{attrs:{label:"剩余未红冲金额",prop:"totalAmountWithoutTaxNoRed"}},[a("el-input",{attrs:{placeholder:"请输入剩余未红冲金额"},model:{value:e.form.totalAmountWithoutTaxNoRed,callback:function(t){e.$set(e.form,"totalAmountWithoutTaxNoRed",t)},expression:"form.totalAmountWithoutTaxNoRed"}})],1),a("el-form-item",{attrs:{label:"源正数发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{placeholder:"请输入源正数发票代码"},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode",t)},expression:"form.sourceInvCode"}})],1),a("el-form-item",{attrs:{label:"源正数发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入源正数发票号码"},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo",t)},expression:"form.sourceInvNo"}})],1),a("el-form-item",{attrs:{label:"红冲标志"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志"},model:{value:e.form.redFlag,callback:function(t){e.$set(e.form,"redFlag",t)},expression:"form.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否作废"}},[a("el-select",{attrs:{placeholder:"请选择是否作废"},model:{value:e.form.cancelFlag,callback:function(t){e.$set(e.form,"cancelFlag",t)},expression:"form.cancelFlag"}},e._l(e.cancelFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"红字申请单",prop:"negNativeNo"}},[a("el-input",{attrs:{placeholder:"请输入红字申请单"},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo",t)},expression:"form.negNativeNo"}})],1),a("el-form-item",{attrs:{label:"税盘信息，机器编码_分机号[-终端号]",prop:"taxnoInfo"}},[a("el-input",{attrs:{placeholder:"请输入税盘信息，机器编码_分机号[-终端号]"},model:{value:e.form.taxnoInfo,callback:function(t){e.$set(e.form,"taxnoInfo",t)},expression:"form.taxnoInfo"}})],1),a("el-form-item",{attrs:{label:"是否已打印"}},[a("el-select",{attrs:{placeholder:"请选择是否已打印"},model:{value:e.form.printedFlag,callback:function(t){e.$set(e.form,"printedFlag",t)},expression:"form.printedFlag"}},e._l(e.printedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已推送0否1推送邮箱2推送卡包3推送短信12推送邮箱卡包13推送邮箱短信23推送卡包短信123推送邮箱卡包短信",prop:"pushedFlag"}},[a("el-input",{attrs:{placeholder:"请输入是否已推送0否1推送邮箱2推送卡包3推送短信12推送邮箱卡包13推送邮箱短信23推送卡包短信123推送邮箱卡包短信"},model:{value:e.form.pushedFlag,callback:function(t){e.$set(e.form,"pushedFlag",t)},expression:"form.pushedFlag"}})],1),a("el-form-item",{attrs:{label:"pdf链接",prop:"pdfUrl"}},[a("el-input",{attrs:{placeholder:"请输入pdf链接"},model:{value:e.form.pdfUrl,callback:function(t){e.$set(e.form,"pdfUrl",t)},expression:"form.pdfUrl"}})],1),a("el-form-item",{attrs:{label:"密码区",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密码区"},model:{value:e.form.pwdCode,callback:function(t){e.$set(e.form,"pwdCode",t)},expression:"form.pwdCode"}})],1),a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码"},model:{value:e.form.checkCode,callback:function(t){e.$set(e.form,"checkCode",t)},expression:"form.checkCode"}})],1),a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{attrs:{placeholder:"请输入机器编码"},model:{value:e.form.machineNo,callback:function(t){e.$set(e.form,"machineNo",t)},expression:"form.machineNo"}})],1),a("el-form-item",{attrs:{label:"签章标志"}},[a("el-select",{attrs:{placeholder:"请选择签章标志"},model:{value:e.form.signFlag,callback:function(t){e.$set(e.form,"signFlag",t)},expression:"form.signFlag"}},e._l(e.signFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"二维码",prop:"ewm"}},[a("el-input",{attrs:{placeholder:"请输入二维码"},model:{value:e.form.ewm,callback:function(t){e.$set(e.form,"ewm",t)},expression:"form.ewm"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"deptId"}},[a("el-input",{attrs:{placeholder:"请输入二维码"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"ext1"}},[a("el-input",{attrs:{placeholder:"请输入二维码"},model:{value:e.form.ext1,callback:function(t){e.$set(e.form,"ext1",t)},expression:"form.ext1"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"ext2"}},[a("el-input",{attrs:{placeholder:"请输入二维码"},model:{value:e.form.ext2,callback:function(t){e.$set(e.form,"ext2",t)},expression:"form.ext2"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"ext3"}},[a("el-input",{attrs:{placeholder:"请输入二维码"},model:{value:e.form.ext3,callback:function(t){e.$set(e.form,"ext3",t)},expression:"form.ext3"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"ext4"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择二维码"},model:{value:e.form.ext4,callback:function(t){e.$set(e.form,"ext4",t)},expression:"form.ext4"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"ext5"}},[a("el-input",{attrs:{placeholder:"请输入二维码"},model:{value:e.form.ext5,callback:function(t){e.$set(e.form,"ext5",t)},expression:"form.ext5"}})],1),a("el-form-item",{attrs:{label:"发票流水号",prop:"billNumber"}},[a("el-input",{attrs:{placeholder:"请输入发票流水号"},model:{value:e.form.billNumber,callback:function(t){e.$set(e.form,"billNumber",t)},expression:"form.billNumber"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("history-detail-show-modal",{ref:"showModal"}),a("history-vehicle-detail-show-modal",{ref:"vehicleShowModal"}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("1926")),l=a("ff2e9"),s=a("b526"),c=a("d4fc"),u=a("ed08"),d={name:"History",components:{HistoryDetailShowModal:r["default"],HistoryVehicleDetailShowModal:l["default"],TotalRowTable:s["default"]},data:function(){return{module:"history",tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,historyList:[],title:"",open:!1,invTypeOptions:[],detailFlagOptions:[],redFlagOptions:[],cancelFlagOptions:[],printedFlagOptions:[],signFlagOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,detailFlag:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalAmountWithoutTaxNoRed:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,taxnoInfo:null,printedFlag:null,pushedFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,ewm:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null},form:{},rules:{},columnsArr:[{label:"发票流水号",prop:"id",align:"center",show:!0,width:220,columnSort:0},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:1},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:2},{label:"发票代码号码组合",prop:"invCodeNo",align:"center",show:!0,width:220,columnSort:3},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:4},{label:"发票类型",prop:"invType",align:"center",show:!0,width:220,columnSort:5},{label:"清单标志",prop:"detailFlag",align:"center",show:!0,width:220,columnSort:6},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:7},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:220,columnSort:8},{label:"购方纳税人识别号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:9},{label:"购方开户账号",prop:"buyBankAccount",align:"center",show:!0,width:220,columnSort:10},{label:"购方地址电话",prop:"buyAddrTel",align:"center",show:!0,width:220,columnSort:11},{label:"购方邮箱",prop:"buyEmail",align:"center",show:!0,width:220,columnSort:12},{label:"购方手机号码",prop:"buyTelNo",align:"center",show:!0,width:220,columnSort:13},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:14},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:15},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:16},{label:"销方地址及电话",prop:"sellAddrTel",align:"center",show:!0,width:220,columnSort:17},{label:"销方银行及账号",prop:"sellBankAccount",align:"center",show:!0,width:220,columnSort:18},{label:"收款人",prop:"cashier",align:"center",show:!0,width:220,columnSort:19},{label:"复核人",prop:"checker",align:"center",show:!0,width:220,columnSort:20},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:220,columnSort:21},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:22},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:23},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:24},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:220,columnSort:25},{label:"是否作废",prop:"cancelFlag",align:"center",show:!0,width:220,columnSort:26},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:220,columnSort:27},{label:"二维码",prop:"ext5",align:"center",show:!0,width:220,columnSort:28},{label:"发票流水号",prop:"billNumber",align:"center",show:!0,width:220,columnSort:29}],checkboxClick:!1,sortParam:{column:null,columnOrder:null},showProgress:!1,functionName:"",loadingTime:null}},computed:{totalTableData:function(){var e=Object(u["e"])(this.rows);return 0==e.length&&(e=Object(u["e"])(this.historyList)),e}},created:function(){var e=this;this.getList(),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data})),this.getDicts("red_flag").then((function(t){e.redFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.cancelFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.printedFlagOptions=t.data})),this.getDicts("invoice_sign_status").then((function(t){e.signFlagOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(u["e"])(this.queryParams),Object(u["e"])(this.sortParam));Object(c["f"])(this.addDateRange(t,this.dateRange)).then((function(t){e.historyList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},printedFlagFormat:function(e,t){return this.selectDictLabel(this.printedFlagOptions,e.printedFlag)},signFlagFormat:function(e,t){return this.selectDictLabel(this.signFlagOptions,e.signFlag)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,detailFlag:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalAmountWithoutTaxNoRed:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,taxnoInfo:null,printedFlag:null,pushedFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,ewm:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(u["e"])(e))},handleAdd:function(){this.reset(),this.open=!0,this.title="添加已开历史发票管理"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(c["e"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改已开历史发票管理"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(c["g"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(c["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除已开历史发票管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(u["e"])(this.queryParams);this.ids.length>0&&(t.idsArr=this.ids),this.$confirm("是否确认导出所有已开历史发票数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(c["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"已开历史发票.xls",e)})).catch((function(){}))},handleExportDetail:function(){var e=this,t=Object(u["e"])(this.queryParams);this.ids.length>0&&(t.idsArr=this.ids),this.$confirm("是否确认导出所有已开历史发票明细数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(c["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"已开历史发票明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.historyMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.historyList,"historyMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.historyList,"historyMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},showInvoiceDetail:function(e){var t={id:e.id,invDate:e.invDate};"12"==e.invType?this.$refs.vehicleShowModal.fillInvoiceDialog(t):this.$refs.showModal.fillBillDialog(t)},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},a7b0:function(e,t,a){"use strict";a("6d46")},a85b:function(e,t,a){"use strict";a("d3b7"),a("159b"),a("b64b"),a("e9c4");var n=a("ed08"),i=Object(n["k"])("accept,accept-charset,accesskey,action,align,alt,async,autocomplete,autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,name,contenteditable,contextmenu,controls,coords,data,datetime,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,type,usemap,value,width,wrap");function o(e,t,a){t.props.value=a,t.on.input=function(t){e.$emit("input",t)}}var r={"el-input":{prepend:function(e,t,a){return e("template",{slot:"prepend"},[t[a]])},append:function(e,t,a){return e("template",{slot:"append"},[t[a]])}},"el-select":{options:function(e,t,a){var n=[];return t.options.forEach((function(t){n.push(e("el-option",{attrs:{label:t.label,value:t.value,disabled:t.disabled}}))})),n}},"el-radio-group":{options:function(e,t,a){var n=[];return t.options.forEach((function(a){"button"===t.optionType?n.push(e("el-radio-button",{attrs:{label:a.value}},[a.label])):n.push(e("el-radio",{attrs:{label:a.value,border:t.border}},[a.label]))})),n}},"el-checkbox-group":{options:function(e,t,a){var n=[];return t.options.forEach((function(a){"button"===t.optionType?n.push(e("el-checkbox-button",{attrs:{label:a.value}},[a.label])):n.push(e("el-checkbox",{attrs:{label:a.value,border:t.border}},[a.label]))})),n}},"el-upload":{"list-type":function(e,t,a){var n=[];return"picture-card"===t["list-type"]?n.push(e("i",{class:"el-icon-plus"})):n.push(e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[t.buttonText])),t.showTip&&n.push(e("div",{slot:"tip",class:"el-upload__tip"},["只能上传不超过 ",t.fileSize,t.sizeUnit," 的",t.accept,"文件"])),n}}};t["a"]={render:function(e){var t=this,a={attrs:{},props:{},on:{},style:{}},n=JSON.parse(JSON.stringify(this.conf)),l=[],s=r[n.tag];return s&&Object.keys(s).forEach((function(t){var a=s[t];n[t]&&l.push(a(e,n,t))})),Object.keys(n).forEach((function(e){var r=n[e];"vModel"===e?o(t,a,n.defaultValue):a[e]?a[e]=r:i(e)?a.attrs[e]=r:a.props[e]=r})),e(this.conf.tag,a,l)},props:["conf"]}},a8e6:function(e,t,a){},a92a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",e._g(e._b({attrs:{width:"500px","close-on-click-modal":!1,"modal-append-to-body":!1},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"生成类型",prop:"type"}},[a("el-radio-group",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.typeOptions,(function(t,n){return a("el-radio-button",{key:n,attrs:{label:t.value,disabled:t.disabled}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),e.showFileName?a("el-form-item",{attrs:{label:"文件名",prop:"fileName"}},[a("el-input",{attrs:{placeholder:"请输入文件名",clearable:""},model:{value:e.formData.fileName,callback:function(t){e.$set(e.formData,"fileName",t)},expression:"formData.fileName"}})],1):e._e()],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handelConfirm}},[e._v(" 确定 ")])],1)],1)],1)},i=[],o=a("5530"),r={inheritAttrs:!1,props:["showFileName"],data:function(){return{formData:{fileName:void 0,type:"file"},rules:{fileName:[{required:!0,message:"请输入文件名",trigger:"blur"}],type:[{required:!0,message:"生成类型不能为空",trigger:"change"}]},typeOptions:[{label:"页面",value:"file"},{label:"弹窗",value:"dialog"}]}},computed:{},watch:{},mounted:function(){},methods:{onOpen:function(){this.showFileName&&(this.formData.fileName="".concat(+new Date,".vue"))},onClose:function(){},close:function(e){this.$emit("update:visible",!1)},handelConfirm:function(){var e=this;this.$refs.elForm.validate((function(t){t&&(e.$emit("confirm",Object(o["a"])({},e.formData)),e.close())}))}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},ab09:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.invoiceEnter?"红字申请单申请":e.title,visible:e.open,width:"1100px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.applyBill}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"填开日期"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,disabled:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请经办人"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,disabled:""},model:{value:e.form.applyPerson,callback:function(t){e.$set(e.form,"applyPerson",t)},expression:"form.applyPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"No"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,disabled:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer,disabled:""},on:{select:e.handleSelectBuyer},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno,disabled:""},on:{select:e.handleSelectBuyer},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:"",disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel","string"===typeof t?t.trim():t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入开户行及账号",maxlength:100,clearable:"",disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount","string"===typeof t?t.trim():t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["51","52","81","82"].includes(e.form.invType),expression:"['51', '52', '81', '82'].includes(form.invType)"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入购方邮箱",maxlength:100,disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["51","52","81","82"].includes(e.form.invType),expression:"['51', '52', '81', '82'].includes(form.invType)"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入购方手机",maxlength:11,disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:"",disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称","min-width":120,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,disabled:"",size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:"",size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,3804331396)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2046099838)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:"",size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},on:{change:function(a){return e.taxAmountChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-info-item-special"},[a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedApply,callback:function(t){e.$set(e.redSelectInfo,"checkedApply",t)},expression:"redSelectInfo.checkedApply"}},[a("el-radio",{staticClass:"public-radio",attrs:{label:"1",disabled:""}},[e._v("一.购买方申请")]),a("div",{staticClass:"indent-div"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedBuyer,callback:function(t){e.$set(e.redSelectInfo,"checkedBuyer",t)},expression:"redSelectInfo.checkedBuyer"}},e._l(e.buyerApplyType,(function(t){return a("el-radio",{key:t.value,staticClass:"public-radio",attrs:{label:t.value,disabled:""}},[e._v(e._s(t.label))])})),1)],1),a("el-radio",{staticClass:"public-radio",attrs:{label:"2",disabled:""}},[e._v("二.销售方申请")])],1)],1)])]),a("el-col",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","padding-left":"10px"},attrs:{span:16}},[a("div",{staticClass:"item-title"},[a("label",[e._v("对应蓝字专用发票密码区内打印的信息:")])]),a("el-row",[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",disabled:""},model:{value:e.form.mergeSourceInvCodeNo,callback:function(t){e.$set(e.form,"mergeSourceInvCodeNo","string"===typeof t?t.trim():t)},expression:"form.mergeSourceInvCodeNo"}})],1)],1)]:[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:12,disabled:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:8,disabled:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)]],2),a("el-form-item",{attrs:{label:"发票种类"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small",disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(t){return"0"==t.dictValue||"52"==t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),"1"!=e.redSelectInfo.checkedBuyer?a("el-form-item",{attrs:{label:"开票时间"}},[a("el-input",{staticStyle:{width:"92%"},attrs:{size:"mini",placeholder:"",maxlength:100,disabled:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate",t)},expression:"form.invDate"}})],1):e._e()],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discoutLine,callback:function(t){e.$set(e.discountForm,"discoutLine",t)},expression:"discountForm.discoutLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("25f0"),a("b0c0"),a("4de4"),a("ac1f"),a("5319"),a("b680"),a("13d5"),a("a434"),a("c85c")),l=a("722a"),s=a("c0c7"),c=a("c394"),u=a("b9aa"),d=a("ad11"),p=a("ed08"),h=a("c38a"),m={name:"redInvoiceEditModal",components:{ChooseCode:u["default"]},props:{},data:function(){return{selfAdaptionWidth:null,form:{createTime:"",applyPerson:"",billNo:"",invType:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",totalAmountWithoutTaxNoRed:"",applyType:"0",sourceInvCode:"",sourceInvNo:"",invDate:"",openDate:"",billSource:"",billType:""},invTypeOptions:[],hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"添加单据管理",isAdd:!0,taxCodeSignRow:0,invoiceTypeOptions:[],flagOptions:[],billDetailModalData:{billTitle:"",billNo:"",billType:"2",taxPlateIdSelect:"",billCode:"",billInvNo:"",billDate:"",billCheckCode:"",billBuyName:"",billBuyTaxNo:"",billBuyAddrTel:"",billBuyBankAccount:"",billSellName:"",snsrsbh:"",sdzdh:"",syhzh:"",billNote:"",detailDate:[{trChecked:!1,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],billTotalMoney:0,billTotalTaxMoney:0,billTotalMoneyWithTax:0,billTotalMoneyWithTaxUpperCase:"",skr:"",checker:"",kpr:""},taxRateOptions:[],redInvoiceFlag:!1,buyerSearchData:[],goodsNameSearchData:[],goodsNameInputData:"",rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"收款人不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}]},discountOpen:!1,discountForm:{discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},buyerApplyType:[{value:"2",label:"1.已抵扣"},{value:"1",label:"2.未抵扣"}],redSelectInfo:{checkedApply:"2",checkedBuyer:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:"",invType:"0"},invoiceEnter:!1,originalTotalAmount:"",originalDetails:[]}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType)}))},mounted:function(){},methods:{billDialogShow:function(e){this.open=!0,this.redSelectInfo=e,this.form.sourceInvNo=e.sourceInvNo,this.form.sourceInvCode=e.sourceInvCode,"2"==e.checkedApply?(this.form.applyType="0",this.getNeedRedInvoice(e)):this.form.applyType=e.checkedBuyer},getNeedRedInvoice:function(e){var t=this,a={invCode:e.sourceInvCode,invNo:e.sourceInvNo,invDate:e.sourceInvDate,invCodeNo:e.sourceInvCode+"_"+e.sourceInvNo};Object(c["s"])(a).then((function(a){if(console.log("applyRedInvoiceEditModal:getNeedRedInfo"),200==a.code){var n=a.data;for(var i in t.form)"applyType"!=i&&(t.form[i]=n[i]);t.form.invDate=e.sourceInvDate,t.form.openDate=e.sourceInvDate,t.billDetailsData=n.details,t.originalDetails=Object(p["e"])(n.details);for(var o=0;o<t.billDetailsData.length;o++)t.billDetailsData[o].index=o,t.billDetailsData[o].rate=void 0!=t.billDetailsData[o].rate?t.specialRateFormalEcho(t.billDetailsData[o]):"";t.getBillNo()}else t.msgError(a.msg)}))},editDialogTitle:function(e){"1"==e?(this.getSubjectInfo(),this.getTaxNoSeller(),this.title="开具红字发票信息表"):this.title="修改单据管理"},getSubjectInfo:function(){var e=this;Object(r["l"])().then((function(t){"1"==e.redSelectInfo.checkedApply?(e.form.buyTaxNo=t.data.nsrsbh,e.form.buyName=t.data.nsrmc):(e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc)}))},getTaxNoSeller:function(){var e=this;Object(r["m"])().then((function(t){var a=t.sellers;if(null!=a&&0!=a.length){for(var n,i=0;i<a.length;i++)if("1"==a[i].status){n=a[i];break}null==n&&(n=a[0]),e.form.cashier=n.payee,e.form.checker=n.checker,e.form.invoicer=n.drawer,"1"==e.redSelectInfo.checkedApply?(e.form.buyAddrTel=n.bankAddrTel,e.form.buyBankAccount=n.bankAccount):(e.form.sellAddrTel=n.bankAddrTel,e.form.sellBankAccount=n.bankAccount)}}))},billDialogClose:function(){this.form={openDate:"",applyPerson:"",billNo:"",invType:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",applyType:"",sourceInvCode:"",sourceInvNo:""},this.hsbz="0",this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}]},fillBillDialog:function(e){var t=this;return console.log("applyRedInvoiceEditModal"),Object(l["g"])(e.id).then((function(e){var a=e.data;a.mergeInvCodeNo=a.invCode+a.invNo,a.mergeSourceInvCodeNo=a.sourceInvCode+a.sourceInvNo,t.form=e.data,"0"==a.applyType||null==a.applyType||void 0==a.applyType?t.redSelectInfo.checkedApply="2":(t.redSelectInfo.checkedApply="1",t.redSelectInfo.checkedBuyer=a.applyType);var n=a.details;t.billDetailsData.length=0;var i=0;t.originalDetails=Object(p["e"])(n);for(var o=0;o<n.length;o++){var r=n[o];r.index=o,r.rate=null!=r.rate||void 0!=r.rate?t.specialRateFormalEcho(r):"",t.billDetailsData.push(r),null!=r.goodsName&&r.goodsName.length>n[i].goodsName.length&&(i=o)}t.selfAdaptionWidth=Object(h["c"])("",t.billDetailsData[i].goodsName),t.open=!0,t.title="修改单据管理",t.isAdd=!1}))},fillBillDialog3:function(e){this.form=e,this.open=!0,this.title="红冲发票",this.getBillNo()},fillBillDialog2:function(e){var t=this;return Object(c["r"])(e).then((function(e){var a=e.data;a.mergeInvCodeNo=a.invCode+a.invNo,a.mergeSourceInvCodeNo=a.sourceInvCode+a.sourceInvNo,t.form.billNo=a.billNo,t.form.invType=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=-1*parseFloat(a.totalAmount),t.originalTotalAmount=a.totalAmount,t.form.totalAmountWithoutTax=-1*parseFloat(a.totalAmountWithoutTax),t.form.totalTaxAmount=-1*parseFloat(a.totalTaxAmount),t.form.note=a.note,t.form.cashier=a.cashier,t.form.cashier=a.checker,t.form.invoicer=a.invoicer,t.form.sourceInvNo=a.invNo,t.form.sourceInvCode=a.invCode,t.form.invDate=a.invDate,t.form.billSource=a.billSource,t.form.billType=a.billType;var n=a.details;t.originalDetails=Object(p["e"])(n),t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=o.rate=null!=o.rate||void 0!=o.rate?t.specialRateFormalEcho(o):"",o.number=null!=o.number&&""!=o.number?-1*parseFloat(o.number):"",o.amountWithTax=-1*parseFloat(o.amountWithTax),o.amountWithoutTax=-1*parseFloat(o.amountWithoutTax),o.taxAmount=-1*parseFloat(o.taxAmount),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="红冲发票",t.getBillNo()}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(d["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){var e=this;this.form.createTime=this.$moment(new Date).format("yyyy-MM-DD HH:mm:ss"),this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),Object(s["h"])().then((function(t){var a=t.data.user;e.form.applyPerson=a.nickName})),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(h["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].units=e.units,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},applyBill:function(){var e=this;Math.abs(parseFloat(this.form.totalAmountWithoutTax))>Math.abs(parseFloat(this.form.totalAmountWithoutTaxNoRed))?this.msgError("总不含税金额不能超过剩余不含税金额"):this.openValid1().then((function(){console.log("校验完成"),e.$refs["form"].validate((function(t){if(t){for(var a=Object(p["e"])(e.billDetailsData),n=0;n<a.length;n++)"免税"==a[n].rate?(a[n].rate=0,a[n].preferentialFlag="1",a[n].preferentialType="免税",a[n].taxZeroRate="1"):"不征税"==a[n].rate?(a[n].rate=0,a[n].preferentialFlag="1",a[n].preferentialType="不征税",a[n].taxZeroRate="2"):(a[n].preferentialFlag="0",a[n].preferentialType="",a[n].taxZeroRate="");e.form.details=a,e.isAdd?Object(l["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.invoiceEnter?e.$confirm("申请成功,是否需要跳转到红字页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/output/redinvoice")})).catch((function(){e.$emit("updateInvoiceTable")})):e.$emit("updateInvoiceTable")):e.msgError(t.msg)})):(console.log("===="+form),Object(r["v"])(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.$emit("updateInvoiceTable")):e.msgError(t.msg)}))),console.log(e.form)}}))}))},openValid1:function(){var e=this,t=Object(r["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},addBillDetailRow:function(){if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){if(parseFloat(this.billDetailsData[e].number)>=0)return this.msgError("红字发票的商品数量不能为正数"),void(this.billDetailsData[e].number="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a){if(Math.abs(parseFloat(this.originalDetails[e].amountWithTax))<Math.abs(parseFloat(a)*parseFloat(t)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].number="");this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2)}else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)}}else if(""!=n&&null!=n){if(Math.abs(parseFloat(this.originalDetails[e].amountWithoutTax))<Math.abs(parseFloat(n)*parseFloat(t)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].number="");this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100,this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2)}else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2)}this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if("-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a){if(Math.abs(parseFloat(this.originalDetails[e].amountWithTax))<Math.abs(parseFloat(t)*parseFloat(a)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].taxPrice="");""!=t&&null!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""!=t&&null!=t||""==i||null==i||(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(2))}}else if(""!=n&&null!=n){if(Math.abs(parseFloat(this.originalDetails[e].amountWithoutTax))<Math.abs(parseFloat(t)*parseFloat(n)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].withoutTaxPrice="");""!=t&&null!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2)):""!=t&&null!=t||""==o||null==o||(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(2))}this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if("-"!=this.billDetailsData[e].amountWithTax&&"-"!=this.billDetailsData[e].amountWithoutTax){if(parseFloat(this.billDetailsData[e].amountWithTax)>=0)return this.billDetailsData[e].amountWithTax="",void this.msgError("红字发票中商品金额不能大于0");if(parseFloat(this.billDetailsData[e].amountWithoutTax)>=0)return this.billDetailsData[e].amountWithoutTax="",void this.msgError("红字发票中商品金额不能大于0");if("0"==this.hsbz){if(Math.abs(parseFloat(this.billDetailsData[e].amountWithoutTax))>Math.abs(parseFloat(this.originalDetails[e].amountWithoutTax)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].amountWithoutTax="")}else if(Math.abs(parseFloat(this.billDetailsData[e].amountWithTax))>Math.abs(parseFloat(this.originalDetails[e].amountWithTax)))return this.msgError("红冲金额不能大于原发票金额"),void(this.billDetailsData[e].amountWithTax="");var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2)}this.judgeExistPNLine(e),this.useCalc()}},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2):""):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(2):"")),this.useCalc()},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=!1,a=0;a<this.billDetailsData.length;a++)if(parseFloat(this.billDetailsData[a].amountWithTax)*parseFloat(this.billDetailsData[e].amountWithTax)<0){t=!0;break}t&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行"))},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discoutLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(p["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100).toFixed(2),a.discountFlag="1",a.standard="",a.units="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1}else this.msgError("请输入折扣金额或折扣率")},sourceChange:function(){var e=this;if(""!=this.form.sourceInvNo&&""!=this.form.sourceInvCode){var t={sourceInvNo:this.form.sourceInvNo,sourceInvCode:this.form.sourceInvCode};gteXXXInfo(t).then((function(t){0!=t.data.length||e.msgError(t.msg)}))}},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){this.deductOpen=!1},validIsNumber:function(e){e.target.value=this.plusOrMinus(e.target.value)},invoiceApplicationForm:function(){this.invoiceEnter=!0}}},f=m,b=(a("00ff"),a("fbfd"),a("2877")),g=Object(b["a"])(f,n,i,!1,null,"6c563163",null);t["default"]=g.exports},ab3b:function(e,t,a){},ab98:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[a("el-input",{attrs:{placeholder:"请输入规则名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.ruleName,callback:function(t){e.$set(e.queryParams,"ruleName",t)},expression:"queryParams.ruleName"}})],1),a("el-form-item",{attrs:{label:"票种范围",prop:"applyInvType"}},[a("el-select",{attrs:{clearable:"",size:"small"},model:{value:e.queryParams.applyInvType,callback:function(t){e.$set(e.queryParams,"applyInvType",t)},expression:"queryParams.applyInvType"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"增值税",value:1}}),a("el-option",{attrs:{label:"非增值税",value:2}})],1)],1),a("el-form-item",{attrs:{label:"适用模块",prop:"applyModul"}},[a("el-select",{model:{value:e.queryParams.applyModul,callback:function(t){e.$set(e.queryParams,"applyModul",t)},expression:"queryParams.applyModul"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"进项",value:1}})],1)],1),a("el-form-item",{attrs:{label:"是否启用",prop:"enable"}},[a("el-select",{model:{value:e.queryParams.enable,callback:function(t){e.$set(e.queryParams,"enable",t)},expression:"queryParams.enable"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:rule:add"],expression:"['system:rule:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:rule:edit"],expression:"['system:rule:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:rule:remove"],expression:"['system:rule:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:rule:export"],expression:"['system:rule:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleMainTable",attrs:{data:e.ruleList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["applyModul"==t.prop?a("span",[e._v(" "+e._s("0"==n.row.enable?"全部":"进项")+" ")]):"enable"==t.prop?a("span",[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(t){return e.handleEnableChange(n.row)}},model:{value:n.row.enable+"",callback:function(t){e.$set(n.row,"enable + ''",t)},expression:"scope.row.enable + ''"}})],1):"applyInvType"==t.prop?a("span",["1"==n.row.applyInvType?[e._v(" 增值税 ")]:[e._v(" 非增值税 ")]],2):"rule"==t.prop?a("span",[e._v(" "+e._s(e.ruleFormat(n.row))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{display:"inline-block",margin:"0 5px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogParams,rules:e.dialogRules,"label-width":"80px"}},[a("div",{staticClass:"dialog-title"},[a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"适用范围",prop:"applyModul"}},[a("el-select",{attrs:{size:"small"},model:{value:e.dialogParams.applyModul,callback:function(t){e.$set(e.dialogParams,"applyModul",t)},expression:"dialogParams.applyModul"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"进项",value:1}}),a("el-option",{attrs:{label:"销项",value:2}})],1)],1),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"票种范围",prop:"applyInvType"}},[a("el-select",{attrs:{size:"small"},on:{change:e.applyInvTypeChange},model:{value:e.dialogParams.applyInvType,callback:function(t){e.$set(e.dialogParams,"applyInvType",t)},expression:"dialogParams.applyInvType"}},[a("el-option",{attrs:{label:"增值税",value:1}}),a("el-option",{attrs:{label:"非增值税",value:2}})],1)],1)],1),a("div",{staticClass:"field-content"},[a("draggable",{attrs:{options:{group:{name:"itxst",pull:"clone",put:!1},sort:!1},animation:"300",move:e.onMove},on:{end:e.end1},model:{value:e.ruleField,callback:function(t){e.ruleField=t},expression:"ruleField"}},[e._l(e.ruleField,(function(t,n){return["占位"!=t.label?a("div",{staticClass:"copy-button el-button"},[e._v(e._s(t.label))]):a("div",{staticStyle:{display:"block",margin:"5px 0"}})]}))],2)],1),a("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.dialogParams.ruleName,callback:function(t){e.$set(e.dialogParams,"ruleName",t)},expression:"dialogParams.ruleName"}})],1),a("div",{staticClass:"filed-select"},[a("div",{staticClass:"filed-select-left"},[a("div",{staticClass:"filed-select-left-title"},[e._v("规则内容")]),a("div",{staticClass:"filed-select-left-body"},[a("draggable",{staticStyle:{height:"100%",width:"100%",overflow:"auto",padding:"10px 20px"},attrs:{group:"itxst",animation:"300",move:e.onMove},on:{end:e.end2},model:{value:e.ruleContent,callback:function(t){e.ruleContent=t},expression:"ruleContent"}},[a("transition-group",{staticClass:"rule-content",staticStyle:{width:"100%",display:"inline-block"}},e._l(e.ruleContent,(function(t,n){return a("div",{key:n,staticClass:"copy-button el-button"},[e._v(" "+e._s(t.label)+" "),a("span",{staticClass:"copy-button-span",on:{click:function(t){return e.deleteField("ruleContent",n)}}},[a("i",{staticClass:"el-icon-delete"})])])})),0)],1)],1)]),a("div",{staticClass:"filed-select-middle"},[a("div",{staticClass:"filed-select-middle-title"},[e._v("规则内容")]),a("div",{staticClass:"filed-select-middle-body"},[a("el-form-item",{attrs:{"label-width":"0px",prop:"rule"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.dialogParams.rule,callback:function(t){e.$set(e.dialogParams,"rule",t)},expression:"dialogParams.rule"}},[a("el-option",{attrs:{label:"等于",value:"0"}}),a("el-option",{attrs:{label:"不等于",value:"-1"}}),a("el-option",{attrs:{label:"大于等于",value:"1"}}),a("el-option",{attrs:{label:"小于等于",value:"2"}}),a("el-option",{attrs:{label:"小于",value:"3"}}),a("el-option",{attrs:{label:"大于",value:"4"}}),a("el-option",{attrs:{label:"包含",value:"5"}}),a("el-option",{attrs:{label:"不包含",value:"6"}})],1)],1)],1)]),a("div",{staticClass:"filed-select-right"},[a("div",{staticClass:"filed-select-right-title"},[e._v("规则内容")]),a("div",{staticClass:"filed-select-right-body"},[a("draggable",{staticStyle:{height:"100%",width:"100%",overflow:"auto",padding:"10px 20px"},attrs:{disabled:e.dialogParams.ruleTargetStr.length>0,group:"itxst",animation:"300",move:e.onMove},on:{end:e.end2},model:{value:e.ruleTarget,callback:function(t){e.ruleTarget=t},expression:"ruleTarget"}},[a("transition-group",{staticClass:"rule-content2",staticStyle:{width:"100%",display:"inline-block"}},e._l(e.ruleTarget,(function(t,n){return a("div",{key:n,staticClass:"copy-button el-button"},[e._v(" "+e._s(t.label)+" "),a("span",{staticClass:"copy-button-span",on:{click:function(t){return e.deleteField("ruleTarget",n)}}},[a("i",{staticClass:"el-icon-delete"})])])})),0)],1)],1),a("el-form-item",{attrs:{prop:"ruleTargetStr","label-width":"0px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.ruleTarget.length>0},model:{value:e.dialogParams.ruleTargetStr,callback:function(t){e.$set(e.dialogParams,"ruleTargetStr",t)},expression:"dialogParams.ruleTargetStr"}})],1)],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("a434"),a("d81d"),a("a15b"),a("99af"),a("caad"),a("ac1f"),a("5319"),a("1980")),l=a.n(r),s=a("b775");function c(e){return Object(s["a"])({url:"/system/rule/list",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/system/rule/"+e,method:"get"})}function d(e){return Object(s["a"])({url:"/system/rule",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/system/rule",method:"put",data:e})}function h(e){return Object(s["a"])({url:"/system/rule/"+e,method:"delete"})}function m(e){return Object(s["a"])({url:"/system/rule/export",method:"get",params:e,responseType:"blob"})}function f(e){return Object(s["a"])({url:"/system/rule/changeRuleEnable",method:"post",data:e})}var b=a("ed08"),g=(a("c38a"),{name:"BillRule",components:{draggable:l.a},data:function(){return{functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,ruleList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,ruleName:null,ruleContentShow:null,ruleContentField:null,rule:null,ruleTargetField:null,ruleTargetStr:null,applyInvType:null,applyModul:null,enable:null,note:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null},ruleOptions:[{dictValue:0,dictLabel:"等于"},{dictValue:-1,dictLabel:"不等于"},{dictValue:1,dictLabel:"大于等于"},{dictValue:2,dictLabel:"小于等于"},{dictValue:3,dictLabel:"小于"},{dictValue:4,dictLabel:"大于"},{dictValue:5,dictLabel:"包含"},{dictValue:6,dictLabel:"不包含"}],form:{},rules:{ruleName:[{required:!0,message:"规则名称不能为空",trigger:"blur"}],ruleContentShow:[{required:!0,message:"规则内容（展示）不能为空",trigger:"blur"}],ruleContentField:[{required:!0,message:"字段组合规则不能为空",trigger:"blur"}],rule:[{required:!0,message:"规则(0等于；-1不等于；1大于等于；2小于等于；3小于；4大于；5包含；6不包含)不能为空",trigger:"blur"}],applyModul:[{required:!0,message:"适用模块：0全部  1进项（叫法具体由数字字典控制）  2销项不能为空",trigger:"blur"}],enable:[{required:!0,message:"是否启用：1是  其他否不能为空",trigger:"blur"}],createBy:[{required:!0,message:"创建人id不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],updateTime:[{required:!0,message:"更新时间不能为空",trigger:"blur"}]},columnsArr:[{label:"规则名称",prop:"ruleName",align:"center",show:!0,width:220,columnSort:20},{label:"规则内容",prop:"ruleContentShow",align:"center",show:!0,width:220,columnSort:0},{label:"规则判定",prop:"rule",align:"center",show:!0,width:220,columnSort:1},{label:"规则目标",prop:"ruleTargetShow",align:"center",show:!0,width:220,columnSort:6},{label:"是否启用",prop:"enable",align:"center",show:!0,width:220,columnSort:3},{label:"适用范围",prop:"applyModul",align:"center",show:!0,width:220,columnSort:4},{label:"票种范围",prop:"applyInvType",align:"center",show:!0,width:220,columnSort:5}],sortParam:{column:"",columnOrder:""},sourceRuleField:[{label:"销方名称",value:"sellName",isAmount:!1,checkEntryType:1},{label:"销方税号",value:"sellTaxNo",isAmount:!1,checkEntryType:1},{label:"销方地址电话",value:"sellAddrTel",isAmount:!1,checkEntryType:1},{label:"销方银行账号",value:"sellBankAccount",isAmount:!1,checkEntryType:1},{label:"备注",value:"note",isAmount:!1,checkEntryType:1},{label:"总不含税金额",value:"totalAmountWithoutTax",isAmount:!0,checkEntryType:1,isOther:!0},{label:"计税合计",value:"totalAmount",isAmount:!0,checkEntryType:1,isOther:!0},{label:"占位",value:null},{label:"购方名称",value:"buyName",isAmount:!1,checkEntryType:1},{label:"购方税号",value:"buyTaxNo",isAmount:!1,checkEntryType:1},{label:"购方地址电话",value:"buyAddrTel",isAmount:!1,checkEntryType:1},{label:"购方银行账号",value:"buyBankAccount",isAmount:!1,checkEntryType:1},{label:"总税额",value:"totalTaxAmount",isAmount:!0,checkEntryType:1,isOther:!0},{label:"开票日期",value:"invDate",isAmount:!1,checkEntryType:1,isOther:!0},{label:"占位",value:null},{label:"明细税率",value:"rate",isAmount:!0,checkEntryType:0},{label:"明细税额",value:"taxAmount",isAmount:!0,checkEntryType:0},{label:"明细含税金额",value:"amountWithTax",isAmount:!0,checkEntryType:0},{label:"明细不含税金额",value:"amountWithoutTax",isAmount:!0,checkEntryType:0},{label:"明细货物名称",value:"goodsName",isAmount:!1,checkEntryType:0},{label:"明细不含税单价",value:"withoutTaxPrice",isAmount:!0,checkEntryType:0},{label:"明细规格型号",value:"standard",isAmount:!1,checkEntryType:0},{label:"占位",value:null},{label:"明细计量单位",value:"unit",isAmount:!1,checkEntryType:0},{label:"明细数量",value:"number",isAmount:!0,checkEntryType:0},{label:"开票人",value:"invoicer",isAmount:!1,checkEntryType:1},{label:"收款人",value:"cashier",isAmount:!1,checkEntryType:1},{label:"复核人",value:"checker",isAmount:!1,checkEntryType:1},{label:"占位",value:null},{label:"+",value:"+",isAmount:!1,isOperation:!0},{label:"-",value:"-",isAmount:!1,isOperation:!0},{label:"*",value:"*",isAmount:!1,isOperation:!0},{label:"/",value:"/",isAmount:!1,isOperation:!0},{label:"(",value:"(",isAmount:!1,isOperation:!0},{label:")",value:")",isAmount:!1,isOperation:!0}],ruleField:[],dialogParams:{applyModul:0,applyInvType:1,ruleName:"",rule:"0",ruleTargetStr:""},dialogRules:{ruleName:[{required:!0,message:"规则名称不能为空",trigger:"blur"}]},ruleContent:[],ruleTarget:[]}},created:function(){var e=this;this.ruleField=Object(b["e"])(this.sourceRuleField),this.getList(),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{ruleFormat:function(e,t){return this.selectDictLabel(this.ruleOptions,e.rule)},applyInvTypeChange:function(){if(1==this.dialogParams.applyInvType)this.ruleField=Object(b["e"])(this.sourceRuleField);else{var e=this.sourceRuleField.filter((function(e,t,a){return!(!e.isOther&&!e.isOperation)}));e.splice(4,1,{label:"占位",value:null}),this.ruleField=Object(b["e"])(e),this.ruleContent=[],this.ruleTarget=[]}},getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(b["e"])(this.queryParams),Object(b["e"])(this.sortParam));c(t).then((function(t){e.ruleList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,ruleName:null,ruleContentShow:null,ruleContentField:null,rule:null,ruleTargetField:null,ruleTargetStr:null,applyInvType:null,applyModul:null,enable:null,note:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(b["e"])(e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加发票规则"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;u(a).then((function(e){t.dialogParams=e.data,t.ruleContent=[],t.ruleTarget=[];for(var a=e.data.ruleContentShow.split(","),n=e.data.ruleContentField.split(","),i=0,o=n.length;i<o;i++){var r={label:a[i],value:n[i]};t.ruleContent.push(r)}if(""==e.data.ruleTargetStr.length)for(var l=e.data.ruleTargetField.split(","),s=e.data.ruleTargetShow.split(","),c=0,u=l.length;c<u;c++){var d={label:s[c],value:l[c]};t.ruleTarget.push(d)}t.open=!0,t.title="修改发票规则"}))},submitForm:function(){var e=this;0!=this.ruleTarget.length||""!=this.dialogParams.ruleTargetStr?this.$refs["dialogForm"].validate((function(t){if(t){for(var a=Object(b["e"])(e.dialogParams),n=[],i=[],o=0,r=e.ruleContent.length;o<r;o++)n.push(e.ruleContent[o].label),i.push(e.ruleContent[o].value);for(var l=[],s=[],c=0,u=e.ruleTarget.length;c<u;c++)s.push(e.ruleTarget[c].label),l.push(e.ruleTarget[c].value);a.ruleContentShow=n.join(","),a.ruleContentField=i.join(","),a.ruleTargetField=l.join(","),s.length>0?a.ruleTargetShow=s.join(","):a.ruleTargetShow=e.dialogParams.ruleTargetStr;var h=null,m=Object(b["e"])(e.ruleContent);m=m.concat(Object(b["e"])(e.ruleTarget));for(var f=0,g=m.length;f<g;f++)if([0,1].includes(m[f].checkEntryType)){h=m[f].checkEntryType;break}a.checkEntryType=h,null!=e.dialogParams.id?p(a).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):d(a).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))}})):this.msgError("规则目标字段和规则目标字段字符串不能同时为空")},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除发票规则编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return h(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有发票规则数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return m(t)})).then((function(t){e.currencyDownload(t,"发票规则数据.xls",e)})).catch((function(){}))},handleEnableChange:function(e){var t=this,a={};a.ids=e.id.split("nothing"),a.status="1"==e.enable?"0":"1",f(a).then((function(e){200==e.code?("1"==a.status?t.msgSuccess("启用成功"):t.msgSuccess("禁用成功"),t.getList()):t.msgError(e.msg)})).catch((function(){}))},end1:function(e){var t=!0,a=Object(b["e"])(this.ruleContent);a=a.concat(Object(b["e"])(this.ruleTarget));for(var n=1,i=a.length;n<i;n++)if([0,1].includes(a[0].checkEntryType)&&[0,1].includes(a[n].checkEntryType)&&a[0].checkEntryType!=a[n].checkEntryType){t=!1;break}if("rule-content"==e.to.getAttribute("class")){for(var o=e.oldIndex,r=!1,l=0,s=this.ruleContent.length;l<s;l++)l!=e.newIndex&&(this.ruleContent[l].isAmount&&!0,this.ruleContent[l].isOperation&&(r=!0));if(r&&!this.ruleField[o].isAmount){this.msgError("只有金额能进行四则运算");var c=Object(b["e"])(this.ruleContent);c=c.filter((function(e,t,a){return!(!e.isAmount&&!e.isOperation)})),this.$set(this,"ruleContent",c)}t||(this.msgError("发票主体字段不可与发票明细字段同在一个规则中"),this.ruleContent.splice(e.newIndex,1))}else"rule-content2"==e.to.getAttribute("class")&&(t||(this.msgError("发票主体字段不可与发票明细字段同在一个规则中"),this.ruleTarget.splice(e.newIndex,1)))},end2:function(e){},onMove:function(e,t){e.draggedContext.index},deleteField:function(e,t){this[e].splice(t,1)},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.ruleMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.ruleList,"ruleMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}}),v=g,y=(a("25dc"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"6c8a556a",null);t["default"]=_.exports},acf4:function(e,t,a){},ad11:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/taxno/"+e+"/getTaxnoStockInfo",method:"get"})}function o(e){return Object(n["a"])({url:"/output/customer/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/output/goods/list",method:"get",params:e})}},ad77:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"票据类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择票据类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"票据代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入票据代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"票据号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入票据号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"票据日期",prop:"invDate"}},[a("el-input",{attrs:{placeholder:"请输入票据日期",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invDate,callback:function(t){e.$set(e.queryParams,"invDate",t)},expression:"queryParams.invDate"}})],1),a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.queryParams.fileId,callback:function(t){e.$set(e.queryParams,"fileId",t)},expression:"queryParams.fileId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"报销状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择报销状态",clearable:"",size:"small"},model:{value:e.queryParams.reimStatus,callback:function(t){e.$set(e.queryParams,"reimStatus",t)},expression:"queryParams.reimStatus"}},e._l(e.reimStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"流程单号",prop:"reimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入流程单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reimBillNo,callback:function(t){e.$set(e.queryParams,"reimBillNo",t)},expression:"queryParams.reimBillNo"}})],1),a("el-form-item",{attrs:{label:"BPM报销单号",prop:"bpmBillNo"}},[a("el-input",{attrs:{placeholder:"请输入BPM报销单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bpmBillNo,callback:function(t){e.$set(e.queryParams,"bpmBillNo",t)},expression:"queryParams.bpmBillNo"}})],1),a("el-form-item",{attrs:{label:"AP单号",prop:"apBillNo"}},[a("el-input",{attrs:{placeholder:"请输入AP单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.apBillNo,callback:function(t){e.$set(e.queryParams,"apBillNo",t)},expression:"queryParams.apBillNo"}})],1),a("el-form-item",{attrs:{label:"结算单号",prop:"settlementNo"}},[a("el-input",{attrs:{placeholder:"请输入结算单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.settlementNo,callback:function(t){e.$set(e.queryParams,"settlementNo",t)},expression:"queryParams.settlementNo"}})],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证制单人",prop:"voucherMaker"}},[a("el-input",{attrs:{placeholder:"请输入凭证制单人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherMaker,callback:function(t){e.$set(e.queryParams,"voucherMaker",t)},expression:"queryParams.voucherMaker"}})],1),a("el-form-item",{attrs:{label:"凭证编码",prop:"voucherCode"}},[a("el-input",{attrs:{placeholder:"请输入凭证编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherCode,callback:function(t){e.$set(e.queryParams,"voucherCode",t)},expression:"queryParams.voucherCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:add"],expression:"['ticket:personalOther:add']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("新增")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:hand"],expression:"['ticket:personalOther:hand']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleManual(t)}}},[e._v("手工录入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:ocr"],expression:"['ticket:personalOther:ocr']"}],attrs:{icon:"el-icon-picture-outline"},nativeOn:{click:function(t){return e.handleImage(t)}}},[e._v("图片识别")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:edit"],expression:"['ticket:personalOther:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:remove"],expression:"['ticket:personalOther:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:export"],expression:"['ticket:personalOther:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-rank",size:"mini",disabled:e.multiple},on:{click:e.handleMove}},[e._v("迁移")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"personalOtherMainTable",attrs:{data:e.personalOtherList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"reimStatus"==t.prop?a("span",[e._v(" "+e._s(e.reimStatusFormat(n.row))+" ")]):"uploadTime"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.uploadTime,"{y}-{m}-{d}"))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):e.dataJsonFieldArr.includes(t.prop)?a("span",[e._v(" "+e._s(e.dataJsonFieldFormat(n.row,t.prop))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"可用报销金额",align:"center",width:"100",prop:"usableReimAmount"}}),a("u-table-column",{attrs:{label:"流程单号",align:"center",width:"100",prop:"reimBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"BPM报销单号",align:"center",width:"100",prop:"bpmBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"AP单号",align:"center",width:"100",prop:"apBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"结算单号",align:"center",width:"100",prop:"settlementNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证号",align:"center",width:"100",prop:"voucherNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证制单人",align:"center",width:"100",prop:"voucherMaker","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证编码",align:"center",width:"100",prop:"voucherCode","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:edit"],expression:"['ticket:personalOther:edit']"}],staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{on:{click:function(t){return e.downloadImg("previewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:e.isUpdate&&e.form.fileUrl?"1200px":"510px","append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.manualDialogClose}},[a("div",{staticStyle:{display:"flex"}},[a("el-form",{ref:"form",staticStyle:{flex:"1",overflow:"auto"},attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"票据类型"}},[a("el-select",{attrs:{placeholder:"请选择票据类型",disabled:e.isUpdate},on:{change:e.invTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.filterInvtypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("div",{staticStyle:{"max-height":"60vh",overflow:"auto"}},[e._l(e.InputField.field,(function(t,n){return a("el-form-item",{key:n,attrs:{label:e.InputField.name[n],prop:t}},["invDate"==t?[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:""},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}})]:[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small"},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}})]],2)})),e.InputField.field?a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.fileId,callback:function(t){e.$set(e.form,"fileId",t)},expression:"form.fileId"}},e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})})),1)],1):e._e(),e.form.id?e._e():a("el-form-item",{attrs:{label:"发票原图",prop:"fileUrl"}},[a("el-upload",{ref:"manualUpload",staticClass:"manual-upload",attrs:{limit:1,accept:"image/*,.pdf,.ofd",headers:e.manualUpload.headers,action:e.manualUpload.url+"?updateSupport="+e.manualUpload.updateSupport,disabled:e.manualUpload.isUploading,"on-progress":e.handleManualFileUploadProgress,"on-success":e.handleManualFileSuccess,"on-remove":e.handleManualRemove,"auto-upload":!0,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("点击上传")])])])],1)],2)],1),e.isUpdate&&e.form.fileUrl?a("div",{staticClass:"public-update-right-div"},[a("div",{staticStyle:{flex:"1",overflow:"hidden",border:"2px dashed #ccc",padding:"10px"}},[e.form.fileUrl&&"pdf"==e.form.fileUrl.split(".").pop().toLowerCase()?[a("div",{staticStyle:{width:"100%",position:"relative"},attrs:{draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}},[a("pdf",{ref:"pdf",staticStyle:{width:"100%"},attrs:{src:e.pdfUrldata}})],1)]:[a("img",{ref:"updatePreviewImg",class:[{"medium-zoom-image--opened":e.zoomOverlay}],staticStyle:{width:"100%",position:"relative"},attrs:{src:e.form.fileUrl,id:"zoomImg",draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),a("div",{staticClass:"public-img-operation2"},[a("div",{staticClass:"public-img-left-operation2"},[a("div",{on:{click:function(t){return e.restoreImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")])]),a("div",{staticClass:"public-img-right-operation2"},[a("div",{on:{click:function(t){return e.downloadImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),e.currOperationRow.fileUrl&&"pdf"==e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?[a("div",{on:{click:function(t){return e.printPdf("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]:[a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]],2)])]):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.isUploading},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative",width:"100%"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e(),a("iframe",{staticStyle:{height:"60vh",width:"100%",position:"fixed",bottom:"-1000px"},attrs:{id:"printIFrame",src:e.getLocalhostIFrame(e.currOperationRow.fileUrl)}}),a("upload-file-dialog",{ref:"uploadFileDialog",on:{discernFileResult:e.discernFileResult}}),a("file-analysis",{ref:"fileAnalysis",attrs:{personal:"1"},on:{updateInvoiceTable:e.updateInvoiceTable}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"迁移发票",visible:e.moveDialog.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.moveDialog,"open",t)},close:e.moveDialogClose}},[a("div",{staticClass:"move-wrapper"},[a("div",{staticClass:"move-wrapper-left"},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.moveDialog.searchDeptName,callback:function(t){e.$set(e.moveDialog,"searchDeptName",t)},expression:"moveDialog.searchDeptName"}})],1),a("div",{staticClass:"head-container tree-wrapper"},[a("el-tree",{ref:"moveTree",attrs:{data:e.moveDialog.deptOptions,props:e.moveDialog.defaultProps,"show-checkbox":"","check-strictly":!0,"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.fmoveFilterNode,"node-key":"id","default-expand-all":""},on:{"check-change":e.handleCheckChange}})],1)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitMove}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.moveDialog.open=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("4de4"),a("d3b7"),a("caad"),a("d81d"),a("ac1f"),a("5319"),a("e9c4"),a("25f0"),a("b64b"),a("cf99")),l=a("606d"),s=a("4c80"),c=(a("c0c7"),a("a5e7")),u=a("35d5"),d=a("858e"),p=a("ed08"),h=a("5f87"),m=a("c38a"),f=a("fcb7"),b={name:"PersonalOther",components:{UploadFileDialog:c["default"],FileAnalysis:u["default"],pdf:d["a"]},data:function(){return{isUploading:!1,imageUploadFileList:[],showUploadFileProgress:!1,percentage:0,uploadStatus:null,images:{ofdIcon:a("086e"),pdfIcon:a("55fc")},imageUpload:{open:!1,title:"图片识别(最多选择9个文件)",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(h["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},base64Arr:{},uploadResult:{},pdfUrldata:null,zoomOverlay:!1,fileOptions:[],functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,personalOtherList:[],title:"",open:!1,invTypeOptions:[],dataSourceOptions:[],reimStatusOptions:[],queryParams:{pageNum:1,pageSize:500,invType:null,invCode:null,invNo:null,invDate:null,fileId:null,reimStatus:null,voucherNo:null,voucherType:null,voucherDate:null},form:{fileId:null,fileUrl:null},rules:{fileUrl:[{required:!0,message:"发票文件不能为空"}]},InputField:{},columnsArr:[{label:"票据类型",prop:"invType",align:"center",show:!0,width:180,columnSort:0},{label:"报销状态",prop:"reimStatus",align:"center",show:!0,width:120,columnSort:4},{label:"票据号码",prop:"invNo",align:"center",show:!0,width:120,columnSort:1},{label:"票据代码",prop:"invCode",align:"center",show:!0,width:180,columnSort:2},{label:"票据日期",prop:"invDate",align:"center",show:!0,width:180,columnSort:3},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:150,columnSort:4},{label:"数据来源",prop:"dataSource",align:"center",show:!0,width:220,columnSort:6},{label:"发票所在地",prop:"location",align:"center",show:!0,width:220,columnSort:6},{label:"出发地",prop:"departureStation",align:"center",show:!0,width:220,columnSort:6},{label:"目的地",prop:"arrivalStation",align:"center",show:!0,width:220,columnSort:6},{label:"火车票ID",prop:"ticketId",align:"center",show:!0,width:220,columnSort:6},{label:"票价",prop:"fare",align:"center",show:!0,width:220,columnSort:6},{label:"民航发展基金",prop:"civilAviationFund",align:"center",show:!0,width:220,columnSort:6},{label:"燃油附加费",prop:"fuelSurcharge",align:"center",show:!0,width:220,columnSort:6},{label:"其他税费",prop:"otherTaxes",align:"center",show:!0,width:220,columnSort:6},{label:"印刷序号",prop:"serialNo",align:"center",show:!0,width:220,columnSort:6},{label:"乘车时间",prop:"boardingTime",align:"center",show:!0,width:220,columnSort:6},{label:"购方名称(旅客姓名)",prop:"buyName",align:"center",show:!0,width:220,columnSort:6},{label:"购方税号(身份证号)",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:6},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"未税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:6},{label:"所属发票夹",prop:"fileName",align:"center",show:!0,width:220,columnSort:7}],dataJsonFieldArr:["location","departureStation","arrivalStation","ticketId","fare","civilAviationFund","fuelSurcharge","otherTaxes","serialNo","boardingTime","buyName","buyTaxNo","sellName","sellTaxNo","totalWithoutTaxMoney"],sortParam:{column:"",columnOrder:""},isUpdate:!1,originImageOpen:!1,currOriginImageUrl:null,aspectRatio:null,currOperationRow:{},imgShowParams:{deg:0,scale:1},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},operationIndex:0,operationRowArr:[],currDeptName:"",manualUpload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(h["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},moveDialog:{open:!1,deptOptions:[],searchDeptName:null,defaultProps:{children:"children",label:"label"},transferFileId:null,fileOptions:[]}}},computed:{judgeFileUrl:function(){return function(e){return"pdf"==e.name.split(".").pop()?this.images.pdfIcon:"ofd"==e.name.split(".").pop()?this.images.ofdIcon:e.url}},progressStatus:function(){return void 0==this.uploadStatus?null:this.uploadStatus?"success":"exception"},filterInvtypeOptions:function(){if(this.form.id)return this.invTypeOptions;var e=this.invTypeOptions.filter((function(e){return["0004"].includes(e.dictValue)}));return e}},created:function(){var e=this;this.getList(),this.getDicts("other_ticket").then((function(t){e.invTypeOptions=t.data})),this.getDicts("other_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("reim_status").then((function(t){e.reimStatusOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),Object(l["i"])().then((function(t){e.fileOptions=t.rows,e.form.fileId=e.fileOptions[0].id}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(p["e"])(this.queryParams),Object(p["e"])(this.sortParam));(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),Object(r["f"])(t).then((function(t){e.personalOtherList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},reimStatusFormat:function(e,t){return this.selectDictLabel(this.reimStatusOptions,e.reimStatus)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invType:null,invCode:null,invNo:null,invDate:null,totalAmount:null,totalAmountWithoutTax:null,totalTaxAmount:null,totalMoneyUp:null,uniqueStr:null,uploadTime:null,fileUrl:null,dataJson:null,dataSource:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null,fileId:this.fileOptions[0].id},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(p["e"])(e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加其他票据"},handleManual:function(){var e=this;this.isUpdate=!1,this.open=!0,this.title="添加其他票据",this.$nextTick((function(){e.$refs.manualUpload.clearFiles(),e.$refs.form.clearValidate()}))},handleImage:function(){this.$refs.uploadFileDialog.uploadFileDialogShow()},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},updateInvoiceTable:function(){this.getList()},handleUpdate:function(e){var t=this;if(this.isUpdate=!0,void 0!=e.id?this.currOperationRow=e:this.currOperationRow=this.rows[0],"1"!=this.currOperationRow.reimStatus)if("2"!=this.currOperationRow.reimStatus){var a=e.id||this.ids;this.getEl(e.id?e.invType:this.rows[0].invType),Object(r["e"])(a).then((function(e){var a;t.form=Object(p["e"])(e.data),t.open=!0,t.title="修改其他票据","pdf"==(null===(a=t.form.fileUrl)||void 0===a?void 0:a.split(".").pop().toLowerCase())&&t.pdfPreviewUrl(t.form.fileUrl)}))}else this.msgError("发票已部分报销，不允许修改");else this.msgError("发票已全额报销，不允许修改")},pdfPreviewUrl:function(e){var t=this;if(!e)return"";var a="https://unpkg.com/pdfjs-dist@2.0.943/cmaps/",n=d["a"].createLoadingTask({url:"/einvoices"+e.replace("https://vat.zzhcn.net",""),withCredentials:!1,cMapUrl:a,cMapPacked:!0});n.promise.then((function(e){t.pdfUrldata=n})).catch((function(){return t.msgError("加载失败"),""}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=Object(p["e"])(e.form);if("17"===a.invType&&"0"==a.multiFlag&&(a.assistantBuyName=""),"0004"!=a.invType||a.invNo||(a.invNo=e.$moment(new Date).format("YYYYMMDDHHmmssSSS")),null!=e.form.id)a.totalAmount=a.totalMoney,a.usableReimAmount=a.totalAmount,delete a.dataJson,a.dataJson=JSON.stringify(e.form),a.data=JSON.stringify(e.form),Object(r["g"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}));else{var n={};for(var i in a.totalAmount=a.totalMoney,e.form)n[i]=e.form[i];a.dataJson=JSON.stringify(n),a.data=JSON.stringify(n),a.dataSource="01",Object(r["a"])(a).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}}}))},handleDelete:function(){var e=this;this.$confirm('<span style="word-break: break-all;">是否确认删除所选发票?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(m["g"])(100,"删除中",e),e.operationIndex=0,e.operationRowArr=e.rows,e.deleteInvoiceLogic()}))},deleteInvoiceLogic:function(){var e=this;this.operationIndex++;var t={fileId:this.operationRowArr[this.operationIndex-1].fileId,id:this.operationRowArr[this.operationIndex-1].id};Object(r["c"])(t).then((function(t){200==t.code?e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除成功"):e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除失败，"+t.msg),e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())}))},handleExport:function(){var e=this,t=Object(p["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出所有其他发票（个人）数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(m["g"])(10,"导出中",e),Object(r["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"其他发票（个人）.xls",e)})).catch((function(){}))},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},manualDialogClose:function(){this.InputField={},this.form.invType=null,this.imageUploadFileList=[];var e=document.getElementById("zoomImg");e&&(e.style.top=0,e.style.left=0),this.currOperationRow={}},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},imageUploadFileChange:function(e,t){var a=this;console.log(e,t),this.imageUploadFileList=t,Object(p["g"])(e.raw||e).then((function(t){var n=Object(p["p"])(t.split(",")[0]);a.base64Arr[e.uid]=n+"_"+t.split(",")[1],a.showUploadFileProgress=!0;var i=1e3,r=a;r.percentage=0;var l=setInterval((function(){r.percentage++,r.percentage>=99?clearInterval(l):r.percentage>80?i=2e3:r.percentage>50&&(i=1500)}),i),c=new FormData;c.append("baseArray",n+"_"+t.split(",")[1]),r.isUploading=!0,Object(s["d"])(c).then((function(e){if(r.isUploading=!1,clearInterval(l),r.percentage=100,200==e.code?(r.uploadStatus=!0,r.msgSuccess("发票上传成功")):(r.uploadStatus=!1,r.msgError(e.msg)),"[object Array]"==Object.prototype.toString.call(e.data)){if(r.uploadResult=e.data[0],r.uploadResult.invType==r.form.invType){var t=e.data[0],a=JSON.parse(t.data);Object.assign(t,a);var n,i=Object(o["a"])(r.InputField.field);try{for(i.s();!(n=i.n()).done;){var s=n.value;t[s]&&(r.form[s]=t[s])}}catch(c){i.e(c)}finally{i.f()}}}else r.uploadResult=e.data;r.form["fileUrl"]=r.uploadResult.fileUrl,r.uploadResult.fileUrl&&r.$refs.form.clearValidate("fileUrl")})).catch((function(){r.isUploading=!1}))}))},previewRemove:function(e){this.$refs.imageUpload.handleRemove(e),this.showUploadFileProgress=!1,this.percentage=0,this.uploadStatus=null},handleRemove:function(e,t){this.imageUploadFileList=t,delete this.base64Arr[e.uid]},invTypeChange:function(){this.getEl(this.form.invType)},getEl:function(e){void 0!=this.$refs.form&&this.$refs.form.clearValidate();for(var t=Object(p["i"])(e),a={invType:this.form.invType},n=0,i=t.field.length;n<i;n++)a[t.field[n]]=null;a.fileId=this.form.fileId,a.fileUrl=this.form.fileUrl,this.form=Object(p["e"])(a),this.InputField=Object(p["e"])(t);for(var o=0,r=t.OrRequired.length;o<r;o++)if("1"==t.OrRequired[o]){var l=t.name[o]+"不能为空";"01"==e||"08"==e||"03"==e||"04"==e||"10"==e||"11"==e||"15"==e?"invCode"==t.field[o]?this.rules[t.field[o]]=[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}]:"invNo"==t.field[o]&&(this.rules[t.field[o]]=[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]):"totalAmount"==t.field[o]||"totalAmountWithoutTax"==t.field[o]||"totalTaxAmount"==t.field[o]||"totalAmount"==t.field[o]?this.rules[t.field[o]]=[{pattern:/^-?[0-9]+(\.[0-9]+)?$/,message:"请输入正确的数字",trigger:["blur","change"]},{required:!0,message:"金额不能为空",trigger:["blur","change"]}]:this.rules[t.field[o]]=[{required:!0,message:l,trigger:["blur","change"]}]}this.rules["fileUrl"]=[{required:!0,message:"发票文件不能为空",trigger:["blur","change"]}],this.rules["fileId"]=[{required:!0,message:"所属票夹不能为空",trigger:["blur","change"]}]},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(p["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},printPdf:function(){document.getElementById("printIFrame").contentWindow.print()},getLocalhostIFrame:function(e){return e?"/einvoices"+e.replace("https://vat.zzhcn.net",""):""},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.personalOtherMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.personalOtherList,"personalOtherMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},dataJsonFieldFormat:function(e,t){var a="";return e.dataJson?(a=JSON.parse(e.dataJson),a[t]?"":a[t]):""},handleManualFileUploadProgress:function(e,t,a){this.manualUpload.isUploading=!0},handleManualFileSuccess:function(e,t,a){this.manualUpload.isUploading=!1,200==e.code?(this.msgSuccess(e.msg),this.form.fileUrl=e.data[0],this.$refs["form"].validateField("fileUrl")):this.msgError(e.msg)},handleManualRemove:function(){this.form.fileUrl="",this.$refs["form"].validateField("fileUrl")},handleMove:function(){var e=this;this.$vLoading.show(),Object(f["f"])().then((function(t){e.moveDialog.deptOptions=t.data,e.$vLoading.hide(),e.moveDialog.open=!0}))},fmoveFilterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleCheckChange:function(e,t,a){t&&this.$refs.moveTree.setCheckedKeys([e.id])},submitMove:function(){var e=this,t=this.$refs.moveTree.getCheckedNodes();if(t.length){var a={invInfoId:this.rows.map((function(e){return e.id})),sourceFileIds:this.rows.map((function(e){return e.fileId})),deptId:t[0].id};this.$vLoading.show(),Object(r["b"])(a).then((function(t){200==t.code?(e.msgSuccess("迁移成功"),e.moveDialog.open=!1,e.getList()):e.msgError(t.msg)})).finally((function(){e.$vLoading.hide()}))}else this.msgError("迁移组织不能为空")},moveDialogClose:function(){this.moveDialog.searchDeptName="",this.$refs.moveTree.setCheckedKeys([])}}},g=b,v=(a("bcdb"),a("2877")),y=Object(v["a"])(g,n,i,!1,null,"2fb99d28",null);t["default"]=y.exports},ae27:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container",staticStyle:{height:"100%"},attrs:{"element-loading-text":"数据同步中","element-loading-custom-class":"el-loading-main","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-alert",{attrs:{title:"确认签名仅在征期内进行，签名后若还未进行申报则支持撤销签名（撤销签名后不影响之前已勾选发票的勾选状态）",type:"warning",closable:!1,"show-icon":""}}),e.statisticsResultMsg?a("el-alert",{attrs:{title:"统计结果："+e.statisticsResultMsg,type:"success",closable:!1,"show-icon":""}}):e._e(),a("div",{staticClass:"sign_tips"},[e._v(" 当前状态： "),"0"==e.tjzt?a("b",[e._v("尚未申请统计")]):e._e(),"1"==e.tjzt?a("b",[e._v("已勾选未签名"),a("span",{staticClass:"sign_tips_catching"},[e._v(e._s(e.getInvoiceNum))]),e._v("张发票")]):e._e(),"2"==e.tjzt?a("b",[e._v("已勾选已签名"),a("span",{staticClass:"sign_tips_catching"},[e._v(e._s(e.getInvoiceNum))]),e._v("张发票")]):e._e(),"0"==e.tjzt?a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:statist"],expression:"['income:gxrz:statist']"}],staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini",disabled:!e.requestLoading},on:{click:function(t){return e.signNameSure(1)}}},[e._v("申请统计"+e._s(e.requestLoading?"":"（正在申请统计...）"))]):e._e(),"1"==e.tjzt||"2"==e.tjzt?a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:statist"],expression:"['income:gxrz:statist']"}],staticStyle:{"margin-left":"30px"},attrs:{type:"warning",icon:"el-icon-close",size:"mini",disabled:!e.requestLoading},on:{click:function(t){return e.signNameSure(2)}}},[e._v("撤销统计"+e._s(e.requestLoading||"2"!=e.requestType?"":"（正在撤销统计...）"))]):e._e(),"1"==e.tjzt?a("el-button",{directives:[{name:"has-permi",rawName:"v-has-permi",value:["income:gxrz:statist"],expression:"['income:gxrz:statist']"}],staticStyle:{"margin-left":"30px"},attrs:{type:"success",icon:"el-icon-check",size:"mini",disabled:!e.requestLoading},on:{click:function(t){return e.signNameSure(3)}}},[e._v("确认签名"+e._s(e.requestLoading||"3"!=e.requestType?"":"（正在确认签名...）"))]):e._e()],1),a("el-table",{attrs:{data:0==e.tjxx.length?e.defaultData:e.tjxx}},[a("el-table-column",{attrs:{label:"发票类型",align:"center",prop:"fplx"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getInvoiceTypeName(t.row.fplx))+" ")]}}])}),a("el-table-column",{attrs:{label:"合计份数",align:"center",prop:"hjfs"}}),a("el-table-column",{attrs:{label:"有效抵扣税额合计",align:"center",prop:"sehj"}}),a("el-table-column",{attrs:{label:"出口转内销证明份数",align:"center",prop:"ckznxzmfs"}}),a("el-table-column",{attrs:{label:"出口转内销证明有效抵扣税额合计",align:"center",prop:"ckznxsehj"}}),a("el-table-column",{attrs:{label:"其他发票份数",align:"center",prop:"qtfpfs"}}),a("el-table-column",{attrs:{label:"其他发票有效抵扣税额合计",align:"center",prop:"qtyxdksehj"}})],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"确认签名密码",visible:e.signNamePassOpen,width:"400px","append-to-body":"",id:"signNamePassModal"},on:{"update:visible":function(t){e.signNamePassOpen=t},close:e.signNamePassDialogClose}},[a("div",[a("el-form",{ref:"signNamePassForm",attrs:{model:e.signNamePassForm,rules:e.signNamePassFormRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"签名密码",prop:"qrmm"}},[a("el-input",{attrs:{type:"password"},model:{value:e.signNamePassForm.qrmm,callback:function(t){e.$set(e.signNamePassForm,"qrmm",t)},expression:"signNamePassForm.qrmm"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitSignNamePass}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.signNamePassOpen=!1}}},[e._v("取 消")])],1)])],1)},i=[],o=a("45c6"),r=a("ed3b"),l=a("b526"),s=a("7b93"),c=a("c38a"),u={name:"signname",components:{TotalRowTable:l["default"],MyElProgress:s["a"]},data:function(){return{tjzt:null,tjsjstr:null,tjwcsj:null,tjxx:[],defaultData:[{fplx:"0",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"1",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"2",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"3",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"4",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"5",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"6",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"7",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"},{fplx:"8",hjfs:"-",sehj:"-",ckznxzmfs:"-",ckznxsehj:"-",qtfpfs:"-",qtyxdksehj:"-"}],routeLoading:!1,pageSizes:[],tableHeight:null,loading:!1,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,gxrzList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],gxztOptions:[],glztOptions:[],abnormalTypeOptions:[],operationStateOptions:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,buyTaxNo:null,buyName:null,sellTaxNo:null,sellName:null,invType:null,state:null,gxzt:"0",gxTime:null,totalWithoutAmount:null,taxAmount:null,validTaxAmount:null,sssq:null,glzt:null,abnormalType:null,operationState:null,operationMsg:null,deptId:null,gxMode:null,cxMode:null},form:{},rules:{},gxModeOptions:[],cxModeOptions:[],functionName:"签名中",showProgress:!1,loadingTime:null,signNamePassOpen:!1,signNamePassForm:{qrmm:null},signNamePassFormRules:{qrmm:[{required:!0,message:"密码不能为空",trigger:["blur","change"]}]},statisticsStatusOverLoadTimes:0,requestLoading:!0,requestType:null,statisticsResultMsg:""}},computed:{getInvoiceNum:function(){if(0!=this.tjxx.length)for(var e=0,t=this.tjxx.length;e<t;e++)if("8"==this.tjxx[e].fplx)return parseFloat(this.tjxx[e].hjfs);return 0}},created:function(){this.initGet()},methods:{initGet:function(){var e=this;this.routeLoading=!0,Object(o["e"])().then((function(t){var a;200==t.code?(e.requestLoading=!0,e.tjzt=t.data.tjzt,e.tjwcsj=t.data.tjwcsj,e.tjsjstr=t.data.tjsjstr,e.tjxx=(null===(a=t.data)||void 0===a||null===(a=a.tjxx)||void 0===a?void 0:a.dktjxx)||[],e.routeLoading=!1):(e.msgError(t.msg),e.statisticsStatusOverLoadTimes<3?(e.statisticsStatusOverLoadTimes++,e.initGet()):(e.routeLoading=!1,e.msgError("请重新刷新页面！")))}))},renderHeader:function(e,t){var a=t.column;return e("div",[e("span",a.label),e("el-tooltip",{props:{effect:"dark",content:"发票实时统计表",placement:"top"}},[e("i",{class:"el-icon-question",style:"font-size: 16px;vertical-align: -1px"})])])},signNameSure:function(e){var t=this;if("3"==e)this.signNamePassOpen=!0,this.$nextTick((function(){t.$refs.signNamePassForm.clearValidate()}));else{var a={type:e,tjsjstr:this.tjsjstr,qrmm:this.signNamePassForm.qrmm};Object(c["g"])(200,"1"==e?"申请统计中":"撤销统计中",this,!1),this.requestLoading=!1,this.requestType=e,Object(r["a"])(a).then((function(e){t.showProgress=!1,clearInterval(t.loadingTime),200==e.code?(t.statisticsResultMsg="正在处理中...",t.recursionQueryStatisticsResult()):t.msgError(e.msg)}))}},submitSignNamePass:function(){var e=this,t={type:"3",tjsjstr:this.tjwcsj,qrmm:this.signNamePassForm.qrmm};Object(c["g"])(200,"确认签名中",this,!1),this.requestLoading=!1,this.requestType="3",Object(r["a"])(t).then((function(t){e.signNamePassOpen=!1,e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.statisticsResultMsg="正在处理中...",e.recursionQueryStatisticsResult()):e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))},signNamePassDialogClose:function(){this.signNamePassForm.qrmm=null},getInvoiceTypeName:function(e){switch(e){case"0":return"抵扣-增值税专用发票";case"1":return"抵扣-收购发票";case"2":return"抵扣-免税自产农产品普通发票";case"3":return"抵扣-通行费发票";case"4":return"抵扣-其他发票";case"5":return"抵扣-机动车销售统一发票";case"6":return"抵扣-海关缴纳书";case"7":return"抵扣-代扣代缴完税凭证";case"8":return"抵扣-统计信息汇总";case"10":return"农产品-增值税专用发票";case"11":return"农产品-收购发票";case"12":return"农产品-免税自产农产品普通发票";case"13":return"农产品-海关缴纳书";case"21":return"航空运输电子客票行程单";case"22":return"全电发票（铁路电子客票）"}},recursionQueryStatisticsResult:function(){var e=this;Object(r["b"])().then((function(t){200==t.code?"1"!=t.data.taskStatus?setTimeout((function(){e.recursionQueryStatisticsResult()}),5e3):(e.statisticsResultMsg=t.data.taskResult.businessMsg,setTimeout((function(){e.initGet()}),4e3)):setTimeout((function(){e.recursionQueryStatisticsResult()}),5e3)})).catch((function(){setTimeout((function(){e.recursionQueryStatisticsResult()}),5e3)}))}}},d=u,p=(a("8947"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,"243fc754",null);t["default"]=h.exports},ae46:function(e,t,a){},aec6:function(e,t,a){},af1e:function(e,t,a){"use strict";a("949f")},af2f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1000px",id:"chooseDialog","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24,xs:24}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"商品简称",prop:"goodsNameAbbreviation"}},[a("el-input",{attrs:{placeholder:"请输入商品简称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.goodsNameAbbreviation,callback:function(t){e.$set(e.queryParams,"goodsNameAbbreviation",t)},expression:"queryParams.goodsNameAbbreviation"}})],1),a("el-form-item",{attrs:{label:"商品编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"商品编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("el-form-item",{attrs:{label:"税率",prop:"rate"}},[a("el-select",{attrs:{placeholder:"请选择税率",clearable:"",size:"small"},model:{value:e.queryParams.rate,callback:function(t){e.$set(e.queryParams,"rate",t)},expression:"queryParams.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"税收分类编码",prop:"taxCode"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxCode,callback:function(t){e.$set(e.queryParams,"taxCode",t)},expression:"queryParams.taxCode"}})],1),a("el-form-item",{attrs:{label:"税收分类名称",prop:"taxName"}},[a("el-input",{attrs:{placeholder:"请输入税收分类名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxName,callback:function(t){e.$set(e.queryParams,"taxName",t)},expression:"queryParams.taxName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"codeTable",attrs:{data:e.goodsList,"highlight-current-row":"","use-virtual":"","row-height":40},on:{"row-click":e.currClickRow}},[a("u-table-column",{attrs:{label:"选择",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("i")])]}}])}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["rate"==t.prop?a("span",[e._v(" "+e._s(e.rateFormat(n.row))+" ")]):"name"==t.prop?a("span",[e._v(" "+e._s(n.row.name)+" ")]):"flag"==t.prop?a("span",[e._v(" "+e._s(e.flagFormat(n.row))+" ")]):"preferentialPolicy"==t.prop?a("span",[e._v(" "+e._s(e.preferentialPolicyFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("div",{staticStyle:{"margin-top":"20px"},attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChoose}},[e._v("确定选择")])],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1)],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("4cf7")),l=a("c10b"),s={name:"ChooseGoods",components:{},data:function(){return{module:"goods",pageSizes:[],open:!1,radio:null,currentRow:null,title:"选择商品编码",codeOptions:[],total:0,goodsList:[],queryParams:{pageNum:1,pageSize:500,code:null,mergeCode:null,name:null,path:null},defaultProps:{children:"children",label:"label",autoSelectAncestors:!1},codeName:null,columnsArr:[],rateOptions:[],flagOptions:[],preferentialPolicyOptions:[],preferentialPolicyTypeOptions:[]}},watch:{codeName:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this;this.getList(),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data,e.preferentialPolicyOptions=t.data})),this.getDicts("yhzclx").then((function(t){e.preferentialPolicyTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var t={module:this.module};Object(l["b"])(t).then((function(t){if(200==t.code){e.columnsArr=t.data;for(var a=0;a<e.columnsArr.length;a++)e.columnsArr[a].columnSort=a}}))},methods:{rateFormat:function(e,t){return this.selectDictLabel(this.rateOptions,e.rate)},flagFormat:function(e,t){return this.selectDictLabel(this.flagOptions,e.flag)},preferentialPolicyFormat:function(e,t){return this.selectDictLabel(this.preferentialPolicyOptions,e.preferentialPolicy)},getList:function(){var e=this;this.loading=!0,this.radio=null,Object(r["e"])(this.queryParams).then((function(t){e.goodsList=t.rows,e.total=t.total,e.loading=!1}))},openChoose:function(){this.open=!0},getCurrentRow:function(e){this.radio=e},submitChoose:function(){null!=this.radio?(this.open=!1,this.$emit("showChooseCode",this.radio)):this.msgError("请选择一条数据")},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={code:null,mergeCode:null,name:null,description:null,abbreviation:null,rate:null,specialManagement:null,policyBasis:null,specialContentCode:null,exciseManagement:null,excisePolicyBasis:null,exciseContentCode:null,keyWord:null,summarizedItem:null,statisticalBureauCode:null,customsItem:null,excelVersion:null,version:null,status:"0",startDate:null,interimDate:null,parentCode:null,updateTime:null,file:null,hiddenStatus:"0",path:null},this.resetForm("form")},handleQuery:function(){this.queryParams.path=null,this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},currClickRow:function(e,t,a){this.radio=e}}},c=s,u=(a("5e4e"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"1cb67d96",null);t["default"]=d.exports},af9b:function(e,t,a){"use strict";a("095e")},afe6:function(e,t,a){},b015:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"new-version-bill-manger-modal",attrs:{title:e.baseDialog.title,visible:e.baseDialog.open,"append-to-body":"",id:"newVersionBillManagerModal","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.baseDialog,"open",t)}}},[a("el-form",{ref:"form",staticClass:"dialog--main-form",attrs:{model:e.form,size:"mini"}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"dialog-content-top"},[a("div",{staticClass:"dialog-content-top-operation"}),a("div",{staticClass:"bill-info-content"},[a("el-row",[a("el-col",{staticClass:"bill-info-content-left",attrs:{span:8}},[a("div",{staticClass:"qr-code"}),a("div",[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",disabled:""},on:{change:e.billTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1),["81","82"].includes(e.form.invType)?[a("el-form-item",{attrs:{label:"特定业务",prop:"tdyslxdm"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.tdyslxdm,callback:function(t){e.$set(e.form,"tdyslxdm",t)},expression:"form.tdyslxdm"}},[a("el-option",{attrs:{value:"",label:"无"}}),a("el-option",{attrs:{value:"01",label:"成品油"}}),a("el-option",{attrs:{value:"03",label:"建筑服务发票"}}),a("el-option",{attrs:{value:"06",label:"不动产经营租赁服务"}})],1)],1)]:[a("el-form-item",{attrs:{label:"票种性质",prop:"specialTicket"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.specialTicket,callback:function(t){e.$set(e.form,"specialTicket",t)},expression:"form.specialTicket"}},e._l(e.specialTicketOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],a("el-form-item",{attrs:{label:"差额征税",prop:""}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.noneDefine,callback:function(t){e.noneDefine=t},expression:"noneDefine"}})],1),a("el-form-item",{attrs:{label:"减按征税",prop:""}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.noneDefine,callback:function(t){e.noneDefine=t},expression:"noneDefine"}})],1)],2)]),a("el-col",{staticClass:"bill-info-content-middle",attrs:{span:8}},[a("div",{staticClass:"inv-type-title"},[a("span",[e._v(e._s(e.fplxdesc))]),a("div",{staticClass:"inv-type-title-line"}),a("div",{staticClass:"inv-type-title-line"}),a("div",{staticClass:"inv-type-title-line"})])]),a("el-col",{staticClass:"bill-info-content-right",attrs:{span:8}},[["81","82"].includes(e.form.invType)?e._e():a("div",[e._v("发票代码："+e._s(e.form.invCode))]),a("div",[e._v("发票号码："+e._s(["81","82"].includes(e.form.invType)?e.form.invCode+e.form.invNo:e.form.invNo))]),a("div",[e._v("开票日期："+e._s(e.form.invDate))])])],1)],1),a("div",{staticClass:"bill-no-content"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",[e._v("单据编号:"+e._s(e.form.billNo))])]),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同编号",prop:"","label-width":"100px"}},[a("el-input",{attrs:{clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同名称",prop:"","label-width":"100px"}},[a("el-input",{attrs:{clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目/门店",prop:"shopNo","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.shopNo,callback:function(t){e.$set(e.form,"shopNo",t)},expression:"form.shopNo"}})],1)],1)],1)],1)]),a("div",{staticClass:"dialog-content-middle"},[a("div",{staticClass:"dialog-buy-sell-content"},[a("el-row",[a("el-col",{class:["dialog-buy",{"dialog-buy-none":!e.showBuySell}],attrs:{span:12}},[a("div",{staticClass:"dialog-buy-left",on:{click:e.handleShowBuySell}},[e.showBuySell?[a("span",[e._v("购买方信息")]),a("i",{staticClass:"el-icon-caret-top"})]:[a("span",[e._v("购方")]),a("i",{staticClass:"el-icon-caret-bottom"})]],2),a("div",{staticClass:"dialog-buy-right"},[a("el-row",[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"名称",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{maxlength:100,clearable:"",disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"统一社会信用代码/纳税人识别号",prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{maxlength:100,clearable:"",disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买方地址",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方地址",maxlength:100,clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddr,callback:function(t){e.$set(e.form,"buyAddr",t)},expression:"form.buyAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方电话",clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTel,callback:function(t){e.$set(e.form,"buyTel",t)},expression:"form.buyTel"}})],1)],1)]:[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1)]],2),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方开户银行",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行",maxlength:100,clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBank,callback:function(t){e.$set(e.form,"buyBank",t)},expression:"form.buyBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行账号",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方账号",maxlength:100,clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAccount,callback:function(t){e.$set(e.form,"buyAccount",t)},expression:"form.buyAccount"}})],1)],1)]:[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行及账号",maxlength:100,clearable:"",disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)]],2)],1)]),a("el-col",{class:["dialog-buy",{"dialog-buy-none":!e.showBuySell}],attrs:{span:12}},[a("div",{staticClass:"dialog-buy-left",on:{click:e.handleShowBuySell}},[e.showBuySell?[a("span",[e._v("销售方信息")]),a("i",{staticClass:"el-icon-caret-top"})]:[a("span",[e._v("销方")]),a("i",{staticClass:"el-icon-caret-bottom"})]],2),a("div",{staticClass:"dialog-buy-right"},[a("el-row",[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,readonly:"",disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"统一社会信用代码/纳税人识别号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,readonly:"",disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销售方地址",prop:"sellAddr"}},[a("el-input",{attrs:{placeholder:"请输入销方地址",maxlength:200,disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr",t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"sellTel"}},[a("el-input",{attrs:{placeholder:"请输入销方电话",maxlength:200,disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel",t)},expression:"form.sellTel"}})],1)],1)]:[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200,disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)]],2),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showBuySell,expression:"showBuySell"}]},[["81","82"].includes(e.form.invType)?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销方开户银行",prop:"sellBank"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行",maxlength:100,disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行账号",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入销方账号",maxlength:100,disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)]:[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100,disabled:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)]],2)],1)])],1)],1),a("div",{staticClass:"operation-content"},[a("div",{staticClass:"operation-content-left"},[a("el-switch",{staticStyle:{margin:"0 10px"},attrs:{"active-text":"含税","inactive-text":"不含税","active-value":"1","inactive-value":"0"},model:{value:e.hsbz,callback:function(t){e.hsbz=t},expression:"hsbz"}})],1)]),a("div",{staticClass:"detail-content"},[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":38}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"项目名称","min-width":180,width:e.selfAdaptionWidth},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("项目名称 ")]}},{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,disabled:"",size:"mini"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{size:"mini",disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,1695719791)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("(不含税)金额 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,1728815838)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("(含税)金额 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("税率 ")]}},{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("税额 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])}),a("u-table-column",{attrs:{label:"是否优惠",prop:"preferentialFlag",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:""},model:{value:t.row.preferentialFlag,callback:function(a){e.$set(t.row,"preferentialFlag",a)},expression:"scope.row.preferentialFlag"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)]}}])}),a("u-table-column",{attrs:{label:"优惠内容",prop:"preferentialType"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}})]}}])}),a("u-table-column",{attrs:{label:"零税率标识",prop:"taxZeroRate",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:""},model:{value:t.row.taxZeroRate,callback:function(a){e.$set(t.row,"taxZeroRate",a)},expression:"scope.row.taxZeroRate"}},[a("el-option",{attrs:{value:"",label:"非零税率"}}),a("el-option",{attrs:{value:"0",label:"出口退税"}}),a("el-option",{attrs:{value:"1",label:"免税"}}),a("el-option",{attrs:{value:"2",label:"不征收"}}),a("el-option",{attrs:{value:"3",label:"普通零税率"}})],1)]}}])})],1)],1),a("div",{staticClass:"detail-total-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"left",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1),a("div",{staticClass:"note-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注信息",prop:"note"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:230,clearable:"","show-word-limit":"",disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1)],1),"03"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-建筑服务")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地增值税项目编号",prop:"tdywxx.jzfw.tdzzsxmbh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入土地增值税项目编号",clearable:"",disabled:""},model:{value:e.form.tdywxx.jzfw.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.jzfw,"tdzzsxmbh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.tdzzsxmbh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑服务发生地",prop:"tdywxx.jzfw.jzfwfsd","label-width":"160px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择建筑服务发生地",disabled:""},model:{value:e.form.tdywxx.jzfw.jzfwfsd,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzfwfsd",t)},expression:"form.tdywxx.jzfw.jzfwfsd"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"fsdxxdz"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:"",disabled:""},model:{value:e.form.tdywxx.jzfw.fsdxxdz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"fsdxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.fsdxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"建筑项目名称",prop:"tdywxx.jzfw.jzxmmc","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入建筑项目名称",clearable:"",disabled:""},model:{value:e.form.tdywxx.jzfw.jzxmmc,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzxmmc","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.jzxmmc"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.jzfw.kdsbz","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输详细地址",clearable:"",disabled:""},model:{value:e.form.tdywxx.jzfw.kdsbz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1)],1)]):e._e(),"06"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-不动产经营租赁服务")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz","label-width":"160px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择不动产地址",disabled:""},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"bdcxxdz","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:"",disabled:""},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租赁期起止","label-width":"160px"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,disabled:""},model:{value:e.zlqDateRange,callback:function(t){e.zlqDateRange=t},expression:"zlqDateRange"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跨地（市）标志",clearable:"",disabled:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入产权证书/不动产权证号",clearable:"",disabled:""},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择面积单位",clearable:"",disabled:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)],1)]):e._e(),"11"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-不动产销售")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产单元代码/网签合同备案编号","label-width":"240px"}},[a("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz","label-width":"160px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择不动产地址"},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"",prop:"bdcxxdz","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz","label-width":"240px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跨地（市）标志",clearable:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"土地增值税项目编号","label-width":"160px"}},[a("el-input",{attrs:{clearable:""}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"核定计税价格"}},[a("el-input",{attrs:{clearable:""}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实际成交含税金额","label-width":"240px"}},[a("el-input",{attrs:{clearable:""}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh","label-width":"160px"}},[a("el-input",{attrs:{placeholder:"请输入产权证书/不动产权证号",clearable:""},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj","label-width":"160px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择面积单位",clearable:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)],1)]):e._e(),"12"==e.form.tdyslxdm?a("el-row",{staticClass:"special-info-jzfw"},[a("div",{staticClass:"special-info-jzfw-left"},[a("span",[e._v("特定信息-拖拉机和联合收割机")])]),a("div",{staticClass:"special-info-jzfw-right"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发动机号码","label-width":"160px"}},[a("el-input",{attrs:{clearable:""}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"底盘号/机架号","label-width":"160px"}},[a("el-input",{attrs:{clearable:""}})],1)],1)],1)]):e._e(),"13"==e.form.tdyslxdm?a("div",{staticClass:"special-info-transport"},[a("div",{staticClass:"special-info-transport-top"},[a("div",{staticClass:"special-info-transport-top-left"},[e._v("特定信息-货物运输服务")]),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("批量导入")])],1)]),a("div",{staticClass:"special-info-transport-bottom"},[a("el-table",[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"运输工具种类"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"运输工具牌号"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"起运地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"到达地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"运输货物名称"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)})],1)],1)]):e._e(),"14"==e.form.tdyslxdm?a("div",{staticClass:"special-info-transport"},[a("div",{staticClass:"special-info-transport-top"},[a("div",{staticClass:"special-info-transport-top-left"},[e._v("特定信息-旅客运输服务")]),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("增行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("批量导入")])],1)]),a("div",{staticClass:"special-info-transport-bottom"},[a("el-table",[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"出行人"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出行日期"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出行人证件类型"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出行人证号号码"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"出发地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"到达地"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"交通工具类型"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)}),a("el-table-column",{attrs:{label:"等级"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"}})]}}],null,!1,2902128573)})],1)],1)]):e._e()],1),a("div",{staticClass:"dialog-content-bottom"},[a("el-row",[["81","82"].includes(e.form.invType)?e._e():a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier",t)},expression:"form.cashier"}})],1)],1),["81","82"].includes(e.form.invType)?e._e():a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer",t)},expression:"form.invoicer"}})],1)],1),["51","52","81","82"].includes(e.form.invType)?a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"收件邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail",t)},expression:"form.buyEmail"}})],1)],1):e._e(),["51","52","81","82"].includes(e.form.invType)?a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"收件电话",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo",t)},expression:"form.buyTelNo"}})],1)],1):e._e()],1)],1)])])],1)],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("ac1f"),a("1276"),a("c394")),r=a("2ba5"),l=a("ef6c"),s=a("d9ca"),c=a.n(s),u={name:"NewBillDetailShowModal",data:function(){return{cascaderOptions:[],selfAdaptionWidth:null,invTypeOptions:[],taxRateOptions:[],specialTicketOptions:[],showBuySell:!1,isAdd:!0,taxCodeSignRow:0,qrcodeUrl:c.a,baseDialog:{title:"发票详情",open:!1},form:{billNo:"1234567890",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",specialTicket:"0",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",buyAddr:"",buyTel:"",buyBank:"",buyAccount:"",sellAddr:"",sellTel:"",sellBank:"",sellAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",tdyslxdm:"00",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}},shopNo:null},hsbz:"1",sourceHsbz:null,kpdy:null,fplxdesc:"增值税普通发票",redInvoiceFlag:!1,billDetailsData:[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"",preferentialType:"",taxZeroRate:null}],zlqDateRange:[],noneDefine:""}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e},invoiceDiscountFlag:function(){for(var e=0;e<this.billDetailsData.length;e++){var t=this.billDetailsData[e];if("0"!=t.discountFlag)return!0}return!1}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("special_ticket").then((function(t){e.specialTicketOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType,"remark")})),Object(r["a"])().then((function(t){200==t.code&&(e.hsbz=t.data.hsbz,e.kpdy=t.data.kpdy,e.sourceHsbz=t.data.hsbz)})),this.formatRegionData(l["regionData"]),this.cascaderOptions=l["regionData"]},methods:{fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a=e.data;t.baseDialog.open=!0,t.fillLogic(a),t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},fillLogic:function(e){this.initQDForm(e),this.form=e,this.billTypeChange(),parseFloat(e.totalAmount)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,this.form.note=e.note,this.form.cashier=e.cashier,this.form.checker=e.checker,this.form.invoicer=e.invoicer;var t=e.details;this.billDetailsData.length=0;for(var a=0,n=0;n<t.length;n++){var i=t[n];i.index=n,null!=i.goodsName&&i.goodsName.length>t[a].goodsName.length&&(a=n),this.billDetailsData.push(i)}this.goodsNameChange(a)},initQDForm:function(e){if(["81","82"].includes(e.invType)){var t,a,n,i,o,r,l,s,c,u,d,p,h,m;if(e.sourceInvNo&&(e.sourceInvNo=e.sourceInvCode+e.sourceInvNo),e.buyAddr=null===(t=e.buyAddrTel)||void 0===t?void 0:t.split(/[ ]+/)[0],e.buyTel=null===(a=e.buyAddrTel)||void 0===a?void 0:a.split(/[ ]+/)[1],e.buyBank=null===(n=e.buyBankAccount)||void 0===n?void 0:n.split(/[ ]+/)[0],e.buyAccount=null===(i=e.buyBankAccount)||void 0===i?void 0:i.split(/[ ]+/)[1],e.sellAddr=null===(o=e.sellAddrTel)||void 0===o?void 0:o.split(/[ ]+/)[0],e.sellTel=null===(r=e.sellAddrTel)||void 0===r?void 0:r.split(/[ ]+/)[1],e.sellBank=null===(l=e.sellBankAccount)||void 0===l?void 0:l.split(/[ ]+/)[0],e.sellAccount=null===(s=e.sellBankAccount)||void 0===s?void 0:s.split(/[ ]+/)[1],null!==e&&void 0!==e&&null!==(c=e.tdywxx)&&void 0!==c&&null!==(c=c.bdczl)&&void 0!==c&&c.zlqqssj&&null!==e&&void 0!==e&&null!==(u=e.tdywxx)&&void 0!==u&&null!==(u=u.bdczl)&&void 0!==u&&u.zlqzssj)this.zlqDateRange=[null===e||void 0===e||null===(d=e.tdywxx)||void 0===d||null===(d=d.bdczl)||void 0===d?void 0:d.zlqqssj,null===e||void 0===e||null===(p=e.tdywxx)||void 0===p||null===(p=p.bdczl)||void 0===p?void 0:p.zlqzssj];if(e.tdywxx)null!==(h=e.tdywxx)&&void 0!==h&&h.jzfw?e.tdywxx.jzfw.jzfwfsd=e.tdywxx.jzfw.jzfwfsd?e.tdywxx.jzfw.jzfwfsd.split("/"):[]:e.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(m=e.tdywxx)&&void 0!==m&&m.bdczl?(e.tdywxx.bdczl.zlqqssj&&e.tdywxx.bdczl.zlqzssj&&(this.zlqDateRange=[e.tdywxx.bdczl.zlqqssj,e.tdywxx.bdczl.zlqzssj]),e.tdywxx.bdczl.bdcdz=e.tdywxx.bdczl.bdcdz?e.tdywxx.bdczl.bdcdz.split("/"):[]):e.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null};else e.tdywxx={jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null}}}},billTypeChange:function(){this.fplxdesc=this.selectDictLabel(this.invTypeOptions,this.form.invType,"remark")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},handleShowBuySell:function(){this.showBuySell=!this.showBuySell},formatRegionData:function(e){for(var t=0;t<e.length;t++)e[t].value=e[t].label,e[t].children&&this.formatRegionData(e[t].children)}}},d=u,p=(a("7025"),a("f7e5"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,"638e210d",null);t["default"]=h.exports},b081:function(e,t,a){},b0df:function(e,t,a){"use strict";a("aec6")},b149:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"稽查结果",prop:"ruleStatus"}},[a("el-select",{attrs:{placeholder:"请选择票控规则稽查结果",clearable:"",size:"small"},model:{value:e.queryParams.ruleStatus,callback:function(t){e.$set(e.queryParams,"ruleStatus",t)},expression:"queryParams.ruleStatus"}},[a("el-option",{attrs:{label:"正常",value:0}}),a("el-option",{attrs:{label:"异常",value:1}})],1)],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择发票状态",clearable:"",size:"small"},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName",t)},expression:"queryParams.sellName"}})],1),a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellTaxNo,callback:function(t){e.$set(e.queryParams,"sellTaxNo",t)},expression:"queryParams.sellTaxNo"}})],1),a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{model:{value:e.queryParams.fileId,callback:function(t){e.$set(e.queryParams,"fileId",t)},expression:"queryParams.fileId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"报销状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择报销状态",clearable:"",size:"small"},model:{value:e.queryParams.reimStatus,callback:function(t){e.$set(e.queryParams,"reimStatus",t)},expression:"queryParams.reimStatus"}},e._l(e.reimStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"流程单号",prop:"reimBillNo"}},[a("el-input",{attrs:{placeholder:"请输入流程单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reimBillNo,callback:function(t){e.$set(e.queryParams,"reimBillNo",t)},expression:"queryParams.reimBillNo"}})],1),a("el-form-item",{attrs:{label:"BPM报销单号",prop:"bpmBillNo"}},[a("el-input",{attrs:{placeholder:"请输入BPM报销单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.bpmBillNo,callback:function(t){e.$set(e.queryParams,"bpmBillNo",t)},expression:"queryParams.bpmBillNo"}})],1),a("el-form-item",{attrs:{label:"AP单号",prop:"apBillNo"}},[a("el-input",{attrs:{placeholder:"请输入AP单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.apBillNo,callback:function(t){e.$set(e.queryParams,"apBillNo",t)},expression:"queryParams.apBillNo"}})],1),a("el-form-item",{attrs:{label:"结算单号",prop:"settlementNo"}},[a("el-input",{attrs:{placeholder:"请输入结算单号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.settlementNo,callback:function(t){e.$set(e.queryParams,"settlementNo",t)},expression:"queryParams.settlementNo"}})],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证制单人",prop:"voucherMaker"}},[a("el-input",{attrs:{placeholder:"请输入凭证制单人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherMaker,callback:function(t){e.$set(e.queryParams,"voucherMaker",t)},expression:"queryParams.voucherMaker"}})],1),a("el-form-item",{attrs:{label:"凭证编码",prop:"voucherCode"}},[a("el-input",{attrs:{placeholder:"请输入凭证编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherCode,callback:function(t){e.$set(e.queryParams,"voucherCode",t)},expression:"queryParams.voucherCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:add"],expression:"['ticket:personal:add']"}],attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("新增")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:hand"],expression:"['ticket:personal:hand']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleManual(t)}}},[e._v("手工录入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:ocr"],expression:"['ticket:personal:ocr']"}],attrs:{icon:"el-icon-picture-outline"},nativeOn:{click:function(t){return e.handleImage(t)}}},[e._v("图片识别")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:edit"],expression:"['ticket:personal:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:remove"],expression:"['ticket:personal:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["incomecp:zzsinvoice:check"],expression:"['incomecp:zzsinvoice:check']"}],attrs:{type:"success",icon:"el-icon-circle-check",size:"mini",disabled:e.multiple},on:{click:e.handleCheck}},[e._v("查验")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:add"],expression:"['income:zzsinvoice:add']"}],attrs:{type:"warning",icon:"el-icon-plus",size:"mini"},on:{click:e.handleImport}},[e._v("导入")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:export"],expression:"['income:zzsinvoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:zzsinvoice:export"],expression:"['income:zzsinvoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"personalMainTable",attrs:{data:e.personalList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.handleShowInvoiceDetail(n.row)}}},[e._v(e._s((["08xdp","10xdp"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo))]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["08xdp","10xdp"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"state"==t.prop?a("span",[e._v(" "+e._s(e.stateFormat(n.row))+" ")]):"reimStatus"==t.prop?a("span",[e._v(" "+e._s(e.reimStatusFormat(n.row))+" ")]):"checked"==t.prop?a("span",[e._v(" "+e._s(e.checkedFormat(n.row))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"可用报销金额",align:"center",width:"100",prop:"usableReimAmount"}}),a("u-table-column",{attrs:{label:"流程单号",align:"center",width:"100",prop:"reimBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"BPM报销单号",align:"center",width:"100",prop:"bpmBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"AP单号",align:"center",width:"100",prop:"apBillNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"结算单号",align:"center",width:"100",prop:"settlementNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证号",align:"center",width:"100",prop:"voucherNo","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证制单人",align:"center",width:"100",prop:"voucherMaker","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证编码",align:"center",width:"100",prop:"voucherCode","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"匹配状态",align:"center",width:"100",prop:"matchStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.matchStatus?a("span",[e._v("未到票")]):"1"==t.row.matchStatus?a("span",[e._v("已到票")]):"2"==t.row.matchStatus?a("span",[e._v("无需到票")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"匹配时间",align:"center",width:"100",prop:"matchTime"}}),a("u-table-column",{attrs:{label:"匹配用户",align:"center",width:"100",prop:"matchUser"}}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personal:edit"],expression:"['ticket:personal:edit']"}],staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{on:{click:function(t){return e.downloadImg("previewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),a("el-dialog",{attrs:{visible:e.open,width:e.isUpdate&&e.manualForm.fileUrl?"1200px":"520px","append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.manualDialogClose},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.title)}})]},proxy:!0}])},[a("div",{staticStyle:{display:"flex","max-height":"60vh"}},[a("el-form",{ref:"manualForm",staticStyle:{flex:"1",overflow:"auto"},attrs:{model:e.manualForm,rules:e.manualRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发票类型",clearable:"",size:"small",disabled:"添加增值税发票"!=e.title},on:{change:e.manualInvTypeChange},model:{value:e.manualForm.invType,callback:function(t){e.$set(e.manualForm,"invType",t)},expression:"manualForm.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e.isQd?e._e():a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxLength:12,clearable:"",placeholder:"请输入发票代码"},model:{value:e.manualForm.invCode,callback:function(t){e.$set(e.manualForm,"invCode",t)},expression:"manualForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxLength:20,placeholder:"请输入发票号码",clearable:""},model:{value:e.manualForm.invNo,callback:function(t){e.$set(e.manualForm,"invNo",t)},expression:"manualForm.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",placeholder:"请输入开票日期"},model:{value:e.manualForm.invDate,callback:function(t){e.$set(e.manualForm,"invDate",t)},expression:"manualForm.invDate"}})],1),!e.isSpecial||e.isSecondHand||e.isQd?e._e():a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{placeholder:"请输入合计不含税金额",clearable:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmountWithoutTax,callback:function(t){e.$set(e.manualForm,"totalAmountWithoutTax",t)},expression:"manualForm.totalAmountWithoutTax"}})],1),e.isSpecial||e.isSecondHand||e.isQd?e._e():a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{maxLength:6,placeholder:"请输入校验码后六位",clearable:""},model:{value:e.manualForm.checkCode,callback:function(t){e.$set(e.manualForm,"checkCode",t)},expression:"manualForm.checkCode"}})],1),e.isSecondHand||e.isQd?a("el-form-item",{attrs:{label:"价税合计",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入价税合计",clearable:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.manualForm.totalAmount,callback:function(t){e.$set(e.manualForm,"totalAmount",t)},expression:"manualForm.totalAmount"}})],1):e._e(),e._l(e.buySellField.field,(function(t,n){return a("el-form-item",{key:n,attrs:{label:e.buySellField.name[n],prop:t}},[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small",type:"textarea",autosize:""},model:{value:e.manualForm[t],callback:function(a){e.$set(e.manualForm,t,a)},expression:"manualForm[buySellItem]"}})],1)})),a("el-form-item",{attrs:{label:"发票联次",prop:"formName"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.manualForm["formName"],callback:function(t){e.$set(e.manualForm,"formName",t)},expression:"manualForm['formName']"}},e._l(e.invJointOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.manualForm.fileId,callback:function(t){e.$set(e.manualForm,"fileId",t)},expression:"manualForm.fileId"}},e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})})),1)],1),e.manualForm.id?e._e():a("el-form-item",{attrs:{label:"发票原图",prop:"fileUrl"}},[a("el-upload",{ref:"manualUpload",staticClass:"manual-upload",attrs:{limit:1,accept:"image/*,.pdf,.ofd",headers:e.manualUpload.headers,action:e.manualUpload.url+"?updateSupport="+e.manualUpload.updateSupport,disabled:e.manualUpload.isUploading,"on-progress":e.handleManualFileUploadProgress,"on-success":e.handleManualFileSuccess,"on-remove":e.handleManualRemove,"auto-upload":!0,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("点击上传")])])])],1)],2),e.isUpdate&&e.manualForm.fileUrl?a("div",{staticClass:"public-update-right-div"},[a("div",{staticStyle:{flex:"1",overflow:"hidden",border:"2px dashed #ccc",padding:"10px"}},[e.manualForm.fileUrl&&"pdf"==e.manualForm.fileUrl.split(".").pop().toLowerCase()?[a("div",{ref:"updatePreviewImg",staticStyle:{width:"100%",position:"relative"},attrs:{draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}},[a("pdf",{ref:"pdf",staticStyle:{width:"100%"},attrs:{src:e.pdfUrldata}})],1)]:[a("img",{ref:"updatePreviewImg",staticStyle:{width:"100%",position:"relative"},attrs:{src:e.manualForm.fileUrl,id:"zoomImg",draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),a("div",{staticClass:"public-img-operation2"},[a("div",{staticClass:"public-img-left-operation2"},[a("div",{on:{click:function(t){return e.restoreImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")])]),a("div",{staticClass:"public-img-right-operation2"},[a("div",{on:{click:function(t){return e.handleImgChecked("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-circle-check"}),e._v("查验")]),a("div",{on:{click:function(t){return e.downloadImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),e.currOperationRow.fileUrl&&"pdf"==e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?[a("div",{on:{click:function(t){return e.printPdf("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]:[a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]],2)]),a("div",{staticClass:"public-invoice-status"},[a("div",[e._v("识别状态:已识别")]),a("div",[e._v("查验状态:"+e._s(e.checkedFormat(e.currOperationRow)))]),a("div",[e._v("稽核状态:"+e._s(e.currOperationRow&&"0"==e.currOperationRow.ruleStatus?"正常":"异常"))])])]):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.isUploading},on:{click:e.submitManualForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e(),a("iframe",{staticStyle:{height:"60vh",width:"100%",position:"fixed",bottom:"-1000px"},attrs:{id:"printIFrame",src:e.getLocalhostIFrame(e.currOperationRow.fileUrl)}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("invoice-detail-show-modal",{ref:"invoiceDetailShowModal",attrs:{isPersonal:"1"}}),a("vehicle-invoice-detail-show-modal",{ref:"vehicleInvoiceDetailShowModal",attrs:{isPersonal:"1"}}),a("second-hand-invoice-detail-show-modal",{ref:"secondHandInvoiceDetailShowModal",attrs:{isPersonal:"1"}}),a("upload-file-dialog",{ref:"uploadFileDialog",on:{discernFileResult:e.discernFileResult}}),a("file-analysis",{ref:"fileAnalysis",attrs:{personal:"1"},on:{updateInvoiceTable:e.updateInvoiceTable}})],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("d81d"),a("caad"),a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b64b"),a("606d")),l=a("4c80"),s=(a("c0c7"),a("b526")),c=a("0ca4"),u=a("66b5"),d=a("f82b"),p=a("a5e7"),h=a("35d5"),m=a("858e"),f=a("ed08"),b=a("5f87"),g=a("c38a"),v={name:"Personal",components:{TotalRowTable:s["default"],InvoiceDetailShowModal:c["default"],VehicleInvoiceDetailShowModal:u["default"],SecondHandInvoiceDetailShowModal:d["default"],UploadFileDialog:p["default"],FileAnalysis:h["default"],pdf:m["a"]},data:function(){return{imgShowParams:{deg:0,scale:1},isUploading:!1,imageUploadFileList:[],showUploadFileProgress:!1,percentage:0,uploadStatus:null,images:{ofdIcon:a("086e"),pdfIcon:a("55fc")},imageUpload:{open:!1,title:"图片识别(最多选择9个文件)",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(b["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},base64Arr:{},uploadResult:{},pdfUrldata:null,fileOptions:[],routeLoading:!1,isSpecial:!0,isSecondHand:!1,isQd:!1,functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,personalList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],invJointOptions:[],reimStatusOptions:[],queryParams:{pageNum:1,pageSize:500,ruleStatus:0,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,state:null,buyName:null,sellName:null,sellTaxNo:null,fileId:null,reimStatus:null,voucherNo:null,voucherType:null,voucherDate:null},dateRange:[],form:{},manualForm:{id:null,invType:"01",invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,totalAmount:null,fileUrl:null,fileId:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,buyName:null,buyTaxNo:null,buyAddrTel:null,buyBankAccount:null},manualRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}|\d{20}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:["blur","change"]}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:["blur","change"]}],checkCode:[{required:!0,message:"校验码不能为空",trigger:["blur","change"]},{pattern:/^\d{0,10}$/,message:"请输入正确的校验码",trigger:"blur"}],totalAmount:[{required:!0,message:"价税合计不能为空",trigger:["blur","change"]}],fileUrl:[{required:!0,message:"发票文件不能为空"}],fileId:[{required:!0,message:"所属票夹不能为空"}]},columnsArr:[{label:"发票类型",prop:"invType",align:"center",show:!0,width:120,columnSort:3},{label:"发票状态",prop:"state",align:"center",show:!0,width:120,columnSort:4},{label:"查验状态",prop:"checked",align:"center",show:!0,width:120,columnSort:4},{label:"报销状态",prop:"reimStatus",align:"center",show:!0,width:120,columnSort:4},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:130,columnSort:20},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:100,columnSort:0},{label:"发票代码号码",prop:"invCodeNo",align:"center",show:!0,width:200,columnSort:1},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:2},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:5},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:5},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:5},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:5},{label:"所属发票夹",prop:"fileName",align:"center",show:!0,width:180,columnSort:6},{label:"查验描述",prop:"checkMsg",align:"center",show:!0,width:220,columnSort:5}],sortParam:{column:"",columnOrder:""},operationIndex:0,operationRowArr:[],originImageOpen:!1,currOriginImageUrl:null,isUpdate:!1,buySellField:{name:["销方名称","销方税号","销方地址","销方银行","购方名称","购方税号","购方地址","购方银行"],field:["sellName","sellTaxNo","sellAddrTel","sellBankAccount","buyName","buyTaxNo","buyAddrTel","buyBankAccount"]},aspectRatio:null,currOperationRow:{},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},currDeptName:"",manualUpload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(b["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"}}},computed:{judgeFileUrl:function(){return function(e){return"pdf"==e.name.split(".").pop()?this.images.pdfIcon:"ofd"==e.name.split(".").pop()?this.images.ofdIcon:e.url}},progressStatus:function(){return void 0==this.uploadStatus?null:this.uploadStatus?"success":"exception"}},created:function(){var e=this;this.getList(),this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("inv_joint").then((function(t){e.invJointOptions=t.data})),this.getDicts("reim_status").then((function(t){e.reimStatusOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),Object(r["i"])().then((function(t){e.fileOptions=t.rows,e.manualForm.fileId=e.fileOptions[0].id}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(f["e"])(this.queryParams));(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),this.dateRange&&this.dateRange.length&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),Object(r["h"])(t).then((function(t){e.personalList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},checkedFormat:function(e,t){return e?this.selectDictLabel(this.checkedOptions,e.checked):""},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},blockChainFormat:function(e,t){return this.selectDictLabel(this.blockChainOptions,e.blockChain)},reimStatusFormat:function(e,t){return this.selectDictLabel(this.reimStatusOptions,e.reimStatus)},cutTime:function(e){return null!=e.invDate?e.invDate.substring(0,10):""},manualDialogClose:function(){this.isSpecial=!0,this.isSecondHand=!1,this.isQd=!1,this.resetManualForm(),this.imageUploadFileList=[];var e=document.getElementById("zoomImg");e&&(e.style.top=0,e.style.left=0),this.currOperationRow={}},resetManualForm:function(){this.manualForm={id:null,invType:"01",invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,fileUrl:null,fileId:this.fileOptions[0].id,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,buyName:null,buyTaxNo:null,buyAddrTel:null,buyBankAccount:null}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleShowInvoiceDetail:function(e){var t=this;"1"==e.checked?(this.routeLoading=!0,"03"==e.invType?this.$refs.vehicleInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):"15"==e.invType?this.$refs.secondHandInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):this.$refs.invoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1}))):this.msgError("查验成功发票才能查看详情")},handleUpdate:function(e){var t=this;if(this.isUpdate=!0,void 0!=e.id?this.currOperationRow=e:this.currOperationRow=this.rows[0],void 0!=e.id&&"1"==e.checked||1==this.rows.length&&"1"==this.rows[0].checked&&!e.id)this.msgError("已查验发票不能够修改");else if("1"!=this.currOperationRow.reimStatus)if("2"!=this.currOperationRow.reimStatus){var a=e.id||this.ids;Object(r["g"])(a).then((function(a){var n;["08xdp","10xdp"].includes(a.data.invType)&&(a.data.invNo=a.data.invCode+a.data.invNo,a.data.invCode=""),t.manualForm=a.data,t.manualForm.id=e.id||t.ids[0],t.manualInvTypeChange(),t.open=!0,t.$nextTick((function(){t.$refs.manualForm.clearValidate()})),t.title="修改增值税发票","pdf"==(null===(n=t.manualForm.fileUrl)||void 0===n?void 0:n.split(".").pop().toLowerCase())&&t.pdfPreviewUrl(t.manualForm.fileUrl)}))}else this.msgError("发票已部分报销，不允许修改");else this.msgError("发票已全额报销，不允许修改")},pdfPreviewUrl:function(e){var t=this;if(!e)return"";var a="https://unpkg.com/pdfjs-dist@2.0.943/cmaps/",n=m["a"].createLoadingTask({url:"/einvoices"+e.replace("https://vat.zzhcn.net",""),withCredentials:!1,cMapUrl:a,cMapPacked:!0});n.promise.then((function(e){t.pdfUrldata=n})).catch((function(){return t.msgError("加载失败"),""}))},submitManualForm:function(){var e=this;this.$refs["manualForm"].validate((function(t){if(t)if(null!=e.manualForm.id){var a=Object(f["e"])(e.manualForm);a.other=e.manualForm.checkCode||e.manualForm.totalAmount||e.manualForm.totalAmountWithoutTax,a.dataSource="01",e.manualForm.totalAmount&&(a.usableReimAmount=e.manualForm.totalAmount),a.invType&&["08xdp","10xdp"].includes(a.invType)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),a.invCodeNo=a.invCode+"_"+a.invNo,Object(r["j"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}else{var n=Object(f["e"])(e.manualForm);n.other=e.manualForm.checkCode||e.manualForm.totalAmount||e.manualForm.totalAmountWithoutTax,n.dataSource="01",n.invType&&["08xdp","10xdp"].includes(n.invType)&&(n.invCode=n.invNo.substr(0,12),n.invNo=n.invNo.substr(12)),Object(r["a"])(n).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}}))},handleDelete:function(){var e=this;this.$confirm('<span style="word-break: break-all;">是否确认删除所选发票?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(g["g"])(100,"删除中",e),e.operationIndex=0,e.operationRowArr=e.rows,e.deleteInvoiceLogic()}))},deleteInvoiceLogic:function(){var e=this;this.operationIndex++;var t={fileId:this.operationRowArr[this.operationIndex-1].fileId,id:this.operationRowArr[this.operationIndex-1].id};Object(r["c"])(t).then((function(t){200==t.code?e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除成功"):e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除失败，"+t.msg),e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())}))},handleCheck:function(){var e=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="查验中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.checkLogic()},checkLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id};Object(r["b"])(t).then((function(t){"200"==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},handleExport:function(){var e=this,t=Object(f["e"])(this.queryParams);t.ids=this.ids,(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),this.dateRange&&this.dateRange.length&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),this.$confirm("是否确认导出增值税发票（个人）数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(g["g"])(10,"导出中",e),Object(r["e"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票（个人）.xls",e)})).catch((function(){}))},handleManual:function(){var e=this;this.isUpdate=!1,this.open=!0,this.$nextTick((function(){e.$refs.manualForm.clearValidate()})),this.title="添加增值税发票"},manualFormInvCodeChange:function(){var e=this,t=this.manualForm.invType?this.manualForm.invType:Object(g["i"])(this.manualForm.invCode);"08"==t||"03"==t||"01"==t||"02"==t||"08xdpzz"==t?(this.isSpecial=!0,this.manualForm.checkCode="",this.isSecondHand=!1,this.manualForm.totalAmount=""):"15"==t||["08xdp","10xdp"].includes(t)?(this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.manualForm.totalAmountWithoutTax="",this.isSecondHand=!1,this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))},handleManualFileUploadProgress:function(e,t,a){this.manualUpload.isUploading=!0},handleManualFileSuccess:function(e,t,a){this.manualUpload.isUploading=!1,200==e.code?(this.msgSuccess(e.msg),this.manualForm.fileUrl=e.data[0],this.$refs["manualForm"].validateField("fileUrl")):this.msgError(e.msg)},handleManualRemove:function(){this.manualForm.fileUrl="",this.$refs["manualForm"].validateField("fileUrl")},submitFileForm:function(){this.$refs.manualUpload.submit()},handleImage:function(){this.$refs.uploadFileDialog.uploadFileDialogShow()},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},updateInvoiceTable:function(){this.getList()},validIsNumber:function(e){e.target.value=Object(g["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(g["a"])(e.target.value)},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},imageUploadFileChange:function(e,t){var a=this;console.log(e,t),this.imageUploadFileList=t,Object(f["g"])(e.raw||e).then((function(t){var n=Object(f["p"])(t.split(",")[0]);a.base64Arr[e.uid]=n+"_"+t.split(",")[1],a.showUploadFileProgress=!0;var i=1e3,o=a;o.percentage=0;var r=setInterval((function(){o.percentage++,o.percentage>=99?clearInterval(r):o.percentage>80?i=2e3:o.percentage>50&&(i=1500)}),i),s=new FormData;s.append("baseArray",n+"_"+t.split(",")[1]),o.isUploading=!0,Object(l["d"])(s).then((function(e){if(o.isUploading=!1,clearInterval(r),o.percentage=100,200==e.code?(o.uploadStatus=!0,o.msgSuccess("发票上传成功")):(o.uploadStatus=!1,o.msgError(e.msg)),"[object Array]"==Object.prototype.toString.call(e.data)){o.uploadResult=Object(f["e"])(e.data[0]);var t=Object(f["e"])(e.data[0]),n=JSON.parse(t.data);for(var i in Object.assign(t,n),o.manualForm)t[i]&&("checkCode"==i&&(t[i]=t[i].substr(t[i].length-6)),o.manualForm[i]=t[i],"invCode"==i&&a.manualFormInvCodeChange())}else o.uploadResult=e.data})).catch((function(){o.isUploading=!1}))}))},previewRemove:function(e){this.$refs.imageUpload.handleRemove(e),this.showUploadFileProgress=!1,this.percentage=0,this.uploadStatus=null},handleRemove:function(e,t){this.imageUploadFileList=t,delete this.base64Arr[e.uid]},handleImport:function(){},handleExportDetail:function(){var e=this,t=Object(f["e"])(this.queryParams);t.ids=this.ids,(t.voucherNo||t.reimBillNo||t.apBillNo||t.bpmBillNo||t.settlementNo||t.voucherMaker||t.voucherCode)&&(t.reimFlag=!0),this.dateRange&&this.dateRange.length&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),this.$confirm("是否确认导出增值税发票（个人）数据项明细?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(g["g"])(10,"导出中",e),Object(r["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票（个人）明细.xls",e)})).catch((function(){}))},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},handleImgChecked:function(){var e=this,t=null;t=this.currOperationRow?this.currOperationRow.id:this.rows[0].id;var a={id:t};this.open=!1,this.showProgress=!0,this.functionName="查验中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(100),e.$refs.myProgress.setProgressNum(0)})),Object(r["b"])(a).then((function(t){e.showProgress=!1,"200"==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)})).catch((function(){e.showProgress=!1}))},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(f["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},printPdf:function(){document.getElementById("printIFrame").contentWindow.print()},getLocalhostIFrame:function(e){return e?"/einvoices"+e.replace("https://vat.zzhcn.net",""):""},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.personalMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.personalList,"personalMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},manualInvTypeChange:function(){var e=this,t=this.manualForm.invType;this.manualRules.invNo[0]={pattern:/^\d{8}$/,message:"请输入正确的8位发票号码",trigger:"blur"},["08xdp","10xdp"].includes(t)?(this.isSpecial=!1,this.isSecondHand=!1,this.isQd=!0,this.manualForm.checkCode="",this.manualForm.invCode="",this.manualRules.invNo[0]={pattern:/^\d{20}$/,message:"请输入正确的20位发票号码",trigger:"blur"}):["01","08","02","08xdpzz"].includes(t)?(this.isSpecial=!0,this.isSecondHand=!1,this.isQd=!1,this.manualForm.checkCode="",this.manualForm.totalAmount=""):"15"==t?(this.isSpecial=!1,this.isQd=!1,this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.isQd=!1,this.isSecondHand=!1,this.manualForm.totalAmountWithoutTax="",this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))}}},y=v,_=(a("8a25"),a("2877")),x=Object(_["a"])(y,n,i,!1,null,"7fc024cc",null);t["default"]=x.exports},b175:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1000px",id:"chooseDialog","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24,xs:24}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.goodsName,callback:function(t){e.$set(e.queryParams,"goodsName",t)},expression:"queryParams.goodsName"}})],1),a("el-form-item",{attrs:{label:"商品编码",prop:"goodsCode"}},[a("el-input",{attrs:{placeholder:"请输入商品编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.goodsCode,callback:function(t){e.$set(e.queryParams,"goodsCode",t)},expression:"queryParams.goodsCode"}})],1),a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{placeholder:"请选择车辆类型",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.vehicleType,callback:function(t){e.$set(e.queryParams,"vehicleType",t)},expression:"queryParams.vehicleType"}})],1),a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{placeholder:"请输入厂牌型号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.factoryNo,callback:function(t){e.$set(e.queryParams,"factoryNo",t)},expression:"queryParams.factoryNo"}})],1),a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{placeholder:"请输入产地",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.origin,callback:function(t){e.$set(e.queryParams,"origin",t)},expression:"queryParams.origin"}})],1),a("el-form-item",{attrs:{label:"生产企业名称",prop:"factoryName"}},[a("el-input",{attrs:{placeholder:"请输入生产企业名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.factoryName,callback:function(t){e.$set(e.queryParams,"factoryName",t)},expression:"queryParams.factoryName"}})],1),a("el-form-item",{attrs:{label:"税收分类编码",prop:"taxTypeCode"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxTypeCode,callback:function(t){e.$set(e.queryParams,"taxTypeCode",t)},expression:"queryParams.taxTypeCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"codeTable",attrs:{data:e.goodsList,"highlight-current-row":"","use-virtual":"","row-height":40},on:{"row-click":e.currClickRow}},[a("u-table-column",{attrs:{label:"选择",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("i")])]}}])}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["preferentialPolicyType"==t.prop?a("span",[e._v(" "+e._s(e.preferentialPolicyTypeFormat(n.row))+" ")]):"preferentialPolicy"==t.prop?a("span",[e._v(" "+e._s(e.preferentialPolicyFormat(n.row))+" ")]):"rate"==t.prop?a("span",[e._v(" "+e._s(e.rateFormat(n.row))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()}))],2),a("div",{staticStyle:{"margin-top":"20px"},attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChoose}},[e._v("确定选择")])],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1)],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("12b7")),l=(a("c10b"),{name:"vehicleGoods",components:{},data:function(){return{module:"goods",pageSizes:[],open:!1,radio:null,currentRow:null,title:"机动车商品库",codeOptions:[],total:0,goodsList:[],queryParams:{pageNum:1,pageSize:500,code:null,mergeCode:null,name:null,path:null},defaultProps:{children:"children",label:"label",autoSelectAncestors:!1},codeName:null,columnsArr:[{label:"商品编码",prop:"goodsCode",align:"center",show:!0,width:220,columnSort:0},{label:"商品名称",prop:"goodsName",align:"center",show:!0,width:220,columnSort:1},{label:"车辆类型",prop:"vehicleType",align:"center",show:!0,width:220,columnSort:2},{label:"厂牌型号",prop:"factoryNo",align:"center",show:!0,width:220,columnSort:3},{label:"产地",prop:"origin",align:"center",show:!0,width:220,columnSort:4},{label:"合格证号",prop:"eligibilityNo",align:"center",show:!0,width:220,columnSort:5},{label:"进口证明书号",prop:"importCertificateNumber",align:"center",show:!0,width:220,columnSort:6},{label:"商检单号",prop:"commodityInspectionNo",align:"center",show:!0,width:220,columnSort:0},{label:"发动机号码",prop:"engineNo",align:"center",show:!0,width:220,columnSort:1},{label:"车辆识别代号",prop:"vehicleIdentificationCode",align:"center",show:!0,width:220,columnSort:2},{label:"完税凭证号码",prop:"completionVoucherNo",align:"center",show:!0,width:220,columnSort:3},{label:"吨位",prop:"tonnage",align:"center",show:!0,width:220,columnSort:4},{label:"限乘人数",prop:"limitedNumberOfPassengers",align:"center",show:!0,width:220,columnSort:5},{label:"主管税务机关代码",prop:"taxAuthorityCode",align:"center",show:!0,width:220,columnSort:6},{label:"主管税务机关名称",prop:"taxAuthorityName",align:"center",show:!0,width:220,columnSort:0},{label:"生产企业名称",prop:"factoryName",align:"center",show:!0,width:220,columnSort:1},{label:"税收分类编码",prop:"taxTypeCode",align:"center",show:!0,width:220,columnSort:2},{label:"税率",prop:"rate",align:"center",show:!0,width:220,columnSort:3},{label:"是否享受优惠",prop:"preferentialPolicy",align:"center",show:!0,width:220,columnSort:4},{label:"优惠政策类型",prop:"preferentialPolicyType",align:"center",show:!0,width:220,columnSort:5}],rateOptions:[],flagOptions:[],preferentialPolicyOptions:[],preferentialPolicyTypeOptions:[]}},watch:{codeName:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this;this.getList(),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data,e.preferentialPolicyOptions=t.data})),this.getDicts("yhzclx").then((function(t){e.preferentialPolicyTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},methods:{rateFormat:function(e,t){return this.selectDictLabel(this.rateOptions,e.rate)},flagFormat:function(e,t){return this.selectDictLabel(this.flagOptions,e.flag)},preferentialPolicyTypeFormat:function(e,t){return this.selectDictLabel(this.preferentialPolicyTypeOptions,e.preferentialPolicyType)},preferentialPolicyFormat:function(e,t){return this.selectDictLabel(this.preferentialPolicyOptions,e.preferentialPolicy)},getList:function(){var e=this;this.loading=!0,Object(r["e"])(this.queryParams).then((function(t){e.goodsList=t.rows,e.total=t.total,e.loading=!1}))},openChoose:function(){this.open=!0},getCurrentRow:function(e){this.radio=e},submitChoose:function(){null!=this.radio?(this.open=!1,this.$emit("showChooseCode",this.radio)):this.msgError("请选择一条数据")},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={code:null,mergeCode:null,name:null,description:null,abbreviation:null,rate:null,specialManagement:null,policyBasis:null,specialContentCode:null,exciseManagement:null,excisePolicyBasis:null,exciseContentCode:null,keyWord:null,summarizedItem:null,statisticalBureauCode:null,customsItem:null,excelVersion:null,version:null,status:"0",startDate:null,interimDate:null,parentCode:null,updateTime:null,file:null,hiddenStatus:"0",path:null},this.resetForm("form")},handleQuery:function(){this.queryParams.path=null,this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},currClickRow:function(e,t,a){this.radio=e}}}),s=l,c=(a("30cc"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"2bba6a6a",null);t["default"]=u.exports},b1cc:function(e,t,a){"use strict";a.r(t);var n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.printInvoice}},[e._v("打印发票")]),a("el-button",{attrs:{type:"primary"},on:{click:e.printInvoiceList}},[e._v("打印清单")]),a("el-button",{attrs:{type:"primary"},on:{click:e.printVehicle}},[e._v("打印机动车")]),a("el-button",{attrs:{type:"primary"},on:{click:e.printUsedCar}},[e._v("打印二手车")]),a("el-dialog",{attrs:{title:"发票打印设置",visible:e.printDialog.open,"append-to-body":"",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.printDialog,"open",t)}}},[a("label",[e._v("请确认：")]),a("br"),e._v(" 即将执行打印发票的打印机是否选择正确"),a("br"),e._v(" 发票代码、发票号码是否与纸质发票上的发票代码、发票号码对应上"),a("br"),e._v(" 初次打印请调好打印设置的上边距与左边距以免打错位置需要作废发票 "),a("el-form",{attrs:{model:e.printDialog.form,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[e._v(" "+e._s(e.printDialog.form.invType)+" ")]),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[e._v(" "+e._s(e.printDialog.form.invCode)+" ")]),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[e._v(" "+e._s(e.printDialog.form.invNo)+" ")]),a("el-form-item",{attrs:{label:"打印机",prop:"PrinterName"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.printDialog.form.PrinterName,callback:function(t){e.$set(e.printDialog.form,"PrinterName",t)},expression:"printDialog.form.PrinterName"}},e._l(e.printerNameArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上边距"}},[a("el-input",{model:{value:e.printDialog.form.TopMargin,callback:function(t){e.$set(e.printDialog.form,"TopMargin",t)},expression:"printDialog.form.TopMargin"}},[a("template",{slot:"append"},[e._v("(mm)")])],2)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"左边距"}},[a("el-input",{model:{value:e.printDialog.form.LeftMargin,callback:function(t){e.$set(e.printDialog.form,"LeftMargin",t)},expression:"printDialog.form.LeftMargin"}},[a("template",{slot:"append"},[e._v("(mm)")])],2)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendPrintData("preview")}}},[e._v("预 览")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendPrintData("print")}}},[e._v("打 印")]),a("el-button",{on:{click:function(t){e.printDialog.open=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],r=a("c7eb"),l=a("1da1"),s=(a("13d5"),a("d3b7"),a("3ca3"),a("ddb0"),a("c394")),c=a("0cb6"),u=a("53ca"),d=(a("ac1f"),a("00b4"),a("b64b"),a("e9c4"),a("159b"),a("caad"),a("2532"),null),p="http://www.rubylong.cn/download/gridreport6-webapp.exe",h="6.8.1.0";function m(e){"function"==typeof e&&(n=e)}function f(e,t){return t||("object"==Object(u["a"])(e)&&(t=e.method,e=e.url),t||(t=/.grf|.txt|.xml|.json/.test(e)?"GET":"POST")),t}var b=function(e){var t,a=0,n=e.length;if("object"==Object(u["a"])(e))return!!e.url;if("string"!=typeof e)return 0;while(a<n){if(t=e[a],!/\s/g.test(t))break;a++}return"{"!=t&&"<"!=t&&"_WR_"!=e.substr(a,4)};function g(e,t,a,n,i){var o,r=new XMLHttpRequest;if(r.onreadystatechange=function(){4==r.readyState&&r.status>0&&a.call(n,r,200==r.status)},r.onerror=function(){a.call(n,r,0)},"object"==Object(u["a"])(t)&&(o=t.headers,"string"==typeof o&&(o=JSON.parse(o)),e||(e=t.method),i||(i=t.data),t=t.url),r.open(f(t,e),t,!0),o&&"object"==Object(u["a"])(o))for(var l in o)r.setRequestHeader(l,o[l]);r.send(i)}function v(e){return"grwebapp://"+(e?JSON.stringify(e):"")}function y(e){var t=e?{type:"update",url:p,ver:h}:0;window.location.href=v(t)}function _(e){return e||(d?1!=d.readyState&&alert("WebSocket正在连接中，暂不能发送数据！"):alert("WebSocket没有创建，无法发送数据！")),d&&1===d.readyState}function x(e){d&&1===d.readyState||("WebSocket"in window?(d=new WebSocket("ws://127.0.0.1:22333"),e&&(d.onopen=function(){e()}),n&&(d.onmessage=function(e){n(e)}),d.onerror=function(){var e=document.body.children,t=e.length,a=t?e[0]:null,n=document.createElement("h3");d=null,alert("创建WebSocket失败，可能是WEB报表客户端程序没有启动，或其在本机没有安装，请根据网页顶部的提示进行相应的操作。"),n.innerHTML='特别提示：尝试<a href="javascript:webapp_urlprotocol_startup();">启动WEB报表客户端程序</a>。或<a href="'+p+'">点击下载WEB报表客户端程序</a>，下载后双击下载的文件进行安装，安装完成后重新打开当前网页。',document.body.insertBefore(n,a)},d.onclose=function(){d=null}):alert("当前浏览器不支持HTML5的WebSocket，请选用更新版本的浏览器！"))}function w(e,t,a,n,i,o,r){t?(n?b(n)?g(i,n,(function(t,a){a?(e.data=t.responseText,o()):window.open(n,"blank")}),void 0,r):(e.data="object"==Object(u["a"])(n)?JSON.stringify(n):n,o()):e.data="",b(t)?g(a,t,(function(a,n){n?(e.report=a.responseText,o()):window.open(t,"blank")})):(e.report="object"==Object(u["a"])(t)?JSON.stringify(t):t,o())):alert("在参数中没有定义报表模板的url，报表不能生成！")}function k(e,t){var a=t.length,n=[],i=0;function o(t,o){var r=t.report,l=t.data,s=t.report_method,c=t.data_method,u=t.dataUrlParams,p=n[o],h=l.Display||[];function m(){var t,o="",r=[];p.report&&void 0!==p.data&&++i>=a&&(t=JSON.stringify(e),n.forEach((function(t){var a=t.report,n=t.data,i=a.length,l="";a=JSON.parse(a),a.Printer.LeftMargin=e.LeftMargin,a.Printer.TopMargin=e.TopMargin,h.length>0&&a.ReportHeader[0].Control.forEach((function(e){h.includes(e.Name)&&(e.Visible=!1)})),a=JSON.stringify(a),i=a.length,"_WR_"===a.substr(0,4)&&(l+=i,o+=l,i+=l.length),o+=a,n&&(o+=n),r.push(i+n.length)})),t+=JSON.stringify(r),t+=o,d.send(t))}delete l.Display,w(p,r,s,l,c,m,u)}_(1)?t.forEach((function(e,t){n.push({}),o(e,t)})):x((function(){k(e,t)}))}a("99af"),a("498a"),a("5319");var T=a("c38a");function D(e,t){if(!e.sellName||!e.sellTaxNo||!e.buyName||!e.invCode||!e.invNo||!e.invDate)return t.msgError("发票【".concat(e.invCode,"_").concat(e.invNo,"】关键信息为空，不能打印")),!1;var a=[],n={vatType:"invType",zf:"",InvTypeCode:"invCode",InvNo:"invNo",InvCheckNum:"checkCode",invDate:"invDate",CName:"buyName",CTaxCode:"buyTaxNo",CAddressPhone:"buyBankAccount",CBankNameCode:"buyAddrTel",M1:"",M2:"",M3:"",M4:"",Amt:"totalAmountWithoutTax",TaxAmt:"totalAmount",DxAmt:"",TotalAmt:"totalTaxAmount",SName:"sellName",STaxCode:"sellTaxNo",SAddressPhone:"sellAddrTel",SBankNameCode:"sellBankAccount",Notes:"note",cashier:"cashier",checker:"checker",invoicer:"invoicer"},i={PictureBox5:"",vatType:"",zf:"",fs:"",InvTypeCode:"",InvNo:"",InvCheckNum:"",invDate:"",CName:"",CTaxCode:"",CAddressPhone:"",CBankNameCode:"",M1:"",M2:"",M3:"",M4:"",Amt:"",TaxAmt:"",DxAmt:"",TotalAmt:"",SName:"",STaxCode:"",SAddressPhone:"",SBankNameCode:"",Notes:"",cashier:"",checker:"",invoicer:""};for(var o in i)i[o]=e[n[o]];e.specialTicket&&"0"!=e.specialTicket?"08"==e.specialTicket||"18"==e.specialTicket?i.vatType="成品油":"12"==e.specialTicket?i.vatType="机动车":i.vatType="":i.vatType="","0"==e.invType?"3"==e.taxnoType||"0"==e.taxnoType?a.push("MemoBox16"):i.machineCode=e.machineNo:("3"!=e.taxnoType&&"0"!=e.taxnoType&&(i.machineCode=e.machineNo),i.Notes="校验码：".concat(e.checkCode,"\n").concat(e.note)),e.pwdCode||(e.pwdCode="035/38/9673+4*00378<-3>86-9-**54-*5<77466784239/2+-3--<9+6+9-26931212<>5928384<5+1*05/547<38>001304/0697/>458/72"),108==e.pwdCode.length?(i.M1=e.pwdCode.substring(0,27),i.M2=e.pwdCode.substring(27,54),i.M3=e.pwdCode.substring(54,81),i.M4=e.pwdCode.substring(81)):112==e.pwdCode.length&&(i.M1=e.pwdCode.substring(0,28),i.M2=e.pwdCode.substring(28,56),i.M3=e.pwdCode.substring(56,84),i.M4=e.pwdCode.substring(84)),"1"==e.redFlag&&e.totalAmount<0?i.fs="销项负数":"1"==e.cancelFlag?i.zf="作废":(i.fs="",i.zf=""),0==e.totalTaxAmount&&(i.MemoBox8="***"),i.PictureBox5=e.ewm;var r={};if(e.details.length>8||"1"==e.detailFlag)r.gn1="(详见销货清单)",r.a1=e.totalAmount,"0"==e.multyRate?"1"==e.details[0].preferentialFlag?i.tr1=e.details[0].preferentialType:["1","2"].includes(e.details[0].taxZeroRate)&&"0"==e.details[0].rate?"1"==e.details[0].taxZeroRate?i.tr1="免税":i.tr1="不征税":i.tr1=e.details[0].rate+"%":r.tr1="",0==e.totalAmount?i.MemoBoxTA="***":i.ta1=e.totalTaxAmount;else for(var l=0;l<e.details.length;l++){var s=e.details[l];"详见对应正数发票及清单"!=s.goodsName.trim()&&s.goodsNameAbbreviation&&s.goodsName&&s.amount&&s.rate&&s.taxAmount,"详见对应正数发票及清单"==s.goodsName||"*"==s.goodsName.substring(0,1)?r["gn"+(l+1)]=s.goodsName:r["gn"+(l+1)]="*".concat(s.goodsNameAbbreviation.replace(/^\*|\*$/g,""),"*").concat(s.goodsName),r["gs"+(l+1)]=s.standard,r["u"+(l+1)]=s.unit,r["q"+(l+1)]=s.number,"0"==e.hsbz?(r["p"+(l+1)]=s.price,r["a"+(l+1)]=s.amount):(r["p"+(l+1)]=s.withPrice,r["a"+(l+1)]=s.withAmount),"1"==s.preferentialFlag?r["tr"+(l+1)]=s.preferentialType:["1","2"].includes(s.taxZeroRate)&&"0"==s.rate?"1"==s.taxZeroRate?r["tr"+(l+1)]="免税":r["tr"+(l+1)]="不征税":r["tr"+(l+1)]=s.rate+"%",r["ta"+(l+1)]=s.taxAmount;for(var c=["gn","gs","u","q","p","a","tr","ta"],u=["goodsNameAbbreviation","standard","unit","number","price","amount","rate","taxAmount"],d=0;d<c.length;d++)i[c[d]+(l+1)]=0==d?"*".concat(e.details[l].goodsNameAbbreviation,"*").concat(e.details[l].goodsName):e.details[l][u[d]]}return i=Object.assign(i,r),{Master:new Array(i),Display:a}}function S(e,t){if(!e.sellName||!e.buyName||!e.invCode||!e.invNo||!e.invDate)return t.msgError("清单【".concat(e.invCode,"_").concat(e.invNo,"】关键信息为空，不能打印")),!1;var a={CName:"buyName",InvNo:"invNo",InvDate:"invDate",TotalJe:"",TotalSe:"",Notes:"note",SName:"sellName",InvTypeCode:"invCode",fplx:"invType",ssfplx:"",PageTotalJe:"",PageTotalSe:"",totalPage:"",pageIndex:""},n={CName:"",InvNo:"",InvDate:"",TotalJe:"",TotalSe:"",Notes:"",SName:"",InvTypeCode:"",fplx:"",ssfplx:"",PageTotalJe:"",PageTotalSe:"",totalPage:"",pageIndex:""};for(var i in n)n[i]=e[a[i]];var o=e.details,r=[],l=[],s=[],c=1;n.totalPage=Math.ceil(o.length/25),n.pageIndex=c;for(var u=0,d=0,p=0,h=0,m=0;m<o.length;m++)o[m].amount<0?(p+=o[m].amount,h+=o[m].taxAmount):(u+=o[m].amount,d+=o[m].taxAmount);if(0!=p){var f={goodsName:"原价合计"};f.amount=u,"0"==e.hsbz?"1"==e.details[0].preferentialFlag?f.rate=e.details[0].preferentialType:["1","2"].includes(e.details[0].taxZeroRate)&&"0"==e.details[0].rate?"1"==e.details[0].taxZeroRate?f["sl"]="免税":f["sl"]="不征税":f.rate=e.details[0].rate:f.rate="***",f.taxAmount=d,e.details.push(f);var b={goodsName:"折扣额合计"};b.amount=p,"0"==e.hsbz?"1"==e.details[0].preferentialFlag?b.rate=e.details[0].preferentialType:["1","2"].includes(e.details[0].taxZeroRate)&&"0"==e.details[0].rate?"1"==e.details[0].taxZeroRate?b["sl"]="免税":b["sl"]="不征税":b.rate=e.details[0].rate:b.rate="***",b.taxAmount=h,e.details.push(b)}for(var g=0,v=0,y=0;y<o.length;y++){if(0!=y&&y%25==0){l.push(s),s=[];var _=JSON.parse(JSON.stringify(n));_.PageTotalJe=g,_.pageTotalSe=v,_.TotalJe=e.totalAmountWithoutTax,_.TotalSe=e.totalTaxAmount,g=0,v=0,r.push(_),c++,n.pageIndex=c}var x=o[y],w={};w["ID"]=x.rowIndex+1,w["cpmc"]="*".concat(x.goodsNameAbbreviation.replace(/^\*|\*$/g,""),"*").concat(x.goodsName),w["xh"]=x.standard,w["cpdw"]=x.unit,w["cpsl"]=x.number,w["xxdj"]=x.withoutTaxPrice,w["je"]=x.amountWithoutTax,"1"==x.preferentialFlag?w["sl"]=x.preferentialType:["1","2"].includes(x.taxZeroRate)&&"0"==x.rate?"1"==x.taxZeroRate?w["sl"]="免税":w["sl"]="不征税":w["sl"]=x.rate+"%",w["se"]=x.taxAmount,s.push(w),"原价合计"!=x.goodsName&&"折扣额合计"!=x.goodsName&&(g+=x.amountWithoutTax,v+=x.taxAmount)}if(c<=n.totalPage){l.push(s);var k=JSON.parse(JSON.stringify(n));k.PageTotalJe=g,k.pageTotalSe=v,k.TotalJe=e.totalAmountWithoutTax,k.TotalSe=e.totalTaxAmount,r.push(k)}return{Master:r,Detail:l}}function O(e,t){if(!e.sellName||!e.sellTaxNo||!e.buyName||!e.invCode||!e.invNo||!e.invDate)return t.msgError("发票【".concat(e.invCode,"_").concat(e.invNo,"】关键信息为空，不能打印")),!1;var a={};return a["SName"]=e.sellName,a["STaxCode"]=e.sellTaxNo,a["SAddress"]=e.sellAddr,a["sPhone"]=e.sellTel,a["SBankName"]=e.sellBank,a["sBankAccount"]=e.sellAccount,a["CName"]=e.buyName,a["CTaxCode"]=e.buyTaxNo,a["vehicleType"]=e.vehicleType,a["factoryType"]=e.factoryNo,a["produceArea"]=e.origin,a["certNum"]=e.eligibilityNo,a["inportCertNum"]=e.importCertificateNumber,a["engineNum"]=e.engineNo,a["vin"]=e.vehicleIdentificationCode,a["taxInChargeCode"]=e.taxAuthorityName+"\n"+e.taxAuthorityCode,a["taxVoucherNum"]=e.completionVoucherNo,a["ton"]=e.tonnage,a["maxCapacity"]=e.limitedNumberOfPassengers,a["invoicer"]=e.invoicer,a["InvTypeCode"]=e.invCode,a["InvNo"]=e.invNo,a["InvDate"]=e.invDate.substring(0,10),a["MachineNo"]=e.machineNo,e.pwdCode&&190==e.pwdCode.length&&(a["M1"]=e.pwdCode.substring(0,38),a["M2"]=e.pwdCode.substring(38,76),a["M3"]=e.pwdCode.substring(76,114),a["M4"]=e.pwdCode.substring(114,152),a["M5"]=e.pwdCode.substring(152)),a["Amt"]=e.totalAmountWithoutTax,a["taxRate"]=e.rate+"%",a["TaxAmt"]=e.totalTaxAmount,a["TotalAmt"]=e.totalAmount,a["DxAmt"]=Object(T["s"])(e.totalAmount),"1"==e.redFlag||e.totalAmount<0?a["fs"]="销项负数":"1"==e.cancelFlag?a["zf"]="作废":(a["fs"]="",a["zf"]=""),{Master:new Array(a)}}function N(e,t){if(e={searchValue:null,createBy:"1",createTime:"2022-4-14 20:30",updateBy:"1432525525779353602",updateTime:"2022-9-29 18:14",remark:null,params:{},deptIds:null,id:"1514581738871984128",billGuid:"KN2204130000002",billNo:"KN2204130000002",billType:"二手车业务",billSplitType:"0",billSource:"KIRIN",bizDate:"2022-04-14",invCode:"111000010006",invNo:"89969621",invDate:"2022-04-15 02:56:25",machineNo:"123123",ewm:"iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAIAAAD6XpeDAAAC9ElEQVR42u3aUY6EIBAFwLn/pd0TbCLQr0EtPzdGkWID/Xp+v8B13bj+u//OM1femxjD6LuOvuDBgwfvI3jXwnXnOYn3Vk36ClICe3gRwIMHDx68abzRPfKEzb9zMaXnZ/h+ePDgwYP3CLwEWOLgkHgvPHjw4MF7P95K1tpZaCcOWfDgwYMH7yy89Gbeucmng/LXdhXgwYMH78V4VVficPGmvx99QYIHD96L8a7wlQ6Iq4rcRBgdn1t48ODBgzc9D+lAOf1DoESQnWgCJwJ6ePDgwYNX0oP87fqYNFjVglu5p+p+ePDgwYM3VqQnNsz0/U9Biix6ePDgwYNXgpc+BSXC7tPC6xWYW98CDx48ePCm9/6nBNOJwr8zBG/9L4QHDx48eOUNwKrDwgmFdmL8iQUNDx48ePDG5rmzk7trVSaCiETTdXiRwYMHDx68ErzOSa/6mCtwpRd6PFWBBw8ePHjRwjwdFu8Kr8t+OJT+L4QHDx48eOV13gmBb2IR7DpMDUPCgwcPHrxpvJM3/HT3Ob34IvfAgwcPHrxpvKoNdhdY59gSzd5tnXR48ODB+wjeyiSmG7ydgW9nUb+tMQsPHjx48MoL27JBpIPdTYepxPjhwYMHD15fM7YzqE1jRwrnhUUwnLDAgwcPHrzpZmxiQFVjSDRaq8aZDsrhwYMHD96ePHNXwH1aEb0tmIYHDx48eFG8qsJz1+afDgQShXkkbYEHDx48eCV14baitbHJnA64yw4s8ODBgwevPCBOFMhPaZAmCnx48ODBg5fFSzchE+99SgO56gAIDx48ePDmf7eSuNLF78mTng7i4cGDBw9eWw8yvo/umsTO5yQCE3jw4MGDNx9MVw16V6id/t5dTV148ODBg1ffz0sE0IkCufOZrSfAO++FBw8ePHjH4qWbwIlDVvrg9pgDCzx48ODBa2tOdsKsPKczEIAHDx48ePN4ibA43bD9wnjgwYMHD15bDtx68EncnwComvRdYTc8ePDgfQTvDz7Wl2I5dlpaAAAAAElFTkSuQmCC",buyName:"曾海蓉企业",buyNumber:null,buyIdCard:"360734199011113333",buyAddr:"15811882956",buyTel:"15811882956",sellName:"广东百望测试2",sellIdCard:"554433221100001",sellAddr:"广州市海珠区仑头路官洲街北山村桥头大街240号自编之一",sellTel:"020-23344242",cardNum:"京A05282",recording:"登记证",vehicleType:"纯电动轿车",vehicleIdentificationCode:"L1NSPGHB9MA060565",factoryNo:"汉字HH2222222222225685",carMgrName:"车管所",businessAddr:"广州市海珠区仑头路官洲街北山村桥头大街240号自编之一",businessTaxNo:"554433221100001",businessBankAccount:"中信银行广州分行营业部 8110901013100613630",businessTel:"020-23344242",marketName:"",marketTaxNo:"",marketAddr:"",marketBankAccount:"",marketTel:"",totalAmount:21e4,totalTaxAmount:0,totalAmountWithoutTax:21e4,invoicer:"杨陶然",note:"减免0.5%征收增值税",completionVoucherNo:"",openType:"01",openFlag:0,yylxdm:1,redFlag:"2",cancelFlag:null,sourceInvCode:"",sourceInvNo:"",taxTypeCode:null,billNumber:0x1504e01096021000,billId:0,taxnoInfo:"123123_00001",deptId:0x1387af4a71421000,ext1:null,ext2:null,ext3:null,reason:null,rewriteFlag:"-1",rewriteMsg:"回写失败：发票中心查询异常",rewriteFalseNumber:0,printedFlag:"1",pwdCode:"345345345345345",fxkjbz:null,taxnoInfoList:null},!e.businessName||!e.businessTaxNo||!e.buyName||!e.invCode||!e.invNo||!e.invDate)return t.msgError("发票【".concat(e.invCode,"_").concat(e.invNo,"】关键信息为空，不能打印")),!1;var a={SName:"businessName",STaxCode:"businessTaxNo",SAddress:"businessAddr",sPhone:"businessTel",sBankAccount:"businessBankAccount",sellName:"sellName",sellTaxCode:"sellIdCard",sellAddress:"sellAddr",sellPhone:"sellTel",CName:"buyName",CTaxCode:"buyIdCard",CAddress:"buyAddr",CPhone:"buyTel",vehicleType:"vehicleType",factoryType:"factoryNo",carRegNum:"cardNum",certNum:"recording",vaon:"carMgrName",vin:"vehicleIdentificationCode",UVMName:"marketName",UVMTaxCode:"marketTaxNo",UVMAddress:"marketAddr",UVMPhone:"marketTel",UVMBankInfo:"marketBankAccount",notes:"note",invoicer:"invoicer",InvTypeCode:"invCode",InvNo:"invNo",InvDate:"invDate",TotalAmt:"totalAmount"},n={};for(var i in a)n[i]=e[a[i]];return n["DxAmt"]=Object(T["s"])(e.totalAmount),"1"==e.redFlag||e.totalAmount<0?n["fs"]="销项负数":"1"==e.cancelFlag?n["zf"]="作废":(n["fs"]="",n["zf"]=""),n.PictureBox5=e.ewm,{Master:new Array(n)}}var P={name:"printTest",data:function(){return{rows:[{id:"1483690164361498624",invDate:"2022-01-19 13:16:33"}],printerNameArr:[],printDialog:{open:!1,form:{invType:"1",invCode:"111111111111",invNo:"22222222",PrinterName:"",LeftMargin:"",TopMargin:""}},printData:[]}},created:function(){var e=this;return Object(l["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["u"])();case 2:a=t.sent,200==a.code&&(e.printerNameArr=a.data),m(e.webapp_onmessage),y();case 6:case"end":return t.stop()}}),t)})))()},methods:{printInvoice:function(){var e=this;return Object(l["a"])(Object(r["a"])().mark((function t(){var a,n,i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["t"])({ids:["1483690164361498624","1483018632626835456"]});case 2:for(a=t.sent,n=[],a.data.length>0&&(n=a.data.reduce((function(e,t){return e.push(t.taxnoType),e}),[])),i=[],o=0;o<e.rows.length;o++)i.push(Object(s["r"])(e.rows[o]));Promise.all(i).then((function(t){console.log(t);for(var a=[],i=0;i<t.length;i++){var o=t[i].data;o.taxnoType=n[i];var r=D(o,e);if(!r)return;a.push({report:"0"==n[i]?"/data/printTemplate/invoice.grf":"/data/printTemplate/invoice_ukey.grf",data:r}),0==i&&(e.printDialog.form.invType=o.invType,e.printDialog.form.invCode=o.invCode,e.printDialog.form.invNo=o.invNo,e.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),e.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,e.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0)}e.printDialog.open=!0,e.printData=a}));case 8:case"end":return t.stop()}}),t)})))()},printInvoiceList:function(){for(var e=this,t=[],a=0;a<this.rows.length;a++)t.push(Object(s["r"])(this.rows[a]));Promise.all(t).then((function(t){console.log(t);for(var a=[],n=0;n<t.length;n++){var i=t[n].data,o=S(i);if(!o)return;for(var r=0;r<o.Master.length;r++)a.push({report:"/data/printTemplate/invoiceList.grf",data:{Master:o.Master[r],Detail:o.Detail[r]}});0==n&&(e.printDialog.form.invType=i.invType,e.printDialog.form.invCode=i.invCode,e.printDialog.form.invNo=i.invNo,e.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),e.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,e.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0)}e.printDialog.open=!0,e.printData=a}))},printVehicle:function(){for(var e=this,t=[{id:"1605767537952428032"}],a=[],n=0;n<t.length;n++)a.push(Object(c["i"])(t[n].id));Promise.all(a).then((function(t){console.log(t);for(var a=[],n=0;n<t.length;n++){var i=t[n].data,o=O(i,e);if(!o)return;a.push({report:"/data/printTemplate/invoice_vehicle.grf",data:O(i)}),0==n&&(e.printDialog.form.invType=i.invType,e.printDialog.form.invCode=i.invCode,e.printDialog.form.invNo=i.invNo,e.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),e.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,e.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0)}e.printDialog.open=!0,e.printData=a}))},printUsedCar:function(){var e=[],t=N({},this);if(t){e.push({report:"/data/printTemplate/invoice_usedVehicle.grf",data:t});var a=0;0==a&&(this.printDialog.form.PrinterName=localStorage.getItem("PrinterName"),this.printDialog.form.TopMargin=localStorage.getItem("TopMargin")||0,this.printDialog.form.LeftMargin=localStorage.getItem("LeftMargin")||0),this.printDialog.open=!0,this.printData=e}},sendPrintData:function(e){localStorage.setItem("PrinterName",this.printDialog.form.PrinterName),localStorage.setItem("TopMargin",this.printDialog.form.TopMargin),localStorage.setItem("LeftMargin",this.printDialog.form.LeftMargin);var t={scripts:[],type:e,showOptionDlg:!1,SheetPaperSize:9,TopMargin:this.printDialog.form.TopMargin,LeftMargin:this.printDialog.form.LeftMargin,PrinterName:this.printDialog.form.PrinterName},a=this.printData;"print"==e&&(this.printDialog.open=!1),k(t,a)},webapp_onmessage:function(e){this.msgSuccess("打印完成")}}},C=P,A=a("2877"),F=Object(A["a"])(C,i,o,!1,null,"229652c2",null);t["default"]=F.exports},b22c:function(e,t,a){"use strict";a("7b1b")},b311:function(e,t,a){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
(function(t,a){e.exports=a()})(0,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),r=d(o),l=a(3),s=d(l),c=a(4),u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(e,a){p(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.resolveOptions(a),n.listenClick(e),n}return m(t,e),i(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof e.action?e.action:this.defaultAction,this.target="function"===typeof e.target?e.target:this.defaultTarget,this.text="function"===typeof e.text?e.text:this.defaultText,this.container="object"===n(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,u.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new r.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return b("action",e)}},{key:"defaultTarget",value:function(e){var t=b("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return b("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"===typeof e?[e]:e,a=!!document.queryCommandSupported;return t.forEach((function(e){a=a&&!!document.queryCommandSupported(e)})),a}}]),t}(s.default);function b(e,t){var a="data-clipboard-"+e;if(t.hasAttribute(a))return t.getAttribute(a)}e.exports=f},function(e,t,a){"use strict";var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(2),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t){s(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=a+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"===typeof e?"undefined":n(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=c},function(e,t){function a(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var a=e.hasAttribute("readonly");a||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),a||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}e.exports=a},function(e,t){function a(){}a.prototype={on:function(e,t,a){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:a}),this},once:function(e,t,a){var n=this;function i(){n.off(e,i),t.apply(a,arguments)}return i._=t,this.on(e,i,a)},emit:function(e){var t=[].slice.call(arguments,1),a=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=a.length;for(n;n<i;n++)a[n].fn.apply(a[n].ctx,t);return this},off:function(e,t){var a=this.e||(this.e={}),n=a[e],i=[];if(n&&t)for(var o=0,r=n.length;o<r;o++)n[o].fn!==t&&n[o].fn._!==t&&i.push(n[o]);return i.length?a[e]=i:delete a[e],this}},e.exports=a},function(e,t,a){var n=a(5),i=a(6);function o(e,t,a){if(!e&&!t&&!a)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(a))throw new TypeError("Third argument must be a Function");if(n.node(e))return r(e,t,a);if(n.nodeList(e))return l(e,t,a);if(n.string(e))return s(e,t,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,a){return e.addEventListener(t,a),{destroy:function(){e.removeEventListener(t,a)}}}function l(e,t,a){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,a)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,a)}))}}}function s(e,t,a){return i(document.body,e,t,a)}e.exports=o},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var a=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"===typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},function(e,t,a){var n=a(7);function i(e,t,a,n,i){var o=r.apply(this,arguments);return e.addEventListener(a,o,i),{destroy:function(){e.removeEventListener(a,o,i)}}}function o(e,t,a,n,o){return"function"===typeof e.addEventListener?i.apply(null,arguments):"function"===typeof a?i.bind(null,document).apply(null,arguments):("string"===typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,a,n,o)})))}function r(e,t,a,i){return function(a){a.delegateTarget=n(a.target,t),a.delegateTarget&&i.call(e,a)}}e.exports=o},function(e,t){var a=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function i(e,t){while(e&&e.nodeType!==a){if("function"===typeof e.matches&&e.matches(t))return e;e=e.parentNode}}e.exports=i}])}))},b313:function(e,t,a){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b380:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},i=[],o=a("2877"),r={},l=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},b429:function(e,t,a){},b526:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"40px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.calcTotalData,"show-header":!1}},[a("el-table-column",{attrs:{width:"100",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}}),"1"==e.showError?a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column4"}}):e._e()],1)],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("b680"),{name:"totalRowTable",props:{totalTableData:{default:[{name:"选择合计",column1:"",column2:"",column3:"",column4:""}]},showError:{default:"0"},type:{default:"output"}},computed:{calcTotalData:function(){var e=[{name:"合计",column1:"",column2:"",column3:"",column4:""}];if(e[0].name="合计("+this.totalTableData.length+"行)","output"==this.type){var t,a=0,n=0,i=0,r=0,l=Object(o["a"])(this.totalTableData);try{for(l.s();!(t=l.n()).done;){var s=t.value;a+=""==s.totalAmountWithoutTax||null==s.totalAmountWithoutTax?0:parseFloat(s.totalAmountWithoutTax),n+=""==s.totalTaxAmount||null==s.totalTaxAmount?0:parseFloat(s.totalTaxAmount),i+=""==s.totalAmount||null==s.totalAmount?0:parseFloat(s.totalAmount),r+=""==s.totalDiffe||null==s.totalDiffe?0:parseFloat(s.totalDiffe)}}catch(f){l.e(f)}finally{l.f()}e[0].column1="不含税金额合计:"+a.toFixed(2),e[0].column2="税额合计:"+n.toFixed(2),e[0].column3="价税合计:"+i.toFixed(2),e[0].column4="误差合计:"+r.toFixed(2)}else if("gx"==this.type){var c,u=0,d=0,p=0,h=Object(o["a"])(this.totalTableData);try{for(h.s();!(c=h.n()).done;){var m=c.value;u+=""==m.totalWithoutAmount||null==m.totalWithoutAmount?0:parseFloat(m.totalWithoutAmount),d+=""==m.taxAmount||null==m.taxAmount?0:parseFloat(m.taxAmount),p+=""==m.validTaxAmount||null==m.validTaxAmount?0:parseFloat(m.validTaxAmount)}}catch(f){h.e(f)}finally{h.f()}e[0].column1="金额合计:"+u.toFixed(2),e[0].column2="税额合计:"+d.toFixed(2),e[0].column3="有效税额合计:"+p.toFixed(2)}return e}}}),l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,"3a87d604",null);t["default"]=c.exports},b5a3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container",attrs:{"element-loading-text":e.routeLoadingText}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"返回结果",prop:"result"}},[a("el-input",{attrs:{placeholder:"请输入返回结果",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.result,callback:function(t){e.$set(e.queryParams,"result",t)},expression:"queryParams.result"}})],1),a("el-form-item",{attrs:{label:"识别日期",prop:"creatDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择识别日期"},model:{value:e.queryParams.creatDate,callback:function(t){e.$set(e.queryParams,"creatDate",t)},expression:"queryParams.creatDate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:ocrrecord:synch"],expression:"['income:ocrrecord:synch']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleSync}},[e._v("同步")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:ocrrecord:export"],expression:"['income:ocrrecord:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ocrRecordMainTable",attrs:{data:e.ocrrecordList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.prop])+" ")]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.syncTitle,visible:e.syncOpen,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.syncOpen=t}}},[a("el-form",{ref:"form",attrs:{model:e.syncForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"同步时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.syncTime,callback:function(t){e.syncTime=t},expression:"syncTime"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.syncSubmit}},[e._v("确 定")]),a("el-button",{on:{click:e.syncCancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d81d"),a("ac1f"),a("5319"),a("b775"));function l(e){return Object(r["a"])({url:"/income/ocrrecord/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/income/ocrrecord/export",method:"post",data:e,responseType:"blob"})}function c(e){return Object(r["a"])({url:"/income/ocrrecord/synchOcrRecord",method:"post",params:e})}var u=a("ed08"),d=(a("c38a"),{name:"Ocrrecord",components:{},data:function(){return{routeLoading:!1,routeLoadingText:"",functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,ocrrecordList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:500,appKey:null,appSecret:null,invInterfaceType:null,result:null,resultNum:null,remoteId:null,ext1:null,ext2:null,ext3:null},form:{},rules:{createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}]},columnsArr:[{label:"账号",prop:"appKey",align:"center",show:!0,width:"",columnSort:20},{label:"返回结果",prop:"result",align:"center",show:!0,width:"",columnSort:0},{label:"识别返回数量",prop:"resultNum",align:"center",show:!0,width:"",columnSort:1},{label:"识别时间",prop:"createTime",align:"center",show:!0,width:"",columnSort:2}],sortParam:{column:"",columnOrder:""},syncTime:[],syncTitle:"同步OCR识别记录",syncOpen:!1,syncForm:{}}},created:function(){var e=this;this.getList(),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(u["e"])(this.queryParams),Object(u["e"])(this.sortParam));l(t).then((function(t){e.ocrrecordList=t.rows,e.total=t.total,e.loading=!1}))},syncCancel:function(){this.syncOpen=!1,this.syncTime=[]},reset:function(){this.form={id:null,appKey:null,appSecret:null,invInterfaceType:null,result:null,resultNum:null,createTime:null,remoteId:null,ext1:null,ext2:null,ext3:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleExport:function(){var e=this,t=Object(u["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出所有ocr接口调用记录数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s(t)})).then((function(t){e.currencyDownload(t,"ocr接口调用记录.xls",e)})).catch((function(){}))},handleSync:function(){this.syncOpen=!0},syncSubmit:function(){var e=this;if(this.syncTime&&2==this.syncTime.length){var t={st:this.syncTime[0],et:this.syncTime[1]};this.syncOpen=!1,this.routeLoading=!0,this.routeLoadingText="同步中",c(t).then((function(t){e.routeLoading=!1,200==t.code?(e.msgSuccess(t.msg),e.getList()):e.msgError(t.msg)})).catch((function(){e.routeLoading=!1}))}else this.msgError("请选择正确的同步时间")},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.ocrRecordMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.ocrrecordList,"ocrRecordMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a}}}),p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},b5d2:function(e,t,a){},b5e8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.invoiceDetailLoading,expression:"invoiceDetailLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"95px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode","string"===typeof t?t.trim():t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo","string"===typeof t?t.trim():t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticClass:"date-picker-503",staticStyle:{width:"503px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据类型",prop:"billType"}},[a("el-select",{attrs:{placeholder:"请选择单据类型",clearable:"",size:"small"},model:{value:e.queryParams.billType,callback:function(t){e.$set(e.queryParams,"billType",t)},expression:"queryParams.billType"}},e._l(e.billTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.invTypeOptions,(function(t){return["81","82","51","52"].includes(t.dictValue)?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()}))],2)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"红冲标志",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择红冲标志",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否作废",prop:"cancelFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否作废",clearable:"",size:"small"},model:{value:e.queryParams.cancelFlag,callback:function(t){e.$set(e.queryParams,"cancelFlag",t)},expression:"queryParams.cancelFlag"}},e._l(e.cancelFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已打印",prop:"printedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已打印",clearable:"",size:"small"},model:{value:e.queryParams.printedFlag,callback:function(t){e.$set(e.queryParams,"printedFlag",t)},expression:"queryParams.printedFlag"}},e._l(e.printedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否已推送",prop:"pushedFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否已推送",clearable:"",size:"small"},model:{value:e.queryParams.pushedFlag,callback:function(t){e.$set(e.queryParams,"pushedFlag",t)},expression:"queryParams.pushedFlag"}},e._l(e.pushedFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"签章标志",prop:"signFlag"}},[a("el-select",{attrs:{placeholder:"请选择签章标志",clearable:"",size:"small"},model:{value:e.queryParams.signFlag,callback:function(t){e.$set(e.queryParams,"signFlag",t)},expression:"queryParams.signFlag"}},e._l(e.signFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invoicer,callback:function(t){e.$set(e.queryParams,"invoicer","string"===typeof t?t.trim():t)},expression:"queryParams.invoicer"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.note,callback:function(t){e.$set(e.queryParams,"note","string"===typeof t?t.trim():t)},expression:"queryParams.note"}})],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:sign"],expression:"['output:invoice:sign']"}],attrs:{type:"danger",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.refreshSignature}},[e._v("刷新签章")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:download"],expression:"['output:invoice:download']"}],attrs:{type:"info",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.downloadInvoice}},[e._v("下载")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:download"],expression:"['output:invoice:download']"}],attrs:{type:"info",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.downloadInvoiceXml}},[e._v("下载XML")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:download"],expression:"['output:invoice:download']"}],attrs:{type:"info",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.downloadInvoiceOfd}},[e._v("下载OFD")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:push"],expression:"['output:invoice:push']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.emailPush}},[e._v("邮箱推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:pushSms"],expression:"['output:invoice:pushSms']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.messagePush}},[e._v("短信推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:pushCard"],expression:"['output:invoice:pushCard']"}],attrs:{type:"primary",icon:"el-icon-s-ticket",size:"mini",disabled:e.multiple},on:{click:e.cardPush}},[e._v("卡包推送")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:export"],expression:"['output:invoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出主体")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:export"],expression:"['output:invoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportDetail}},[e._v("导出明细")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ticketMainTable",attrs:{data:e.invoiceList,"row-class-name":e.tableRowClassName,height:e.tableHeight,"use-virtual":"","row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:""},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceInfo(n.row)}}},[e._v(" "+e._s(n.row.billNo)+" ")]):"invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"bizDate"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}"))+" ")]):"redFlag"==t.prop?a("span",[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"cancelFlag"==t.prop?a("span",[e._v(" "+e._s(e.cancelFlagFormat(n.row))+" ")]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"printedFlag"==t.prop?a("span",[e._v(" "+e._s(e.printedFlagFormat(n.row))+" ")]):"pushedFlag"==t.prop?a("span",[e._v(" "+e._s(e.pushedFlagFormat(n.row))+" ")]):"rewriteFlag"==t.prop?a("span",[e._v(" "+e._s(e.rewriteFlagFormat(n.row))+" ")]):"signFlag"==t.prop?a("span",[e._v(" "+e._s(e.signFlagFormat(n.row))+" ")]):"vouchFlag"==t.prop?a("span",[e._v(" "+e._s(e.vouchFlagFormat(n.row))+" ")]):"pdfUrl"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"}},[a("span",{on:{click:function(t){return e.showPdf(n.row)}}},[e._v("查看")]),["81","82"].includes(n.row.invType)?[a("span",{staticStyle:{margin:"0 5px"}},[e._v("/")]),a("span",{on:{click:function(t){return e.downloadPdf(n.row)}}},[e._v("下载")])]:e._e()],2):"invCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"invNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo)+" ")]):"sourceInvCode"==t.prop?a("span",[e._v(" "+e._s(["81","82"].includes(n.row.invType)?"":n.row.sourceInvCode)+" ")]):"sourceInvNo"==t.prop?a("span",[e._v(" "+e._s((["81","82"].includes(n.row.invType)?n.row.sourceInvCode:"")+n.row.sourceInvNo)+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("FptkShow",{ref:"showModal",on:{updateInvoiceTable:e.updateInvoiceTable}}),a("el-dialog",{attrs:{title:"pdf详情",visible:e.pdfDetailOpen,width:"60vw","append-to-body":"",id:"pdfDetailModal"},on:{"update:visible":function(t){e.pdfDetailOpen=t}}},[a("div",{staticStyle:{height:"60vh"}},[a("iframe",{attrs:{src:e.pdfModalUrl,width:"100%",scrolling:"auto",frameborder:"no",height:"100%"}})])])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("ac1f"),a("5319"),a("498a"),a("d81d"),a("caad"),a("a15b"),a("c394")),l=a("3478"),s=a("c85c"),c=(a("722a"),a("c10b")),u=a("1055"),d=a("b526"),p=a("ed08"),h={name:"ticket",components:{FptkShow:u["default"],TotalRowTable:d["default"]},data:function(){return{module:"einvoice",columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:180,columnSort:0},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:150,columnSort:1},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:120,columnSort:2},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:3},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:4},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:5},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:150,columnSort:6},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:120,columnSort:7},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:120,columnSort:8},{label:"购方纳税人识别号",prop:"buyTaxNo",align:"center",show:!0,width:180,columnSort:9},{label:"购方开户账号",prop:"buyBankAccount",align:"center",show:!0,width:180,columnSort:10},{label:"购方地址电话",prop:"buyAddrTel",align:"center",show:!0,width:150,columnSort:11},{label:"购方邮箱",prop:"buyEmail",align:"center",show:!0,width:120,columnSort:12},{label:"购方手机号码",prop:"buyTelNo",align:"center",show:!0,width:120,columnSort:13},{label:"备注",prop:"note",align:"center",show:!0,width:180,columnSort:14},{label:"收款人",prop:"cashier",align:"center",show:!0,width:180,columnSort:15},{label:"复核人",prop:"checker",align:"center",show:!0,width:150,columnSort:16},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:120,columnSort:17},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:120,columnSort:18},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:19},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:20},{label:"源正数发票代码",prop:"sourceinvCode",align:"center",show:!0,width:150,columnSort:21},{label:"源正数发票号码",prop:"sourceinvNo",align:"center",show:!0,width:120,columnSort:22},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:120,columnSort:23},{label:"是否作废",prop:"cancelFlag",align:"center",show:!0,width:180,columnSort:24},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:180,columnSort:25},{label:"是否已打印",prop:"printedFlag",align:"center",show:!0,width:150,columnSort:26},{label:"是否已推送",prop:"pushedFlag",align:"center",show:!0,width:120,columnSort:27},{label:"回写标志",prop:"rewriteFlag",align:"center",show:!0,width:120,columnSort:28},{label:"密码区",prop:"pwdCode",align:"center",show:!0,width:180,columnSort:30},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:150,columnSort:31},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:120,columnSort:32},{label:"签章标志",prop:"signFlag",align:"center",show:!0,width:120,columnSort:33},{label:"记账类型",prop:"vouchType",align:"center",show:!0,width:180,columnSort:34},{label:"已记账标识",prop:"vouchFlag",align:"center",show:!0,width:180,columnSort:35},{label:"记账结果",prop:"vouchResult",align:"center",show:!0,width:180,columnSort:36},{label:"pdf预览",prop:"pdfUrl",align:"center",show:!0,width:180,columnSort:37}],tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,dateRange:[],showSearch:!0,total:0,invoiceList:[],flagRedopen:!1,title:"",open:!1,billSplitTypeOptions:[],billSourceOptions:[],billTypeOptions:[],invTypeOptions:[],detailFlagOptions:[],cancelApplyStatusOptions:[],redApplyStatusOptions:[],redFlagOptions:[],cancelFlagOptions:[],printedFlagOptions:[],pushedFlagOptions:[],rewriteFlagOptions:[],signFlagOptions:[],headTypeOptions:[],vouchFlagOptions:[],queryParams:{billNos:null,pageNum:1,pageSize:10,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:"",detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,invStatus:null,taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null,tdyslxdm:"",shopNo:null},form:{},flagRedForm:{},rules:{},redRules:{invCode:[{required:!0,message:"发票代码不能为空",trigger:"blur"}],invNo:[{required:!0,message:"发票号码不能为空",trigger:"blur"}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],negNativeNo:[{required:!0,message:"红字申请单号不能为空",trigger:"blur"}]},taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],invoiceDetailLoading:!1,showProgress:!1,functionName:"",loadingTime:null,operationIndex:0,operationIdArr:[],operationRowArr:[],checkboxClick:!1,pdfModalUrl:null,pdfDetailOpen:!1}},computed:{totalTableData:function(){var e=Object(p["e"])(this.rows);return 0==e.length&&(e=Object(p["e"])(this.invoiceList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.getList()})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.cancelFlagOptions=t.data,e.printedFlagOptions=t.data})),this.getDicts("approve_status").then((function(t){e.cancelApplyStatusOptions=t.data,e.redApplyStatusOptions=t.data})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),this.getDicts("red_flag").then((function(t){e.redFlagOptions=t.data})),this.getDicts("invoice_push").then((function(t){e.pushedFlagOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("invoice_sign_status").then((function(t){e.signFlagOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("vouch_flag").then((function(t){e.vouchFlagOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var a={module:this.module};Promise.all([Object(c["b"])(a),Object(c["a"])(a)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].columnSort=n}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.ticketMainTable.doLayout()}))},getList:function(){var e,t=this;this.loading=!0;var a=Object(p["e"])(this.addDateRange(this.queryParams,this.dateRange));a.invType?a.invTypes=new Array(a.invType):a.invTypes=["81","82","51","52"],20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),Object(r["w"])(a).then((function(e){t.invoiceList=e.rows,t.total=e.total,t.loading=!1}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},cancelApplyStatusFormat:function(e,t){return this.selectDictLabel(this.cancelApplyStatusOptions,e.cancelApplyStatus)},redApplyStatusFormat:function(e,t){return this.selectDictLabel(this.redApplyStatusOptions,e.redApplyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},printedFlagFormat:function(e,t){return this.selectDictLabel(this.printedFlagOptions,e.printedFlag)},pushedFlagFormat:function(e,t){if(null!=e.pushedFlag||""!=e.pushedFlag){if(-1==e.pushedFlag.indexOf("-"))return"0"==e.pushedFlag?"未推送":"4"==e.pushedFlag?"无需推送":"推送成功";for(var a=e.pushedFlag.split(","),n="",i=0;i<a.length;i++)a[i].indexOf("1")>=0?n+="邮箱":a[i].indexOf("2")>=0?n+="卡包":n+="短信",-1==a[i].indexOf("-")?n+="推送成功;":n+="推送失败;";return n}},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},signFlagFormat:function(e,t){return this.selectDictLabel(this.signFlagOptions,e.signFlag)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},vouchFlagFormat:function(e,t){return this.selectDictLabel(this.vouchFlagOptions,e.vouchFlag)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:"51",detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,invStatus:"0",taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},resetQuery:function(){this.resetForm("queryForm"),this.queryParams.billNos="",this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},showInvoiceInfo:function(e){var t=this;this.invoiceDetailLoading=!0,this.reset();var a=this.$refs.ticketMainTable.selection;void 0==e.id&&(e=a[0]),this.reset();var n=e.id||this.ids,i=e.invDate,o={id:n,invDate:i};this.$refs.showModal.fillBillDialog(o).then((function(){t.invoiceDetailLoading=!1}))},openValid1:function(){var e=this,t=Object(s["d"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},handleExport:function(){var e=this,t=Object(p["e"])(this.queryParams);t.idsArr=this.ids,this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(r["m"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"已开电子发票.xls",e)})).catch((function(){}))},handleExportDetail:function(){var e=this,t=Object(p["e"])(this.queryParams);t.idsArr=this.ids,this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(r["n"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"电子票明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.ticketMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"ticketMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.invoiceList,"ticketMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},updateInvoiceTable:function(){this.getList()},refreshSignature:function(){var e=this;this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.refreshSignatureLogic()},refreshSignatureLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t,a=this.operationRowArr[this.operationIndex-1],n={id:a.id,invDate:a.invDate};t=["81","82"].includes(a.invType)?Object(l["a"])(n):Object(r["H"])(n),Promise.all([t]).then((function(t){var a=t[0];200==a.code?(e.msgSuccess("第"+e.operationIndex+"张"+a.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():e.renewOperationParam()):2002==a.code?(e.msgError("第"+e.operationIndex+"张"+a.msg),e.getList(),e.renewOperationParam()):(e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():(e.msgError("第"+e.operationIndex+"张"+a.msg),e.renewOperationParam(),e.getList()))})).catch((function(t){e.operationIndex<e.operationIdArr.length?e.refreshSignatureLogic():(e.renewOperationParam(),e.getList())}))},downloadInvoice:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能下载")}}catch(s){n.e(s)}finally{n.f()}var l={ids:this.ids.join(",")};1==a.length?(l.id=a[0].id,l.invDate=a[0].invDate,Object(r["g"])(l).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))):Object(r["k"])(this.addDateRange(l,this.dateRange)).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))},downloadInvoiceXml:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能下载")}}catch(s){n.e(s)}finally{n.f()}var l={ids:this.ids.join(",")};1==a.length?(l.id=a[0].id,l.invDate=a[0].invDate,Object(r["i"])(l).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))):Object(r["l"])(this.addDateRange(l,this.dateRange)).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))},downloadInvoiceOfd:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能下载")}}catch(s){n.e(s)}finally{n.f()}var l={ids:this.ids.join(",")};1==a.length?(l.id=a[0].id,l.invDate=a[0].invDate,Object(r["h"])(l).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))):Object(r["j"])(this.addDateRange(l,this.dateRange)).then((function(e){200==e.code?t.download(e.msg):t.msgError(e.msg)}))},emailPush:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(r){n.e(r)}finally{n.f()}this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.emailPushLogic()},emailPushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(r["C"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.emailPushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.emailPushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},messagePush:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(r){n.e(r)}finally{n.f()}this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.messagePushLogic()},cardPush:function(){var e,t=this,a=Object(p["e"])(this.rows),n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("1"!=i.signFlag)return void this.msgError("存在发票未签章不能推送")}}catch(r){n.e(r)}finally{n.f()}this.operationIdArr=Object(p["e"])(this.ids),this.operationRowArr=Object(p["e"])(this.rows),this.showProgress=!0,this.functionName="推送中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationIdArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.messageCardPushLogic()},messageCardPushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(r["B"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messageCardPushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},messagePushLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationRowArr[this.operationIndex-1],a={id:t.id,invDate:t.invDate};Object(r["D"])(a).then((function(t){200==t.code?(e.msgSuccess("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():e.renewOperationParam()):2002==t.code?(e.msgError("第"+e.operationIndex+"张"+t.msg),e.getList(),e.renewOperationParam()):(e.msgError("第"+e.operationIndex+"张"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationIdArr.length*100)),e.operationIndex<e.operationIdArr.length?e.messagePushLogic():(e.renewOperationParam(),e.getList()))})).catch((function(t){e.renewOperationParam()}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},showPdf:function(e){this.pdfDetailOpen=!0,this.pdfModalUrl=e.pdfUrl},downloadPdf:function(e){e.chinaTaxFileUrl?window.open(e.chinaTaxFileUrl,"_blank"):this.msgError("请先给当前发票刷新签章")},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},b639:function(e,t,a){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=a("1fb5"),i=a("9152"),o=a("e3db");function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function l(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(l()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,a){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,a);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,a)}function u(e,t,a,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?b(e,t,a,n):"string"===typeof t?m(e,t,a):g(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t,a,n){return d(t),t<=0?s(e,t):void 0!==a?"string"===typeof n?s(e,t).fill(a,n):s(e,t).fill(a):s(e,t)}function h(e,t){if(d(t),e=s(e,t<0?0:0|v(t)),!c.TYPED_ARRAY_SUPPORT)for(var a=0;a<t;++a)e[a]=0;return e}function m(e,t,a){if("string"===typeof a&&""!==a||(a="utf8"),!c.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(t,a);e=s(e,n);var i=e.write(t,a);return i!==n&&(e=e.slice(0,i)),e}function f(e,t){var a=t.length<0?0:0|v(t.length);e=s(e,a);for(var n=0;n<a;n+=1)e[n]=255&t[n];return e}function b(e,t,a,n){if(t.byteLength,a<0||t.byteLength<a)throw new RangeError("'offset' is out of bounds");if(t.byteLength<a+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===a&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,a):new Uint8Array(t,a,n),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=f(e,t),e}function g(e,t){if(c.isBuffer(t)){var a=0|v(t.length);return e=s(e,a),0===e.length?e:(t.copy(e,0,0,a),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),c.alloc(+e)}function _(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var a=e.length;if(0===a)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return J(e).length;default:if(n)return Y(e).length;t=(""+t).toLowerCase(),n=!0}}function x(e,t,a){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),a<=0)return"";if(a>>>=0,t>>>=0,a<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return j(this,t,a);case"utf8":case"utf-8":return F(this,t,a);case"ascii":return R(this,t,a);case"latin1":case"binary":return z(this,t,a);case"base64":return A(this,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,a);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,a){var n=e[t];e[t]=e[a],e[a]=n}function k(e,t,a,n,i){if(0===e.length)return-1;if("string"===typeof a?(n=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,isNaN(a)&&(a=i?0:e.length-1),a<0&&(a=e.length+a),a>=e.length){if(i)return-1;a=e.length-1}else if(a<0){if(!i)return-1;a=0}if("string"===typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:T(e,t,a,n,i);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,a):Uint8Array.prototype.lastIndexOf.call(e,t,a):T(e,[t],a,n,i);throw new TypeError("val must be string, number or Buffer")}function T(e,t,a,n,i){var o,r=1,l=e.length,s=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;r=2,l/=2,s/=2,a/=2}function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(i){var u=-1;for(o=a;o<l;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===s)return u*r}else-1!==u&&(o-=o-u),u=-1}else for(a+s>l&&(a=l-s),o=a;o>=0;o--){for(var d=!0,p=0;p<s;p++)if(c(e,o+p)!==c(t,p)){d=!1;break}if(d)return o}return-1}function D(e,t,a,n){a=Number(a)||0;var i=e.length-a;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var r=0;r<n;++r){var l=parseInt(t.substr(2*r,2),16);if(isNaN(l))return r;e[a+r]=l}return r}function S(e,t,a,n){return ee(Y(t,e.length-a),e,a,n)}function O(e,t,a,n){return ee(X(t),e,a,n)}function N(e,t,a,n){return O(e,t,a,n)}function P(e,t,a,n){return ee(J(t),e,a,n)}function C(e,t,a,n){return ee(Z(t,e.length-a),e,a,n)}function A(e,t,a){return 0===t&&a===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,a))}function F(e,t,a){a=Math.min(e.length,a);var n=[],i=t;while(i<a){var o,r,l,s,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=a)switch(d){case 1:c<128&&(u=c);break;case 2:o=e[i+1],128===(192&o)&&(s=(31&c)<<6|63&o,s>127&&(u=s));break;case 3:o=e[i+1],r=e[i+2],128===(192&o)&&128===(192&r)&&(s=(15&c)<<12|(63&o)<<6|63&r,s>2047&&(s<55296||s>57343)&&(u=s));break;case 4:o=e[i+1],r=e[i+2],l=e[i+3],128===(192&o)&&128===(192&r)&&128===(192&l)&&(s=(15&c)<<18|(63&o)<<12|(63&r)<<6|63&l,s>65535&&s<1114112&&(u=s))}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=d}return E(n)}t.Buffer=c,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=l(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,a){return u(null,e,t,a)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,a){return p(null,e,t,a)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var a=e.length,n=t.length,i=0,o=Math.min(a,n);i<o;++i)if(e[i]!==t[i]){a=e[i],n=t[i];break}return a<n?-1:n<a?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var a;if(void 0===t)for(t=0,a=0;a<e.length;++a)t+=e[a].length;var n=c.allocUnsafe(t),i=0;for(a=0;a<e.length;++a){var r=e[a];if(!c.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,i),i+=r.length}return n},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?F(this,0,e):x.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",a=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,a,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||a>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=a)return 0;if(n>=i)return-1;if(t>=a)return 1;if(t>>>=0,a>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,r=a-t,l=Math.min(o,r),s=this.slice(n,i),u=e.slice(t,a),d=0;d<l;++d)if(s[d]!==u[d]){o=s[d],r=u[d];break}return o<r?-1:r<o?1:0},c.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},c.prototype.indexOf=function(e,t,a){return k(this,e,t,a,!0)},c.prototype.lastIndexOf=function(e,t,a){return k(this,e,t,a,!1)},c.prototype.write=function(e,t,a,n){if(void 0===t)n="utf8",a=this.length,t=0;else if(void 0===a&&"string"===typeof t)n=t,a=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(a)?(a|=0,void 0===n&&(n="utf8")):(n=a,a=void 0)}var i=this.length-t;if((void 0===a||a>i)&&(a=i),e.length>0&&(a<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return D(this,e,t,a);case"utf8":case"utf-8":return S(this,e,t,a);case"ascii":return O(this,e,t,a);case"latin1":case"binary":return N(this,e,t,a);case"base64":return P(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,a);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function E(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var a="",n=0;while(n<t)a+=String.fromCharCode.apply(String,e.slice(n,n+=I));return a}function R(e,t,a){var n="";a=Math.min(e.length,a);for(var i=t;i<a;++i)n+=String.fromCharCode(127&e[i]);return n}function z(e,t,a){var n="";a=Math.min(e.length,a);for(var i=t;i<a;++i)n+=String.fromCharCode(e[i]);return n}function j(e,t,a){var n=e.length;(!t||t<0)&&(t=0),(!a||a<0||a>n)&&(a=n);for(var i="",o=t;o<a;++o)i+=K(e[o]);return i}function L(e,t,a){for(var n=e.slice(t,a),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function q(e,t,a){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>a)throw new RangeError("Trying to access beyond buffer length")}function $(e,t,a,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(a+n>e.length)throw new RangeError("Index out of range")}function M(e,t,a,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-a,2);i<o;++i)e[a+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(e,t,a,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-a,4);i<o;++i)e[a+i]=t>>>8*(n?i:3-i)&255}function W(e,t,a,n,i,o){if(a+n>e.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function U(e,t,a,n,o){return o||W(e,t,a,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,a,n,23,4),a+4}function V(e,t,a,n,o){return o||W(e,t,a,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,a,n,52,8),a+8}c.prototype.slice=function(e,t){var a,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)a=this.subarray(e,t),a.__proto__=c.prototype;else{var i=t-e;a=new c(i,void 0);for(var o=0;o<i;++o)a[o]=this[o+e]}return a},c.prototype.readUIntLE=function(e,t,a){e|=0,t|=0,a||q(e,t,this.length);var n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return n},c.prototype.readUIntBE=function(e,t,a){e|=0,t|=0,a||q(e,t,this.length);var n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||q(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||q(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||q(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,a){e|=0,t|=0,a||q(e,t,this.length);var n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,a){e|=0,t|=0,a||q(e,t,this.length);var n=t,i=1,o=this[e+--n];while(n>0&&(i*=256))o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||q(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||q(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},c.prototype.readInt16BE=function(e,t){t||q(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},c.prototype.readInt32LE=function(e,t){return t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||q(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||q(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||q(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||q(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,a,n){if(e=+e,t|=0,a|=0,!n){var i=Math.pow(2,8*a)-1;$(this,e,t,a,i,0)}var o=1,r=0;this[t]=255&e;while(++r<a&&(o*=256))this[t+r]=e/o&255;return t+a},c.prototype.writeUIntBE=function(e,t,a,n){if(e=+e,t|=0,a|=0,!n){var i=Math.pow(2,8*a)-1;$(this,e,t,a,i,0)}var o=a-1,r=1;this[t+o]=255&e;while(--o>=0&&(r*=256))this[t+o]=e/r&255;return t+a},c.prototype.writeUInt8=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,a,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*a-1);$(this,e,t,a,i-1,-i)}var o=0,r=1,l=0;this[t]=255&e;while(++o<a&&(r*=256))e<0&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=(e/r>>0)-l&255;return t+a},c.prototype.writeIntBE=function(e,t,a,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*a-1);$(this,e,t,a,i-1,-i)}var o=a-1,r=1,l=0;this[t+o]=255&e;while(--o>=0&&(r*=256))e<0&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=(e/r>>0)-l&255;return t+a},c.prototype.writeInt8=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,a){return e=+e,t|=0,a||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,a){return U(this,e,t,!0,a)},c.prototype.writeFloatBE=function(e,t,a){return U(this,e,t,!1,a)},c.prototype.writeDoubleLE=function(e,t,a){return V(this,e,t,!0,a)},c.prototype.writeDoubleBE=function(e,t,a){return V(this,e,t,!1,a)},c.prototype.copy=function(e,t,a,n){if(a||(a=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<a&&(n=a),n===a)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-a&&(n=e.length-t+a);var i,o=n-a;if(this===e&&a<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+a];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+o),t);return o},c.prototype.fill=function(e,t,a,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,a=this.length):"string"===typeof a&&(n=a,a=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<a)throw new RangeError("Out of range index");if(a<=t)return this;var o;if(t>>>=0,a=void 0===a?this.length:a>>>0,e||(e=0),"number"===typeof e)for(o=t;o<a;++o)this[o]=e;else{var r=c.isBuffer(e)?e:Y(new c(e,n).toString()),l=r.length;for(o=0;o<a-t;++o)this[o+t]=r[o%l]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function Q(e){if(e=G(e).replace(H,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function G(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){var a;t=t||1/0;for(var n=e.length,i=null,o=[],r=0;r<n;++r){if(a=e.charCodeAt(r),a>55295&&a<57344){if(!i){if(a>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(r+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=a;continue}if(a<56320){(t-=3)>-1&&o.push(239,191,189),i=a;continue}a=65536+(i-55296<<10|a-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,a<128){if((t-=1)<0)break;o.push(a)}else if(a<2048){if((t-=2)<0)break;o.push(a>>6|192,63&a|128)}else if(a<65536){if((t-=3)<0)break;o.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return o}function X(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}function Z(e,t){for(var a,n,i,o=[],r=0;r<e.length;++r){if((t-=2)<0)break;a=e.charCodeAt(r),n=a>>8,i=a%256,o.push(i),o.push(n)}return o}function J(e){return n.toByteArray(Q(e))}function ee(e,t,a,n){for(var i=0;i<n;++i){if(i+a>=t.length||i>=e.length)break;t[i+a]=e[i]}return i}function te(e){return e!==e}}).call(this,a("c8ba"))},b75a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"发送人",prop:"sendByName"}},[a("el-input",{attrs:{placeholder:"请输入发送人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sendByName,callback:function(t){e.$set(e.queryParams,"sendByName",t)},expression:"queryParams.sendByName"}})],1),a("el-form-item",{attrs:{label:"消息类型",prop:"msgType"}},[a("el-select",{attrs:{placeholder:"请选择消息类型",clearable:"",size:"small"},model:{value:e.queryParams.msgType,callback:function(t){e.$set(e.queryParams,"msgType",t)},expression:"queryParams.msgType"}},e._l(e.msgTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[a("el-select",{attrs:{placeholder:"请选择优先级",clearable:"",size:"small"},model:{value:e.queryParams.priority,callback:function(t){e.$set(e.queryParams,"priority",t)},expression:"queryParams.priority"}},e._l(e.priorityOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:message:export"],expression:"['system:message:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.messageList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"优先级",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"标题",align:"center",prop:"title"}}),a("el-table-column",{attrs:{label:"内容",align:"center",prop:"content"}}),a("el-table-column",{attrs:{label:"发送人",align:"center",prop:"sendByName"}}),a("el-table-column",{attrs:{label:"消息类型",align:"center",prop:"msgType",formatter:e.msgTypeFormat}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"优先级",align:"center",prop:"priority",formatter:e.priorityFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:message:edit"],expression:"['system:message:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:message:remove"],expression:"['system:message:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"发送人id",prop:"sendBy"}},[a("el-input",{attrs:{placeholder:"请输入发送人id"},model:{value:e.form.sendBy,callback:function(t){e.$set(e.form,"sendBy",t)},expression:"form.sendBy"}})],1),a("el-form-item",{attrs:{label:"发送人",prop:"sendByName"}},[a("el-input",{attrs:{placeholder:"请输入发送人"},model:{value:e.form.sendByName,callback:function(t){e.$set(e.form,"sendByName",t)},expression:"form.sendByName"}})],1),a("el-form-item",{attrs:{label:"消息类型"}},[a("el-select",{attrs:{placeholder:"请选择消息类型"},model:{value:e.form.msgType,callback:function(t){e.$set(e.form,"msgType",t)},expression:"form.msgType"}},e._l(e.msgTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:parseInt(e.dictValue)}})})),1)],1),a("el-form-item",{attrs:{label:"接收人id",prop:"recipients"}},[a("el-input",{attrs:{placeholder:"请输入接收人id"},model:{value:e.form.recipients,callback:function(t){e.$set(e.form,"recipients",t)},expression:"form.recipients"}})],1),a("el-form-item",{attrs:{label:"接收人姓名",prop:"recipientsName"}},[a("el-input",{attrs:{placeholder:"请输入接收人姓名"},model:{value:e.form.recipientsName,callback:function(t){e.$set(e.form,"recipientsName",t)},expression:"form.recipientsName"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:parseInt(e.dictValue)}})})),1)],1),a("el-form-item",{attrs:{label:"优先级"}},[a("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}},e._l(e.priorityOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:parseInt(e.dictValue)}})})),1)],1),a("el-form-item",{attrs:{label:"是否已弹窗"}},[a("el-select",{attrs:{placeholder:"请选择是否已弹窗"},model:{value:e.form.pushed,callback:function(t){e.$set(e.form,"pushed",t)},expression:"form.pushed"}},e._l(e.pushedOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:parseInt(e.dictValue)}})})),1)],1),a("el-form-item",{attrs:{label:"是否已弹窗",prop:"ext1"}},[a("el-input",{attrs:{placeholder:"请输入是否已弹窗"},model:{value:e.form.ext1,callback:function(t){e.$set(e.form,"ext1",t)},expression:"form.ext1"}})],1),a("el-form-item",{attrs:{label:"是否已弹窗",prop:"ext2"}},[a("el-input",{attrs:{placeholder:"请输入是否已弹窗"},model:{value:e.form.ext2,callback:function(t){e.$set(e.form,"ext2",t)},expression:"form.ext2"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/system/message/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/message/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/message",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/message",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/system/message/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/system/message/export",method:"get",params:e,responseType:"blob"})}var p=a("c38a"),h={name:"Message",components:{},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,messageList:[],title:"",open:!1,msgTypeOptions:[],statusOptions:[],priorityOptions:[],pushedOptions:[],queryParams:{pageNum:1,pageSize:10,sendByName:null,msgType:null,status:null,priority:null,ext1:null,ext2:null},form:{},rules:{},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_message_type").then((function(t){e.msgTypeOptions=t.data})),this.getDicts("sys_message_state").then((function(t){e.statusOptions=t.data})),this.getDicts("sys_message_priority").then((function(t){e.priorityOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.pushedOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.messageList=t.rows,e.total=t.total,e.loading=!1}))},msgTypeFormat:function(e,t){return this.selectDictLabel(this.msgTypeOptions,e.msgType)},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},priorityFormat:function(e,t){return this.selectDictLabel(this.priorityOptions,e.priority)},pushedFormat:function(e,t){return this.selectDictLabel(this.pushedOptions,e.pushed)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,title:null,content:null,sendBy:null,sendByName:null,msgType:null,recipients:null,recipientsName:null,status:null,createTime:null,priority:null,pushed:null,ext1:null,ext2:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加消息管理"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改消息管理"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除消息管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有消息管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(p["g"])(10,"导出中",e),d(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"消息管理.xls",e)})).catch((function(){}))}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},b8e8:function(e,t,a){"use strict";a("eead")},b928:function(e,t,a){},b9a3:function(e,t,a){"use strict";a("c1c4")},b9aa:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1000px",id:"chooseDialog","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,xs:24}},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.codeName,callback:function(t){e.codeName=t},expression:"codeName"}})],1),a("div",{staticClass:"head-container"},[a("el-tree",{ref:"tree",attrs:{data:e.codeOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":!1},on:{"node-click":e.handleNodeClick}})],1)]),a("el-col",{attrs:{span:20,xs:24}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"税收分类编码",prop:"mergeCode"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.mergeCode,callback:function(t){e.$set(e.queryParams,"mergeCode",t)},expression:"queryParams.mergeCode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"codeTable",attrs:{data:e.taxcodeList,"highlight-current-row":"","use-virtual":"","row-height":40},on:{"row-click":e.currClickRow}},[a("u-table-column",{attrs:{label:"选择",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.file?a("el-radio",{attrs:{label:t.row},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("i")]):e._e(),"0"==t.row.file?a("el-radio",{attrs:{disabled:"disabled",label:t.row},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("i")]):e._e()]}}])}),e._l(e.columnsArr,(function(t){return t.show?a("u-table-column",{key:t.prop,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("div",{staticStyle:{"margin-top":"20px"},attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChoose}},[e._v("确定选择")])],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1)],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("0500")),l=a("ca17"),s=a.n(l),c=(a("542c"),{name:"ChooseCode",components:{Treeselect:s.a},data:function(){return{pageSizes:[],open:!1,radio:null,currentRow:null,title:"选择税收分类编码",codeOptions:[],total:0,taxcodeList:[],queryParams:{pageNum:1,pageSize:500,code:null,mergeCode:null,name:null,path:null},defaultProps:{children:"children",label:"label",autoSelectAncestors:!1},codeName:null,columnsArr:[{label:"合并编码",prop:"mergeCode",align:"center",show:!0,width:"100"},{label:"名称",prop:"name",align:"center",show:!0,width:"100"},{label:"说明",prop:"description",align:"center",show:!0,width:"100"},{label:"简称",prop:"abbreviation",align:"center",show:!0,width:"100"},{label:"税率",prop:"rate",align:"center",show:!0,width:"100"},{label:"关键字",prop:"keyWord",align:"center",show:!0,width:"100"}]}},watch:{codeName:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this;this.getList(),this.getTreeselect(),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},methods:{getList:function(){var e=this;this.loading=!0,Object(r["c"])(this.queryParams).then((function(t){e.taxcodeList=t.rows,e.total=t.total,e.loading=!1}))},openChoose:function(){this.open=!0},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){this.queryParams.path=e.id,this.getList()},getTreeselect:function(){var e=this;Object(r["b"])().then((function(t){e.codeOptions=t.data}))},getCurrentRow:function(e){this.radio=e},submitChoose:function(){null!=this.radio?(this.open=!1,this.$emit("showChooseCode",this.radio)):this.msgError("请选择一条数据")},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={code:null,mergeCode:null,name:null,description:null,abbreviation:null,rate:null,specialManagement:null,policyBasis:null,specialContentCode:null,exciseManagement:null,excisePolicyBasis:null,exciseContentCode:null,keyWord:null,summarizedItem:null,statisticalBureauCode:null,customsItem:null,excelVersion:null,version:null,status:"0",startDate:null,interimDate:null,parentCode:null,updateTime:null,file:null,hiddenStatus:"0",path:null},this.resetForm("form")},handleQuery:function(){this.queryParams.path=null,this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},currClickRow:function(e,t,a){}}}),u=c,d=(a("7ed0"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"12aaf207",null);t["default"]=p.exports},ba69:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{readonly:""},model:{value:t.row.goodsCode,callback:function(a){e.$set(t.row,"goodsCode",a)},expression:"scope.row.goodsCode"}})]}}])}),a("el-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("el-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("el-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("el-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("el-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2015419679)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2295175998)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("el-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("el-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:230,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier","string"===typeof t?t.trim():t)},expression:"form.cashier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker","string"===typeof t?t.trim():t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("c394"),a("2f3d")),r={name:"historyDetailShowModal",props:{},data:function(){return{form:{billNo:"",invType:"2",detailFlag:"0",invCode:"",invNo:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[{value:"购方名称1",billBuyName:"购方名称1",billBuyTaxNo:"购方税号1",billBuyAddrTel:"购方地址1",billBuyBankAccount:"购方银行账号1"},{value:"购方名称2",billBuyName:"购方名称2",billBuyTaxNo:"购方税号2",billBuyAddrTel:"购方地址2",billBuyBankAccount:"购方银行账号2"},{value:"购方名称3",billBuyName:"购方名称3",billBuyTaxNo:"购方税号3",billBuyAddrTel:"购方地址3",billBuyBankAccount:"购方银行账号3"},{value:"购方名称4",billBuyName:"购方名称4",billBuyTaxNo:"购方税号4",billBuyAddrTel:"购方地址4",billBuyBankAccount:"购方银行账号4"}]}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;Object(o["g"])("output_inv_type").then((function(t){e.invTypeOptions=t.data})),Object(o["g"])("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["e"])(e).then((function(e){var a=e.data;t.form.billNo=a.billNo,t.form.invCode=a.invCode,t.form.invNo=a.invNo,t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.invType=a.invType,t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,a.detailFlag),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer;var n=a.details;if(t.billDetailsData.length=0,null!=n&&void 0!=n)for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)}}},l=r,s=(a("4d2c"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},bb49:function(e,t,a){"use strict";a.r(t);var n=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"];t["default"]=n},bbc3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"new-version-bill-manger-modal",attrs:{title:e.baseDialog.title,visible:e.baseDialog.open,"append-to-body":"",id:"newVersionBillManagerModal","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.baseDialog,"open",t)},close:e.billDialogClose}},[a("div",{staticClass:"fptk_wrapper"},[a("div",{staticClass:"fptk_operation"},[a("div",{staticClass:"fptk_operation_left"},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small"},on:{change:e.billTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1),["81","82","85","86"].includes(e.form.invType)?[a("el-select",{attrs:{size:"small",placeholder:"请选择特定业务类型"},model:{value:e.form.tdyslxdm,callback:function(t){e.$set(e.form,"tdyslxdm",t)},expression:"form.tdyslxdm"}},[a("el-option",{attrs:{value:"",label:"无"}}),a("el-option",{attrs:{value:"01",label:"成品油"}}),a("el-option",{attrs:{value:"03",label:"建筑服务发票"}}),a("el-option",{attrs:{value:"06",label:"不动产经营租赁服务"}}),a("el-option",{attrs:{value:"05",label:"不动产销售"}}),a("el-option",{attrs:{value:"04",label:"货物运输服务"}})],1)]:e._e()],2),a("div",{staticClass:"fptk_operation_right"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.saveBill("2")}}},[e._v("发票开具")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleCopy}},[e._v("复制填开")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.saveBill("1")}}},[e._v("保存单据")]),a("el-button",{attrs:{size:"small",disabled:e.redInvoiceFlag},on:{click:e.discountSetUp}},[e._v("折扣")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleDetailImport}},[e._v("明细导入")]),a("el-button",{attrs:{size:"small"},on:{click:e.setDifferenceDeduct}},[e._v("差额")]),a("el-button",{attrs:{size:"small"},on:{click:e.mergeDiscount}},[e._v("合并折扣")]),a("el-button",{attrs:{size:"small"},on:{click:e.mergeBillDetail}},[e._v("合并明细")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleClearReset}},[e._v("清空重填")])],1)]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("div",{staticClass:"fptk_wrapper_body"},[a("div",{staticClass:"fptk_wrapper_circle fptk_wrapper_left"},e._l(e.circleNum,(function(e){return a("div",{staticClass:"fptk_circle"})})),0),a("div",{staticClass:"fptk_wrapper_middle"},["1"==e.form.cancelFlag?a("div",{staticClass:"fptk_sign fptk_sign_zf"},[e._v("作废票")]):"1"==e.form.redFlag?a("div",{staticClass:"fptk_sign fptk_sign_hc"},[e._v("红字票")]):e._e(),a("div",{staticClass:"fptk_wrapper_content_top"},[a("div",{staticClass:"fptk_wrapper_content_top_left"}),a("div",{staticClass:"top_invoice_title"},[e._v(" "+e._s(e.fplxdesc)+e._s("("+(e.redInvoiceFlag?"红票":"蓝票")+")")+" ")]),a("div",{staticClass:"fptk_wrapper_content_top_right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.hsbzChange},model:{value:e.hsbzLabel,callback:function(t){e.hsbzLabel=t},expression:"hsbzLabel"}},[a("el-radio-button",{attrs:{label:"含税"}}),a("el-radio-button",{attrs:{label:"不含税"}})],1)],1)]),a("div",{staticClass:"fptk_hz_info input1"},[a("el-form-item",{attrs:{label:"单据编号:","label-width":"85px"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo","string"===typeof t?t.trim():t)},expression:"form.billNo"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag&&!["81","82"].includes(e.form.invType),expression:"redInvoiceFlag && !['81', '82'].includes(form.invType)"}],attrs:{label:"蓝字发票代码",prop:"sourceInvCode","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票代码",maxlength:12,clearable:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag,expression:"redInvoiceFlag"}],attrs:{label:"蓝字发票号码",prop:"sourceInvNo","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入蓝字发票号码",maxlength:["81","82"].includes(e.form.invType)?20:8,clearable:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1),e.redInvoiceFlag&&["0","52","81","82"].includes(e.form.invType)?a("el-form-item",{attrs:{label:"红字申请单",prop:"negNativeNo","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入红字申请单",maxlength:20,clearable:""},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo","string"===typeof t?t.trim():t)},expression:"form.negNativeNo"}})],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.redInvoiceFlag&&["81","82","85","86"].includes(e.form.invType),expression:"redInvoiceFlag && ['81', '82', '85', '86'].includes(form.invType)"}],attrs:{label:"确认ID",prop:"redBillId","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入确认ID",clearable:""},model:{value:e.form.redBillId,callback:function(t){e.$set(e.form,"redBillId","string"===typeof t?t.trim():t)},expression:"form.redBillId"}})],1)],1),a("div",{staticClass:"fptk_wrapper_content"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"fptk_wrapper_content_1 buyer input1"},[a("div",{staticClass:"first"},[e._v(" 购买方 "),a("div",{staticClass:"el-col-right-checkbox"},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.form.sfzsgfyhzh,callback:function(t){e.$set(e.form,"sfzsgfyhzh",t)},expression:"form.sfzsgfyhzh"}},[e._v("是否展示")])],1)]),a("div",{staticClass:"second"},[a("div",{staticClass:"second_item cell_item buy_cell_item required-item"},[a("div",[e._v("名称")])]),a("div",{staticClass:"second_item cell_item buy_cell_item",class:e.rules.buyTaxNo[1].required?"required-item":""},[a("div",[e._v("纳税人识别号")])]),a("div",{staticClass:"second_item cell_item buy_cell_item",class:e.rules.buyAddrTel[0].required?"required-item":""},[a("div",[e._v("地址、电话")])]),a("div",{staticClass:"second_item cell_item buy_cell_item",class:e.rules.buyBankAccount[0].required?"required-item":""},[a("div",[e._v("开户行及账号")])])]),a("div",{staticClass:"third"},[a("div",{staticClass:"cell_item"},[a("el-form-item",{attrs:{prop:"buyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方名称",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyer},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("div",{staticClass:"cell_item"},[a("el-form-item",{attrs:{prop:"buyTaxNo"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入购方识别号",maxlength:100,clearable:"","fetch-suggestions":e.querySearchBuyerByTaxno},on:{select:e.handleSelectBuyer},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyAddr"}},[a("el-input",{attrs:{placeholder:"请输入购方地址",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddr,callback:function(t){e.$set(e.form,"buyAddr",t)},expression:"form.buyAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyTel"}},[a("el-input",{attrs:{placeholder:"请输入购方电话",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTel,callback:function(t){e.$set(e.form,"buyTel",t)},expression:"form.buyTel"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)]],2),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyBank"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBank,callback:function(t){e.$set(e.form,"buyBank",t)},expression:"form.buyBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"buyAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方账号",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyAccount,callback:function(t){e.$set(e.form,"buyAccount",t)},expression:"form.buyAccount"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入购方开户行及账号",maxlength:100,clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)]],2)])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"fptk_wrapper_content_5 seller input1"},[a("div",{staticClass:"first"},[e._v(" 销售方 "),a("div",{staticClass:"el-col-right-checkbox"},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.form.sfzsxfyhzh,callback:function(t){e.$set(e.form,"sfzsxfyhzh",t)},expression:"form.sfzsxfyhzh"}},[e._v("是否展示")])],1)]),a("div",{staticClass:"second"},[a("div",{staticClass:"second_item cell_item"},[e._v("名称")]),a("div",{staticClass:"second_item cell_item"},[e._v("纳税人识别号")]),a("div",{staticClass:"second_item cell_item"},[e._v("地址、电话")]),a("div",{staticClass:"second_item cell_item"},[e._v("开户行及账号")])]),a("div",{staticClass:"third"},[a("div",{staticClass:"cell_item"},[a("el-form-item",{attrs:{prop:"sellName"}},[a("el-input",{attrs:{maxlength:100,readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("div",{staticClass:"cell_item"},[a("el-form-item",{attrs:{prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:100,readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellAddr"}},[a("el-input",{attrs:{placeholder:"请输入销方地址",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr",t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellTel"}},[a("el-input",{attrs:{placeholder:"请输入销方电话",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel",t)},expression:"form.sellTel"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)]],2),a("div",{staticClass:"cell_item"},[["81","82","85","86"].includes(e.form.invType)?[a("el-row",[a("el-col",{staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.06)"},attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellBank"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sellAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方账号",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1)]:[a("el-form-item",{attrs:{prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)]],2)])])])],1),a("div",{staticClass:"fptk_wrapper_content_2"},[a("u-table",{ref:"billDetailTable",attrs:{data:e.billDetailsData,"min-height":"120","use-virtual":"","row-height":38}},[a("u-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"货物或应税劳务、服务名称",width:"250"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("项目名称 ")]}},{key:"default",fn:function(t){return[a("el-autocomplete",{staticStyle:{width:"100%!important"},attrs:{"popper-class":"public-autocomplete",debounce:1e3,"fetch-suggestions":e.querySearchGoodsName,size:"mini"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)},change:function(a){return e.goodsNameChange(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{size:"mini"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"单价(不含税)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,3016971144)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"单价(含税)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",readonly:"1"==t.row.discountFlag},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"金额(不含税)",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("金额(不含税) ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,3219579570)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"金额(含税)",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("金额(含税) ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{label:"税率",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("税率 ")]}},{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",prop:"taxAmount",width:"120"}}),a("u-table-column",{attrs:{label:"是否优惠",prop:"preferentialFlag",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:"",placeholder:""},model:{value:t.row.preferentialFlag,callback:function(a){e.$set(t.row,"preferentialFlag",a)},expression:"scope.row.preferentialFlag"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)]}}])}),a("u-table-column",{attrs:{label:"优惠内容",prop:"preferentialType",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}})]}}])}),a("u-table-column",{attrs:{label:"零税率标识",prop:"taxZeroRate",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",disabled:"",placeholder:""},model:{value:t.row.taxZeroRate,callback:function(a){e.$set(t.row,"taxZeroRate",a)},expression:"scope.row.taxZeroRate"}},[a("el-option",{attrs:{value:"",label:"非零税率"}}),a("el-option",{attrs:{value:"0",label:"出口退税"}}),a("el-option",{attrs:{value:"1",label:"免税"}}),a("el-option",{attrs:{value:"2",label:"不征收"}}),a("el-option",{attrs:{value:"3",label:"普通零税率"}})],1)]}}])}),a("u-table-column",{attrs:{label:"CRM单号",prop:"ext1",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:t.row.sourceExt1||"SAP"==e.form.billSource},model:{value:t.row.ext1,callback:function(a){e.$set(t.row,"ext1",a)},expression:"scope.row.ext1"}})]}}])}),a("u-table-column",{attrs:{label:"操作",width:"100",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.index?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addBillDetailRow("bill")}}},[e._v("增行")]):e._e(),0!=t.row.index?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.delBillDetailRow(t.row)}}},[e._v("删行")]):e._e()]}}])})],1)],1),a("div",{staticClass:"fptk_wrapper_content_3 input1"},[a("div",{staticClass:"first"},[e._v("合计")]),a("div",{staticClass:"second"},[a("div",[e._v("金额(不含税)")]),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax",t)},expression:"form.totalAmountWithoutTax"}})],1),a("div",{staticClass:"third"},[a("div",[e._v("税额")]),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount",t)},expression:"form.totalTaxAmount"}})],1)]),a("div",{staticClass:"fptk_wrapper_content_4 input1"},[a("div",{staticClass:"first"},[e._v("价税合计（大写）")]),a("div",{staticClass:"second"},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.totalAmountUpperCase,callback:function(t){e.totalAmountUpperCase=t},expression:"totalAmountUpperCase"}})],1),a("div",{staticClass:"third"},[a("div",[e._v("(小写)")]),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount",t)},expression:"form.totalAmount"}})],1)]),a("div",{staticClass:"fptk_wrapper_content_5 seller input1"},[a("div",{staticClass:"fourth"},[e._v("备注")]),a("div",{staticClass:"fifth"},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入备注",maxlength:230,clearable:"","show-word-limit":""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)]),"03"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_jzfw input1"},[a("div",{staticClass:"first"},[e._v("特定信息-建筑服务")]),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"土地增值税项目编号",prop:"tdywxx.jzfw.tdzzsxmbh","label-width":"220px"}},[a("el-input",{attrs:{placeholder:"请输入土地增值税项目编号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.jzfw,"tdzzsxmbh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.tdzzsxmbh"}})],1),a("el-form-item",{attrs:{label:"建筑项目名称",prop:"tdywxx.jzfw.jzxmmc","label-width":"220px"}},[a("el-input",{attrs:{placeholder:"请输入建筑项目名称",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.jzxmmc,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzxmmc","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.jzxmmc"}})],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"建筑服务发生地",prop:"tdywxx.jzfw.jzfwfsd","label-width":"180px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择建筑服务发生地"},model:{value:e.form.tdywxx.jzfw.jzfwfsd,callback:function(t){e.$set(e.form.tdywxx.jzfw,"jzfwfsd",t)},expression:"form.tdywxx.jzfw.jzfwfsd"}})],1),a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.jzfw.kdsbz","label-width":"180px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输详细地址",clearable:""},model:{value:e.form.tdywxx.jzfw.kdsbz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("div",{staticClass:"fourth"},[a("el-form-item",{attrs:{label:"详细地址","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.jzfw.fsdxxdz,callback:function(t){e.$set(e.form.tdywxx.jzfw,"fsdxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.jzfw.fsdxxdz"}})],1)],1)]):e._e(),"06"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_bdcjyzlfw input1"},[a("div",{staticClass:"first"},[e._v("特定信息-不动产经营租赁服务")]),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"不动产地址",prop:"tdywxx.bdczl.bdcdz","label-width":"220px"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascaderOptions,placeholder:"请选择不动产地址"},model:{value:e.form.tdywxx.bdczl.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcdz",t)},expression:"form.tdywxx.bdczl.bdcdz"}})],1),a("el-form-item",{attrs:{label:"跨地（市）标志",prop:"tdywxx.bdczl.kdsbz","label-width":"220px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跨地（市）标志",clearable:""},model:{value:e.form.tdywxx.bdczl.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"kdsbz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"详细地址","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入详细地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcxxdz","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcxxdz"}})],1),a("el-form-item",{attrs:{label:"面积单位",prop:"tdywxx.bdczl.dwmj","label-width":"120px"}},[a("el-select",{attrs:{placeholder:"请选择面积单位",clearable:""},model:{value:e.form.tdywxx.bdczl.dwmj,callback:function(t){e.$set(e.form.tdywxx.bdczl,"dwmj",t)},expression:"form.tdywxx.bdczl.dwmj"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1),a("div",{staticClass:"fourth"},[a("el-form-item",{attrs:{label:"租赁期起止","label-width":"195px"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyyMMdd",format:"yyyyMMdd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.zlqDateRange,callback:function(t){e.zlqDateRange=t},expression:"zlqDateRange"}})],1),a("el-form-item",{attrs:{label:"产权证书/不动产权证号",prop:"tdywxx.bdczl.bdcqzh","label-width":"195px"}},[a("el-input",{attrs:{placeholder:"请输入产权证书/不动产权证号",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.tdywxx.bdczl.bdcqzh,callback:function(t){e.$set(e.form.tdywxx.bdczl,"bdcqzh","string"===typeof t?t.trim():t)},expression:"form.tdywxx.bdczl.bdcqzh"}})],1)],1)]):e._e(),"05"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_bdcxs input1"},[a("div",{staticClass:"first"},[e._v("特定信息-不动产销售")]),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"不动产单元代码/网签合同备案编号","label-width":"260px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.tdywxx.bdcxs.wqhtbabh,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"wqhtbabh",t)},expression:"form.tdywxx.bdcxs.wqhtbabh"}})],1),a("el-form-item",{attrs:{label:"跨地（市）标志","label-width":"260px",prop:"tdywxx.bdcxs.kdsbz"}},[a("el-select",{attrs:{size:"mini"},model:{value:e.form.tdywxx.bdcxs.kdsbz,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"kdsbz",t)},expression:"form.tdywxx.bdcxs.kdsbz"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1),a("el-form-item",{attrs:{label:"实际成交含税金额","label-width":"260px",prop:"tdywxx.bdcxs.sjcjhsje"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.tdywxx.bdcxs.sjcjhsje,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"sjcjhsje",t)},expression:"form.tdywxx.bdcxs.sjcjhsje"}})],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"不动产地址","label-width":"220px",prop:"tdywxx.bdcxs.bdcdz"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入不动产地址"},model:{value:e.form.tdywxx.bdcxs.bdcdz,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"bdcdz",t)},expression:"form.tdywxx.bdcxs.bdcdz"}})],1),a("el-form-item",{attrs:{label:"土地增值税项目编号","label-width":"220px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入土地增值税项目编号"},model:{value:e.form.tdywxx.bdcxs.tdzzsxmbh,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"tdzzsxmbh",t)},expression:"form.tdywxx.bdcxs.tdzzsxmbh"}})],1),a("el-form-item",{attrs:{label:"产权证书/不动产权证号","label-width":"220px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.tdywxx.bdcxs.fwcqzshm,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"fwcqzshm",t)},expression:"form.tdywxx.bdcxs.fwcqzshm"}})],1)],1),a("div",{staticClass:"fourth"},[a("el-form-item",{attrs:{label:"详细地址","label-width":"160px",prop:"tdywxx.bdcxs.bdcxxdz"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.tdywxx.bdcxs.bdcxxdz,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"bdcxxdz",t)},expression:"form.tdywxx.bdcxs.bdcxxdz"}})],1),a("el-form-item",{attrs:{label:"核定计税价格","label-width":"160px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.tdywxx.bdcxs.hdjsjg,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"hdjsjg",t)},expression:"form.tdywxx.bdcxs.hdjsjg"}})],1),a("el-form-item",{attrs:{label:"面积单位","label-width":"160px",prop:"tdywxx.bdcxs.mjdw"}},[a("el-select",{attrs:{placeholder:"请选择面积单位",clearable:""},model:{value:e.form.tdywxx.bdcxs.mjdw,callback:function(t){e.$set(e.form.tdywxx.bdcxs,"mjdw",t)},expression:"form.tdywxx.bdcxs.mjdw"}},[a("el-option",{attrs:{value:"平方米",label:"平方米"}}),a("el-option",{attrs:{value:"亩",label:"亩"}}),a("el-option",{attrs:{value:"m²",label:"m²"}}),a("el-option",{attrs:{value:"平方千米",label:"平方千米"}}),a("el-option",{attrs:{value:"公顷",label:"公顷"}}),a("el-option",{attrs:{value:"hm²",label:"hm²"}}),a("el-option",{attrs:{value:"km²",label:"km²"}})],1)],1)],1)]):e._e(),"04"==e.form.tdyslxdm?a("div",{staticClass:"fptk_wrapper_content_hyysfw"},[a("div",{staticClass:"first"},[e._v("特定信息-货物运输服务")]),a("div",{staticClass:"second"},[a("u-table",{ref:"hyysfwTable",attrs:{data:e.form.tdywxx.hwys,"min-height":"120","use-virtual":"","row-height":38}},[a("u-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("u-table-column",{attrs:{label:"起运地"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("起运地 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.qyd,callback:function(a){e.$set(t.row,"qyd",a)},expression:"scope.row.qyd"}})]}}],null,!1,2151150795)}),a("u-table-column",{attrs:{label:"到达地"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("到达地 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.ddd,callback:function(a){e.$set(t.row,"ddd",a)},expression:"scope.row.ddd"}})]}}],null,!1,3775391498)}),a("u-table-column",{attrs:{label:"运输工具种类"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("运输工具种类 ")]}},{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini"},model:{value:t.row.ysgjzl,callback:function(a){e.$set(t.row,"ysgjzl",a)},expression:"scope.row.ysgjzl"}},[a("el-option",{attrs:{value:"铁路运输",label:"铁路运输"}}),a("el-option",{attrs:{value:"公路运输",label:"公路运输"}}),a("el-option",{attrs:{value:"水路运输",label:"水路运输"}}),a("el-option",{attrs:{value:"航空运输",label:"航空运输"}}),a("el-option",{attrs:{value:"管道运输",label:"管道运输"}}),a("el-option",{attrs:{value:"其他运输工具",label:"其他运输工具"}})],1)]}}],null,!1,3990257315)}),a("u-table-column",{attrs:{label:"运输工具牌号"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("运输工具牌号 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.ysgjhp,callback:function(a){e.$set(t.row,"ysgjhp",a)},expression:"scope.row.ysgjhp"}})]}}],null,!1,2337873797)}),a("u-table-column",{attrs:{label:"运输货物名称"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("运输货物名称 ")]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.yshwmc,callback:function(a){e.$set(t.row,"yshwmc",a)},expression:"scope.row.yshwmc"}})]}}],null,!1,866034235)}),a("u-table-column",{attrs:{label:"操作",width:"100",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.index?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addBillDetailRow("hwys")}}},[e._v("增行")]):e._e(),0!=t.row.index?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.delBillDetailRow(t.row,"hwys")}}},[e._v("删行")]):e._e()]}}],null,!1,2517098072)})],1)],1)]):e._e(),a("div",{staticClass:"fptk_wrapper_content_6 input1"},[["81","82"].includes(e.form.invType)?e._e():a("div",{staticClass:"first"},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入收款人",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier",t)},expression:"form.cashier"}})],1)],1),["81","82"].includes(e.form.invType)?e._e():a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"复核人",prop:"checker","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入复核人",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1)],1),a("div",{staticClass:"third"},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer",t)},expression:"form.invoicer"}})],1)],1)]),["51","52","81","82"].includes(e.form.invType)?a("div",{staticClass:"fptk_wrapper_content_dp input1"},[a("div",{staticClass:"first"},[a("el-form-item",{attrs:{label:"邮箱地址",prop:"buyEmail","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail",t)},expression:"form.buyEmail"}})],1)],1),a("div",{staticClass:"second"},[a("el-form-item",{attrs:{label:"手机号码",prop:"buyTelNo","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",clearable:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo",t)},expression:"form.buyTelNo"}})],1)],1)]):e._e()],1)]),a("div",{staticClass:"fptk_wrapper_circle fptk_wrapper_right"},e._l(e.circleNum,(function(e){return a("div",{staticClass:"fptk_circle"})})),0)])]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"折扣设置",visible:e.discountOpen,width:"400px","append-to-body":"",id:"discountModal"},on:{"update:visible":function(t){e.discountOpen=t},close:e.discountDialogClose}},[a("div",[a("el-form",{ref:"discountForm",attrs:{model:e.discountForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"影响行数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountLine,callback:function(t){e.$set(e.discountForm,"discountLine",t)},expression:"discountForm.discountLine"}})],1),a("el-form-item",{attrs:{label:"不含税金额"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.discountForm.discountTotalMoney,callback:function(t){e.$set(e.discountForm,"discountTotalMoney",t)},expression:"discountForm.discountTotalMoney"}})],1),a("el-form-item",{attrs:{label:"折扣金额"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountMoneyChange},model:{value:e.discountForm.discountMoney,callback:function(t){e.$set(e.discountForm,"discountMoney",t)},expression:"discountForm.discountMoney"}})],1),a("el-form-item",{attrs:{label:"折扣率"}},[a("el-input",{attrs:{maxlength:200},on:{change:e.discountRateChange},model:{value:e.discountForm.discountRate,callback:function(t){e.$set(e.discountForm,"discountRate",t)},expression:"discountForm.discountRate"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDiscount}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.discountOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"差额设置",visible:e.deductOpen,width:"400px","append-to-body":"",id:"deductModal"},on:{"update:visible":function(t){e.deductOpen=t},close:e.deductDialogClose}},[a("div",[a("el-form",{ref:"deductForm",attrs:{model:e.deductForm,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"扣除额"}},[a("el-input",{nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.deductForm.differenceDeductAmount,callback:function(t){e.$set(e.deductForm,"differenceDeductAmount",t)},expression:"deductForm.differenceDeductAmount"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDeduct}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.deductOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"发票引入",visible:e.introduceOpen,width:"400px","append-to-body":"",id:"introduceModal"},on:{"update:visible":function(t){e.introduceOpen=t},close:e.introduceDialogClose}},[a("div",[a("el-form",{ref:"introduceForm",attrs:{model:e.introduceForm,rules:e.introduceRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.introduceForm.invCode,callback:function(t){e.$set(e.introduceForm,"invCode",t)},expression:"introduceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:["81","82"].includes(e.form.invType)?20:8},model:{value:e.introduceForm.invNo,callback:function(t){e.$set(e.introduceForm,"invNo",t)},expression:"introduceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitIntroduce}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.introduceOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:e.detailUpload.title,visible:e.detailUpload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.detailUpload,"open",t)}}},[a("el-upload",{ref:"detailUpload",attrs:{limit:1,accept:".xlsx, .xls",headers:e.detailUpload.headers,action:e.detailUpload.url,disabled:e.detailUpload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.detailUpload.open=!1}}},[e._v("取 消")])],1)],1)],1)])},i=[],o=a("5530"),r=a("b85c"),l=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("caad"),a("ac1f"),a("1276"),a("5319"),a("25f0"),a("b0c0"),a("4de4"),a("a434"),a("a15b"),a("d81d"),a("b680"),a("13d5"),a("c85c")),s=a("7e6f"),c=a("c394"),u=a("2ba5"),d=a("ad11"),p=a("5f87"),h=a("b9aa"),m=a("ed08"),f=a("c38a"),b=a("ef6c"),g={name:"Fptk",components:{ChooseCode:h["default"]},data:function(){var e=this,t=function(t,a,n){if(!e.zlqDateRange||0==e.zlqDateRange.length)return n(new Error("租赁期不能为空"));n()};return{circleNum:0,baseDialog:{title:"新增单据",open:!1},cascaderOptions:[],selfAdaptionWidth:null,invTypeOptions:[],taxRateOptions:[],specialTicketOptions:[],isAdd:!0,taxCodeSignRow:0,form:{billNo:"",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",specialTicket:"0",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",buyAddr:"",buyTel:"",buyBank:"",buyAccount:"",sellAddr:"",sellTel:"",sellBank:"",sellAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",tdyslxdm:"",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},hwys:[{index:0,qyd:"",ddd:"",ysgjzl:"",ysgjhp:"",yshwmc:""}],bdcxs:{bdcdz:"",bdcxxdz:"",fwcqzshm:"",kdsbz:"",mjdw:"",wqhtbabh:"",tdzzsxmbh:"",hdjsjg:"",sjcjhsje:""}},shopNo:null,sfzsgfyhzh:"0",sfzsxfyhzh:"0"},rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],detailFlag:[{required:!0,message:"清单标志不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"销方名称不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}],"tdywxx.bdczl.bdcdz":[{required:!0,message:"不动产地址不能为空",trigger:"blur"}],"tdywxx.bdczl.kdsbz":[{required:!0,message:"跨地（市）标志不能为空",trigger:"blur"}],"tdywxx.jzfw.kdsbz":[{required:!0,message:"跨地（市）标志不能为空",trigger:"blur"}],"tdywxx.bdczl.bdcqzh":[{required:!0,message:"产权证书/不动产权证号不能为空",trigger:"blur"}],"tdywxx.bdczl.dwmj":[{required:!0,message:"面积单位不能为空",trigger:"blur"}],"tdywxx.jzfw.jzfwfsd":[{required:!0,message:"建筑服务发生地不能为空",trigger:"blur"}],"tdywxx.jzfw.jzxmmc":[{required:!0,message:"建筑项目名称不能为空",trigger:"blur"}],"tdywxx.bdcxs.bdcdz":[{required:!0,message:"不动产地址不能为空",trigger:"blur"}],"tdywxx.bdcxs.bdcxxdz":[{required:!0,message:"不动产详细地址不能为空",trigger:"blur"}],"tdywxx.bdcxs.sjcjhsje":[{required:!0,message:"实际成交含税金额不能为空",trigger:"blur"}],"tdywxx.bdcxs.kdsbz":[{required:!0,message:"跨地市标志不能为空",trigger:"blur"}],"tdywxx.bdcxs.mjdw":[{required:!0,message:"面积单位不能为空",trigger:"blur"}],zlqDate:[{validator:t,trigger:"blur"}]},hsbz:"1",hsbzLabel:"含税",sourceHsbz:null,kpdy:null,fplxdesc:"增值税普通发票",redInvoiceFlag:!1,billDetailsData:[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"",preferentialType:"",taxZeroRate:null}],discountOpen:!1,discountForm:{discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},introduceOpen:!1,introduceForm:{invCode:"",invNo:"",invType:""},introduceRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"}],invNo:[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},detailUpload:{title:"明细导入",open:!1,isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(p["a"])()},url:"/prod-api/output/bill/analysisBillData"},zlqDateRange:[],noneDefine:""}},watch:{"baseDialog.open":function(e,t){var a=this;e&&this.$nextTick((function(){var e;a.circleNum=Math.ceil((null===(e=document.getElementsByClassName("fptk_wrapper_body")[0])||void 0===e?void 0:e.clientHeight)/70)}))}},computed:{totalAmountUpperCase:function(){return this.form.totalAmount?this.swapper(this.form.totalAmount):"零元"},invoiceDiscountFlag:function(){for(var e=0;e<this.billDetailsData.length;e++){var t=this.billDetailsData[e];if("0"!=t.discountFlag)return!0}return!1}},mounted:function(){var e=this;window.onresize=function(){e.circleNum=Math.ceil(document.getElementsByClassName("fptk_wrapper_body")[0].clientHeight/70)}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("special_ticket").then((function(t){e.specialTicketOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType,"remark")})),Object(u["a"])().then((function(t){200==t.code&&(e.hsbz=t.data.hsbz||"1",e.hsbzLabel="1"==e.hsbz?"含税":"不含税",e.kpdy=t.data.kpdy,e.sourceHsbz=t.data.hsbz||"1")})),this.formatRegionData(b["regionData"]),this.cascaderOptions=b["regionData"]},methods:{billDialogShow:function(){var e=this;this.baseDialog.open=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},dialogClose:function(){this.baseDialog.open=!1},editDialogTitle:function(e){"1"==e?(this.getSubjectInfo(),this.getTaxNoSeller(),this.baseDialog.title="添加单据管理"):this.baseDialog.title="修改单据管理"},getSubjectInfo:function(){var e=this;Object(l["l"])().then((function(t){var a,n;e.form.sellTaxNo=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.nsrsbh,e.form.sellName=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.nsrmc}))},getTaxNoSeller:function(){var e=this;["81","82","85","86"].includes(this.form.invType)?Object(s["b"])().then((function(t){var a,n,i,o,r=t.nickName,l=t.sellers;if(null!=l&&0!=l.length){for(var s,c=0;c<l.length;c++)if("1"==l[c].status){s=l[c];break}if(null==s)for(var u=0;u<l.length;u++)if(l[u].drawer==r){s=l[u];break}null==s&&(s=l[0]),e.form.cashier=s.payee,e.form.checker=s.checker,e.form.invoicer=s.drawer,e.form.sellAddr=null===(a=s.bankAddrTel)||void 0===a?void 0:a.split(/[ ]+/)[0],e.form.sellTel=null===(n=s.bankAddrTel)||void 0===n?void 0:n.split(/[ ]+/)[1],e.form.sellBank=null===(i=s.bankAccount)||void 0===i?void 0:i.split(/[ ]+/)[0],e.form.sellAccount=null===(o=s.bankAccount)||void 0===o?void 0:o.split(/[ ]+/)[1]}})):Object(l["m"])().then((function(t){var a=t.nickName,n=t.sellers;if(null!=n&&0!=n.length){for(var i,o=0;o<n.length;o++)if("1"==n[o].status){i=n[o];break}if(null==i)for(var r=0;r<n.length;r++)if(n[r].drawer==a){i=n[r];break}null==i&&(i=n[0]),e.form.cashier=i.payee,e.form.checker=i.checker,e.form.invoicer=i.drawer,e.form.sellAddrTel=i.bankAddrTel,e.form.sellBankAccount=i.bankAccount}}))},billDialogClose:function(){var e=this;this.$nextTick((function(){e.$refs["form"].clearValidate()})),this.form={billNo:"",invType:"2",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",sourceInvCode:"",sourceInvNo:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",specialTicket:"0",tdyslxdm:"",tdywxx:{jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},hwys:[{index:0,qyd:"",ddd:"",ysgjzl:"",ysgjhp:"",yshwmc:""}],bdcxs:{bdcdz:"",bdcxxdz:"",fwcqzshm:"",kdsbz:"",mjdw:"",wqhtbabh:"",tdzzsxmbh:"",hdjsjg:"",sjcjhsje:""}},shopNo:null,sfzsgfyhzh:"0",sfzsxfyhzh:"0"},this.hsbz=this.sourceHsbz,this.hsbzLabel="1"==this.hsbz?"含税":"不含税",this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],this.redInvoiceFlag=!1,this.billTypeChange()},fillBillDialog:function(e){var t=this;return Object(l["j"])(e).then((function(e){var a=e.data;t.fillLogic(a),t.baseDialog.open=!0,t.$nextTick((function(){t.$refs.form.clearValidate()})),t.baseDialog.title="修改单据管理",t.isAdd=!1}))},fillBillDialogByInvCodeNo:function(e){var t=this;return Object(c["q"])(e).then((function(e){var a=e.data;if(null==a)return t.msgError("未找到此发票"),!1;t.fillLogic(a),t.baseDialog.open=!0,t.baseDialog.title="添加单据管理",t.getBillNo()}))},fillLogic:function(e){this.initQDForm(e),this.form=e,this.billTypeChange(),parseFloat(e.totalAmount)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,this.form.note=e.note,this.form.cashier=e.cashier,this.form.checker=e.checker,this.form.invoicer=e.invoicer;var t=e.details;this.billDetailsData.length=0;for(var a=0,n=0;n<t.length;n++){var i=t[n];i.index=n,i.rate=void 0!=i.rate?this.specialRateFormalEcho(i):"",null!=i.goodsName&&i.goodsName.length>t[a].goodsName.length&&(a=n),i.sourceExt1=i.ext1,this.billDetailsData.push(i)}this.goodsNameChange(a)},initQDForm:function(e){var t,a,n,i,o,r,l,s,c,u,d,p,h,m,f,b;["81","82","85","86"].includes(e.invType)&&(e.sourceInvNo&&["81","82"].includes(e.invType)&&(e.sourceInvNo=e.sourceInvCode+e.sourceInvNo),e.buyAddr=null===(n=e.buyAddrTel)||void 0===n?void 0:n.split(/[ ]+/)[0],e.buyTel=null===(i=e.buyAddrTel)||void 0===i?void 0:i.split(/[ ]+/)[1],e.buyBank=null===(o=e.buyBankAccount)||void 0===o?void 0:o.split(/[ ]+/)[0],e.buyAccount=null===(r=e.buyBankAccount)||void 0===r?void 0:r.split(/[ ]+/)[1],e.sellAddr=null===(l=e.sellAddrTel)||void 0===l?void 0:l.split(/[ ]+/)[0],e.sellTel=null===(s=e.sellAddrTel)||void 0===s?void 0:s.split(/[ ]+/)[1],e.sellBank=null===(c=e.sellBankAccount)||void 0===c?void 0:c.split(/[ ]+/)[0],e.sellAccount=null===(u=e.sellBankAccount)||void 0===u?void 0:u.split(/[ ]+/)[1]);null!==e&&void 0!==e&&null!==(t=e.tdywxx)&&void 0!==t&&null!==(t=t.bdczl)&&void 0!==t&&t.zlqqssj&&null!==e&&void 0!==e&&null!==(a=e.tdywxx)&&void 0!==a&&null!==(a=a.bdczl)&&void 0!==a&&a.zlqzssj&&(this.zlqDateRange=[null===e||void 0===e||null===(d=e.tdywxx)||void 0===d||null===(d=d.bdczl)||void 0===d?void 0:d.zlqqssj.replace(/-/g,""),null===e||void 0===e||null===(p=e.tdywxx)||void 0===p||null===(p=p.bdczl)||void 0===p?void 0:p.zlqzssj.replace(/-/g,"")]);e.tdywxx?(null!==(h=e.tdywxx)&&void 0!==h&&h.jzfw?e.tdywxx.jzfw.jzfwfsd=e.tdywxx.jzfw.jzfwfsd?e.tdywxx.jzfw.jzfwfsd.split("/"):[]:e.tdywxx.jzfw={jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},null!==(m=e.tdywxx)&&void 0!==m&&m.bdczl?(e.tdywxx.bdczl.zlqqssj&&e.tdywxx.bdczl.zlqzssj&&(this.zlqDateRange=[e.tdywxx.bdczl.zlqqssj.replace(/-/g,""),e.tdywxx.bdczl.zlqzssj.replace(/-/g,"")]),e.tdywxx.bdczl.bdcdz=e.tdywxx.bdczl.bdcdz?e.tdywxx.bdczl.bdcdz.split("/"):[]):e.tdywxx.bdczl={bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},null!==(f=e.tdywxx)&&void 0!==f&&f.hwys||(e.tdywxx.hwys=[{index:0,qyd:"",ddd:"",ysgjzl:"",ysgjhp:"",yshwmc:""}]),null!==(b=e.tdywxx)&&void 0!==b&&b.bdcxs||(e.tdywxx.bdcxs={bdcdz:"",bdcxxdz:"",fwcqzshm:"",kdsbz:"",mjdw:"",wqhtbabh:"",tdzzsxmbh:"",hdjsjg:"",sjcjhsje:""})):e.tdywxx={jzfw:{jzfwfsd:[],fsdxxdz:null,jzxmmc:null,kdsbz:null,tdzzsxmbh:null},bdczl:{bdcdz:[],zlqqssj:null,zlqzssj:null,bdcxxdz:null,kdsbz:null,bdcqzh:null,dwmj:null},hwys:[{index:0,qyd:"",ddd:"",ysgjzl:"",ysgjhp:"",yshwmc:""}],bdcxs:{bdcdz:"",bdcxxdz:"",fwcqzshm:"",kdsbz:"",mjdw:"",wqhtbabh:"",tdzzsxmbh:"",hdjsjg:"",sjcjhsje:""}}},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},getTaxnoStockInfo:function(){var e=this;Object(d["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},getBillNo:function(){this.form.billNo="MTO"+this.$moment(new Date).format("YYYYMMDDHHmmSSS"),this.isAdd=!0},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,["81","82","85","86"].includes(this.form.invType)?(e.addrTel?(this.form.buyAddr=e.addrTel.split(/[ ]+/)[0],this.form.buyTel=e.addrTel.split(/[ ]+/)[1]):(this.form.buyAddr="",this.form.buyTel=""),e.bankAccount?(this.form.buyBank=e.bankAccount.split(/[ ]+/)[0],this.form.buyAccount=e.bankAccount.split(/[ ]+/)[1]):(this.form.buyBank="",this.form.buyAccount="")):(this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount)},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsCode:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={code:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].code;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){var t=Object(f["c"])("",this.billDetailsData[this.taxCodeSignRow].goodsName);parseFloat(t)>parseFloat(this.selfAdaptionWidth)&&(this.selfAdaptionWidth=t),this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].unit=e.unit,this.billDetailsData[this.taxCodeSignRow].rate=null==e.rate||void 0==e.rate?"":e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),this.billDetailsData[this.taxCodeSignRow].preferentialFlag=e.preferentialPolicy,this.billDetailsData[this.taxCodeSignRow].preferentialType=e.preferentialPolicyType,this.billDetailsData[this.taxCodeSignRow].goodsCode=e.code,this.billDetailsData[this.taxCodeSignRow].goodsName=e.name,"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow-1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow-1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow-1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation=this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation,this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=this.billDetailsData[this.taxCodeSignRow].taxTypeCode,this.billDetailsData[this.taxCodeSignRow+1].goodsCode=this.billDetailsData[this.taxCodeSignRow].goodsCode,this.billDetailsData[this.taxCodeSignRow+1].rate=this.billDetailsData[this.taxCodeSignRow].rate,this.billDetailsData[this.taxCodeSignRow+1].goodsName=this.billDetailsData[this.taxCodeSignRow].goodsName,this.taxRateChange(this.taxCodeSignRow+1)),this.taxCodeSignRow==this.billDetailsData.length-1&&this.addBillDetailRow()},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},handleShowBuySell:function(){this.showBuySell=!this.showBuySell},billTypeChange:function(){var e=this;this.fplxdesc=this.selectDictLabel(this.invTypeOptions,this.form.invType,"remark"),"0"==this.form.invType?(this.rules.buyTaxNo[1].required=!0,this.rules.buyAddrTel[0].required=!0,this.rules.buyBankAccount[0].required=!0):"2"!=this.form.invType&&"51"!=this.form.invType||(this.rules.buyTaxNo[1].required=!1,this.rules.buyAddrTel[0].required=!1,this.rules.buyBankAccount[0].required=!1),["81","82","85","86"].includes(this.form.invType)?this.showBuySell=!1:this.showBuySell=!0,this.baseDialog.open&&this.getTaxNoSeller(),this.$nextTick((function(){e.$refs.form.clearValidate()}))},saveBill:function(e){var t=this;this.judgeExistPNLine(-1)?this.msgError("明细行内不能同时存在正负数明细行"):this.$refs["form"].validate((function(a){if(a&&t.validDetailRequired()){var n=Object(m["e"])(t.form);n.details=Object(m["e"])(t.billDetailsData);var i=n.details[n.details.length-1];i.goodsName&&i.amountWithoutTax&&i.amountWithTax&&i.rate||n.details.splice(n.details.length-1,1);for(var o=0;o<n.details.length;o++)"免税"==n.details[o].rate?(n.details[o].rate=0,n.details[o].preferentialFlag="1",n.details[o].preferentialType="免税",n.details[o].taxZeroRate="1"):"不征税"==n.details[o].rate?(n.details[o].rate=0,n.details[o].preferentialFlag="1",n.details[o].preferentialType="不征税",n.details[o].taxZeroRate="2"):"0"==n.details[o].rate?(n.details[o].preferentialFlag="0",n.details[o].preferentialType="",n.details[o].taxZeroRate="3"):n.details[o].preferentialType||(n.details[o].preferentialFlag="0",n.details[o].preferentialType="",n.details[o].taxZeroRate=""),n.details[o].number||(n.details[o].taxPrice="",n.details[o].withoutTaxPrice=""),n.details[o].taxPrice||(n.details[o].number="",n.details[o].withoutTaxPrice=""),n.details[o].withoutTaxPrice||(n.details[o].number="",n.details[o].taxPrice=""),n.details[o].rowIndex=n.details[o].index;if(["81","82","85","86"].includes(n.invType)){if("12"==n.tdyslxdm)for(var r=n.tdywxx.hwys,s=0,c=r.length;s<c;s++){var u=r[s],d=u.qyd,p=u.ddd,h=u.ysgjzl,f=u.ysgjhp,b=u.yshwmc;if(!d)return void t.msgError("货物运输服务中第".concat(s+1,"行的【起运地】为空"));if(!p)return void t.msgError("货物运输服务中第".concat(s+1,"行的【到达地】为空"));if(!h)return void t.msgError("货物运输服务中第".concat(s+1,"行的【运输工具种类】为空"));if(!f)return void t.msgError("货物运输服务中第".concat(s+1,"行的【运输工具牌号】为空"));if(!b)return void t.msgError("货物运输服务中第".concat(s+1,"行的【运输货物名称】为空"))}var g,v;if(n.buyAddrTel=(n.buyAddr||"")+" "+(n.buyTel||""),n.buyBankAccount=(n.buyBank||"")+" "+(n.buyAccount||""),n.sellAddrTel=(n.sellAddr||"")+" "+(n.sellTel||""),n.sellBankAccount=(n.sellBank||"")+" "+(n.sellAccount||""),["81","82"].includes(n.invType))n.sourceInvCode=null===(g=n.sourceInvNo)||void 0===g?void 0:g.substr(0,12),n.sourceInvNo=null===(v=n.sourceInvNo)||void 0===v?void 0:v.substr(12);n.tdywxx.jzfw.jzfwfsd=n.tdywxx.jzfw.jzfwfsd.join("/"),n.tdywxx.bdczl.bdcdz=n.tdywxx.bdczl.bdcdz.join("/"),"06"==n.tdyslxdm&&(n.tdywxx.bdczl.zlqqssj=t.zlqDateRange[0],n.tdywxx.bdczl.zlqzssj=t.zlqDateRange[1])}else delete n.tdywxx;t.isAdd?Object(l["a"])(n).then((function(a){200===a.code&&(t.msgSuccess("新增成功"),t.$emit("updateBillTable"),"2"==e?(t.baseDialog.open=!1,t.$emit("openBill",a.data)):t.baseDialog.open=!1)})):Object(l["v"])(n).then((function(a){200===a.code&&(t.msgSuccess("修改成功"),t.$emit("updateBillTable"),"2"==e?(t.baseDialog.open=!1,t.$emit("openBill",{id:n.id,invType:n.invType,bizDate:n.bizDate})):t.baseDialog.open=!1)}))}}))},addBillDetailRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bill";if("bill"==e){if(this.checkRowIsNone())return void this.msgError("存在空白行未填写");if(!this.judgeDetailsLength(this.form.invType,this.billDetailsData.length))return;var t={index:this.billDetailsData.length,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""};this.billDetailsData.push(t)}else if("hwys"==e){var a=this.form.tdywxx.hwys[this.form.tdywxx.hwys.length-1];if(!(a.qyd&&a.ddd&&a.ysgjzl&&a.ysgjhp&&a.yshwmc))return void this.msgError("存在空白行未填写");var n={index:this.form.tdywxx.hwys.length,qyd:"",ddd:"",ysgjzl:"",ysgjhp:"",yshwmc:""};this.form.tdywxx.hwys.push(n)}},delBillDetailRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bill";if("bill"==t){for(var a=this.billDetailsData.filter((function(t,a){return e.index!=a&&("2"!=e.discountFlag||e.index+1!=a)})),n=0;n<a.length;n++)"2"!=a[n].discountFlag||void 0!=a[n+1]&&"1"==a[n+1].discountFlag||(a[n].discountFlag="0"),a[n].index=n;this.billDetailsData=a,this.useCalc()}else if("hwys"==t){var i=this.form.tdywxx.hwys.filter((function(t,a){return e.index!=a})).map((function(e,t){return e.index=t,e}));this.form.tdywxx.hwys=i}},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)}}else if(""!=n&&null!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if(("1"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].taxPrice))&&"0"!=this.billDetailsData[e].taxPrice&&("0"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].withoutTaxPrice))&&"0"!=this.billDetailsData[e].withoutTaxPrice&&"-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&(""!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=i&&(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&(""!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""==t&&""!=o&&(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.billDetailsData[e].differenceDeduct="",this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if(("1"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].amountWithTax))&&("0"!=this.hsbz||this.isNumberStr(this.billDetailsData[e].amountWithoutTax))){if("1"==this.billDetailsData[e].discountFlag){if(Math.abs(parseFloat(this.billDetailsData[e].amountWithTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithTax="");if(Math.abs(parseFloat(this.billDetailsData[e].amountWithoutTax))>Math.abs(parseFloat(this.billDetailsData[e-1].amountWithoutTax)))return this.msgError("折扣行的金额不能大于被折扣行"),void(this.billDetailsData[e].amountWithoutTax="")}var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t||null==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=""==this.billDetailsData[e].amountWithTax?"":(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=""==this.billDetailsData[e].amountWithoutTax?"":(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8)}"1"!=this.billDetailsData[e].discountFlag&&this.judgeExistPNLine(e),this.billDetailsData[e].differenceDeduct="",this.useCalc()}},taxRateChange:function(e){this.formatPreferentialFlag(e);var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].rate=this.billDetailsData[e].rate:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].rate=this.billDetailsData[e].rate),""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].rate=this.billDetailsData[e].rate,this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e-1].amountWithoutTax=(parseFloat(this.billDetailsData[e-1].amountWithTax)-parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithTax)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e+1].amountWithoutTax=(parseFloat(this.billDetailsData[e+1].amountWithTax)-parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2))):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"","1"==this.billDetailsData[e].discountFlag?(this.billDetailsData[e-1].taxAmount=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e-1].amountWithTax=(parseFloat(this.billDetailsData[e-1].amountWithoutTax)+parseFloat(this.billDetailsData[e-1].taxAmount)).toFixed(2)):"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].taxAmount=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e+1].amountWithTax=(parseFloat(this.billDetailsData[e+1].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2)))),this.billDetailsData[e].differenceDeduct="",this.useCalc()},formatPreferentialFlag:function(e){var t=this.billDetailsData[e].rate;["不征税"].includes(t)?(this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].preferentialType="不征税",this.billDetailsData[e].taxZeroRate="2"):["免税"].includes(t)?(this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].preferentialType="免税",this.billDetailsData[e].taxZeroRate="1"):"0"==t?(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].preferentialType="",this.billDetailsData[e].taxZeroRate="3"):(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].preferentialType="",this.billDetailsData[e].taxZeroRate="")},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},taxAmountChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate),o=this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,""!=o&&""!=a&&null!=a){if(Math.abs(parseFloat((Math.abs((parseFloat(a)-parseFloat(o))*parseFloat(i)/100)-Math.abs(o)).toFixed(2)))>.06)return this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),void this.msgError("税额误差超过0.06，请重新输入");this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(o)).toFixed(2),""!=t&&null!=t&&(this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8))}this.billDetailsData[e].differenceDeduct="",this.useCalc()},calcTotalTaxAmount:function(){var e,t=0,a=Object(r["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(r["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(r["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=e>=0?e:0,a=!1,n=0;n<this.billDetailsData.length;n++)if(parseFloat(this.billDetailsData[n].amountWithTax)*parseFloat(this.billDetailsData[t].amountWithTax)<0&&"1"!=this.billDetailsData[n].discountFlag){a=!0;break}return a&&e>=0&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行")),a},chooseCode:function(e){this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow),"1"==this.billDetailsData[this.taxCodeSignRow].discountFlag?(this.billDetailsData[this.taxCodeSignRow-1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow-1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow-1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow-1)):"2"==this.billDetailsData[this.taxCodeSignRow].discountFlag&&(this.billDetailsData[this.taxCodeSignRow+1].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow+1].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow+1].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow+1))},discountSetUp:function(){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择至少一行明细数据折扣");else{for(var t=0;t<e.length;t++){if(parseFloat(e[t].amountWithTax)<0)return void this.msgError("负数明细不能折扣");if("1"==e[t].discountFlag)return void this.msgError("折扣行不能被折扣");if("2"==e[t].discountFlag)return void this.msgError("所选行已进行过折扣")}this.discountOpen=!0,this.discountForm.discountLine=e.length,this.discountForm.discountTotalMoney=1==e.length?e[0].amountWithoutTax:e.reduce((function(e,t){return parseFloat(e.amountWithoutTax)+parseFloat(t.amountWithoutTax)})),this.discountForm.discountMoney="",this.discountForm.discountRate="";for(var a=0;a<e.length;a++)this.discountSelectIndex.push(e[a].index)}},discountMoneyChange:function(){if(parseFloat(this.discountForm.discountMoney)>parseFloat(this.discountForm.discountTotalMoney))return this.msgError("折扣金额不能大于被折扣金额"),void(this.discountForm.discountMoney="");this.discountForm.discountRate=(parseFloat(this.discountForm.discountMoney)/parseFloat(this.discountForm.discountTotalMoney)*100).toFixed(3)},discountRateChange:function(){if(parseFloat(this.discountForm.discountRate)>100)return this.msgError("折扣率不能大于100%"),void(this.discountForm.discountRate="");this.discountForm.discountMoney=(parseFloat(this.discountForm.discountRate)*parseFloat(this.discountForm.discountTotalMoney)/100).toFixed(2)},discountDialogClose:function(){this.discountForm={discountLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""}},submitDiscount:function(){if(""!=this.discountForm.discountMoney&&""!=this.discountForm.discountRate){for(var e=this.discountSelectIndex,t=0;t<e.length;t++){this.billDetailsData[e[t]].discountFlag="2";var a=Object(m["e"])(this.billDetailsData[e[t]]);a.amountWithoutTax=(parseFloat(this.billDetailsData[e[t]].amountWithoutTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.amountWithTax=(parseFloat(this.billDetailsData[e[t]].amountWithTax)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.taxAmount=(parseFloat(this.billDetailsData[e[t]].taxAmount)*parseFloat(this.discountForm.discountRate)/100*-1).toFixed(2),a.discountFlag="1",a.standard="",a.unit="",a.number="",a.taxPrice="",a.withoutTaxPrice="",this.billDetailsData.splice(e[t]+t+1,0,a)}for(var n=0;n<this.billDetailsData.length;n++)this.billDetailsData[n].index=n;this.discountSelectIndex.length=0,this.discountOpen=!1,this.useCalc()}else this.msgError("请输入折扣金额或折扣率")},setDifferenceDeduct:function(){1==this.billDetailsData.length?this.deductOpen=!0:this.msgError("差额征收只允许一行明细")},deductDialogClose:function(){this.deductForm.differenceDeductAmount=""},submitDeduct:function(){""!=this.deductForm.differenceDeductAmount?""!=this.billDetailsData[0].amountWithTax?Math.abs(parseFloat(this.deductForm.differenceDeductAmount))>Math.abs(parseFloat(this.billDetailsData[0].amountWithTax))?this.msgError("所填扣除额必须小于等于含税金额"):(this.billDetailsData[0].taxAmount=(parseFloat((parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.deductForm.differenceDeductAmount)).toFixed(2))*(parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)/(1+parseFloat(this.specialRateFormal(this.billDetailsData[0].rate))/100)).toFixed(2),this.billDetailsData[0].amountWithoutTax=(parseFloat(this.billDetailsData[0].amountWithTax)-parseFloat(this.billDetailsData[0].taxAmount)).toFixed(2),this.billDetailsData[0].differenceDeduct=this.deductForm.differenceDeductAmount,this.useCalc(),this.deductOpen=!1):this.msgError("请先填写含税金额"):this.msgError("请输入扣除额")},validIsNumber:function(e){e.target.value=Object(f["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(f["a"])(e.target.value)},goodsNameChange:function(e){var t=this.billDetailsData[e].goodsName;"1"==this.billDetailsData[e].discountFlag?this.billDetailsData[e-1].goodsName=t:"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e+1].goodsName=t),this.selfAdaptionWidth=Object(f["c"])("",t)},validDetailRequired:function(){var e,t=Object(r["a"])(this.billDetailsData);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.index!=this.billDetailsData.length-1||0==a.index){if(""==a.goodsName)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的货物名称为空"),!1;if(""==a.amountWithoutTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的不含税金额为空"),!1;if(""==a.amountWithTax)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的含税金额为空"),!1;if(""==a.rate)return this.msgError("第"+(parseFloat(a.index)+1)+"行明细的税率为空"),!1}}}catch(n){t.e(n)}finally{t.f()}return!0},mergeDiscount:function(){if(this.checkRowIsNone())this.msgError("存在空白行不允许合并折扣行");else{for(var e=0,t=this.billDetailsData.length;e<t;e++)"2"==this.billDetailsData[e].discountFlag&&(this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithTax)+parseFloat(this.billDetailsData[e+1].amountWithTax)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e+1].amountWithoutTax)).toFixed(2),""!=this.billDetailsData[e].number&&null!=this.billDetailsData[e].number&&(this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(this.billDetailsData[e].number)).toFixed(8)),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(this.billDetailsData[e+1].taxAmount)).toFixed(2));this.billDetailsData=this.billDetailsData.filter((function(e,t){return"1"!=e.discountFlag}));for(var a=0,n=this.billDetailsData.length;a<n;a++)this.billDetailsData[a].discountFlag="0",this.billDetailsData[a].index=a}},mergeBillDetail:function(){if(this.checkRowIsNone())this.msgError("存在空白行不允许合并明细");else{for(var e=!0,t=parseFloat(this.billDetailsData[0].amountWithTax),a=0,n=1,i=this.billDetailsData.length;n<i;n++)parseFloat(this.billDetailsData[n].amountWithTax)>t&&(t=parseFloat(this.billDetailsData[n].amountWithTax),a=n),e&&this.billDetailsData[0].rate!=this.billDetailsData[n].rate&&(e=!1);if(e){for(var o=0,r=0,l=0,s=0,c=0,u=this.billDetailsData.length;c<u;c++)o+=""==this.billDetailsData[c].amountWithTax?0:parseFloat(this.billDetailsData[c].amountWithTax),r+=""==this.billDetailsData[c].amountWithoutTax?0:parseFloat(this.billDetailsData[c].amountWithoutTax),l+=""==this.billDetailsData[c].taxAmount?0:parseFloat(this.billDetailsData[c].taxAmount),s+=""==this.billDetailsData[c].number?0:parseFloat(this.billDetailsData[c].number);var d=Object(m["e"])(this.billDetailsData[a]);d.index=0,d.discountFlag="0",d.amountWithTax=o.toFixed(2),d.amountWithoutTax=r.toFixed(2),d.taxAmount=l.toFixed(2),d.number=s,d.taxPrice=(parseFloat(o.toFixed(2))/s).toFixed(8),d.withoutTaxPrice=(parseFloat(r.toFixed(2))/s).toFixed(8),this.billDetailsData=[],this.billDetailsData.push(d)}else this.msgError("存在税率不一样的明细，不能合并")}},handleClearReset:function(){this.billDetailsData=[{index:0,discountFlag:"0",goodsCode:"",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"",preferentialType:"",taxZeroRate:null}]},checkRowIsNone:function(){var e=this.billDetailsData[this.billDetailsData.length-1];return!(e.amountWithTax||e.amountWithoutTax||e.taxTypeCode)},handleCopy:function(){var e=this;this.introduceOpen=!0,this.$nextTick((function(){e.$refs.introduceForm.clearValidate()}))},introduceDialogClose:function(){this.introduceOpen=!1,this.introduceForm={invCode:"",invNo:"",invCodeNo:""}},submitIntroduce:function(){var e=this;this.$refs.introduceForm.validate((function(t){if(t){var a=Object(m["e"])(e.introduceForm);if(8==a.invNo.length&&!a.invCode)return void e.msgError("发票代码为空时，发票号码应为20位");20==a.invNo.length&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),a.invType=e.form.invType,a.invCodeNo=a.invCode+"_"+a.invNo,e.$vLoading.show(),Object(c["q"])(a).then((function(t){if(e.$vLoading.hide(),200==t.code&&t.data){if(!t.data)return void e.msgError("未找到对应发票");var a=t.data.details,n=e.form.billNo;e.initQDForm(t.data),e.form=t.data,e.form.billNo=n,e.billDetailsData.length=0;for(var i=0;i<a.length;i++){var o=a[i];o.index=i,e.billDetailsData.push(o)}e.introduceDialogClose()}else e.msgError(t.msg)})).catch((function(t){console.log(t),e.$vLoading.hide()}))}}))},handleDetailImport:function(){this.detailUpload.open=!0},handleFileUploadProgress:function(e,t,a){this.detailUpload.isUploading=!0},handleFileSuccess:function(e,t,a){if(this.detailUpload.open=!1,this.detailUpload.isUploading=!1,this.$refs.detailUpload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),e.data){this.checkRowIsNone()&&this.billDetailsData.splice(this.billDetailsData.length-1,1);for(var n=0;n<e.data.length;n++)this.billDetailsData.push(Object(o["a"])(Object(o["a"])({},e.data[n]),{},{index:this.billDetailsData.length}))}},submitFileForm:function(){this.$refs.detailUpload.submit()},formatRegionData:function(e){for(var t=0;t<e.length;t++)e[t].value=e[t].label,e[t].children&&this.formatRegionData(e[t].children)},hsbzChange:function(){this.hsbz="含税"==this.hsbzLabel?"1":"0"}}},v=g,y=(a("782a"),a("f448"),a("2877")),_=Object(y["a"])(v,n,i,!1,null,"d740d312",null);t["default"]=_.exports},bbec:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4,xs:24}},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.codeName,callback:function(t){e.codeName=t},expression:"codeName"}})],1),a("div",{staticClass:"head-container"},[a("el-tree",{ref:"tree",attrs:{data:e.codeOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":!1},on:{"node-click":e.handleNodeClick}})],1)]),a("el-col",{attrs:{span:20,xs:24}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("el-form-item",{attrs:{label:"合并编码",prop:"mergeCode"}},[a("el-input",{attrs:{placeholder:"请输入合并编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.mergeCode,callback:function(t){e.$set(e.queryParams,"mergeCode",t)},expression:"queryParams.mergeCode"}})],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"简称",prop:"abbreviation"}},[a("el-input",{attrs:{placeholder:"请输入简称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.abbreviation,callback:function(t){e.$set(e.queryParams,"abbreviation",t)},expression:"queryParams.abbreviation"}})],1),a("el-form-item",{attrs:{label:"税率",prop:"rate"}},[a("el-input",{attrs:{placeholder:"请输入增值税税率",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.rate,callback:function(t){e.$set(e.queryParams,"rate",t)},expression:"queryParams.rate"}})],1),a("el-form-item",{attrs:{label:"关键字",prop:"keyWord"}},[a("el-input",{attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyWord,callback:function(t){e.$set(e.queryParams,"keyWord",t)},expression:"queryParams.keyWord"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:taxcode:add"],expression:"['output:taxcode:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleImport}},[e._v("导入 ")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:taxcode:export"],expression:"['output:taxcode:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"taxCodeMainTable",attrs:{data:e.taxcodeList,height:e.tableHeight,"row-class-name":e.tableRowClassName,"row-height":40,"use-virtual":""},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("u-table-column",{attrs:{label:"编码",align:"center",prop:"code","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"合并编码",align:"center",prop:"mergeCode","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"说明",align:"center",prop:"description","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"简称",align:"center",prop:"abbreviation","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"增值税税率",align:"center",prop:"rate"}}),a("u-table-column",{attrs:{label:"关键字",align:"center",prop:"keyWord","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"版本号",align:"center",prop:"version"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xml, .xlsx, .xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"on-change":e.handleChange,"on-remove":e.handleChange,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xml”、“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("4de4"),a("d3b7"),a("d81d"),a("5f87")),l=a("0500"),s=a("ca17"),c=a.n(s),u=(a("542c"),a("7b93")),d=a("ed08"),p={components:{Treeselect:c.a,MyElProgress:u["a"]},name:"Taxcode",data:function(){return{tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,codeOptions:[],total:0,taxcodeList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:500,code:null,mergeCode:null,name:null,abbreviation:null,rate:null,keyWord:null,path:null},defaultProps:{children:"children",label:"label",autoSelectAncestors:!1},codeName:null,form:{},upload:{fileList:[],open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(r["a"])()},url:"/prod-api/output/taxcode/importData"},rules:{},mainLoading:!1,showProgress:!1,functionName:"",loadingTime:null}},created:function(){var e=this;this.getList(),this.getTreeselect(),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{codeName:function(e){this.$refs.tree.filter(e)},showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0,Object(l["c"])(this.queryParams).then((function(t){e.taxcodeList=t.rows,e.total=t.total,e.loading=!1}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){this.queryParams.path=e.id,this.getList()},getTreeselect:function(){var e=this;Object(l["b"])().then((function(t){e.codeOptions=t.data}))},handleImport:function(){this.upload.title="税收分类编码导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.mainLoading=!1,this.getList()},submitFileForm:function(){0!=this.upload.fileList.length?(this.mainLoading=!0,this.upload.open=!1,this.$refs.upload.submit()):this.msgError("请选择要导入的文件")},handleChange:function(e,t){this.upload.fileList=t},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={code:null,mergeCode:null,name:null,description:null,abbreviation:null,rate:null,specialManagement:null,policyBasis:null,specialContentCode:null,exciseManagement:null,excisePolicyBasis:null,exciseContentCode:null,keyWord:null,summarizedItem:null,statisticalBureauCode:null,customsItem:null,excelVersion:null,version:null,status:"0",startDate:null,interimDate:null,parentCode:null,updateTime:null,file:null,hiddenStatus:"0",path:null},this.resetForm("form")},handleQuery:function(){this.queryParams.path=null,this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.code})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleExport:function(){var e=this,t=Object(d["e"])(this.queryParams);t.codeArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["a"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"税收分类编码.xls",e)})).catch((function(){}))},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.taxCodeMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.taxcodeList,"taxCodeMainTable")},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},bcdb:function(e,t,a){"use strict";a("f0e5")},bddb:function(e,t,a){"use strict";a("a057")},bee3:function(e,t,a){"use strict";a("8e1e")},bfc4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictType"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.dictType,callback:function(t){e.$set(e.queryParams,"dictType",t)},expression:"queryParams.dictType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictType}})})),1)],1),a("el-form-item",{attrs:{label:"字典标签",prop:"dictLabel"}},[a("el-input",{attrs:{placeholder:"请输入字典标签",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.dictLabel,callback:function(t){e.$set(e.queryParams,"dictLabel",t)},expression:"queryParams.dictLabel"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"数据状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:add"],expression:"['system:dict:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:edit"],expression:"['system:dict:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:remove"],expression:"['system:dict:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:export"],expression:"['system:dict:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"字典编码",align:"center",prop:"dictCode"}}),a("el-table-column",{attrs:{label:"字典标签",align:"center",prop:"dictLabel"}}),a("el-table-column",{attrs:{label:"字典键值",align:"center",prop:"dictValue"}}),a("el-table-column",{attrs:{label:"字典排序",align:"center",prop:"dictSort"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:edit"],expression:"['system:dict:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:dict:remove"],expression:"['system:dict:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"字典类型"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.dictType,callback:function(t){e.$set(e.form,"dictType",t)},expression:"form.dictType"}})],1),a("el-form-item",{attrs:{label:"数据标签",prop:"dictLabel"}},[a("el-input",{attrs:{placeholder:"请输入数据标签"},model:{value:e.form.dictLabel,callback:function(t){e.$set(e.form,"dictLabel",t)},expression:"form.dictLabel"}})],1),a("el-form-item",{attrs:{label:"数据键值",prop:"dictValue"}},[a("el-input",{attrs:{placeholder:"请输入数据键值"},model:{value:e.form.dictValue,callback:function(t){e.$set(e.form,"dictValue",t)},expression:"form.dictValue"}})],1),a("el-form-item",{attrs:{label:"显示排序",prop:"dictSort"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.dictSort,callback:function(t){e.$set(e.form,"dictSort",t)},expression:"form.dictSort"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("aa3a")),r=a("ed45"),l=a("c38a"),s={name:"Data",components:{},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,dataList:[],defaultDictType:"",title:"",open:!1,statusOptions:[],typeOptions:[],queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},form:{},rules:{dictLabel:[{required:!0,message:"数据标签不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"数据键值不能为空",trigger:"blur"}],dictSort:[{required:!0,message:"数据顺序不能为空",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this,t=this.$route.params&&this.$route.params.dictId;this.getType(t),this.getTypeList(),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{getType:function(e){var t=this;Object(r["e"])(e).then((function(e){t.queryParams.dictType=e.data.dictType,t.defaultDictType=e.data.dictType,t.getList()}))},getTypeList:function(){var e=this;Object(r["f"])().then((function(t){e.typeOptions=t.rows}))},getList:function(){var e=this;this.loading=!0,Object(o["f"])(this.queryParams).then((function(t){e.dataList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={dictCode:void 0,dictLabel:void 0,dictValue:void 0,dictSort:0,status:"1",remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.queryParams.dictType=this.defaultDictType,this.handleQuery()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加字典数据",this.form.dictType=this.queryParams.dictType},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.dictCode})),this.single=1!=e.length,this.multiple=!e.length},handleUpdate:function(e){var t=this;this.reset();var a=e.dictCode||this.ids;Object(o["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改字典数据"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.dictCode?Object(o["g"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.dictCode||this.ids;this.$confirm('是否确认删除字典编码为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["g"])(10,"导出中",e),Object(o["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},c1c4:function(e,t,a){},c24a:function(e,t,a){"use strict";a("d6f9")},c2f6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.applyDetailShowDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleOpen}},[e._v("开具")]),e.summaryFlag||"0"==e.form.invType||"52"==e.form.invType?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBillDetailRow}},[e._v("增行")]),e.summaryFlag?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBillDetailRow}},[e._v("删行")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}},e._l(e.detailFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",[a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[["81","82"].includes(e.form.invType)?e._e():a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"蓝字发票代码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"蓝字发票号码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.mergeInvNo,callback:function(t){e.$set(e.form,"mergeInvNo","string"===typeof t?t.trim():t)},expression:"form.mergeInvNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},["0"==e.form.invType||"52"==e.form.invType?a("el-form-item",{attrs:{label:"红字申请单"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.negNativeNo,callback:function(t){e.$set(e.form,"negNativeNo","string"===typeof t?t.trim():t)},expression:"form.negNativeNo"}})],1):e._e()],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.summaryFlag?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.goodsName,placement:"top"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})],1):a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchGoodsName,disabled:e.summaryFlag,size:"small"},on:{select:e.handleSelectGoodsName,focus:function(a){return e.goodsNameClick(t.row.index)}},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"public-padding-right-input-normal",attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:function(a){return e.chooseCode(t.row.index)}},slot:"suffix"})])]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},on:{input:function(a){return e.numberChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,3107890338)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},on:{input:function(a){return e.unitPriceChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag&&(""==e.billDetailsData[0].rate||null==e.billDetailsData[0].rate),size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,3537148002)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag&&(""==e.billDetailsData[0].rate||null==e.billDetailsData[0].rate),size:"small"},on:{input:function(a){return e.moneyChange(t.row.index)}},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.summaryFlag,size:"small"},on:{change:function(a){return e.taxRateChange(t.row.index)}},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}},e._l(e.taxRateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{prop:"preferentialType",label:"优惠政策",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small",disabled:e.summaryFlag},on:{change:function(a){return e.preferentialTypeChange(t.row.index)}},model:{value:t.row.preferentialType,callback:function(a){e.$set(t.row,"preferentialType",a)},expression:"scope.row.preferentialType"}},e._l(e.preferentialTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:e.summaryFlag,size:"small"},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)]),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)]),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("caad"),a("d3b7"),a("25f0"),a("b0c0"),a("4de4"),a("ac1f"),a("5319"),a("b680"),a("3ca3"),a("ddb0"),a("c394")),l=a("c85c"),s=a("7e6f"),c=a("7b93"),u=a("b9aa"),d=a("ad11"),p=(a("e98e"),a("ed08")),h=a("c38a"),m={name:"qdApplyDetailShowModal",components:{ChooseCode:u["default"],MyElProgress:c["a"]},props:{},data:function(){return{showProgress:!1,functionName:"开具中:",form:{billNo:"",invType:"",detailFlag:"0",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",totalAmountWithoutTaxNoRed:"",negNativeNo:"",sourceInvNo:"",sourceInvCode:"",openData:"",billSource:"",billType:""},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"0",preferentialType:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],preferentialTypeOptions:[],taxRateOptions:[],openIdsArr:[],openRowsArr:[],originalTotalAmount:"",originalDetails:[],summaryFlag:!1,taxCodeSignRow:"",stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null}}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("preferential_type").then((function(t){e.preferentialTypeOptions=t.data})),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){},fillBillDialog:function(e){console.log("fillBillDialog"),this.openIdsArr.push(e.id),this.openRowsArr.push(e),this.form=Object(p["e"])(e),delete this.form.details,this.fplxdesc=this.selectDictLabel(this.invTypeOptions,e.invType),["81","82"].includes(this.form.invType)?this.$set(this.form,"mergeInvNo",this.form.sourceInvCode+this.form.sourceInvNo):this.$set(this.form,"mergeInvNo",this.form.sourceInvNo);var t=e.details;this.billDetailsData.length=0;for(var a=0;a<t.length;a++){var n=t[a];n.index=a,n.rate=null!=n.rate||void 0!=n.rate?this.specialRateFormalEcho(n):"",this.billDetailsData.push(n)}this.open=!0,this.title="红冲发票",this.getTaxNoSeller()},fillBillDialog2:function(e){var t=this;console.log("fillBillDialog2"),Object(r["s"])(e).then((function(e){if(200==e.code){var a=e.data;"1"==a.detailFlag?t.summaryFlag=!0:t.summaryFlag=!1,t.form=Object(p["e"])(a),t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),["81","82"].includes(t.form.invType)?t.$set(t.form,"mergeInvNo",t.form.sourceInvCode+t.form.sourceInvNo):t.$set(t.form,"mergeInvNo",t.form.sourceInvNo);var n=a.details;t.originalDetails=Object(p["e"])(n),t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=null!=o.rate||void 0!=o.rate?t.specialRateFormalEcho(o):"",t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag="1",t.open=!0,t.title="红冲发票"}else t.msgError(e.msg)}))},specialRateFormalEcho:function(e){return"1"==e.preferentialFlag&&["免税","不征税"].includes(e.preferentialFlag)?e.preferentialType:e.rate.toString()},querySearchBuyer:function(e,t){var a=this;if(""!=e){var n={name:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyName);t(r)}))}else{var i=[];t(i)}},querySearchBuyerByTaxno:function(e,t){var a=this;if(""!=e){var n={taxNo:e};Object(d["a"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].taxNo;a.buyerSearchData=n.rows;var o=a.buyerSearchData,r=""==e?[]:o.filter(a.indexOfBuyTaxno);t(r)}))}else{var i=[];t(i)}},handleSelectBuyer:function(e){this.form.buyTaxNo=e.taxNo,this.form.buyName=e.name,this.form.buyAddrTel=e.addrTel,this.form.buyBankAccount=e.bankAccount},handleSelectGoods:function(e){},goodsNameClick:function(e){this.taxCodeSignRow=e},querySearchGoodsName:function(e,t){var a=this;if(this.goodsNameInputData=e,""!=e){var n={name:e};Object(d["b"])(n).then((function(n){for(var i=0;i<n.rows.length;i++)n.rows[i].value=n.rows[i].name;a.goodsNameSearchData=n.rows;var o=a.goodsNameSearchData,r=""==e?[]:o.filter(a.indexOfGoodsName);t(r)}))}else{var i=[];t(i)}},handleSelectGoodsName:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation=""==e.goodsNameAbbreviation||null==e.goodsNameAbbreviation?"":"*"+e.goodsNameAbbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.taxCode,this.billDetailsData[this.taxCodeSignRow].standard=e.standard,this.billDetailsData[this.taxCodeSignRow].unit=e.unit,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},indexOfBuyName:function(e){return-1!=e.name.indexOf(this.form.buyName)},indexOfBuyTaxno:function(e){return-1!=e.taxNo.indexOf(this.form.buyTaxNo)},indexOfGoodsName:function(e){return-1!=e.name.indexOf(this.billDetailsData[this.taxCodeSignRow].goodsName)},numberChange:function(e){if(this.isNumberStr(this.billDetailsData[e].number)){if(parseFloat(this.billDetailsData[e].number)>=0)return this.msgError("红字发票的商品数量不能为正数"),void(this.billDetailsData[e].number="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz){if(""!=a&&null!=a)this.billDetailsData[e].amountWithTax=(parseFloat(a)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8);else if(""!=i&&null!=i){if(parseFloat(i)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(i)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)}}else if(""!=n&&null!=n)this.billDetailsData[e].amountWithoutTax=(parseFloat(n)*parseFloat(t)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8);else if(""!=o&&null!=o){if(parseFloat(o)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/parseFloat(t)).toFixed(8),this.billDetailsData[e].taxAmount=(parseFloat(o)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(o)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)}this.judgeExistPNLine(e),this.useCalc()}},unitPriceChange:function(e){if("-"!=this.billDetailsData[e].taxPrice&&"-"!=this.billDetailsData[e].withoutTaxPrice){if(parseFloat(this.billDetailsData[e].taxPrice)<0||parseFloat(this.billDetailsData[e].withoutTaxPrice)<0)return this.msgError("单价不能是负数"),this.billDetailsData[e].taxPrice="",void(this.billDetailsData[e].withoutTaxPrice="");var t=this.billDetailsData[e].number,a=this.billDetailsData[e].taxPrice,n=this.billDetailsData[e].withoutTaxPrice,i=this.billDetailsData[e].amountWithTax,o=this.billDetailsData[e].amountWithoutTax,r=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;r="-2"==r||"-1"==r?"0":r,"1"==this.hsbz?""!=a&&null!=a&&(""!=t&&null!=t?(this.billDetailsData[e].amountWithTax=(parseFloat(t)*parseFloat(a)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithTax)/(parseFloat(r)+100)*parseFloat(r)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=((parseFloat(this.billDetailsData[e].amountWithTax)-parseFloat(this.billDetailsData[e].taxAmount))/parseFloat(t)).toFixed(8),this.billDetailsData[e].amountWithoutTax=(parseFloat(this.billDetailsData[e].withoutTaxPrice)*parseFloat(t)).toFixed(2)):""!=t&&null!=t||""==i||null==i||(this.billDetailsData[e].number=(parseFloat(i)/parseFloat(a)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=(parseFloat(o)/(parseFloat(i)/parseFloat(a))).toFixed(8))):""!=n&&null!=n&&(""!=t&&null!=t?(this.billDetailsData[e].amountWithoutTax=(parseFloat(t)*parseFloat(n)).toFixed(2),this.billDetailsData[e].taxAmount=(parseFloat(this.billDetailsData[e].amountWithoutTax)*parseFloat(r)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].amountWithoutTax)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8)):""!=t&&null!=t||""==o||null==o||(this.billDetailsData[e].number=(parseFloat(o)/parseFloat(n)).toFixed(2),this.billDetailsData[e].taxPrice=(parseFloat(i)/(parseFloat(o)/parseFloat(n))).toFixed(8))),this.judgeExistPNLine(e),this.useCalc()}},moneyChange:function(e){if("-"!=this.billDetailsData[e].amountWithTax&&"-"!=this.billDetailsData[e].amountWithoutTax){if(parseFloat(this.billDetailsData[e].amountWithTax)>=0)return this.billDetailsData[e].amountWithTax="",void this.msgError("红字发票中商品金额不能大于0");if(parseFloat(this.billDetailsData[e].amountWithoutTax)>=0)return this.billDetailsData[e].amountWithoutTax="",void this.msgError("红字发票中商品金额不能大于0");var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;if(i="-2"==i||"-1"==i?"0":i,"1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2)):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(this.billDetailsData[e].taxAmount)+parseFloat(n)).toFixed(2)),""==t||null==t)this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="";else{if(parseFloat(a)/parseFloat(t)<0)return void this.msgError("单价不能是负数");this.billDetailsData[e].taxPrice=(parseFloat(a)/parseFloat(t)).toFixed(8),this.billDetailsData[e].withoutTaxPrice=(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(2)}this.judgeExistPNLine(e),this.useCalc()}},taxRateChange:function(e){var t=this.billDetailsData[e].number,a=(this.billDetailsData[e].taxPrice,this.billDetailsData[e].withoutTaxPrice,this.billDetailsData[e].amountWithTax),n=this.billDetailsData[e].amountWithoutTax,i=this.specialRateFormal(this.billDetailsData[e].rate);this.billDetailsData[e].taxAmount;i="-2"==i||"-1"==i?"0":i,""==a&&""==n||("1"==this.hsbz?(this.billDetailsData[e].taxAmount=(parseFloat(a)/(parseFloat(i)+100)*parseFloat(i)).toFixed(2),this.billDetailsData[e].amountWithoutTax=(parseFloat(a)-parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].withoutTaxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithoutTax)/parseFloat(t)).toFixed(8):""):(this.billDetailsData[e].taxAmount=(parseFloat(n)*parseFloat(i)/100).toFixed(2),this.billDetailsData[e].amountWithTax=(parseFloat(n)+parseFloat(this.billDetailsData[e].taxAmount)).toFixed(2),this.billDetailsData[e].taxPrice=""!=t&&null!=t?(parseFloat(this.billDetailsData[e].amountWithTax)/parseFloat(t)).toFixed(8):"")),this.useCalc()},preferentialTypeChange:function(e){this.billDetailsData[e].preferentialType?(["免税","不征税"].includes(this.billDetailsData[e].preferentialType)&&(this.billDetailsData[e].rate="0","免税"==this.billDetailsData[e].preferentialType?this.billDetailsData[e].taxZeroRate="1":this.billDetailsData[e].taxZeroRate="2"),this.billDetailsData[e].preferentialFlag="1",this.billDetailsData[e].taxZeroRate=""):(this.billDetailsData[e].preferentialFlag="0",this.billDetailsData[e].taxZeroRate=""),this.billDetailsData[e].preferentialNote=this.billDetailsData[e].preferentialType},calcTotalTaxAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.taxAmount&&(t+=parseFloat(n.taxAmount))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmountWithoutTax:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithoutTax&&(t+=parseFloat(n.amountWithoutTax))}}catch(i){a.e(i)}finally{a.f()}return t},calcTotalAmount:function(){var e,t=0,a=Object(o["a"])(this.billDetailsData);try{for(a.s();!(e=a.n()).done;){var n=e.value;""!=n.amountWithTax&&(t+=parseFloat(n.amountWithTax))}}catch(i){a.e(i)}finally{a.f()}return parseFloat(t)<0?this.redInvoiceFlag=!0:this.redInvoiceFlag=!1,t},useCalc:function(){this.form.totalAmountWithoutTax=parseFloat(this.calcTotalAmountWithoutTax()).toFixed(2),this.form.totalTaxAmount=parseFloat(this.calcTotalTaxAmount()).toFixed(2),this.form.totalAmount=parseFloat(this.calcTotalAmount()).toFixed(2)},judgeExistPNLine:function(e){for(var t=!1,a=0;a<this.billDetailsData.length;a++)if(parseFloat(this.billDetailsData[a].amountWithTax)*parseFloat(this.billDetailsData[e].amountWithTax)<0){t=!0;break}t&&(this.billDetailsData[e].number="",this.billDetailsData[e].taxPrice="",this.billDetailsData[e].withoutTaxPrice="",this.billDetailsData[e].amountWithTax="",this.billDetailsData[e].amountWithoutTax="",this.billDetailsData[e].taxAmount="",this.msgError("明细行内不能同时存在正负数明细行"))},specialRateFormal:function(e){return"不征税"==e||"免税"==e||""==e?0:e},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)},applyDetailShowDialogClose:function(){this.summaryFlag=!1},handleOpen:function(){var e=this;Math.abs(parseFloat(this.form.totalAmountWithoutTax))>Math.abs(parseFloat(this.form.totalAmountWithoutTaxNoRed))?this.msgError("总不含税金额不能超过剩余不含税金额"):this.$confirm("是否确认开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.openValid1()})).then((function(){e.sureStockInfo()}))},sureStockInfo:function(){var e=this;Object(h["g"])(100,"开具中",this,!1);for(var t=Object(p["e"])(this.billDetailsData),a=0;a<t.length;a++)"免税"==t[a].rate?(t[a].rate=0,t[a].preferentialFlag="1",t[a].preferentialType="免税",t[a].taxZeroRate="1"):"不征税"==t[a].rate?(t[a].rate=0,t[a].preferentialFlag="1",t[a].preferentialType="不征税",t[a].taxZeroRate="2"):(t[a].preferentialFlag="0",t[a].preferentialType="",t[a].taxZeroRate="");this.form.details=t,saveAndOpen(this.form).then((function(t){if(200==t.code){e.stockInfoOpen=!1,e.open=!1;var a=t.data,n={id:a.id,bizDate:a.bizDate};Object(s["c"])(n).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.msgSuccess(t.msg),e.$emit("updateInvoiceTable")):e.msgError(t.msg)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))}else e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openValid1:function(){var e=this,t=Object(s["a"])();return Promise.all([t]).then((function(t){return 1001==t[0].code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==t[0].code?(e.$confirm("全电账号需要刷脸验证，是否跳转到账号管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.open=!1,e.$router.push("/qdoutput/account")})).catch((function(){})),new Promise((function(){}))):void 0}))},validIsNumber:function(e){e.target.value=this.plusOrMinus(e.target.value)},addBillDetailRow:function(){if(this.judgeDetailsLength(this.form.invType,this.billDetailsData.length)){var e={index:this.billDetailsData.length,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",unit:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:"",preferentialFlag:"0",preferentialType:""};this.billDetailsData.push(e)}},delBillDetailRow:function(){if(1!=this.billDetailsData.length){var e=this.$refs.billDetailTable.getCheckboxRecords();if(e.length<1)this.msgError("请选择一行明细数据删除");else{for(var t=[],a=0;a<e.length;a++)"2"==e[a].discountFlag&&t.push(e[a].index);for(var n=this.billDetailsData.filter((function(a,n){for(var i=0;i<e.length;i++)if(e[i].index==n)return!1;return-1==t.indexOf(n-1)})),i=0;i<n.length;i++)"2"!=n[i].discountFlag||void 0!=n[i+1]&&"1"==n[i+1].discountFlag||(n[i].discountFlag="0"),n[i].index=i;this.billDetailsData=n,this.useCalc()}}else this.msgError("明细行不可为空")},chooseCode:function(e){0==this.billDetailsData[e].discountFlag&&(this.$refs.ChooseCode.openChoose(),this.taxCodeSignRow=e)},showChooseCode:function(e){this.billDetailsData[this.taxCodeSignRow].goodsNameAbbreviation="*"+e.abbreviation+"*",this.billDetailsData[this.taxCodeSignRow].taxTypeCode=e.mergeCode,this.billDetailsData[this.taxCodeSignRow].rate=e.rate.replace("%",""),this.taxRateChange(this.taxCodeSignRow)},getTaxNoSeller:function(){var e=this;Object(l["m"])().then((function(t){var a=t.nickName,n=t.sellers;if(null!=n&&0!=n.length){for(var i,o=0;o<n.length;o++)if("1"==n[o].status){i=n[o];break}if(null==i)for(var r=0;r<n.length;r++)if(n[r].drawer==a){i=n[r];break}null==i&&(i=n[0]),e.form.cashier=i.payee,e.form.checker=i.checker,e.form.invoicer=i.drawer}}))}}},f=m,b=(a("0481"),a("2877")),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},c37f:function(e,t,a){},c394:function(e,t,a){"use strict";a.d(t,"w",(function(){return r})),a.d(t,"r",(function(){return l})),a.d(t,"H",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"i",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"l",(function(){return h})),a.d(t,"j",(function(){return m})),a.d(t,"o",(function(){return f})),a.d(t,"c",(function(){return b})),a.d(t,"y",(function(){return g})),a.d(t,"I",(function(){return v})),a.d(t,"s",(function(){return y})),a.d(t,"b",(function(){return _})),a.d(t,"z",(function(){return x})),a.d(t,"p",(function(){return w})),a.d(t,"a",(function(){return k})),a.d(t,"J",(function(){return T})),a.d(t,"f",(function(){return D})),a.d(t,"m",(function(){return S})),a.d(t,"n",(function(){return O})),a.d(t,"C",(function(){return N})),a.d(t,"q",(function(){return P})),a.d(t,"d",(function(){return C})),a.d(t,"F",(function(){return A})),a.d(t,"A",(function(){return F})),a.d(t,"D",(function(){return I})),a.d(t,"B",(function(){return E})),a.d(t,"x",(function(){return R})),a.d(t,"G",(function(){return z})),a.d(t,"e",(function(){return j})),a.d(t,"v",(function(){return L})),a.d(t,"t",(function(){return q})),a.d(t,"u",(function(){return $})),a.d(t,"E",(function(){return M}));var n=a("b775"),i=a("4328"),o=a.n(i);function r(e){return Object(n["a"])({url:"/output/invoice/list",method:"get",params:e,paramsSerializer:function(e){return o.a.stringify(e,{arrayFormat:"repeat"})}})}function l(e){return Object(n["a"])({url:"/output/invoice/getInfo",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/output/invoice/signElectronic",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/output/invoice/downloadPdf",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/output/invoice/downloadPdfZip",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/output/invoice/downloadXml",method:"get",params:e})}function p(e){return Object(n["a"])({url:"/output/invoice/downloadOfd",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/output/invoice/downloadXmlZip",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/output/invoice/downloadOfdZip",method:"get",params:e})}function f(e){return Object(n["a"])({url:"/output/invoice/flagCancel",method:"post",params:e})}function b(e){return Object(n["a"])({url:"/output/invoice/checkEnableRed",method:"post",params:e})}function g(e){return Object(n["a"])({url:"/output/invoice/openRedInvoice",method:"post",params:e})}function v(e){return Object(n["a"])({url:"/output/invoice/rewrite",method:"post",params:e})}function y(e){return Object(n["a"])({url:"/output/invoice/getNeedRedInfo",method:"get",params:e})}function _(e){return Object(n["a"])({url:"/output/invoice/cancelInvoice",method:"post",params:e})}function x(e){return Object(n["a"])({url:"/output/invoice/powerCancelInvoice",method:"post",params:e})}function w(e){return Object(n["a"])({url:"/output/invoice/flagRed",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/output/invoice",method:"post",data:e})}function T(e){return Object(n["a"])({url:"/output/invoice/edit",method:"put",data:e})}function D(e){return Object(n["a"])({url:"/output/invoice/"+e,method:"delete"})}function S(e){return Object(n["a"])({url:"/output/invoice/export",method:"post",data:e,responseType:"blob"})}function O(e){return Object(n["a"])({url:"/output/invoice/exportDetail",method:"post",data:e,responseType:"blob"})}function N(e){return Object(n["a"])({url:"/output/invoice/pushEmail",method:"post",params:e})}function P(e){return Object(n["a"])({url:"/output/invoice/getInfoByInvCodeNo",method:"get",params:e})}function C(e){return Object(n["a"])({url:"/output/invoice/checkIfAllSplitBill",method:"get",params:e})}function A(e){return Object(n["a"])({url:"/output/invoice/releaseToBill",method:"post",params:e})}function F(e){return Object(n["a"])({url:"/output/invoice/printInvoice",method:"post",params:e})}function I(e){return Object(n["a"])({url:"/output/invoice/pushSms",method:"post",params:e})}function E(e){return Object(n["a"])({url:"/output/invoice/pushCard",method:"post",params:e})}function R(e){return Object(n["a"])({url:"/output/invoice/getPrintInvoice",method:"post",params:e})}function z(e){return Object(n["a"])({url:"/output/invoice/repairInvoice",method:"get",params:e})}function j(e){return Object(n["a"])({url:"/output/invoice/dealPrintResult",method:"post",params:e})}function L(e){return Object(n["a"])({url:"/output/invoice/getRedInvoiceByOriginal",method:"get",params:e})}function q(e){return Object(n["a"])({url:"/output/invoice/getOuputTaxnoTypeList",method:"post",params:e,paramsSerializer:function(e){return o.a.stringify(e,{arrayFormat:"repeat"})}})}function $(){return Object(n["a"])({url:"/output/invoice/getPrinterName",method:"get"})}function M(e){return Object(n["a"])({url:"/output/invoice/cancelQdInvoice",method:"post",params:e})}},c54b:function(e,t,a){},c6ce:function(e,t,a){},c786:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.statisticsLoading,expression:"statisticsLoading"}],staticClass:"app-container",staticStyle:{height:"100%"},attrs:{"element-loading-text":"拼命加载中"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"销方名称",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择销方名称",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"分机号",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择分机号",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"span-method":e.objectSpanMethod,stripe:""}},[a("el-table-column",{attrs:{prop:"comName",label:"销方名称",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"taxNo",label:"纳税人识别号",align:"center"}}),a("el-table-column",{attrs:{prop:"panMachineNo",label:"机器编号",align:"center"}}),a("el-table-column",{attrs:{prop:"panExtNo",label:"分机号",align:"center"}}),a("el-table-column",{attrs:{prop:"invoiceType",label:"票种",align:"center"}}),a("el-table-column",{attrs:{prop:"surplusTaxNum",label:"余量",align:"center"}})],1)],1)},i=[],o=(a("45bd"),a("ed08"),{name:"index.vue",data:function(){return{showSearch:!0,statisticsLoading:!1,tableData:[{comName:"公司一",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-1",invoiceType:"专票",surplusTaxNum:"200"},{comName:"公司一",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-1",invoiceType:"普票",surplusTaxNum:"200"},{comName:"公司一",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-1",invoiceType:"电专",surplusTaxNum:"200"},{comName:"公司一",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-1",invoiceType:"电普",surplusTaxNum:"200"},{comName:"公司二",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-2",invoiceType:"专票",surplusTaxNum:"1000"},{comName:"公司二",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-2",invoiceType:"普票",surplusTaxNum:"1000"},{comName:"公司二",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-2",invoiceType:"电专",surplusTaxNum:"1000"},{comName:"公司二",taxNo:"465464654654",panMachineNo:"5635635",panExtNo:"1-2",invoiceType:"电普",surplusTaxNum:"1000"}],queryParams:{invType:null,buyName:null},dateRange:[],invTypeOptions:[]}},created:function(){var e=this;this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data}));var t=this.$moment(new Date),a={beginTime:t.startOf("month").format("YYYY-MM-DD"),endTime:t.endOf("month").format("YYYY-MM-DD")};this.$set(this.dateRange,0,a.beginTime),this.$set(this.dateRange,1,a.endTime),this.handleQuery()},methods:{handleQuery:function(){},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;return t%4==0?4!=a&&5!=a?{rowspan:4,colspan:1}:{rowspan:1,colspan:1}:4!=a&&5!=a?{rowspan:0,colspan:0}:{rowspan:1,colspan:1}}}}),r=o,l=(a("f8c9"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"f1bf1ba4",null);t["default"]=s.exports},c7e9:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("ddb0"),a("d81d"),a("ac1f"),a("466d");var n=a("23f1"),i=function(e){return e.keys()},o=/\.\/(.*)\.svg/,r=i(n).map((function(e){return e.match(o)[1]}));t["default"]=r},c81a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",e._g(e._b({attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:0}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"small","label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选项名",prop:"label"}},[a("el-input",{attrs:{placeholder:"请输入选项名",clearable:""},model:{value:e.formData.label,callback:function(t){e.$set(e.formData,"label",t)},expression:"formData.label"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选项值",prop:"value"}},[a("el-input",{attrs:{placeholder:"请输入选项值",clearable:""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}},[a("el-select",{style:{width:"100px"},attrs:{slot:"append"},slot:"append",model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.dataTypeOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handelConfirm}},[e._v(" 确定 ")]),a("el-button",{on:{click:e.close}},[e._v(" 取消 ")])],1)],1)],1)},i=[],o=a("ed08"),r={components:{},inheritAttrs:!1,props:[],data:function(){return{id:100,formData:{label:void 0,value:void 0},rules:{label:[{required:!0,message:"请输入选项名",trigger:"blur"}],value:[{required:!0,message:"请输入选项值",trigger:"blur"}]},dataType:"string",dataTypeOptions:[{label:"字符串",value:"string"},{label:"数字",value:"number"}]}},computed:{},watch:{"formData.value":function(e){this.dataType=Object(o["j"])(e)?"number":"string"}},created:function(){},mounted:function(){},methods:{onOpen:function(){this.formData={label:void 0,value:void 0}},onClose:function(){},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var e=this;this.$refs.elForm.validate((function(t){t&&("number"===e.dataType&&(e.formData.value=parseFloat(e.formData.value)),e.formData.id=e.id++,e.$emit("commit",e.formData),e.close())}))}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},c85c:function(e,t,a){"use strict";a.d(t,"o",(function(){return r})),a.d(t,"j",(function(){return l})),a.d(t,"p",(function(){return s})),a.d(t,"z",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"m",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return h})),a.d(t,"s",(function(){return m})),a.d(t,"h",(function(){return f})),a.d(t,"i",(function(){return b})),a.d(t,"v",(function(){return g})),a.d(t,"y",(function(){return v})),a.d(t,"x",(function(){return y})),a.d(t,"w",(function(){return _})),a.d(t,"q",(function(){return x})),a.d(t,"e",(function(){return w})),a.d(t,"u",(function(){return k})),a.d(t,"f",(function(){return T})),a.d(t,"g",(function(){return D})),a.d(t,"b",(function(){return S})),a.d(t,"r",(function(){return O})),a.d(t,"k",(function(){return N})),a.d(t,"t",(function(){return P})),a.d(t,"n",(function(){return C})),a.d(t,"c",(function(){return A}));var n=a("b775"),i=a("4328"),o=a.n(i);function r(e){return Object(n["a"])({url:"/output/bill/list",method:"get",params:e,paramsSerializer:function(e){return o.a.stringify(e,{arrayFormat:"repeat"})}})}function l(e){return Object(n["a"])({url:"/output/bill/getInfo",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/output/bill/openInvoice",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/output/bill/validateBillEnableOpen",method:"get",params:e})}function u(){return Object(n["a"])({url:"/base/info/get",method:"get"})}function d(){return Object(n["a"])({url:"/output/taxno/getTaxNoSeller",method:"get"})}function p(){return Object(n["a"])({url:"/output/bill/checkBaseInfo",method:"get"})}function h(e){return Object(n["a"])({url:"/output/bill",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/output/bill/saveAndOpen",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/output/bill/flagOpen",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/output/qd/bill/flagOpen",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/output/bill",method:"put",data:e})}function v(e){return Object(n["a"])({url:"/output/bill/updateBillType",method:"put",data:e})}function y(e){return Object(n["a"])({url:"/output/bill/updateBillOpenMethod",method:"put",data:e})}function _(e){return Object(n["a"])({url:"/output/bill/updateBillNoDetails",method:"put",data:e})}function x(e){return Object(n["a"])({url:"/output/bill/recoveryFailBill",method:"post",data:e})}function w(e,t){var a={};if(e instanceof Array)a={ids:e};else{var i=[];i.push(e),a={ids:i}}return a.dateRange=t,Object(n["a"])({url:"/output/bill/remove",method:"post",data:a})}function k(e,t){var a={};if(e instanceof Array)a={ids:e};else{var i=[];i.push(e),a={ids:i}}return a.dateRange=t,Object(n["a"])({url:"/output/bill/synchGoodsCode",method:"post",data:a})}function T(e){return Object(n["a"])({url:"/output/bill/export",method:"post",data:e,responseType:"blob"})}function D(e){return Object(n["a"])({url:"/output/bill/exportDetail",method:"post",data:e,responseType:"blob"})}function S(e){return Object(n["a"])({url:"/output/bill/adjustError",method:"post",params:e})}function O(e,t){var a={};if(e instanceof Array)a={ids:e};else{var i=[];i.push(e),a={ids:i}}return a.dateRange=t,Object(n["a"])({url:"/output/bill/revert",method:"post",data:a})}function N(e){return Object(n["a"])({url:"/output/bill/getInfoLimitParam",method:"get",params:e})}function P(e){return Object(n["a"])({url:"/output/bill/splitMergePreview",method:"get",params:e})}function C(e){return Object(n["a"])({url:"/output/bill/importFromErp",method:"post",params:e})}function A(e){return Object(n["a"])({url:"/output/bill/batchSaveErpBill",method:"post",data:e})}},c881:function(e,t,a){},c893:function(module,__webpack_exports__,__webpack_require__){"use strict";var F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b85c"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("13d5"),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("38cf"),core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_16__),_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("c394"),_api_qdoutput_bill__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("7e6f"),_api_output_bill__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("c85c"),_api_output_redbill__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("722a"),_api_base_getTableColumns__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("c10b"),_redinvoice_components_redInvoiceInfoSelect__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("6f50f"),_views_output_components_totalRowTable__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("b526"),_components_applyRedInvoiceEditModal__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("ab09"),_components_applyDetailShowModal__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("0509"),_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("ed08"),_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("c38a"),_fptk_detailshow__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("1055"),js_cookie__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("a78e"),js_cookie__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_29__);__webpack_exports__["a"]={name:"Invoice",components:{RedInvoiceInfoSelect:_redinvoice_components_redInvoiceInfoSelect__WEBPACK_IMPORTED_MODULE_22__["default"],ApplyRedInvoiceEditModal:_components_applyRedInvoiceEditModal__WEBPACK_IMPORTED_MODULE_24__["default"],ApplyDetailShowModal:_components_applyDetailShowModal__WEBPACK_IMPORTED_MODULE_25__["default"],TotalRowTable:_views_output_components_totalRowTable__WEBPACK_IMPORTED_MODULE_23__["default"],FptkShow:_fptk_detailshow__WEBPACK_IMPORTED_MODULE_28__["default"]},data:function(){return{module:"invoice",columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:180,columnSort:0},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:150,columnSort:1},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:120,columnSort:2},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:120,columnSort:3},{label:"单据类型",prop:"billType",align:"center",show:!0,width:120,columnSort:4},{label:"发票类型",prop:"invType",align:"center",show:!0,width:120,columnSort:5},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:120,columnSort:6},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:7},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:120,columnSort:8},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:120,columnSort:9},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:120,columnSort:10},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:11},{label:"购方纳税人识别号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:12},{label:"购方开户账号",prop:"buyBankAccount ",align:"center",show:!0,width:220,columnSort:13},{label:"购方地址电话",prop:"buyAddrTel ",align:"center",show:!0,width:220,columnSort:14},{label:"购方邮箱",prop:"buyEmail ",align:"center",show:!0,width:220,columnSort:15},{label:"购方手机号码",prop:"buyTelNo ",align:"center",show:!0,width:220,columnSort:16},{label:"备注",prop:"note ",align:"center",show:!0,width:220,columnSort:17},{label:"收款人",prop:"cashier ",align:"center",show:!0,width:120,columnSort:18},{label:"复核人",prop:"checker",align:"center",show:!0,width:120,columnSort:19},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:120,columnSort:20},{label:"源正数发票代码",prop:"sourceinvCode",align:"center",show:!0,width:120,columnSort:21},{label:"源正数发票号码",prop:"sourceinvNo",align:"center",show:!0,width:120,columnSort:22},{label:"红冲标志",prop:"redFlag",align:"center",show:!0,width:120,columnSort:23},{label:"是否作废",prop:"cancelFlag",align:"center",show:!0,width:120,columnSort:24},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:120,columnSort:25},{label:"是否已打印",prop:"printedFlag",align:"center",show:!0,width:120,columnSort:26},{label:"是否已推送",prop:"pushedFlag",align:"center",show:!0,width:120,columnSort:27},{label:"回写标志",prop:"rewriteFlag",align:"center",show:!0,width:120,columnSort:28},{label:"pdf链接",prop:"pdfUrl",align:"center",show:!0,width:120,columnSort:29},{label:"密码区",prop:"pwdCode",align:"center",show:!0,width:120,columnSort:30},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:120,columnSort:31},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:120,columnSort:32},{label:"签章标志",prop:"signFlag",align:"center",show:!0,width:120,columnSort:33},{label:"记账类型",prop:"vouchType",align:"center",show:!0,width:120,columnSort:34},{label:"已记账标识",prop:"vouchFlag",align:"center",show:!0,width:120,columnSort:35},{label:"记账结果",prop:"vouchResult",align:"center",show:!0,width:120,columnSort:36}],tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,dateRange:[],showSearch:!0,total:0,invoiceList:[],flagRedopen:!1,title:"",open:!1,billSplitTypeOptions:[],invTypeOptions:[],detailFlagOptions:[],cancelApplyStatusOptions:[],redApplyStatusOptions:[],redFlagOptions:[],cancelFlagOptions:[],printedFlagOptions:[],pushedFlagOptions:[],rewriteFlagOptions:[],signFlagOptions:[],headTypeOptions:[],vouchFlagOptions:[],billSourceOptions:[],billTypeOptions:[],queryParams:{billNos:null,pageNum:1,pageSize:500,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:null,detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:"0",negNativeNo:null,invStatus:null,taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null,tdyslxdm:"",shopNo:null,totalAmountStart:"",totalAmountEnd:""},form:{},flagRedForm:{},rules:{},redRules:{invCode:[{required:!0,message:"发票代码不能为空",trigger:"blur"}],invNo:[{required:!0,message:"发票号码不能为空",trigger:"blur"}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],negNativeNo:[{required:!0,message:"红字申请单号不能为空",trigger:"blur"}]},taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],invoiceDetailLoading:!1,redOrCancelIdsArr:[],redOrCancelRowsArr:[],redOrCancelIndex:0,showProgress:!1,functionName:"",loadingTime:null,checkboxClick:!1,sortParam:{column:null,columnOrder:null},operationRowArr:[],operationIndex:0,websocket:null,opsLength:0,chechNum:0,printTips:[],printNum:0,isDetail:null,printSettingOpen:!1,printSettingForm:{starttop:null,startleft:null},printSureOpen:!1,printInvType:null,printInvCode:null,printInvNo:null,printSendDataArr:[],wsServe:null,wsServeConnect:!1,newPrintSureOpen:!1,newPrintInvType:null,newPrintInvCode:null,newPrintInvNo:null,printAfter:[],redInvoiceOpen:!1,redInvoiceList:[],moreSearch:{open:!1},qdCancelDialog:{open:!1,form:{id:"",reason:""},rules:{reason:[{required:!0,message:"作废原因不能为空",trigger:["blur","change"]}]}}}},computed:{totalTableData:function(){var e=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);return 0==e.length&&(e=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.invoiceList)),e}},created:function(){var e=this,t=this.$moment(new Date);this.dateRange=[t.startOf("month").format("YYYY-MM-DD"),t.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.getList()})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data})),this.getDicts("approve_status").then((function(t){e.cancelApplyStatusOptions=t.data})),this.getDicts("approve_status").then((function(t){e.redApplyStatusOptions=t.data})),this.getDicts("red_flag").then((function(t){e.redFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.cancelFlagOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.printedFlagOptions=t.data})),this.getDicts("invoice_push").then((function(t){e.pushedFlagOptions=t.data})),this.getDicts("rewrite_status").then((function(t){e.rewriteFlagOptions=t.data})),this.getDicts("invoice_sign_status").then((function(t){e.signFlagOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("vouch_flag").then((function(t){e.vouchFlagOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(F_ideaGit_suteng_standard_zzh_ui_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.pageSizes.push(parseFloat(o.dictValue))}}catch(r){i.e(r)}finally{i.f()}})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data}));var a={module:this.module};Promise.all([Object(_api_base_getTableColumns__WEBPACK_IMPORTED_MODULE_21__["b"])(a),Object(_api_base_getTableColumns__WEBPACK_IMPORTED_MODULE_21__["a"])(a)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].width||("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:"invCode"==e.columnsArr[n].prop||"invNo"==e.columnsArr[n].prop?e.columnsArr[n].width=150:e.columnsArr[n].width=120)}})),this.printSettingForm.startleft=null==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("startleft")||void 0==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("startleft")?"":js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("startleft"),this.printSettingForm.starttop=null==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("starttop")||void 0==js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("starttop")?"":js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.get("starttop")},mounted:function mounted(){var _this2=this;if(this.tableHeight=this.calcTableHeight(),window.onresize=function(){_this2.tableHeight=_this2.calcTableHeight()},window.WebSocket){null!=this.websocket&&(console.log("已开页面的"),this.websocket.close()),this.websocket=new WebSocket("ws://127.0.0.1:50926/SysSvr");var $this=this;this.websocket.onmessage=function(event){console.log(event.data);var eventDate=event.data,eventDateJson=eval("("+eventDate+")"),code=eventDateJson.code,msg=eventDateJson.cmd,data=eventDateJson.data,detailMsg=data.replace("[","").replace("]","");detailMsg=detailMsg.substring(0,detailMsg.lastIndexOf("}")+1);var detailEventDateJson=eval("("+JSON.stringify(detailMsg)+")");if("print"!=msg){if(""==detailEventDateJson)return;detailEventDateJson=JSON.parse(detailEventDateJson);var startleft=detailEventDateJson.startleft,starttop=detailEventDateJson.starttop;void 0!=startleft&&void 0!=starttop&&($this.printSettingForm.startleft=startleft,$this.printSettingForm.starttop=starttop)}var showHtml="";if(console.log(_this2.printTips.length),$this.printNum==$this.printTips.length&&"print"==msg){for(var i=0;i<$this.printTips.length;i++)showHtml+=$this.printTips[i]+"请求打印成功，等待确认!<br/>";_this2.printTips.length=0,_this2.printNum=0,_this2.$message({dangerouslyUseHTMLString:!0,message:showHtml,type:"success"})}},this.websocket.onclose=function(e){console.log("断开连接"+e.data)},this.websocket.onopen=function(e){console.log("建立连接"+e.data)};var wsImpl=window.WebSocket||window.MozWebSocket;this.wsServe=new wsImpl("ws://127.0.0.1:19735/"),this.wsServe.onopen=function(e){_this2.wsServeConnect=!0,console.log("连接成功")},this.wsServe.onmessage=function(e){var t=_this2.printAfter.shift();t.content=JSON.parse(e.data.substring(5)).data,0==_this2.printAfter.length&&(_this2.getList(),_this2.showProgress=!1,clearInterval(_this2.loadingTime)),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["e"])(t).then((function(e){200==e.code?_this2.msgSuccess("[发票代码:"+t.invCode+",发票号码:"+t.invNo+"]打印成功"):_this2.msgError("[发票代码:"+t.invCode+",发票号码:"+t.invNo+"]打印失败："+e.msg)}))},this.wsServe.onclose=function(e){console.log("连接关闭了"),_this2.wsServeConnect=!1}}else this.msgError("浏览器不支持WebSocket")},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()},this.queryParams.cancelFlag=this.$route.params.cancelFlag,this.queryParams.redFlag=this.$route.params.redFlag,(this.$route.params.cancelFlag||this.$route.params.redFlag)&&this.getList()},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.invoiceMainTable.doLayout()}))},getList:function(){var e,t=this;this.loading=!0;var a=Object.assign(Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.queryParams),Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.sortParam));a.invType?a.invTypes=new Array(a.invType):a.invTypes=this.invTypeOptions.reduce((function(e,t){return e.push(t.dictValue),e}),[]),20==(null===a||void 0===a||null===(e=a.invNo)||void 0===e?void 0:e.length)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["w"])(this.addDateRange(a,this.dateRange)).then((function(e){t.invoiceList=e.rows,t.total=e.total,t.loading=!1}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},cancelApplyStatusFormat:function(e,t){return this.selectDictLabel(this.cancelApplyStatusOptions,e.cancelApplyStatus)},redApplyStatusFormat:function(e,t){return this.selectDictLabel(this.redApplyStatusOptions,e.redApplyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},printedFlagFormat:function(e,t){return this.selectDictLabel(this.printedFlagOptions,e.printedFlag)},pushedFlagFormat:function(e,t){if(null!=e.pushedFlag&&""!=e.pushedFlag){if(-1==e.pushedFlag.indexOf("-"))return"0"==e.pushedFlag?"未推送":"4"==e.pushedFlag?"无需推送":"推送成功";for(var a=e.pushedFlag.split(","),n="",i=0;i<a.length;i++)a[i].indexOf("1")>=0?n+="邮箱":a[i].indexOf("2")>=0?n+="卡包":n+="短信",-1==a[i].indexOf("-")?n+="推送成功;":n+="推送失败;";return n}},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},rewriteFlagFormat:function(e,t){return this.selectDictLabel(this.rewriteFlagOptions,e.rewriteFlag)},signFlagFormat:function(e,t){return this.selectDictLabel(this.signFlagOptions,e.signFlag)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},vouchFlagFormat:function(e,t){return this.selectDictLabel(this.vouchFlagOptions,e.vouchFlag)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,billGuid:null,billNo:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,billType:null,billSplitType:null,invType:null,detailFlag:null,cancelApplyStatus:null,redApplyStatus:null,billSource:null,bizDate:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceinvCode:null,sourceinvNo:null,redFlag:null,cancelFlag:"0",negNativeNo:null,invStatus:"0",taxnoId:null,printedFlag:null,pushedFlag:null,rewriteFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,headType:null,vouchType:null,vouchFlag:null,vouchResult:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.resetForm("moreSearchForm"),this.queryParams.billNos="",this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},showInvoiceInfo:function(e){var t=this;this.$vLoading.show(),this.reset();var a=this.rows;void 0==e.id&&(e=a[0]),this.reset();var n=e.id||this.ids,i=e.invDate,o={id:n,invDate:i};this.$refs.showModal.fillBillDialog(o).then((function(){t.$vLoading.hide()})).catch((function(){t.$vLoading.hide()}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["J"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagRedForm:function(){var e=this;this.$refs["flagRedForm"].validate((function(t){t&&Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["p"])(e.flagRedForm).then((function(t){"200"==t.code?(e.msgSuccess(t.msg),e.flagRedopen=!1,e.getList()):e.msgError(t.msg)}))}))},flagRedCancel:function(){this.flagRedopen=!1,this.resetRed()},resetRed:function(){this.flagRedForm={},this.resetForm("flagRedForm")},openValid1:function(){var e,t=this,a=!1;return["81","82","85","86"].includes(this.redOrCancelRowsArr[0].invType)?(e=Object(_api_qdoutput_bill__WEBPACK_IMPORTED_MODULE_18__["a"])(),a=!0):e=Object(_api_output_bill__WEBPACK_IMPORTED_MODULE_19__["d"])(),Promise.all([e]).then((function(e){return 1001==e[0].code?(t.showProgress=!1,clearInterval(t.loadingTime),t.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==e[0].code?(t.showProgress=!1,clearInterval(t.loadingTime),t.$confirm("".concat(a?"全电账号需要刷脸验证，是否跳转到账号管理页面?":"您还未启用税盘，是否跳转到终端启用管理页面?"),"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({name:"Usemanager",params:{isQd:a}})})).catch((function(){})),new Promise((function(){}))):void 0}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},VATApplicationFormValid:function(e){var t=this;if("0"==e.invType||"52"==e.invType){var a={sourceInvCode:e.invCode,sourceInvNo:e.invNo,openDate:e.invDate};this.invoiceDetailLoading=!0,Object(_api_output_redbill__WEBPACK_IMPORTED_MODULE_20__["f"])(a).then((function(a){t.invoiceDetailLoading=!1;var n=a.data;if(null!=n)t.$refs.detailShowModal.fillBillDialog(n);else{t.$refs.infoModal.redInfoDialogShow();var i={checkedApply:"2",checkedBuyer:"0",sourceInvCode:e.invCode,sourceInvNo:e.invNo,sourceInvDate:e.invDate};t.$refs.infoModal.setRedInfo(i)}}))}else{var n={invCode:e.invCode,invNo:e.invNo,invDate:e.invDate,invCodeNo:e.invCodeNo};this.$refs.detailShowModal.fillBillDialog2(n)}},redInvoiceIng:function(e){var t=this,a={id:e.id,invDate:e.invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["y"])(a).then((function(e){200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg),t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0}))},handleRed:function(e){var t=this,a=e.id||this.ids;this.redOrCancelIdsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=e.id||this.rows,i=[];if(this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(n).filter((function(e){return"1"!=e.cancelFlag||(i.push(e.billNo),!1)})),0!=this.redOrCancelRowsArr.length||0==i.length)if(0!=i.length&&this.msgError("发票编号为["+i.join(",")+"]的发票是作废票，作废票不允许红冲，已过滤"),["81","82","85","86"].includes(this.redOrCancelRowsArr[0].invType)){this.msgError("数电发票请到数电红字信息表中申请红字通知单");var o=this.redOrCancelRowsArr[0].invType;this.$router.push({name:"Qdredbill",params:{invCode:["81","82"].includes(o)?"":this.redOrCancelRowsArr[0].invCode,invNo:["81","82"].includes(o)?this.redOrCancelRowsArr[0].invCode+this.redOrCancelRowsArr[0].invNo:this.redOrCancelRowsArr[0].invNo,invType:this.redOrCancelRowsArr[0].invType}})}else this.$confirm("是否确认对所选发票进行红冲?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.splitValid("1")})).then((function(){return t.checkAmountEnableRed(t.redOrCancelRowsArr[0])})).then((function(){t.VATApplicationFormValid(t.redOrCancelRowsArr[0])})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.message)}));else this.msgError("所选发票全为作废票，作废票不允许红冲")},handlePowerRed:function(e){var t=this,a=e.id||this.ids;this.redOrCancelIdsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=void 0!=e.id?e:this.rows,i=[];this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(n).filter((function(e){return"1"!=e.cancelFlag||(i.push(e.billNo),!1)})),0!=this.redOrCancelRowsArr.length||0==i.length?(0!=i.length&&this.msgError("发票编号为["+i.join(",")+"]的发票是作废票，作废票不允许红冲，已过滤"),this.$confirm("是否确认对所选发票进行强制红冲?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){new Date(t.rows[0].invDate).getFullYear()<(new Date).getFullYear()||new Date(t.rows[0].invDate).getFullYear()==(new Date).getFullYear()&&(new Date(t.rows[0].invDate).getMonth(),(new Date).getMonth())})).then((function(){return t.checkAmountEnableRed(t.redOrCancelRowsArr[0])})).then((function(){t.VATApplicationFormValid(t.redOrCancelRowsArr[0])})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.message)}))):this.msgError("所选发票全为作废票，作废票不允许红冲")},checkAmountEnableRed:function(e){var t=this,a=e.id,n=e.invDate,i=e.invCode,o=e.invNo,r={id:a,invDate:n,invCode:i,invNo:o};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["c"])(r).then((function(e){if(200!=e.code)return t.msgError(e.msg),new Promise((function(){}))}))},cancelInvoiceList:function(){var e=this;this.redOrCancelIndex++,1!=this.redOrCancelIndex&&this.$refs.myProgress.progressGrow(parseInt(this.redOrCancelIndex/this.redOrCancelIdsArr.length*100)),this.cancelInvoice(this.redOrCancelRowsArr[this.redOrCancelIndex-1]).then((function(t){"200"==t.code?e.msgSuccess("第"+e.redOrCancelIndex+"张单据"+t.msg):e.msgError("第"+e.redOrCancelIndex+"张单据作废失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.redOrCancelIndex/e.redOrCancelIdsArr.length*100)),e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成"),e.getList()):e.cancelInvoiceList()})).catch((function(t){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成")):e.$confirm(t.message+"是否继续作废发票?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成")):e.cancelInvoiceList()})).catch((function(){e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("作废完成")}))}))},cancelInvoice:function(e){var t=e.id,a={id:t,beginTime:this.dateRange[0],endTime:this.dateRange[1]};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["b"])(a)},handleCancel:function(e){var t=this;e.id||this.ids;this.redOrCancelIdsArr=[];var a=void 0!=e.id?e:this.rows;this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=[],i=[],o=[],r=[],l=[];this.redOrCancelRowsArr=this.redOrCancelRowsArr.filter((function(e){if("51"==e.invType||"52"==e.invType)n.push(e.billNo);else if("1"==e.cancelFlag)o.push(e.billNo);else if(["81","82"].includes(e.invType))i.push(e.billNo);else{if(["85","86"].includes(e.invType))return l.push(e.billNo),t.redOrCancelIdsArr.push(e.id),!0;if("2"!=e.redFlag)return t.redOrCancelIdsArr.push(e.id),!0;r.push(e.billNo)}return!1})),0==i.length?0!=this.redOrCancelRowsArr.length||0==n.length?0!=this.redOrCancelRowsArr.length||0==o.length?0!=this.redOrCancelIdsArr.length||0==r.length?l.length&&l.length!=this.redOrCancelRowsArr.length?this.msgError("数电纸质发票不能与销项发票一起作废"):(0!=n.length&&this.msgError("发票编号为["+n.join(",")+"]的发票为电子发票，不允许作废，已过滤"),0!=o.length&&this.msgError("发票编号为["+o.join(",")+"]的发票是作废票，不允许再次作废，已过滤"),0!=r.length&&this.msgError("发票编号为["+r.join(",")+"]的发票是被红冲票，不允许作废，已过滤"),this.$confirm("是否确认对所选发票进行作废?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){return t.splitValid("2")})).then((function(){l.length?(t.qdCancelDialog.open=!0,t.qdCancelDialog.form.id=id):(t.functionName="作废中:",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.redOrCancelIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.cancelInvoiceList())})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0}))):this.msgError("所选发票全为被红冲票，被红冲票不允许作废"):this.msgError("所选发票全为作废票，作废票不允许再次作废"):this.msgError("所选发票全为电子发票，电子发票不允许作废"):this.msgError("所选发票包含数电发票，数电发票不允许作废")},powerCancelInvoiceList:function(){var e=this;this.redOrCancelIndex++,1!=this.redOrCancelIndex&&this.$refs.myProgress.progressGrow(parseInt(this.redOrCancelIndex/this.redOrCancelIdsArr.length*100)),this.powerCancelInvoice(this.redOrCancelRowsArr[this.redOrCancelIndex-1]).then((function(t){"200"==t.code?e.msgSuccess("第"+e.redOrCancelIndex+"张单据"+t.msg):e.msgError("第"+e.redOrCancelIndex+"张单据强制作废失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.redOrCancelIndex/e.redOrCancelIdsArr.length*100)),e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.getList()):e.powerCancelInvoiceList()})).catch((function(t){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("强制作废完成")):e.$confirm(t.message+"是否继续强制作废发票?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.redOrCancelIndex>=e.redOrCancelIdsArr.length?(e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("强制作废完成")):e.powerCancelInvoiceList()})).catch((function(){e.showProgress=!1,e.redOrCancelIdsArr.length=0,e.redOrCancelIndex=0,e.msgSuccess("强制作废完成")}))}))},powerCancelInvoice:function(e){var t=e.id,a={id:t,beginTime:this.dateRange[0],endTime:this.dateRange[1]};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["z"])(a)},handlePowerCancel:function(e){var t=this;e.id||this.ids;this.redOrCancelIdsArr=[];var a=void 0!=e.id?e:this.rows;this.redOrCancelRowsArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(a);var n=[],i=[],o=[],r=[];this.redOrCancelRowsArr=this.redOrCancelRowsArr.filter((function(e){if("51"==e.invType||"52"==e.invType)n.push(e.billNo);else if("1"==e.cancelFlag)o.push(e.billNo);else if(["81","82","85","86"].includes(e.invType))i.push(e.billNo);else{if("2"!=e.redFlag)return t.redOrCancelIdsArr.push(e.id),!0;r.push(e.billNo)}return!1})),0==i.length?0!=this.redOrCancelRowsArr.length||0==n.length?0!=this.redOrCancelRowsArr.length||0==o.length?0!=this.redOrCancelIdsArr.length||0==r.length?(0!=n.length&&this.msgError("发票编号为["+n.join(",")+"]的发票为电子发票，不允许作废，已过滤"),0!=o.length&&this.msgError("发票编号为["+o.join(",")+"]的发票是作废票，不允许再次作废，已过滤"),0!=r.length&&this.msgError("发票编号为["+r.join(",")+"]的发票是被红冲票，不允许作废，已过滤"),this.$confirm("是否确认对所选发票进行强制作废?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.openValid1()})).then((function(){t.functionName="作废中:",t.showProgress=!0,t.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.redOrCancelIdsArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),t.powerCancelInvoiceList()})).catch((function(e){t.showProgress=!1,t.redOrCancelIdsArr.length=0,t.redOrCancelIndex=0,void 0!=e.message&&t.msgError(e.measure)}))):this.msgError("所选发票全为被红冲票，被红冲票不允许作废"):this.msgError("所选发票全为作废票，作废票不允许再次作废"):this.msgError("所选发票全为电子发票，电子发票不允许作废"):this.msgError("所选发票包含数电发票，数电发票不允许作废")},handleRelease:function(e){var t=this;this.operationIndex=0,this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var a=[];this.operationRowArr=this.operationRowArr.filter((function(e){return("0"==e.cancelFlag&&"0"==e.redFlag||"1"==e.redFlag)&&a.push(e.billNo),"1"==e.cancelFlag||"2"==e.redFlag})),0!=this.operationRowArr.length?(a.length>0&&this.msgError("发票编号为["+a.join(",")+"]的发票是正常发票或红冲票，不能执行释放操作，已过滤"),this.showProgress=!0,this.functionName="释放中:",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationRowArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.releaseLogic()):this.msgError("所选发票包含正常发票或红冲票，不能执行释放操作")},releaseLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["F"])(t).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.releaseLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList()}))},flagRed:function(){var e=this,t={ids:this.ids.join(","),beginTime:this.dateRange[0]+" 00:00:00",endTime:this.dateRange[1]+" 23:59:59"};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["d"])(t).then((function(t){if(1==t.data){var a=e.rows,n=a[0];e.flagRedopen=!0,e.$nextTick((function(){e.$refs.flagRedForm.clearValidate()})),e.flagRedForm.id=n.id,e.flagRedForm.invType=n.invType,e.flagRedForm.sourceInvDate=n.invDate,e.flagRedForm.sourceInvCode=n.invCode,e.flagRedForm.sourceInvNo=n.invNo}else e.msgError("不允许拆分后部分发票红冲")}))},flagCancel:function(){var e=this;this.operationIndex=0,this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var t=[];this.operationRowArr=this.operationRowArr.filter((function(e){return"51"!=e.invType&&"52"!=e.invType||(t.push(e.billNo),!1)})),0!=this.operationRowArr.length?(0!=t.length&&this.msgError("发票编号为["+t.join(",")+"]的发票为电子发票，不允许作废，已过滤"),this.$confirm("您确定要标记作废当前发票吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.splitValid("2")})).then((function(){e.showProgress=!0,e.functionName="作废中:",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.flagCancelLogic()})).then((function(e){}))):this.msgError("所选发票全为电子发票，电子发票不允许作废")},flagCancelLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["o"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号为:"+e.operationRowArr[e.operationIndex-1].billNo+"的发票作废成功"):e.msgError("单据编号为:"+e.operationRowArr[e.operationIndex-1].billNo+"的发票"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.flagCancelLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1)})).catch((function(t){e.operationIndex<e.operationRowArr.length?e.flagCancelLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1)}))},rewrite:function(){var e=this,t=this.rows,a=t[0];a.id,a.invDate;this.$confirm("您确定要回写当前发票吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(e.rows),e.functionName="回写中:",e.showProgress=!0,e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.rewriteLogic()})).catch((function(){}))},rewriteLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["I"])(t).then((function(t){"200"==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据回写失败："+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()})).catch((function(t){e.operationIndex>=e.operationRowArr.length?(e.showProgress=!1,e.operationRowArr=[],e.redOrCancelIndex=0,e.getList()):e.rewriteLogic()}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除已开发票管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["f"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.queryParams);t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1],t.idsArr=this.ids,this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(10,"导出中",e),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["m"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"已开发票.xls",e)})).catch((function(){}))},handleExportDetail:function(){var e=this,t=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.queryParams);t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1],t.idsArr=this.ids,this.$confirm("是否确认导出所有已开发票管理数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(10,"导出中",e),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["n"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"已开发票明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.invoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceList,"invoiceMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.invoiceList,"invoiceMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},submitRedInfoP:function(e){this.$refs.editModal.billDialogShow(e),this.$refs.editModal.invoiceApplicationForm(),this.$refs.editModal.editDialogTitle("1")},updateInvoiceTable:function(){this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;if(t.row_index=a,"1"==t.redFlag)return"red-flag-row"},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},validIsNumber:function(e){e.target.value=Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},printInvoice:function(){var e=this;this.printSendDataArr=[];for(var t=0,a=this.rows.length;t<a;t++)if("51"==this.rows[t].invType||"52"==this.rows[t].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.operationRowArr.sort(this.invNoAsc()),parseInt(this.operationRowArr[this.operationRowArr.length-1].invNo)-parseInt(this.operationRowArr[0].invNo)>this.operationRowArr.length?this.$confirm("所选发票的发票号码不连贯，是否继续打印?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.printNum=e.rows.length,e.isDetail="0",e.printInvoiceLogic()})).catch((function(){})):(this.printNum=this.rows.length,this.isDetail="0",this.printInvoiceLogic())},printInvoiceLogic:function(){console.log("这是一次"),this.operationIndex++,this.operationIndex<=this.operationRowArr.length?(this.printInvType=this.selectDictLabel(this.invTypeOptions,this.operationRowArr[this.operationIndex-1].invType),this.printInvCode=this.operationRowArr[this.operationIndex-1].invCode,this.printInvNo=this.operationRowArr[this.operationIndex-1].invNo,"1"==this.isDetail&&"0"==this.operationRowArr[this.operationIndex-1].detailFlag&&(this.printInvoiceLogic(),this.msgError("单据编号为["+this.operationRowArr[this.operationIndex-1].billNo+"]的发票，无清单标志，不可打印清单")),1==this.operationIndex?this.printSureOpen=!0:(this.printSureOpen=!1,this.printSure())):(this.printSureOpen=!1,this.operationIndex=0,this.operationRowArr=[])},printSure:function(){var e=this;this.printSureOpen=!1;var t={id:this.operationRowArr[this.operationIndex-1].id,bizDate:this.operationRowArr[this.operationIndex-1].bizDate,isDetail:this.isDetail,repeat:"0"};1==this.operationIndex?t.isPre="1":t.isPre="0",Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"发票号码\n【"+this.operationRowArr[this.operationIndex-1].invNo+"】\n正在被打印",this,!1),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["A"])(t).then((function(a){e.showProgress=!1,clearInterval(e.loadingTime),200==a.code?(e.msgSuccess("[发票代码:"+e.operationRowArr[e.operationIndex-1].invCode+",发票号码:"+e.operationRowArr[e.operationIndex-1].invNo+"]"),e.printInvoiceLogic()):1005==a.code?(e.msgError(a.msg),e.$confirm(a.msg+",是否需要重复打印?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(a){t.repeat="1",Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"发票号码\n【"+e.operationRowArr[e.operationIndex-1].invNo+"】\n正在被打印",e,!1),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["A"])(t).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.msgSuccess("[发票代码:"+e.operationRowArr[e.operationIndex-1].invCode+",发票号码:"+e.operationRowArr[e.operationIndex-1].invNo+"]"),e.printInvoiceLogic()):(e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，"+a.msg),e.printSureOpen=!1,e.operationIndex=0,e.operationRowArr=[])}))})).catch((function(){e.printInvoiceLogic()}))):(e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，"+a.msg),e.printSureOpen=!1,e.operationIndex=0,e.operationRowArr=[])})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，请确认"),e.printSureOpen=!1,e.operationIndex=0,e.operationRowArr=[]}))},printSureDialogClose:function(){},printDetail:function(){this.printSendDataArr=[];for(var e=0,t=this.rows.length;e<t;e++)if("51"==this.rows[e].invType||"52"==this.rows[e].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var a=[];this.operationRowArr=this.operationRowArr.filter((function(e){return"0"==e.detailFlag&&a.push(e.billNo),"1"==e.detailFlag})),0!=this.operationRowArr.length?(0!=a.length&&this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤"),this.operationRowArr.sort(this.invNoAsc()),this.printNum=this.operationRowArr.length,this.isDetail="1",this.printInvoiceLogic()):this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤")},invNoAsc:function(){return function(e,t){var a=parseFloat(e["invNo"]),n=parseFloat(t["invNo"]);return console.log(a+"---"+n),a-n}},MBISocketPrint:function(e){if(window.WebSocket)return this.websocket.readyState!=WebSocket.OPEN?(this.msgError("打印服务已存在处理客户端，请关闭相关网页后刷新重试！"),void(this.printTips=[])):void this.websocket.send(e)},splitValid:function(e){var t=this,a={ids:this.ids.join(","),beginTime:this.dateRange[0]+" 00:00:00",endTime:this.dateRange[1]+" 23:59:59"};return Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["d"])(a).then((function(a){if(1!=a.data)return"1"==e?t.msgError("不允许拆分后部分发票红冲"):"2"==e&&t.msgError("不允许拆分后部分发票作废"),new Promise((function(){}))}))},startleftChange:function(){js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.set("startleft",this.printSettingForm.startleft,{expires:30}),js_cookie__WEBPACK_IMPORTED_MODULE_29___default.a.set("starttop",this.printSettingForm.starttop,{expires:30})},newPrintInvoice:function(){var e=this;if(!this.wsServeConnect)return this.msgError("系统与打印客户端未连接，请重试"),void this.againConnectWs();this.printSendDataArr=[];for(var t=0,a=this.rows.length;t<a;t++)if("51"==this.rows[t].invType||"52"==this.rows[t].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.operationRowArr.sort(this.invNoAsc()),parseInt(this.operationRowArr[this.operationRowArr.length-1].invNo)-parseInt(this.operationRowArr[0].invNo)>this.operationRowArr.length?this.$confirm("所选发票的发票号码不连贯，是否继续打印?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.printNum=e.rows.length,e.isDetail="0",e.newPrintInvoiceLogic()})).catch((function(){})):(this.printNum=this.rows.length,this.isDetail="0",this.newPrintInvoiceLogic())},newPrintInvoiceLogic:function(){if(!this.wsServeConnect)return this.msgError("系统与打印客户端未连接，请重试"),void this.againConnectWs();this.operationIndex++,this.operationIndex<=this.operationRowArr.length?(this.newPrintInvType=this.selectDictLabel(this.invTypeOptions,this.operationRowArr[this.operationIndex-1].invType),this.newPrintInvCode=this.operationRowArr[this.operationIndex-1].invCode,this.newPrintInvNo=this.operationRowArr[this.operationIndex-1].invNo,"1"==this.isDetail&&"0"==this.operationRowArr[this.operationIndex-1].detailFlag&&(this.newPrintInvoiceLogic(),this.msgError("单据编号为["+this.operationRowArr[this.operationIndex-1].billNo+"]的发票，无清单标志，不可打印清单")),1==this.operationIndex?this.newPrintSureOpen=!0:(this.newPrintSureOpen=!1,this.newPrintSure())):(this.newPrintSureOpen=!1,this.operationIndex=0,this.operationRowArr=[])},newPrintSure:function(){var e=this;this.printSureOpen=!1;var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate,isDetail:this.isDetail};1==this.operationIndex||1!=this.operationIndex&&!this.showProgress?(Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"正在打印发票",this,!1),t.isPre="1"):t.isPre="0",Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["x"])(t).then((function(a){if(200==a.code){var n=a.data;n=JSON.stringify(n),e.wsServe.send(n),t.invNo=e.operationRowArr[e.operationIndex-1].invNo,t.invCode=e.operationRowArr[e.operationIndex-1].invCode,e.printAfter.push(t),e.newPrintInvoiceLogic()}else e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，"+a.msg),e.newPrintSureOpen=!1,e.operationIndex=0,e.operationRowArr=[]})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】打印失败，请确认"),e.newPrintSureOpen=!1,e.operationIndex=0,e.operationRowArr=[]}))},newPrintDetail:function(){for(var e=0,t=this.rows.length;e<t;e++)if("51"==this.rows[e].invType||"52"==this.rows[e].invType)return void this.msgError("所选发票包含电子票不支持打印");this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows);var a=[];this.operationRowArr=this.operationRowArr.filter((function(e){return"0"==e.detailFlag&&a.push(e.billNo),"1"==e.detailFlag})),0!=this.operationRowArr.length?(0!=a.length&&this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤"),this.operationRowArr.sort(this.invNoAsc()),this.printNum=this.operationRowArr.length,this.isDetail="1",this.newPrintInvoiceLogic()):this.msgError("发票编号["+a.join(",")+"]的发票不存在清单，已过滤")},invoiceRepair:function(){this.operationRowArr=Object(_utils__WEBPACK_IMPORTED_MODULE_26__["e"])(this.rows),this.invoiceRepairLogic()},invoiceRepairLogic:function(){var e=this;if(this.operationIndex++,this.operationIndex<=this.operationRowArr.length){var t={id:this.operationRowArr[this.operationIndex-1].id,invDate:this.operationRowArr[this.operationIndex-1].invDate};Object(_utils_ruoyi__WEBPACK_IMPORTED_MODULE_27__["g"])(200,"发票修复中",this,!1),Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["G"])(t).then((function(t){200==t.code?(e.msgSuccess("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】修复成功"),e.invoiceRepairLogic()):(e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】修复失败，"+t.msg),e.invoiceRepairLogic())})).catch((function(){e.msgError("当前发票号码【"+e.operationRowArr[e.operationIndex-1].invNo+"】修复失败"),e.invoiceRepairLogic()}))}else this.showProgress=!1,clearInterval(this.loadingTime),this.operationIndex=0,this.operationRowArr=[]},showReded:function(e){var t=this,a={sourceInvCode:e.invCode,sourceInvNo:e.invNo};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["v"])(a).then((function(e){t.redInvoiceList=e.data,t.redInvoiceOpen=!0}))},againConnectWs:function(){var e=this,t=window.WebSocket||window.MozWebSocket;this.wsServe=new t("ws://127.0.0.1:19735/"),this.wsServe.onopen=function(t){e.wsServeConnect=!0,console.log("连接成功")},this.wsServe.onclose=function(t){e.wsServeConnect=!1,e.msgError("请确认打印客户端是否启动"),console.log("再次连接失败")}},handleMoreSearch:function(){this.moreSearch.open=!1,this.handleQuery()},qdCancelDialogSubmit:function(){var e=this;this.$refs.cancelDialogForm.validate((function(t){t&&(e.$vLoading.show(),e.qdCancelDialogSubmitLogic(0))}))},qdCancelDialogSubmitLogic:function(e){var t=this;if(e<this.redOrCancelRowsArr.length){var a={id:this.redOrCancelRowsArr[e].id,reason:this.qdCancelDialog.form.reason};Object(_api_output_invoice__WEBPACK_IMPORTED_MODULE_17__["E"])(a).then((function(a){200==a.code?t.msgSuccess(a.msg):t.msgError(a.msg),t.qdCancelDialogSubmitLogic(e+1)})).catch((function(){t.qdCancelDialogSubmitLogic(e+1)}))}else this.$vLoading.hide(),this.getList(),this.qdCancelDialog.open=!1},qdCancelDialogClose:function(){this.qdCancelDialog.form={id:"",reason:""}}}}},c92e:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));var n=a("b775");function i(e){return e.billSplitType="2",Object(n["a"])({url:"/output/bill/merge",method:"post",data:e})}function o(e){return e.billSplitType="2",Object(n["a"])({url:"/output/bill/ccdmerge",method:"post",data:e})}function r(e){return e.billSplitType="3",Object(n["a"])({url:"/output/bill/ccdmerge",method:"post",data:e})}},c967:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.checker,callback:function(t){e.$set(e.queryParams,"checker",t)},expression:"queryParams.checker"}})],1),a("el-form-item",{attrs:{label:"收款人",prop:"payee"}},[a("el-input",{attrs:{placeholder:"请输入收款人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.payee,callback:function(t){e.$set(e.queryParams,"payee",t)},expression:"queryParams.payee"}})],1),a("el-form-item",{attrs:{label:"开票人",prop:"drawer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.drawer,callback:function(t){e.$set(e.queryParams,"drawer",t)},expression:"queryParams.drawer"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:seller:add"],expression:"['baseinfo:seller:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:seller:edit"],expression:"['baseinfo:seller:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:seller:remove"],expression:"['baseinfo:seller:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:seller:export"],expression:"['baseinfo:seller:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.sellerList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"复核人",align:"center",prop:"checker"}}),a("el-table-column",{attrs:{label:"收款人",align:"center",prop:"payee"}}),a("el-table-column",{attrs:{label:"开票人",align:"center",prop:"drawer"}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"开户行及账号",align:"center",prop:"bankAccount","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"地址电话",align:"center",prop:"bankAddrTel","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:seller:edit"],expression:"['baseinfo:seller:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["baseinfo:seller:remove"],expression:"['baseinfo:seller:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"税盘id",prop:"taxnoId"}},[a("el-input",{attrs:{placeholder:"请输入税盘id"},model:{value:e.form.taxnoId,callback:function(t){e.$set(e.form,"taxnoId",t)},expression:"form.taxnoId"}})],1),a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1),a("el-form-item",{attrs:{label:"收款人",prop:"payee"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10},model:{value:e.form.payee,callback:function(t){e.$set(e.form,"payee",t)},expression:"form.payee"}})],1),a("el-form-item",{attrs:{label:"开票人",prop:"drawer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10},model:{value:e.form.drawer,callback:function(t){e.$set(e.form,"drawer",t)},expression:"form.drawer"}})],1),a("el-form-item",{attrs:{label:"开户行及账号",prop:"bankAccount"}},[a("el-input",{attrs:{placeholder:"请输入开户行及账号",maxlength:50},model:{value:e.form.bankAccount,callback:function(t){e.$set(e.form,"bankAccount",t)},expression:"form.bankAccount"}})],1),a("el-form-item",{attrs:{label:"地址电话",prop:"bankAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入地址电话",maxlength:100},model:{value:e.form.bankAddrTel,callback:function(t){e.$set(e.form,"bankAddrTel",t)},expression:"form.bankAddrTel"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/baseinfo/seller/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/baseinfo/seller/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/baseinfo/seller",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/baseinfo/seller",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/baseinfo/seller/changeStatus",method:"put",data:e})}function d(e){return Object(o["a"])({url:"/baseinfo/seller/"+e,method:"delete"})}function p(e){return Object(o["a"])({url:"/baseinfo/seller/export",method:"get",params:e})}var h={name:"Seller",data:function(){return{loading:!0,ids:[],single:!0,defaultTaxnoId:void 0,multiple:!0,showSearch:!0,total:0,sellerList:[],title:"",open:!1,statusOptions:[],queryParams:{pageNum:1,pageSize:10,checker:null,payee:null,drawer:null,status:null},form:{},rules:{taxnoId:[{required:!0,message:"税盘id不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],payee:[{required:!0,message:"收款人不能为空",trigger:"blur"}],drawer:[{required:!0,message:"开票人不能为空",trigger:"blur"}],bankAccount:[{required:!0,message:"开户行及账号不能为空",trigger:"blur"}],bankAddrTel:[{required:!0,message:"银行地址电话不能为空",trigger:"blur"}]}}},created:function(){var e=this,t=this.$route.params&&this.$route.params.taxnoId;this.defaultTaxnoId=t,this.getList(t),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(e){var t=this;this.loading=!0,this.queryParams.taxnoId=this.defaultTaxnoId,r(this.queryParams).then((function(e){t.sellerList=e.rows,t.total=e.total,t.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,taxnoId:null,checker:null,payee:null,drawer:null,status:"0",bankAccount:null,bankAddrTel:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList(this.defaultTaxnoId)},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleStatusChange:function(e){var t=this,a="1"===e.status?"启用":"停用";this.$confirm('确认要"'+a+'"""该条数据吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(e)})).then((function(){t.msgSuccess(a+"成功"),t.getList(t.defaultTaxnoId)})).catch((function(){e.status="0"===e.status?"1":"0"}))},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.form.taxnoId=this.defaultTaxnoId,this.title="添加税盘销方信息"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改税盘销方信息"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList(e.defaultTaxnoId))})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList(e.defaultTaxnoId))})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除税盘销方信息编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(a)})).then((function(){t.getList(t.defaultTaxnoId),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有税盘销方信息数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},c9fb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},[e._l(e.invTypeOptions,(function(t){return"12"==t.dictValue||"0"==t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),a("el-option",{attrs:{value:"12",label:"机动车"}})],2)],1),a("el-form-item",{attrs:{label:"清单标志",prop:"detailFlag"}},[a("el-select",{attrs:{placeholder:"请选择清单标志",clearable:"",size:"small"},model:{value:e.queryParams.detailFlag,callback:function(t){e.$set(e.queryParams,"detailFlag",t)},expression:"queryParams.detailFlag"}},e._l(e.detailFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo",t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"发票状态",prop:"redFlag"}},[a("el-select",{attrs:{placeholder:"请选择发票状态",clearable:"",size:"small"},model:{value:e.queryParams.redFlag,callback:function(t){e.$set(e.queryParams,"redFlag",t)},expression:"queryParams.redFlag"}},e._l(e.redFlagOptions,(function(t){return"2"!=t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"车架号",prop:"buyName"}},[a("el-input",{staticStyle:{width:"475px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.text,callback:function(t){e.$set(e.queryParams,"text","string"===typeof t?t.trim():t)},expression:"queryParams.text"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"historyMainTable",attrs:{data:e.historyList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["id"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showInvoiceDetail(n.row)}}},[e._v(" "+e._s(n.row[t.prop])+" ")]):"invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):"redFlag"==t.prop?a("span",[e._v(" "+e._s(e.redFlagFormat(n.row))+" ")]):"cancelFlag"==t.prop?a("span",[e._v(" "+e._s(e.cancelFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("history-detail-show-modal",{ref:"showModal"}),a("history-vehicle-detail-show-modal",{ref:"vehicleShowModal"}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("ac1f"),a("5319"),a("498a"),a("d81d"),a("ba69")),l=a("994d"),s=a("b526"),c=a("2f3d"),u=a("ed08"),d={name:"singlehistory",components:{HistoryDetailShowModal:r["default"],HistoryVehicleDetailShowModal:l["default"],TotalRowTable:s["default"]},data:function(){return{module:"history",tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,historyList:[],title:"",open:!1,invTypeOptions:[],detailFlagOptions:[],redFlagOptions:[{dictValue:"0",dictLabel:"正数"},{dictValue:"1",dictLabel:"负数"}],cancelFlagOptions:[],printedFlagOptions:[],signFlagOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,detailFlag:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalAmountWithoutTaxNoRed:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,taxnoInfo:null,printedFlag:null,pushedFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,ewm:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null},form:{},rules:{},columnsArr:[{label:"车架号",prop:"ext3",align:"center",show:!0,width:220,columnSort:0},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:7},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:15},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:1},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:2},{label:"开票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:4},{label:"发票类型",prop:"invType",align:"center",show:!0,width:220,columnSort:5},{label:"发票状态",prop:"redFlag",align:"center",show:!0,width:220,columnSort:25},{label:"清单标志",prop:"detailFlag",align:"center",show:!0,width:220,columnSort:6},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:9},{label:"购方开户账号",prop:"buyBankAccount",align:"center",show:!0,width:220,columnSort:10},{label:"购方地址电话",prop:"buyAddrTel",align:"center",show:!0,width:220,columnSort:11},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:14},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:16},{label:"销方地址及电话",prop:"sellAddrTel",align:"center",show:!0,width:220,columnSort:17},{label:"销方银行及账号",prop:"sellBankAccount",align:"center",show:!0,width:220,columnSort:18},{label:"收款人",prop:"cashier",align:"center",show:!0,width:220,columnSort:19},{label:"复核人",prop:"checker",align:"center",show:!0,width:220,columnSort:20},{label:"开票人",prop:"invoicer",align:"center",show:!0,width:220,columnSort:21}],checkboxClick:!1,sortParam:{column:null,columnOrder:null},showProgress:!1,functionName:"",loadingTime:null}},computed:{totalTableData:function(){var e=Object(u["e"])(this.rows);return 0==e.length&&(e=Object(u["e"])(this.historyList)),e}},created:function(){var e=this;this.getList(),Object(c["g"])("output_inv_type").then((function(t){e.invTypeOptions=t.data})),Object(c["g"])("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data})),Object(c["g"])("sys_yes_no_num").then((function(t){e.cancelFlagOptions=t.data})),Object(c["g"])("sys_yes_no_num").then((function(t){e.printedFlagOptions=t.data})),Object(c["g"])("invoice_sign_status").then((function(t){e.signFlagOptions=t.data})),Object(c["g"])("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight()+84,window.onresize=function(){e.tableHeight=e.calcTableHeight()+84}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight()+84,window.onresize=function(){e.tableHeight=e.calcTableHeight()+84}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()+84}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(u["e"])(this.queryParams),Object(u["e"])(this.sortParam));Object(c["f"])(this.addDateRange(t,this.dateRange)).then((function(t){e.historyList=t.rows,e.total=t.total,e.loading=!1}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.text=e.target.value},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},cutDate:function(e){if(null!=e&&""!=e)return e.substring(0,10)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},cancelFlagFormat:function(e,t){return this.selectDictLabel(this.cancelFlagOptions,e.cancelFlag)},printedFlagFormat:function(e,t){return this.selectDictLabel(this.printedFlagOptions,e.printedFlag)},signFlagFormat:function(e,t){return this.selectDictLabel(this.signFlagOptions,e.signFlag)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,detailFlag:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalAmountWithoutTaxNoRed:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,cancelFlag:null,negNativeNo:null,taxnoInfo:null,printedFlag:null,pushedFlag:null,pdfUrl:null,pwdCode:null,checkCode:null,machineNo:null,signFlag:null,ewm:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(u["e"])(e))},handleAdd:function(){this.reset(),this.open=!0,this.title="添加已开历史发票管理"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(c["e"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改已开历史发票管理"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(c["h"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(c["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除已开历史发票管理编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(u["e"])(this.queryParams);this.ids.length>0&&(t.idsArr=this.ids),this.$confirm("是否确认导出所有已开历史发票数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(c["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))},handleExportDetail:function(){var e=this,t=Object(u["e"])(this.queryParams);this.ids.length>0&&(t.idsArr=this.ids),this.$confirm("是否确认导出所有已开历史发票明细数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(c["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.download(t.msg)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.historyMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.historyList,"historyMainTable")},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.historyList,"historyMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},showInvoiceDetail:function(e){var t={id:e.id,invDate:e.invDate};"12"==e.invType?this.$refs.vehicleShowModal.fillInvoiceDialog(t):this.$refs.showModal.fillBillDialog(t)},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},ca4d:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return l}));var n=a("b775");function i(e){return Object(n["a"])({url:"/act/define/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/act/define/getDefinitions/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/act/define/suspendOrActiveApply",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/act/define/remove/"+e,method:"delete"})}},ca7a:function(e,t,a){},cb29:function(e,t,a){var n=a("23e7"),i=a("81d5"),o=a("44d2");n({target:"Array",proto:!0},{fill:i}),o("fill")},cc4f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"服务名称",prop:"serviceName"}},[a("el-input",{attrs:{placeholder:"请输入服务名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.serviceName,callback:function(t){e.$set(e.queryParams,"serviceName",t)},expression:"queryParams.serviceName"}})],1),a("el-form-item",{attrs:{label:"服务主机",prop:"serviceHost"}},[a("el-input",{attrs:{placeholder:"请输入服务主机",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.serviceHost,callback:function(t){e.$set(e.queryParams,"serviceHost",t)},expression:"queryParams.serviceHost"}})],1),a("el-form-item",{attrs:{label:"服务端口",prop:"servicePort"}},[a("el-input",{attrs:{placeholder:"请输入服务端口",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.servicePort,callback:function(t){e.$set(e.queryParams,"servicePort",t)},expression:"queryParams.servicePort"}})],1),a("el-form-item",{attrs:{label:"服务状态",prop:"serviceStatus"}},[a("el-select",{attrs:{placeholder:"请选择服务状态",clearable:"",size:"small"},model:{value:e.queryParams.serviceStatus,callback:function(t){e.$set(e.queryParams,"serviceStatus",t)},expression:"queryParams.serviceStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"异常",value:"0"}}),a("el-option",{attrs:{label:"正常",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"推送邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入推送邮箱",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.email,callback:function(t){e.$set(e.queryParams,"email",t)},expression:"queryParams.email"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.remark,callback:function(t){e.$set(e.queryParams,"remark",t)},expression:"queryParams.remark"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:monitor:add"],expression:"['system:monitor:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:monitor:edit"],expression:"['system:monitor:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:monitor:remove"],expression:"['system:monitor:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:monitor:export"],expression:"['system:monitor:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.monitorList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"服务名称",align:"center",prop:"serviceName"}}),a("el-table-column",{attrs:{label:"服务主机",align:"center",prop:"serviceHost"}}),a("el-table-column",{attrs:{label:"服务端口",align:"center",prop:"servicePort"}}),a("el-table-column",{attrs:{label:"服务状态",align:"center",prop:"serviceStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row["serviceStatus"]?a("span",[e._v("异常")]):"1"==t.row["serviceStatus"]?a("span",[e._v("正常")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"推送邮箱",align:"center",prop:"email"}}),a("el-table-column",{attrs:{label:"邮件推送时间",align:"center",prop:"pushTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.pushTime,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:monitor:edit"],expression:"['system:monitor:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:monitor:remove"],expression:"['system:monitor:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"服务名称",prop:"serviceName"}},[a("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.form.serviceName,callback:function(t){e.$set(e.form,"serviceName",t)},expression:"form.serviceName"}})],1),a("el-form-item",{attrs:{label:"服务主机",prop:"serviceHost"}},[a("el-input",{attrs:{placeholder:"请输入服务主机"},model:{value:e.form.serviceHost,callback:function(t){e.$set(e.form,"serviceHost",t)},expression:"form.serviceHost"}})],1),a("el-form-item",{attrs:{label:"服务端口",prop:"servicePort"}},[a("el-input",{attrs:{placeholder:"请输入服务端口"},model:{value:e.form.servicePort,callback:function(t){e.$set(e.form,"servicePort",t)},expression:"form.servicePort"}})],1),a("el-form-item",{attrs:{label:"推送邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入推送邮箱 以;进行分割"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注信息"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/system/monitor/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/system/monitor/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/system/monitor",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/system/monitor",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/system/monitor/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/system/monitor/export",method:"post",data:e,responseType:"blob"})}var p=a("ed08"),h={name:"Monitor",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,monitorList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,serviceName:null,serviceHost:null,servicePort:null,serviceStatus:null,email:null,pushTime:null},form:{},rules:{createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],updateTime:[{required:!0,message:"更新时间不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.monitorList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,serviceName:null,serviceHost:null,servicePort:null,serviceStatus:null,email:null,pushTime:null,remark:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加服务监控"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改服务监控"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除服务监控名称为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(p["e"])(this.queryParams);t.idsArr=this.ids,this.$confirm("是否确认导出所有服务监控数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.currencyDownload(t,"服务监控数据.xls",e)})).catch((function(){}))}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},cc6c:function(e,t,a){e.exports=a.p+"static/img/401.089007e7.gif"},cda1a:function(e,t,a){"use strict";a("959f")},cdb7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"configName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入参数名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.configName,callback:function(t){e.$set(e.queryParams,"configName",t)},expression:"queryParams.configName"}})],1),a("el-form-item",{attrs:{label:"参数键名",prop:"configKey"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入参数键名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.configKey,callback:function(t){e.$set(e.queryParams,"configKey",t)},expression:"queryParams.configKey"}})],1),a("el-form-item",{attrs:{label:"系统内置",prop:"configType"}},[a("el-select",{attrs:{placeholder:"系统内置",clearable:"",size:"small"},model:{value:e.queryParams.configType,callback:function(t){e.$set(e.queryParams,"configType",t)},expression:"queryParams.configType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:add"],expression:"['system:config:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:edit"],expression:"['system:config:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:remove"],expression:"['system:config:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:export"],expression:"['system:config:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:remove"],expression:"['system:config:remove']"}],attrs:{type:"danger",icon:"el-icon-refresh",size:"mini"},on:{click:e.handleClearCache}},[e._v("清理缓存")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.configList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"参数主键",align:"center",prop:"configId"}}),a("el-table-column",{attrs:{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"参数键值",align:"center",prop:"configValue"}}),a("el-table-column",{attrs:{label:"系统内置",align:"center",prop:"configType",formatter:e.typeFormat}}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:edit"],expression:"['system:config:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:config:remove"],expression:"['system:config:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"configName"}},[a("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.form.configName,callback:function(t){e.$set(e.form,"configName",t)},expression:"form.configName"}})],1),a("el-form-item",{attrs:{label:"参数键名",prop:"configKey"}},[a("el-input",{attrs:{placeholder:"请输入参数键名"},model:{value:e.form.configKey,callback:function(t){e.$set(e.form,"configKey",t)},expression:"form.configKey"}})],1),a("el-form-item",{attrs:{label:"参数键值",prop:"configValue"}},[a("el-input",{attrs:{placeholder:"请输入参数键值"},model:{value:e.form.configValue,callback:function(t){e.$set(e.form,"configValue",t)},expression:"form.configValue"}})],1),a("el-form-item",{attrs:{label:"系统内置",prop:"configType"}},[a("el-radio-group",{model:{value:e.form.configType,callback:function(t){e.$set(e.form,"configType",t)},expression:"form.configType"}},e._l(e.typeOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d81d"),a("c0c3")),r=a("7b93"),l=a("c38a"),s={name:"Config",components:{MyElProgress:r["a"]},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,configList:[],title:"",open:!1,typeOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0},form:{},rules:{configName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],configKey:[{required:!0,message:"参数键名不能为空",trigger:"blur"}],configValue:[{required:!0,message:"参数键值不能为空",trigger:"blur"}]},functionName:"",showProgress:!1,loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_yes_no").then((function(t){e.typeOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(o["g"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.configList=t.rows,e.total=t.total,e.loading=!1}))},typeFormat:function(e,t){return this.selectDictLabel(this.typeOptions,e.configType)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={configId:void 0,configName:void 0,configKey:void 0,configValue:void 0,configType:"Y",remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加参数"},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.configId})),this.single=1!=e.length,this.multiple=!e.length},handleUpdate:function(e){var t=this;this.reset();var a=e.configId||this.ids;Object(o["e"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改参数"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.configId?Object(o["h"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.configId||this.ids;this.$confirm('是否确认删除参数编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有参数数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["g"])(10,"导出中",e),Object(o["d"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"参数设置.xls",e)})).catch((function(){}))},handleClearCache:function(){var e=this;Object(o["b"])().then((function(t){200===t.code&&e.msgSuccess("清理成功")}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},ceee:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"单据编号",prop:"billNo"}},[a("el-input",{staticStyle:{width:"199px"},attrs:{type:"textarea",rows:1,placeholder:"请输入单据编号",clearable:"",size:"small"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)},function(t){return e.businessNosChange(t)}]},model:{value:e.queryParams.billNos,callback:function(t){e.$set(e.queryParams,"billNos","string"===typeof t?t.trim():t)},expression:"queryParams.billNos"}})],1),a("el-form-item",{attrs:{label:"单据日期",prop:"bizDate"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"拆分状态",prop:"billSplitType"}},[a("el-select",{attrs:{placeholder:"请选择拆分状态",clearable:"",size:"small"},model:{value:e.queryParams.billSplitType,callback:function(t){e.$set(e.queryParams,"billSplitType",t)},expression:"queryParams.billSplitType"}},e._l(e.billSplitTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"单据状态",prop:"billStatus"}},[a("el-select",{attrs:{placeholder:"请选择单据状态",size:"small"},model:{value:e.queryParams.billStatus,callback:function(t){e.$set(e.queryParams,"billStatus",t)},expression:"queryParams.billStatus"}},e._l(e.billStatusOptions,(function(t){return"1"!=t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"购方编号",prop:"buyNumber"}},[a("el-input",{attrs:{placeholder:"请输入购方编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyNumber,callback:function(t){e.$set(e.queryParams,"buyNumber","string"===typeof t?t.trim():t)},expression:"queryParams.buyNumber"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName","string"===typeof t?t.trim():t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"单据来源",prop:"billSource"}},[a("el-select",{attrs:{placeholder:"请选择单据来源",clearable:"",size:"small"},model:{value:e.queryParams.billSource,callback:function(t){e.$set(e.queryParams,"billSource",t)},expression:"queryParams.billSource"}},e._l(e.billSourceOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"门店编码",prop:"shopNo"}},[a("el-input",{attrs:{placeholder:"请输入门店编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.shopNo,callback:function(t){e.$set(e.queryParams,"shopNo","string"===typeof t?t.trim():t)},expression:"queryParams.shopNo"}})],1),a("el-form-item",{attrs:{label:"特殊票种",prop:"tdyslxdm"}},[a("el-select",{attrs:{size:"small"},model:{value:e.queryParams.tdyslxdm,callback:function(t){e.$set(e.queryParams,"tdyslxdm",t)},expression:"queryParams.tdyslxdm"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"建筑服务",value:"03"}}),a("el-option",{attrs:{label:"不动产经营租赁服务",value:"06"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:add"],expression:"['output:bill:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:synchGoods"],expression:"['output:bill:synchGoods']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.synchClassCode}},[e._v("同步税编")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:adjust"],expression:"['output:bill:adjust']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.multiple},on:{click:e.adjustError}},[e._v("调整误差")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:flagOpen"],expression:"['output:bill:flagOpen']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.flagOpen}},[e._v("标记已开")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:remove"],expression:"['output:bill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:open"],expression:"['output:bill:open']"}],attrs:{type:"info",icon:"el-icon-thumb",size:"mini",disabled:e.multiple},on:{click:e.handleOpen}},[e._v("开具")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("导入导出")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:add"],expression:"['output:bill:add']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.handleImport(t)}}},[e._v("导入")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:export"],expression:"['output:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleExport(t)}}},[e._v("导出主体")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:export"],expression:"['output:bill:export']"}],attrs:{icon:"el-icon-download"},nativeOn:{click:function(t){return e.handleDetailExport(t)}}},[e._v("导出明细")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("拆分")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:split"],expression:"['output:bill:split']"}],attrs:{icon:"el-icon-minus",disabled:e.single},nativeOn:{click:function(t){return e.splitBill(t)}}},[e._v("手工拆分")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:splitByAmount"],expression:"['output:bill:splitByAmount']"}],attrs:{icon:"el-icon-remove-outline",disabled:e.multiple},nativeOn:{click:function(t){return e.splitByAmount(t)}}},[e._v("自动拆分")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("合并")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:merge"],expression:"['output:bill:merge']"}],attrs:{icon:"el-icon-plus",disabled:e.many},nativeOn:{click:function(t){return e.manualMergeBill(t)}}},[e._v("手工合并")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:merge"],expression:"['output:bill:merge']"}],attrs:{icon:"el-icon-plus",disabled:e.many},nativeOn:{click:function(t){return e.defaultMergeBill(t)}}},[e._v("自动合并")])],1)],1)],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:revert"],expression:"['output:bill:revert']"}],attrs:{type:"success",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.revertBill}},[e._v("还原")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:open"],expression:"['output:bill:open']"}],attrs:{type:"warning",icon:"el-icon-thumb",size:"mini",disabled:e.single},on:{click:e.handleSplitMergePreview}},[e._v("拆分合并预览")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-thumb",size:"mini"},on:{click:e.handleERPImport}},[e._v("单据引入")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{placement:"bottom-start"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-s-operation",size:"mini"}},[e._v("更多")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{icon:"el-icon-plus",disabled:e.multiple},nativeOn:{click:function(t){return e.handleInvTypeUpdate(t)}}},[e._v("批量修改发票类型")]),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill.copy"],expression:"['output:bill.copy']"}],attrs:{icon:"el-icon-plus"},nativeOn:{click:function(t){return e.copyInvoice(t)}}},[e._v("复制")])],1)],1)],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module,colorExplain:"1"},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"billMainTable",attrs:{data:e.billList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect,"cell-click":e.cellClick,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",{style:e.setFontColor(n.row),on:{click:function(t){return e.handleUpdate(n.row)}}},[e._v(e._s(n.row[t.prop]))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}")))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{prop:"note",width:"200",label:"备注",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showInput?a("el-input",{attrs:{type:"textarea"},on:{blur:function(a){return e.noteInputBlur(t.row)}},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}}):a("span",[e._v(e._s(t.row.note))])]}}])}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:bill:edit"],expression:"['output:bill:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"1"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"标记为已开票",visible:e.flagopen,"append-to-body":""},on:{"update:visible":function(t){e.flagopen=t},close:e.flagopenDialogClose}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flagForm",attrs:{model:e.flagForm,rules:e.flagRules,size:"medium","label-width":"110px"}},[["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入发票代码",maxlength:12,clearable:""},model:{value:e.flagForm.invCode,callback:function(t){e.$set(e.flagForm,"invCode","string"===typeof t?t.trim():t)},expression:"flagForm.invCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入发票号码",maxlength:["81","82"].includes(e.flagForm.invType)?20:8,clearable:""},model:{value:e.flagForm.invNo,callback:function(t){e.$set(e.flagForm,"invNo","string"===typeof t?t.trim():t)},expression:"flagForm.invNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择开票日期"},model:{value:e.flagForm.invDate,callback:function(t){e.$set(e.flagForm,"invDate",t)},expression:"flagForm.invDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"不含税金额",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{readonly:""},model:{value:e.flagForm.totalAmountWithoutTax,callback:function(t){e.$set(e.flagForm,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"flagForm.totalAmountWithoutTax"}})],1)],1),["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{placeholder:"请输入收款人",maxlength:10,clearable:""},model:{value:e.flagForm.cashier,callback:function(t){e.$set(e.flagForm,"cashier","string"===typeof t?t.trim():t)},expression:"flagForm.cashier"}})],1)],1),["81","82"].includes(e.flagForm.invType)?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{placeholder:"请输入复核人",maxlength:10,clearable:""},model:{value:e.flagForm.checker,callback:function(t){e.$set(e.flagForm,"checker","string"===typeof t?t.trim():t)},expression:"flagForm.checker"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{placeholder:"请输入开票人",maxlength:10,clearable:""},model:{value:e.flagForm.invoicer,callback:function(t){e.$set(e.flagForm,"invoicer","string"===typeof t?t.trim():t)},expression:"flagForm.invoicer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验码",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入校验码",maxlength:20,clearable:""},model:{value:e.flagForm.checkCode,callback:function(t){e.$set(e.flagForm,"checkCode","string"===typeof t?t.trim():t)},expression:"flagForm.checkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密文",prop:"pwdCode"}},[a("el-input",{attrs:{placeholder:"请输入密文",maxlength:200,clearable:""},model:{value:e.flagForm.pwdCode,callback:function(t){e.$set(e.flagForm,"pwdCode","string"===typeof t?t.trim():t)},expression:"flagForm.pwdCode"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFlagForm}},[e._v("确 定")]),a("el-button",{on:{click:e.flagCancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx,.xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("split-bill-modal",{ref:"splitModal",on:{updateBillTable:e.updateBillTable}}),a("merge-bill-modal",{ref:"mergeModal",on:{updateBillTable:e.updateBillTable}}),a("el-dialog",{attrs:{title:"修改发票类型",visible:e.updateInvTypeOpen,width:"400px","append-to-body":"",id:"updateInvTypeModal"},on:{"update:visible":function(t){e.updateInvTypeOpen=t},close:e.updateInvTypeDialogClose}},[a("div",[a("el-form",{ref:"updateInvTypeForm",attrs:{model:e.updateInvTypeForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small"},model:{value:e.updateInvTypeForm.invType,callback:function(t){e.$set(e.updateInvTypeForm,"invType",t)},expression:"updateInvTypeForm.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitUpdateInvType}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.updateInvTypeOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"发票信息",visible:e.stockInfoOpen,width:"400px","append-to-body":"",id:"stockInfoModal"},on:{"update:visible":function(t){e.stockInfoOpen=t},close:e.stockInfoClose}},[a("div",[a("el-form",{ref:"stockInfoForm",attrs:{model:e.stockInfoForm,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpdm,callback:function(t){e.$set(e.stockInfoForm,"fpdm",t)},expression:"stockInfoForm.fpdm"}})],1),a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fphm,callback:function(t){e.$set(e.stockInfoForm,"fphm",t)},expression:"stockInfoForm.fphm"}})],1),a("el-form-item",{attrs:{label:"发票份数"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fpfs,callback:function(t){e.$set(e.stockInfoForm,"fpfs",t)},expression:"stockInfoForm.fpfs"}})],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-input",{attrs:{maxlength:200,readonly:""},model:{value:e.stockInfoForm.fplx,callback:function(t){e.$set(e.stockInfoForm,"fplx",t)},expression:"stockInfoForm.fplx"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureStockInfo}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.stockInfoOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"复制发票",visible:e.copyInvoiceOpen,width:"400px","append-to-body":"",id:"copyInvoiceModal"},on:{"update:visible":function(t){e.copyInvoiceOpen=t},close:e.copyInvoiceClose}},[a("div",[a("el-form",{ref:"copyInvoiceForm",attrs:{model:e.copyInvoiceForm,rules:e.copyInvoiceFormRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发票类型",size:"small"},model:{value:e.copyInvoiceForm.invType,callback:function(t){e.$set(e.copyInvoiceForm,"invType",t)},expression:"copyInvoiceForm.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),["81","82"].includes(e.copyInvoiceForm.invType)?e._e():a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{maxlength:12},model:{value:e.copyInvoiceForm.invCode,callback:function(t){e.$set(e.copyInvoiceForm,"invCode",t)},expression:"copyInvoiceForm.invCode"}})],1),a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{maxlength:["81","82"].includes(e.copyInvoiceForm.invType)?20:8},model:{value:e.copyInvoiceForm.invNo,callback:function(t){e.$set(e.copyInvoiceForm,"invNo",t)},expression:"copyInvoiceForm.invNo"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureCopyInvoice}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.copyInvoiceOpen=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"拆分合并原单据预览",visible:e.splitMergePreviewOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.splitMergePreviewOpen=t},close:e.splitMergePreviewClose}},[a("u-table",{staticStyle:{width:"100%"},attrs:{data:e.splitMergeList,height:.6*e.bodyHeight}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["billNo"==t.prop?a("span",[e._v(e._s(n.row[t.prop]))]):"billSource"==t.prop?a("span",[e._v(e._s(e.billSourceFormat(n.row)))]):"invType"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):"billStatus"==t.prop?a("span",[e._v(e._s(e.billStatusFormat(n.row)))]):"bizDate"==t.prop?a("span",[e._v(e._s(e.parseTime(n.row.bizDate,"{y}-{m}-{d}")))]):"billSplitType"==t.prop?a("span",[e._v(e._s(e.billSplitTypeFormat(n.row)))]):"redFlag"==t.prop?a("span",[e._v(e._s(e.redFlagFormat(n.row)))]):"applyStatus"==t.prop?a("span",[e._v(e._s(e.applyStatusFormat(n.row)))]):"detailFlag"==t.prop?a("span",[e._v(" "+e._s(e.detailFlagFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2)],1),a("el-dialog",{attrs:{title:"消息",visible:e.print.open,width:"400px","append-to-body":"",id:"printSureModal"},on:{"update:visible":function(t){return e.$set(e.print,"open",t)}}},[a("div",[a("p",[e._v("系统即将执行您的发票打印任务，请确认发票信息:")]),a("p",{staticClass:"print-modal-p"},[e._v("发票类型:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.print.invType))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票代码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.print.invCode))])]),a("p",{staticClass:"print-modal-p"},[e._v("发票号码:"),a("span",{staticClass:"blueFont"},[e._v(e._s(e.print.invNo))])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"el-button el-button--default el-button--small el-button--primary",attrs:{type:"button"},on:{click:e.printSure}},[a("span",[e._v("确定")])]),a("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.print.open=!1}}},[a("span",[e._v("取消")])])])]),a("fptk",{ref:"billdetailcomp",on:{updateBillTable:e.updateBillTable,openBill:e.handleOpen}}),a("el-dialog",{attrs:{title:"单据引入",visible:e.ERPImportDialog.open,width:"1200px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.ERPImportDialog,"open",t)},close:e.ERPImportDialogClose}},[a("div",[a("el-form",{attrs:{model:e.ERPImportDialog.form,size:"small","label-width":"70px",inline:!0}},[a("el-form-item",{attrs:{label:"单据号起",prop:"sBill"}},[a("el-input",{attrs:{placeholder:"请输入起始单据号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleERPImportQuery(t)}},model:{value:e.ERPImportDialog.form.sBill,callback:function(t){e.$set(e.ERPImportDialog.form,"sBill","string"===typeof t?t.trim():t)},expression:"ERPImportDialog.form.sBill"}})],1),a("el-form-item",{attrs:{label:"单据号止",prop:"eBill"}},[a("el-input",{attrs:{placeholder:"请输入结束单据号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleERPImportQuery(t)}},model:{value:e.ERPImportDialog.form.eBill,callback:function(t){e.$set(e.ERPImportDialog.form,"eBill","string"===typeof t?t.trim():t)},expression:"ERPImportDialog.form.eBill"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"billType"}},[a("el-select",{attrs:{clearable:""},model:{value:e.ERPImportDialog.form.billType,callback:function(t){e.$set(e.ERPImportDialog.form,"billType",t)},expression:"ERPImportDialog.form.billType"}},[a("el-option",{attrs:{label:"销售增值税专用发票",value:"0"}}),a("el-option",{attrs:{label:"销售普通发票",value:"2"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleERPImportQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-check",size:"mini",disabled:!e.ERPImportDialog.rows.length},on:{click:e.ERPImportSave}},[e._v("保存")])],1)],1),a("u-table",{ref:"ERPImportMainTable",attrs:{data:e.ERPImportDialog.tableList,"use-virtual":"","row-height":40,height:e.ERPImportDialog.tableHeight,loading:e.ERPImportDialog.loading},on:{"selection-change":function(t){return e.handleSelectionChange(t,"ERPImport")},"row-click":function(t,a,n){return e.currClickRow(t,a,n,"ERPImport")}}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.ERPImportDialog.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?[a("el-select",{attrs:{size:"mini"},model:{value:n.row.invType,callback:function(t){e.$set(n.row,"invType",t)},expression:"scope.row.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{attrs:{label:e.dictLabel,value:e.dictValue}})})),1)]:"billType"==t.prop?a("span",[e._v(e._s(e.billTypeFormat(n.row)))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()}))],2)],1)])],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("13d5"),a("caad"),a("d81d"),a("4de4"),a("25f0"),a("a15b"),a("cb29"),a("ac1f"),a("5319"),a("498a"),a("5f87")),l=a("c85c"),s=a("7e6f"),c=a("c92e"),u=a("00c6"),d=a("e98e"),p=a("c10b"),h=a("2ba5"),m=a("c394"),f=a("7a18"),b=a("5509"),g=a("17ac"),v=a("7b93"),y=a("b526"),_=a("7af1"),x=a("bbc3"),w=a("c38a"),k=a("ed08"),T={name:"Bill",components:{MyElProgress:v["a"],SplitBillModal:b["default"],MergeBillModal:g["default"],TotalRowTable:y["default"],NewBillDetailEditModal:_["default"],Fptk:x["default"]},data:function(){return{bodyHeight:null,splitMergePreviewOpen:!1,splitMergeList:[],updateInvTypeForm:{invType:"2"},updateInvTypeOpen:!1,mainLoading:!1,module:"bill",pageSizes:[],tableHeight:null,showProgress:!1,functionName:"开具中:",loading:!0,ids:[],rows:[],dateRange:[],single:!0,multiple:!0,many:!0,showSearch:!0,total:0,billList:[],billListPart:[],rollLoadTimes:0,billTypeOptions:[],title:"",open:!1,flagopen:!1,sapopen:!1,billSplitTypeOptions:[],templateOptions:[],invTypeOptions:[],billStatusOptions:[],detailFlagOptions:[],applyStatusOptions:[],redFlagOptions:[],taxnoIdOptions:[],billSourceOptions:[],headTypeOptions:[],queryParams:{billNos:null,pageNum:1,pageSize:500,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null,tdyslxdm:"",shopNo:null},form:{},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(r["a"])()},url:"/prod-api/output/bill/importBillData"},flagForm:{},rules:{},openInvoiceIndex:0,openIdsArr:[],openRowsArr:[],openResult:[],openSuccess:[],openValidIndex:0,openValidError:[],openEnd:!1,flagRules:{invCode:[{required:!0,message:"请输入发票代码",trigger:["change","blur"]},{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:["blur","change"]}],invNo:[{required:!0,message:"请输入发票号码",trigger:["change","blur"]},{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:"blur"}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:"blur"}]},operationIndex:0,operationIdArr:[],operationRowArr:[],columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据类型",prop:"billType",align:"center",show:!0,width:180,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:180,columnSort:2},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:180,columnSort:3},{label:"购方编号",prop:"buyNumber",align:"center",show:!0,width:180,columnSort:4},{label:"单据来源",prop:"billSource",align:"center",show:!0,width:180,columnSort:5},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:180,columnSort:6},{label:"拆分状态",prop:"billSplitType",align:"center",show:!0,width:180,columnSort:7},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:180,columnSort:8},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:180,columnSort:9},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:180,columnSort:10},{label:"红字申请单",prop:"negNativeNo",align:"center",show:!0,width:200,columnSort:11}],stockInfoOpen:!1,stockInfoForm:{fpdm:null,fphm:null,fpfs:null,fplx:null},sortParam:{column:"",columnOrder:""},copyInvoiceOpen:!1,copyInvoiceForm:{invType:"81",invCode:null,invNo:null},copyInvoiceFormRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^(\d{8}|\d{20})$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]},checkboxClick:!1,loadingTime:null,kpdy:null,print:{open:!1,invType:"",invCode:"",invNo:""},ignore:!1,preOperationType:null,ERPImportDialog:{open:!1,form:{sBill:"",eBill:"",billType:"2"},loading:!1,tableHeight:0,tableList:[],rows:[],columnsArr:[{label:"单据编号",prop:"billNo",align:"center",show:!0,width:220,columnSort:0},{label:"单据日期",prop:"bizDate",align:"center",show:!0,width:220,columnSort:1},{label:"开票类型",prop:"invType",align:"center",show:!0,width:220,columnSort:2},{label:"客户编码",prop:"buyNumber",align:"center",show:!0,width:220,columnSort:3},{label:"客户名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:4},{label:"客户税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:5},{label:"客户地址电话",prop:"buyAddrTel",align:"center",show:!0,width:220,columnSort:6},{label:"客户银行账号",prop:"buyBankAccount",align:"center",show:!0,width:220,columnSort:7},{label:"不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:8},{label:"税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:9},{label:"含税金额",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:10},{label:"税率",prop:"rate",align:"center",show:!0,width:220,columnSort:11},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:12},{label:"单据类型",prop:"billType",align:"center",show:!0,width:220,columnSort:13},{label:"单据ID",prop:"id",align:"center",show:!0,width:220,columnSort:14}]}}},computed:{totalTableData:function(){var e=Object(k["e"])(this.rows);return 0==e.length&&(e=Object(k["e"])(this.billList)),e},setFontColor:function(){return function(e){return"1"==e.allStatus?"color: violet;cursor: pointer;":"2"==e.allStatus?"color: blue;cursor: pointer;":"3"==e.allStatus?"color: red;cursor: pointer;":"4"==e.allStatus?"color: orange;cursor: pointer;":"5"==e.allStatus?"color: green;cursor: pointer;":"color: rgb(24, 144, 255);cursor: pointer;"}}},created:function(){var e=this,t={module:this.module};Promise.all([Object(p["b"])(t),Object(p["a"])(t)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)null==e.columnsArr[n].width&&("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:e.columnsArr[n].width=100)}}));var a=this.$moment(new Date);this.dateRange=[a.startOf("month").format("YYYY-MM-DD"),a.endOf("month").format("YYYY-MM-DD")],this.getDicts("split_status").then((function(t){e.billSplitTypeOptions=t.data})),this.getDicts("bill_type").then((function(t){e.billTypeOptions=t.data})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data})),Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data),e.getList()})),this.getDicts("sys_bill_source").then((function(t){e.billSourceOptions=t.data})),this.getDicts("bill_status").then((function(t){e.billStatusOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data,e.redFlagOptions=t.data,e.taxnoIdOptions=t.data})),this.getDicts("approve_status").then((function(t){e.applyStatusOptions=t.data})),this.getDicts("title_type").then((function(t){e.headTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),Object(h["a"])().then((function(t){200==t.code&&(e.kpdy=t.data.kpdy)})),this.ERPImportDialog.tableHeight=.6*document.body.clientHeight},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.bodyHeight=document.body.clientHeight,window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.bodyHeight=document.body.clientHeight}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),this.bodyHeight=document.body.clientHeight,window.onresize=function(){e.tableHeight=e.calcTableHeight(),e.bodyHeight=document.body.clientHeight}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.billMainTable.doLayout()}))},importTemplate:function(){var e="/";"/"===e&&(e=""),document.location=e+"/data/ImportBillTemp.xlsx"},getList:function(){var e=this;if(null!=this.dateRange){this.loading=!0,this.queryParams.autoOpen="0",this.queryParams.beginBizDate=this.dateRange[0]+" 00:00:00",this.queryParams.endBizDate=this.dateRange[1]+" 23:59:59";var t=Object.assign(Object(k["e"])(this.queryParams),Object(k["e"])(this.sortParam));t.invType?t.invTypes=new Array(t.invType):t.invTypes=this.invTypeOptions.reduce((function(e,t){return e.push(t.dictValue),e}),[]),Object(l["o"])(t).then((function(t){e.billList=t.rows;var a,n=Object(o["a"])(e.billList);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.$set(i,"showInput",!1)}}catch(r){n.e(r)}finally{n.f()}e.total=t.total,e.loading=!1}))}else this.msgError("请选择单据日期")},getTaxNoSeller:function(e){var t=this;["81","82","85","86"].includes(e.invType)?Object(s["b"])().then((function(a){var n,i=a.sellers;if(null==i||0==i.length)return t.flagopen=!0,void t.$nextTick((function(){t.$refs.flagForm.clearValidate()}));for(var o=0;o<i.length;o++)if("1"==i[o].status){n=i[o];break}null==n&&(n=i[0]),t.$set(t.flagForm,"invoicer",n.drawer),["85","86"].includes(e.invType)&&(t.$set(t.flagForm,"checker",n.checker),t.$set(t.flagForm,"cashier",n.drawer)),t.flagopen=!0,t.$nextTick((function(){t.$refs.flagForm.clearValidate()}))})):Object(l["m"])().then((function(e){var a,n=e.sellers;if(null==n||0==n.length)return t.flagopen=!0,void t.$nextTick((function(){t.$refs.flagForm.clearValidate()}));for(var i=0;i<n.length;i++)if("1"==n[i].status){a=n[i];break}null==a&&(a=n[0]),t.$set(t.flagForm,"cashier",a.payee),t.$set(t.flagForm,"checker",a.checker),t.$set(t.flagForm,"invoicer",a.drawer),t.flagopen=!0,t.$nextTick((function(){t.$refs.flagForm.clearValidate()}))}))},billSplitTypeFormat:function(e,t){return this.selectDictLabel(this.billSplitTypeOptions,e.billSplitType)},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},billTypeFormat:function(e,t){return this.selectDictLabel(this.billTypeOptions,e.billType)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.billStatus)},billSourceFormat:function(e,t){return this.selectDictLabel(this.billSourceOptions,e.billSource)},detailFlagFormat:function(e,t){return this.selectDictLabel(this.detailFlagOptions,e.detailFlag)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},redFlagFormat:function(e,t){return this.selectDictLabel(this.redFlagOptions,e.redFlag)},taxnoIdFormat:function(e,t){return this.selectDictLabel(this.taxnoIdOptions,e.taxnoId)},headTypeFormat:function(e,t){return this.selectDictLabel(this.headTypeOptions,e.headType)},cancel:function(){this.open=!1,this.reset()},flagCancel:function(){this.flagopen=!1,this.flagReset()},flagReset:function(){this.flagForm={id:null,invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,cashier:null,checker:null,invoicer:null,checkCode:null,pwdCode:null},this.resetForm("flagForm")},reset:function(){this.form={id:null,billGuid:null,billNo:null,billType:null,billSplitType:null,invType:null,detailFlag:null,billStatus:"0",applyStatus:null,billSource:null,bizDate:null,buyName:null,buyNumber:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,buyEmail:null,buyTelNo:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,goodsVersion:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,sourceInvCode:null,sourceInvNo:null,redFlag:null,negNativeNo:null,taxnoId:null,deleteFlag:null,createBy:null,updateBy:null,createTime:null,updateTime:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,billNumber:null,vatFailDes:null,headType:null,vouchType:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},flagOpen:function(){var e=this.rows;this.$set(this.flagForm,"id",e[0].id),this.$set(this.flagForm,"invType",e[0].invType),this.$set(this.flagForm,"bizDate",e[0].bizDate),this.$set(this.flagForm,"totalAmountWithoutTax",e[0].totalAmountWithoutTax),this.getTaxNoSeller(e[0])},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if("default"==t){if(e.length<this.rows.length&&this.checkboxClick)return void(this.checkboxClick=!1);this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.many=e.length<2,this.rows=e}else"ERPImport"==t&&(this.ERPImportDialog.rows=e)},handleAdd:function(){var e=this;this.reset(),this.$refs.billdetailcomp.billDialogShow(),this.$refs.billdetailcomp.editDialogTitle("1"),this.$nextTick((function(){e.$refs.billdetailcomp.getBillNo()}))},checkBaseInfo:function(){var e=this;return Object(l["d"])().then((function(t){return 1001==t.code?(e.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){})),new Promise((function(){}))):2002==t.code?(e.$confirm("您还未启用税盘，是否跳转到终端启用管理页面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"Usemanager"})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid1:function(){var e,t=this,a=!1;return["81","82","85","86"].includes(this.openRowsArr[0].invType)?(e=Object(s["a"])(),a=!0):e=Object(l["d"])(),Promise.all([e]).then((function(e){return 1001==e[0].code?(t.showProgress=!1,clearInterval(t.loadingTime),t.$confirm("您还未维护纳税人主体信息，是否跳转到维护界面?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/base/info")})).catch((function(){})),new Promise((function(){}))):2002==e[0].code?(t.showProgress=!1,clearInterval(t.loadingTime),t.$confirm("".concat(a?"全电账号需要刷脸验证，是否跳转到账号管理页面?":"您还未启用税盘，是否跳转到终端启用管理页面?"),"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({name:"Usemanager",params:{isQd:a}})})).catch((function(){})),new Promise((function(){}))):void 0}))},openValid2:function(){var e=this;if(this.openValidIndex++,this.openValidIndex<=this.openIdsArr.length&&!this.openEnd)this.invoiceOwnValid(this.openValidIndex-1);else{var t=this.openRowsArr.filter((function(t,a){return-1==e.openValidError.indexOf(t.id)}));this.openEnd||(t.length>0?(this.openRowsArr=Object(k["e"])(t),this.openIdsArr=t.reduce((function(e,t){return e.push(t.id),e}),[]),this.openValidSuccess()):(this.msgError("请重新选择发票"),this.showProgress=!1,clearInterval(this.loadingTime))),this.openValidIndex=0,this.openValidError.length=0,this.openEnd=!1}},invoiceOwnValid:function(e){var t=this,a=this.openIdsArr[e],n={id:a,beginBizDate:this.dateRange[0]+" 00:00:00",endBizDate:this.dateRange[1]+" 23:59:59"},i='<label><input style="vertical-align: middle" type="checkbox" name="postReleaseInvoiceRed" />&nbsp;本次剩余操作忽略弹窗！</label>',o=Object(l["z"])(n);return Promise.all([o]).then((function(n){if("200"!=n[0].code)if(t.ignore)"1"==t.preOperationType?(t.openValidError.push(a),t.openValid2()):"2"==t.preOperationType&&t.openValid2();else if(e==t.openIdsArr.length-1)t.$confirm(n[0].msg,"警告",{confirmButtonText:"完成",cancelButtonText:"继续",distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.openValidError.push(a),t.openValid2()})).catch((function(e){"cancel"==e||(t.openEnd=!0),t.openValid2()}));else{var o=n[0].msg+",是否继续开票?<br/>"+i;t.$confirm(o,"警告",{confirmButtonText:"跳过",cancelButtonText:"继续",dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,type:"warning"}).then((function(){t.ignore=document.getElementsByName("postReleaseInvoiceRed")[0].checked,t.preOperationType="1",t.openValidError.push(a),t.openValid2()})).catch((function(e){t.ignore=document.getElementsByName("postReleaseInvoiceRed")[0].checked,t.preOperationType="2","cancel"==e||(t.openEnd=!0),t.openValid2()}))}else t.openValid2()}))},handleUpdate:function(e){var t=this;void 0==e.id&&(e=this.rows[0]),this.reset();var a=e.id||this.ids[0],n={id:a,bizDate:e.bizDate};this.mainLoading=!0,this.$refs.billdetailcomp.fillBillDialog(n).then((function(e){t.mainLoading=!1})).catch((function(){t.mainLoading=!1}))},adjustError:function(e){var t=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="误差调整中",this.$nextTick((function(){t.$refs.myProgress.progressGrow(parseInt(1/t.operationRowArr.length*100)),t.$refs.myProgress.setProgressNum(0)})),this.adjustErrorLogic()},adjustErrorLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(l["b"])(t).then((function(t){200==t.code?e.msgSuccess("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg):e.msgError("单据编号["+e.operationRowArr[e.operationIndex-1].billNo+"]"+t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.adjustErrorLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(l["v"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(l["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},submitFlagForm:function(){var e=this;this.$refs["flagForm"].validate((function(t){if(t){Object(w["g"])(100,"标记中",e,!1);var a,n,i,o=Object(k["e"])(e.flagForm);if(o.pwdCode=window.btoa(o.pwdCode),["81","82"].includes(o.invType))o.invCode=null===(n=o.invNo)||void 0===n?void 0:n.substr(0,12),o.invNo=null===(i=o.invNo)||void 0===i?void 0:i.substr(12),a=Object(l["i"])(o);else a=["85","86"].includes(o.invType)?Object(l["i"])(o):Object(l["h"])(o);Promise.all([a]).then((function(t){var a=t[0];200===a.code?(e.msgSuccess("标记成功"),e.flagopen=!1,e.getList()):e.msgError(a.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime)}))}}))},flagopenDialogClose:function(){this.flagForm={}},synchClassCode:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否同步所选商品税收编码?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="同步中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["u"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.dateRange;this.$confirm("是否确认删除所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=50*t.ids.length/100,i=1;t.showProgress=!0,t.functionName="删除中",t.$nextTick((function(){t.$refs.myProgress.setProgressNum(1)}));var o=setInterval((function(){i++,i<=99&&t.$refs.myProgress.progressGrow(i)}),e);Object(l["e"])(a,n).then((function(e){clearInterval(o),t.showProgress=!1,t.getList(),200==e.code?t.msgSuccess(e.msg):t.msgError(e.msg)}))})).catch((function(){}))},handleOpen:function(e){var t=this;if(!this.queryParams.invType&&!e.id&&this.ids.length>1)this.msgError("发票类型搜索条件为空时只允许开具一行！");else{var a=e.id||this.ids;"[object Array]"!=Object.prototype.toString.call(a)&&(a=new Array(a)),this.operationIndex=0,this.openIdsArr=Object(k["e"])(a);var n=void 0!=e.id?e:this.rows;"[object Array]"!=Object.prototype.toString.call(n)&&(n=new Array(n)),this.openRowsArr=Object(k["e"])(n),this.$confirm("是否确认开具所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(w["g"])(100,"加载中",t,!1),t.openValid1()})).then((function(){t.ignore=!1,t.preOperationType=null,t.openValid2()})).catch((function(e){console.log("开票执行中断了"),t.showProgress=!1,clearInterval(t.loadingTime)}))}},openValidSuccess:function(){var e=this;if(console.log("校验完成了!!!!"),["81","82","85","86"].includes(this.openRowsArr[0].invType))this.sureStockInfo();else{var t=this.openRowsArr[0].invType,a={invType:t};Object(d["b"])(a).then((function(t){200==t.code?(t.data.fphm&&t.data.fphm.length<8&&(t.data.fphm=new Array(8-t.data.fphm.length).fill(0).join("")+t.data.fphm),e.stockInfoForm=t.data,e.stockInfoForm.fplx=e.selectDictLabel(e.invTypeOptions,e.stockInfoForm.fplx),e.stockInfoOpen=!0):e.msgError(t.msg),e.showProgress=!1,clearInterval(e.loadingTime)})).catch((function(){e.msgError("获取税盘库存信息失败"),e.showProgress=!1,clearInterval(e.loadingTime)}))}},sureStockInfo:function(){var e=this;this.$refs.billdetailcomp.dialogClose(),this.showProgress=!0,this.functionName="开具中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.openIdsArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.stockInfoOpen=!1,this.openInvoiceList()},stockInfoClose:function(){this.stockInfoForm={fpdm:null,fphm:null,fpfs:null,fplx:null}},openInvoiceList:function(){var e=this;this.openInvoiceIndex++,1!=this.openInvoiceIndex&&this.$refs.myProgress.progressGrow(parseInt(this.openInvoiceIndex/this.openIdsArr.length*100));var t=this.openRowsArr[this.openInvoiceIndex-1];t.beginBizDate=this.dateRange[0]+" 00:00:00",t.endBizDate=this.dateRange[1]+" 23:59:59";var a=!1;this.openInvoice(t).then((function(n){console.log("dang qian row:"+t),"200"==n.code?(e.openSuccess.push(n.data),e.msgSuccess("第"+e.openInvoiceIndex+"张单据"+n.msg)):1008==n.code?(a=!0,e.$confirm(n.msg+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"跳过",type:"warning",closeOnClickModal:!1}).then((function(){e.specialOpenInvoice(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){e.openInvoiceIndex>=e.openRowsArr.length?("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))):1009==n.code?Object(f["e"])({taxNo:t.buyTaxNo}).then((function(t){var a=t.data,i="0"==a.gfxxconfirm,o='<input style="vertical-align: middle" type="checkbox" name="forceOpen" '.concat(i?"checked":"","/>");e.$confirm(n.msg+'?<br/><label style="height: 30px;display: inline-block">'.concat(o,"&nbsp;是否需要强开</label>"),"警告",{confirmButtonText:"是",cancelButtonText:"否",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){var t=document.getElementsByName("forceOpen")[0].checked;a.gfxxconfirm=t?"0":"1",Object(f["g"])(a),e.specialOpenInvoiceByNoBuy(e.openRowsArr[e.openInvoiceIndex-1])})).catch((function(){var t=document.getElementsByName("forceOpen")[0].checked;a.gfxxconfirm=t?"0":"1",Object(f["g"])(a),e.openInvoiceIndex>=e.openRowsArr.length?("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.openInvoiceList()}))})):e.msgError("第"+e.openInvoiceIndex+"张单据开具失败："+n.msg),a||(e.openResult.push(n),e.$refs.myProgress.setProgressNum(parseInt(e.openInvoiceIndex/e.openIdsArr.length*100)),e.openInvoiceIndex<e.openIdsArr.length?e.openInvoiceList():("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()))})).catch((function(t){console.log("这里是失败的"),e.openInvoiceIndex>=e.openIdsArr.length?("1"==e.kpdy&&1==e.openSuccess.length&&"51"!=e.openSuccess[0].invType&&"52"!=e.openSuccess[0].invType?(e.print.invType=e.selectDictLabel(e.invTypeOptions,e.openSuccess[0].invType),e.print.invCode=e.openSuccess[0].invCode,e.print.invNo=e.openSuccess[0].invNo,e.print.open=!0):e.openSuccess=[],e.showProgress=!1,e.$refs.myProgress.setProgressNum(0),e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()):e.$confirm(t.message+"是否继续开具单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.openInvoiceList()})).catch((function(){e.showProgress=!1,e.openInvoiceIndex=0,e.openResult=[],e.openIdsArr=[],e.getList()}))}))},openInvoice:function(e){var t=e.id,a={id:t,bizDate:e.bizDate};return["81","82","85","86"].includes(e.invType)?Object(s["c"])(a):Object(l["p"])(a)},specialOpenInvoice:function(e){var t=this,a={id:e.id,bizDate:e.bizDate,special:"1"};Object(l["p"])(a).then((function(e){"200"==e.code?t.msgSuccess("第"+t.openInvoiceIndex+"张单据"+e.msg):t.msgError("第"+t.openInvoiceIndex+"张单据开具失败："+e.msg),t.$refs.myProgress.setProgressNum(parseInt(t.openInvoiceIndex/t.openIdsArr.length*100)),t.openInvoiceIndex<t.openIdsArr.length?t.openInvoiceList():(t.showProgress=!1,t.$refs.myProgress.setProgressNum(0),t.openInvoiceIndex=0,t.openResult=[],t.openIdsArr=[],t.getList())}))},specialOpenInvoiceByNoBuy:function(e){var t=this,a={id:e.id,bizDate:e.bizDate,gfxxconfirm:"0"};Object(l["p"])(a).then((function(e){"200"==e.code?t.msgSuccess("第"+t.openInvoiceIndex+"张单据"+e.msg):t.msgError("第"+t.openInvoiceIndex+"张单据开具失败："+e.msg),t.$refs.myProgress.setProgressNum(parseInt(t.openInvoiceIndex/t.openIdsArr.length*100)),t.openInvoiceIndex<t.openIdsArr.length?t.openInvoiceList():(t.showProgress=!1,t.$refs.myProgress.setProgressNum(0),t.openInvoiceIndex=0,t.openResult=[],t.openIdsArr=[],t.getList())}))},handleImport:function(){this.upload.title="单据导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()},handleExport:function(){var e=this,t=Object(k["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["f"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理.xls",e)})).catch((function(){}))},handleDetailExport:function(){var e=this,t=Object(k["e"])(this.queryParams);this.rows;t.idsArr=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(l["g"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"单据管理详情.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default";if("default"==n){var i={row:e},o=[];o.push(i),this.$refs.billMainTable.toggleRowSelection(o),this.selectMiddleRow(e,this.rows,this.billList,"billMainTable")}else if("ERPImport"==n){var r={row:e},l=[];l.push(r),this.$refs.ERPImportMainTable.toggleRowSelection(l)}},checkboxSelect:function(e,t){this.selectMiddleRow(t,this.rows,this.billList,"billMainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},updateBillTable:function(){this.getList()},splitBill:function(){var e=this.rows[0];if("2"!=e.billSplitType){var t={id:e.id,bizDate:e.bizDate};this.$refs.splitModal.fillBillDialog(t)}else this.msgError("该单据已进行过合并，不能拆分")},revertBill:function(){var e=this;"0"!=this.rows[0].billSplitType?this.$confirm("是否确认还原所选单据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIdArr=Object(k["e"])(e.ids),e.operationRowArr=Object(k["e"])(e.rows),e.showProgress=!0,e.functionName="还原中",e.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),e.revertBillLogic()})).catch((function(){})):this.msgError("该单据未进行过拆分合并，不能还原")},revertBillLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=this.dateRange;Object(l["r"])(t,a).then((function(t){200==t.code?e.msgSuccess("第"+e.operationIndex+"张单据"+t.msg):e.msgError("第"+e.operationIndex+"张单据还原失败:"+t.msg),e.operationIndex<e.operationIdArr.length?e.revertBillLogic():(e.renewOperationParam(),e.getList())})).catch((function(){e.renewOperationParam(),e.getList()}))},renewOperationParam:function(){this.showProgress=!1,this.$refs.myProgress.setProgressNum(0),this.operationIndex=0,this.operationIdArr=[],this.operationRowArr=[]},manualMergeBill:function(){for(var e=1;e<this.rows.length;e++)if(this.rows[0].invType!=this.rows[e].invType)return void this.msgError("合并时所选单据类型必须一致");for(var t=0;t<this.rows.length;t++)if("1"==this.rows[t].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var a=this.ids,n=this.dateRange;this.$refs.mergeModal.mergeDialogShow(a,n)},defaultMergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n={billIds:this.ids,bizDateRange:this.dateRange,goodCode:"1",withoutTaxAmoutLimit:"",noteDealType:"2",mergeType:"5",billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["c"])(n).then((function(t){clearInterval(e.loadingTime),e.showProgress=!1;var a=t.object;if(0!=a.length){for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}else e.msgError(t.msg)}))},businessNosChange:function(e){e.target.value=e.target.value.trim().replace(/\s+/g,","),this.queryParams.billNos=e.target.value},ccdmergeBill:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=0;a<this.rows.length;a++)if("1"==this.rows[a].billSplitType)return void this.msgError("已进行过拆分的单据不能再合并");var n=this.ids,i=this.dateRange,o={billIds:n,bizDateRange:i,billSplitType:"2"};this.dynamicLoadingShow(400,"合并中"),Object(c["a"])(o).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))},ccdmergeBillTs:function(){for(var e=this,t=1;t<this.rows.length;t++)if(this.rows[0].invType!=this.rows[t].invType)return void this.msgError("合并时所选单据类型必须一致");for(var a=!1,n=0;n<this.rows.length;n++)if("1"==this.rows[n].billSplitType){a=!0;break}if(a){var i=this.ids,o=this.dateRange,r={billIds:i,bizDateRange:o,billSplitType:"3"};this.dynamicLoadingShow(400,"特殊合并中"),Object(c["b"])(r).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime);var a=t.object;if(void 0==a||a.length<1)e.msgError(t.msg);else{for(var n=0;n<a.length;n++)200==a[n].code?e.msgSuccess(a[n].msg):e.msgError(a[n].msg);e.getList()}})).catch((function(t){e.msgError(t.message)}))}else this.msgError("特殊合并时所选单据必须含有拆分状态")},splitByAmount:function(){for(var e=this,t=0;t<this.rows.length;t++)if("2"==this.rows[t].billSplitType)return void this.msgError("存在单据已进行过合并，不能拆分");this.operationIdArr=Object(k["e"])(this.ids),this.operationRowArr=Object(k["e"])(this.rows),this.showProgress=!0,this.functionName="拆分中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationIdArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.splitByAmountLogic()},splitByAmountLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationIdArr.length*100));var t=this.operationIdArr[this.operationIndex-1],a=null,n={id:t,roundingNumber:a,bizDate:this.operationRowArr[this.operationIndex-1].bizDate};Object(u["b"])(n).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.operationIndex<e.operationIdArr.length?e.splitByAmountLogic():(e.renewOperationParam(),e.getList())})).catch((function(t){e.renewOperationParam(),e.getList()}))},handleInvTypeUpdate:function(){this.updateInvTypeOpen=!0},submitUpdateInvType:function(){var e=this,t=Object(k["e"])(this.dateRange);t[0]=t[0]+" 00:00:00",t[1]=t[1]+" 23:59:59";var a={ids:Object(k["e"])(this.ids),dateRange:t,invType:this.updateInvTypeForm.invType};Object(l["y"])(a).then((function(t){200==t.code?(e.msgSuccess(t.msg),e.updateInvTypeOpen=!1,e.getList()):e.msgError(t.msg)}))},updateInvTypeDialogClose:function(){this.updateInvTypeForm={invType:"2"}},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;return t.row_index=a,"1"==t.allStatus?"violet":"2"==t.allStatus?"deep-blue":"3"==t.allStatus?"red":"4"==t.allStatus?"orange":"5"==t.allStatus?"green":void 0},noteInputBlur:function(e){e.showInput=!1;var t={id:e.id,bizDate:e.bizDate,note:e.note};Object(l["w"])(t);for(var a=0;a<this.billList.length;a++)this.billList[a].showInput=!1},cellClick:function(e,t){"note"==t.property?0==e.showInput&&(e.showInput=!e.showInput):e.showInput=!1},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},copyInvoice:function(){var e=this;this.copyInvoiceOpen=!0,this.$nextTick((function(){e.$refs.copyInvoiceForm.clearValidate()}))},copyInvoiceClose:function(){this.copyInvoiceForm={invType:81,invCode:null,invNo:null}},sureCopyInvoice:function(){var e=this;this.$refs.copyInvoiceForm.validate((function(t){var a;t&&(a=["81","82"].includes(e.copyInvoiceForm.invType)?{invCodeNo:e.copyInvoiceForm.invNo.substr(0,12)+"_"+e.copyInvoiceForm.invNo.substr(12)}:{invCodeNo:e.copyInvoiceForm.invCode+"_"+e.copyInvoiceForm.invNo},e.$refs.billdetailcomp.fillBillDialogByInvCodeNo(a).then((function(t){0!=t&&(e.copyInvoiceOpen=!1)})))}))},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)},handleSplitMergePreview:function(){var e=this;if("0"!=this.rows[0].billSplitType){var t={id:this.rows[0].id,bizDate:this.rows[0].bizDate};this.mainLoading=!0,Object(l["t"])(t).then((function(t){e.mainLoading=!1,200==t.code?t.data.length>0?(e.splitMergePreviewOpen=!0,e.splitMergeList=t.data):e.splitMergeList=[]:e.msgError(t.msg)})).catch((function(){e.mainLoading=!1}))}else this.msgError("此单据未进行拆分合并")},splitMergePreviewClose:function(){},printSure:function(){var e=this;this.print.open=!1;var t={id:this.openSuccess[0].id,invDate:this.openSuccess[0].invDate,isDetail:"0",isPre:"0"};Object(w["g"])(200,"发票号码\n【"+this.openSuccess[0].invNo+"】\n正在被打印",this,!1),Object(m["A"])(t).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?e.msgSuccess("[发票代码:"+e.openSuccess[0].invCode+",发票号码:"+e.openSuccess[0].invNo+"]"):(e.msgError("当前发票号码【"+e.openSuccess[0].invNo+"】打印失败，"+t.msg),e.print.open=!1),e.openSuccess=[]})).catch((function(){e.showProgress=!1,clearInterval(e.loadingTime),e.msgError("当前发票号码【"+e.openSuccess[0].invNo+"】打印失败，请确认"),e.print.open=!1,e.openSuccess=[]}))},handleERPImport:function(){this.ERPImportDialog.open=!0},handleERPImportQuery:function(){var e=this,t=Object(k["e"])(this.ERPImportDialog.form);this.ERPImportDialog.loading=!0,Object(l["n"])(t).then((function(t){200==t.code?(e.ERPImportDialog.tableList=t.data,e.ERPImportDialog.loading=!1):e.msgError(t.msg)}))},ERPImportSave:function(){var e=this;this.$vLoading.show(),Object(l["c"])(this.ERPImportDialog.rows).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess(t.msg),e.ERPImportDialog.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))},ERPImportDialogClose:function(){this.ERPImportDialog.form={sBill:"",eBill:"",billType:""},this.ERPImportDialog.tableList=[],this.ERPImportDialog.rows=[]}}},D=T,S=(a("ee70"),a("2877")),O=Object(S["a"])(D,n,i,!1,null,"124df45b",null);t["default"]=O.exports},cf2a:function(e,t,a){"use strict";a("c881")},cf99:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return u}));var n=a("b775");function i(e){return Object(n["a"])({url:"/ticket/personalOther/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/ticket/personalOther/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/ticket/personalOther",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/ticket/personalOther",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/ticket/personalOther/deletePersonalInvoice",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/ticket/personalOther/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/ticket/personalOther/changeInvInfo",method:"post",data:e})}},d064:function(e,t,a){},d0b2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-dialog"},[a("el-dialog",e._g(e._b({attrs:{width:"980px","modal-append-to-body":!1},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{attrs:{slot:"title"},slot:"title"},[e._v(" 选择图标 "),a("el-input",{style:{width:"260px"},attrs:{size:"mini",placeholder:"请输入图标名称","prefix-icon":"el-icon-search",clearable:""},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}})],1),a("ul",{staticClass:"icon-ul"},e._l(e.iconList,(function(t){return a("li",{key:t,class:e.active===t?"active-item":"",on:{click:function(a){return e.onSelect(t)}}},[a("i",{class:t}),a("div",[e._v(e._s(t))])])})),0)])],1)},i=[],o=(a("d81d"),a("4de4"),a("d3b7"),a("de0a")),r=o.map((function(e){return"el-icon-".concat(e)})),l={inheritAttrs:!1,props:["current"],data:function(){return{iconList:r,active:null,key:""}},watch:{key:function(e){this.iconList=e?r.filter((function(t){return t.indexOf(e)>-1})):r}},methods:{onOpen:function(){this.active=this.current,this.key=""},onClose:function(){},onSelect:function(e){this.active=e,this.$emit("select",e),this.$emit("update:visible",!1)}}},s=l,c=(a("8b93"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"2fa68d6e",null);t["default"]=u.exports},d0ce:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"购销选择",prop:"applyType"}},[a("el-select",{attrs:{placeholder:"请选择申请方式",clearable:"",size:"small"},model:{value:e.queryParams.applyType,callback:function(t){e.$set(e.queryParams,"applyType",t)},expression:"queryParams.applyType"}},[a("el-option",{attrs:{label:"销方申请",value:"0"}}),a("el-option",{attrs:{label:"购方申请",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"红冲原因",prop:"reason"}},[a("el-input",{attrs:{placeholder:"请输入红冲原因",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reason,callback:function(t){e.$set(e.queryParams,"reason",t)},expression:"queryParams.reason"}})],1),a("el-form-item",{attrs:{label:"申请状态",prop:"applyStatus"}},[a("el-select",{attrs:{placeholder:"请选择申请状态",clearable:"",size:"small"},model:{value:e.queryParams.applyStatus,callback:function(t){e.$set(e.queryParams,"applyStatus",t)},expression:"queryParams.applyStatus"}},e._l(e.applyStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"红字单号",prop:"redBillNo"}},[a("el-input",{attrs:{placeholder:"请输入红字发票信息确认单编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.redBillNo,callback:function(t){e.$set(e.queryParams,"redBillNo",t)},expression:"queryParams.redBillNo"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyTaxNo,callback:function(t){e.$set(e.queryParams,"buyTaxNo",t)},expression:"queryParams.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{placeholder:"请输入购方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.buyName,callback:function(t){e.$set(e.queryParams,"buyName",t)},expression:"queryParams.buyName"}})],1),a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellName,callback:function(t){e.$set(e.queryParams,"sellName",t)},expression:"queryParams.sellName"}})],1),a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sellTaxNo,callback:function(t){e.$set(e.queryParams,"sellTaxNo",t)},expression:"queryParams.sellTaxNo"}})],1),a("el-form-item",{attrs:{label:"红字单状态",prop:"redStatus"}},[a("el-select",{attrs:{placeholder:"请选择红字单状态",clearable:"",size:"small"},model:{value:e.queryParams.redStatus,callback:function(t){e.$set(e.queryParams,"redStatus",t)},expression:"queryParams.redStatus"}},e._l(e.billStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"原正数发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入原正数发票号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.sourceInvNo,callback:function(t){e.$set(e.queryParams,"sourceInvNo",t)},expression:"queryParams.sourceInvNo"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:add"],expression:"['qdoutput:redbill:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:edit"],expression:"['qdoutput:redbill:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single||1==e.rows.length&&"00"!=e.rows[0].applyStatus},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:remove"],expression:"['qdoutput:redbill:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:export"],expression:"['qdoutput:redbill:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:cancel"],expression:"['qdoutput:redbill:cancel']"}],attrs:{type:"warning",icon:"el-icon-close",size:"mini",disabled:e.multiple},on:{click:e.handleQdBillCancel}},[e._v("撤销")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:upload"],expression:"['qdoutput:redbill:upload']"}],attrs:{type:"warning",icon:"el-icon-check",size:"mini",disabled:e.multiple},on:{click:e.handleQdBillUpload}},[e._v("申请")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:download"],expression:"['qdoutput:redbill:download']"}],attrs:{type:"warning",icon:"el-icon-bottom",size:"mini"},on:{click:e.handleQdDownload}},[e._v("下载")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:transfer"],expression:"['qdoutput:redbill:transfer']"}],attrs:{type:"warning",icon:"el-icon-refresh",size:"mini",disabled:e.multiple},on:{click:e.handleChangeToBeOpen}},[e._v("转待开")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:approve"],expression:"['qdoutput:redbill:approve']"}],attrs:{type:"warning",icon:"el-icon-check",size:"mini",disabled:e.single},on:{click:e.handleProcess}},[e._v("审核")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"redBillMainTable",attrs:{data:e.redbillList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"购方名称",align:"center",prop:"buyName",width:"200"}}),a("el-table-column",{attrs:{label:"购方税号",align:"center",prop:"buyTaxNo",width:"200"}}),a("el-table-column",{attrs:{label:"原正数发票号码",align:"center",prop:"sourceInvNo",width:"200"}}),a("el-table-column",{attrs:{label:"合计税额",align:"center",prop:"totalTaxAmount"}}),a("el-table-column",{attrs:{label:"价税合计",align:"center",prop:"totalAmount"}}),a("el-table-column",{attrs:{label:"合计不含税金额",align:"center",prop:"totalAmountWithoutTax"}}),a("el-table-column",{attrs:{label:"购销申请",align:"center",prop:"applyType"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.applyType?a("span",[e._v("销方申请")]):a("span",[e._v("购方申请")])]}}])}),a("el-table-column",{attrs:{label:"红冲原因",align:"center",prop:"reason",formatter:e.redReasonFormat}}),a("el-table-column",{attrs:{label:"红字单状态",align:"center",prop:"redStatus",formatter:e.billStatusFormat}}),a("el-table-column",{attrs:{label:"申请状态",align:"center",prop:"applyStatus",formatter:e.applyStatusFormat}}),a("el-table-column",{attrs:{label:"红字单编号",align:"center",prop:"redBillNo"}}),a("el-table-column",{attrs:{label:"确认ID",align:"center",prop:"redBillId"}}),a("el-table-column",{attrs:{label:"销方名称",align:"center",prop:"sellName",width:"200"}}),a("el-table-column",{attrs:{label:"销方税号",align:"center",prop:"sellTaxNo",width:"200"}}),a("el-table-column",{attrs:{label:"原正数发票日期",align:"center",prop:"sourceInvDate",width:"200"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"140",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["00"==t.row.applyStatus?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:edit"],expression:"['qdoutput:redbill:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]):e._e(),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:redbill:remove"],expression:"['qdoutput:redbill:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"申请来源",prop:"applyType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择申请来源"},model:{value:e.form.applyType,callback:function(t){e.$set(e.form,"applyType",t)},expression:"form.applyType"}},[a("el-option",{attrs:{label:"销方申请",value:0}}),a("el-option",{attrs:{label:"购方申请",value:1}})],1)],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发票类型"},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),"81"!=e.form.invType&&"82"!=e.form.invType?a("el-form-item",{attrs:{label:"原正数发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{placeholder:"请输入原正数发票代码",maxlength:12},on:{change:e.sourceInvCodeChange},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode",t)},expression:"form.sourceInvCode"}})],1):e._e(),a("el-form-item",{attrs:{label:"原正数发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入原正数发票号码",maxlength:20},on:{change:e.sourceInvNoChange},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo",t)},expression:"form.sourceInvNo"}})],1),a("el-form-item",{attrs:{label:"原正数发票日期",prop:"sourceInvDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择原正数发票日期",clearable:!1},model:{value:e.form.sourceInvDate,callback:function(t){e.$set(e.form,"sourceInvDate",t)},expression:"form.sourceInvDate"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("下一步")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"添加全电红字单",visible:e.nextDialog.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.nextDialog,"open",t)},close:e.nextDialogClose}},[a("el-form",{ref:"nextDialogForm",attrs:{model:e.nextDialog.form,rules:e.nextDialog.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"申请来源"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择申请来源"},model:{value:e.nextDialog.form.applyType,callback:function(t){e.$set(e.nextDialog.form,"applyType",t)},expression:"nextDialog.form.applyType"}},[a("el-option",{attrs:{label:"销方申请",value:0}}),a("el-option",{attrs:{label:"购方申请",value:1}})],1)],1),a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择发票类型"},model:{value:e.nextDialog.form.invType,callback:function(t){e.$set(e.nextDialog.form,"invType",t)},expression:"nextDialog.form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"红冲原因",prop:"reason"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择红冲原因"},model:{value:e.nextDialog.form.reason,callback:function(t){e.$set(e.nextDialog.form,"reason",t)},expression:"nextDialog.form.reason"}},e._l(e.redReasonOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),"81"!=e.nextDialog.form.invType&&"82"!=e.nextDialog.form.invType?a("el-form-item",{attrs:{label:"原正数发票代码",prop:"sourceInvCode"}},[a("el-input",{attrs:{placeholder:"请输入原正数发票代码"},model:{value:e.nextDialog.form.sourceInvCode,callback:function(t){e.$set(e.nextDialog.form,"sourceInvCode",t)},expression:"nextDialog.form.sourceInvCode"}})],1):e._e(),a("el-form-item",{attrs:{label:"原正数发票号码",prop:"sourceInvNo"}},[a("el-input",{attrs:{placeholder:"请输入原正数发票号码"},model:{value:e.nextDialog.form.sourceInvNo,callback:function(t){e.$set(e.nextDialog.form,"sourceInvNo",t)},expression:"nextDialog.form.sourceInvNo"}})],1),a("el-form-item",{attrs:{label:"原正数发票日期",prop:"sourceInvDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择原正数发票日期",clearable:!1},model:{value:e.nextDialog.form.sourceInvDate,callback:function(t){e.$set(e.nextDialog.form,"sourceInvDate",t)},expression:"nextDialog.form.sourceInvDate"}})],1),a("el-form-item",{attrs:{label:"购方税号",prop:"buyTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入购方税号"},model:{value:e.nextDialog.form.buyTaxNo,callback:function(t){e.$set(e.nextDialog.form,"buyTaxNo",t)},expression:"nextDialog.form.buyTaxNo"}})],1),a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号"},model:{value:e.nextDialog.form.sellTaxNo,callback:function(t){e.$set(e.nextDialog.form,"sellTaxNo",t)},expression:"nextDialog.form.sellTaxNo"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.nextDialogSubmitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.nextDialog.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"下载",visible:e.download.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.download,"open",t)},close:e.downloadDialogClose}},[a("el-form",{ref:"downloadForm",attrs:{model:e.download.form,rules:e.download.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"申请来源"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.download.form.sqly,callback:function(t){e.$set(e.download.form,"sqly",t)},expression:"download.form.sqly"}},[a("el-option",{attrs:{label:"销方申请",value:"0"}}),a("el-option",{attrs:{label:"购方申请",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"录入日期",prop:"sourceInvDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.download.dateRange,callback:function(t){e.$set(e.download,"dateRange",t)},expression:"download.dateRange"}})],1),a("el-form-item",{attrs:{label:"红字信息编码"}},[a("el-input",{model:{value:e.download.form.hzfpxxqrdbh,callback:function(t){e.$set(e.download.form,"hzfpxxqrdbh",t)},expression:"download.form.hzfpxxqrdbh"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.downloadDialogSubmitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.download.open=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"审核",visible:e.process.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.process,"open",t)}}},[a("el-form",{ref:"processForm",attrs:{model:e.process.form,rules:e.process.rules,"label-width":"100px",size:"small"}},[a("el-form-item",[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"同意","inactive-text":"拒绝"},model:{value:e.process.form.flag,callback:function(t){e.$set(e.process.form,"flag",t)},expression:"process.form.flag"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.processDialogSubmitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.process.open=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("caad"),a("e1c9")),r=a("c394"),l=a("ed08"),s={name:"Qdredbill",data:function(){return{tableHeight:null,loading:!0,rows:[],ids:[],single:!0,multiple:!0,showSearch:!0,total:0,redbillList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,applyType:null,reason:null,applyStatus:null,applyDesc:null,redBillNo:null,redBillId:null,invType:null,buyTaxNo:null,buyName:null,sellName:null,sellTaxNo:null,specialTicket:null,redStatus:null,sourceInvNo:null,sourceInvCode:null,sourceInvDate:null,totalTaxAmount:null,totalAmountWithoutTax:null,totalAmount:null,deptId:null},form:{},rules:{applyType:[{required:!0,message:"申请来源不能为空",trigger:"change"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"change"}],sourceInvNo:[{required:!0,message:"原正数发票号码不能为空",trigger:"change"}],sourceInvCode:[{required:!0,message:"原正数发票代码不能为空",trigger:"change"}],sourceInvDate:[{required:!0,message:"原正数发票日期不能为空",trigger:"change"}]},invTypeOptions:[],redReasonOptions:[],billStatusOptions:[],applyStatusOptions:[],nextDialog:{open:!1,form:{applyType:"",invType:"",sourceInvNo:"",sourceInvCode:"",sourceInvDate:"",reason:"",buyTaxNo:"",sellTaxNo:""},rules:{applyType:[{required:!0,message:"申请来源不能为空",trigger:"change"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"change"}],sourceInvNo:[{required:!0,message:"原正数发票号码不能为空",trigger:"change"}],sourceInvCode:[{required:!0,message:"原正数发票代码不能为空",trigger:"change"}],sourceInvDate:[{required:!0,message:"原正数发票日期不能为空",trigger:"change"}],reason:[{required:!0,message:"红冲原因不能为空",trigger:"change"}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"change"}]}},operationIndex:0,download:{open:!1,form:{sqly:"",hzfpxxqrdbh:""},dateRange:[],rules:{}},process:{open:!1,form:{flag:"0"},rules:{}}}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;if(this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()},this.$route.params.invNo){var t=this.$route.params.invNo,a=this.$route.params.invCode,n=this.$route.params.invType;this.handleAdd(),this.form.sourceInvCode=a,this.form.sourceInvNo=t,this.form.invType=n,this.sourceInvNoChange()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getList(),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("qd_red_reason").then((function(t){e.redReasonOptions=t.data})),this.getDicts("qd_red_bill_status").then((function(t){e.billStatusOptions=t.data})),this.getDicts("qd_red_bill_apply_status").then((function(t){e.applyStatusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,Object(o["g"])(this.queryParams).then((function(t){e.redbillList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={applyType:0,invType:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:""}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},redReasonFormat:function(e,t){return this.selectDictLabel(this.redReasonOptions,e.reason)},billStatusFormat:function(e,t){return this.selectDictLabel(this.billStatusOptions,e.redStatus)},applyStatusFormat:function(e,t){return this.selectDictLabel(this.applyStatusOptions,e.applyStatus)},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.rows=e,this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){var e=this;this.reset(),this.open=!0,this.title="添加全电红字单",this.$nextTick((function(){e.$refs.form.clearValidate()}))},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(o["f"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改全电红字单",t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){for(var a in e.form)e.nextDialog.form[a]=e.form[a];e.nextDialog.open=!0,e.$nextTick((function(){e.$refs.nextDialogForm.clearValidate()}))}}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除全电红字单编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有全电红字单数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["d"])(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},currClickRow:function(e,t,a){this.$refs.redBillMainTable.toggleRowSelection(e)},nextDialogSubmitForm:function(){var e=this;this.$refs.nextDialogForm.validate((function(t){t&&(e.open=!1,e.nextDialog.open=!1,null!=e.nextDialog.form.id?Object(o["l"])(e.nextDialog.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.getList())})):Object(o["a"])(e.nextDialog.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.getList())})))}))},nextDialogClose:function(){this.nextDialog.form={applyType:"",invType:"",sourceInvNo:"",sourceInvCode:"",sourceInvDate:"",reason:"",buyTaxNo:"",sellTaxNo:""}},handleQdBillCancel:function(){var e=this;this.$confirm("确定撤销吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.handleQdBillCancelLogic(),e.$vLoading.show()})).catch((function(){}))},handleQdBillCancelLogic:function(){var e=this;if(this.operationIndex<this.rows.length){var t=Object(l["e"])(this.rows[this.operationIndex++]);delete t.params,Object(o["h"])(t).then((function(t){200==t.code?e.msgSuccess("撤销成功"):e.msgError(t.msg),e.handleQdBillCancelLogic()})).catch((function(){e.handleQdBillCancelLogic()}))}else this.$vLoading.hide(),this.getList()},handleQdBillUpload:function(){var e=this;this.$confirm("确定申请吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.handleQdBillUploadLogic(),e.$vLoading.show()})).catch((function(){}))},handleQdBillUploadLogic:function(){var e=this;if(this.operationIndex<this.rows.length){var t=Object(l["e"])(this.rows[this.operationIndex++]);delete t.params,Object(o["k"])(t).then((function(t){200==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.handleQdBillUploadLogic()})).catch((function(){e.handleQdBillUploadLogic()}))}else this.$vLoading.hide(),this.getList()},handleChangeToBeOpen:function(){var e=this;this.$confirm("确定转代开吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.operationIndex=0,e.handleChangeToBeOpenLogic(),e.$vLoading.show()})).catch((function(){}))},handleChangeToBeOpenLogic:function(){var e=this;if(this.operationIndex<this.rows.length){var t=Object(l["e"])(this.rows[this.operationIndex++]);delete t.params,Object(o["j"])(t).then((function(t){200==t.code?e.msgSuccess("操作成功"):e.msgError(t.msg),e.handleChangeToBeOpenLogic()})).catch((function(){e.handleChangeToBeOpenLogic()}))}else this.$vLoading.hide(),this.getList()},handleQdDownload:function(){var e=this;this.download.open=!0,this.$nextTick((function(){e.$refs.downloadForm.clearValidate()}))},downloadDialogSubmitForm:function(){var e=this;this.download.dateRange&&0!=this.download.dateRange.length?this.$refs.downloadForm.validate((function(t){if(t){var a=Object(l["e"])(e.download.form);a.kprqq=e.download.dateRange[0],a.kprqz=e.download.dateRange[1],e.$vLoading.show(),Object(o["i"])(a).then((function(t){e.$vLoading.hide(),t.code?(e.msgSuccess("下载成功"),e.download.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}})):this.msgError("开票日期不能为空")},downloadDialogClose:function(){this.download.form={sqly:"",hzfpxxqrdbh:""},this.download.dateRange=[]},handleProcess:function(){this.process.open=!0,this.process.form={id:this.rows[0].id,flag:0}},processDialogSubmitForm:function(){var e=this;this.$vLoading.show(),Object(o["b"])(this.process.form).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("审核成功"),e.process.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))},sourceInvCodeChange:function(){var e=this,t={};this.form.invType&&(["81","82"].includes(this.form.invType)?(t.invCode=this.form.sourceInvNo.substr(0,12),t.invNo=this.form.sourceInvNo.substr(12)):(t.invCode=this.form.sourceInvCode,t.invNo=this.form.sourceInvNo),Object(r["w"])(t).then((function(t){200==t.code&&t.rows.length>0?(e.form.sourceInvDate=t.rows[0].invDate,e.nextDialog.form.buyTaxNo=t.rows[0].buyTaxNo,e.nextDialog.form.sellTaxNo=t.rows[0].sellTaxNo):(e.nextDialog.form.buyTaxNo="",e.nextDialog.form.sellTaxNo="",e.$message.warning("未找到对应蓝字发票"))})))},sourceInvNoChange:function(){var e=this,t={};this.form.invType&&(["81","82"].includes(this.form.invType)?(t.invCode=this.form.sourceInvNo.substr(0,12),t.invNo=this.form.sourceInvNo.substr(12),t.invType=this.form.invType):(t.invCode=this.form.sourceInvCode,t.invNo=this.form.sourceInvNo,t.invType=this.form.invType),Object(r["w"])(t).then((function(t){200==t.code&&t.rows.length>0?(e.form.sourceInvDate=t.rows[0].invDate,e.nextDialog.form.buyTaxNo=t.rows[0].buyTaxNo,e.nextDialog.form.sellTaxNo=t.rows[0].sellTaxNo):(e.nextDialog.form.buyTaxNo="",e.nextDialog.form.sellTaxNo="",e.$message.warning("未找到对应蓝字发票"))})))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},d153:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=a("313e"),r=a.n(o),l=a("feb2");a("817d");var s={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["Industries","Technology","Forex","Gold","Forecasts"]},series:[{name:"WEEKLY WRITE ARTICLES",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:[{value:320,name:"Industries"},{value:240,name:"Technology"},{value:149,name:"Forex"},{value:100,name:"Gold"},{value:59,name:"Forecasts"}],animationEasing:"cubicInOut",animationDuration:2600}]})}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},d233:function(e,t,a){"use strict";var n=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){var t;while(e.length){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)"undefined"!==typeof t[i]&&n.push(t[i]);a.obj[a.prop]=n}}return t},r=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(a[n]=e[n]);return a},l=function e(t,a,i){if(!a)return t;if("object"!==typeof a){if(Array.isArray(t))t.push(a);else{if(!t||"object"!==typeof t)return[t,a];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,a))&&(t[a]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(a);var o=t;return Array.isArray(t)&&!Array.isArray(a)&&(o=r(t,i)),Array.isArray(t)&&Array.isArray(a)?(a.forEach((function(a,o){if(n.call(t,o)){var r=t[o];r&&"object"===typeof r&&a&&"object"===typeof a?t[o]=e(r,a,i):t.push(a)}else t[o]=a})),t):Object.keys(a).reduce((function(t,o){var r=a[o];return n.call(t,o)?t[o]=e(t[o],r,i):t[o]=r,t}),o)},s=function(e,t){return Object.keys(t).reduce((function(e,a){return e[a]=t[a],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),a="",n=0;n<t.length;++n){var o=t.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?a+=t.charAt(n):o<128?a+=i[o]:o<2048?a+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?a+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),a+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return a},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],n=0;n<t.length;++n)for(var i=t[n],r=i.obj[i.prop],l=Object.keys(r),s=0;s<l.length;++s){var c=l[s],u=r[c];"object"===typeof u&&null!==u&&-1===a.indexOf(u)&&(t.push({obj:r,prop:c}),a.push(u))}return o(t)},p=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},h=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:r,assign:s,compact:d,decode:c,encode:u,isBuffer:h,isRegExp:p,merge:l}},d41d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"接口类型",prop:"methodType"}},[a("el-select",{attrs:{placeholder:"请选择接口类型",clearable:"",size:"small"},model:{value:e.queryParams.methodType,callback:function(t){e.$set(e.queryParams,"methodType",t)},expression:"queryParams.methodType"}},[a("el-option",{attrs:{label:"请选择字典生成",value:""}})],1)],1),a("el-form-item",{attrs:{label:"方法名",prop:"methodName"}},[a("el-input",{attrs:{placeholder:"请输入方法名",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.methodName,callback:function(t){e.$set(e.queryParams,"methodName",t)},expression:"queryParams.methodName"}})],1),a("el-form-item",{attrs:{label:"请求参数",prop:"reqParams"}},[a("el-input",{attrs:{placeholder:"请输入请求参数",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reqParams,callback:function(t){e.$set(e.queryParams,"reqParams",t)},expression:"queryParams.reqParams"}})],1),a("el-form-item",{attrs:{label:"请求结果",prop:"reqResult"}},[a("el-input",{attrs:{placeholder:"请输入请求结果",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.reqResult,callback:function(t){e.$set(e.queryParams,"reqResult",t)},expression:"queryParams.reqResult"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"消息",prop:"msg"}},[a("el-input",{attrs:{placeholder:"请输入消息",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.msg,callback:function(t){e.$set(e.queryParams,"msg",t)},expression:"queryParams.msg"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdrecord:add"],expression:"['output:qdrecord:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdrecord:edit"],expression:"['output:qdrecord:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdrecord:remove"],expression:"['output:qdrecord:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdrecord:export"],expression:"['output:qdrecord:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.qdrecordList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"请求id",align:"center",prop:"reqId","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"接口类型",align:"center",prop:"methodType","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"方法名",align:"center",prop:"methodName","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"请求参数",align:"center",prop:"reqParams","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"请求结果",align:"center",prop:"reqResult","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",formatter:e.statusFormat,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"消息",align:"center",prop:"msg","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdrecord:edit"],expression:"['output:qdrecord:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdrecord:remove"],expression:"['output:qdrecord:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"接口类型"}},[a("el-select",{attrs:{placeholder:"请选择接口类型"},model:{value:e.form.methodType,callback:function(t){e.$set(e.form,"methodType",t)},expression:"form.methodType"}},[a("el-option",{attrs:{label:"请选择字典生成",value:""}})],1)],1),a("el-form-item",{attrs:{label:"方法名",prop:"methodName"}},[a("el-input",{attrs:{placeholder:"请输入方法名"},model:{value:e.form.methodName,callback:function(t){e.$set(e.form,"methodName",t)},expression:"form.methodName"}})],1),a("el-form-item",{attrs:{label:"请求参数",prop:"reqParams"}},[a("el-input",{attrs:{placeholder:"请输入请求参数"},model:{value:e.form.reqParams,callback:function(t){e.$set(e.form,"reqParams",t)},expression:"form.reqParams"}})],1),a("el-form-item",{attrs:{label:"请求结果",prop:"reqResult"}},[a("el-input",{attrs:{placeholder:"请输入请求结果"},model:{value:e.form.reqResult,callback:function(t){e.$set(e.form,"reqResult",t)},expression:"form.reqResult"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"消息",prop:"msg"}},[a("el-input",{attrs:{placeholder:"请输入消息"},model:{value:e.form.msg,callback:function(t){e.$set(e.form,"msg",t)},expression:"form.msg"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/output/qdrecord/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/output/qdrecord/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/output/qdrecord",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/output/qdrecord",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/output/qdrecord/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/output/qdrecord/export",method:"get",params:e})}var p={name:"Qdrecord",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,qdrecordList:[],title:"",open:!1,statusOptions:[],queryParams:{pageNum:1,pageSize:10,methodType:null,methodName:null,reqParams:null,reqResult:null,status:null,msg:null},form:{},rules:{}}},created:function(){var e=this;this.getList(),this.getDicts("task_status").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.qdrecordList=t.rows,e.total=t.total,e.loading=!1}))},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={reqId:null,methodType:null,methodName:null,reqParams:null,reqResult:null,status:null,msg:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.reqId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加全电请求接口记录"},handleUpdate:function(e){var t=this;this.reset();var a=e.reqId||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改全电请求接口记录"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.reqId?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.reqId||this.ids;this.$confirm('是否确认删除全电请求接口记录编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有全电请求接口记录数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},d4fc:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return u}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/history/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/history/getInfo",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/output/history",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/output/history",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/output/history/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/output/history/export",method:"post",data:e,responseType:"blob"})}function u(e){return Object(n["a"])({url:"/output/history/exportDetail",method:"post",data:e,responseType:"blob"})}},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},d6f9:function(e,t,a){},d7ab:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"压缩包名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入压缩包名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:packageOcr:add"],expression:"['income:packageOcr:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:packageOcr:edit"],expression:"['income:packageOcr:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:packageOcr:remove"],expression:"['income:packageOcr:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:packageOcr:export"],expression:"['income:packageOcr:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.packageOcrList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"组织id",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"压缩包名称",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"文件总数",align:"center",prop:"totalNum"}}),a("el-table-column",{attrs:{label:"增值税发票识别数量",align:"center",prop:"incomeDiscernNum"}}),a("el-table-column",{attrs:{label:"非增值税发票识别数量",align:"center",prop:"otherDiscernNum"}}),a("el-table-column",{attrs:{label:"增值税发票保存数量",align:"center",prop:"incomeSaveNum"}}),a("el-table-column",{attrs:{label:"非增值税发票保存数量",align:"center",prop:"otherSaveNum"}}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark"}}),a("el-table-column",{attrs:{label:"录入人",align:"center",prop:"ext1"}}),a("el-table-column",{attrs:{label:"录入时间",align:"center",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.parseTime(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:packageOcr:edit"],expression:"['income:packageOcr:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleShowPackageDetail(t.row)}}},[e._v("详情")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:packageOcr:remove"],expression:"['income:packageOcr:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"压缩包名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入压缩包名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"文件总数",prop:"totalNum"}},[a("el-input",{attrs:{placeholder:"请输入文件总数"},model:{value:e.form.totalNum,callback:function(t){e.$set(e.form,"totalNum",t)},expression:"form.totalNum"}})],1),a("el-form-item",{attrs:{label:"增值税发票识别数量",prop:"incomeDiscernNum"}},[a("el-input",{attrs:{placeholder:"请输入增值税发票识别数量"},model:{value:e.form.incomeDiscernNum,callback:function(t){e.$set(e.form,"incomeDiscernNum",t)},expression:"form.incomeDiscernNum"}})],1),a("el-form-item",{attrs:{label:"非增值税发票识别数量",prop:"otherDiscernNum"}},[a("el-input",{attrs:{placeholder:"请输入非增值税发票识别数量"},model:{value:e.form.otherDiscernNum,callback:function(t){e.$set(e.form,"otherDiscernNum",t)},expression:"form.otherDiscernNum"}})],1),a("el-form-item",{attrs:{label:"增值税发票保存数量",prop:"incomeSaveNum"}},[a("el-input",{attrs:{placeholder:"请输入增值税发票保存数量"},model:{value:e.form.incomeSaveNum,callback:function(t){e.$set(e.form,"incomeSaveNum",t)},expression:"form.incomeSaveNum"}})],1),a("el-form-item",{attrs:{label:"非增值税发票保存数量",prop:"otherSaveNum"}},[a("el-input",{attrs:{placeholder:"请输入非增值税发票保存数量"},model:{value:e.form.otherSaveNum,callback:function(t){e.$set(e.form,"otherSaveNum",t)},expression:"form.otherSaveNum"}})],1),a("el-form-item",{attrs:{label:"组织id",prop:"deptId"}},[a("el-input",{attrs:{placeholder:"请输入组织id"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"压缩包上传",visible:e.packageUploadDialog.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.packageUploadDialog,"open",t)},close:e.packageUploadDialogClose}},[a("el-upload",{ref:"packageUpload",staticClass:"upload-demo",attrs:{drag:"",action:"","auto-upload":!1,accept:"application/zip",multiple:!1,"on-change":e.packageFileChange,limit:1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("手动选择文件")]),a("br"),e._v("（只能上传zip文件）")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitPackageUpload}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.packageUploadDialog.open=!1}}},[e._v("取 消")])],1)],1),a("FileAnalysis",{ref:"fileAnalysis"})],1)},i=[],o=(a("d81d"),a("b64b"),a("b775"));function r(e){return Object(o["a"])({url:"/income/packageOcr/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/income/packageOcr/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/income/packageOcr",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/income/packageOcr",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/income/packageOcr/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/income/packageOcr/export",method:"get",params:e,responseType:"blob"})}function p(e){return Object(o["a"])({url:"/income/packageOcr/discernPackage",method:"post",data:e})}function h(e){return Object(o["a"])({url:"/income/packageOcr/detail/"+e,method:"get"})}var m=a("9ee1"),f=a("35d5"),b=a("c38a"),g={name:"PackageOcr",components:{FileAnalysis:f["default"]},computed:{upload:function(){return m["a"]}},data:function(){return{tableHeight:null,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,packageOcrList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,name:null,totalNum:null,incomeDiscernNum:null,otherDiscernNum:null,incomeSaveNum:null,otherSaveNum:null,deptId:null},form:{},rules:{name:[{required:!0,message:"压缩包名称不能为空",trigger:"blur"}]},packageUploadDialog:{open:!1,fileList:[]}}},created:function(){this.getList()},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{parseTime:b["m"],getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.packageOcrList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,name:null,totalNum:null,incomeDiscernNum:null,otherDiscernNum:null,incomeSaveNum:null,otherSaveNum:null,remark:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.packageUploadDialog.open=!0},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改压缩包信息"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除压缩包信息编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有压缩包信息数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.$vLoading.show(),d(t)})).then((function(t){e.$vLoading.hide(),e.currencyDownload(t,"压缩包信息.xlsx",e)})).catch((function(){}))},packageFileChange:function(e,t){this.packageUploadDialog.fileList=t},submitPackageUpload:function(){var e=this;if(this.packageUploadDialog.fileList.length){var t=new FormData;t.append("fileData",this.packageUploadDialog.fileList[0].raw),this.$vLoading.show(),p(t).then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess(t.msg),e.packageUploadDialog.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}else this.msgError("请选择要上传识别的压缩包文件")},packageUploadDialogClose:function(){this.$refs.packageUpload.clearFiles(),this.packageUploadDialog.fileList=[]},handleShowPackageDetail:function(e){var t=this;this.$vLoading.show(),h(e.id).then((function(e){if(t.$vLoading.hide(),200==e.code){for(var a=e.data,n=[],i=0;i<a.length;i++)n.push({data:JSON.parse(a[i].dataJson)});t.$refs.fileAnalysis.fillFileAnalysis(n,"2")}else t.$vLoading.hide()})).catch((function(){t.$vLoading.hide()}))}}},v=g,y=a("2877"),_=Object(y["a"])(v,n,i,!1,null,null,null);t["default"]=_.exports},d7e0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.routeLoading,expression:"routeLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"开票日期"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{clearable:"",size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small",multiple:""},model:{value:e.queryParams.invTypes,callback:function(t){e.$set(e.queryParams,"invTypes",t)},expression:"queryParams.invTypes"}},[a("el-option",{attrs:{value:"1",label:"增值税发票"}}),a("el-option",{attrs:{value:"2",label:"其他票据"}}),a("el-option",{attrs:{value:"3",label:"海关缴款书"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:allInvoice:downloadPdfZip"],expression:"['income:allInvoice:downloadPdfZip']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.downloadInvoice}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["income:allInvoice:export"],expression:"['income:allInvoice:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExportData}},[e._v("导出数据")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"zzsInvoiceMainTable",attrs:{data:e.zzsinvoiceList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"invNo"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"}},[e._v(e._s((["08xdp","10xdp"].includes(n.row.invType)?n.row.invCode:"")+n.row.invNo))]):"invCode"==t.prop?a("span",[e._v(" "+e._s(["08xdp","10xdp"].includes(n.row.invType)?"":n.row.invCode)+" ")]):"state"==t.prop?a("span",[e._v(" "+e._s(e.stateFormat(n.row))+" ")]):"checked"==t.prop?a("span",[e._v(" "+e._s(e.checkedFormat(n.row))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):"blockChain"==t.prop?a("span",[e._v(" "+e._s(e.blockChainFormat(n.row))+" ")]):"invDate"==t.prop?a("span",[e._v(e._s(e.cutTime(n.row)))]):"ruleStatus"==t.prop?a("span",[e._v(" 异常 ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"报销状态",align:"center",width:"100",prop:"reimStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.reimStatus?a("span",[e._v("未报销")]):"1"==t.row.reimStatus?a("span",[e._v("全额报销")]):"2"==t.row.reimStatus?a("span",[e._v("部分报销")]):e._e()]}}])}),a("u-table-column",{attrs:{label:"已使用报销金额",width:"150",prop:"usedReimAmount","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"可使用报销金额",width:"150",prop:"usableReimAmount","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"锁定报销金额",width:"150",prop:"lockingReimAmount","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"发票录入日期",width:"180",prop:"createTime","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"开票日期",width:"180",prop:"invDate","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"开票日期",width:"180",prop:"invDate","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"凭证制单人",width:"180",prop:"voucherMaker","show-overflow-tooltip":!0}}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("total-row-table",{ref:"totalRowDom",attrs:{totalTableData:e.totalTableData,showError:"0"}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative",width:"100%"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e()],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("d81d"),a("159b"),a("a15b"),a("ac1f"),a("5319"),a("fb6a"),a("25f0"),a("13d5"),a("4c80")),l=a("b775");function s(e){return Object(l["a"])({url:"/income/allInvoice/list",method:"get",params:e})}function c(e){return Object(l["a"])({url:"/income/allInvoice/downloadPdfZip",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/income/allInvoice/export",method:"post",data:e,params:{beginTime:e.beginTime,endTime:e.endTime},responseType:"blob"})}var d=a("b526"),p=a("0ca4"),h=a("66b5"),m=a("f82b"),f=a("a5e7"),b=a("35d5"),g=a("ed08"),v=a("5f87"),y=a("c38a"),_=a("23b1"),x={name:"Mergeincome",components:{TotalRowTable:d["default"],InvoiceDetailShowModal:p["default"],VehicleInvoiceDetailShowModal:h["default"],SecondHandInvoiceDetailShowModal:m["default"],UploadFileDialog:f["default"],FileAnalysis:b["default"]},data:function(){return{qdOpen:!1,errorPage:!1,scanningData:"",routeLoading:!1,isSpecial:!0,isSecondHand:!1,isQd:!1,functionName:"",showProgress:!1,loadingTime:null,module:"zzsinvoice",pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,zzsinvoiceList:[],title:"",open:!1,invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:500,invCode:null,invNo:null,invCodeNo:null,invDate:null,invType:null,state:null,buyName:null,buyTaxNo:null,buyBankAccount:null,buyAddrTel:null,note:null,sellName:null,sellTaxNo:null,sellAddrTel:null,sellBankAccount:null,cashier:null,checker:null,invoicer:null,totalTaxAmount:null,totalAmount:null,totalAmountWithoutTax:null,totalMoneyUp:null,sourceInvCode:null,sourceInvNo:null,pwdCode:null,checkCode:null,checked:null,checkMsg:null,dataSource:null,blockChain:null,deptId:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null,ruleStatus:0,voucherNo:null,reimBillNo:null,apBillNo:null,income:1,other:1,customs:1,invTypes:["1","2","3"]},manualForm:{id:null,invType:"01",invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,totalAmount:null,fileUrl:null},manualRules:{invCode:[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}],invNo:[{pattern:/^\d{8}|\d{20}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}],invDate:[{required:!0,message:"开票日期不能为空",trigger:["blur","change"]}],totalAmountWithoutTax:[{required:!0,message:"不含税金额不能为空",trigger:["blur","change"]}],checkCode:[{required:!0,message:"校验码不能为空",trigger:["blur","change"]},{pattern:/^\d{0,10}$/,message:"请输入正确的校验码",trigger:"blur"}],totalAmount:[{required:!0,message:"价税合计不能为空",trigger:["blur","change"]}],fileUrl:[{required:!0,message:"发票文件不能为空"}]},columnsArr:[{label:"发票系统上的唯一ID",prop:"id",align:"center",show:!0,width:220,columnSort:20},{label:"发票代码",prop:"invCode",align:"center",show:!0,width:220,columnSort:0},{label:"发票号码",prop:"invNo",align:"center",show:!0,width:220,columnSort:1},{label:"发票类型",prop:"invType",align:"center",show:!0,width:220,columnSort:3},{label:"发票日期",prop:"invDate",align:"center",show:!0,width:220,columnSort:2},{label:"查验状态",prop:"checked",align:"center",show:!0,width:220,columnSort:20},{label:"查验描述",prop:"checkMsg",align:"center",show:!0,width:220,columnSort:21},{label:"发票状态",prop:"state",align:"center",show:!0,width:220,columnSort:4},{label:"购方名称",prop:"buyName",align:"center",show:!0,width:220,columnSort:5},{label:"购方税号",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"备注",prop:"note",align:"center",show:!0,width:220,columnSort:7},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:8},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:9},{label:"销方地址及电话",prop:"sellAddrTel",align:"center",show:!0,width:220,columnSort:10},{label:"销方银行及账号",prop:"sellBankAccount",align:"center",show:!0,width:220,columnSort:11},{label:"校验码",prop:"checkCode",align:"center",show:!0,width:220,columnSort:19},{label:"机器编码",prop:"machineNo",align:"center",show:!0,width:220,columnSort:19},{label:"影像地址",prop:"fileUrl",align:"center",show:!0,width:220,columnSort:19},{label:"合计税额",prop:"totalTaxAmount",align:"center",show:!0,width:220,columnSort:15},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:220,columnSort:16},{label:"合计不含税金额",prop:"totalAmountWithoutTax",align:"center",show:!0,width:220,columnSort:17}],sortParam:{column:"",columnOrder:""},manualUpload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(v["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(v["a"])()},url:"/prod-api/income/zzsinvoice/importCheckData"},templateOptions:[],operationIndex:0,operationRowArr:[],disabledButton:!1,reimDialog:{open:!1,form:{pzh:"",bxdh:""},rules:{pzh:[{required:!0,message:"报销凭证号不能为空",trigger:"blur"}]}},reimInvoiceInfoData:[],reimActiveNames:"",originImageOpen:!1,currOriginImageUrl:null,imgShowParams:{deg:0,scale:1},currOperationRow:{},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},settingInvDialog:{open:!1,form:{},rules:{ruleStatus:[],ruleDes:[{required:!0,message:"异常描述不能为空",trigger:"blur"}]}}}},computed:{totalTableData:function(){var e=Object(g["e"])(this.rows);return 0==e.length&&(e=Object(g["e"])(this.zzsinvoiceList)),e}},created:function(){var e=this;if("errorzzsinvoice"==this.$route.name.toLowerCase()){this.errorPage=!0;var t=[{label:"是否正常",prop:"ruleStatus",align:"center",show:!0,width:220,columnSort:20},{label:"异常描述",prop:"ruleDes",align:"center",show:!0,width:220,columnSort:0}];this.columnsArr=t.concat(this.columnsArr),this.queryParams.ruleStatus=1}this.getList(),Promise.all([this.getDicts("income_check_inv_type"),this.getDicts("other_ticket")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data)})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(g["e"])(this.queryParams),Object(g["e"])(this.sortParam));t.beginTime=null==this.dateRange||0==this.dateRange.length?"":this.dateRange[0],t.endTime=null==this.dateRange||0==this.dateRange.length?"":this.dateRange[1],(t.voucherNo||t.reimBillNo||t.apBillNo)&&(t.reimFlag=!0),t.income=t.invTypes.includes("1")?"1":null,t.other=t.invTypes.includes("2")?"1":null,t.customs=t.invTypes.includes("3")?"1":null,delete t.invTypes,s(t).then((function(t){e.zzsinvoiceList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},stateFormat:function(e,t){return this.selectDictLabel(this.stateOptions,e.state)},checkedFormat:function(e,t){return this.selectDictLabel(this.checkedOptions,e.checked)},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},blockChainFormat:function(e,t){return this.selectDictLabel(this.blockChainOptions,e.blockChain)},cutTime:function(e){return null!=e.invDate?e.invDate.substring(0,10):""},manualDialogClose:function(){this.isSpecial=!0,this.isSecondHand=!1,this.isQd=!1,this.resetManualForm()},resetManualForm:function(){this.manualForm={id:null,invType:"01",invCode:null,invNo:null,invDate:null,totalAmountWithoutTax:null,checkCode:null,fileUrl:null}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleShowInvoiceDetail:function(e){var t=this;"1"==e.checked?(this.routeLoading=!0,"03"==e.invType?this.$refs.vehicleInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):"15"==e.invType?this.$refs.secondHandInvoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1})):this.$refs.invoiceDetailShowModal.fillBillDialog(e.id).then((function(e){t.routeLoading=!1})).catch((function(){t.routeLoading=!1}))):this.msgError("查验成功发票才能查看详情")},handleUpdate:function(e){var t=this;if(void 0!=e.id&&"1"==e.checked||1==this.rows.length&&"1"==this.rows[0].checked)this.msgError("已查验发票不能够修改");else{var a=e.id||this.ids;Object(r["j"])(a).then((function(a){t.manualForm=a.data,t.manualForm.id=e.id||t.ids[0],["08xdp","10xdp"].includes(t.manualForm.invType)&&(t.manualForm.invNo=t.manualForm.invCode+t.manualForm.invNo,t.manualForm.invCode=""),t.manualInvTypeChange(),t.open=!0,t.$nextTick((function(){t.$refs.manualForm.clearValidate()})),t.title="修改增值税发票"}))}},submitManualForm:function(){var e=this;this.$refs["manualForm"].validate((function(t){if(t){var a=Object(g["e"])(e.manualForm);["08xdp","10xdp"].includes(a.invType)&&(a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12)),a.dataSource="01",null!=e.manualForm.id?(a.invCodeNo=a.invCode+"_"+a.invNo,Object(r["q"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))):Object(r["a"])(a).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}}))},submitManualFormQD:function(){var e=this;this.$refs["manualFormQD"].validate((function(t){if(t)if(null!=e.manualForm.id){var a=Object(g["e"])(e.manualForm);a.invCode=a.invNo.substr(0,12),a.invNo=a.invNo.substr(12),a.dataSource="01",Object(r["q"])(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.qdOpen=!1,e.getList()):e.msgError(t.msg)}))}else{var n=Object(g["e"])(e.manualForm);n.invCode=n.invNo.substr(0,12),n.invNo=n.invNo.substr(12),n.dataSource="01",Object(r["a"])(n).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.qdOpen=!1,e.getList()):e.msgError(t.msg)}))}}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=this.rows,i=[];n.forEach((function(e,t,a){i.push(e.invCodeNo)})),this.$confirm('<span style="word-break: break-all;">是否确认删除增值税发票代码号码为["'+i.join(",")+'"]的数据项?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){var e={ids:a};return Object(y["g"])(100,"删除中",t),Object(r["c"])(e)})).then((function(){t.showProgress=!1,clearInterval(t.loadingTime),t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleCheck:function(){var e=this;this.operationIndex=0,this.operationRowArr=this.rows,this.showProgress=!0,this.functionName="查验中",this.$nextTick((function(){e.$refs.myProgress.progressGrow(parseInt(1/e.operationRowArr.length*100)),e.$refs.myProgress.setProgressNum(0)})),this.checkLogic()},checkLogic:function(){var e=this;this.operationIndex++,1!=this.operationIndex&&this.$refs.myProgress.progressGrow(parseInt(this.operationIndex/this.operationRowArr.length*100));var t={id:this.operationRowArr[this.operationIndex-1].id};Object(r["b"])(t).then((function(t){"200"==t.code?e.msgSuccess(t.msg):e.msgError(t.msg),e.$refs.myProgress.setProgressNum(parseInt(e.operationIndex/e.operationRowArr.length*100)),e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.checkLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,e.getList())}))},handleImport:function(){this.upload.title="票据导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.uploadImport.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitImportFileForm:function(){this.$refs.uploadImport.submit()},downloadInvoice:function(){var e=this,t={ids:this.ids.join(","),income:1,other:1,customs:1};c(this.addDateRange(t,this.dateRange)).then((function(t){200==t.code?e.download(t.msg):e.msgError(t.msg)}))},handleExportData:function(){var e=this,t=Object(g["e"])(this.queryParams);t.beginTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[0],t.endTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[1],t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(y["g"])(10,"导出中",e),u(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"进项发票汇总.xls",e)})).catch((function(){}))},handleExport:function(){var e=this,t=Object(g["e"])(this.queryParams);t.beginTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[0],t.endTime=0==this.dateRange.length||null==this.dateRange?"":this.dateRange[1],(params.voucherNo||params.reimBillNo||params.apBillNo)&&(params.reimFlag=!0),t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(y["g"])(10,"导出中",e),Object(r["g"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票.xls",e)})).catch((function(){}))},handleExportDetail:function(){var e=this,t=Object(g["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(y["g"])(10,"导出中",e),Object(r["h"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"增值税发票明细.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.zzsInvoiceMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.zzsinvoiceList,"zzsInvoiceMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},handleManual:function(){var e=this;this.open=!0,this.$nextTick((function(){e.$refs.manualForm.clearValidate(),e.$refs.manualUpload.clearFiles()})),this.title="添加增值税发票"},manualFormInvCodeChange:function(){var e=this,t=Object(y["i"])(this.manualForm.invCode);"08"==t||"03"==t||"01"==t||"02"==t?(this.isSpecial=!0,this.manualForm.checkCode="",this.isSecondHand=!1,this.manualForm.totalAmount=""):"15"==t?(this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.manualForm.totalAmountWithoutTax="",this.isSecondHand=!1,this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))},handleManualFileUploadProgress:function(e,t,a){this.manualUpload.isUploading=!0},handleManualFileSuccess:function(e,t,a){this.manualUpload.isUploading=!1,200==e.code?(this.msgSuccess(e.msg),this.manualForm.fileUrl=e.data[0],this.$refs["manualForm"].validateField("fileUrl")):this.msgError(e.msg)},handleManualRemove:function(){this.manualForm.fileUrl="",this.$refs["manualForm"].validateField("fileUrl")},submitFileForm:function(){this.$refs.manualUpload.submit()},handleImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";"1"==e?this.$store.commit("SET_IS_SECOND_CONFIRM",!1):"2"==e&&this.$store.commit("SET_IS_SECOND_CONFIRM",!0),this.$refs.uploadFileDialog.uploadFileDialogShow()},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},handleScanning:function(){var e=this;this.open=!0,this.$nextTick((function(){e.$refs.manualForm.clearValidate()})),this.scanningData="",this.$refs.scanningDataInput.focus(),this.title="扫描枪录入<span style='color: red;font-size: 14px;'>(扫描前请关闭输入法或切换为英文输入法)</span>"},scanningDown:function(){var e=this;console.log(this.scanningData);var t=this.scanningData.replace("/，/g",","),a=t.split(","),n=a[2],i=a[3],o=a[4],l=a[5],s=a[6];""!=s&&(s=s.slice(-6)),""!=l&&(l=l.substring(0,4)+"-"+l.substring(4,6)+"-"+l.substring(6,8)),console.log(n,i,l,o,s),this.manualForm.invCode=n,this.manualForm.invNo=i,this.manualForm.invDate=l,this.manualForm.totalAmountWithoutTax=o,this.manualForm.checkCode=s,this.manualFormInvCodeChange(),this.$nextTick((function(){e.$refs["manualForm"].validate((function(t){if(t){var a=Object(g["e"])(e.manualForm);a.dataSource="3",Object(r["a"])(a).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.getList(),e.scanningData="",e.$refs.scanningDataInput.focus(),e.resetManualForm(),e.$nextTick((function(){e.$refs.manualForm.clearValidate()}))):e.msgError(t.msg)}))}}))}))},updateInvoiceTable:function(){this.getList()},validIsNumber:function(e){e.target.value=Object(y["a"])(e.target.value),e.target.value=this.plusOrMinus(e.target.value)},CValid:function(e){e.target.value=Object(y["a"])(e.target.value)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},importTemplate:function(){var e=this.selectDictLabel(this.templateOptions,"zzsTemplate");document.location=e},handleScanner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";"1"==e?this.$store.commit("SET_IS_SECOND_CONFIRM",!1):"2"==e&&this.$store.commit("SET_IS_SECOND_CONFIRM",!0),this.scanConnectOperation()},scanConnectOperation:function(){var e=_["a"].FF_JPEG,t={deviceName:"DS-870",connectType:0},a={};a.docSource=_["a"].SRC_AUTO,a.imgType=_["a"].IT_AUTO,a.resolution=200,a.docSize=_["a"].DS_AUTO,a.docRotate=_["a"].DR_NONE,a.brightness=0,a.contrast=0,a.threshold=126,a.colorFilter=_["a"].CF_NONE,a.numScan=0,a.docEnhance=0,a.imgFilter=0,a.optDoubleFeedDetect=_["a"].DFD_NONE,a.optBlankPageSkip=_["a"].BPS_NONE,a.skewCorrect=_["a"].SC_EDGE;var n={};n.destination=_["a"].DEST_BASE64,n.fileFormat=e,n.imgQuality=60;var i=_["a"].ESLCreate(),o=this,l=[];this.$vLoading.show(),i.ScanAndSave_Simple(t,a,n,(function(e,t){e?(t.eventType==_["a"].EVENT_SCANPAGE_COMPLETE&&console.log("scan page complete"),t.eventType==_["a"].EVENT_ALLSCAN_COMPLETE&&console.log("all scan page complete"),t.eventType==_["a"].EVENT_SAVEPAGE_COMPLETE&&l.push("jpeg_"+t.base64),t.eventType==_["a"].EVENT_ALLSAVE_COMPLETE&&(o.msgSuccess("扫描完成，正在识别"),Object(r["e"])(l).then((function(e){o.$vLoading.hide(),o.discernFileResult(new Array(e))})).catch((function(){o.$vLoading.hide()})))):(o.$vLoading.hide(),o.msgError("扫描失败： "+t.errorCode.toString(16)))}))},handleCancelReim:function(){for(var e=this,t=0;t<this.rows.length;t++)if("0"==this.rows[t].reimStatus)return void this.msgError("未报销发票不能进行取消报销操作！");for(var a=[],n=0;n<this.rows.length;n++)a[n]={wyid:this.rows[n].id,bxzt:"3"};var i={updateInvRequests:a};this.$vLoading.show(),Object(r["p"])(i).then((function(t){e.$vLoading.hide(),200==t.code?(e.getList(),e.msgSuccess("取消报销成功")):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))},handleReim:function(){for(var e=this,t=0;t<this.rows.length;t++)if("1"!=this.rows[t].checked)return void this.msgError("未查验发票不能进行报销操作！");this.reimDialog.open=!0,this.reimDialog.form.bxdh=Object(g["m"])(),this.reimInvoiceInfoData=this.rows.reduce((function(e,t){return e.push({wyid:t.id,invNo:t.invNo,bxje:t.usableReimAmount}),e}),[]),this.$nextTick((function(){e.$refs.reimForm.clearValidate()}))},submitReim:function(){var e=this;this.$refs.reimForm.validate((function(t){if(t){for(var a=0;a<e.reimInvoiceInfoData.length;a++)if(!e.reimInvoiceInfoData[a].bxje)return e.msgError("报销金额不能为空"),!1;for(var n=Object(g["e"])(e.reimInvoiceInfoData),i=0;i<n.length;i++)n[i].bxje=parseFloat(n[i].bxje),n[i].bxdh=e.reimDialog.form.bxdh,n[i].pzh=e.reimDialog.form.pzh,n[i].bxzt="2";var o={updateInvRequests:n};e.$vLoading.show(),Object(r["p"])(o).then((function(t){e.$vLoading.hide(),200==t.code?(e.getList(),e.msgSuccess("报销成功"),e.reimDialog.open=!1):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()}))}}))},pzhChange:function(){var e=this;if(this.reimDialog.form.pzh){var t={voucherNo:this.reimDialog.form.pzh,type:1};this.disabledButton=!0,Object(r["m"])(t).then((function(t){e.disabledButton=!1,t.data&&e.msgError("此凭证号已经被使用！")}))}},bxjeChange:function(e){e.bxje=this.plusOrMinus(e.bxje),"."==e.bxje.substr(-1)&&(e.bxje=e.bxje.substr(0,e.bxje.length-1))},reimDialogClose:function(){this.reimDialog.form={pzh:"",voucherNo:""}},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(g["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),1e3)},totalAmountChange:function(){this.manualForm.totalAmount?this.manualForm.totalMoneyUp=Object(y["s"])(this.manualForm.totalAmount):this.manualForm.totalMoneyUp=""},manualInvTypeChange:function(){var e=this,t=this.manualForm.invType;this.manualRules.invNo[0]={pattern:/^\d{8}$/,message:"请输入正确的8位发票号码",trigger:"blur"},["08xdp","10xdp"].includes(t)?(this.isSpecial=!1,this.isSecondHand=!1,this.isQd=!0,this.manualForm.checkCode="",this.manualForm.invCode="",this.manualRules.invNo[0]={pattern:/^\d{20}$/,message:"请输入正确的20位发票号码",trigger:"blur"}):["01","08","02","08xdpzz"].includes(t)?(this.isSpecial=!0,this.isSecondHand=!1,this.isQd=!1,this.manualForm.checkCode="",this.manualForm.totalAmount=""):"15"==t?(this.isSpecial=!1,this.isQd=!1,this.isSecondHand=!0,this.manualForm.checkCode="",this.manualForm.totalAmountWithoutTax=""):(this.isSpecial=!1,this.isQd=!1,this.isSecondHand=!1,this.manualForm.totalAmountWithoutTax="",this.manualForm.totalAmount=""),this.$nextTick((function(){e.$refs.manualForm.clearValidate()}))},handleSettingInv:function(){var e=this;this.settingInvDialog.form=Object(g["e"])(this.rows[0]),this.settingInvDialog.open=!0,this.$nextTick((function(){e.$refs.settingInvForm.clearValidate()}))},submitSettingInv:function(){var e=this;this.$refs.settingInvForm.validate((function(t){t&&(e.$vLoading.show(),Object(r["q"])(e.settingInvDialog.form,"1").then((function(t){e.$vLoading.hide(),200==t.code?(e.msgSuccess("设置成功"),e.settingInvDialog.open=!1,e.getList()):e.msgError(t.msg)})).catch((function(){e.$vLoading.hide()})))}))},settingInvDialogClose:function(){this.settingInvDialog.form={}}}},w=x,k=(a("298c"),a("2877")),T=Object(k["a"])(w,n,i,!1,null,"1825dba7",null);t["default"]=T.exports},d86c:function(e,t,a){"use strict";a("9d99")},d9ca:function(e,t,a){e.exports=a.p+"static/img/qrcode.9da375b6.png"},db4b:function(e,t,a){},db62:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"纳税人名称",prop:"nsrmc"}},[a("el-input",{attrs:{placeholder:"请输入纳税人名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.nsrmc,callback:function(t){e.$set(e.queryParams,"nsrmc",t)},expression:"queryParams.nsrmc"}})],1),a("el-form-item",{attrs:{label:"纳税人识别号",prop:"nsrsbh"}},[a("el-input",{attrs:{placeholder:"请输入纳税人识别号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.nsrsbh,callback:function(t){e.$set(e.queryParams,"nsrsbh",t)},expression:"queryParams.nsrsbh"}})],1),a("el-form-item",{attrs:{label:"认证状态",prop:"ruleStatus"}},[a("el-select",{attrs:{placeholder:"请选择认证状态",clearable:"",size:"small"},model:{value:e.queryParams.rzgq,callback:function(t){e.$set(e.queryParams,"rzgq",t)},expression:"queryParams.rzgq"}},[a("el-option",{attrs:{label:"未过期",value:0}}),a("el-option",{attrs:{label:"已过期",value:1}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:edit"],expression:"['output:qdreg:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:export"],expression:"['output:qdreg:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.qdregList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"办税人员姓名",align:"center",prop:"bsryxm"}}),a("el-table-column",{attrs:{label:"登录身份",align:"center",prop:"dlsf",formatter:e.dlsfFormat}}),a("el-table-column",{attrs:{label:"电子税局登录身份密码",align:"center",prop:"dlsfmm"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("******")])]}}])}),a("el-table-column",{attrs:{label:"电子税局登录方式",align:"center",prop:"dlfs"}}),a("el-table-column",{attrs:{label:"电子税局登录密码",align:"center",prop:"dlmm"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("******")])]}}])}),a("el-table-column",{attrs:{label:"电子税局登录账号",align:"center",prop:"dlzh"}}),a("el-table-column",{attrs:{label:"纳税人名称",align:"center",prop:"nsrmc"}}),a("el-table-column",{attrs:{label:"纳税人识别号",align:"center",prop:"nsrsbh"}}),a("el-table-column",{attrs:{label:"办税人员身份证件号码",align:"center",prop:"bsrysfzjhm"}}),a("el-table-column",{attrs:{label:"办税人员手机号码",align:"center",prop:"bsrysjhm"}}),a("el-table-column",{attrs:{label:"中间号码",align:"center",prop:"zjh"}}),a("el-table-column",{attrs:{label:"登记状态",align:"center",prop:"status",formatter:e.statusFormat}}),a("el-table-column",{attrs:{label:"认证状态",align:"center",prop:"rzgq"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s("1"==t.row.rzgq?"已过期":"未过期")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:qdreg:edit"],expression:"['output:qdreg:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"认证状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择认证状态",clearable:"",size:"small"},model:{value:e.form.rzgq,callback:function(t){e.$set(e.form,"rzgq",t)},expression:"form.rzgq"}},[a("el-option",{attrs:{label:"未过期",value:"0"}}),a("el-option",{attrs:{label:"已过期",value:"1"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/output/qdreg/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/output/qdreg",method:"post",data:e})}function s(e,t){var a={};if(e instanceof Array)a={ids:e};else{var n=[];n.push(e),a={ids:n}}return a.rzgq=t,Object(o["a"])({url:"/output/qdreg/editRzgq",method:"put",data:a})}function c(e){return Object(o["a"])({url:"/output/qdreg/"+e,method:"delete"})}function u(e){return Object(o["a"])({url:"/output/qdreg/export",method:"post",data:e,responseType:"blob"})}var d=a("ed08"),p={name:"Qdreg",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,qdregList:[],title:"",open:!1,dlsfOptions:[],statusOptions:[],rzgq:"",queryParams:{pageNum:1,pageSize:10,qjcx:"1",bsryxm:null,dlsf:null,dlsfmm:null,dlfs:null,dlmm:null,dlzh:null,nsrmc:null,nsrsbh:null,bsrysfzjhm:null,bsrysjhm:null,zjh:null,status:null,ext1:null,ext2:null,ext3:null,deptId:null,reqId:null},form:{},rules:{}}},created:function(){var e=this;this.getList(),this.getDicts("qd_login_type").then((function(t){e.dlsfOptions=t.data})),this.getDicts("task_status").then((function(t){e.statusOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.qdregList=t.rows,e.total=t.total,e.loading=!1}))},dlsfFormat:function(e,t){return this.selectDictLabel(this.dlsfOptions,e.dlsf)},statusFormat:function(e,t){return this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,bsryxm:null,dlsf:null,dlsfmm:null,dlfs:null,dlmm:null,dlzh:null,nsrmc:null,nsrsbh:null,bsrysfzjhm:null,bsrysjhm:null,zjh:null,status:null,ext1:null,ext2:null,ext3:null,createBy:null,createTime:null,updateBy:null,updateTime:null,deptId:null,reqId:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加全电注册登记"},handleUpdate:function(e){this.reset();var t=e.id||this.ids;this.form.id=t,this.open=!0,this.title="修改全电注册登记"},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?s(e.form.id,e.form.rzgq).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):l(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除全电注册登记编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return c(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(d["e"])(this.queryParams);t.ids=this.ids,console.log(t.ids),this.$confirm("是否确认导出所有全电注册登记数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(t)})).then((function(t){clearInterval(e.loadingTime),e.currencyDownload(t,"全电注册情况.xls",e)})).catch((function(){}))}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},dc4c:function(e,t,a){},dc68:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1100px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t},close:e.billDialogClose}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"填开日期"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,disabled:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请经办人"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,disabled:""},model:{value:e.form.applyPerson,callback:function(t){e.$set(e.form,"applyPerson",t)},expression:"form.applyPerson"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"No"}},[a("el-input",{attrs:{placeholder:"",maxlength:100,disabled:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入购方地址电话",maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel","string"===typeof t?t.trim():t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入开户行及账号",maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount","string"===typeof t?t.trim():t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{placeholder:"请输入购方邮箱",maxlength:100,disabled:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"51"==this.form.invType||"52"==this.form.invType,expression:"this.form.invType == '51' || this.form.invType == '52'"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{placeholder:"请输入购方手机",maxlength:11,disabled:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("u-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250","use-virtual":"","row-height":45},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50"}}),a("u-table-column",{attrs:{type:"selection",width:"55"}}),a("u-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsNameAbbreviation,placement:"top",disabled:""==t.row.goodsNameAbbreviation||null==t.row.goodsNameAbbreviation}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})],1)]}}])}),a("u-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.goodsName,placement:"top",disabled:""==t.row.goodsName||null==t.row.goodsName}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})],1)]}}])}),a("u-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.taxTypeCode,placement:"top",disabled:""==t.row.taxTypeCode||null==t.row.taxTypeCode}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})],1)]}}])}),a("u-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.standard,placement:"top",disabled:""==t.row.standard||null==t.row.standard}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})],1)]}}])}),a("u-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.unit,placement:"top",disabled:""==t.row.unit||null==t.row.unit}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})],1)]}}])}),a("u-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2188265427)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("u-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2075060434)}):"1"===e.hsbz?a("u-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("u-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("u-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{placeholder:"请输入销方名称",maxlength:100,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{placeholder:"请输入销方税号",maxlength:100,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{placeholder:"请输入销方地址电话",maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{placeholder:"请输入销方开户行及账号",maxlength:100,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount","string"===typeof t?t.trim():t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-info-item-special"},[a("div",{staticClass:"public-info-item-body"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedApply,callback:function(t){e.$set(e.redSelectInfo,"checkedApply",t)},expression:"redSelectInfo.checkedApply"}},[a("el-radio",{staticClass:"public-radio",attrs:{label:"1",disabled:""}},[e._v("一.购买方申请")]),a("div",{staticClass:"indent-div"},[a("el-radio-group",{model:{value:e.redSelectInfo.checkedBuyer,callback:function(t){e.$set(e.redSelectInfo,"checkedBuyer",t)},expression:"redSelectInfo.checkedBuyer"}},e._l(e.buyerApplyType,(function(t){return a("el-radio",{key:t.value,staticClass:"public-radio",attrs:{label:t.value,disabled:""}},[e._v(e._s(t.label))])})),1)],1),a("el-radio",{staticClass:"public-radio",attrs:{label:"2",disabled:""}},[e._v("二.销售方申请")])],1)],1)])]),a("el-col",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","padding-left":"10px"},attrs:{span:16}},[a("div",{staticClass:"item-title"},[a("label",[e._v("对应蓝字专用发票密码区内打印的信息:")])]),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:100,disabled:""},model:{value:e.form.sourceInvCode,callback:function(t){e.$set(e.form,"sourceInvCode","string"===typeof t?t.trim():t)},expression:"form.sourceInvCode"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{size:"mini",placeholder:"",maxlength:100,disabled:""},model:{value:e.form.sourceInvNo,callback:function(t){e.$set(e.form,"sourceInvNo","string"===typeof t?t.trim():t)},expression:"form.sourceInvNo"}})],1)],1)],1),a("el-form-item",{attrs:{label:"发票种类"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",size:"small",disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(t){return"0"==t.dictValue||"52"==t.dictValue?a("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}}):e._e()})),1)],1),"1"!=e.redSelectInfo.checkedBuyer?a("el-form-item",{attrs:{label:"开票时间"}},[a("el-input",{staticStyle:{width:"92%"},attrs:{size:"mini",placeholder:"",maxlength:100,disabled:""},model:{value:e.form.openDate,callback:function(t){e.$set(e.form,"openDate",t)},expression:"form.openDate"}})],1):e._e()],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("c85c")),r=a("722a"),l=a("c394"),s=a("b9aa"),c=a("ad11"),u=(a("ed08"),{name:"redInvoiceShowModal",components:{ChooseCode:s["default"]},props:{},data:function(){return{form:{createTime:"",applyPerson:"",billNo:"",invType:"2",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",applyType:"2",sourceInvCode:"",sourceInvNo:"",openDate:""},invTypeOptions:[],hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"红字发票详情",isAdd:!0,taxCodeSignRow:0,invoiceTypeOptions:[],flagOptions:[],billDetailModalData:{billTitle:"",billNo:"",billType:"2",taxPlateIdSelect:"",billCode:"",billInvNo:"",billDate:"",billCheckCode:"",billBuyName:"",billBuyTaxNo:"",billBuyAddrTel:"",billBuyBankAccount:"",billSellName:"",snsrsbh:"",sdzdh:"",syhzh:"",billNote:"",detailDate:[{trChecked:!1,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],billTotalMoney:0,billTotalTaxMoney:0,billTotalMoneyWithTax:0,billTotalMoneyWithTaxUpperCase:"",skr:"",checker:"",kpr:""},taxRateOptions:[],redInvoiceFlag:!1,buyerSearchData:[],goodsNameSearchData:[],goodsNameInputData:"",rules:{billNo:[{required:!0,message:"单据编码不能为空",trigger:"blur"}],invType:[{required:!0,message:"发票类型不能为空",trigger:"blur"}],buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],buyName:[{required:!0,message:"购方名称不能为空",trigger:["blur","change"]}],buyTaxNo:[{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"},{required:!1,message:"专票的购方税号不能为空",trigger:["blur","change"]}],buyAddrTel:[{required:!1,message:"专票的购方地址不能为空",trigger:["blur","change"]}],buyBankAccount:[{required:!1,message:"专票的购方开户行及账号不能为空",trigger:["blur","change"]}],sellTaxNo:[{required:!0,message:"销方税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],sellName:[{required:!0,message:"收款人不能为空",trigger:"blur"}],cashier:[{required:!0,message:"收款人不能为空",trigger:"blur"}],checker:[{required:!0,message:"复核人不能为空",trigger:"blur"}],invoicer:[{required:!0,message:"开票人不能为空",trigger:"blur"}]},discountOpen:!1,discountForm:{discoutLine:"",discountTotalMoney:"",discountMoney:"",discountRate:""},discountSelectIndex:[],deductOpen:!1,deductForm:{differenceDeductAmount:""},buyerApplyType:[{value:"2",label:"1.已抵扣"},{value:"1",label:"2.未抵扣"}],redSelectInfo:{checkedApply:"",checkedBuyer:"",sourceInvCode:"",sourceInvNo:"",sourceInvDate:"",invType:"0"},invoiceEnter:!1}},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;this.getDicts("tax_rate").then((function(t){e.taxRateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data})),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data,e.fplxdesc=e.selectDictLabel(e.invTypeOptions,e.form.invType)}))},mounted:function(){},methods:{billDialogShow:function(e){this.open=!0,this.redSelectInfo=e,this.form.sourceInvNo=e.sourceInvNo,this.form.sourceInvCode=e.sourceInvCode,"2"==e.checkedApply?(this.form.applyType="0",this.getNeedRedInvoice(e)):this.form.applyType=e.checkedBuyer},getNeedRedInvoice:function(e){var t=this,a={invCode:e.sourceInvCode,invNo:e.sourceInvNo,invDate:e.sourceInvDate,invCodeNo:e.sourceInvCode+"_"+e.sourceInvNo};Object(l["s"])(a).then((function(a){if(200==a.code){var n=a.data;for(var i in t.form)t.form[i]=n[i];t.form.invDate=e.sourceInvDate,t.billDetailsData=n.details,t.getBillNo()}else t.msgError(a.msg)}))},getSubjectInfo:function(){var e=this;Object(o["l"])().then((function(t){e.form.sellTaxNo=t.data.nsrsbh,e.form.sellName=t.data.nsrmc}))},getTaxNoSeller:function(){var e=this;Object(o["m"])().then((function(t){var a=t.sellers;if(null!=a&&0!=a.length){for(var n,i=0;i<a.length;i++)if("1"==a[i].status){n=a[i];break}null==n&&(n=a[0]),e.form.cashier=n.payee,e.form.checker=n.checker,e.form.invoicer=n.drawer,e.form.sellAddrTel=n.bankAddrTel,e.form.sellBankAccount=n.bankAccount}}))},billDialogClose:function(){var e=this;this.form={createTime:"",applyPerson:"",billNo:"",invType:"2",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00",applyType:"",sourceInvCode:"",sourceInvNo:"",openDate:""},this.hsbz="0",this.fplxdesc="增值税普通发票",this.billDetailsData=[{index:0,discountFlag:"0",goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],this.$nextTick((function(){e.$refs.form.clearValidate()}))},fillBillDialog:function(e){var t=this;return Object(r["g"])(e.id).then((function(e){var a=e.data;t.form=e.data,"0"==a.applyType||null==a.applyType||void 0==a.applyType?t.redSelectInfo.checkedApply="2":(t.redSelectInfo.checkedApply="1",t.redSelectInfo.checkedBuyer=a.applyType);var n=a.details;t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.open=!0}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},getTaxnoStockInfo:function(){var e=this;Object(c["c"])(this.billDetailModalData.billType).then((function(t){200==t.code?(e.billDetailModalData.billCode=t.data.fpdm,e.billDetailModalData.billInvNo=t.data.fphm):(e.billDetailModalData.billCode=null,e.billDetailModalData.billInvNo=null,e.msgError(t.msg))}))},handleSelectionChange:function(e){console.log(e)},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"}}}),d=u,p=(a("5be0"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,null,null);t["default"]=h.exports},dcc7:function(e,t,a){"use strict";a("f14f")},dd7b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[a("h3",{staticClass:"title"},[e._v("易税云平台")]),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[a("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[a("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[a("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),a("div",{staticClass:"login-code"},[a("img",{staticClass:"login-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1),a("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px"},model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("记住密码")]),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e.loading?a("span",[e._v("登 录 中...")]):a("span",[e._v("登 录")])])],1)],1),e._m(0)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-login-footer"},[a("span",[e._v("Copyright © 2018-2019 zzhtax.com All Rights Reserved.")]),a("br"),a("img",{staticStyle:{width:"16px",height:"16px",display:"inline-block","margin-right":"4px"},attrs:{src:"http://www.beian.gov.cn/img/ghs.png"}}),a("span",[a("a",{attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[e._v("粤ICP备2022100305号-1")])])])}],o=(a("4de4"),a("d3b7"),a("13d5"),a("7ded")),r=a("8b29"),l=a("a78e"),s=a.n(l),c=a("720d"),u=a.n(c),d="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\nnzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==",p="MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\n7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\nPuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\nkM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\ncSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\nDQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\nYhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\nUP8iWi1Qw0Y=";function h(e){var t=new u.a;return t.setPublicKey(d),t.encrypt(e)}function m(e){var t=new u.a;return t.setPrivateKey(p),t.decrypt(e)}var f={name:"Login",data:function(){return{codeUrl:"",cookiePassword:"",loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:""},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}]},loading:!1,redirect:void 0,noticeList:[]}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getCode()},methods:{getCode:function(){var e=this;Object(o["a"])().then((function(t){e.codeUrl="data:image/gif;base64,"+t.img,e.loginForm.uuid=t.uuid}))},getCookie:function(){var e=s.a.get("username"),t=s.a.get("password"),a=s.a.get("rememberMe");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===t?this.loginForm.password:m(t),rememberMe:void 0!==a&&Boolean(a)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&(e.loading=!0,e.loginForm.rememberMe?(s.a.set("username",e.loginForm.username,{expires:30}),s.a.set("password",h(e.loginForm.password),{expires:30}),s.a.set("rememberMe",e.loginForm.rememberMe,{expires:30})):(s.a.remove("username"),s.a.remove("password"),s.a.remove("rememberMe")),e.$store.dispatch("Login",e.loginForm).then((function(t){e.$router.push({path:e.redirect||"/"}),setTimeout((function(){Object(r["e"])().then((function(t){e.noticeList=t.rows;for(var a=(new Date).getTime(),n=e.noticeList.filter((function(e){var t=new Date(e.validity).getTime();return t>a})),i=function(t){setTimeout((function(){e.$notify({title:n[t].noticeTitle,dangerouslyUseHTMLString:!0,message:'<div class="ql-editor">'.concat(n[t].noticeContent,"</div>"),position:"bottom-right"},200)}))},o=0;o<n.length;o++)i(o);n.length>0&&Object(r["b"])({noticeIds:n.reduce((function(e,t){return e.push(t.noticeId),e}),[])})}))}),1e3)})).catch((function(t){502==t.code&&e.$router.push({name:"editpassword",params:{userName:e.loginForm.username}}),e.loading=!1,e.getCode()})))}))}}},b=f,g=(a("7a07"),a("2877")),v=Object(g["a"])(b,n,i,!1,null,null,null);t["default"]=v.exports},de03:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],o=(a("ac1f"),a("5319"),{name:"single",data:function(){return{loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:"",accessToken:null}}},created:function(){this.loginForm.accessToken=this.$route.query.accessToken},mounted:function(){this.simulationLogin()},methods:{simulationLogin:function(){var e=this;null!=this.loginForm.accessToken&&""!=this.loginForm.accessToken?this.$store.dispatch("IDMLogin",this.loginForm).then((function(t){e.$router.push({path:e.redirect||"/"})})).catch((function(t){e.$router.replace({path:"/login"})})):location.href="https://idm.liby.com.cn/IAM/oauth/authorize?client_id=APP032&redirect_uri=https://vat.liby.com.cn/IDM"}}}),r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,"176e070c",null);t["default"]=s.exports},de0a:function(e){e.exports=JSON.parse('["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"]')},df8d:function(e,t,a){},e0fe:function(e,t,a){"use strict";a("a561")},e14c:function(e,t,a){"use strict";a("3b7b")},e1c9:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"l",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"k",(function(){return p})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return m})),a.d(t,"b",(function(){return f}));var n=a("b775");function i(e){return Object(n["a"])({url:"/qdoutput/redbill/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/qdoutput/redbill/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/qdoutput/redbill",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/qdoutput/redbill",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/qdoutput/redbill/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/qdoutput/redbill/export",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/qdoutput/redbill/getRedBill",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/qdoutput/redbill/cancel",method:"post",params:e})}function p(e){return Object(n["a"])({url:"/qdoutput/redbill/upload",method:"post",params:e})}function h(e){return Object(n["a"])({url:"/qdoutput/redbill/download",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/qdoutput/redbill/transfToBill",method:"post",params:e})}function f(e){return Object(n["a"])({url:"/qdoutput/redbill/approve",method:"post",params:e})}},e261:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"商品简称",prop:"goodsNameAbbreviation"}},[a("el-input",{attrs:{placeholder:"请输入商品简称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.goodsNameAbbreviation,callback:function(t){e.$set(e.queryParams,"goodsNameAbbreviation",t)},expression:"queryParams.goodsNameAbbreviation"}})],1),a("el-form-item",{attrs:{label:"商品编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"商品编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("el-form-item",{attrs:{label:"税率",prop:"rate"}},[a("el-select",{attrs:{placeholder:"请选择税率",clearable:"",size:"small"},model:{value:e.queryParams.rate,callback:function(t){e.$set(e.queryParams,"rate",t)},expression:"queryParams.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"税收分类编码",prop:"taxCode"}},[a("el-input",{attrs:{placeholder:"请输入税收分类编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxCode,callback:function(t){e.$set(e.queryParams,"taxCode",t)},expression:"queryParams.taxCode"}})],1),a("el-form-item",{attrs:{label:"税收分类名称",prop:"taxName"}},[a("el-input",{attrs:{placeholder:"请输入税收分类名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxName,callback:function(t){e.$set(e.queryParams,"taxName",t)},expression:"queryParams.taxName"}})],1),a("el-form-item",{attrs:{label:"是否维护税收编码",prop:"isDefendTaxCode"}},[a("el-select",{attrs:{placeholder:"请选择是否维护税收编码",clearable:"",size:"small"},model:{value:e.queryParams.isDefendTaxCode,callback:function(t){e.$set(e.queryParams,"isDefendTaxCode",t)},expression:"queryParams.isDefendTaxCode"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1),a("el-form-item",{attrs:{label:"是否小规模纳税人",prop:"xgmnsr"}},[a("el-select",{attrs:{placeholder:"请选择是否小规模纳税人",clearable:"",size:"small"},model:{value:e.queryParams.xgmnsr,callback:function(t){e.$set(e.queryParams,"xgmnsr",t)},expression:"queryParams.xgmnsr"}},[a("el-option",{attrs:{value:"1",label:"是"}}),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1),a("el-form-item",{attrs:{label:"修改人名称",prop:"ext2"}},[a("el-input",{attrs:{placeholder:"请输入修改人名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.ext2,callback:function(t){e.$set(e.queryParams,"ext2",t)},expression:"queryParams.ext2"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:goods:add"],expression:"['output:goods:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:goods:edit"],expression:"['output:goods:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:goods:remove"],expression:"['output:goods:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:goods:export"],expression:"['output:goods:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:goods:import"],expression:"['output:goods:import']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleImport}},[e._v("导入 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr,module:e.module},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"goodsMainTable",attrs:{data:e.goodsList,height:e.tableHeight,"use-virtual":"","row-class-name":e.tableRowClassName,"row-height":40},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["rate"==t.prop?a("span",[e._v(" "+e._s(e.rateFormat(n.row))+" ")]):"name"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showGoodsInfo(n.row)}}},[e._v(e._s(n.row.name))]):"flag"==t.prop?a("span",[e._v(" "+e._s(e.flagFormat(n.row))+" ")]):"xgmnsr"==t.prop?a("span",[e._v(" "+e._s(e.xgmnsrFormat(n.row))+" ")]):"preferentialPolicy"==t.prop?a("span",[e._v(" "+e._s(e.preferentialPolicyFormat(n.row))+" ")]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作时间",align:"center",prop:"updateTime","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.updateTime,"{y}-{m}-{d}")))])]}}])}),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:goods:edit"],expression:"['output:goods:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:e.goodsDialogClose}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"110px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入商品编码",maxlength:50,readonly:e.infoReadonly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称",maxlength:92,clearable:"",readonly:e.infoReadonly},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品简称",prop:"goodsNameAbbreviation"}},[a("el-input",{attrs:{placeholder:"请输入商品简称",maxlength:30,clearable:"",readonly:e.infoReadonly},model:{value:e.form.goodsNameAbbreviation,callback:function(t){e.$set(e.form,"goodsNameAbbreviation",t)},expression:"form.goodsNameAbbreviation"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"简码",prop:"simpleCode"}},[a("el-input",{attrs:{placeholder:"请输入简码",maxlength:30,clearable:"",readonly:e.infoReadonly},model:{value:e.form.simpleCode,callback:function(t){e.$set(e.form,"simpleCode",t)},expression:"form.simpleCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格型号",prop:"standard"}},[a("el-input",{attrs:{placeholder:"请输入规格型号",maxlength:200,clearable:"",readonly:e.infoReadonly},model:{value:e.form.standard,callback:function(t){e.$set(e.form,"standard",t)},expression:"form.standard"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[a("el-input",{attrs:{placeholder:"请输入计量单位",maxlength:22,clearable:"",readonly:e.infoReadonly},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单价",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入单价",maxlength:20,clearable:"",readonly:e.infoReadonly},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税率",prop:"rate"}},[a("el-select",{attrs:{placeholder:"请选择税率",clearable:"",disabled:e.infoReadonly},on:{change:function(t){return e.changeRate(e.form.rate)}},model:{value:e.form.rate,callback:function(t){e.$set(e.form,"rate",t)},expression:"form.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"含税标识"}},[a("el-select",{attrs:{disabled:e.infoReadonly},model:{value:e.form.flag,callback:function(t){e.$set(e.form,"flag",t)},expression:"form.flag"}},e._l(e.flagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"享受优惠政策"}},[a("el-radio-group",{attrs:{disabled:e.infoReadonly},on:{change:function(t){return e.changeZc(e.form.preferentialPolicy)}},model:{value:e.form.preferentialPolicy,callback:function(t){e.$set(e.form,"preferentialPolicy",t)},expression:"form.preferentialPolicy"}},e._l(e.preferentialPolicyOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel)+" ")])})),1)],1)],1),a("el-col",{staticStyle:{float:"right"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"优惠政策类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择优惠政策类型",clearable:"",disabled:e.infoReadonly},on:{change:function(t){return e.changeType(e.form.preferentialPolicyType)}},model:{value:e.form.preferentialPolicyType,callback:function(t){e.$set(e.form,"preferentialPolicyType",t)},expression:"form.preferentialPolicyType"}},e._l(e.preferentialPolicyTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税收分类名称",prop:"taxName"}},[a("el-input",{attrs:{placeholder:"请输入税收分类名称",maxlength:50,clearable:"",readonly:e.infoReadonly},model:{value:e.form.taxName,callback:function(t){e.$set(e.form,"taxName",t)},expression:"form.taxName"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"税收分类编码",prop:"taxCode"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入税收分类编码",maxlength:20,"fetch-suggestions":e.querySearchTaxCode,readonly:e.infoReadonly},on:{select:e.handleSelectTaxCode},model:{value:e.form.taxCode,callback:function(t){e.$set(e.form,"taxCode","string"===typeof t?t.trim():t)},expression:"form.taxCode"}},[e.infoReadonly?e._e():a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},on:{click:e.chooseCode},slot:"suffix"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品描述",prop:"goodDesc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入商品描述",maxlength:255,clearable:"",readonly:e.infoReadonly},model:{value:e.form.goodDesc,callback:function(t){e.$set(e.form,"goodDesc",t)},expression:"form.goodDesc"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"小规模纳税人"}},[a("el-radio-group",{attrs:{disabled:e.infoReadonly},on:{change:function(t){return e.changeZc(e.form.xgmnsr)}},model:{value:e.form.xgmnsr,callback:function(t){e.$set(e.form,"xgmnsr",t)},expression:"form.xgmnsr"}},e._l(e.flagOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel)+" ")])})),1)],1)],1)],1)],1),e.infoReadonly?e._e():a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("choose-code",{ref:"ChooseCode",on:{showChooseCode:e.showChooseCode}}),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,"file-list":e.upload.fileList,accept:".xml, .xlsx, .xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,"on-change":e.handleChange,"on-remove":e.handleChange,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xml”、“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("ac1f"),a("5319"),a("caad"),a("d81d"),a("4cf7")),l=a("0500"),s=a("5f87"),c=a("c10b"),u=a("7b93"),d=a("b9aa"),p=a("ed08"),h={components:{ChooseCode:d["default"],MyElProgress:u["a"]},name:"Goods",props:{useType:{type:String,default:"owner"}},data:function(){return{mainLoading:!1,module:"goods",tableHeight:null,pageSizes:[],loading:!0,templateOptions:[],ids:[],rows:[],names:[],single:!0,multiple:!0,showSearch:!0,total:0,goodsList:[],title:"",open:!1,rateOptions:[],flagOptions:[],preferentialPolicyOptions:[],preferentialPolicyTypeOptions:[],queryParams:{pageNum:1,pageSize:500,name:null,goodsNameAbbreviation:null,simpleCode:null,rate:null,taxCode:null,taxName:null,isDefendTaxCode:null,ext2:null},form:{},rules:{name:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],rate:[{required:!0,message:"税率不能为空",trigger:"blur"}],taxCode:[{required:!0,message:"税收分类编码不能为空",trigger:"blur"}],price:[{pattern:/\d+(\.\d+)?$/,message:"单价只能是数字",trigger:"blur"}]},upload:{fileList:[],open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(s["a"])()},url:"/prod-api/output/goods/importData"},columnsArr:[],showProgress:!1,functionName:"",loadingTime:null,infoReadonly:!1}},created:function(){var e=this;this.getList(),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.flagOptions=t.data,e.preferentialPolicyOptions=t.data})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data})),this.getDicts("yhzclx").then((function(t){e.preferentialPolicyTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var t={module:this.module};Promise.all([Object(c["b"])(t),Object(c["a"])(t)]).then((function(t){var a=e.formatTableColumns(t);if(a&&a.length>0){e.columnsArr=a;for(var n=0;n<e.columnsArr.length;n++)e.columnsArr[n].columnSort=n,null==e.columnsArr[n].width&&("billNo"==e.columnsArr[n].prop?e.columnsArr[n].width=200:e.columnsArr[n].width=100)}}))},mounted:function(){var e=this;"owner"==this.useType&&(this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()})},activated:function(){var e=this;"owner"==this.useType&&(this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()})},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){"owner"==a.useType&&(a.tableHeight=a.calcTableHeight())}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.goodsMainTable.doLayout()}))},getList:function(){var e=this;this.loading=!0,Object(r["e"])(this.queryParams).then((function(t){e.goodsList=t.rows,e.total=t.total,e.loading=!1}))},showChooseCode:function(e){this.form.taxCode=e.mergeCode,this.form.taxName=e.name,this.form.goodsNameAbbreviation=e.abbreviation,this.form.rate=e.rate.replace("%","")},chooseCode:function(){this.$refs.ChooseCode.openChoose()},changeRate:function(e){"免税"==e||"不征税"==e?(this.form.preferentialPolicy="1",this.form.preferentialPolicyType="免税"==e?"免税":"不征税"):this.form.preferentialPolicyType=""},importTemplate:function(){var e=this.selectDictLabel(this.templateOptions,"goodsTemplate");document.location=e},changeType:function(e){"免税"==e||"不征税"==e?(this.form.preferentialPolicy="1",this.form.rate=e):["简易计税","简易征收"].includes(e)?this.form.preferentialPolicy="1":this.form.preferentialPolicy="0"},changeZc:function(e){this.form.preferentialPolicyType=""},rateFormat:function(e,t){return this.selectDictLabel(this.rateOptions,e.rate)},flagFormat:function(e,t){return this.selectDictLabel(this.flagOptions,e.flag)},xgmnsrFormat:function(e,t){return this.selectDictLabel(this.flagOptions,e.xgmnsr)},preferentialPolicyFormat:function(e,t){return this.selectDictLabel(this.preferentialPolicyOptions,e.preferentialPolicy)},preferentialPolicyTypeFormat:function(e,t){return this.selectDictLabel(this.preferentialPolicyTypeOptions,e.preferentialPolicyType)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,code:null,name:null,goodsNameAbbreviation:null,simpleCode:null,standard:null,unit:null,price:null,item:null,rate:"13",flag:"0",preferentialPolicy:"0",xgmnsr:"0",preferentialPolicyType:null,taxCode:null,taxName:null,mycode:null,taxver:null,goodDesc:null,matchingDesc:null,matchingFlag:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null,ext1:null,ext2:null,ext3:null,ext4:null,ext5:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.names=e.map((function(e){return e.name})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e},handleAdd:function(){this.reset(),this.open=!0,this.title="添加商品编码"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(r["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.infoReadonly?t.title="查看商品编码":t.title="修改商品编码"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(r["f"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids,n=e.name||this.names;this.$confirm('是否确认删除商品名称为"'+n+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(p["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(r["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"商品编码.xls",e)})).catch((function(){}))},querySearchTaxCode:function(e,t){if(""!=e&&null!=e){var a={mergeCode:e};Object(l["c"])(a).then((function(e){for(var a=0;a<e.rows.length;a++)e.rows[a].value=e.rows[a].mergeCode;var n=e.rows;t(n)}))}else t([])},handleSelectTaxCode:function(e){this.form.taxCode=e.mergeCode,this.form.taxName=e.name,this.form.goodsNameAbbreviation=e.abbreviation,this.form.rate=e.rate.replace("%","")},handleImport:function(){this.upload.title="商品编码导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList(),this.mainLoading=!1},submitFileForm:function(){0!=this.upload.fileList.length?(this.$refs.upload.submit(),this.upload.open=!1,this.mainLoading=!0):this.msgError("请选择要导入的文件")},handleChange:function(e,t){this.upload.fileList=t},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.goodsMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.goodsList,"goodsMainTable")},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)},showGoodsInfo:function(e){this.infoReadonly=!0,this.handleUpdate(e)},goodsDialogClose:function(){this.infoReadonly=!1}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},e350:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d81d"),a("d3b7"),a("caad"),a("2532");var n=a("4360");function i(e){if(e&&e instanceof Array&&e.length>0){var t=n["a"].getters&&n["a"].getters.permissions,a=e,i=a.map((function(e,t,a){return e.split(":")})),o=t.some((function(e){for(var t=e.split(":"),a=0,n=i.length;a<n;a++)for(var o=i[a],r=0,l=t.length;r<l;r++)if(t[r]!=o[r]&&"*"!=t[r])return!1;return!0}));return!!o}return console.error("need roles! Like checkPermi=\"['system:user:add','system:user:edit']\""),!1}},e3db:function(e,t){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},e416:function(e,t,a){},e54c:function(e,t,a){},e552:function(e,t,a){"use strict";var n,i;function o(e,t,a){var n=function(t,a){return e.js_beautify(t,a)};return n.js=e.js_beautify,n.css=t.css_beautify,n.html=a.html_beautify,n.js_beautify=e.js_beautify,n.css_beautify=t.css_beautify,n.html_beautify=a.html_beautify,n}n=[a("e943"),a("4d7c"),a("a6c1")],i=function(e,t,a){return o(e,t,a)}.apply(t,n),void 0===i||(e.exports=i)},e631:function(e,t,a){"use strict";a("acf4")},e6a1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("div",{staticClass:"app-container-title"},[a("el-form",{ref:"queryParams",attrs:{model:e.queryParams,inline:!0,"label-width":"100",size:"mini"}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"查询选项",prop:"summarySheetType"}},[a("el-select",{model:{value:e.queryParams.summarySheetType,callback:function(t){e.$set(e.queryParams,"summarySheetType",t)},expression:"queryParams.summarySheetType"}},[a("el-option",{attrs:{label:"增值税发票汇总表",value:1}}),a("el-option",{attrs:{label:"正数发票清单",value:2}}),a("el-option",{attrs:{label:"负数发票清单",value:3}}),a("el-option",{attrs:{label:"正数发票废票清单",value:4}}),a("el-option",{attrs:{label:"负数发票废票清单",value:5}})],1)],1),a("el-form-item",{attrs:{label:"月份",prop:"yearMonth"}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"请选择月份"},model:{value:e.queryParams.yearMonth,callback:function(t){e.$set(e.queryParams,"yearMonth",t)},expression:"queryParams.yearMonth"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1)],1)],1),a("div",{staticClass:"app-container-content"},[e.invoiceNum?a("div",{staticClass:"flex-item-body"},e._l(e.invoiceItem,(function(t,n){return a("div",{staticClass:"flex-item"},[a("div",{staticClass:"flex-item-top"},[e._v(e._s(t.name))]),a("div",{staticClass:"flex-item-bottom"},[e._v(e._s(e.invoiceNum[t.prop]))])])})),0):e._e(),a("el-table",{staticClass:"statistics_table",attrs:{data:e.statisticsTableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e._l(e.statisticsTableColumns,(function(e,t){return a("el-table-column",{attrs:{label:e,prop:e,align:"center"}})}))],2)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("b775"));function r(e){return Object(o["a"])({url:"/output/invoice/invoiceMonthReportData",method:"post",params:e})}function l(e){return Object(o["a"])({url:"/output/invoice/exportInvoiceMonthReport",method:"post",responseType:"blob",params:e})}var s=a("ed08"),c=(a("c38a"),{name:"Monthstatistics",components:{},data:function(){return{functionName:"",showProgress:!1,loadingTime:null,mainLoading:!1,queryParams:{invType:"81",summarySheetType:1,yearMonth:null,taxPeriod:null},invoiceItem:[{name:"负数发票份数",prop:"negativeInvoiceNum"},{name:"负数废票份数",prop:"negativeCancelInvoiceNum"},{name:"购进发票份数",prop:"buyInvoiceNum"},{name:"期初库存份数",prop:"initialStock"},{name:"期末库存份数",prop:"endStock"},{name:"退回发票份数",prop:"returnInvoiceNum"},{name:"正数发票份数",prop:"positiveInvoiceNum"},{name:"正数废票份数",prop:"positiveCancelInvoiceNum"}],invoiceNum:{negativeInvoiceNum:0,negativeCancelInvoiceNum:0,buyInvoiceNum:0,initialStock:0,endStock:0,returnInvoiceNum:0,positiveInvoiceNum:0,positiveCancelInvoiceNum:0},statisticsTableColumns:[],statisticsTableColumns2:[{label:"发票种类",prop:"invType"},{label:"发票代码",prop:"invCode"},{label:"发票号码",prop:"invNo"},{label:"开票日期",prop:"invDate"},{label:"购方税号",prop:"buyTaxNo"},{label:"合计金额",prop:"totalAmount"},{label:"合计税额",prop:"totalTaxAmount"},{label:"税率",prop:"rate"}],statisticsTableData:[{projectName:"xixihaha"}],invTypeOptions:[]}},created:function(){var e=this,t=this.$moment(new Date);this.queryParams.yearMonth=t.format("YYYY-MM"),this.getDicts("qdoutput_invoice_type").then((function(t){e.invTypeOptions=t.data})),this.handleQuery()},methods:{invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},handleQuery:function(){var e=this,t=Object(s["e"])(this.queryParams);this.mainLoading=!0,r(t).then((function(t){e.mainLoading=!1,200==t.code?(e.invoiceNum=t.data.invoiceCollectionInfo||null,e.statisticsTableColumns=t.data.summaryInfoTitle,e.statisticsTableData=t.data.summaryInfo):e.msgError(t.msg)}))},handleExport:function(){var e=this,t=Object(s["e"])(this.queryParams);this.mainLoading=!0,l(t).then((function(t){e.mainLoading=!1;var a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="发票月度统计.xls",a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),e.msgSuccess("导出成功")})).catch((function(){e.mainLoading=!1}))}}}),u=c,d=(a("0898"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"44598306",null);t["default"]=p.exports},e795:function(e,t,a){},e943:function(e,t,a){var n,i;(function(){var a=function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";var n=a(1).Beautifier,i=a(5).Options;function o(e,t){var a=new n(e,t);return a.beautify()}e.exports=o,e.exports.defaultOptions=function(){return new i}},function(e,t,a){"use strict";var n=a(2).Output,i=a(3).Token,o=a(4),r=a(5).Options,l=a(7).Tokenizer,s=a(7).line_starters,c=a(7).positionable_operators,u=a(7).TOKEN;function d(e,t){return-1!==t.indexOf(e)}function p(e){return e.replace(/^\s+/g,"")}function h(e){for(var t={},a=0;a<e.length;a++)t[e[a].replace(/-/g,"_")]=e[a];return t}function m(e,t){return e&&e.type===u.RESERVED&&e.text===t}function f(e,t){return e&&e.type===u.RESERVED&&d(e.text,t)}var b=["case","return","do","if","throw","else","await","break","continue","async"],g=["before-newline","after-newline","preserve-newline"],v=h(g),y=[v.before_newline,v.preserve_newline],_={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function x(e,t){t.multiline_frame||t.mode===_.ForInitializer||t.mode===_.Conditional||e.remove_indent(t.start_line_index)}function w(e){e=e.replace(o.allLineBreaks,"\n");var t=[],a=e.indexOf("\n");while(-1!==a)t.push(e.substring(0,a)),e=e.substring(a+1),a=e.indexOf("\n");return e.length&&t.push(e),t}function k(e){return e===_.ArrayLiteral}function T(e){return d(e,[_.Expression,_.ForInitializer,_.Conditional])}function D(e,t){for(var a=0;a<e.length;a++){var n=e[a].trim();if(n.charAt(0)!==t)return!1}return!0}function S(e,t){for(var a,n=0,i=e.length;n<i;n++)if(a=e[n],a&&0!==a.indexOf(t))return!1;return!0}function O(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new r(t)}O.prototype.create_flags=function(e,t){var a=0;e&&(a=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>a&&(a=e.line_indent_level));var n={mode:t,parent:e,last_token:e?e.last_token:new i(u.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:a,alignment:0,line_indent_level:e?e.line_indent_level:a,start_line_index:this._output.get_line_number(),ternary_depth:0};return n},O.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new n(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(_.BlockStatement);var a=new l(e,this._options);return this._tokens=a.tokenize(),e},O.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e,t=this._reset(this._source_text),a=this._options.eol;"auto"===this._options.eol&&(a="\n",t&&o.lineBreak.test(t||"")&&(a=t.match(o.lineBreak)[0]));var n=this._tokens.next();while(n)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return e=this._output.get_code(a),e},O.prototype.handle_token=function(e,t){e.type===u.START_EXPR?this.handle_start_expr(e):e.type===u.END_EXPR?this.handle_end_expr(e):e.type===u.START_BLOCK?this.handle_start_block(e):e.type===u.END_BLOCK?this.handle_end_block(e):e.type===u.WORD||e.type===u.RESERVED?this.handle_word(e):e.type===u.SEMICOLON?this.handle_semicolon(e):e.type===u.STRING?this.handle_string(e):e.type===u.EQUALS?this.handle_equals(e):e.type===u.OPERATOR?this.handle_operator(e):e.type===u.COMMA?this.handle_comma(e):e.type===u.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===u.COMMENT?this.handle_comment(e,t):e.type===u.DOT?this.handle_dot(e):e.type===u.EOF?this.handle_eof(e):(e.type,u.UNKNOWN,this.handle_unknown(e,t))},O.prototype.handle_whitespace_and_comments=function(e,t){var a=e.newlines,n=this._options.keep_array_indentation&&k(this._flags.mode);if(e.comments_before){var i=e.comments_before.next();while(i)this.handle_whitespace_and_comments(i,t),this.handle_token(i,t),i=e.comments_before.next()}if(n)for(var o=0;o<a;o+=1)this.print_newline(o>0,t);else if(this._options.max_preserve_newlines&&a>this._options.max_preserve_newlines&&(a=this._options.max_preserve_newlines),this._options.preserve_newlines&&a>1){this.print_newline(!1,t);for(var r=1;r<a;r+=1)this.print_newline(!0,t)}};var N=["async","break","continue","return","throw","yield"];O.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var a=this._options.preserve_newlines&&e.newlines||t,n=d(this._flags.last_token.text,c)||d(e.text,c);if(n){var i=d(this._flags.last_token.text,c)&&d(this._options.operator_position,y)||d(e.text,c);a=a&&i}if(a)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(f(this._flags.last_token,N))return;this._output.set_wrap_point()}}},O.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==u.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text)){var a=this._tokens.peek();while(this._flags.mode===_.Statement&&(!this._flags.if_block||!m(a,"else"))&&!this._flags.do_block)this.restore_mode()}this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},O.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},O.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===u.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},O.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},O.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},O.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},O.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===_.Statement&&x(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},O.prototype.start_of_object_property=function(){return this._flags.parent.mode===_.ObjectLiteral&&this._flags.mode===_.Statement&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"]))},O.prototype.start_of_statement=function(e){var t=!1;return t=t||f(this._flags.last_token,["var","let","const"])&&e.type===u.WORD,t=t||m(this._flags.last_token,"do"),t=t||!(this._flags.parent.mode===_.ObjectLiteral&&this._flags.mode===_.Statement)&&f(this._flags.last_token,N)&&!e.newlines,t=t||m(this._flags.last_token,"else")&&!(m(e,"if")&&!e.comments_before),t=t||this._flags.last_token.type===u.END_EXPR&&(this._previous_flags.mode===_.ForInitializer||this._previous_flags.mode===_.Conditional),t=t||this._flags.last_token.type===u.WORD&&this._flags.mode===_.BlockStatement&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==u.WORD&&e.type!==u.RESERVED,t=t||this._flags.mode===_.ObjectLiteral&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"])),!!t&&(this.set_mode(_.Statement),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,f(e,["do","for","if","while"])),!0)},O.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=_.Expression;if("["===e.text){if(this._flags.last_token.type===u.WORD||")"===this._flags.last_token.text)return f(this._flags.last_token,s)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=_.ArrayLiteral,k(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),d(this._flags.last_token.type,[u.START_EXPR,u.END_EXPR,u.WORD,u.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===u.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=_.ForInitializer):d(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=_.Conditional):d(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(d(this._flags.last_token.text,s)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===u.WORD){this._output.space_before_token=!1;var a=this._tokens.peek(-3);if(this._options.space_after_named_function&&a){var n=this._tokens.peek(-4);f(a,["async","function"])||"*"===a.text&&f(n,["async","function"])?this._output.space_before_token=!0:this._flags.mode===_.ObjectLiteral&&("{"!==a.text&&","!==a.text&&("*"!==a.text||"{"!==n.text&&","!==n.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===u.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===_.ObjectLiteral&&d(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===u.START_BLOCK?this.print_newline():this._flags.last_token.type!==u.END_EXPR&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==u.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},O.prototype.handle_end_expr=function(e){while(this._flags.mode===_.Statement)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==u.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),x(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===_.Conditional&&(this._previous_flags.mode=_.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},O.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),a=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR?(this.set_mode(_.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(_.BlockStatement):a&&(d(a.text,[":",","])&&d(t.type,[u.STRING,u.WORD,u.RESERVED])||d(t.text,["get","set","..."])&&d(a.type,[u.WORD,u.RESERVED]))?d(this._last_last_text,["class","interface"])?this.set_mode(_.BlockStatement):this.set_mode(_.ObjectLiteral):this._flags.last_token.type===u.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(_.BlockStatement):d(this._flags.last_token.type,[u.EQUALS,u.START_EXPR,u.COMMA,u.OPERATOR])||f(this._flags.last_token,["return","throw","import","default"])?this.set_mode(_.ObjectLiteral):this.set_mode(_.BlockStatement);var n=!t.comments_before&&"}"===t.text,i=n&&"function"===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR;if(this._options.brace_preserve_inline){var o=0,r=null;this._flags.inline_frame=!0;do{if(o+=1,r=this._tokens.peek(o-1),r.newlines){this._flags.inline_frame=!1;break}}while(r.type!==u.EOF&&(r.type!==u.END_BLOCK||r.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==u.OPERATOR&&(i||this._flags.last_token.type===u.EQUALS||f(this._flags.last_token,b)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!k(this._previous_flags.mode)||this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.COMMA||((this._flags.last_token.type===u.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==u.OPERATOR&&this._flags.last_token.type!==u.START_EXPR&&(this._flags.last_token.type!==u.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),n||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},O.prototype.handle_end_block=function(e){this.handle_whitespace_and_comments(e);while(this._flags.mode===_.Statement)this.restore_mode();var t=this._flags.last_token.type===u.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},O.prototype.handle_word=function(e){if(e.type===u.RESERVED)if(d(e.text,["set","get"])&&this._flags.mode!==_.ObjectLiteral)e.type=u.WORD;else if("import"===e.text&&"("===this._tokens.peek().text)e.type=u.WORD;else if(d(e.text,["as","from"])&&!this._flags.import_block)e.type=u.WORD;else if(this._flags.mode===_.ObjectLiteral){var t=this._tokens.peek();":"===t.text&&(e.type=u.WORD)}if(this.start_of_statement(e)?f(this._flags.last_token,["var","let","const"])&&e.type===u.WORD&&(this._flags.declaration_statement=!0):!e.newlines||T(this._flags.mode)||this._flags.last_token.type===u.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===u.EQUALS||!this._options.preserve_newlines&&f(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(m(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&m(e,"else"))this._flags.else_block=!0;else{while(this._flags.mode===_.Statement)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&f(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==u.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.EQUALS&&this._flags.last_token.type!==u.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),m(e,"function"))return(d(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!d(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==u.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD?f(this._flags.last_token,["get","set","new","export"])||f(this._flags.last_token,N)||m(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===u.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!T(this._flags.mode)&&!k(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var a="NONE";if(this._flags.last_token.type===u.END_BLOCK?this._previous_flags.inline_frame?a="SPACE":f(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?a="NEWLINE":(a="SPACE",this._output.space_before_token=!0):a="NEWLINE":this._flags.last_token.type===u.SEMICOLON&&this._flags.mode===_.BlockStatement?a="NEWLINE":this._flags.last_token.type===u.SEMICOLON&&T(this._flags.mode)?a="SPACE":this._flags.last_token.type===u.STRING?a="NEWLINE":this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===_.ObjectLiteral&&d(this._last_last_text,["{",","]))?a="SPACE":this._flags.last_token.type===u.START_BLOCK?a=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===u.END_EXPR&&(this._output.space_before_token=!0,a="NEWLINE"),f(e,s)&&")"!==this._flags.last_token.text&&(a=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),f(e,["else","catch","finally"]))if((this._flags.last_token.type!==u.END_BLOCK||this._previous_flags.mode!==_.BlockStatement||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var n=this._output.current_line;"}"!==n.last()&&this.print_newline(),this._output.space_before_token=!0}else"NEWLINE"===a?f(this._flags.last_token,b)||"declare"===this._flags.last_token.text&&f(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==u.END_EXPR?this._flags.last_token.type===u.START_EXPR&&f(e,["var","let","const"])||":"===this._flags.last_token.text||(m(e,"if")&&m(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):f(e,s)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===a&&(this._output.space_before_token=!0);!e.previous||e.previous.type!==u.WORD&&e.previous.type!==u.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===u.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&m(e,"from")&&(this._flags.import_block=!1))},O.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);var t=this._tokens.peek();while(this._flags.mode===_.Statement&&(!this._flags.if_block||!m(t,"else"))&&!this._flags.do_block)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},O.prototype.handle_string=function(e){this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR||this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):this.print_newline()),this.print_token(e)},O.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},O.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(T(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===_.ObjectLiteral||this._flags.mode===_.Statement&&this._flags.parent.mode===_.ObjectLiteral?(this._flags.mode===_.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},O.prototype.handle_operator=function(e){var t="*"===e.text&&(f(this._flags.last_token,["function","yield"])||d(this._flags.last_token.type,[u.START_BLOCK,u.COMMA,u.END_BLOCK,u.SEMICOLON])),a=d(e.text,["-","+"])&&(d(this._flags.last_token.type,[u.START_BLOCK,u.START_EXPR,u.EQUALS,u.OPERATOR])||d(this._flags.last_token.text,s)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var n=!t;this.handle_whitespace_and_comments(e,n)}if(f(this._flags.last_token,b))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==u.DOT)if("::"!==e.text){if(this._flags.last_token.type===u.OPERATOR&&d(this._options.operator_position,y)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==u.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var i=!0,o=!0,r=!1;if(":"===e.text?0===this._flags.ternary_depth?i=!1:(this._flags.ternary_depth-=1,r=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!a&&!t&&this._options.preserve_newlines&&d(e.text,c)){var l=":"===e.text,p=l&&r,h=l&&!r;switch(this._options.operator_position){case v.before_newline:return this._output.space_before_token=!h,this.print_token(e),l&&!p||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case v.after_newline:return this._output.space_before_token=!0,!l||p?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case v.preserve_newline:return h||this.allow_wrap_or_preserved_newline(e),i=!(this._output.just_added_newline()||h),this._output.space_before_token=i,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),i=!1;var m=this._tokens.peek();o=m&&d(m.type,[u.WORD,u.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),i=this._flags.last_token.type===u.START_BLOCK,o=!1):(d(e.text,["--","++","!","~"])||a)&&(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR||this.allow_wrap_or_preserved_newline(e),i=!1,o=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&T(this._flags.mode)&&(i=!0),this._flags.last_token.type===u.RESERVED?i=!0:this._flags.last_token.type===u.END_EXPR?i=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===u.OPERATOR&&(i=d(e.text,["--","-","++","+"])&&d(this._flags.last_token.text,["--","-","++","+"]),d(e.text,["+","-"])&&d(this._flags.last_token.text,["--","++"])&&(o=!0)),(this._flags.mode!==_.BlockStatement||this._flags.inline_frame)&&this._flags.mode!==_.Statement||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||i,this.print_token(e),this._output.space_before_token=o}else this.print_token(e);else this.print_token(e)},O.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):o.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},O.prototype.print_block_commment=function(e,t){var a,n=w(e.text),i=!1,o=!1,r=e.whitespace_before,l=r.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(n[0]),this.print_newline(!1,t),n.length>1){for(n=n.slice(1),i=D(n,"*"),o=S(n,r),i&&(this._flags.alignment=1),a=0;a<n.length;a++)i?(this.print_token_line_indentation(e),this._output.add_token(p(n[a]))):o&&n[a]?(this.print_token_line_indentation(e),this._output.add_token(n[a].substring(l))):(this._output.current_line.set_indent(-1),this._output.add_token(n[a])),this.print_newline(!1,t);this._flags.alignment=0}},O.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},O.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),f(this._flags.last_token,b)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},O.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},O.prototype.handle_eof=function(e){while(this._flags.mode===_.Statement)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=O},function(e,t,a){"use strict";function n(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new n(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}n.prototype.clone_empty=function(){var e=new n(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},n.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},n.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},n.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},n.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},n.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},n.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},n.prototype.is_empty=function(){return 0===this.__items.length},n.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},n.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},n.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},n.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},n.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},n.prototype.trim=function(){while(" "===this.last())this.__items.pop(),this.__character_count-=1},n.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var a=this.__base_string_length;return t=t||0,e<0&&(a=0),a+=e*this.__indent_size,a+=t,a},i.prototype.get_indent_string=function(e,t){var a=this.__base_string;return t=t||0,e<0&&(e=0,a=""),t+=e*this.__indent_size,this.__ensure_cache(t),a+=this.__cache[t],a},i.prototype.__ensure_cache=function(e){while(e>=this.__cache.length)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,a="";this.__indent_size&&e>=this.__indent_size&&(t=Math.floor(e/this.__indent_size),e-=t*this.__indent_size,a=new Array(t+1).join(this.__indent_string)),e&&(a+=new Array(e+1).join(" ")),this.__cache.push(a)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var a=this.__lines.join("\n");return"\n"!==e&&(a=a.replace(/[\n]/g,e)),a},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){var t=this.__lines.length;while(e<t)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){e=void 0!==e&&e,this.current_line.trim();while(e&&this.__lines.length>1&&this.current_line.is_empty())this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){var a=this.__lines.length-2;while(a>=0){var i=this.__lines[a];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(a+1,0,new n(this)),this.previous_line=this.__lines[this.__lines.length-2];break}a--}},e.exports.Output=o},function(e,t,a){"use strict";function n(e,t,a,n){this.type=e,this.text=t,this.comments_before=null,this.newlines=a||0,this.whitespace_before=n||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}e.exports.Token=n},function(e,t,a){"use strict";var n="\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",r="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",l="(?:\\\\u[0-9a-fA-F]{4}|["+n+o+"])",s="(?:\\\\u[0-9a-fA-F]{4}|["+i+o+r+"])*";t.identifier=new RegExp(l+s,"g"),t.identifierStart=new RegExp(l),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+i+o+r+"])+");t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,a){"use strict";var n=a(6).Options,i=["before-newline","after-newline","preserve-newline"];function o(e){n.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var a=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<a.length;o++)"preserve-inline"===a[o]?this.brace_preserve_inline=!0:this.brace_style=a[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",i),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}o.prototype=new n,e.exports.Options=o},function(e,t,a){"use strict";function n(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function i(e,t){var a,n={};for(a in e=o(e),e)a!==t&&(n[a]=e[a]);if(t&&e[t])for(a in e[t])n[a]=e[t][a];return n}function o(e){var t,a={};for(t in e){var n=t.replace(/-/g,"_");a[n]=e[t]}return a}n.prototype._get_array=function(e,t){var a=this.raw_options[e],n=t||[];return"object"===typeof a?null!==a&&"function"===typeof a.concat&&(n=a.concat()):"string"===typeof a&&(n=a.split(/[^a-zA-Z0-9_\/\-]+/)),n},n.prototype._get_boolean=function(e,t){var a=this.raw_options[e],n=void 0===a?!!t:!!a;return n},n.prototype._get_characters=function(e,t){var a=this.raw_options[e],n=t||"";return"string"===typeof a&&(n=a.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),n},n.prototype._get_number=function(e,t){var a=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var n=parseInt(a,10);return isNaN(n)&&(n=t),n},n.prototype._get_selection=function(e,t,a){var n=this._get_selection_list(e,t,a);if(1!==n.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n[0]},n.prototype._get_selection_list=function(e,t,a){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(a=a||[t[0]],!this._is_valid_selection(a,t))throw new Error("Invalid Default Value!");var n=this._get_array(e,a);if(!this._is_valid_selection(n,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return n},n.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=n,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},function(e,t,a){"use strict";var n=a(8).InputScanner,i=a(9).Tokenizer,o=a(9).TOKEN,r=a(13).Directives,l=a(4),s=a(12).Pattern,c=a(14).TemplatablePattern;function u(e,t){return-1!==t.indexOf(e)}var d={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},p=new r(/\/\*/,/\*\//),h=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,m=/[0-9]/,f=/[^\d\.]/,b=">>> === !== << && >= ** != == <= >> || < / - + > : & % ? ^ | *".split(" "),g=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= = ! ? > < : / ^ - + * & % ~ |";g=g.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),g=g.replace(/ /g,"|");var v,y=new RegExp(g),_="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),x=_.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),w=new RegExp("^(?:"+x.join("|")+")$"),k=function(e,t){i.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var a=new s(this._input),n=new c(this._input).read_options(this._options);this.__patterns={template:n,identifier:n.starting_with(l.identifier).matching(l.identifierMatch),number:a.matching(h),punct:a.matching(y),comment:a.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:a.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:a.matching(/<!--/),html_comment_end:a.matching(/-->/),include:a.starting_with(/#include/).until_after(l.lineBreak),shebang:a.starting_with(/#!/).until_after(l.lineBreak),xml:a.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:n.until(/['\\\n\r\u2028\u2029]/),double_quote:n.until(/["\\\n\r\u2028\u2029]/),template_text:n.until(/[`\\$]/),template_expression:n.until(/[`}\\]/)}};function T(e){var t="",a=0,i=new n(e),o=null;while(i.hasNext())if(o=i.match(/([\s]|[^\\]|\\\\)+/g),o&&(t+=o[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())o=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){t+="\\",i.hasNext()&&(t+=i.next());continue}o=i.match(/u([0-9A-Fa-f]{4})/g)}if(!o)return e;if(a=parseInt(o[1],16),a>126&&a<=255&&0===o[0].indexOf("x"))return e;if(a>=0&&a<32){t+="\\"+o[0];continue}t+=34===a||39===a||92===a?"\\"+String.fromCharCode(a):String.fromCharCode(a)}return t}k.prototype=new i,k.prototype._is_comment=function(e){return e.type===d.COMMENT||e.type===d.BLOCK_COMMENT||e.type===d.UNKNOWN},k.prototype._is_opening=function(e){return e.type===d.START_BLOCK||e.type===d.START_EXPR},k.prototype._is_closing=function(e,t){return(e.type===d.END_BLOCK||e.type===d.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},k.prototype._reset=function(){v=!1},k.prototype._get_next_token=function(e,t){var a=null;this._readWhitespace();var n=this._input.peek();return null===n?this._create_token(d.EOF,""):(a=a||this._read_string(n),a=a||this._read_word(e),a=a||this._read_singles(n),a=a||this._read_comment(n),a=a||this._read_regexp(n,e),a=a||this._read_xml(n,e),a=a||this._read_non_javascript(n),a=a||this._read_punctuation(),a=a||this._create_token(d.UNKNOWN,this._input.next()),a)},k.prototype._read_word=function(e){var t;return t=this.__patterns.identifier.read(),""!==t?(t=t.replace(l.allLineBreaks,"\n"),e.type!==d.DOT&&(e.type!==d.RESERVED||"set"!==e.text&&"get"!==e.text)&&w.test(t)?"in"===t||"of"===t?this._create_token(d.OPERATOR,t):this._create_token(d.RESERVED,t):this._create_token(d.WORD,t)):(t=this.__patterns.number.read(),""!==t?this._create_token(d.WORD,t):void 0)},k.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(d.START_EXPR,e):")"===e||"]"===e?t=this._create_token(d.END_EXPR,e):"{"===e?t=this._create_token(d.START_BLOCK,e):"}"===e?t=this._create_token(d.END_BLOCK,e):";"===e?t=this._create_token(d.SEMICOLON,e):"."===e&&f.test(this._input.peek(1))?t=this._create_token(d.DOT,e):","===e&&(t=this._create_token(d.COMMA,e)),t&&this._input.next(),t},k.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(d.EQUALS,e):this._create_token(d.OPERATOR,e)},k.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read(),t))return this._create_token(d.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read(),t)return this._create_token(d.UNKNOWN,t.trim()+"\n");e=this._input.next();var a="#";if(this._input.hasNext()&&this._input.testChar(m)){do{e=this._input.next(),a+=e}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(a+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(a+="{}",this._input.next(),this._input.next())),this._create_token(d.WORD,a)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read(),t){while(this._input.hasNext()&&!this._input.testChar(l.newline))t+=this._input.next();return v=!0,this._create_token(d.COMMENT,t)}}else if(v&&"-"===e&&(t=this.__patterns.html_comment_end.read(),t))return v=!1,this._create_token(d.COMMENT,t);return null},k.prototype._read_comment=function(e){var t=null;if("/"===e){var a="";if("*"===this._input.peek(1)){a=this.__patterns.block_comment.read();var n=p.get_directives(a);n&&"start"===n.ignore&&(a+=p.readIgnored(this._input)),a=a.replace(l.allLineBreaks,"\n"),t=this._create_token(d.BLOCK_COMMENT,a),t.directives=n}else"/"===this._input.peek(1)&&(a=this.__patterns.comment.read(),t=this._create_token(d.COMMENT,a))}return t},k.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=T(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(l.allLineBreaks,"\n"),this._create_token(d.STRING,t)}return null},k.prototype._allow_regexp_or_xml=function(e){return e.type===d.RESERVED&&u(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===d.END_EXPR&&")"===e.text&&e.opened.previous.type===d.RESERVED&&u(e.opened.previous.text,["if","while","for"])||u(e.type,[d.COMMENT,d.START_EXPR,d.START_BLOCK,d.START,d.END_BLOCK,d.OPERATOR,d.EQUALS,d.EOF,d.SEMICOLON,d.COMMA])},k.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){var a=this._input.next(),n=!1,i=!1;while(this._input.hasNext()&&(n||i||this._input.peek()!==e)&&!this._input.testChar(l.newline))a+=this._input.peek(),n?n=!1:(n="\\"===this._input.peek(),"["===this._input.peek()?i=!0:"]"===this._input.peek()&&(i=!1)),this._input.next();return this._input.peek()===e&&(a+=this._input.next(),a+=this._input.read(l.identifier)),this._create_token(d.STRING,a)}return null},k.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var a="",n=this.__patterns.xml.read_match();if(n){var i=n[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),o=0===i.indexOf("{"),r=0;while(n){var s=!!n[1],c=n[2],u=!!n[n.length-1]||"![CDATA["===c.slice(0,8);if(!u&&(c===i||o&&c.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(s?--r:++r),a+=n[0],r<=0)break;n=this.__patterns.xml.read_match()}return n||(a+=this._input.match(/[\s\S]*/g)[0]),a=a.replace(l.allLineBreaks,"\n"),this._create_token(d.STRING,a)}}return null},k.prototype._read_string_recursive=function(e,t,a){var n,i;"'"===e?i=this.__patterns.single_quote:'"'===e?i=this.__patterns.double_quote:"`"===e?i=this.__patterns.template_text:"}"===e&&(i=this.__patterns.template_expression);var o=i.read(),r="";while(this._input.hasNext()){if(r=this._input.next(),r===e||!t&&l.newline.test(r)){this._input.back();break}"\\"===r&&this._input.hasNext()?(n=this._input.peek(),"x"===n||"u"===n?this.has_char_escapes=!0:"\r"===n&&"\n"===this._input.peek(1)&&this._input.next(),r+=this._input.next()):a&&("${"===a&&"$"===r&&"{"===this._input.peek()&&(r+=this._input.next()),a===r&&(r+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(r+=this._input.next()))),r+=i.read(),o+=r}return o},e.exports.Tokenizer=k,e.exports.TOKEN=d,e.exports.positionable_operators=b.slice(),e.exports.line_starters=_.slice()},function(e,t,a){"use strict";var n=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var a=e.exec(this.__input);return!a||n&&e.sticky||a.index!==t&&(a=null),a},i.prototype.test=function(e,t){return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var a=this.peek(t);return e.lastIndex=0,null!==a&&e.test(a)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,a){var n,i="";return e&&(n=this.match(e),n&&(i+=n[0])),!t||!n&&e||(i+=this.readUntil(t,a)),i},i.prototype.readUntil=function(e,t){var a="",n=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(n=i.index,t&&(n+=i[0].length)):n=this.__input_length,a=this.__input.substring(this.__position,n),this.__position=n,a},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var a=null,i="g";return t&&n&&(i="y"),"string"===typeof e&&""!==e?a=new RegExp(e,i):e&&(a=new RegExp(e.source,i)),a},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,a=this.readUntilAfter(e);return this.__position=t,a},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},function(e,t,a){"use strict";var n=a(8).InputScanner,i=a(3).Token,o=a(10).TokenStream,r=a(11).WhitespacePattern,l={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},s=function(e,t){this._input=new n(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new r(this._input)};s.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new o,this._reset();var t=new i(l.START,""),a=null,n=[],r=new o;while(t.type!==l.EOF){e=this._get_next_token(t,a);while(this._is_comment(e))r.add(e),e=this._get_next_token(t,a);r.isEmpty()||(e.comments_before=r,r=new o),e.parent=a,this._is_opening(e)?(n.push(a),a=e):a&&this._is_closing(e,a)&&(e.opened=a,a.closed=e,a=n.pop(),e.parent=a),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},s.prototype._is_first_token=function(){return this.__tokens.isEmpty()},s.prototype._reset=function(){},s.prototype._get_next_token=function(e,t){this._readWhitespace();var a=this._input.read(/.+/g);return a?this._create_token(l.RAW,a):this._create_token(l.EOF,"")},s.prototype._is_comment=function(e){return!1},s.prototype._is_opening=function(e){return!1},s.prototype._is_closing=function(e,t){return!1},s.prototype._create_token=function(e,t){var a=new i(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return a},s.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=s,e.exports.TOKEN=l},function(e,t,a){"use strict";function n(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}n.prototype.restart=function(){this.__position=0},n.prototype.isEmpty=function(){return 0===this.__tokens_length},n.prototype.hasNext=function(){return this.__position<this.__tokens_length},n.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},n.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},n.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=n},function(e,t,a){"use strict";var n=a(12).Pattern;function i(e,t){n.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}i.prototype=new n,i.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},i.prototype.matching=function(e,t){var a=this._create();return a.__set_whitespace_patterns(e,t),a._update(),a},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(e,t){e.lastIndex=0;var a=0,n=[],i=e.exec(t);while(i)n.push(t.substring(a,i.index)),a=i.index+i[0].length,i=e.exec(t);return a<t.length?n.push(t.substring(a,t.length)):n.push(""),n},e.exports.WhitespacePattern=i},function(e,t,a){"use strict";function n(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}n.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},n.prototype.read_match=function(){return this._input.match(this._match_pattern)},n.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},n.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},n.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},n.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},n.prototype._create=function(){return new n(this._input,this)},n.prototype._update=function(){},e.exports.Pattern=n},function(e,t,a){"use strict";function n(e,t){e="string"===typeof e?e:e.source,t="string"===typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}n.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;var a=this.__directive_pattern.exec(e);while(a)t[a[1]]=a[2],a=this.__directive_pattern.exec(e);return t},n.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=n},function(e,t,a){"use strict";var n=a(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1};function o(e,t){n.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var a=new n(e);this.__patterns={handlebars_comment:a.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:a.starting_with(/{{{/).until_after(/}}}/),handlebars:a.starting_with(/{{/).until_after(/}}/),php:a.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:a.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:a.starting_with(/{%/).until_after(/%}/),django_value:a.starting_with(/{{/).until_after(/}}/),django_comment:a.starting_with(/{#/).until_after(/#}/)}}o.prototype=new n,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},o.prototype.read_options=function(e){var t=this._create();for(var a in i)t._disabled[a]=-1===e.templating.indexOf(a);return t._update(),t},o.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},o.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);var t=this._read_template();while(t)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},o.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},o.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var a=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==a||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==a||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=e||this.__patterns.handlebars_comment.read(),e=e||this.__patterns.handlebars_unescaped.read(),e=e||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=e||this.__patterns.django_comment.read(),e=e||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=o}]),o=a;n=[],i=function(){return{js_beautify:o}}.apply(t,n),void 0===i||(e.exports=i)})()},e98e:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return l}));var n=a("b775");function i(e){return Object(n["a"])({url:"/output/taxno/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/output/taxno/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/output/taxno",method:"put",data:e})}function l(e){return Object(n["a"])({url:"/output/taxno/"+e.invType+"/getTaxnoStockInfo",method:"get",params:e})}},ea30:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{ref:"passwordForm",staticClass:"my-form",attrs:{model:e.queryParams,rules:e.rules,"label-width":"80px"}},[a("h4",[e._v("密码长度至少为 8 位, 并至少包含一位字母, 数字及特殊字符(!@#$%^&*)")]),a("el-form-item",{attrs:{label:"账号",prop:"userName"}},[a("el-input",{attrs:{size:"small",readonly:""},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),a("el-form-item",{attrs:{label:"原密码",prop:"oldPassword"}},[a("el-input",{attrs:{placeholder:"请输入原密码",clearable:"",size:"small","show-password":""},model:{value:e.queryParams.oldPassword,callback:function(t){e.$set(e.queryParams,"oldPassword",t)},expression:"queryParams.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{placeholder:"请输入新密码",clearable:"",size:"small","show-password":""},model:{value:e.queryParams.newPassword,callback:function(t){e.$set(e.queryParams,"newPassword",t)},expression:"queryParams.newPassword"}})],1),a("el-form-item",{attrs:{label:"二次密码",prop:"confirmPassword"}},[a("el-input",{attrs:{placeholder:"请输入二次密码",clearable:"",size:"small","show-password":""},model:{value:e.queryParams.confirmPassword,callback:function(t){e.$set(e.queryParams,"confirmPassword",t)},expression:"queryParams.confirmPassword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:e.submitPassword}},[e._v("确定")])],1)],1)],1)},i=[],o=a("7ded"),r={name:"editpassword",data:function(){var e=this,t=function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.queryParams.newPassword?n(new Error("两次输入密码不一致!")):n()};return{mainLoading:!1,queryParams:{userName:null,oldPassword:null,newPassword:null,confirmPassword:null},rules:{oldPassword:[{required:!0,message:"原密码不能为空",trigger:["blur","change"]}],newPassword:[{required:!0,message:"新密码不能为空",trigger:["blur","change"]},{pattern:/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/,message:"密码长度至少为 8 位, 并至少包含一位字母, 数字及特殊字符(!@#$%^&*)",trigger:["blur","change"]}],confirmPassword:[{required:!0,message:"二次密码不能为空",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}]}}},created:function(){var e=this.$route.params.userName;e&&(this.queryParams.userName=e)},methods:{submitPassword:function(){var e=this;this.$refs["passwordForm"].validate((function(t){if(t){var a=e.queryParams;Object(o["f"])(a).then((function(t){200==t.code&&(e.msgSuccess("密码修改成功，已跳到登录页，请重新登录！"),e.$router.push("/"))}))}}))}}},l=r,s=(a("81a9"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,"16a361a1",null);t["default"]=c.exports},eab4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=a("313e"),r=a.n(o),l=a("feb2");a("817d");var s={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(e){this.setOptions(e)}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expectedData,a=e.actualData;this.chart.setOption({xAxis:{data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["expected","actual"]},series:[{name:"expected",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2}}},smooth:!0,type:"line",data:t,animationDuration:2800,animationEasing:"cubicInOut"},{name:"actual",smooth:!0,type:"line",itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2},areaStyle:{color:"#f3f8ff"}}},data:a,animationDuration:2800,animationEasing:"quadraticOut"}]})}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports},ec55:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"arrow-left"},on:{click:e.back}},[e._v(" 返回 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v(" 401错误! ")]),a("h2",[e._v("您没有访问权限！")]),a("h6",[e._v("对不起，您没有访问权限，请不要进行非法操作！您可以返回主页面")]),a("ul",{staticClass:"list-unstyled"},[a("li",{staticClass:"link-type"},[a("router-link",{attrs:{to:"/"}},[e._v(" 回首页 ")])],1)])]),a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1)],1)},i=[],o=a("cc6c"),r=a.n(o),l={name:"Page401",data:function(){return{errGif:r.a+"?"+ +new Date}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/"}):this.$router.go(-1)}}},s=l,c=(a("4252"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"f2e02586",null);t["default"]=u.exports},ec99:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"billManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"pull-right operation-btn"},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:invoice:sign"],expression:"['output:invoice:sign']"}],attrs:{type:"primary",size:"mini"},on:{click:e.saveBill}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.transformTax}},[e._v("转换")])],1),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"billManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"单据编码",prop:"billNo"}},[a("el-input",{attrs:{maxlength:30,disabled:"",clearable:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票种类",prop:"invType"}},[a("el-select",{attrs:{disabled:""},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"是否清单",prop:"detailFlag"}},[a("el-input",{attrs:{maxlength:30,disabled:""},model:{value:e.form.detailFlag,callback:function(t){e.$set(e.form,"detailFlag",t)},expression:"form.detailFlag"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1),a("el-row",["1"==e.redFlag?a("el-alert",{attrs:{title:"红票",type:"error",center:"",closable:!1}}):"1"==e.cancelFlag?a("el-alert",{attrs:{title:"作废票",type:"info",center:"",closable:!1}}):a("el-alert",{attrs:{title:"正常",type:"success",center:"",closable:!1}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{maxlength:11,disabled:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"购方名称",prop:"buyName"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购方识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo",t)},expression:"form.buyTaxNo"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方地址电话",prop:"buyAddrTel"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyAddrTel,callback:function(t){e.$set(e.form,"buyAddrTel",t)},expression:"form.buyAddrTel"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"购方开户行及账号",prop:"buyBankAccount"}},[a("el-input",{attrs:{maxlength:100,disabled:""},model:{value:e.form.buyBankAccount,callback:function(t){e.$set(e.form,"buyBankAccount",t)},expression:"form.buyBankAccount"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["51","52","81","82"].includes(e.form.invType),expression:"['51', '52', '81', '82'].includes(form.invType)"}],attrs:{label:"购方邮箱",prop:"buyEmail"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.buyEmail,callback:function(t){e.$set(e.form,"buyEmail","string"===typeof t?t.trim():t)},expression:"form.buyEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["51","52","81","82"].includes(e.form.invType),expression:"['51', '52', '81', '82'].includes(form.invType)"}],attrs:{label:"购方手机",prop:"buyTelNo"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.buyTelNo,callback:function(t){e.$set(e.form,"buyTelNo","string"===typeof t?t.trim():t)},expression:"form.buyTelNo"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{ref:"billDetailTable",staticStyle:{width:"100%"},attrs:{data:e.billDetailsData,"max-height":"250"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkboxInit}}),a("el-table-column",{attrs:{label:"简称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsNameAbbreviation,callback:function(a){e.$set(t.row,"goodsNameAbbreviation",a)},expression:"scope.row.goodsNameAbbreviation"}})]}}])}),a("el-table-column",{attrs:{label:"货物名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}})]}}])}),a("el-table-column",{attrs:{label:"税收分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxTypeCode,callback:function(a){e.$set(t.row,"taxTypeCode",a)},expression:"scope.row.taxTypeCode"}})]}}])}),a("el-table-column",{attrs:{label:"规格型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}})]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.unit,callback:function(a){e.$set(t.row,"unit",a)},expression:"scope.row.unit"}})]}}])}),a("el-table-column",{attrs:{label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.withoutTaxPrice,callback:function(a){e.$set(t.row,"withoutTaxPrice",a)},expression:"scope.row.withoutTaxPrice"}})]}}],null,!1,2015419679)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxPrice,callback:function(a){e.$set(t.row,"taxPrice",a)},expression:"scope.row.taxPrice"}})]}}])}):e._e(),"0"===e.hsbz?a("el-table-column",{attrs:{label:"(不含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithoutTax,callback:function(a){e.$set(t.row,"amountWithoutTax",a)},expression:"scope.row.amountWithoutTax"}})]}}],null,!1,2295175998)}):"1"===e.hsbz?a("el-table-column",{attrs:{label:"(含税)金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.amountWithTax,callback:function(a){e.$set(t.row,"amountWithTax",a)},expression:"scope.row.amountWithTax"}})]}}])}):e._e(),a("el-table-column",{attrs:{prop:"name",label:"税率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.rate,callback:function(a){e.$set(t.row,"rate",a)},expression:"scope.row.rate"}})]}}])}),a("el-table-column",{attrs:{label:"税额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:""},model:{value:t.row.taxAmount,callback:function(a){e.$set(t.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]}}])})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.totalTableData,"show-header":!1}},[a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"name"}}),a("el-table-column",{attrs:{"min-width":"2",align:"center",prop:"column1"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column2"}}),a("el-table-column",{attrs:{"min-width":"1",align:"center",prop:"column3"}})],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方名称",prop:"sellName"}},[a("el-input",{attrs:{maxlength:50,disabled:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"销方税号",prop:"sellTaxNo"}},[a("el-input",{attrs:{maxlength:20,disabled:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:230,disabled:""},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),a("el-col",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方地址电话",prop:"sellAddrTel"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellAddrTel,callback:function(t){e.$set(e.form,"sellAddrTel",t)},expression:"form.sellAddrTel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"销方开户行及账号",prop:"sellBankAccount"}},[a("el-input",{attrs:{maxlength:200,disabled:""},model:{value:e.form.sellBankAccount,callback:function(t){e.$set(e.form,"sellBankAccount",t)},expression:"form.sellBankAccount"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款人",prop:"cashier"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.cashier,callback:function(t){e.$set(e.form,"cashier","string"===typeof t?t.trim():t)},expression:"form.cashier"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"复核人",prop:"checker"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker","string"===typeof t?t.trim():t)},expression:"form.checker"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,disabled:""},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1)],1)],1)],1)])],1)},i=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("99af"),a("b680"),a("25f0"),a("c394")),r={name:"ticketDetailShowModal",props:{},data:function(){return{id:"",form:{billNo:"",invType:"2",detailFlag:"0",invCode:"",invNo:"",buyEmail:"",buyTelNo:"",buyName:"",buyTaxNo:"",buyAddrTel:"",buyBankAccount:"",sellName:"",sellTaxNo:"",sellAddrTel:"",sellBankAccount:"",note:"",cashier:"",checker:"",invoicer:"",totalAmount:"0.00 ",totalAmountWithoutTax:"0.00",totalTaxAmount:"0.00"},cancelFlag:"",redFlag:"",hsbz:"0",fplxdesc:"增值税普通发票",billDetailsData:[{index:0,goodsNameAbbreviation:"",goodsName:"",taxTypeCode:"",standard:"",units:"",number:"",taxPrice:"",withoutTaxPrice:"",amountWithTax:"",amountWithoutTax:"",rate:"",taxAmount:""}],open:!1,title:"发票详情",invTypeOptions:[],detailFlagOptions:[],taxPlateIdOptions:[{value:"测试",label:"测试税盘"}],taxRateOptions:[],showWithTax:!0,testData:[],rules:{buyEmail:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],buyTelNo:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},watch:{},computed:{totalAmountUpperCase:function(){return this.swapper(this.form.totalAmount)},totalTableData:function(){var e=[{name:"合计",column1:"",column2:"",column3:""},{name:"价税合计",column1:"",column2:"",column3:""}];return"1"==this.hsbz?e[0].column2=this.form.totalAmount:e[0].column2=this.form.totalAmountWithoutTax,e[0].column3=this.form.totalTaxAmount,e[1].column1=this.totalAmountUpperCase,e[1].column2=this.form.totalAmount,e}},created:function(){var e=this;Promise.all([this.getDicts("output_inv_type"),this.getDicts("qdoutput_invoice_type")]).then((function(t){e.invTypeOptions=[].concat(t[0].data,t[1].data)})),this.getDicts("sys_yes_no_num").then((function(t){e.detailFlagOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return Object(o["r"])(e).then((function(e){var a=e.data;t.id=a.id,t.form.billNo=a.billNo,t.form.invCode=a.invCode,t.form.invNo=a.invNo,t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form.invType=a.invType,t.form.detailFlag=t.selectDictLabel(t.detailFlagOptions,a.detailFlag),t.form.buyEmail=a.buyEmail,t.form.buyTelNo=a.buyTelNo,t.form.buyName=a.buyName,t.form.buyTaxNo=a.buyTaxNo,t.form.buyAddrTel=a.buyAddrTel,t.form.buyBankAccount=a.buyBankAccount,t.form.sellName=a.sellName,t.form.sellTaxNo=a.sellTaxNo,t.form.sellAddrTel=a.sellAddrTel,t.form.sellBankAccount=a.sellBankAccount,t.form.totalAmount=a.totalAmount,t.form.totalAmountWithoutTax=a.totalAmountWithoutTax,t.form.totalTaxAmount=a.totalTaxAmount,t.form.note=a.note,t.form.cashier=a.cashier,t.form.checker=a.checker,t.form.invoicer=a.invoicer;var n=a.details;t.billDetailsData.length=0;for(var i=0;i<n.length;i++){var o=n[i];o.index=i,o.rate=t.transformRate(o),t.billDetailsData.push(o)}t.cancelFlag=a.cancelFlag,t.redFlag=a.redFlag,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},transformTax:function(){"0"==this.hsbz?this.hsbz="1":this.hsbz="0"},handleSelectionChange:function(e){console.log(e)},saveBill:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a={id:e.id,buyEmail:e.form.buyEmail,buyTelNo:e.form.buyTelNo};Object(o["J"])(a).then((function(t){200==t.code&&(e.msgSuccess(t.msg),e.open=!1,e.$emit("updateInvoiceTable"))}))}}))}}},l=r,s=(a("51e0"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},ed3b:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a("b775");function i(e){return Object(n["a"])({url:"/income/gxrz/operateStatistics",method:"post",params:e})}function o(){return Object(n["a"])({url:"/income/gxrz/queryStatisticsResult",method:"get"})}},ed45:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"h",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"g",(function(){return d}));var n=a("b775");function i(e){return Object(n["a"])({url:"/system/dict/type/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/system/dict/type/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/system/dict/type",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/system/dict/type",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/system/dict/type/"+e,method:"delete"})}function c(){return Object(n["a"])({url:"/system/dict/type/clearCache",method:"delete"})}function u(e){return Object(n["a"])({url:"/system/dict/type/export",method:"get",params:e,responseType:"blob"})}function d(){return Object(n["a"])({url:"/system/dict/type/optionselect",method:"get"})}},ed47:function(e,t,a){"use strict";a("a18b")},ed69:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"basicInfoForm",attrs:{model:e.info,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入仓库名称"},model:{value:e.info.tableName,callback:function(t){e.$set(e.info,"tableName",t)},expression:"info.tableName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.info.tableComment,callback:function(t){e.$set(e.info,"tableComment",t)},expression:"info.tableComment"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实体类名称",prop:"className"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.info.className,callback:function(t){e.$set(e.info,"className",t)},expression:"info.className"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"作者",prop:"functionAuthor"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.info.functionAuthor,callback:function(t){e.$set(e.info,"functionAuthor",t)},expression:"info.functionAuthor"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.info.remark,callback:function(t){e.$set(e.info,"remark",t)},expression:"info.remark"}})],1)],1)],1)],1)},i=[],o={name:"BasicInfoForm",props:{info:{type:Object,default:null}},data:function(){return{rules:{tableName:[{required:!0,message:"请输入表名称",trigger:"blur"}],tableComment:[{required:!0,message:"请输入表描述",trigger:"blur"}],className:[{required:!0,message:"请输入实体类名称",trigger:"blur"}],functionAuthor:[{required:!0,message:"请输入作者",trigger:"blur"}]}}}},r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},ee46:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("el-input",{attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:e.user.oldPassword,callback:function(t){e.$set(e.user,"oldPassword",t)},expression:"user.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.user.newPassword,callback:function(t){e.$set(e.user,"newPassword",t)},expression:"user.newPassword"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{placeholder:"请确认密码",type:"password"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},i=[],o=a("c0c7"),r={data:function(){var e=this,t=function(t,a,n){e.user.newPassword!==a?n(new Error("两次输入的密码不一致")):n()};return{test:"1test",user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{pattern:/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/,message:"密码长度至少为 8 位, 并包含字母, 数字及特殊字符(!@#$%^&*)",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(o["n"])(e.user.oldPassword,e.user.newPassword).then((function(t){200===t.code&&e.msgSuccess("修改成功")}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/index"})}}},l=r,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=c.exports},ee70:function(e,t,a){"use strict";a("2bec")},ee7c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[n("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"qdAccountMainTable",attrs:{data:e.accountList,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{label:"办税人姓名",align:"center",prop:"bsryxm"}}),n("el-table-column",{attrs:{label:"纳税人识别号",align:"center",prop:"nsrsbh"}}),n("el-table-column",{attrs:{label:"是否已使用",align:"center",prop:"used"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},on:{change:function(a){return e.handleStatusChange(t.row)}},model:{value:t.row.used,callback:function(a){e.$set(t.row,"used",a)},expression:"scope.row.used"}})]}}])}),n("el-table-column",{attrs:{label:"使用人姓名",align:"center",prop:"usePersonName"}}),n("el-table-column",{attrs:{label:"使用时间",align:"center",prop:"useTime"}}),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"==t.row.dlfs?n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:account:edit"],expression:"['qdoutput:account:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleAuth(t.row)}}},[e._v("自主授权")]):e._e(),n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["qdoutput:account:edit"],expression:"['qdoutput:account:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleVerification(t.row)}}},[e._v("验证")])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),n("el-dialog",{attrs:{title:"二维码",visible:e.qrDialog.open,width:"345px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.qrDialog,"open",t)}}},[e.qrDialog.src?[n("div",{staticClass:"qd_header_container"},[n("div",{staticStyle:{color:"red"}},[e._v("请用电子税务局APP扫描二维码进行身份认证")]),n("div",[e._v("当前时间："+e._s(e.qrDialog.currTime))]),n("div",[e._v("失效时间："+e._s(e.qrDialog.expireTime))])]),n("img",{attrs:{src:e.qrDialog.src}})]:[n("div",{staticStyle:{"margin-bottom":"5px","font-weight":"600"}},[e._v(" 错误原因："+e._s(e.qrDialog.errMsg)+" ")]),n("div",{staticStyle:{width:"300px",background:"#f7f7f7"}},[n("img",{staticStyle:{width:"100%"},attrs:{src:a("3565")}})])],n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleRefresh}},[e._v("刷 新")])],1)],2),n("el-dialog",{attrs:{title:"自主授权",visible:e.autoAuth.open,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.autoAuth,"open",t)}}},[n("iframe",{key:e.autoAuth.url,staticStyle:{width:"100%",height:"70vh",border:"none"},attrs:{src:e.autoAuth.url}})])],1)},i=[],o=a("c7eb"),r=a("1da1"),l=(a("d81d"),a("b775"));function s(e){return Object(l["a"])({url:"/qdoutput/account/list",method:"get",params:e})}function c(e){return Object(l["a"])({url:"/qdoutput/account/getAuthUrl",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/qdoutput/account",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/qdoutput/account",method:"put",data:e})}function p(e){return Object(l["a"])({url:"/qdoutput/account/"+e,method:"delete"})}function h(e){return Object(l["a"])({url:"/qdoutput/account/export",method:"get",params:e})}function m(e){return Object(l["a"])({url:"/qdoutput/account/getQrCode",method:"post",params:e})}function f(e){return Object(l["a"])({url:"/qdoutput/account/getQrCodeResult",method:"post",params:e})}var b={name:"Account",props:{useType:{type:String,default:"owner"}},data:function(){return{tableHeight:null,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,accountList:[],title:"",open:!1,yjjbOptions:[],sxlbOptions:[],sfslOptions:[],autoAuth:{open:!1,url:""},queryParams:{pageNum:1,pageSize:10,yjjb:null,sxlb:null,sfsl:null,regId:null,reqId:null},form:{},rules:{},currOperationRow:null,qrDialog:{open:!1,src:null,currTime:null,expireTime:null,row:null,errMsg:""},requestNum:0}},created:function(){var e=this;this.getList(),this.getDicts("qd_warn_level").then((function(t){e.yjjbOptions=t.data})),this.getDicts("qd_nsr_level").then((function(t){e.sxlbOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.sfslOptions=t.data}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight()-("component"==this.useType?"54":0),window.onresize=function(){e.tableHeight=e.calcTableHeight()-("component"==e.useType?"54":0)}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight()-("component"==this.useType?"54":0),window.onresize=function(){e.tableHeight=e.calcTableHeight()-("component"==e.useType?"54":0)}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()-("component"==a.useType?"54":0)}))}},methods:{getList:function(){var e=this;this.loading=!0,s(this.queryParams).then((function(t){e.accountList=t.rows,e.total=t.total,e.loading=!1}))},yjjbFormat:function(e,t){return this.selectDictLabel(this.yjjbOptions,e.yjjb)},sxlbFormat:function(e,t){return this.selectDictLabel(this.sxlbOptions,e.sxlb)},sfslFormat:function(e,t){return this.selectDictLabel(this.sfslOptions,e.sfsl)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,yjjb:null,sxlb:null,sfsl:null,regId:null,reqId:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加全电账号状态"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;getAccountEwm(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改全电账号状态"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?d(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):u(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除全电账号状态编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有全电账号状态数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return h(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},handleAuth:function(e){var t=this;this.$confirm("自主授权请确保期间不要登录电子税务局","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$vLoading.show(),a.next=3,c({regId:e.regId}).catch((function(){t.$vLoading.hide()}));case 3:n=a.sent,t.$vLoading.hide(),n?(t.autoAuth.url=n.data,t.autoAuth.open=!0):t.msgError("自主授权失败");case 6:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleVerification:function(e){var t=this;this.currOperationRow=e,this.$vLoading.show(),this.requestNum=0,m({id:e.id}).then((function(e){200==e.code||201==e.code?(t.$vLoading.hide(),t.qrDialog.open=!0,t.qrDialog.src=e.data,t.qrDialog.currTime=t.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),t.qrDialog.expireTime=t.$moment(new Date).add(10,"minutes").format("YYYY-MM-DD HH:mm:ss"),e.data||(t.qrDialog.errMsg=e.msg)):(t.$vLoading.hide(),t.msgError(e.msg))})).catch((function(){t.$vLoading.hide()}))},getQrCodeResultLogic:function(){var e=this;if(this.requestNum>10)return this.requestNum=0,this.msgError("获取失败"),void this.$vLoading.hide();this.requestNum++,f({id:this.currOperationRow.id}).then((function(t){200==t.code?(e.$vLoading.hide(),e.qrDialog.open=!0,e.qrDialog.src=t.data):setTimeout((function(){e.getQrCodeResultLogic()}),3e3)})).catch((function(){e.$vLoading.hide()}))},currClickRow:function(e,t,a){this.$refs.qdAccountMainTable.toggleRowSelection(e)},handleStatusChange:function(e){var t=this,a="1"===e.used?"启用":"停用";this.$confirm('确认要"'+a+'"该全电账号吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(e)})).then((function(n){200==n.code?(t.msgSuccess(a+"成功"),t.getList()):(t.msgError(n.msg),e.used="0"===e.used?"1":"0")})).catch((function(){e.used="0"===e.used?"1":"0"}))},handleRefresh:function(){var e=this;this.$vLoading.show(),m({id:this.qrDialog.row.id}).then((function(t){200==t.code||201==t.code?(e.$vLoading.hide(),e.qrDialog.src=t.data,e.qrDialog.currTime=e.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),e.qrDialog.expireTime=e.$moment(new Date).add(10,"minutes").format("YYYY-MM-DD HH:mm:ss"),t.data||(e.qrDialog.errMsg=t.msg)):(e.$vLoading.hide(),e.msgError(t.msg))})).catch((function(){e.$vLoading.hide()}))}}},g=b,v=a("2877"),y=Object(v["a"])(g,n,i,!1,null,null,null);t["default"]=y.exports},eead:function(e,t,a){},eeb3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"税号",prop:"taxNo"}},[a("el-input",{attrs:{placeholder:"税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxNo,callback:function(t){e.$set(e.queryParams,"taxNo",t)},expression:"queryParams.taxNo"}})],1),a("el-form-item",{attrs:{label:"厂家",prop:"factory"}},[a("el-select",{attrs:{placeholder:"请选择厂家",clearable:"",size:"small"},model:{value:e.queryParams.factory,callback:function(t){e.$set(e.queryParams,"factory",t)},expression:"queryParams.factory"}},e._l(e.factoryOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:signsetting:add"],expression:"['output:signsetting:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:signsetting:edit"],expression:"['output:signsetting:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:signsetting:remove"],expression:"['output:signsetting:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:signsetting:export"],expression:"['output:signsetting:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.signsettingList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"税号",align:"center",prop:"taxNo"}}),a("el-table-column",{attrs:{label:"appId",align:"center",prop:"appId"}}),a("el-table-column",{attrs:{label:"appSecret",align:"center",prop:"appSecret"}}),a("el-table-column",{attrs:{label:"用户名",align:"center",prop:"userName"}}),a("el-table-column",{attrs:{label:"密码",align:"center",prop:"passwd"}}),a("el-table-column",{attrs:{label:"授权码",align:"center",prop:"authCode"}}),a("el-table-column",{attrs:{label:"请求地址",align:"center",prop:"requestUrl"}}),a("el-table-column",{attrs:{label:"厂家",align:"center",prop:"factory",formatter:e.facotryFormat}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:signsetting:edit"],expression:"['output:signsetting:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:signsetting:remove"],expression:"['output:signsetting:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"厂家"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择厂家"},model:{value:e.form.factory,callback:function(t){e.$set(e.form,"factory",t)},expression:"form.factory"}},e._l(e.factoryOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"taxNo",prop:"taxNo"}},[a("el-input",{attrs:{placeholder:"请输入税号"},model:{value:e.form.taxNo,callback:function(t){e.$set(e.form,"taxNo",t)},expression:"form.taxNo"}})],1),"UKEY"!=e.form.factory&&"HL"!=e.form.factory?a("el-form-item",{attrs:{label:"appId",prop:"appId"}},[a("el-input",{attrs:{placeholder:"请输入appId"},model:{value:e.form.appId,callback:function(t){e.$set(e.form,"appId",t)},expression:"form.appId"}})],1):e._e(),"UKEY"!=e.form.factory&&"HL"!=e.form.factory?a("el-form-item",{attrs:{label:"appSecret",prop:"appSecret"}},[a("el-input",{attrs:{placeholder:"请输入appSecret"},model:{value:e.form.appSecret,callback:function(t){e.$set(e.form,"appSecret",t)},expression:"form.appSecret"}})],1):e._e(),"UKEY"!=e.form.factory&&"HL"!=e.form.factory?a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1):e._e(),"UKEY"!=e.form.factory&&"HL"!=e.form.factory?a("el-form-item",{attrs:{label:"密码",prop:"passwd"}},[a("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.passwd,callback:function(t){e.$set(e.form,"passwd",t)},expression:"form.passwd"}})],1):e._e(),"UKEY"!=e.form.factory&&"HL"!=e.form.factory?a("el-form-item",{attrs:{label:"授权码",prop:"authCode"}},[a("el-input",{attrs:{placeholder:"请输入授权码"},model:{value:e.form.authCode,callback:function(t){e.$set(e.form,"authCode",t)},expression:"form.authCode"}})],1):e._e(),"UKEY"!=e.form.factory?a("el-form-item",{attrs:{label:"请求地址",prop:"requestUrl"}},[a("el-input",{attrs:{placeholder:"请输入请求地址"},model:{value:e.form.requestUrl,callback:function(t){e.$set(e.form,"requestUrl",t)},expression:"form.requestUrl"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[this.edit?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定+")]),this.edit?a("el-button",{attrs:{type:"primary"},on:{click:e.editForm}},[e._v("确 定-")]):e._e(),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/output/signsetting/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/output/signsetting/"+e,method:"get"})}function s(e){return Object(o["a"])({url:"/output/signsetting",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/output/signsetting",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/output/signsetting/"+e,method:"delete"})}function d(e){return Object(o["a"])({url:"/output/signsetting/export",method:"get",params:e,responseType:"blob"})}var p={name:"Signsetting",data:function(){return{loading:!0,edit:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,signsettingList:[],factoryOptions:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,appId:null,appSecret:null,userName:null,passwd:null,authCode:null,requestUrl:null,factory:null,ext1:null,ext2:null,ext3:null},form:{},rules:{}}},created:function(){var e=this;this.getList(),this.getDicts("sign_type").then((function(t){e.factoryOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.signsettingList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={taxNo:null,appId:null,appSecret:null,userName:null,passwd:null,authCode:null,requestUrl:null,factory:null,ext1:null,ext2:null,ext3:null},this.resetForm("form")},facotryFormat:function(e,t){return this.selectDictLabel(this.factoryOptions,e.factory)},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.taxNo})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.edit=!1,this.title="添加签章配置"},handleUpdate:function(e){var t=this;this.reset();var a=e.taxNo||this.ids;l(a).then((function(e){t.form=e.data,t.open=!0,t.edit=!0,t.title="修改签章配置"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&s(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))}))},editForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&c(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())}))}))},handleDelete:function(e){var t=this,a=e.taxNo||this.ids;this.$confirm('是否确认删除签章配置编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有签章配置数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t)})).then((function(t){e.currencyDownload(t,"签章配置.xls",e)})).catch((function(){}))}}},h=p,m=a("2877"),f=Object(m["a"])(h,n,i,!1,null,null,null);t["default"]=f.exports},ef6c:function(e,t,a){!function(t,a){e.exports=a()}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=10)}([function(e,t,a){"use strict";var n=a(3),i="object"==typeof self&&self&&self.Object===Object&&self,o=n.a||i||Function("return this")();t.a=o},function(e,t,a){e.exports=a(8)},function(e,a,n){"use strict";(function(e){var i=n(3),o=t&&!t.nodeType&&t,r=o&&"object"==typeof e&&e&&!e.nodeType&&e,l=r&&r.exports===o&&i.a.process,s=function(){try{var e=r&&r.require&&r.require("util").types;return e||l&&l.binding&&l.binding("util")}catch(e){}}();a.a=s}).call(this,n(5)(e))},function(e,t,a){"use strict";(function(e){var a="object"==typeof e&&e&&e.Object===Object&&e;t.a=a}).call(this,a(9))},function(e,a,n){"use strict";(function(e){var i=n(0),o=n(6),r=t&&!t.nodeType&&t,l=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=l&&l.exports===r?i.a.Buffer:void 0,c=(s?s.isBuffer:void 0)||o.a;a.a=c}).call(this,n(5)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,a){"use strict";t.a=function(){return!1}},function(e,a,n){"use strict";(function(e){var i=n(0),o=t&&!t.nodeType&&t,r=o&&"object"==typeof e&&e&&!e.nodeType&&e,l=r&&r.exports===o?i.a.Buffer:void 0,s=l?l.allocUnsafe:void 0;a.a=function(e,t){if(t)return e.slice();var a=e.length,n=s?s(a):new e.constructor(a);return e.copy(n),n}}).call(this,n(5)(e))},function(e){e.exports=JSON.parse('{"86":{"110000":"北京市","120000":"天津市","130000":"河北省","140000":"山西省","150000":"内蒙古自治区","210000":"辽宁省","220000":"吉林省","230000":"黑龙江省","310000":"上海市","320000":"江苏省","330000":"浙江省","340000":"安徽省","350000":"福建省","360000":"江西省","370000":"山东省","410000":"河南省","420000":"湖北省","430000":"湖南省","440000":"广东省","450000":"广西壮族自治区","460000":"海南省","500000":"重庆市","510000":"四川省","520000":"贵州省","530000":"云南省","540000":"西藏自治区","610000":"陕西省","620000":"甘肃省","630000":"青海省","640000":"宁夏回族自治区","650000":"新疆维吾尔自治区","710000":"台湾省","810000":"香港特别行政区","820000":"澳门特别行政区"},"110000":{"110100":"市辖区"},"110100":{"110101":"东城区","110102":"西城区","110105":"朝阳区","110106":"丰台区","110107":"石景山区","110108":"海淀区","110109":"门头沟区","110111":"房山区","110112":"通州区","110113":"顺义区","110114":"昌平区","110115":"大兴区","110116":"怀柔区","110117":"平谷区","110118":"密云区","110119":"延庆区"},"120000":{"120100":"市辖区"},"120100":{"120101":"和平区","120102":"河东区","120103":"河西区","120104":"南开区","120105":"河北区","120106":"红桥区","120110":"东丽区","120111":"西青区","120112":"津南区","120113":"北辰区","120114":"武清区","120115":"宝坻区","120116":"滨海新区","120117":"宁河区","120118":"静海区","120119":"蓟州区"},"130000":{"130100":"石家庄市","130200":"唐山市","130300":"秦皇岛市","130400":"邯郸市","130500":"邢台市","130600":"保定市","130700":"张家口市","130800":"承德市","130900":"沧州市","131000":"廊坊市","131100":"衡水市"},"130100":{"130101":"市辖区","130102":"长安区","130104":"桥西区","130105":"新华区","130107":"井陉矿区","130108":"裕华区","130109":"藁城区","130110":"鹿泉区","130111":"栾城区","130121":"井陉县","130123":"正定县","130125":"行唐县","130126":"灵寿县","130127":"高邑县","130128":"深泽县","130129":"赞皇县","130130":"无极县","130131":"平山县","130132":"元氏县","130133":"赵县","130171":"石家庄高新技术产业开发区","130172":"石家庄循环化工园区","130181":"辛集市","130183":"晋州市","130184":"新乐市"},"130200":{"130201":"市辖区","130202":"路南区","130203":"路北区","130204":"古冶区","130205":"开平区","130207":"丰南区","130208":"丰润区","130209":"曹妃甸区","130224":"滦南县","130225":"乐亭县","130227":"迁西县","130229":"玉田县","130271":"河北唐山芦台经济开发区","130272":"唐山市汉沽管理区","130273":"唐山高新技术产业开发区","130274":"河北唐山海港经济开发区","130281":"遵化市","130283":"迁安市","130284":"滦州市"},"130300":{"130301":"市辖区","130302":"海港区","130303":"山海关区","130304":"北戴河区","130306":"抚宁区","130321":"青龙满族自治县","130322":"昌黎县","130324":"卢龙县","130371":"秦皇岛市经济技术开发区","130372":"北戴河新区"},"130400":{"130401":"市辖区","130402":"邯山区","130403":"丛台区","130404":"复兴区","130406":"峰峰矿区","130407":"肥乡区","130408":"永年区","130423":"临漳县","130424":"成安县","130425":"大名县","130426":"涉县","130427":"磁县","130430":"邱县","130431":"鸡泽县","130432":"广平县","130433":"馆陶县","130434":"魏县","130435":"曲周县","130471":"邯郸经济技术开发区","130473":"邯郸冀南新区","130481":"武安市"},"130500":{"130501":"市辖区","130502":"桥东区","130503":"桥西区","130521":"邢台县","130522":"临城县","130523":"内丘县","130524":"柏乡县","130525":"隆尧县","130526":"任县","130527":"南和县","130528":"宁晋县","130529":"巨鹿县","130530":"新河县","130531":"广宗县","130532":"平乡县","130533":"威县","130534":"清河县","130535":"临西县","130571":"河北邢台经济开发区","130581":"南宫市","130582":"沙河市"},"130600":{"130601":"市辖区","130602":"竞秀区","130606":"莲池区","130607":"满城区","130608":"清苑区","130609":"徐水区","130623":"涞水县","130624":"阜平县","130626":"定兴县","130627":"唐县","130628":"高阳县","130629":"容城县","130630":"涞源县","130631":"望都县","130632":"安新县","130633":"易县","130634":"曲阳县","130635":"蠡县","130636":"顺平县","130637":"博野县","130638":"雄县","130671":"保定高新技术产业开发区","130672":"保定白沟新城","130681":"涿州市","130682":"定州市","130683":"安国市","130684":"高碑店市"},"130700":{"130701":"市辖区","130702":"桥东区","130703":"桥西区","130705":"宣化区","130706":"下花园区","130708":"万全区","130709":"崇礼区","130722":"张北县","130723":"康保县","130724":"沽源县","130725":"尚义县","130726":"蔚县","130727":"阳原县","130728":"怀安县","130730":"怀来县","130731":"涿鹿县","130732":"赤城县","130771":"张家口经济开发区","130772":"张家口市察北管理区","130773":"张家口市塞北管理区"},"130800":{"130801":"市辖区","130802":"双桥区","130803":"双滦区","130804":"鹰手营子矿区","130821":"承德县","130822":"兴隆县","130824":"滦平县","130825":"隆化县","130826":"丰宁满族自治县","130827":"宽城满族自治县","130828":"围场满族蒙古族自治县","130871":"承德高新技术产业开发区","130881":"平泉市"},"130900":{"130901":"市辖区","130902":"新华区","130903":"运河区","130921":"沧县","130922":"青县","130923":"东光县","130924":"海兴县","130925":"盐山县","130926":"肃宁县","130927":"南皮县","130928":"吴桥县","130929":"献县","130930":"孟村回族自治县","130971":"河北沧州经济开发区","130972":"沧州高新技术产业开发区","130973":"沧州渤海新区","130981":"泊头市","130982":"任丘市","130983":"黄骅市","130984":"河间市"},"131000":{"131001":"市辖区","131002":"安次区","131003":"广阳区","131022":"固安县","131023":"永清县","131024":"香河县","131025":"大城县","131026":"文安县","131028":"大厂回族自治县","131071":"廊坊经济技术开发区","131081":"霸州市","131082":"三河市"},"131100":{"131101":"市辖区","131102":"桃城区","131103":"冀州区","131121":"枣强县","131122":"武邑县","131123":"武强县","131124":"饶阳县","131125":"安平县","131126":"故城县","131127":"景县","131128":"阜城县","131171":"河北衡水高新技术产业开发区","131172":"衡水滨湖新区","131182":"深州市"},"140000":{"140100":"太原市","140200":"大同市","140300":"阳泉市","140400":"长治市","140500":"晋城市","140600":"朔州市","140700":"晋中市","140800":"运城市","140900":"忻州市","141000":"临汾市","141100":"吕梁市"},"140100":{"140101":"市辖区","140105":"小店区","140106":"迎泽区","140107":"杏花岭区","140108":"尖草坪区","140109":"万柏林区","140110":"晋源区","140121":"清徐县","140122":"阳曲县","140123":"娄烦县","140171":"山西转型综合改革示范区","140181":"古交市"},"140200":{"140201":"市辖区","140212":"新荣区","140213":"平城区","140214":"云冈区","140215":"云州区","140221":"阳高县","140222":"天镇县","140223":"广灵县","140224":"灵丘县","140225":"浑源县","140226":"左云县","140271":"山西大同经济开发区"},"140300":{"140301":"市辖区","140302":"城区","140303":"矿区","140311":"郊区","140321":"平定县","140322":"盂县"},"140400":{"140401":"市辖区","140403":"潞州区","140404":"上党区","140405":"屯留区","140406":"潞城区","140423":"襄垣县","140425":"平顺县","140426":"黎城县","140427":"壶关县","140428":"长子县","140429":"武乡县","140430":"沁县","140431":"沁源县","140471":"山西长治高新技术产业园区"},"140500":{"140501":"市辖区","140502":"城区","140521":"沁水县","140522":"阳城县","140524":"陵川县","140525":"泽州县","140581":"高平市"},"140600":{"140601":"市辖区","140602":"朔城区","140603":"平鲁区","140621":"山阴县","140622":"应县","140623":"右玉县","140671":"山西朔州经济开发区","140681":"怀仁市"},"140700":{"140701":"市辖区","140702":"榆次区","140721":"榆社县","140722":"左权县","140723":"和顺县","140724":"昔阳县","140725":"寿阳县","140726":"太谷县","140727":"祁县","140728":"平遥县","140729":"灵石县","140781":"介休市"},"140800":{"140801":"市辖区","140802":"盐湖区","140821":"临猗县","140822":"万荣县","140823":"闻喜县","140824":"稷山县","140825":"新绛县","140826":"绛县","140827":"垣曲县","140828":"夏县","140829":"平陆县","140830":"芮城县","140881":"永济市","140882":"河津市"},"140900":{"140901":"市辖区","140902":"忻府区","140921":"定襄县","140922":"五台县","140923":"代县","140924":"繁峙县","140925":"宁武县","140926":"静乐县","140927":"神池县","140928":"五寨县","140929":"岢岚县","140930":"河曲县","140931":"保德县","140932":"偏关县","140971":"五台山风景名胜区","140981":"原平市"},"141000":{"141001":"市辖区","141002":"尧都区","141021":"曲沃县","141022":"翼城县","141023":"襄汾县","141024":"洪洞县","141025":"古县","141026":"安泽县","141027":"浮山县","141028":"吉县","141029":"乡宁县","141030":"大宁县","141031":"隰县","141032":"永和县","141033":"蒲县","141034":"汾西县","141081":"侯马市","141082":"霍州市"},"141100":{"141101":"市辖区","141102":"离石区","141121":"文水县","141122":"交城县","141123":"兴县","141124":"临县","141125":"柳林县","141126":"石楼县","141127":"岚县","141128":"方山县","141129":"中阳县","141130":"交口县","141181":"孝义市","141182":"汾阳市"},"150000":{"150100":"呼和浩特市","150200":"包头市","150300":"乌海市","150400":"赤峰市","150500":"通辽市","150600":"鄂尔多斯市","150700":"呼伦贝尔市","150800":"巴彦淖尔市","150900":"乌兰察布市","152200":"兴安盟","152500":"锡林郭勒盟","152900":"阿拉善盟"},"150100":{"150101":"市辖区","150102":"新城区","150103":"回民区","150104":"玉泉区","150105":"赛罕区","150121":"土默特左旗","150122":"托克托县","150123":"和林格尔县","150124":"清水河县","150125":"武川县","150171":"呼和浩特金海工业园区","150172":"呼和浩特经济技术开发区"},"150200":{"150201":"市辖区","150202":"东河区","150203":"昆都仑区","150204":"青山区","150205":"石拐区","150206":"白云鄂博矿区","150207":"九原区","150221":"土默特右旗","150222":"固阳县","150223":"达尔罕茂明安联合旗","150271":"包头稀土高新技术产业开发区"},"150300":{"150301":"市辖区","150302":"海勃湾区","150303":"海南区","150304":"乌达区"},"150400":{"150401":"市辖区","150402":"红山区","150403":"元宝山区","150404":"松山区","150421":"阿鲁科尔沁旗","150422":"巴林左旗","150423":"巴林右旗","150424":"林西县","150425":"克什克腾旗","150426":"翁牛特旗","150428":"喀喇沁旗","150429":"宁城县","150430":"敖汉旗"},"150500":{"150501":"市辖区","150502":"科尔沁区","150521":"科尔沁左翼中旗","150522":"科尔沁左翼后旗","150523":"开鲁县","150524":"库伦旗","150525":"奈曼旗","150526":"扎鲁特旗","150571":"通辽经济技术开发区","150581":"霍林郭勒市"},"150600":{"150601":"市辖区","150602":"东胜区","150603":"康巴什区","150621":"达拉特旗","150622":"准格尔旗","150623":"鄂托克前旗","150624":"鄂托克旗","150625":"杭锦旗","150626":"乌审旗","150627":"伊金霍洛旗"},"150700":{"150701":"市辖区","150702":"海拉尔区","150703":"扎赉诺尔区","150721":"阿荣旗","150722":"莫力达瓦达斡尔族自治旗","150723":"鄂伦春自治旗","150724":"鄂温克族自治旗","150725":"陈巴尔虎旗","150726":"新巴尔虎左旗","150727":"新巴尔虎右旗","150781":"满洲里市","150782":"牙克石市","150783":"扎兰屯市","150784":"额尔古纳市","150785":"根河市"},"150800":{"150801":"市辖区","150802":"临河区","150821":"五原县","150822":"磴口县","150823":"乌拉特前旗","150824":"乌拉特中旗","150825":"乌拉特后旗","150826":"杭锦后旗"},"150900":{"150901":"市辖区","150902":"集宁区","150921":"卓资县","150922":"化德县","150923":"商都县","150924":"兴和县","150925":"凉城县","150926":"察哈尔右翼前旗","150927":"察哈尔右翼中旗","150928":"察哈尔右翼后旗","150929":"四子王旗","150981":"丰镇市"},"152200":{"152201":"乌兰浩特市","152202":"阿尔山市","152221":"科尔沁右翼前旗","152222":"科尔沁右翼中旗","152223":"扎赉特旗","152224":"突泉县"},"152500":{"152501":"二连浩特市","152502":"锡林浩特市","152522":"阿巴嘎旗","152523":"苏尼特左旗","152524":"苏尼特右旗","152525":"东乌珠穆沁旗","152526":"西乌珠穆沁旗","152527":"太仆寺旗","152528":"镶黄旗","152529":"正镶白旗","152530":"正蓝旗","152531":"多伦县","152571":"乌拉盖管委会"},"152900":{"152921":"阿拉善左旗","152922":"阿拉善右旗","152923":"额济纳旗","152971":"内蒙古阿拉善经济开发区"},"210000":{"210100":"沈阳市","210200":"大连市","210300":"鞍山市","210400":"抚顺市","210500":"本溪市","210600":"丹东市","210700":"锦州市","210800":"营口市","210900":"阜新市","211000":"辽阳市","211100":"盘锦市","211200":"铁岭市","211300":"朝阳市","211400":"葫芦岛市"},"210100":{"210101":"市辖区","210102":"和平区","210103":"沈河区","210104":"大东区","210105":"皇姑区","210106":"铁西区","210111":"苏家屯区","210112":"浑南区","210113":"沈北新区","210114":"于洪区","210115":"辽中区","210123":"康平县","210124":"法库县","210181":"新民市"},"210200":{"210201":"市辖区","210202":"中山区","210203":"西岗区","210204":"沙河口区","210211":"甘井子区","210212":"旅顺口区","210213":"金州区","210214":"普兰店区","210224":"长海县","210281":"瓦房店市","210283":"庄河市"},"210300":{"210301":"市辖区","210302":"铁东区","210303":"铁西区","210304":"立山区","210311":"千山区","210321":"台安县","210323":"岫岩满族自治县","210381":"海城市"},"210400":{"210401":"市辖区","210402":"新抚区","210403":"东洲区","210404":"望花区","210411":"顺城区","210421":"抚顺县","210422":"新宾满族自治县","210423":"清原满族自治县"},"210500":{"210501":"市辖区","210502":"平山区","210503":"溪湖区","210504":"明山区","210505":"南芬区","210521":"本溪满族自治县","210522":"桓仁满族自治县"},"210600":{"210601":"市辖区","210602":"元宝区","210603":"振兴区","210604":"振安区","210624":"宽甸满族自治县","210681":"东港市","210682":"凤城市"},"210700":{"210701":"市辖区","210702":"古塔区","210703":"凌河区","210711":"太和区","210726":"黑山县","210727":"义县","210781":"凌海市","210782":"北镇市"},"210800":{"210801":"市辖区","210802":"站前区","210803":"西市区","210804":"鲅鱼圈区","210811":"老边区","210881":"盖州市","210882":"大石桥市"},"210900":{"210901":"市辖区","210902":"海州区","210903":"新邱区","210904":"太平区","210905":"清河门区","210911":"细河区","210921":"阜新蒙古族自治县","210922":"彰武县"},"211000":{"211001":"市辖区","211002":"白塔区","211003":"文圣区","211004":"宏伟区","211005":"弓长岭区","211011":"太子河区","211021":"辽阳县","211081":"灯塔市"},"211100":{"211101":"市辖区","211102":"双台子区","211103":"兴隆台区","211104":"大洼区","211122":"盘山县"},"211200":{"211201":"市辖区","211202":"银州区","211204":"清河区","211221":"铁岭县","211223":"西丰县","211224":"昌图县","211281":"调兵山市","211282":"开原市"},"211300":{"211301":"市辖区","211302":"双塔区","211303":"龙城区","211321":"朝阳县","211322":"建平县","211324":"喀喇沁左翼蒙古族自治县","211381":"北票市","211382":"凌源市"},"211400":{"211401":"市辖区","211402":"连山区","211403":"龙港区","211404":"南票区","211421":"绥中县","211422":"建昌县","211481":"兴城市"},"220000":{"220100":"长春市","220200":"吉林市","220300":"四平市","220400":"辽源市","220500":"通化市","220600":"白山市","220700":"松原市","220800":"白城市","222400":"延边朝鲜族自治州"},"220100":{"220101":"市辖区","220102":"南关区","220103":"宽城区","220104":"朝阳区","220105":"二道区","220106":"绿园区","220112":"双阳区","220113":"九台区","220122":"农安县","220171":"长春经济技术开发区","220172":"长春净月高新技术产业开发区","220173":"长春高新技术产业开发区","220174":"长春汽车经济技术开发区","220182":"榆树市","220183":"德惠市"},"220200":{"220201":"市辖区","220202":"昌邑区","220203":"龙潭区","220204":"船营区","220211":"丰满区","220221":"永吉县","220271":"吉林经济开发区","220272":"吉林高新技术产业开发区","220273":"吉林中国新加坡食品区","220281":"蛟河市","220282":"桦甸市","220283":"舒兰市","220284":"磐石市"},"220300":{"220301":"市辖区","220302":"铁西区","220303":"铁东区","220322":"梨树县","220323":"伊通满族自治县","220381":"公主岭市","220382":"双辽市"},"220400":{"220401":"市辖区","220402":"龙山区","220403":"西安区","220421":"东丰县","220422":"东辽县"},"220500":{"220501":"市辖区","220502":"东昌区","220503":"二道江区","220521":"通化县","220523":"辉南县","220524":"柳河县","220581":"梅河口市","220582":"集安市"},"220600":{"220601":"市辖区","220602":"浑江区","220605":"江源区","220621":"抚松县","220622":"靖宇县","220623":"长白朝鲜族自治县","220681":"临江市"},"220700":{"220701":"市辖区","220702":"宁江区","220721":"前郭尔罗斯蒙古族自治县","220722":"长岭县","220723":"乾安县","220771":"吉林松原经济开发区","220781":"扶余市"},"220800":{"220801":"市辖区","220802":"洮北区","220821":"镇赉县","220822":"通榆县","220871":"吉林白城经济开发区","220881":"洮南市","220882":"大安市"},"222400":{"222401":"延吉市","222402":"图们市","222403":"敦化市","222404":"珲春市","222405":"龙井市","222406":"和龙市","222424":"汪清县","222426":"安图县"},"230000":{"230100":"哈尔滨市","230200":"齐齐哈尔市","230300":"鸡西市","230400":"鹤岗市","230500":"双鸭山市","230600":"大庆市","230700":"伊春市","230800":"佳木斯市","230900":"七台河市","231000":"牡丹江市","231100":"黑河市","231200":"绥化市","232700":"大兴安岭地区"},"230100":{"230101":"市辖区","230102":"道里区","230103":"南岗区","230104":"道外区","230108":"平房区","230109":"松北区","230110":"香坊区","230111":"呼兰区","230112":"阿城区","230113":"双城区","230123":"依兰县","230124":"方正县","230125":"宾县","230126":"巴彦县","230127":"木兰县","230128":"通河县","230129":"延寿县","230183":"尚志市","230184":"五常市"},"230200":{"230201":"市辖区","230202":"龙沙区","230203":"建华区","230204":"铁锋区","230205":"昂昂溪区","230206":"富拉尔基区","230207":"碾子山区","230208":"梅里斯达斡尔族区","230221":"龙江县","230223":"依安县","230224":"泰来县","230225":"甘南县","230227":"富裕县","230229":"克山县","230230":"克东县","230231":"拜泉县","230281":"讷河市"},"230300":{"230301":"市辖区","230302":"鸡冠区","230303":"恒山区","230304":"滴道区","230305":"梨树区","230306":"城子河区","230307":"麻山区","230321":"鸡东县","230381":"虎林市","230382":"密山市"},"230400":{"230401":"市辖区","230402":"向阳区","230403":"工农区","230404":"南山区","230405":"兴安区","230406":"东山区","230407":"兴山区","230421":"萝北县","230422":"绥滨县"},"230500":{"230501":"市辖区","230502":"尖山区","230503":"岭东区","230505":"四方台区","230506":"宝山区","230521":"集贤县","230522":"友谊县","230523":"宝清县","230524":"饶河县"},"230600":{"230601":"市辖区","230602":"萨尔图区","230603":"龙凤区","230604":"让胡路区","230605":"红岗区","230606":"大同区","230621":"肇州县","230622":"肇源县","230623":"林甸县","230624":"杜尔伯特蒙古族自治县","230671":"大庆高新技术产业开发区"},"230700":{"230701":"市辖区","230717":"伊美区","230718":"乌翠区","230719":"友好区","230722":"嘉荫县","230723":"汤旺县","230724":"丰林县","230725":"大箐山县","230726":"南岔县","230751":"金林区","230781":"铁力市"},"230800":{"230801":"市辖区","230803":"向阳区","230804":"前进区","230805":"东风区","230811":"郊区","230822":"桦南县","230826":"桦川县","230828":"汤原县","230881":"同江市","230882":"富锦市","230883":"抚远市"},"230900":{"230901":"市辖区","230902":"新兴区","230903":"桃山区","230904":"茄子河区","230921":"勃利县"},"231000":{"231001":"市辖区","231002":"东安区","231003":"阳明区","231004":"爱民区","231005":"西安区","231025":"林口县","231071":"牡丹江经济技术开发区","231081":"绥芬河市","231083":"海林市","231084":"宁安市","231085":"穆棱市","231086":"东宁市"},"231100":{"231101":"市辖区","231102":"爱辉区","231123":"逊克县","231124":"孙吴县","231181":"北安市","231182":"五大连池市","231183":"嫩江市"},"231200":{"231201":"市辖区","231202":"北林区","231221":"望奎县","231222":"兰西县","231223":"青冈县","231224":"庆安县","231225":"明水县","231226":"绥棱县","231281":"安达市","231282":"肇东市","231283":"海伦市"},"232700":{"232701":"漠河市","232721":"呼玛县","232722":"塔河县","232761":"加格达奇区","232762":"松岭区","232763":"新林区","232764":"呼中区"},"310000":{"310100":"市辖区"},"310100":{"310101":"黄浦区","310104":"徐汇区","310105":"长宁区","310106":"静安区","310107":"普陀区","310109":"虹口区","310110":"杨浦区","310112":"闵行区","310113":"宝山区","310114":"嘉定区","310115":"浦东新区","310116":"金山区","310117":"松江区","310118":"青浦区","310120":"奉贤区","310151":"崇明区"},"320000":{"320100":"南京市","320200":"无锡市","320300":"徐州市","320400":"常州市","320500":"苏州市","320600":"南通市","320700":"连云港市","320800":"淮安市","320900":"盐城市","321000":"扬州市","321100":"镇江市","321200":"泰州市","321300":"宿迁市"},"320100":{"320101":"市辖区","320102":"玄武区","320104":"秦淮区","320105":"建邺区","320106":"鼓楼区","320111":"浦口区","320113":"栖霞区","320114":"雨花台区","320115":"江宁区","320116":"六合区","320117":"溧水区","320118":"高淳区"},"320200":{"320201":"市辖区","320205":"锡山区","320206":"惠山区","320211":"滨湖区","320213":"梁溪区","320214":"新吴区","320281":"江阴市","320282":"宜兴市"},"320300":{"320301":"市辖区","320302":"鼓楼区","320303":"云龙区","320305":"贾汪区","320311":"泉山区","320312":"铜山区","320321":"丰县","320322":"沛县","320324":"睢宁县","320371":"徐州经济技术开发区","320381":"新沂市","320382":"邳州市"},"320400":{"320401":"市辖区","320402":"天宁区","320404":"钟楼区","320411":"新北区","320412":"武进区","320413":"金坛区","320481":"溧阳市"},"320500":{"320501":"市辖区","320505":"虎丘区","320506":"吴中区","320507":"相城区","320508":"姑苏区","320509":"吴江区","320571":"苏州工业园区","320581":"常熟市","320582":"张家港市","320583":"昆山市","320585":"太仓市"},"320600":{"320601":"市辖区","320602":"崇川区","320611":"港闸区","320612":"通州区","320623":"如东县","320671":"南通经济技术开发区","320681":"启东市","320682":"如皋市","320684":"海门市","320685":"海安市"},"320700":{"320701":"市辖区","320703":"连云区","320706":"海州区","320707":"赣榆区","320722":"东海县","320723":"灌云县","320724":"灌南县","320771":"连云港经济技术开发区","320772":"连云港高新技术产业开发区"},"320800":{"320801":"市辖区","320803":"淮安区","320804":"淮阴区","320812":"清江浦区","320813":"洪泽区","320826":"涟水县","320830":"盱眙县","320831":"金湖县","320871":"淮安经济技术开发区"},"320900":{"320901":"市辖区","320902":"亭湖区","320903":"盐都区","320904":"大丰区","320921":"响水县","320922":"滨海县","320923":"阜宁县","320924":"射阳县","320925":"建湖县","320971":"盐城经济技术开发区","320981":"东台市"},"321000":{"321001":"市辖区","321002":"广陵区","321003":"邗江区","321012":"江都区","321023":"宝应县","321071":"扬州经济技术开发区","321081":"仪征市","321084":"高邮市"},"321100":{"321101":"市辖区","321102":"京口区","321111":"润州区","321112":"丹徒区","321171":"镇江新区","321181":"丹阳市","321182":"扬中市","321183":"句容市"},"321200":{"321201":"市辖区","321202":"海陵区","321203":"高港区","321204":"姜堰区","321271":"泰州医药高新技术产业开发区","321281":"兴化市","321282":"靖江市","321283":"泰兴市"},"321300":{"321301":"市辖区","321302":"宿城区","321311":"宿豫区","321322":"沭阳县","321323":"泗阳县","321324":"泗洪县","321371":"宿迁经济技术开发区"},"330000":{"330100":"杭州市","330200":"宁波市","330300":"温州市","330400":"嘉兴市","330500":"湖州市","330600":"绍兴市","330700":"金华市","330800":"衢州市","330900":"舟山市","331000":"台州市","331100":"丽水市"},"330100":{"330101":"市辖区","330102":"上城区","330103":"下城区","330104":"江干区","330105":"拱墅区","330106":"西湖区","330108":"滨江区","330109":"萧山区","330110":"余杭区","330111":"富阳区","330112":"临安区","330122":"桐庐县","330127":"淳安县","330182":"建德市"},"330200":{"330201":"市辖区","330203":"海曙区","330205":"江北区","330206":"北仑区","330211":"镇海区","330212":"鄞州区","330213":"奉化区","330225":"象山县","330226":"宁海县","330281":"余姚市","330282":"慈溪市"},"330300":{"330301":"市辖区","330302":"鹿城区","330303":"龙湾区","330304":"瓯海区","330305":"洞头区","330324":"永嘉县","330326":"平阳县","330327":"苍南县","330328":"文成县","330329":"泰顺县","330371":"温州经济技术开发区","330381":"瑞安市","330382":"乐清市","330383":"龙港市"},"330400":{"330401":"市辖区","330402":"南湖区","330411":"秀洲区","330421":"嘉善县","330424":"海盐县","330481":"海宁市","330482":"平湖市","330483":"桐乡市"},"330500":{"330501":"市辖区","330502":"吴兴区","330503":"南浔区","330521":"德清县","330522":"长兴县","330523":"安吉县"},"330600":{"330601":"市辖区","330602":"越城区","330603":"柯桥区","330604":"上虞区","330624":"新昌县","330681":"诸暨市","330683":"嵊州市"},"330700":{"330701":"市辖区","330702":"婺城区","330703":"金东区","330723":"武义县","330726":"浦江县","330727":"磐安县","330781":"兰溪市","330782":"义乌市","330783":"东阳市","330784":"永康市"},"330800":{"330801":"市辖区","330802":"柯城区","330803":"衢江区","330822":"常山县","330824":"开化县","330825":"龙游县","330881":"江山市"},"330900":{"330901":"市辖区","330902":"定海区","330903":"普陀区","330921":"岱山县","330922":"嵊泗县"},"331000":{"331001":"市辖区","331002":"椒江区","331003":"黄岩区","331004":"路桥区","331022":"三门县","331023":"天台县","331024":"仙居县","331081":"温岭市","331082":"临海市","331083":"玉环市"},"331100":{"331101":"市辖区","331102":"莲都区","331121":"青田县","331122":"缙云县","331123":"遂昌县","331124":"松阳县","331125":"云和县","331126":"庆元县","331127":"景宁畲族自治县","331181":"龙泉市"},"340000":{"340100":"合肥市","340200":"芜湖市","340300":"蚌埠市","340400":"淮南市","340500":"马鞍山市","340600":"淮北市","340700":"铜陵市","340800":"安庆市","341000":"黄山市","341100":"滁州市","341200":"阜阳市","341300":"宿州市","341500":"六安市","341600":"亳州市","341700":"池州市","341800":"宣城市"},"340100":{"340101":"市辖区","340102":"瑶海区","340103":"庐阳区","340104":"蜀山区","340111":"包河区","340121":"长丰县","340122":"肥东县","340123":"肥西县","340124":"庐江县","340171":"合肥高新技术产业开发区","340172":"合肥经济技术开发区","340173":"合肥新站高新技术产业开发区","340181":"巢湖市"},"340200":{"340201":"市辖区","340202":"镜湖区","340203":"弋江区","340207":"鸠江区","340208":"三山区","340221":"芜湖县","340222":"繁昌县","340223":"南陵县","340225":"无为县","340271":"芜湖经济技术开发区","340272":"安徽芜湖长江大桥经济开发区"},"340300":{"340301":"市辖区","340302":"龙子湖区","340303":"蚌山区","340304":"禹会区","340311":"淮上区","340321":"怀远县","340322":"五河县","340323":"固镇县","340371":"蚌埠市高新技术开发区","340372":"蚌埠市经济开发区"},"340400":{"340401":"市辖区","340402":"大通区","340403":"田家庵区","340404":"谢家集区","340405":"八公山区","340406":"潘集区","340421":"凤台县","340422":"寿县"},"340500":{"340501":"市辖区","340503":"花山区","340504":"雨山区","340506":"博望区","340521":"当涂县","340522":"含山县","340523":"和县"},"340600":{"340601":"市辖区","340602":"杜集区","340603":"相山区","340604":"烈山区","340621":"濉溪县"},"340700":{"340701":"市辖区","340705":"铜官区","340706":"义安区","340711":"郊区","340722":"枞阳县"},"340800":{"340801":"市辖区","340802":"迎江区","340803":"大观区","340811":"宜秀区","340822":"怀宁县","340825":"太湖县","340826":"宿松县","340827":"望江县","340828":"岳西县","340871":"安徽安庆经济开发区","340881":"桐城市","340882":"潜山市"},"341000":{"341001":"市辖区","341002":"屯溪区","341003":"黄山区","341004":"徽州区","341021":"歙县","341022":"休宁县","341023":"黟县","341024":"祁门县"},"341100":{"341101":"市辖区","341102":"琅琊区","341103":"南谯区","341122":"来安县","341124":"全椒县","341125":"定远县","341126":"凤阳县","341171":"苏滁现代产业园","341172":"滁州经济技术开发区","341181":"天长市","341182":"明光市"},"341200":{"341201":"市辖区","341202":"颍州区","341203":"颍东区","341204":"颍泉区","341221":"临泉县","341222":"太和县","341225":"阜南县","341226":"颍上县","341271":"阜阳合肥现代产业园区","341272":"阜阳经济技术开发区","341282":"界首市"},"341300":{"341301":"市辖区","341302":"埇桥区","341321":"砀山县","341322":"萧县","341323":"灵璧县","341324":"泗县","341371":"宿州马鞍山现代产业园区","341372":"宿州经济技术开发区"},"341500":{"341501":"市辖区","341502":"金安区","341503":"裕安区","341504":"叶集区","341522":"霍邱县","341523":"舒城县","341524":"金寨县","341525":"霍山县"},"341600":{"341601":"市辖区","341602":"谯城区","341621":"涡阳县","341622":"蒙城县","341623":"利辛县"},"341700":{"341701":"市辖区","341702":"贵池区","341721":"东至县","341722":"石台县","341723":"青阳县"},"341800":{"341801":"市辖区","341802":"宣州区","341821":"郎溪县","341823":"泾县","341824":"绩溪县","341825":"旌德县","341871":"宣城市经济开发区","341881":"宁国市","341882":"广德市"},"350000":{"350100":"福州市","350200":"厦门市","350300":"莆田市","350400":"三明市","350500":"泉州市","350600":"漳州市","350700":"南平市","350800":"龙岩市","350900":"宁德市"},"350100":{"350101":"市辖区","350102":"鼓楼区","350103":"台江区","350104":"仓山区","350105":"马尾区","350111":"晋安区","350112":"长乐区","350121":"闽侯县","350122":"连江县","350123":"罗源县","350124":"闽清县","350125":"永泰县","350128":"平潭县","350181":"福清市"},"350200":{"350201":"市辖区","350203":"思明区","350205":"海沧区","350206":"湖里区","350211":"集美区","350212":"同安区","350213":"翔安区"},"350300":{"350301":"市辖区","350302":"城厢区","350303":"涵江区","350304":"荔城区","350305":"秀屿区","350322":"仙游县"},"350400":{"350401":"市辖区","350402":"梅列区","350403":"三元区","350421":"明溪县","350423":"清流县","350424":"宁化县","350425":"大田县","350426":"尤溪县","350427":"沙县","350428":"将乐县","350429":"泰宁县","350430":"建宁县","350481":"永安市"},"350500":{"350501":"市辖区","350502":"鲤城区","350503":"丰泽区","350504":"洛江区","350505":"泉港区","350521":"惠安县","350524":"安溪县","350525":"永春县","350526":"德化县","350527":"金门县","350581":"石狮市","350582":"晋江市","350583":"南安市"},"350600":{"350601":"市辖区","350602":"芗城区","350603":"龙文区","350622":"云霄县","350623":"漳浦县","350624":"诏安县","350625":"长泰县","350626":"东山县","350627":"南靖县","350628":"平和县","350629":"华安县","350681":"龙海市"},"350700":{"350701":"市辖区","350702":"延平区","350703":"建阳区","350721":"顺昌县","350722":"浦城县","350723":"光泽县","350724":"松溪县","350725":"政和县","350781":"邵武市","350782":"武夷山市","350783":"建瓯市"},"350800":{"350801":"市辖区","350802":"新罗区","350803":"永定区","350821":"长汀县","350823":"上杭县","350824":"武平县","350825":"连城县","350881":"漳平市"},"350900":{"350901":"市辖区","350902":"蕉城区","350921":"霞浦县","350922":"古田县","350923":"屏南县","350924":"寿宁县","350925":"周宁县","350926":"柘荣县","350981":"福安市","350982":"福鼎市"},"360000":{"360100":"南昌市","360200":"景德镇市","360300":"萍乡市","360400":"九江市","360500":"新余市","360600":"鹰潭市","360700":"赣州市","360800":"吉安市","360900":"宜春市","361000":"抚州市","361100":"上饶市"},"360100":{"360101":"市辖区","360102":"东湖区","360103":"西湖区","360104":"青云谱区","360105":"湾里区","360111":"青山湖区","360112":"新建区","360121":"南昌县","360123":"安义县","360124":"进贤县"},"360200":{"360201":"市辖区","360202":"昌江区","360203":"珠山区","360222":"浮梁县","360281":"乐平市"},"360300":{"360301":"市辖区","360302":"安源区","360313":"湘东区","360321":"莲花县","360322":"上栗县","360323":"芦溪县"},"360400":{"360401":"市辖区","360402":"濂溪区","360403":"浔阳区","360404":"柴桑区","360423":"武宁县","360424":"修水县","360425":"永修县","360426":"德安县","360428":"都昌县","360429":"湖口县","360430":"彭泽县","360481":"瑞昌市","360482":"共青城市","360483":"庐山市"},"360500":{"360501":"市辖区","360502":"渝水区","360521":"分宜县"},"360600":{"360601":"市辖区","360602":"月湖区","360603":"余江区","360681":"贵溪市"},"360700":{"360701":"市辖区","360702":"章贡区","360703":"南康区","360704":"赣县区","360722":"信丰县","360723":"大余县","360724":"上犹县","360725":"崇义县","360726":"安远县","360727":"龙南县","360728":"定南县","360729":"全南县","360730":"宁都县","360731":"于都县","360732":"兴国县","360733":"会昌县","360734":"寻乌县","360735":"石城县","360781":"瑞金市"},"360800":{"360801":"市辖区","360802":"吉州区","360803":"青原区","360821":"吉安县","360822":"吉水县","360823":"峡江县","360824":"新干县","360825":"永丰县","360826":"泰和县","360827":"遂川县","360828":"万安县","360829":"安福县","360830":"永新县","360881":"井冈山市"},"360900":{"360901":"市辖区","360902":"袁州区","360921":"奉新县","360922":"万载县","360923":"上高县","360924":"宜丰县","360925":"靖安县","360926":"铜鼓县","360981":"丰城市","360982":"樟树市","360983":"高安市"},"361000":{"361001":"市辖区","361002":"临川区","361003":"东乡区","361021":"南城县","361022":"黎川县","361023":"南丰县","361024":"崇仁县","361025":"乐安县","361026":"宜黄县","361027":"金溪县","361028":"资溪县","361030":"广昌县"},"361100":{"361101":"市辖区","361102":"信州区","361103":"广丰区","361104":"广信区","361123":"玉山县","361124":"铅山县","361125":"横峰县","361126":"弋阳县","361127":"余干县","361128":"鄱阳县","361129":"万年县","361130":"婺源县","361181":"德兴市"},"370000":{"370100":"济南市","370200":"青岛市","370300":"淄博市","370400":"枣庄市","370500":"东营市","370600":"烟台市","370700":"潍坊市","370800":"济宁市","370900":"泰安市","371000":"威海市","371100":"日照市","371300":"临沂市","371400":"德州市","371500":"聊城市","371600":"滨州市","371700":"菏泽市"},"370100":{"370101":"市辖区","370102":"历下区","370103":"市中区","370104":"槐荫区","370105":"天桥区","370112":"历城区","370113":"长清区","370114":"章丘区","370115":"济阳区","370116":"莱芜区","370117":"钢城区","370124":"平阴县","370126":"商河县","370171":"济南高新技术产业开发区"},"370200":{"370201":"市辖区","370202":"市南区","370203":"市北区","370211":"黄岛区","370212":"崂山区","370213":"李沧区","370214":"城阳区","370215":"即墨区","370271":"青岛高新技术产业开发区","370281":"胶州市","370283":"平度市","370285":"莱西市"},"370300":{"370301":"市辖区","370302":"淄川区","370303":"张店区","370304":"博山区","370305":"临淄区","370306":"周村区","370321":"桓台县","370322":"高青县","370323":"沂源县"},"370400":{"370401":"市辖区","370402":"市中区","370403":"薛城区","370404":"峄城区","370405":"台儿庄区","370406":"山亭区","370481":"滕州市"},"370500":{"370501":"市辖区","370502":"东营区","370503":"河口区","370505":"垦利区","370522":"利津县","370523":"广饶县","370571":"东营经济技术开发区","370572":"东营港经济开发区"},"370600":{"370601":"市辖区","370602":"芝罘区","370611":"福山区","370612":"牟平区","370613":"莱山区","370634":"长岛县","370671":"烟台高新技术产业开发区","370672":"烟台经济技术开发区","370681":"龙口市","370682":"莱阳市","370683":"莱州市","370684":"蓬莱市","370685":"招远市","370686":"栖霞市","370687":"海阳市"},"370700":{"370701":"市辖区","370702":"潍城区","370703":"寒亭区","370704":"坊子区","370705":"奎文区","370724":"临朐县","370725":"昌乐县","370772":"潍坊滨海经济技术开发区","370781":"青州市","370782":"诸城市","370783":"寿光市","370784":"安丘市","370785":"高密市","370786":"昌邑市"},"370800":{"370801":"市辖区","370811":"任城区","370812":"兖州区","370826":"微山县","370827":"鱼台县","370828":"金乡县","370829":"嘉祥县","370830":"汶上县","370831":"泗水县","370832":"梁山县","370871":"济宁高新技术产业开发区","370881":"曲阜市","370883":"邹城市"},"370900":{"370901":"市辖区","370902":"泰山区","370911":"岱岳区","370921":"宁阳县","370923":"东平县","370982":"新泰市","370983":"肥城市"},"371000":{"371001":"市辖区","371002":"环翠区","371003":"文登区","371071":"威海火炬高技术产业开发区","371072":"威海经济技术开发区","371073":"威海临港经济技术开发区","371082":"荣成市","371083":"乳山市"},"371100":{"371101":"市辖区","371102":"东港区","371103":"岚山区","371121":"五莲县","371122":"莒县","371171":"日照经济技术开发区"},"371300":{"371301":"市辖区","371302":"兰山区","371311":"罗庄区","371312":"河东区","371321":"沂南县","371322":"郯城县","371323":"沂水县","371324":"兰陵县","371325":"费县","371326":"平邑县","371327":"莒南县","371328":"蒙阴县","371329":"临沭县","371371":"临沂高新技术产业开发区","371372":"临沂经济技术开发区","371373":"临沂临港经济开发区"},"371400":{"371401":"市辖区","371402":"德城区","371403":"陵城区","371422":"宁津县","371423":"庆云县","371424":"临邑县","371425":"齐河县","371426":"平原县","371427":"夏津县","371428":"武城县","371471":"德州经济技术开发区","371472":"德州运河经济开发区","371481":"乐陵市","371482":"禹城市"},"371500":{"371501":"市辖区","371502":"东昌府区","371503":"茌平区","371521":"阳谷县","371522":"莘县","371524":"东阿县","371525":"冠县","371526":"高唐县","371581":"临清市"},"371600":{"371601":"市辖区","371602":"滨城区","371603":"沾化区","371621":"惠民县","371622":"阳信县","371623":"无棣县","371625":"博兴县","371681":"邹平市"},"371700":{"371701":"市辖区","371702":"牡丹区","371703":"定陶区","371721":"曹县","371722":"单县","371723":"成武县","371724":"巨野县","371725":"郓城县","371726":"鄄城县","371728":"东明县","371771":"菏泽经济技术开发区","371772":"菏泽高新技术开发区"},"410000":{"410100":"郑州市","410200":"开封市","410300":"洛阳市","410400":"平顶山市","410500":"安阳市","410600":"鹤壁市","410700":"新乡市","410800":"焦作市","410900":"濮阳市","411000":"许昌市","411100":"漯河市","411200":"三门峡市","411300":"南阳市","411400":"商丘市","411500":"信阳市","411600":"周口市","411700":"驻马店市","419000":"省直辖县级行政区划"},"410100":{"410101":"市辖区","410102":"中原区","410103":"二七区","410104":"管城回族区","410105":"金水区","410106":"上街区","410108":"惠济区","410122":"中牟县","410171":"郑州经济技术开发区","410172":"郑州高新技术产业开发区","410173":"郑州航空港经济综合实验区","410181":"巩义市","410182":"荥阳市","410183":"新密市","410184":"新郑市","410185":"登封市"},"410200":{"410201":"市辖区","410202":"龙亭区","410203":"顺河回族区","410204":"鼓楼区","410205":"禹王台区","410212":"祥符区","410221":"杞县","410222":"通许县","410223":"尉氏县","410225":"兰考县"},"410300":{"410301":"市辖区","410302":"老城区","410303":"西工区","410304":"瀍河回族区","410305":"涧西区","410306":"吉利区","410311":"洛龙区","410322":"孟津县","410323":"新安县","410324":"栾川县","410325":"嵩县","410326":"汝阳县","410327":"宜阳县","410328":"洛宁县","410329":"伊川县","410371":"洛阳高新技术产业开发区","410381":"偃师市"},"410400":{"410401":"市辖区","410402":"新华区","410403":"卫东区","410404":"石龙区","410411":"湛河区","410421":"宝丰县","410422":"叶县","410423":"鲁山县","410425":"郏县","410471":"平顶山高新技术产业开发区","410472":"平顶山市城乡一体化示范区","410481":"舞钢市","410482":"汝州市"},"410500":{"410501":"市辖区","410502":"文峰区","410503":"北关区","410505":"殷都区","410506":"龙安区","410522":"安阳县","410523":"汤阴县","410526":"滑县","410527":"内黄县","410571":"安阳高新技术产业开发区","410581":"林州市"},"410600":{"410601":"市辖区","410602":"鹤山区","410603":"山城区","410611":"淇滨区","410621":"浚县","410622":"淇县","410671":"鹤壁经济技术开发区"},"410700":{"410701":"市辖区","410702":"红旗区","410703":"卫滨区","410704":"凤泉区","410711":"牧野区","410721":"新乡县","410724":"获嘉县","410725":"原阳县","410726":"延津县","410727":"封丘县","410771":"新乡高新技术产业开发区","410772":"新乡经济技术开发区","410773":"新乡市平原城乡一体化示范区","410781":"卫辉市","410782":"辉县市","410783":"长垣市"},"410800":{"410801":"市辖区","410802":"解放区","410803":"中站区","410804":"马村区","410811":"山阳区","410821":"修武县","410822":"博爱县","410823":"武陟县","410825":"温县","410871":"焦作城乡一体化示范区","410882":"沁阳市","410883":"孟州市"},"410900":{"410901":"市辖区","410902":"华龙区","410922":"清丰县","410923":"南乐县","410926":"范县","410927":"台前县","410928":"濮阳县","410971":"河南濮阳工业园区","410972":"濮阳经济技术开发区"},"411000":{"411001":"市辖区","411002":"魏都区","411003":"建安区","411024":"鄢陵县","411025":"襄城县","411071":"许昌经济技术开发区","411081":"禹州市","411082":"长葛市"},"411100":{"411101":"市辖区","411102":"源汇区","411103":"郾城区","411104":"召陵区","411121":"舞阳县","411122":"临颍县","411171":"漯河经济技术开发区"},"411200":{"411201":"市辖区","411202":"湖滨区","411203":"陕州区","411221":"渑池县","411224":"卢氏县","411271":"河南三门峡经济开发区","411281":"义马市","411282":"灵宝市"},"411300":{"411301":"市辖区","411302":"宛城区","411303":"卧龙区","411321":"南召县","411322":"方城县","411323":"西峡县","411324":"镇平县","411325":"内乡县","411326":"淅川县","411327":"社旗县","411328":"唐河县","411329":"新野县","411330":"桐柏县","411371":"南阳高新技术产业开发区","411372":"南阳市城乡一体化示范区","411381":"邓州市"},"411400":{"411401":"市辖区","411402":"梁园区","411403":"睢阳区","411421":"民权县","411422":"睢县","411423":"宁陵县","411424":"柘城县","411425":"虞城县","411426":"夏邑县","411471":"豫东综合物流产业聚集区","411472":"河南商丘经济开发区","411481":"永城市"},"411500":{"411501":"市辖区","411502":"浉河区","411503":"平桥区","411521":"罗山县","411522":"光山县","411523":"新县","411524":"商城县","411525":"固始县","411526":"潢川县","411527":"淮滨县","411528":"息县","411571":"信阳高新技术产业开发区"},"411600":{"411601":"市辖区","411602":"川汇区","411603":"淮阳区","411621":"扶沟县","411622":"西华县","411623":"商水县","411624":"沈丘县","411625":"郸城县","411627":"太康县","411628":"鹿邑县","411671":"河南周口经济开发区","411681":"项城市"},"411700":{"411701":"市辖区","411702":"驿城区","411721":"西平县","411722":"上蔡县","411723":"平舆县","411724":"正阳县","411725":"确山县","411726":"泌阳县","411727":"汝南县","411728":"遂平县","411729":"新蔡县","411771":"河南驻马店经济开发区"},"419000":{"419001":"济源市"},"420000":{"420100":"武汉市","420200":"黄石市","420300":"十堰市","420500":"宜昌市","420600":"襄阳市","420700":"鄂州市","420800":"荆门市","420900":"孝感市","421000":"荆州市","421100":"黄冈市","421200":"咸宁市","421300":"随州市","422800":"恩施土家族苗族自治州","429000":"省直辖县级行政区划"},"420100":{"420101":"市辖区","420102":"江岸区","420103":"江汉区","420104":"硚口区","420105":"汉阳区","420106":"武昌区","420107":"青山区","420111":"洪山区","420112":"东西湖区","420113":"汉南区","420114":"蔡甸区","420115":"江夏区","420116":"黄陂区","420117":"新洲区"},"420200":{"420201":"市辖区","420202":"黄石港区","420203":"西塞山区","420204":"下陆区","420205":"铁山区","420222":"阳新县","420281":"大冶市"},"420300":{"420301":"市辖区","420302":"茅箭区","420303":"张湾区","420304":"郧阳区","420322":"郧西县","420323":"竹山县","420324":"竹溪县","420325":"房县","420381":"丹江口市"},"420500":{"420501":"市辖区","420502":"西陵区","420503":"伍家岗区","420504":"点军区","420505":"猇亭区","420506":"夷陵区","420525":"远安县","420526":"兴山县","420527":"秭归县","420528":"长阳土家族自治县","420529":"五峰土家族自治县","420581":"宜都市","420582":"当阳市","420583":"枝江市"},"420600":{"420601":"市辖区","420602":"襄城区","420606":"樊城区","420607":"襄州区","420624":"南漳县","420625":"谷城县","420626":"保康县","420682":"老河口市","420683":"枣阳市","420684":"宜城市"},"420700":{"420701":"市辖区","420702":"梁子湖区","420703":"华容区","420704":"鄂城区"},"420800":{"420801":"市辖区","420802":"东宝区","420804":"掇刀区","420822":"沙洋县","420881":"钟祥市","420882":"京山市"},"420900":{"420901":"市辖区","420902":"孝南区","420921":"孝昌县","420922":"大悟县","420923":"云梦县","420981":"应城市","420982":"安陆市","420984":"汉川市"},"421000":{"421001":"市辖区","421002":"沙市区","421003":"荆州区","421022":"公安县","421023":"监利县","421024":"江陵县","421071":"荆州经济技术开发区","421081":"石首市","421083":"洪湖市","421087":"松滋市"},"421100":{"421101":"市辖区","421102":"黄州区","421121":"团风县","421122":"红安县","421123":"罗田县","421124":"英山县","421125":"浠水县","421126":"蕲春县","421127":"黄梅县","421171":"龙感湖管理区","421181":"麻城市","421182":"武穴市"},"421200":{"421201":"市辖区","421202":"咸安区","421221":"嘉鱼县","421222":"通城县","421223":"崇阳县","421224":"通山县","421281":"赤壁市"},"421300":{"421301":"市辖区","421303":"曾都区","421321":"随县","421381":"广水市"},"422800":{"422801":"恩施市","422802":"利川市","422822":"建始县","422823":"巴东县","422825":"宣恩县","422826":"咸丰县","422827":"来凤县","422828":"鹤峰县"},"429000":{"429004":"仙桃市","429005":"潜江市","429006":"天门市","429021":"神农架林区"},"430000":{"430100":"长沙市","430200":"株洲市","430300":"湘潭市","430400":"衡阳市","430500":"邵阳市","430600":"岳阳市","430700":"常德市","430800":"张家界市","430900":"益阳市","431000":"郴州市","431100":"永州市","431200":"怀化市","431300":"娄底市","433100":"湘西土家族苗族自治州"},"430100":{"430101":"市辖区","430102":"芙蓉区","430103":"天心区","430104":"岳麓区","430105":"开福区","430111":"雨花区","430112":"望城区","430121":"长沙县","430181":"浏阳市","430182":"宁乡市"},"430200":{"430201":"市辖区","430202":"荷塘区","430203":"芦淞区","430204":"石峰区","430211":"天元区","430212":"渌口区","430223":"攸县","430224":"茶陵县","430225":"炎陵县","430271":"云龙示范区","430281":"醴陵市"},"430300":{"430301":"市辖区","430302":"雨湖区","430304":"岳塘区","430321":"湘潭县","430371":"湖南湘潭高新技术产业园区","430372":"湘潭昭山示范区","430373":"湘潭九华示范区","430381":"湘乡市","430382":"韶山市"},"430400":{"430401":"市辖区","430405":"珠晖区","430406":"雁峰区","430407":"石鼓区","430408":"蒸湘区","430412":"南岳区","430421":"衡阳县","430422":"衡南县","430423":"衡山县","430424":"衡东县","430426":"祁东县","430471":"衡阳综合保税区","430472":"湖南衡阳高新技术产业园区","430473":"湖南衡阳松木经济开发区","430481":"耒阳市","430482":"常宁市"},"430500":{"430501":"市辖区","430502":"双清区","430503":"大祥区","430511":"北塔区","430522":"新邵县","430523":"邵阳县","430524":"隆回县","430525":"洞口县","430527":"绥宁县","430528":"新宁县","430529":"城步苗族自治县","430581":"武冈市","430582":"邵东市"},"430600":{"430601":"市辖区","430602":"岳阳楼区","430603":"云溪区","430611":"君山区","430621":"岳阳县","430623":"华容县","430624":"湘阴县","430626":"平江县","430671":"岳阳市屈原管理区","430681":"汨罗市","430682":"临湘市"},"430700":{"430701":"市辖区","430702":"武陵区","430703":"鼎城区","430721":"安乡县","430722":"汉寿县","430723":"澧县","430724":"临澧县","430725":"桃源县","430726":"石门县","430771":"常德市西洞庭管理区","430781":"津市市"},"430800":{"430801":"市辖区","430802":"永定区","430811":"武陵源区","430821":"慈利县","430822":"桑植县"},"430900":{"430901":"市辖区","430902":"资阳区","430903":"赫山区","430921":"南县","430922":"桃江县","430923":"安化县","430971":"益阳市大通湖管理区","430972":"湖南益阳高新技术产业园区","430981":"沅江市"},"431000":{"431001":"市辖区","431002":"北湖区","431003":"苏仙区","431021":"桂阳县","431022":"宜章县","431023":"永兴县","431024":"嘉禾县","431025":"临武县","431026":"汝城县","431027":"桂东县","431028":"安仁县","431081":"资兴市"},"431100":{"431101":"市辖区","431102":"零陵区","431103":"冷水滩区","431121":"祁阳县","431122":"东安县","431123":"双牌县","431124":"道县","431125":"江永县","431126":"宁远县","431127":"蓝山县","431128":"新田县","431129":"江华瑶族自治县","431171":"永州经济技术开发区","431172":"永州市金洞管理区","431173":"永州市回龙圩管理区"},"431200":{"431201":"市辖区","431202":"鹤城区","431221":"中方县","431222":"沅陵县","431223":"辰溪县","431224":"溆浦县","431225":"会同县","431226":"麻阳苗族自治县","431227":"新晃侗族自治县","431228":"芷江侗族自治县","431229":"靖州苗族侗族自治县","431230":"通道侗族自治县","431271":"怀化市洪江管理区","431281":"洪江市"},"431300":{"431301":"市辖区","431302":"娄星区","431321":"双峰县","431322":"新化县","431381":"冷水江市","431382":"涟源市"},"433100":{"433101":"吉首市","433122":"泸溪县","433123":"凤凰县","433124":"花垣县","433125":"保靖县","433126":"古丈县","433127":"永顺县","433130":"龙山县","433173":"湖南永顺经济开发区"},"440000":{"440100":"广州市","440200":"韶关市","440300":"深圳市","440400":"珠海市","440500":"汕头市","440600":"佛山市","440700":"江门市","440800":"湛江市","440900":"茂名市","441200":"肇庆市","441300":"惠州市","441400":"梅州市","441500":"汕尾市","441600":"河源市","441700":"阳江市","441800":"清远市","441900":"东莞市","442000":"中山市","445100":"潮州市","445200":"揭阳市","445300":"云浮市"},"440100":{"440101":"市辖区","440103":"荔湾区","440104":"越秀区","440105":"海珠区","440106":"天河区","440111":"白云区","440112":"黄埔区","440113":"番禺区","440114":"花都区","440115":"南沙区","440117":"从化区","440118":"增城区"},"440200":{"440201":"市辖区","440203":"武江区","440204":"浈江区","440205":"曲江区","440222":"始兴县","440224":"仁化县","440229":"翁源县","440232":"乳源瑶族自治县","440233":"新丰县","440281":"乐昌市","440282":"南雄市"},"440300":{"440301":"市辖区","440303":"罗湖区","440304":"福田区","440305":"南山区","440306":"宝安区","440307":"龙岗区","440308":"盐田区","440309":"龙华区","440310":"坪山区","440311":"光明区"},"440400":{"440401":"市辖区","440402":"香洲区","440403":"斗门区","440404":"金湾区"},"440500":{"440501":"市辖区","440507":"龙湖区","440511":"金平区","440512":"濠江区","440513":"潮阳区","440514":"潮南区","440515":"澄海区","440523":"南澳县"},"440600":{"440601":"市辖区","440604":"禅城区","440605":"南海区","440606":"顺德区","440607":"三水区","440608":"高明区"},"440700":{"440701":"市辖区","440703":"蓬江区","440704":"江海区","440705":"新会区","440781":"台山市","440783":"开平市","440784":"鹤山市","440785":"恩平市"},"440800":{"440801":"市辖区","440802":"赤坎区","440803":"霞山区","440804":"坡头区","440811":"麻章区","440823":"遂溪县","440825":"徐闻县","440881":"廉江市","440882":"雷州市","440883":"吴川市"},"440900":{"440901":"市辖区","440902":"茂南区","440904":"电白区","440981":"高州市","440982":"化州市","440983":"信宜市"},"441200":{"441201":"市辖区","441202":"端州区","441203":"鼎湖区","441204":"高要区","441223":"广宁县","441224":"怀集县","441225":"封开县","441226":"德庆县","441284":"四会市"},"441300":{"441301":"市辖区","441302":"惠城区","441303":"惠阳区","441322":"博罗县","441323":"惠东县","441324":"龙门县"},"441400":{"441401":"市辖区","441402":"梅江区","441403":"梅县区","441422":"大埔县","441423":"丰顺县","441424":"五华县","441426":"平远县","441427":"蕉岭县","441481":"兴宁市"},"441500":{"441501":"市辖区","441502":"城区","441521":"海丰县","441523":"陆河县","441581":"陆丰市"},"441600":{"441601":"市辖区","441602":"源城区","441621":"紫金县","441622":"龙川县","441623":"连平县","441624":"和平县","441625":"东源县"},"441700":{"441701":"市辖区","441702":"江城区","441704":"阳东区","441721":"阳西县","441781":"阳春市"},"441800":{"441801":"市辖区","441802":"清城区","441803":"清新区","441821":"佛冈县","441823":"阳山县","441825":"连山壮族瑶族自治县","441826":"连南瑶族自治县","441881":"英德市","441882":"连州市"},"441900":{"441900003":"东城街道","441900004":"南城街道","441900005":"万江街道","441900006":"莞城街道","441900101":"石碣镇","441900102":"石龙镇","441900103":"茶山镇","441900104":"石排镇","441900105":"企石镇","441900106":"横沥镇","441900107":"桥头镇","441900108":"谢岗镇","441900109":"东坑镇","441900110":"常平镇","441900111":"寮步镇","441900112":"樟木头镇","441900113":"大朗镇","441900114":"黄江镇","441900115":"清溪镇","441900116":"塘厦镇","441900117":"凤岗镇","441900118":"大岭山镇","441900119":"长安镇","441900121":"虎门镇","441900122":"厚街镇","441900123":"沙田镇","441900124":"道滘镇","441900125":"洪梅镇","441900126":"麻涌镇","441900127":"望牛墩镇","441900128":"中堂镇","441900129":"高埗镇","441900401":"松山湖","441900402":"东莞港","441900403":"东莞生态园"},"442000":{"442000001":"石岐街道","442000002":"东区街道","442000003":"中山港街道","442000004":"西区街道","442000005":"南区街道","442000006":"五桂山街道","442000100":"小榄镇","442000101":"黄圃镇","442000102":"民众镇","442000103":"东凤镇","442000104":"东升镇","442000105":"古镇镇","442000106":"沙溪镇","442000107":"坦洲镇","442000108":"港口镇","442000109":"三角镇","442000110":"横栏镇","442000111":"南头镇","442000112":"阜沙镇","442000113":"南朗镇","442000114":"三乡镇","442000115":"板芙镇","442000116":"大涌镇","442000117":"神湾镇"},"445100":{"445101":"市辖区","445102":"湘桥区","445103":"潮安区","445122":"饶平县"},"445200":{"445201":"市辖区","445202":"榕城区","445203":"揭东区","445222":"揭西县","445224":"惠来县","445281":"普宁市"},"445300":{"445301":"市辖区","445302":"云城区","445303":"云安区","445321":"新兴县","445322":"郁南县","445381":"罗定市"},"450000":{"450100":"南宁市","450200":"柳州市","450300":"桂林市","450400":"梧州市","450500":"北海市","450600":"防城港市","450700":"钦州市","450800":"贵港市","450900":"玉林市","451000":"百色市","451100":"贺州市","451200":"河池市","451300":"来宾市","451400":"崇左市"},"450100":{"450101":"市辖区","450102":"兴宁区","450103":"青秀区","450105":"江南区","450107":"西乡塘区","450108":"良庆区","450109":"邕宁区","450110":"武鸣区","450123":"隆安县","450124":"马山县","450125":"上林县","450126":"宾阳县","450127":"横县"},"450200":{"450201":"市辖区","450202":"城中区","450203":"鱼峰区","450204":"柳南区","450205":"柳北区","450206":"柳江区","450222":"柳城县","450223":"鹿寨县","450224":"融安县","450225":"融水苗族自治县","450226":"三江侗族自治县"},"450300":{"450301":"市辖区","450302":"秀峰区","450303":"叠彩区","450304":"象山区","450305":"七星区","450311":"雁山区","450312":"临桂区","450321":"阳朔县","450323":"灵川县","450324":"全州县","450325":"兴安县","450326":"永福县","450327":"灌阳县","450328":"龙胜各族自治县","450329":"资源县","450330":"平乐县","450332":"恭城瑶族自治县","450381":"荔浦市"},"450400":{"450401":"市辖区","450403":"万秀区","450405":"长洲区","450406":"龙圩区","450421":"苍梧县","450422":"藤县","450423":"蒙山县","450481":"岑溪市"},"450500":{"450501":"市辖区","450502":"海城区","450503":"银海区","450512":"铁山港区","450521":"合浦县"},"450600":{"450601":"市辖区","450602":"港口区","450603":"防城区","450621":"上思县","450681":"东兴市"},"450700":{"450701":"市辖区","450702":"钦南区","450703":"钦北区","450721":"灵山县","450722":"浦北县"},"450800":{"450801":"市辖区","450802":"港北区","450803":"港南区","450804":"覃塘区","450821":"平南县","450881":"桂平市"},"450900":{"450901":"市辖区","450902":"玉州区","450903":"福绵区","450921":"容县","450922":"陆川县","450923":"博白县","450924":"兴业县","450981":"北流市"},"451000":{"451001":"市辖区","451002":"右江区","451003":"田阳区","451022":"田东县","451023":"平果县","451024":"德保县","451026":"那坡县","451027":"凌云县","451028":"乐业县","451029":"田林县","451030":"西林县","451031":"隆林各族自治县","451081":"靖西市"},"451100":{"451101":"市辖区","451102":"八步区","451103":"平桂区","451121":"昭平县","451122":"钟山县","451123":"富川瑶族自治县"},"451200":{"451201":"市辖区","451202":"金城江区","451203":"宜州区","451221":"南丹县","451222":"天峨县","451223":"凤山县","451224":"东兰县","451225":"罗城仫佬族自治县","451226":"环江毛南族自治县","451227":"巴马瑶族自治县","451228":"都安瑶族自治县","451229":"大化瑶族自治县"},"451300":{"451301":"市辖区","451302":"兴宾区","451321":"忻城县","451322":"象州县","451323":"武宣县","451324":"金秀瑶族自治县","451381":"合山市"},"451400":{"451401":"市辖区","451402":"江州区","451421":"扶绥县","451422":"宁明县","451423":"龙州县","451424":"大新县","451425":"天等县","451481":"凭祥市"},"460000":{"460100":"海口市","460200":"三亚市","460300":"三沙市","460400":"儋州市","469000":"省直辖县级行政区划"},"460100":{"460101":"市辖区","460105":"秀英区","460106":"龙华区","460107":"琼山区","460108":"美兰区"},"460200":{"460201":"市辖区","460202":"海棠区","460203":"吉阳区","460204":"天涯区","460205":"崖州区"},"460300":{"460321":"西沙群岛","460322":"南沙群岛","460323":"中沙群岛的岛礁及其海域"},"460400":{"460400100":"那大镇","460400101":"和庆镇","460400102":"南丰镇","460400103":"大成镇","460400104":"雅星镇","460400105":"兰洋镇","460400106":"光村镇","460400107":"木棠镇","460400108":"海头镇","460400109":"峨蔓镇","460400111":"王五镇","460400112":"白马井镇","460400113":"中和镇","460400114":"排浦镇","460400115":"东成镇","460400116":"新州镇","460400499":"洋浦经济开发区","460400500":"华南热作学院"},"469000":{"469001":"五指山市","469002":"琼海市","469005":"文昌市","469006":"万宁市","469007":"东方市","469021":"定安县","469022":"屯昌县","469023":"澄迈县","469024":"临高县","469025":"白沙黎族自治县","469026":"昌江黎族自治县","469027":"乐东黎族自治县","469028":"陵水黎族自治县","469029":"保亭黎族苗族自治县","469030":"琼中黎族苗族自治县"},"500000":{"500100":"市辖区","500200":"县"},"500100":{"500101":"万州区","500102":"涪陵区","500103":"渝中区","500104":"大渡口区","500105":"江北区","500106":"沙坪坝区","500107":"九龙坡区","500108":"南岸区","500109":"北碚区","500110":"綦江区","500111":"大足区","500112":"渝北区","500113":"巴南区","500114":"黔江区","500115":"长寿区","500116":"江津区","500117":"合川区","500118":"永川区","500119":"南川区","500120":"璧山区","500151":"铜梁区","500152":"潼南区","500153":"荣昌区","500154":"开州区","500155":"梁平区","500156":"武隆区"},"500200":{"500229":"城口县","500230":"丰都县","500231":"垫江县","500233":"忠县","500235":"云阳县","500236":"奉节县","500237":"巫山县","500238":"巫溪县","500240":"石柱土家族自治县","500241":"秀山土家族苗族自治县","500242":"酉阳土家族苗族自治县","500243":"彭水苗族土家族自治县"},"510000":{"510100":"成都市","510300":"自贡市","510400":"攀枝花市","510500":"泸州市","510600":"德阳市","510700":"绵阳市","510800":"广元市","510900":"遂宁市","511000":"内江市","511100":"乐山市","511300":"南充市","511400":"眉山市","511500":"宜宾市","511600":"广安市","511700":"达州市","511800":"雅安市","511900":"巴中市","512000":"资阳市","513200":"阿坝藏族羌族自治州","513300":"甘孜藏族自治州","513400":"凉山彝族自治州"},"510100":{"510101":"市辖区","510104":"锦江区","510105":"青羊区","510106":"金牛区","510107":"武侯区","510108":"成华区","510112":"龙泉驿区","510113":"青白江区","510114":"新都区","510115":"温江区","510116":"双流区","510117":"郫都区","510121":"金堂县","510129":"大邑县","510131":"蒲江县","510132":"新津县","510181":"都江堰市","510182":"彭州市","510183":"邛崃市","510184":"崇州市","510185":"简阳市"},"510300":{"510301":"市辖区","510302":"自流井区","510303":"贡井区","510304":"大安区","510311":"沿滩区","510321":"荣县","510322":"富顺县"},"510400":{"510401":"市辖区","510402":"东区","510403":"西区","510411":"仁和区","510421":"米易县","510422":"盐边县"},"510500":{"510501":"市辖区","510502":"江阳区","510503":"纳溪区","510504":"龙马潭区","510521":"泸县","510522":"合江县","510524":"叙永县","510525":"古蔺县"},"510600":{"510601":"市辖区","510603":"旌阳区","510604":"罗江区","510623":"中江县","510681":"广汉市","510682":"什邡市","510683":"绵竹市"},"510700":{"510701":"市辖区","510703":"涪城区","510704":"游仙区","510705":"安州区","510722":"三台县","510723":"盐亭县","510725":"梓潼县","510726":"北川羌族自治县","510727":"平武县","510781":"江油市"},"510800":{"510801":"市辖区","510802":"利州区","510811":"昭化区","510812":"朝天区","510821":"旺苍县","510822":"青川县","510823":"剑阁县","510824":"苍溪县"},"510900":{"510901":"市辖区","510903":"船山区","510904":"安居区","510921":"蓬溪县","510923":"大英县","510981":"射洪市"},"511000":{"511001":"市辖区","511002":"市中区","511011":"东兴区","511024":"威远县","511025":"资中县","511071":"内江经济开发区","511083":"隆昌市"},"511100":{"511101":"市辖区","511102":"市中区","511111":"沙湾区","511112":"五通桥区","511113":"金口河区","511123":"犍为县","511124":"井研县","511126":"夹江县","511129":"沐川县","511132":"峨边彝族自治县","511133":"马边彝族自治县","511181":"峨眉山市"},"511300":{"511301":"市辖区","511302":"顺庆区","511303":"高坪区","511304":"嘉陵区","511321":"南部县","511322":"营山县","511323":"蓬安县","511324":"仪陇县","511325":"西充县","511381":"阆中市"},"511400":{"511401":"市辖区","511402":"东坡区","511403":"彭山区","511421":"仁寿县","511423":"洪雅县","511424":"丹棱县","511425":"青神县"},"511500":{"511501":"市辖区","511502":"翠屏区","511503":"南溪区","511504":"叙州区","511523":"江安县","511524":"长宁县","511525":"高县","511526":"珙县","511527":"筠连县","511528":"兴文县","511529":"屏山县"},"511600":{"511601":"市辖区","511602":"广安区","511603":"前锋区","511621":"岳池县","511622":"武胜县","511623":"邻水县","511681":"华蓥市"},"511700":{"511701":"市辖区","511702":"通川区","511703":"达川区","511722":"宣汉县","511723":"开江县","511724":"大竹县","511725":"渠县","511771":"达州经济开发区","511781":"万源市"},"511800":{"511801":"市辖区","511802":"雨城区","511803":"名山区","511822":"荥经县","511823":"汉源县","511824":"石棉县","511825":"天全县","511826":"芦山县","511827":"宝兴县"},"511900":{"511901":"市辖区","511902":"巴州区","511903":"恩阳区","511921":"通江县","511922":"南江县","511923":"平昌县","511971":"巴中经济开发区"},"512000":{"512001":"市辖区","512002":"雁江区","512021":"安岳县","512022":"乐至县"},"513200":{"513201":"马尔康市","513221":"汶川县","513222":"理县","513223":"茂县","513224":"松潘县","513225":"九寨沟县","513226":"金川县","513227":"小金县","513228":"黑水县","513230":"壤塘县","513231":"阿坝县","513232":"若尔盖县","513233":"红原县"},"513300":{"513301":"康定市","513322":"泸定县","513323":"丹巴县","513324":"九龙县","513325":"雅江县","513326":"道孚县","513327":"炉霍县","513328":"甘孜县","513329":"新龙县","513330":"德格县","513331":"白玉县","513332":"石渠县","513333":"色达县","513334":"理塘县","513335":"巴塘县","513336":"乡城县","513337":"稻城县","513338":"得荣县"},"513400":{"513401":"西昌市","513422":"木里藏族自治县","513423":"盐源县","513424":"德昌县","513425":"会理县","513426":"会东县","513427":"宁南县","513428":"普格县","513429":"布拖县","513430":"金阳县","513431":"昭觉县","513432":"喜德县","513433":"冕宁县","513434":"越西县","513435":"甘洛县","513436":"美姑县","513437":"雷波县"},"520000":{"520100":"贵阳市","520200":"六盘水市","520300":"遵义市","520400":"安顺市","520500":"毕节市","520600":"铜仁市","522300":"黔西南布依族苗族自治州","522600":"黔东南苗族侗族自治州","522700":"黔南布依族苗族自治州"},"520100":{"520101":"市辖区","520102":"南明区","520103":"云岩区","520111":"花溪区","520112":"乌当区","520113":"白云区","520115":"观山湖区","520121":"开阳县","520122":"息烽县","520123":"修文县","520181":"清镇市"},"520200":{"520201":"钟山区","520203":"六枝特区","520221":"水城县","520281":"盘州市"},"520300":{"520301":"市辖区","520302":"红花岗区","520303":"汇川区","520304":"播州区","520322":"桐梓县","520323":"绥阳县","520324":"正安县","520325":"道真仡佬族苗族自治县","520326":"务川仡佬族苗族自治县","520327":"凤冈县","520328":"湄潭县","520329":"余庆县","520330":"习水县","520381":"赤水市","520382":"仁怀市"},"520400":{"520401":"市辖区","520402":"西秀区","520403":"平坝区","520422":"普定县","520423":"镇宁布依族苗族自治县","520424":"关岭布依族苗族自治县","520425":"紫云苗族布依族自治县"},"520500":{"520501":"市辖区","520502":"七星关区","520521":"大方县","520522":"黔西县","520523":"金沙县","520524":"织金县","520525":"纳雍县","520526":"威宁彝族回族苗族自治县","520527":"赫章县"},"520600":{"520601":"市辖区","520602":"碧江区","520603":"万山区","520621":"江口县","520622":"玉屏侗族自治县","520623":"石阡县","520624":"思南县","520625":"印江土家族苗族自治县","520626":"德江县","520627":"沿河土家族自治县","520628":"松桃苗族自治县"},"522300":{"522301":"兴义市","522302":"兴仁市","522323":"普安县","522324":"晴隆县","522325":"贞丰县","522326":"望谟县","522327":"册亨县","522328":"安龙县"},"522600":{"522601":"凯里市","522622":"黄平县","522623":"施秉县","522624":"三穗县","522625":"镇远县","522626":"岑巩县","522627":"天柱县","522628":"锦屏县","522629":"剑河县","522630":"台江县","522631":"黎平县","522632":"榕江县","522633":"从江县","522634":"雷山县","522635":"麻江县","522636":"丹寨县"},"522700":{"522701":"都匀市","522702":"福泉市","522722":"荔波县","522723":"贵定县","522725":"瓮安县","522726":"独山县","522727":"平塘县","522728":"罗甸县","522729":"长顺县","522730":"龙里县","522731":"惠水县","522732":"三都水族自治县"},"530000":{"530100":"昆明市","530300":"曲靖市","530400":"玉溪市","530500":"保山市","530600":"昭通市","530700":"丽江市","530800":"普洱市","530900":"临沧市","532300":"楚雄彝族自治州","532500":"红河哈尼族彝族自治州","532600":"文山壮族苗族自治州","532800":"西双版纳傣族自治州","532900":"大理白族自治州","533100":"德宏傣族景颇族自治州","533300":"怒江傈僳族自治州","533400":"迪庆藏族自治州"},"530100":{"530101":"市辖区","530102":"五华区","530103":"盘龙区","530111":"官渡区","530112":"西山区","530113":"东川区","530114":"呈贡区","530115":"晋宁区","530124":"富民县","530125":"宜良县","530126":"石林彝族自治县","530127":"嵩明县","530128":"禄劝彝族苗族自治县","530129":"寻甸回族彝族自治县","530181":"安宁市"},"530300":{"530301":"市辖区","530302":"麒麟区","530303":"沾益区","530304":"马龙区","530322":"陆良县","530323":"师宗县","530324":"罗平县","530325":"富源县","530326":"会泽县","530381":"宣威市"},"530400":{"530401":"市辖区","530402":"红塔区","530403":"江川区","530422":"澄江县","530423":"通海县","530424":"华宁县","530425":"易门县","530426":"峨山彝族自治县","530427":"新平彝族傣族自治县","530428":"元江哈尼族彝族傣族自治县"},"530500":{"530501":"市辖区","530502":"隆阳区","530521":"施甸县","530523":"龙陵县","530524":"昌宁县","530581":"腾冲市"},"530600":{"530601":"市辖区","530602":"昭阳区","530621":"鲁甸县","530622":"巧家县","530623":"盐津县","530624":"大关县","530625":"永善县","530626":"绥江县","530627":"镇雄县","530628":"彝良县","530629":"威信县","530681":"水富市"},"530700":{"530701":"市辖区","530702":"古城区","530721":"玉龙纳西族自治县","530722":"永胜县","530723":"华坪县","530724":"宁蒗彝族自治县"},"530800":{"530801":"市辖区","530802":"思茅区","530821":"宁洱哈尼族彝族自治县","530822":"墨江哈尼族自治县","530823":"景东彝族自治县","530824":"景谷傣族彝族自治县","530825":"镇沅彝族哈尼族拉祜族自治县","530826":"江城哈尼族彝族自治县","530827":"孟连傣族拉祜族佤族自治县","530828":"澜沧拉祜族自治县","530829":"西盟佤族自治县"},"530900":{"530901":"市辖区","530902":"临翔区","530921":"凤庆县","530922":"云县","530923":"永德县","530924":"镇康县","530925":"双江拉祜族佤族布朗族傣族自治县","530926":"耿马傣族佤族自治县","530927":"沧源佤族自治县"},"532300":{"532301":"楚雄市","532322":"双柏县","532323":"牟定县","532324":"南华县","532325":"姚安县","532326":"大姚县","532327":"永仁县","532328":"元谋县","532329":"武定县","532331":"禄丰县"},"532500":{"532501":"个旧市","532502":"开远市","532503":"蒙自市","532504":"弥勒市","532523":"屏边苗族自治县","532524":"建水县","532525":"石屏县","532527":"泸西县","532528":"元阳县","532529":"红河县","532530":"金平苗族瑶族傣族自治县","532531":"绿春县","532532":"河口瑶族自治县"},"532600":{"532601":"文山市","532622":"砚山县","532623":"西畴县","532624":"麻栗坡县","532625":"马关县","532626":"丘北县","532627":"广南县","532628":"富宁县"},"532800":{"532801":"景洪市","532822":"勐海县","532823":"勐腊县"},"532900":{"532901":"大理市","532922":"漾濞彝族自治县","532923":"祥云县","532924":"宾川县","532925":"弥渡县","532926":"南涧彝族自治县","532927":"巍山彝族回族自治县","532928":"永平县","532929":"云龙县","532930":"洱源县","532931":"剑川县","532932":"鹤庆县"},"533100":{"533102":"瑞丽市","533103":"芒市","533122":"梁河县","533123":"盈江县","533124":"陇川县"},"533300":{"533301":"泸水市","533323":"福贡县","533324":"贡山独龙族怒族自治县","533325":"兰坪白族普米族自治县"},"533400":{"533401":"香格里拉市","533422":"德钦县","533423":"维西傈僳族自治县"},"540000":{"540100":"拉萨市","540200":"日喀则市","540300":"昌都市","540400":"林芝市","540500":"山南市","540600":"那曲市","542500":"阿里地区"},"540100":{"540101":"市辖区","540102":"城关区","540103":"堆龙德庆区","540104":"达孜区","540121":"林周县","540122":"当雄县","540123":"尼木县","540124":"曲水县","540127":"墨竹工卡县","540171":"格尔木藏青工业园区","540172":"拉萨经济技术开发区","540173":"西藏文化旅游创意园区","540174":"达孜工业园区"},"540200":{"540202":"桑珠孜区","540221":"南木林县","540222":"江孜县","540223":"定日县","540224":"萨迦县","540225":"拉孜县","540226":"昂仁县","540227":"谢通门县","540228":"白朗县","540229":"仁布县","540230":"康马县","540231":"定结县","540232":"仲巴县","540233":"亚东县","540234":"吉隆县","540235":"聂拉木县","540236":"萨嘎县","540237":"岗巴县"},"540300":{"540302":"卡若区","540321":"江达县","540322":"贡觉县","540323":"类乌齐县","540324":"丁青县","540325":"察雅县","540326":"八宿县","540327":"左贡县","540328":"芒康县","540329":"洛隆县","540330":"边坝县"},"540400":{"540402":"巴宜区","540421":"工布江达县","540422":"米林县","540423":"墨脱县","540424":"波密县","540425":"察隅县","540426":"朗县"},"540500":{"540501":"市辖区","540502":"乃东区","540521":"扎囊县","540522":"贡嘎县","540523":"桑日县","540524":"琼结县","540525":"曲松县","540526":"措美县","540527":"洛扎县","540528":"加查县","540529":"隆子县","540530":"错那县","540531":"浪卡子县"},"540600":{"540602":"色尼区","540621":"嘉黎县","540622":"比如县","540623":"聂荣县","540624":"安多县","540625":"申扎县","540626":"索县","540627":"班戈县","540628":"巴青县","540629":"尼玛县","540630":"双湖县"},"542500":{"542521":"普兰县","542522":"札达县","542523":"噶尔县","542524":"日土县","542525":"革吉县","542526":"改则县","542527":"措勤县"},"610000":{"610100":"西安市","610200":"铜川市","610300":"宝鸡市","610400":"咸阳市","610500":"渭南市","610600":"延安市","610700":"汉中市","610800":"榆林市","610900":"安康市","611000":"商洛市"},"610100":{"610101":"市辖区","610102":"新城区","610103":"碑林区","610104":"莲湖区","610111":"灞桥区","610112":"未央区","610113":"雁塔区","610114":"阎良区","610115":"临潼区","610116":"长安区","610117":"高陵区","610118":"鄠邑区","610122":"蓝田县","610124":"周至县"},"610200":{"610201":"市辖区","610202":"王益区","610203":"印台区","610204":"耀州区","610222":"宜君县"},"610300":{"610301":"市辖区","610302":"渭滨区","610303":"金台区","610304":"陈仓区","610322":"凤翔县","610323":"岐山县","610324":"扶风县","610326":"眉县","610327":"陇县","610328":"千阳县","610329":"麟游县","610330":"凤县","610331":"太白县"},"610400":{"610401":"市辖区","610402":"秦都区","610403":"杨陵区","610404":"渭城区","610422":"三原县","610423":"泾阳县","610424":"乾县","610425":"礼泉县","610426":"永寿县","610428":"长武县","610429":"旬邑县","610430":"淳化县","610431":"武功县","610481":"兴平市","610482":"彬州市"},"610500":{"610501":"市辖区","610502":"临渭区","610503":"华州区","610522":"潼关县","610523":"大荔县","610524":"合阳县","610525":"澄城县","610526":"蒲城县","610527":"白水县","610528":"富平县","610581":"韩城市","610582":"华阴市"},"610600":{"610601":"市辖区","610602":"宝塔区","610603":"安塞区","610621":"延长县","610622":"延川县","610625":"志丹县","610626":"吴起县","610627":"甘泉县","610628":"富县","610629":"洛川县","610630":"宜川县","610631":"黄龙县","610632":"黄陵县","610681":"子长市"},"610700":{"610701":"市辖区","610702":"汉台区","610703":"南郑区","610722":"城固县","610723":"洋县","610724":"西乡县","610725":"勉县","610726":"宁强县","610727":"略阳县","610728":"镇巴县","610729":"留坝县","610730":"佛坪县"},"610800":{"610801":"市辖区","610802":"榆阳区","610803":"横山区","610822":"府谷县","610824":"靖边县","610825":"定边县","610826":"绥德县","610827":"米脂县","610828":"佳县","610829":"吴堡县","610830":"清涧县","610831":"子洲县","610881":"神木市"},"610900":{"610901":"市辖区","610902":"汉滨区","610921":"汉阴县","610922":"石泉县","610923":"宁陕县","610924":"紫阳县","610925":"岚皋县","610926":"平利县","610927":"镇坪县","610928":"旬阳县","610929":"白河县"},"611000":{"611001":"市辖区","611002":"商州区","611021":"洛南县","611022":"丹凤县","611023":"商南县","611024":"山阳县","611025":"镇安县","611026":"柞水县"},"620000":{"620100":"兰州市","620200":"嘉峪关市","620300":"金昌市","620400":"白银市","620500":"天水市","620600":"武威市","620700":"张掖市","620800":"平凉市","620900":"酒泉市","621000":"庆阳市","621100":"定西市","621200":"陇南市","622900":"临夏回族自治州","623000":"甘南藏族自治州"},"620100":{"620101":"市辖区","620102":"城关区","620103":"七里河区","620104":"西固区","620105":"安宁区","620111":"红古区","620121":"永登县","620122":"皋兰县","620123":"榆中县","620171":"兰州新区"},"620200":{"620201":"市辖区"},"620300":{"620301":"市辖区","620302":"金川区","620321":"永昌县"},"620400":{"620401":"市辖区","620402":"白银区","620403":"平川区","620421":"靖远县","620422":"会宁县","620423":"景泰县"},"620500":{"620501":"市辖区","620502":"秦州区","620503":"麦积区","620521":"清水县","620522":"秦安县","620523":"甘谷县","620524":"武山县","620525":"张家川回族自治县"},"620600":{"620601":"市辖区","620602":"凉州区","620621":"民勤县","620622":"古浪县","620623":"天祝藏族自治县"},"620700":{"620701":"市辖区","620702":"甘州区","620721":"肃南裕固族自治县","620722":"民乐县","620723":"临泽县","620724":"高台县","620725":"山丹县"},"620800":{"620801":"市辖区","620802":"崆峒区","620821":"泾川县","620822":"灵台县","620823":"崇信县","620825":"庄浪县","620826":"静宁县","620881":"华亭市"},"620900":{"620901":"市辖区","620902":"肃州区","620921":"金塔县","620922":"瓜州县","620923":"肃北蒙古族自治县","620924":"阿克塞哈萨克族自治县","620981":"玉门市","620982":"敦煌市"},"621000":{"621001":"市辖区","621002":"西峰区","621021":"庆城县","621022":"环县","621023":"华池县","621024":"合水县","621025":"正宁县","621026":"宁县","621027":"镇原县"},"621100":{"621101":"市辖区","621102":"安定区","621121":"通渭县","621122":"陇西县","621123":"渭源县","621124":"临洮县","621125":"漳县","621126":"岷县"},"621200":{"621201":"市辖区","621202":"武都区","621221":"成县","621222":"文县","621223":"宕昌县","621224":"康县","621225":"西和县","621226":"礼县","621227":"徽县","621228":"两当县"},"622900":{"622901":"临夏市","622921":"临夏县","622922":"康乐县","622923":"永靖县","622924":"广河县","622925":"和政县","622926":"东乡族自治县","622927":"积石山保安族东乡族撒拉族自治县"},"623000":{"623001":"合作市","623021":"临潭县","623022":"卓尼县","623023":"舟曲县","623024":"迭部县","623025":"玛曲县","623026":"碌曲县","623027":"夏河县"},"630000":{"630100":"西宁市","630200":"海东市","632200":"海北藏族自治州","632300":"黄南藏族自治州","632500":"海南藏族自治州","632600":"果洛藏族自治州","632700":"玉树藏族自治州","632800":"海西蒙古族藏族自治州"},"630100":{"630101":"市辖区","630102":"城东区","630103":"城中区","630104":"城西区","630105":"城北区","630121":"大通回族土族自治县","630122":"湟中县","630123":"湟源县"},"630200":{"630202":"乐都区","630203":"平安区","630222":"民和回族土族自治县","630223":"互助土族自治县","630224":"化隆回族自治县","630225":"循化撒拉族自治县"},"632200":{"632221":"门源回族自治县","632222":"祁连县","632223":"海晏县","632224":"刚察县"},"632300":{"632321":"同仁县","632322":"尖扎县","632323":"泽库县","632324":"河南蒙古族自治县"},"632500":{"632521":"共和县","632522":"同德县","632523":"贵德县","632524":"兴海县","632525":"贵南县"},"632600":{"632621":"玛沁县","632622":"班玛县","632623":"甘德县","632624":"达日县","632625":"久治县","632626":"玛多县"},"632700":{"632701":"玉树市","632722":"杂多县","632723":"称多县","632724":"治多县","632725":"囊谦县","632726":"曲麻莱县"},"632800":{"632801":"格尔木市","632802":"德令哈市","632803":"茫崖市","632821":"乌兰县","632822":"都兰县","632823":"天峻县","632857":"大柴旦行政委员会"},"640000":{"640100":"银川市","640200":"石嘴山市","640300":"吴忠市","640400":"固原市","640500":"中卫市"},"640100":{"640101":"市辖区","640104":"兴庆区","640105":"西夏区","640106":"金凤区","640121":"永宁县","640122":"贺兰县","640181":"灵武市"},"640200":{"640201":"市辖区","640202":"大武口区","640205":"惠农区","640221":"平罗县"},"640300":{"640301":"市辖区","640302":"利通区","640303":"红寺堡区","640323":"盐池县","640324":"同心县","640381":"青铜峡市"},"640400":{"640401":"市辖区","640402":"原州区","640422":"西吉县","640423":"隆德县","640424":"泾源县","640425":"彭阳县"},"640500":{"640501":"市辖区","640502":"沙坡头区","640521":"中宁县","640522":"海原县"},"650000":{"650100":"乌鲁木齐市","650200":"克拉玛依市","650400":"吐鲁番市","650500":"哈密市","652300":"昌吉回族自治州","652700":"博尔塔拉蒙古自治州","652800":"巴音郭楞蒙古自治州","652900":"阿克苏地区","653000":"克孜勒苏柯尔克孜自治州","653100":"喀什地区","653200":"和田地区","654000":"伊犁哈萨克自治州","654200":"塔城地区","654300":"阿勒泰地区","659000":"自治区直辖县级行政区划"},"650100":{"650101":"市辖区","650102":"天山区","650103":"沙依巴克区","650104":"新市区","650105":"水磨沟区","650106":"头屯河区","650107":"达坂城区","650109":"米东区","650121":"乌鲁木齐县"},"650200":{"650201":"市辖区","650202":"独山子区","650203":"克拉玛依区","650204":"白碱滩区","650205":"乌尔禾区"},"650400":{"650402":"高昌区","650421":"鄯善县","650422":"托克逊县"},"650500":{"650502":"伊州区","650521":"巴里坤哈萨克自治县","650522":"伊吾县"},"652300":{"652301":"昌吉市","652302":"阜康市","652323":"呼图壁县","652324":"玛纳斯县","652325":"奇台县","652327":"吉木萨尔县","652328":"木垒哈萨克自治县"},"652700":{"652701":"博乐市","652702":"阿拉山口市","652722":"精河县","652723":"温泉县"},"652800":{"652801":"库尔勒市","652822":"轮台县","652823":"尉犁县","652824":"若羌县","652825":"且末县","652826":"焉耆回族自治县","652827":"和静县","652828":"和硕县","652829":"博湖县","652871":"库尔勒经济技术开发区"},"652900":{"652901":"阿克苏市","652922":"温宿县","652923":"库车县","652924":"沙雅县","652925":"新和县","652926":"拜城县","652927":"乌什县","652928":"阿瓦提县","652929":"柯坪县"},"653000":{"653001":"阿图什市","653022":"阿克陶县","653023":"阿合奇县","653024":"乌恰县"},"653100":{"653101":"喀什市","653121":"疏附县","653122":"疏勒县","653123":"英吉沙县","653124":"泽普县","653125":"莎车县","653126":"叶城县","653127":"麦盖提县","653128":"岳普湖县","653129":"伽师县","653130":"巴楚县","653131":"塔什库尔干塔吉克自治县"},"653200":{"653201":"和田市","653221":"和田县","653222":"墨玉县","653223":"皮山县","653224":"洛浦县","653225":"策勒县","653226":"于田县","653227":"民丰县"},"654000":{"654002":"伊宁市","654003":"奎屯市","654004":"霍尔果斯市","654021":"伊宁县","654022":"察布查尔锡伯自治县","654023":"霍城县","654024":"巩留县","654025":"新源县","654026":"昭苏县","654027":"特克斯县","654028":"尼勒克县"},"654200":{"654201":"塔城市","654202":"乌苏市","654221":"额敏县","654223":"沙湾县","654224":"托里县","654225":"裕民县","654226":"和布克赛尔蒙古自治县"},"654300":{"654301":"阿勒泰市","654321":"布尔津县","654322":"富蕴县","654323":"福海县","654324":"哈巴河县","654325":"青河县","654326":"吉木乃县"},"659000":{"659001":"石河子市","659002":"阿拉尔市","659003":"图木舒克市","659004":"五家渠市","659006":"铁门关市"},"710000":{"710100":"台北市","710200":"高雄市","710300":"基隆市","710400":"台中市","710500":"台南市","710600":"新竹市","710700":"嘉义市"},"710100":{"710101":"内湖区","710102":"南港区","710103":"中正区","710104":"松山区","710105":"信义区","710106":"大安区","710107":"中山区","710108":"文山区","710109":"大同区","710110":"万华区","710111":"士林区","710112":"北投区"},"710200":{"710201":"新兴区","710202":"前金区","710203":"芩雅区","710204":"盐埕区","710205":"鼓山区","710206":"旗津区","710207":"前镇区","710208":"三民区","710209":"左营区","710210":"楠梓区","710211":"小港区"},"710300":{"710301":"仁爱区","710302":"信义区","710303":"中正区","710304":"暖暖区","710305":"安乐区","710307":"七堵区"},"710400":{"710301":"中区","710302":"东区","710303":"南区","710304":"西区","710305":"北区","710306":"北屯区","710307":"西屯区","710308":"南屯区"},"710500":{"710501":"中西区","710502":"东区","710503":"南区","710504":"北区","710505":"安平区","710506":"安南区"},"710600":{"710601":"东区","710602":"北区","710603":"香山区"},"710700":{"710701":"东区","710702":"西区"},"810000":{"810001":"中西區","810002":"灣仔區","810003":"東區","810004":"南區","810005":"油尖旺區","810006":"深水埗區","810007":"九龍城區","810008":"黃大仙區","810009":"觀塘區","810010":"荃灣區","810011":"屯門區","810012":"元朗區","810013":"北區","810014":"大埔區","810015":"西貢區","810016":"沙田區","810017":"葵青區","810018":"離島區"},"820000":{"820001":"花地瑪堂區","820002":"花王堂區","820003":"望德堂區","820004":"大堂區","820005":"風順堂區","820006":"嘉模堂區","820007":"路氹填海區","820008":"聖方濟各堂區"}}')},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){"use strict";a.r(t),a.d(t,"provinceAndCityData",(function(){return aa})),a.d(t,"regionData",(function(){return ta})),a.d(t,"provinceAndCityDataPlus",(function(){return _a})),a.d(t,"regionDataPlus",(function(){return Oa})),a.d(t,"CodeToText",(function(){return Zt})),a.d(t,"TextToCode",(function(){return Jt}));var n=a(1),i=a.n(n),o=function(){this.__data__=[],this.size=0},r=function(e,t){return e===t||e!=e&&t!=t},l=function(e,t){for(var a=e.length;a--;)if(r(e[a][0],t))return a;return-1},s=Array.prototype.splice,c=function(e){var t=this.__data__,a=l(t,e);return!(a<0)&&(a==t.length-1?t.pop():s.call(t,a,1),--this.size,!0)},u=function(e){var t=this.__data__,a=l(t,e);return a<0?void 0:t[a][1]},d=function(e){return l(this.__data__,e)>-1},p=function(e,t){var a=this.__data__,n=l(a,e);return n<0?(++this.size,a.push([e,t])):a[n][1]=t,this};function h(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}h.prototype.clear=o,h.prototype.delete=c,h.prototype.get=u,h.prototype.has=d,h.prototype.set=p;var m,f=h,b=function(){this.__data__=new f,this.size=0},g=function(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a},v=function(e){return this.__data__.get(e)},y=function(e){return this.__data__.has(e)},_=a(0),x=_.a.Symbol,w=Object.prototype,k=w.hasOwnProperty,T=w.toString,D=x?x.toStringTag:void 0,S=function(e){var t=k.call(e,D),a=e[D];try{e[D]=void 0;var n=!0}catch(e){}var i=T.call(e);return n&&(t?e[D]=a:delete e[D]),i},O=Object.prototype.toString,N=function(e){return O.call(e)},P=x?x.toStringTag:void 0,C=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":P&&P in Object(e)?S(e):N(e)},A=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},F=function(e){if(!A(e))return!1;var t=C(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},I=_.a["__core-js_shared__"],E=(m=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",R=function(e){return!!E&&E in e},z=Function.prototype.toString,j=function(e){if(null!=e){try{return z.call(e)}catch(e){}try{return e+""}catch(e){}}return""},L=/^\[object .+?Constructor\]$/,q=Function.prototype,$=Object.prototype,M=q.toString,B=$.hasOwnProperty,W=RegExp("^"+M.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=function(e){return!(!A(e)||R(e))&&(F(e)?W:L).test(j(e))},V=function(e,t){return null==e?void 0:e[t]},H=function(e,t){var a=V(e,t);return U(a)?a:void 0},Q=H(_.a,"Map"),G=H(Object,"create"),K=function(){this.__data__=G?G(null):{},this.size=0},Y=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X=Object.prototype.hasOwnProperty,Z=function(e){var t=this.__data__;if(G){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return X.call(t,e)?t[e]:void 0},J=Object.prototype.hasOwnProperty,ee=function(e){var t=this.__data__;return G?void 0!==t[e]:J.call(t,e)},te=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=G&&void 0===t?"__lodash_hash_undefined__":t,this};function ae(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}ae.prototype.clear=K,ae.prototype.delete=Y,ae.prototype.get=Z,ae.prototype.has=ee,ae.prototype.set=te;var ne=ae,ie=function(){this.size=0,this.__data__={hash:new ne,map:new(Q||f),string:new ne}},oe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},re=function(e,t){var a=e.__data__;return oe(t)?a["string"==typeof t?"string":"hash"]:a.map},le=function(e){var t=re(this,e).delete(e);return this.size-=t?1:0,t},se=function(e){return re(this,e).get(e)},ce=function(e){return re(this,e).has(e)},ue=function(e,t){var a=re(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this};function de(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}de.prototype.clear=ie,de.prototype.delete=le,de.prototype.get=se,de.prototype.has=ce,de.prototype.set=ue;var pe=de,he=function(e,t){var a=this.__data__;if(a instanceof f){var n=a.__data__;if(!Q||n.length<199)return n.push([e,t]),this.size=++a.size,this;a=this.__data__=new pe(n)}return a.set(e,t),this.size=a.size,this};function me(e){var t=this.__data__=new f(e);this.size=t.size}me.prototype.clear=b,me.prototype.delete=g,me.prototype.get=v,me.prototype.has=y,me.prototype.set=he;var fe=me,be=function(e,t){for(var a=-1,n=null==e?0:e.length;++a<n&&!1!==t(e[a],a,e););return e},ge=function(){try{var e=H(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ve=function(e,t,a){"__proto__"==t&&ge?ge(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a},ye=Object.prototype.hasOwnProperty,_e=function(e,t,a){var n=e[t];ye.call(e,t)&&r(n,a)&&(void 0!==a||t in e)||ve(e,t,a)},xe=function(e,t,a,n){var i=!a;a||(a={});for(var o=-1,r=t.length;++o<r;){var l=t[o],s=n?n(a[l],e[l],l,a,e):void 0;void 0===s&&(s=e[l]),i?ve(a,l,s):_e(a,l,s)}return a},we=function(e,t){for(var a=-1,n=Array(e);++a<e;)n[a]=t(a);return n},ke=function(e){return null!=e&&"object"==typeof e},Te=function(e){return ke(e)&&"[object Arguments]"==C(e)},De=Object.prototype,Se=De.hasOwnProperty,Oe=De.propertyIsEnumerable,Ne=Te(function(){return arguments}())?Te:function(e){return ke(e)&&Se.call(e,"callee")&&!Oe.call(e,"callee")},Pe=Array.isArray,Ce=a(4),Ae=/^(?:0|[1-9]\d*)$/,Fe=function(e,t){var a=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==a||"symbol"!=a&&Ae.test(e))&&e>-1&&e%1==0&&e<t},Ie=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee["[object Arguments]"]=Ee["[object Array]"]=Ee["[object ArrayBuffer]"]=Ee["[object Boolean]"]=Ee["[object DataView]"]=Ee["[object Date]"]=Ee["[object Error]"]=Ee["[object Function]"]=Ee["[object Map]"]=Ee["[object Number]"]=Ee["[object Object]"]=Ee["[object RegExp]"]=Ee["[object Set]"]=Ee["[object String]"]=Ee["[object WeakMap]"]=!1;var Re=function(e){return ke(e)&&Ie(e.length)&&!!Ee[C(e)]},ze=function(e){return function(t){return e(t)}},je=a(2),Le=je.a&&je.a.isTypedArray,qe=Le?ze(Le):Re,$e=Object.prototype.hasOwnProperty,Me=function(e,t){var a=Pe(e),n=!a&&Ne(e),i=!a&&!n&&Object(Ce.a)(e),o=!a&&!n&&!i&&qe(e),r=a||n||i||o,l=r?we(e.length,String):[],s=l.length;for(var c in e)!t&&!$e.call(e,c)||r&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Fe(c,s))||l.push(c);return l},Be=Object.prototype,We=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Be)},Ue=function(e,t){return function(a){return e(t(a))}},Ve=Ue(Object.keys,Object),He=Object.prototype.hasOwnProperty,Qe=function(e){if(!We(e))return Ve(e);var t=[];for(var a in Object(e))He.call(e,a)&&"constructor"!=a&&t.push(a);return t},Ge=function(e){return null!=e&&Ie(e.length)&&!F(e)},Ke=function(e){return Ge(e)?Me(e):Qe(e)},Ye=function(e,t){return e&&xe(t,Ke(t),e)},Xe=function(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t},Ze=Object.prototype.hasOwnProperty,Je=function(e){if(!A(e))return Xe(e);var t=We(e),a=[];for(var n in e)("constructor"!=n||!t&&Ze.call(e,n))&&a.push(n);return a},et=function(e){return Ge(e)?Me(e,!0):Je(e)},tt=function(e,t){return e&&xe(t,et(t),e)},at=a(7),nt=function(e,t){var a=-1,n=e.length;for(t||(t=Array(n));++a<n;)t[a]=e[a];return t},it=function(e,t){for(var a=-1,n=null==e?0:e.length,i=0,o=[];++a<n;){var r=e[a];t(r,a,e)&&(o[i++]=r)}return o},ot=function(){return[]},rt=Object.prototype.propertyIsEnumerable,lt=Object.getOwnPropertySymbols,st=lt?function(e){return null==e?[]:(e=Object(e),it(lt(e),(function(t){return rt.call(e,t)})))}:ot,ct=function(e,t){return xe(e,st(e),t)},ut=function(e,t){for(var a=-1,n=t.length,i=e.length;++a<n;)e[i+a]=t[a];return e},dt=Ue(Object.getPrototypeOf,Object),pt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ut(t,st(e)),e=dt(e);return t}:ot,ht=function(e,t){return xe(e,pt(e),t)},mt=function(e,t,a){var n=t(e);return Pe(e)?n:ut(n,a(e))},ft=function(e){return mt(e,Ke,st)},bt=function(e){return mt(e,et,pt)},gt=H(_.a,"DataView"),vt=H(_.a,"Promise"),yt=H(_.a,"Set"),_t=H(_.a,"WeakMap"),xt=j(gt),wt=j(Q),kt=j(vt),Tt=j(yt),Dt=j(_t),St=C;(gt&&"[object DataView]"!=St(new gt(new ArrayBuffer(1)))||Q&&"[object Map]"!=St(new Q)||vt&&"[object Promise]"!=St(vt.resolve())||yt&&"[object Set]"!=St(new yt)||_t&&"[object WeakMap]"!=St(new _t))&&(St=function(e){var t=C(e),a="[object Object]"==t?e.constructor:void 0,n=a?j(a):"";if(n)switch(n){case xt:return"[object DataView]";case wt:return"[object Map]";case kt:return"[object Promise]";case Tt:return"[object Set]";case Dt:return"[object WeakMap]"}return t});var Ot=St,Nt=Object.prototype.hasOwnProperty,Pt=function(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&Nt.call(e,"index")&&(a.index=e.index,a.input=e.input),a},Ct=_.a.Uint8Array,At=function(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t},Ft=function(e,t){var a=t?At(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)},It=/\w*$/,Et=function(e){var t=new e.constructor(e.source,It.exec(e));return t.lastIndex=e.lastIndex,t},Rt=x?x.prototype:void 0,zt=Rt?Rt.valueOf:void 0,jt=function(e){return zt?Object(zt.call(e)):{}},Lt=function(e,t){var a=t?At(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)},qt=function(e,t,a){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return At(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Ft(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Lt(e,a);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Et(e);case"[object Set]":return new n;case"[object Symbol]":return jt(e)}},$t=Object.create,Mt=function(){function e(){}return function(t){if(!A(t))return{};if($t)return $t(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),Bt=function(e){return"function"!=typeof e.constructor||We(e)?{}:Mt(dt(e))},Wt=function(e){return ke(e)&&"[object Map]"==Ot(e)},Ut=je.a&&je.a.isMap,Vt=Ut?ze(Ut):Wt,Ht=function(e){return ke(e)&&"[object Set]"==Ot(e)},Qt=je.a&&je.a.isSet,Gt=Qt?ze(Qt):Ht,Kt={};Kt["[object Arguments]"]=Kt["[object Array]"]=Kt["[object ArrayBuffer]"]=Kt["[object DataView]"]=Kt["[object Boolean]"]=Kt["[object Date]"]=Kt["[object Float32Array]"]=Kt["[object Float64Array]"]=Kt["[object Int8Array]"]=Kt["[object Int16Array]"]=Kt["[object Int32Array]"]=Kt["[object Map]"]=Kt["[object Number]"]=Kt["[object Object]"]=Kt["[object RegExp]"]=Kt["[object Set]"]=Kt["[object String]"]=Kt["[object Symbol]"]=Kt["[object Uint8Array]"]=Kt["[object Uint8ClampedArray]"]=Kt["[object Uint16Array]"]=Kt["[object Uint32Array]"]=!0,Kt["[object Error]"]=Kt["[object Function]"]=Kt["[object WeakMap]"]=!1;var Yt=function e(t,a,n,i,o,r){var l,s=1&a,c=2&a,u=4&a;if(n&&(l=o?n(t,i,o,r):n(t)),void 0!==l)return l;if(!A(t))return t;var d=Pe(t);if(d){if(l=Pt(t),!s)return nt(t,l)}else{var p=Ot(t),h="[object Function]"==p||"[object GeneratorFunction]"==p;if(Object(Ce.a)(t))return Object(at.a)(t,s);if("[object Object]"==p||"[object Arguments]"==p||h&&!o){if(l=c||h?{}:Bt(t),!s)return c?ht(t,tt(l,t)):ct(t,Ye(l,t))}else{if(!Kt[p])return o?t:{};l=qt(t,p,s)}}r||(r=new fe);var m=r.get(t);if(m)return m;r.set(t,l),Gt(t)?t.forEach((function(i){l.add(e(i,a,n,i,t,r))})):Vt(t)&&t.forEach((function(i,o){l.set(o,e(i,a,n,o,t,r))}));var f=u?c?bt:ft:c?keysIn:Ke,b=d?void 0:f(t);return be(b||t,(function(i,o){b&&(i=t[o=i]),_e(l,o,e(i,a,n,o,t,r))})),l},Xt=function(e){return Yt(e,5)},Zt={},Jt={},ea=i.a[86],ta=[],aa=[];for(var na in Zt[""]="全部",ea)ta.push({value:na,label:ea[na]}),Zt[na]=ea[na],Jt[ea[na]]={code:na},Jt[ea[na]]["全部"]={code:""};for(var ia=0,oa=ta.length;ia<oa;ia++){var ra=ta[ia].value,la=ta[ia].label,sa=[];for(var ca in i.a[ra])sa.push({value:ca,label:i.a[ra][ca]}),Zt[ca]=i.a[ra][ca],Jt[la][i.a[ra][ca]]={code:ca},Jt[la][i.a[ra][ca]]["全部"]={code:""};sa.length&&(ta[ia].children=sa)}aa=Xt(ta);for(var ua=0,da=ta.length;ua<da;ua++){var pa=ta[ua].children,ha=ta[ua].label;if(pa)for(var ma=0,fa=pa.length;ma<fa;ma++){var ba=pa[ma].value,ga=pa[ma].label,va=[];for(var ya in i.a[ba])va.push({value:ya,label:i.a[ba][ya]}),Zt[ya]=i.a[ba][ya],Jt[ha][ga][i.a[ba][ya]]={code:ya};va.length&&(pa[ma].children=va)}}var _a=Xt(aa);_a.unshift({value:"",label:"全部"});for(var xa=0,wa=_a.length;xa<wa;xa++){var ka=_a[xa].children;if(ka&&ka.length){ka.unshift({value:"",label:"全部"});for(var Ta=0,Da=ka.length;Ta<Da;Ta++){var Sa=ka[Ta].children;Sa&&Sa.length&&Sa.unshift({value:"",label:"全部"})}}}var Oa=Xt(ta);Oa.unshift({value:"",label:"全部"});for(var Na=0,Pa=Oa.length;Na<Pa;Na++){var Ca=Oa[Na].children;if(Ca&&Ca.length){Ca.unshift({value:"",label:"全部"});for(var Aa=0,Fa=Ca.length;Aa<Fa;Aa++){var Ia=Ca[Aa].children;Ia&&Ia.length&&Ia.unshift({value:"",label:"全部"})}}}}])}))},f0e5:function(e,t,a){},f14f:function(e,t,a){},f269:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"票据类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择票据类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"票据代码",prop:"invCode"}},[a("el-input",{attrs:{placeholder:"请输入票据代码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invCode,callback:function(t){e.$set(e.queryParams,"invCode",t)},expression:"queryParams.invCode"}})],1),a("el-form-item",{attrs:{label:"票据号码",prop:"invNo"}},[a("el-input",{attrs:{placeholder:"请输入票据号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invNo,callback:function(t){e.$set(e.queryParams,"invNo",t)},expression:"queryParams.invNo"}})],1),a("el-form-item",{attrs:{label:"票据日期",prop:"invDate"}},[a("el-input",{attrs:{placeholder:"请输入票据日期",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.invDate,callback:function(t){e.$set(e.queryParams,"invDate",t)},expression:"queryParams.invDate"}})],1),a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.queryParams.fileId,callback:function(t){e.$set(e.queryParams,"fileId",t)},expression:"queryParams.fileId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:"报销状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择报销状态",clearable:"",size:"small"},model:{value:e.queryParams.reimStatus,callback:function(t){e.$set(e.queryParams,"reimStatus",t)},expression:"queryParams.reimStatus"}},e._l(e.reimStatusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"凭证号",prop:"voucherNo"}},[a("el-input",{attrs:{placeholder:"请输入凭证号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherNo,callback:function(t){e.$set(e.queryParams,"voucherNo",t)},expression:"queryParams.voucherNo"}})],1),a("el-form-item",{attrs:{label:"凭证类型",prop:"voucherType"}},[a("el-input",{attrs:{placeholder:"请输入凭证类型",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherType,callback:function(t){e.$set(e.queryParams,"voucherType",t)},expression:"queryParams.voucherType"}})],1),a("el-form-item",{attrs:{label:"凭证日期",prop:"voucherDate"}},[a("el-input",{attrs:{placeholder:"请输入凭证日期",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.voucherDate,callback:function(t){e.$set(e.queryParams,"voucherDate",t)},expression:"queryParams.voucherDate"}})],1),a("el-form-item",{attrs:{label:"录入人",prop:"ext1"}},[a("el-input",{attrs:{placeholder:"请输入录入人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.ext1,callback:function(t){e.$set(e.queryParams,"ext1",t)},expression:"queryParams.ext1"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["ticket:personalOther:exportStatistics"],expression:"['ticket:personalOther:exportStatistics']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"personalOtherMainTable",attrs:{data:e.personalOtherList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,"sort-change":e.changeTableSort}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["invType"==t.prop?a("span",[e._v(" "+e._s(e.invTypeFormat(n.row))+" ")]):"reimStatus"==t.prop?a("span",[e._v(" "+e._s(e.reimStatusFormat(n.row))+" ")]):"uploadTime"==t.prop?a("span",[e._v(" "+e._s(e.parseTime(n.row.uploadTime,"{y}-{m}-{d}"))+" ")]):"dataSource"==t.prop?a("span",[e._v(" "+e._s(e.dataSourceFormat(n.row))+" ")]):e.dataJsonFieldArr.includes(t.prop)?a("span",[e._v(" "+e._s(e.dataJsonFieldFormat(n.row,t.prop))+" ")]):"fileName"==t.prop?a("span",[e._v(" "+e._s(e.fileOptionsFormat(n.row))+" ")]):a("span",[e._v(" "+e._s(n.row[t.prop])+" ")])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{display:"inline-block","margin-left":"10px!important"},attrs:{size:"mini",type:"text",icon:"el-icon-picture-outline"},on:{click:function(a){return e.handleOriginImageShow(t.row)}}},[e._v("查看")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"发票原图",visible:e.originImageOpen,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.originImageOpen=t},close:e.imageDialogClose}},[a("div",{staticStyle:{overflow:"hidden",height:"60vh",position:"relative"}},[e.currOriginImageUrl&&"pdf"==e.currOriginImageUrl.split(".").pop().toLowerCase()?[a("iframe",{staticStyle:{height:"60vh",width:"100%"},attrs:{src:e.currOriginImageUrl}})]:[a("img",{ref:"previewImg",staticStyle:{position:"relative"},attrs:{id:"originImage",src:e.currOriginImageUrl,draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),e.currOriginImageUrl&&"pdf"!=e.currOriginImageUrl.split(".").pop().toLowerCase()?a("div",{staticClass:"public-img-operation"},[a("div",{on:{click:function(t){return e.restoreImg("previewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("previewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")]),a("div",{on:{click:function(t){return e.downloadImg("previewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("previewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]):e._e()]),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:e.isUpdate&&e.form.fileUrl?"1200px":"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.manualDialogClose}},[a("div",{staticStyle:{display:"flex"}},[a("el-form",{ref:"form",staticStyle:{flex:"1",overflow:"auto"},attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"票据类型"}},[a("el-select",{attrs:{placeholder:"请选择票据类型",disabled:e.isUpdate},on:{change:e.invTypeChange},model:{value:e.form.invType,callback:function(t){e.$set(e.form,"invType",t)},expression:"form.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("div",{staticStyle:{"max-height":"60vh",overflow:"auto"}},[e._l(e.InputField.field,(function(t,n){return a("el-form-item",{key:n,attrs:{label:e.InputField.name[n],prop:t}},["invDate"==t?[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:""},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}})]:[a("el-input",{attrs:{placeholder:"",clearable:"",size:"small"},model:{value:e.form[t],callback:function(a){e.$set(e.form,t,a)},expression:"form[item]"}})]],2)})),e.InputField.field?a("el-form-item",{attrs:{label:"所属票夹",prop:"fileId"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.fileId,callback:function(t){e.$set(e.form,"fileId",t)},expression:"form.fileId"}},e._l(e.fileOptions,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.fileName,value:e.id}})})),1)],1):e._e()],2)],1),e.isUpdate&&e.form.fileUrl?a("div",{staticClass:"public-update-right-div"},[a("div",{staticStyle:{flex:"1",overflow:"hidden",border:"2px dashed #ccc",padding:"10px"}},[e.form.fileUrl&&"pdf"==e.form.fileUrl.split(".").pop().toLowerCase()?[a("div",{staticStyle:{width:"100%",position:"relative"},attrs:{draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}},[a("pdf",{ref:"pdf",staticStyle:{width:"100%"},attrs:{src:e.pdfUrldata}})],1)]:[a("img",{ref:"updatePreviewImg",class:[{"medium-zoom-image--opened":e.zoomOverlay}],staticStyle:{width:"100%",position:"relative"},attrs:{src:e.form.fileUrl,id:"zoomImg",draggable:"false"},on:{mousewheel:function(t){return e.zoomImg(t)},mousedown:function(t){return e.dragImg(t)}}})]],2),a("div",{staticClass:"public-img-operation2"},[a("div",{staticClass:"public-img-left-operation2"},[a("div",{on:{click:function(t){return e.restoreImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-c-scale-to-original"}),e._v("还原")]),a("div",{on:{click:function(t){return e.leftRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-left"}),e._v("左旋转")]),a("div",{on:{click:function(t){return e.rightRotationImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v("右旋转")])]),a("div",{staticClass:"public-img-right-operation2"},[a("div",{on:{click:function(t){return e.downloadImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-download"}),e._v("下载")]),e.currOperationRow.fileUrl&&"pdf"==e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?[a("div",{on:{click:function(t){return e.printPdf("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]:[a("div",{directives:[{name:"print",rawName:"v-print",value:e.printObj,expression:"printObj"}],on:{click:function(t){return e.printImg("updatePreviewImg")}}},[a("i",{staticClass:"el-icon-printer"}),e._v("打印")])]],2)])]):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.isUploading},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)]),e.isPrint&&e.currOperationRow&&"pdf"!=e.currOperationRow.fileUrl.split(".").pop().toLocaleLowerCase()?a("div",{attrs:{id:"print-img-template"}},[a("img",{staticStyle:{position:"relative",width:"100%"},attrs:{src:e.currOperationRow.fileUrl}})]):e._e(),a("iframe",{staticStyle:{height:"60vh",width:"100%",position:"fixed",bottom:"-1000px"},attrs:{id:"printIFrame",src:e.getLocalhostIFrame(e.currOperationRow.fileUrl)}}),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("b0c0"),a("d81d"),a("b64b"),a("ac1f"),a("5319"),a("e9c4"),a("d3b7"),a("25f0"),a("b775"));function l(e){return Object(r["a"])({url:"/ticket/personalOther/listStatistics",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/ticket/personalOther/"+e,method:"get"})}function c(e){return Object(r["a"])({url:"/ticket/personalOther",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/ticket/personalOther",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/ticket/personalOther/deletePersonalInvoice",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/ticket/personalOther/exportStatistics",method:"post",data:e,responseType:"blob"})}var h=a("4c80"),m=a("858e"),f=a("ed08"),b=a("5f87"),g=a("c38a"),v=a("16de"),y={name:"PersonalOther",components:{pdf:m["a"]},data:function(){return{isUploading:!1,imageUploadFileList:[],showUploadFileProgress:!1,percentage:0,uploadStatus:null,images:{ofdIcon:a("086e"),pdfIcon:a("55fc")},imageUpload:{open:!1,title:"图片识别(最多选择9个文件)",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(b["a"])()},url:"/prod-api/income/zzsinvoice/uploadFile"},base64Arr:{},uploadResult:{},pdfUrldata:null,zoomOverlay:!1,fileOptions:[],functionName:"",showProgress:!1,loadingTime:null,pageSizes:[],tableHeight:null,loading:!0,ids:[],rows:[],single:!0,multiple:!0,showSearch:!0,total:0,personalOtherList:[],title:"",open:!1,invTypeOptions:[],dataSourceOptions:[],reimStatusOptions:[],queryParams:{pageNum:1,pageSize:500,invType:null,invCode:null,invNo:null,invDate:null,fileId:null,reimStatus:null,voucherNo:null,voucherType:null,voucherDate:null,ext1:null},form:{fileId:null,fileUrl:null},rules:{},InputField:{},columnsArr:[{label:"票据类型",prop:"invType",align:"center",show:!0,width:180,columnSort:0},{label:"报销状态",prop:"reimStatus",align:"center",show:!0,width:120,columnSort:4},{label:"凭证号",prop:"voucherNo",align:"center",show:!0,width:220,columnSort:4},{label:"凭证类型",prop:"voucherType",align:"center",show:!0,width:100,columnSort:4},{label:"凭证日期",prop:"voucherDate",align:"center",show:!0,width:150,columnSort:4},{label:"票据号码",prop:"invNo",align:"center",show:!0,width:120,columnSort:1},{label:"票据代码",prop:"invCode",align:"center",show:!0,width:180,columnSort:2},{label:"票据日期",prop:"invDate",align:"center",show:!0,width:180,columnSort:3},{label:"价税合计",prop:"totalAmount",align:"center",show:!0,width:150,columnSort:4},{label:"数据来源",prop:"dataSource",align:"center",show:!0,width:220,columnSort:6},{label:"发票所在地",prop:"location",align:"center",show:!0,width:220,columnSort:6},{label:"出发地",prop:"departureStation",align:"center",show:!0,width:220,columnSort:6},{label:"目的地",prop:"arrivalStation",align:"center",show:!0,width:220,columnSort:6},{label:"火车票ID",prop:"ticketId",align:"center",show:!0,width:220,columnSort:6},{label:"票价",prop:"fare",align:"center",show:!0,width:220,columnSort:6},{label:"民航发展基金",prop:"civilAviationFund",align:"center",show:!0,width:220,columnSort:6},{label:"燃油附加费",prop:"fuelSurcharge",align:"center",show:!0,width:220,columnSort:6},{label:"其他税费",prop:"otherTaxes",align:"center",show:!0,width:220,columnSort:6},{label:"印刷序号",prop:"serialNo",align:"center",show:!0,width:220,columnSort:6},{label:"乘车时间",prop:"boardingTime",align:"center",show:!0,width:220,columnSort:6},{label:"购方名称(旅客姓名)",prop:"buyName",align:"center",show:!0,width:220,columnSort:6},{label:"购方税号(身份证号)",prop:"buyTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"销方名称",prop:"sellName",align:"center",show:!0,width:220,columnSort:6},{label:"销方税号",prop:"sellTaxNo",align:"center",show:!0,width:220,columnSort:6},{label:"未税金额",prop:"totalWithoutTaxMoney",align:"center",show:!0,width:220,columnSort:6},{label:"录入人",prop:"ext1",align:"center",show:!0,width:180,columnSort:6},{label:"所属发票夹",prop:"fileName",align:"center",show:!0,width:220,columnSort:7}],dataJsonFieldArr:["location","departureStation","arrivalStation","ticketId","fare","civilAviationFund","fuelSurcharge","otherTaxes","serialNo","boardingTime","buyName","buyTaxNo","sellName","sellTaxNo","totalWithoutTaxMoney"],sortParam:{column:"",columnOrder:""},isUpdate:!1,originImageOpen:!1,currOriginImageUrl:null,aspectRatio:null,currOperationRow:{},imgShowParams:{deg:0,scale:1},isPrint:!1,printObj:{id:"print-img-template",popTitle:"",extraHead:'<meta http-equiv="Content-Language"content="zh-cn"/>'},operationIndex:0,operationRowArr:[]}},computed:{judgeFileUrl:function(){return function(e){return"pdf"==e.name.split(".").pop()?this.images.pdfIcon:"ofd"==e.name.split(".").pop()?this.images.ofdIcon:e.url}},progressStatus:function(){return void 0==this.uploadStatus?null:this.uploadStatus?"success":"exception"}},created:function(){var e=this;this.getList(),this.getDicts("other_ticket").then((function(t){e.invTypeOptions=t.data})),this.getDicts("other_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("reim_status").then((function(t){e.reimStatusOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),Object(v["h"])().then((function(t){e.fileOptions=t.rows,e.form.fileId=e.fileOptions[0].id}))},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},methods:{getList:function(){var e=this;this.loading=!0;var t=Object.assign(Object(f["e"])(this.queryParams),Object(f["e"])(this.sortParam));l(t).then((function(t){e.personalOtherList=t.rows,e.total=t.total,e.loading=!1}))},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},dataSourceFormat:function(e,t){return this.selectDictLabel(this.dataSourceOptions,e.dataSource)},reimStatusFormat:function(e,t){return this.selectDictLabel(this.reimStatusOptions,e.reimStatus)},fileOptionsFormat:function(e){for(var t=0,a=this.fileOptions.length;t<a;t++)if(this.fileOptions[t].id==e.fileId)return this.fileOptions[t].fileName;return"未知"},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,invType:null,invCode:null,invNo:null,invDate:null,totalAmount:null,totalAmountWithoutTax:null,totalTaxAmount:null,totalMoneyUp:null,uniqueStr:null,uploadTime:null,fileUrl:null,dataJson:null,dataSource:null,deptId:null,createBy:null,updateBy:null,createTime:null,updateTime:null,fileId:this.fileOptions[0].id},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=Object(f["e"])(e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加其他票据"},handleManual:function(){this.isUpdate=!1,this.open=!0,this.title="添加其他票据"},handleImage:function(){this.$refs.uploadFileDialog.uploadFileDialogShow()},discernFileResult:function(e){this.$refs.fileAnalysis.fillFileAnalysis(e)},updateInvoiceTable:function(){this.getList()},handleUpdate:function(e){var t=this;this.isUpdate=!0,void 0!=e.id?this.currOperationRow=e:this.currOperationRow=this.rows[0];var a=e.id||this.ids;this.getEl(e.id?e.invType:this.rows[0].invType),s(a).then((function(e){var a;t.form=Object(f["e"])(e.data);var n=JSON.parse(e.data.dataJson);for(var i in n)t.$set(t.form,i,n[i]);t.open=!0,t.title="修改其他票据","pdf"==(null===(a=t.form.fileUrl)||void 0===a?void 0:a.split(".").pop().toLowerCase())&&t.pdfPreviewUrl(t.form.fileUrl)}))},pdfPreviewUrl:function(e){var t=this;if(!e)return"";var a="https://unpkg.com/pdfjs-dist@2.0.943/cmaps/",n=m["a"].createLoadingTask({url:"/einvoices"+e.replace("https://vat.zzhcn.net",""),withCredentials:!1,cMapUrl:a,cMapPacked:!0});n.promise.then((function(e){t.pdfUrldata=n})).catch((function(){return t.msgError("加载失败"),""}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t)if(null!=e.form.id){e.form.totalAmount=e.form.totalMoney;var a=Object(f["e"])(e.form);delete a.dataJson,a.dataJson=JSON.stringify(e.form),a.data=JSON.stringify(e.form),u(a).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}else{var n={};for(var i in e.form.totalAmount=e.form.totalMoney,e.form)n[i]=e.form[i];e.form.dataJson=JSON.stringify(n),e.form.data=JSON.stringify(n),e.form.dataSource="01",e.form.fileUrl=e.uploadResult.fileUrl,c(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))}}))},handleDelete:function(){var e=this;this.$confirm('<span style="word-break: break-all;">是否确认删除所选发票?</span>',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(g["g"])(100,"删除中",e),e.operationIndex=0,e.operationRowArr=e.rows,e.deleteInvoiceLogic()}))},deleteInvoiceLogic:function(){var e=this;this.operationIndex++;var t={fileId:this.operationRowArr[this.operationIndex-1].fileId,id:this.operationRowArr[this.operationIndex-1].id};d(t).then((function(t){200==t.code?e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除成功"):e.msgSuccess("发票号码："+e.operationRowArr[e.operationIndex-1].invNo+"删除失败，"+t.msg),e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())})).catch((function(){e.operationIndex<e.operationRowArr.length?e.deleteInvoiceLogic():(e.operationIndex=0,e.operationRowArr=[],e.showProgress=!1,clearInterval(e.loadingTime),e.getList())}))},handleExport:function(){var e=this,t=Object(f["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出所有其他发票（个人）数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(g["g"])(10,"导出中",e),p(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"其他发票（个人）.xls",e)})).catch((function(){}))},handleOriginImageShow:function(e){if(e.fileUrl){if(this.currOperationRow=e,this.currOriginImageUrl=e.fileUrl,this.originImageOpen=!0,"pdf"!=this.currOriginImageUrl.split(".").pop().toLowerCase()){var t=this,a=new Image;a.src=t.currOriginImageUrl,a.onload=function(){var e=a.height,n=a.width,i=.6*document.body.clientHeight,o=1e3;n/e>o/i?(t.$refs.previewImg.style.width=o+"px",t.$refs.previewImg.style.height="auto",this.aspectRatio=!0):(t.$refs.previewImg.style.width="auto",t.$refs.previewImg.style.height=i+"px",this.aspectRatio=!1)}}}else this.msgError("当前发票不存在原图")},imageDialogClose:function(){var e=document.getElementById("originImage");e&&(e.style.top=0,e.style.left=0)},manualDialogClose:function(){this.InputField={},this.form.invType=null,this.imageUploadFileList=[];var e=document.getElementById("zoomImg");e&&(e.style.top=0,e.style.left=0),this.currOperationRow={}},zoomImg:function(e){var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);var a=e.currentTarget,n=a.clientWidth;t>0?(a.style.width=1.1*n+"px",a.style.height="auto"):t<0&&n>100&&(a.style.width=.9*n+"px",a.style.height="auto")},dragImg:function(e){var t=e.currentTarget,a=document.body.clientWidth,n=document.body.clientHeight,i=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop;document.onmousemove=function(e){var r=0,l=0;r=e.clientX>=a?a-i:e.clientX<=0?0-i:e.clientX-i,l=e.clientY>=n?n-o:e.clientY<=0?0-o:e.clientY-o,t.style.left=r+"px",t.style.top=l+"px",t.style.cursor="crosshair"},document.onmouseup=function(e){t.style.cursor="pointer",document.onmousemove=null,document.onmouseup=null}},imageUploadFileChange:function(e,t){var a=this;console.log(e,t),this.imageUploadFileList=t,Object(f["g"])(e.raw||e).then((function(t){var n=Object(f["p"])(t.split(",")[0]);a.base64Arr[e.uid]=n+"_"+t.split(",")[1],a.showUploadFileProgress=!0;var i=1e3,r=a;r.percentage=0;var l=setInterval((function(){r.percentage++,r.percentage>=99?clearInterval(l):r.percentage>80?i=2e3:r.percentage>50&&(i=1500)}),i),s=new FormData;s.append("baseArray",n+"_"+t.split(",")[1]),r.isUploading=!0,Object(h["d"])(s).then((function(e){if(r.isUploading=!1,clearInterval(l),r.percentage=100,200==e.code?(r.uploadStatus=!0,r.msgSuccess("发票上传成功")):(r.uploadStatus=!1,r.msgError(e.msg)),"[object Array]"==Object.prototype.toString.call(e.data)){if(r.uploadResult=e.data[0],r.uploadResult.invType==r.form.invType){var t=e.data[0],a=JSON.parse(t.data);Object.assign(t,a);var n,i=Object(o["a"])(r.InputField.field);try{for(i.s();!(n=i.n()).done;){var s=n.value;t[s]&&(r.form[s]=t[s])}}catch(c){i.e(c)}finally{i.f()}}}else r.uploadResult=e.data;r.form["fileUrl"]=r.uploadResult.fileUrl,r.uploadResult.fileUrl&&r.$refs.form.clearValidate("fileUrl")})).catch((function(){r.isUploading=!1}))}))},previewRemove:function(e){this.$refs.imageUpload.handleRemove(e),this.showUploadFileProgress=!1,this.percentage=0,this.uploadStatus=null},handleRemove:function(e,t){this.imageUploadFileList=t,delete this.base64Arr[e.uid]},invTypeChange:function(){this.getEl(this.form.invType)},getEl:function(e){void 0!=this.$refs.form&&this.$refs.form.clearValidate();for(var t=Object(f["i"])(e),a={invType:this.form.invType},n=0,i=t.field.length;n<i;n++)a[t.field[n]]=null;a.fileId=this.form.fileId,a.fileUrl=this.form.fileUrl,this.form=Object(f["e"])(a),this.InputField=Object(f["e"])(t);for(var o=0,r=t.OrRequired.length;o<r;o++)if("1"==t.OrRequired[o]){var l=t.name[o]+"不能为空";"01"==e||"08"==e||"03"==e||"04"==e||"10"==e||"11"==e||"15"==e?"invCode"==t.field[o]?this.rules[t.field[o]]=[{pattern:/^(\d{10}|\d{12})$/,message:"请输入正确的发票代码",trigger:"blur"},{required:!0,message:"发票代码不能为空",trigger:["blur","change"]}]:"invNo"==t.field[o]&&(this.rules[t.field[o]]=[{pattern:/^\d{8}$/,message:"请输入正确的发票号码",trigger:"blur"},{required:!0,message:"发票号码不能为空",trigger:["blur","change"]}]):"totalAmount"==t.field[o]||"totalAmountWithoutTax"==t.field[o]||"totalTaxAmount"==t.field[o]||"totalAmount"==t.field[o]?this.rules[t.field[o]]=[{pattern:/^-?[0-9]+(\.[0-9]+)?$/,message:"请输入正确的数字",trigger:["blur","change"]},{required:!0,message:"金额不能为空",trigger:["blur","change"]}]:this.rules[t.field[o]]=[{required:!0,message:l,trigger:["blur","change"]}]}this.rules["fileUrl"]=[{required:!0,message:"发票文件不能为空",trigger:["blur","change"]}],this.rules["fileId"]=[{required:!0,message:"所属票夹不能为空",trigger:["blur","change"]}]},restoreImg:function(e){this.imgShowParams.deg=0,this.imgShowParams.scale=1,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")",this.$refs[e].style.top="0",this.$refs[e].style.left="0","previewImg"==e?this.aspectRatio?(this.$refs[e].style.width="600px",this.$refs[e].style.height="auto"):(this.$refs[e].style.width="auto",this.$refs[e].style.height=.6*document.body.clientHeight+"px"):this.$refs[e].style.width="100%"},leftRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg-90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},rightRotationImg:function(e){this.imgShowParams.deg=(this.imgShowParams.deg+90)%360,this.$refs[e].style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")"},enlargeImg:function(){this.imgShowParams.scale>=5?this.msgError("放大倍数最大为5倍"):(this.imgShowParams.scale=this.imgShowParams.scale+.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},narrowImg:function(){this.imgShowParams.scale<=.2?this.msgError("缩小倍数最小为0.2倍"):(this.imgShowParams.scale=this.imgShowParams.scale-.1,this.$refs.previewImg.style.transform="rotate("+this.imgShowParams.deg+"deg) scale("+this.imgShowParams.scale+")")},downloadImg:function(){var e=null;e=this.currOperationRow?this.currOperationRow.fileUrl:this.rows[0].fileUrl,Object(f["h"])("/einvoices"+e.replace("https://vat.zzhcn.net",""),"",e.split(".").pop())},printImg:function(){var e=this;this.isPrint=!0,setTimeout((function(){e.isPrint=!1}),500)},printPdf:function(){document.getElementById("printIFrame").contentWindow.print()},getLocalhostIFrame:function(e){return e?"/einvoices"+e.replace("https://vat.zzhcn.net",""):""},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.personalOtherMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.personalOtherList,"personalOtherMainTable")},changeTableSort:function(e){var t=e.column,a=e.prop,n=e.order;console.log(t+"==="+a+"==="+n),this.sortParam.column=a.replace(/([A-Z])/g,"_$1").toLowerCase(),"ascending"==n?this.sortParam.columnOrder="ASC":"descending"==n?this.sortParam.columnOrder="DESC":(this.sortParam.columnOrder=null,this.sortParam.column=null),this.getList()},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},dataJsonFieldFormat:function(e,t){var a="";return e.dataJson?(a=JSON.parse(e.dataJson),a[t]?"":a[t]):""}}},_=y,x=(a("cf2a"),a("2877")),w=Object(x["a"])(_,n,i,!1,null,"ff9c6b18",null);t["default"]=w.exports},f3f6:function(e,t,a){},f40a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLoading,expression:"mainLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"客户编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入客户编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入客户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"税号",prop:"taxNo"}},[a("el-input",{attrs:{placeholder:"请输入税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxNo,callback:function(t){e.$set(e.queryParams,"taxNo",t)},expression:"queryParams.taxNo"}})],1),a("el-form-item",{attrs:{label:"地址电话",prop:"addrTel"}},[a("el-input",{attrs:{placeholder:"请输入地址电话",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.addrTel,callback:function(t){e.$set(e.queryParams,"addrTel",t)},expression:"queryParams.addrTel"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"defaultInvoiceType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.defaultInvoiceType,callback:function(t){e.$set(e.queryParams,"defaultInvoiceType",t)},expression:"queryParams.defaultInvoiceType"}},e._l(e.defaultInvoiceTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否允许自动拆分",prop:"splitFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否允许自动拆分",clearable:"",size:"small"},model:{value:e.queryParams.splitFlag,callback:function(t){e.$set(e.queryParams,"splitFlag",t)},expression:"queryParams.splitFlag"}},e._l(e.splitFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否允许合并",prop:"mergeFlag"}},[a("el-select",{attrs:{placeholder:"请选择是否允许合并",clearable:"",size:"small"},model:{value:e.queryParams.mergeFlag,callback:function(t){e.$set(e.queryParams,"mergeFlag",t)},expression:"queryParams.mergeFlag"}},e._l(e.mergeFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"是否允许自动推送",prop:"autoPush"}},[a("el-select",{attrs:{placeholder:"请选择是否允许自动推送",clearable:"",size:"small"},model:{value:e.queryParams.autoPush,callback:function(t){e.$set(e.queryParams,"autoPush",t)},expression:"queryParams.autoPush"}},e._l(e.autoPushOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",{attrs:{label:"修改人名称",prop:"updateByName"}},[a("el-input",{attrs:{placeholder:"请输入修改人",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.updateByName,callback:function(t){e.$set(e.queryParams,"updateByName",t)},expression:"queryParams.updateByName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:customer:add"],expression:"['output:customer:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:customer:edit"],expression:"['output:customer:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:customer:remove"],expression:"['output:customer:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:customer:export"],expression:"['output:customer:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("el-col",[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:customer:import"],expression:"['output:customer:import']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleImport}},[e._v("导入 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch,columnsArr:e.columnsArr},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList,tableReload:e.tableReload}})],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xml, .xlsx, .xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"on-change":e.handleChange,"on-remove":e.handleChange,"auto-upload":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xml”、“xls”或“xlsx”格式文件！")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"mainTable",attrs:{data:e.customerList,height:e.tableHeight,"use-virtual":"","row-height":40,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow,select:e.checkboxSelect}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return["splitFlag"==t.prop?a("span",[e._v(e._s(e.splitFlagFormat(n.row)))]):"name"==t.prop?a("span",{staticStyle:{color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(t){return e.showCustomerInfo(n.row)}}},[e._v(e._s(n.row.name))]):"mergeFlag"==t.prop?a("span",[e._v(e._s(e.mergeFlagFormat(n.row)))]):"autoPush"==t.prop?a("span",[e._v(e._s(e.autoPushFormat(n.row)))]):"defaultInvoiceType"==t.prop?a("span",[e._v(e._s(e.defaultInvoiceTypeFormat(n.row)))]):"roundingNumber"==t.prop?a("span",[e._v(e._s(e.roundingNumberFormat(n.row)))]):a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:customer:edit"],expression:"['output:customer:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],ref:"pagingDom",attrs:{total:e.total,page:e.queryParams.pageNum,"page-sizes":e.pageSizes,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSizes":function(t){e.pageSizes=t},"update:page-sizes":function(t){e.pageSizes=t},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.customerDialogClose}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入客户名称",maxlength:50,clearable:"",readonly:e.infoReadonly},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税号",prop:"taxNo"}},[a("el-input",{attrs:{placeholder:"请输入税号",maxlength:20,clearable:"",readonly:e.infoReadonly},model:{value:e.form.taxNo,callback:function(t){e.$set(e.form,"taxNo","string"===typeof t?t.trim():t)},expression:"form.taxNo"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"客户编码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入客户编码",maxlength:50,clearable:"",readonly:e.infoReadonly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"===typeof t?t.trim():t)},expression:"form.code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:100,clearable:"",readonly:e.infoReadonly},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱2",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱2",maxlength:100,clearable:"",readonly:e.infoReadonly},model:{value:e.form.email2,callback:function(t){e.$set(e.form,"email2","string"===typeof t?t.trim():t)},expression:"form.email2"}})],1)],1),e._l(e.defaultInvoiceTypeOptions,(function(t){return a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:t.dictLabel,prop:"checkAmount"+t.dictValue,rules:[{pattern:/\d+(\.\d+)?$/,message:"金额只能是数字",trigger:"blur"}]}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入不含税限额",clearable:"",readonly:e.infoReadonly},on:{input:function(t){return e.onInput()}},model:{value:e.form["checkAmount"+t.dictValue],callback:function(a){e.$set(e.form,"checkAmount"+t.dictValue,a)},expression:"form['checkAmount' + d.dictValue]"}})],1)],1)})),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址电话",prop:"addrTel"}},[a("el-input",{attrs:{placeholder:"请输入地址电话",type:"textarea",clearable:"",maxlength:200,readonly:e.infoReadonly},model:{value:e.form.addrTel,callback:function(t){e.$set(e.form,"addrTel",t)},expression:"form.addrTel"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"开户行及账号",prop:"bankAccount"}},[a("el-input",{attrs:{placeholder:"请输入开户行及账号",clearable:"",type:"textarea",maxlength:100,readonly:e.infoReadonly},model:{value:e.form.bankAccount,callback:function(t){e.$set(e.form,"bankAccount",t)},expression:"form.bankAccount"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:"",type:"textarea",maxlength:255,readonly:e.infoReadonly},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否允许拆分"}},[a("el-select",{attrs:{placeholder:"请选择是否允许拆分",disabled:e.infoReadonly},model:{value:e.form.splitFlag,callback:function(t){e.$set(e.form,"splitFlag",t)},expression:"form.splitFlag"}},e._l(e.splitFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否允许合并"}},[a("el-select",{attrs:{placeholder:"请选择是否允许合并",disabled:e.infoReadonly},model:{value:e.form.mergeFlag,callback:function(t){e.$set(e.form,"mergeFlag",t)},expression:"form.mergeFlag"}},e._l(e.mergeFlagOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否自动推送"}},[a("el-select",{attrs:{placeholder:"请选择是否允许自动推送",disabled:e.infoReadonly},model:{value:e.form.autoPush,callback:function(t){e.$set(e.form,"autoPush",t)},expression:"form.autoPush"}},e._l(e.autoPushOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"默认发票类型"}},[a("el-select",{attrs:{placeholder:"请选择默认发票类型",value:"0",disabled:e.infoReadonly},on:{change:e.invoiceTypeChange},model:{value:e.form.defaultInvoiceType,callback:function(t){e.$set(e.form,"defaultInvoiceType",t)},expression:"form.defaultInvoiceType"}},e._l(e.defaultInvoiceTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1)],2)],1),e.infoReadonly?e._e():a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e()],1)},i=[],o=a("b85c"),r=(a("d81d"),a("e9c4"),a("7a18")),l=a("5f87"),s=a("c10b"),c=a("7b93"),u=a("ed08"),d={name:"Customer",components:{MyElProgress:c["a"]},props:{useType:{type:String,default:"owner"}},data:function(){return{module:"customer",tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,templateOptions:[],multiple:!0,showSearch:!0,total:0,customerList:[],title:"",open:!1,splitFlagOptions:[],mergeFlagOptions:[],autoPushOptions:[],defaultInvoiceTypeOptions:[],queryParams:{pageNum:1,pageSize:500,name:null,taxNo:null,addrTel:null,code:null,defaultInvoiceType:null,splitFlag:null,mergeFlag:null,autoPush:null,updateByName:null},form:{},upload:{fileList:[],open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(l["a"])()},url:"/prod-api/output/customer/importData"},rules:{name:[{required:!0,message:"客户名称不能为空",trigger:"blur"}],code:[{required:!0,message:"客户编码不能为空",trigger:"blur"}],taxNo:[{required:!1,message:"客户税号不能为空",trigger:"blur"},{pattern:/^[A-Z0-9]+$/,message:"税号校验错误",trigger:"blur"}],addrTel:[{required:!1,message:"地址电话不能为空",trigger:"blur"}],bankAccount:[{required:!1,message:"开户行及账号不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}]},columnsArr:[{label:"客户名称",prop:"name",align:"center",show:!0,width:"",columnSort:0},{label:"税号",prop:"taxNo",align:"center",show:!0,width:"",columnSort:1},{label:"客户编码",prop:"code",align:"center",show:!0,width:"",columnSort:2},{label:"地址电话",prop:"addrTel",align:"center",show:!0,width:"",columnSort:3},{label:"开户行及账号",prop:"bankAccount",align:"center",show:!0,width:"",columnSort:4},{label:"备注",prop:"remark",align:"center",show:!0,width:"",columnSort:5},{label:"是否允许拆分",prop:"splitFlag",align:"center",show:!0,width:"",columnSort:6},{label:"是否允许合并",prop:"mergeFlag",align:"center",show:!0,width:"",columnSort:7},{label:"是否允许自动推送",prop:"autoPush",align:"center",show:!0,width:"",columnSort:8},{label:"默认发票类型",prop:"defaultInvoiceType",align:"center",show:!0,width:"",columnSort:9},{label:"最后操作人",prop:"ext1",align:"center",show:!0,width:"",columnSort:9},{label:"最后操作时间",prop:"updateTime",align:"center",show:!0,width:"",columnSort:9}],infoReadonly:!1,checkboxClick:!1,mainLoading:!1,roundingNumberOptions:[],showProgress:!1,functionName:"",loadingTime:null}},created:function(){var e=this;this.getList(),this.getDicts("sys_yes_no_num").then((function(t){e.mergeFlagOptions=t.data,e.autoPushOptions=t.data,e.splitFlagOptions=t.data,e.roundingNumberOptions=t.data})),this.getDicts("template_download").then((function(t){e.templateOptions=t.data})),this.getDicts("output_inv_type").then((function(t){e.defaultInvoiceTypeOptions=t.data})),this.getDicts("sys_page_sizes").then((function(t){console.log(t);var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}}));var t={module:this.module};Object(s["b"])(t).then((function(t){e.columnsArr=t.data;for(var a=0;a<e.columnsArr.length;a++)e.columnsArr[a].columnSort=a}))},mounted:function(){var e=this;"owner"==this.useType&&(this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()})},activated:function(){var e=this;window.onresize=function(){"owner"==e.useType&&(e.tableHeight=e.calcTableHeight())}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){"owner"==a.useType&&(a.tableHeight=a.calcTableHeight())}))}},methods:{tableReload:function(e){var t=this;this.columnsArr=e,this.$nextTick((function(){t.$refs.mainTable.doLayout()}))},handleImport:function(){this.upload.title="客户资料导入",this.upload.open=!0},handleFileUploadProgress:function(e,t,a){this.upload.isUploading=!0},handleFileSuccess:function(e,t,a){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.mainLoading=!1,this.getList()},submitFileForm:function(){0==this.upload.fileList.length&&this.msgError("请选择要导入的文件"),this.$refs.upload.submit(),this.upload.open=!1,this.mainLoading=!0},handleChange:function(e,t){this.upload.fileList=t},getList:function(){var e=this;this.loading=!0,Object(r["f"])(this.queryParams).then((function(t){e.customerList=t.rows,e.total=t.total,e.loading=!1}))},onInput:function(){this.$forceUpdate()},splitFlagFormat:function(e,t){return this.selectDictLabel(this.splitFlagOptions,e.splitFlag)},mergeFlagFormat:function(e,t){return this.selectDictLabel(this.mergeFlagOptions,e.mergeFlag)},autoPushFormat:function(e,t){return this.selectDictLabel(this.autoPushOptions,e.autoPush)},defaultInvoiceTypeFormat:function(e,t){return this.selectDictLabel(this.defaultInvoiceTypeOptions,e.defaultInvoiceType)},roundingNumberFormat:function(e,t){return this.selectDictLabel(this.roundingNumberOptions,e.autoPush)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,code:null,name:null,taxNo:null,email:null,addrTel:null,bankAccount:null,remark:null,splitFlag:"1",mergeFlag:"1",autoPush:"1",defaultInvoiceType:"2"},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},importTemplate:function(){var e=this.selectDictLabel(this.templateOptions,"customerTemplate");document.location=e},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},handleAdd:function(){this.reset(),this.open=!0,this.title="添加客户资料"},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(r["d"])(a).then((function(e){t.form=e.data;for(var a=0;a<t.form.amountLimitDtos.length;a++)t.form["checkAmount"+t.form.amountLimitDtos[a].invType]=t.form.amountLimitDtos[a].limitAmount;t.open=!0,t.infoReadonly?t.title="查看客户资料":t.title="修改客户资料"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){e.form.code.length;for(var a=[],n=0;n<e.defaultInvoiceTypeOptions.length;n++){var i=e.defaultInvoiceTypeOptions[n].dictValue,o=e.form["checkAmount"+i];a.push({type:i,amount:o,bizType:"KHZL"})}e.form.limitAmount=JSON.stringify(a),null!=e.form.id?Object(r["h"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(r["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())}))}}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除客户资料编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.dynamicLoadingShow(10,"删除中"),Object(r["b"])(a)})).then((function(){t.showProgress=!1,clearInterval(t.loadingTime),t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=Object(u["e"])(this.queryParams);t.ids=this.ids,this.$confirm("是否确认导出?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.dynamicLoadingShow(10,"导出中"),Object(r["c"])(t)})).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),e.currencyDownload(t,"客户资料.xls",e)})).catch((function(){}))},currClickRow:function(e,t,a){console.log("这是行的点击事件");var n={row:e},i=[];i.push(n),this.$refs.mainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.customerList,"mainTable")},checkboxSelect:function(e,t){console.log("这是checkbox的点击事件"),this.selectMiddleRow(t,this.rows,this.customerList,"mainTable"),this.$store.state.app.shiftKeyDown&&(this.checkboxClick=!0)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.row_index=a},invoiceTypeChange:function(){"0"==this.form.defaultInvoiceType||"52"==this.form.defaultInvoiceType?(this.rules.taxNo[0].required=!0,this.rules.addrTel[0].required=!0,this.rules.bankAccount[0].required=!0):(this.rules.taxNo[0].required=!1,this.rules.addrTel[0].required=!1,this.rules.bankAccount[0].required=!1),this.$refs["form"].clearValidate()},showCustomerInfo:function(e){this.infoReadonly=!0,this.handleUpdate(e)},customerDialogClose:function(){this.infoReadonly=!1},dynamicLoadingShow:function(e,t){var a=this,n=this.ids.length;0==this.ids.length&&(n=this.total);var i=n*e/100,o=1;this.showProgress=!0,this.functionName=t,this.$nextTick((function(){a.$refs.myProgress.setProgressNum(1)})),this.loadingTime=setInterval((function(){o++,o<=99&&a.$refs.myProgress.progressGrow(o)}),i)}}},p=d,h=a("2877"),m=Object(h["a"])(p,n,i,!1,null,null,null);t["default"]=m.exports},f448:function(e,t,a){"use strict";a("49a2")},f4ef:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"税号",prop:"taxNo"}},[a("el-input",{attrs:{placeholder:"请输入税号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.taxNo,callback:function(t){e.$set(e.queryParams,"taxNo",t)},expression:"queryParams.taxNo"}})],1),a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{attrs:{placeholder:"请输入机器编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.machineNo,callback:function(t){e.$set(e.queryParams,"machineNo",t)},expression:"queryParams.machineNo"}})],1),a("el-form-item",{attrs:{label:"分机号",prop:"extNo"}},[a("el-input",{attrs:{placeholder:"请输入分机号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.extNo,callback:function(t){e.$set(e.queryParams,"extNo",t)},expression:"queryParams.extNo"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"invType"}},[a("el-select",{attrs:{placeholder:"请选择发票类型",clearable:"",size:"small"},model:{value:e.queryParams.invType,callback:function(t){e.$set(e.queryParams,"invType",t)},expression:"queryParams.invType"}},e._l(e.invTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:stock:add"],expression:"['output:stock:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleRefresh}},[e._v("刷新税盘")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["output:stock:export"],expression:"['output:stock:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.stockList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"纳税人识别号",align:"center",prop:"taxNo"}}),a("el-table-column",{attrs:{label:"机器编码",align:"center",prop:"machineNo"}}),a("el-table-column",{attrs:{label:"分机号",align:"center",prop:"extNo"}}),a("el-table-column",{attrs:{label:"发票余量",align:"center",prop:"taxNum"}}),a("el-table-column",{attrs:{label:"发票代码",align:"center",prop:"invCode"}}),a("el-table-column",{attrs:{label:"起始号码",align:"center",prop:"startInvNo"}}),a("el-table-column",{attrs:{label:"发票类型",align:"center",prop:"invType",formatter:e.invTypeFormat}}),a("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"updateTime"}}),a("el-table-column",{attrs:{label:"原因",align:"center",prop:"reason"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},i=[],o=(a("d81d"),a("b775"));function r(e){return Object(o["a"])({url:"/output/stock/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/output/stock/refresh",method:"get",params:e})}function s(e){return Object(o["a"])({url:"/output/stock/"+e,method:"get"})}function c(e){return Object(o["a"])({url:"/output/stock",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/output/stock",method:"put",data:e})}function d(e){return Object(o["a"])({url:"/output/stock/"+e,method:"delete"})}function p(e){return Object(o["a"])({url:"/output/stock/export",method:"get",params:e})}var h={name:"Stock",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,stockList:[],invTypeOptions:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,taxNo:null,machineNo:null,extNo:null,taxNum:null,invCode:null,startInvNo:null,invType:null,reason:null},form:{},rules:{}}},created:function(){var e=this;this.getList(),this.getDicts("output_inv_type").then((function(t){e.invTypeOptions=t.data}))},methods:{getList:function(){var e=this;this.loading=!0,r(this.queryParams).then((function(t){e.stockList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,taxNo:null,machineNo:null,extNo:null,taxNum:null,invCode:null,startInvNo:null,invType:null,updateTime:null,reason:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},invTypeFormat:function(e,t){return this.selectDictLabel(this.invTypeOptions,e.invType)},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleRefresh:function(){var e=this;this.loading=!0,l(this.queryParams).then((function(t){e.getList()}))},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;s(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改税盘库存"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?u(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):c(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$confirm('是否确认删除税盘库存编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有税盘库存数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return p(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))}}},m=h,f=a("2877"),b=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},f50f:function(e,t,a){},f657:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.projectLoading,expression:"projectLoading"}],staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:"small"}},[a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{model:{value:e.queryParams.fplx,callback:function(t){e.$set(e.queryParams,"fplx",t)},expression:"queryParams.fplx"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(Object.keys(e.invTypeOptions),(function(t){return a("el-option",{key:t,attrs:{label:e.invTypeOptions[t],value:t}})})),e._l(Object.keys(e.invTypeOptions),(function(t){return a("el-option",{key:t,attrs:{label:e.invTypeOptions[t],value:t}})}))],2)],1),a("el-form-item",{attrs:{label:"获取结果"}},[a("el-select",{model:{value:e.queryParams.flag,callback:function(t){e.$set(e.queryParams,"flag",t)},expression:"queryParams.flag"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),a("el-form-item",{attrs:{label:"重新申请"}},[a("el-select",{model:{value:e.queryParams.rerequest,callback:function(t){e.$set(e.queryParams,"rerequest",t)},expression:"queryParams.rerequest"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),a("el-form-item",{attrs:{label:"开票日期"}},[a("el-date-picker",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"开票起始","picker-options":e.beginPickerOptions},model:{value:e.queryParams.kprqq,callback:function(t){e.$set(e.queryParams,"kprqq",t)},expression:"queryParams.kprqq"}}),e._v(" - "),a("el-date-picker",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"开票结束","picker-options":e.endPickerOptions},model:{value:e.queryParams.kprqz,callback:function(t){e.$set(e.queryParams,"kprqz",t)},expression:"queryParams.kprqz"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{ref:"operationDom",staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAddNewRequest}},[e._v("新增采集")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",disabled:e.multiple},on:{click:e.doFetch}},[e._v("拉取")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",disabled:e.multiple},on:{click:e.doRerequest}},[e._v("重新申请")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"invoiceRequestMainTable",attrs:{data:e.invoiceRequestList,height:e.tableHeight,"row-height":40,"use-virtual":"","header-drag-style":""},on:{"selection-change":e.handleSelectionChange,"row-click":e.currClickRow}},[a("u-table-column",{attrs:{type:"index",align:"center",width:"50",label:"序号"}}),a("u-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._l(e.columnsArr,(function(t,n){return t.show?a("u-table-column",{key:n,attrs:{label:t.label,align:t.align,prop:t.prop,width:t.width,"show-overflow-tooltip":!0,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(n){return["sjlx"==t.prop?a("span",[e._v(e._s("2"==n.row.sjlx?"销项":"进项"))]):"fplx"==t.prop?a("span",[e._v(e._s(e.invTypeFormat(n.row)))]):"flag"==t.prop?a("span",[e._v(e._s(n.row.flag?"是":"否"))]):a("span",[e._v(" "+e._s(n.row[t.prop]))])]}}],null,!0)}):e._e()})),a("u-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"140px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.doFetch(t.row)}}},[e._v("拉取")]),a("el-button",{staticStyle:{display:"inline-block"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.doRerequest(t.row)}}},[e._v("重新申请")])]}}])})],2),e.showProgress?a("my-el-progress",{ref:"myProgress",attrs:{functionName:e.functionName}}):e._e(),a("el-dialog",{attrs:{visible:e.addNewRequest,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.addNewRequest=t},close:e.addNewRequestDialogClose},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{domProps:{innerHTML:e._s(e.addNewRequestTitle)}})]},proxy:!0}])},[a("el-form",{ref:"invoiceRequestForm",attrs:{model:e.invoiceRequestForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"发票日期",prop:"invDate"}},[a("el-date-picker",{attrs:{clearable:"",size:"small","value-format":"yyyy-MM",type:"month",placeholder:"发票日期"},model:{value:e.invoiceRequestForm.yearMonth,callback:function(t){e.$set(e.invoiceRequestForm,"yearMonth",t)},expression:"invoiceRequestForm.yearMonth"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitManualForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.addNewRequest=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("b85c"),r=(a("d81d"),a("7b93")),l=a("b775");function s(e){return Object(l["a"])({url:"/system/invoiceRequest/doRequest",method:"post",params:e})}function c(e){return Object(l["a"])({url:"/system/invoiceRequest",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/system/invoiceRequest/"+e,method:"post"})}function d(e){return Object(l["a"])({url:"/system/invoiceRequest/doRerequest/"+e,method:"post"})}var p=a("c38a"),h=a("ed08"),m={components:{MyElProgress:r["a"]},name:"invoicerequest",data:function(){var e=this;return{endPickerOptions:{disabledDate:function(t){if(e.queryParams.kprqq)return t.getTime()<=new Date(e.queryParams.kprqq).getTime()-864e5}},beginPickerOptions:{disabledDate:function(t){if(e.queryParams.kprqz)return t.getTime()>=new Date(e.queryParams.kprqz).getTime()}},functionName:"",showProgress:!1,loadingTime:null,projectLoading:!1,showSearch:!0,invTypeOptions:{"01":"增值税专用发票","08":"增值税专用发票（电子）","03":"机动车销售统一发票","04":"增值税普通发票",10:"增值税普通发票（电子）",11:"增值税普通发票（卷票）",14:"道路通行费电子普通发票",15:"二手车销售统一发票",81:"全电专票",82:"全电普票",85:"全电专票(纸质)",86:"全电普票(纸质)"},invoiceRequestForm:{yearMonth:null},queryParams:{flag:null,rerequest:null,pageNum:1,pageSize:500,fplx:"",kprqq:"",kprqz:""},tableHeight:null,pageSizes:[],loading:!0,ids:[],rows:[],single:!0,multiple:!0,total:0,checkboxClick:!1,invoiceRequestList:[],columnsArr:[{label:"发票类型",prop:"fplx",align:"center",show:!0,width:180,columnSort:0},{label:"开票起始",prop:"kprqq",align:"center",show:!0,width:180,columnSort:0},{label:"开票结束",prop:"kprqz",align:"center",show:!0,width:180,columnSort:0},{label:"结果消息",prop:"msg",align:"center",show:!0,width:180,columnSort:0},{label:"申请日期",prop:"sqrq",align:"center",show:!0,width:140,columnSort:0},{label:"数据类型",prop:"sjlx",align:"center",show:!0,width:160,columnSort:0},{label:"税号",prop:"nsrsbh",align:"center",show:!0,columnSort:0},{label:"请求编号",prop:"requuid",align:"center",show:!0,width:180,columnSort:0},{label:"任务号",prop:"rwh",align:"center",show:!0,width:180,columnSort:0},{label:"获取结果",prop:"flag",align:"center",show:!0,columnSort:0},{label:"需重新申请",prop:"rerequest",align:"center",show:!0,columnSort:0},{label:"文件明细",prop:"zipResultJson",align:"center",show:!0,columnSort:0},{label:"创建日期",prop:"createTime",align:"center",show:!0,columnSort:0},{label:"更新日期",prop:"updateTime",align:"center",show:!0,columnSort:0},{label:"创建人",prop:"createBy",align:"center",show:!0,columnSort:0}],addNewRequest:!1,addNewRequestTitle:"",invoiceRequestFormRules:[],operationIndex:0,operationRowArr:[]}},mounted:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},activated:function(){var e=this;this.tableHeight=this.calcTableHeight(),window.onresize=function(){e.tableHeight=e.calcTableHeight()}},watch:{showSearch:function(e,t){var a=this;this.$nextTick((function(){a.tableHeight=a.calcTableHeight()}))}},created:function(){var e=this;this.getDicts("sys_page_sizes").then((function(t){var a=t.data;e.pageSizes=[];var n,i=Object(o["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.pageSizes.push(parseFloat(r.dictValue))}}catch(l){i.e(l)}finally{i.f()}})),this.getList()},methods:{handleQuery:function(){this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},getList:function(){var e=this;this.loading=!1,c(this.queryParams).then((function(t){e.invoiceRequestList=t.data,e.total=t.total,e.loading=!1}))},handleAddNewRequest:function(){this.addNewRequest=!0,this.addNewRequestTitle="新增采集"},doFetch:function(e){Object(p["g"])(100,"处理中...",this,!1),e.id?this.operationRowArr=new Array(e):this.operationRowArr=this.rows,this.operationIndex=0,this.doFetchLogic()},doFetchLogic:function(){var e=this;this.operationIndex<this.operationRowArr.length?u(this.operationRowArr[this.operationIndex++].id).then((function(t){200==t.code?e.msgSuccess("获取成功: "+t.msg):e.msgError(t.msg),e.doFetchLogic()})).catch((function(){e.doFetchLogic()})):(this.getList(),this.showProgress=!1,clearInterval(this.loadingTime))},doRerequest:function(e){Object(p["g"])(100,"处理中...",this,!1),e.id?this.operationRowArr=new Array(e):this.operationRowArr=this.rows,this.operationIndex=0,this.doRerequestLogic()},doRerequestLogic:function(){var e=this;this.operationIndex<this.operationRowArr.length?d(this.operationRowArr[this.operationIndex++].id).then((function(t){200==t.code?e.msgSuccess("获取成功: "+t.msg):e.msgError(t.msg),e.doRerequestLogic()})).catch((function(){e.doRerequestLogic()})):(this.getList(),this.showProgress=!1,clearInterval(this.loadingTime))},addNewRequestDialogClose:function(){this.invoiceRequestForm={yearMonth:null}},submitManualForm:function(){var e=this;this.$refs.invoiceRequestForm.validate((function(t){if(t){var a=Object(h["e"])(e.invoiceRequestForm);e.addNewRequestDialogClose(),Object(p["g"])(100,"处理中...",e,!1),s(a).then((function(t){e.showProgress=!1,clearInterval(e.loadingTime),200==t.code?(e.getList(),e.msgSuccess("申请采集成功"),e.addNewRequest=!1):e.msgError(t.msg)})).catch((function(t){e.showProgress=!1,clearInterval(e.loadingTime)}))}}))},handleSelectionChange:function(e){e.length<this.rows.length&&this.checkboxClick?this.checkboxClick=!1:(this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.rows=e)},currClickRow:function(e,t,a){var n={row:e},i=[];i.push(n),this.$refs.invoiceRequestMainTable.toggleRowSelection(i),this.selectMiddleRow(e,this.rows,this.invoiceRequestList,"invoiceRequestMainTable")},invTypeFormat:function(e,t){return this.invTypeOptions[e.fplx]}}},f=m,b=a("2877"),g=Object(b["a"])(f,n,i,!1,null,"7fcebc06",null);t["default"]=g.exports},f65e:function(e,t,a){"use strict";a("b081")},f6ed:function(e,t,a){},f794:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.menuName,callback:function(t){e.$set(e.queryParams,"menuName",t)},expression:"queryParams.menuName"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"菜单状态",clearable:"",size:"small"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:menu:add"],expression:"['system:menu:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.menuList,"row-key":"menuId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"menuName",label:"菜单名称","show-overflow-tooltip":!0,width:"280"}}),a("el-table-column",{attrs:{prop:"icon",label:"图标",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("svg-icon",{attrs:{"icon-class":e.row.icon}})]}}])}),a("el-table-column",{attrs:{prop:"orderNum",label:"排序",width:"60"}}),a("el-table-column",{attrs:{prop:"perms",label:"权限标识","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"component",label:"组件路径","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"status",label:"状态",formatter:e.statusFormat,width:"80"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:menu:edit"],expression:"['system:menu:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:menu:add"],expression:"['system:menu:add']"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(a){return e.handleAdd(t.row)}}},[e._v("新增")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:menu:remove"],expression:"['system:menu:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上级菜单"}},[a("treeselect",{attrs:{options:e.menuOptions,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级菜单"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[a("el-radio-group",{model:{value:e.form.menuType,callback:function(t){e.$set(e.form,"menuType",t)},expression:"form.menuType"}},[a("el-radio",{attrs:{label:"M"}},[e._v("目录")]),a("el-radio",{attrs:{label:"C"}},[e._v("菜单")]),a("el-radio",{attrs:{label:"F"}},[e._v("按钮")])],1)],1)],1),a("el-col",{attrs:{span:24}},["F"!=e.form.menuType?a("el-form-item",{attrs:{label:"菜单图标"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"560",trigger:"click"},on:{show:function(t){return e.$refs["iconSelect"].reset()}}},[a("IconSelect",{ref:"iconSelect",on:{selected:e.selected}}),a("el-input",{attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[e.form.icon?a("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":e.form.icon},slot:"prefix"}):a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1):e._e()],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示排序",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1)],1),a("el-col",{attrs:{span:12}},["F"!=e.form.menuType?a("el-form-item",{attrs:{label:"是否外链"}},[a("el-radio-group",{model:{value:e.form.isFrame,callback:function(t){e.$set(e.form,"isFrame",t)},expression:"form.isFrame"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1):e._e()],1),a("el-col",{attrs:{span:12}},["F"!=e.form.menuType?a("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[a("el-input",{attrs:{placeholder:"请输入路由地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1):e._e()],1),"C"==e.form.menuType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[a("el-input",{attrs:{placeholder:"请输入组件路径"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1)],1):e._e(),a("el-col",{attrs:{span:12}},["M"!=e.form.menuType?a("el-form-item",{attrs:{label:"权限标识"}},[a("el-input",{attrs:{placeholder:"请权限标识",maxlength:"50"},model:{value:e.form.perms,callback:function(t){e.$set(e.form,"perms",t)},expression:"form.perms"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},["F"!=e.form.menuType?a("el-form-item",{attrs:{label:"显示状态"}},[a("el-radio-group",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}},e._l(e.visibleOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1):e._e()],1),a("el-col",{attrs:{span:12}},["F"!=e.form.menuType?a("el-form-item",{attrs:{label:"菜单状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1):e._e()],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("a6dc"),r=a("ca17"),l=a.n(r),s=(a("542c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-body"},[a("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),a("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,n){return a("div",{key:n,on:{click:function(a){return e.selectedIcon(t)}}},[a("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":t}}),a("span",[e._v(e._s(t))])],1)})),0)],1)}),c=[],u=(a("b0c0"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("ddb0"),a("d81d"),a("ac1f"),a("466d"),a("99af"),a("23f1")),d=function(e){return e.keys()},p=/\.\/(.*)\.svg/,h=d(u).map((function(e){return e.match(p)[1]})),m=["disconnect","sketch","highlight","Gitlab","monitor","dribbble","link","instagram","man","reddit","percentage","windows","pushpin","yuque","phone","Youtube","shake","Gitlab-fill","tag","dropbox","wrench","dingtalk","tags","android-fill","scissor","apple-fill","mr","HTML-fill","share","windows-fill","branches","QQ","fork","twitter","shrink","skype-fill","arrawsalt","weibo","verticalright","yuque-fill","verticalleft","Youtube-fill","right","yahoo-fill","left","wechat-fill","up","chrome-fill","down","alipay-circle-fill","fullscreen","aliwangwang-fill","fullscreen-exit","behance-circle-fill","doubleleft","amazon-circle-fill","doubleright","codepen-circle-fill","arrowright","CodeSandbox-circle-f","arrowup","dropbox-circle-fill","arrowleft","github-fill","arrowdown","dribbble-circle-fill","upload","googleplus-circle-f","colum-height","medium-circle-fill","vertical-align-botto","QQ-circle-fill","vertical-align-middl","IE-circle-fill","totop","google-circle-fill","vertical-align-top","dingtalk-circle-fill","download","sketch-circle-fill","sort-descending","slack-circle-fill","sort-ascending","twitter-circle-fill","fall","taobao-circle-fill","swap","weibo-circle-fill","stock","zhihu-circle-fill","rise","reddit-circle-fill","indent","alipay-square-fill","outdent","dingtalk-square-fill","menu","CodeSandbox-square-f","unorderedlist","behance-square-fill","orderedlist","amazon-square-fill","align-right","codepen-square-fill","align-center","dribbble-square-fill","align-left","dropbox-square-fill","pic-center","facebook-fill","pic-right","googleplus-square-f","pic-left","google-square-fill","bold","instagram-fill","font-colors","IE-square-fill","exclaimination","medium-square-fill","check-circle","font-size","linkedin-fill","CI","infomation","QQ-square-fill","Dollar","line-height","reddit-square-fill","compass","strikethrough","twitter-square-fill","close-circle","underline","sketch-square-fill","frown","number","slack-square-fill","info-circle","italic","taobao-square-fill","left-circle","code","weibo-square-fill","down-circle","column-width","zhihu-square-fill","EURO","check","zoomout","copyright","ellipsis","apartment","minus-circle","dash","audio","meh","close","audio-fill","plus-circle","enter","robot","play-circle","line","zoomin","question-circle","minus","robot-fill","Pound","question","bug-fill","right-circle","rollback","bug","smile","small-dash","audiostatic","trademark","pause","comment","time-circle","bg-colors","signal-fill","timeout","crown","verified","earth","drag","shortcut-fill","YUAN","desktop","videocameraadd","up-circle","gift","switchuser","warning-circle","stop","whatsapp","sync","fire","appstoreadd","transaction","thunderbolt","caret-down","undo","check-circle-fill","backward","redo","left-circle-fill","caret-up","reload","down-circle-fill","caret-right","reloadtime","minus-circle-fill","caret-left","message","close-circle-fill","fast-backward","dashboard","info-circle-fill","forward","issuesclose","up-circle-fill","fast-forward","poweroff","right-circle-fill","search","logout","plus-circle-fill","retweet","piechart","question-circle-fill","login","setting","EURO-circle-fill","step-backward","eye","frown-fill","step-forward","location","copyright-circle-fil","swap-right","edit-square","CI-circle-fill","swap-left","export","compass-fill","woman","save","Dollar-circle-fill","plus","Import","poweroff-circle-fill","eyeclose-fill","appstore","meh-fill","eye-close","close-square","play-circle-fill","clear","down-square","Pound-circle-fill","collapse","layout","smile-fill","expand","left-square","stop-fill","deletecolumn","play-square","warning-circle-fill","merge-cells","control","time-circle-fill","subnode","codelibrary","trademark-circle-fil","rotate-left","detail","YUAN-circle-fill","rotate-right","minus-square","heart-fill","insertrowbelow","plus-square","piechart-circle-fil","insertrowabove","right-square","dashboard-fill","table","project","message-fill","solit-cells","wallet","check-square-fill","formatpainter","up-square","down-square-fill","insertrowright","calculator","minus-square-fill","formatpainter-fill","interation","close-square-fill","insertrowleft","check-square","codelibrary-fill","translate","border","left-square-fill","deleterow","border-outer","play-square-fill","sisternode","border-top","up-square-fill","Field-number","border-bottom","right-square-fill","Field-String","border-left","plus-square-fill","Function","border-right","accountbook-fill","Field-time","border-inner","carryout-fill","GIF","border-verticle","calendar-fill","Partition","border-horizontal","calculator-fill","index","radius-bottomleft","interation-fill","Storedprocedure","radius-bottomright","project-fill","Field-Binary","radius-upleft","detail-fill","Console-SQL","radius-upright","save-fill","1:1","radius-setting","wallet-fill","aim","adduser","control-fill","compress","deleteteam","layout-fill","expend","deleteuser","appstore-fill","folder-view","addteam","mobile-fill","file-GIF","user","tablet-fill","group","team","book-fill","send","areachart","redenvelope-fill","Report","linechart","safetycertificate-f","View","barchart","propertysafety-fill","shortcut","pointmap","insurance-fill","ungroup","container","securityscan-fill","database","file-exclamation-fil","sever","file-add-fill","mobile","file-fill","tablet","file-excel-fill","redenvelope","file-markdown-fill","book","file-text-fill","filedone","file-ppt-fill","reconciliation","file-unknown-fill","file-exception","file-word-fill","filesync","file-zip-fill","filesearch","file-pdf-fill","solution","file-image-fill","fileprotect","diff-fill","file-add","file-copy-fill","file-excel","snippets-fill","file-exclamation","batchfolding-fill","file-pdf","reconciliation-fill","file-image","folder-add-fill","file-markdown","folder-fill","file-unknown","folder-open-fill","file-ppt","database-fill","file-word","container-fill","file","sever-fill","file-zip","calendar-check-fill","file-text","image-fill","file-copy","idcard-fill","snippets","creditcard-fill","audit","fund-fill","diff","read-fill","Batchfolding","contacts-fill","securityscan","delete-fill","propertysafety","notification-fill","safetycertificate","flag-fill","insurance","moneycollect-fill","alert","medicinebox-fill","delete","rest-fill","hourglass","shopping-fill","bulb","skin-fill","experiment","video-fill","bell","sound-fill","trophy","bulb-fill","rest","bell-fill","USB","filter-fill","skin","fire-fill","home","funnelplot-fill","bank","gift-fill","filter","hourglass-fill","funnelplot","home-fill","like","trophy-fill","unlike","location-fill","unlock","cloud-fill","lock","customerservice-fill","customerservice","experiment-fill","flag","eye-fill","moneycollect","like-fill","medicinebox","lock-fill","shop","unlike-fill","rocket","star-fill","shopping","unlock-fill","folder","alert-fill","folder-open","api-fill","folder-add","highlight-fill","deploymentunit","phone-fill","accountbook","edit-fill","contacts","pushpin-fill","carryout","rocket-fill","calendar-check","thunderbolt-fill","calendar","tag-fill","scan","wrench-fill","select","tags-fill","boxplot","bank-fill","build","camera-fill","sliders","error-fill","laptop","crown-fill","barcode","mail-fill","camera","car-fill","cluster","printer-fill","gateway","shop-fill","car","setting-fill","printer","USB-fill","read","golden-fill","cloud-server","build-fill","cloud-upload","boxplot-fill","cloud","sliders-fill","cloud-download","alibaba","cloud-sync","antdesign","video","ant-cloud","notification","behance","sound","googleplus","radarchart","medium","qrcode","google","fund","IE","image","amazon","mail","slack","alipay","idcard","taobao","creditcard","zhihu","heart","HTML","block","linkedin","error","yahoo","star","facebook","gold","skype","heatmap","CodeSandbox","wifi","chrome","attachment","codepen","edit","aliwangwang","key","apple","api","android"];h=h.concat(m);var f=h,b={name:"IconSelect",data:function(){return{name:"",iconList:f}},methods:{filterIcons:function(){var e=this;this.iconList=f,this.name&&(this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})))},selectedIcon:function(e){this.$emit("selected",e),document.body.click()},reset:function(){this.name="",this.iconList=f}}},g=b,v=(a("4599"),a("2877")),y=Object(v["a"])(g,s,c,!1,null,"0273f142",null),_=y.exports,x={name:"Menu",components:{Treeselect:l.a,IconSelect:_},data:function(){return{loading:!0,showSearch:!0,menuList:[],menuOptions:[],title:"",open:!1,visibleOptions:[],statusOptions:[],queryParams:{menuName:void 0,visible:void 0},form:{},rules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],path:[{required:!0,message:"路由地址不能为空",trigger:"blur"}]}}},created:function(){var e=this;this.getList(),this.getDicts("sys_show_hide").then((function(t){e.visibleOptions=t.data})),this.getDicts("sys_normal_disable").then((function(t){e.statusOptions=t.data}))},methods:{selected:function(e){this.form.icon=e},getList:function(){var e=this;this.loading=!0,Object(o["e"])(this.queryParams).then((function(t){e.menuList=e.handleTree(t.data,"menuId"),e.loading=!1}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.menuId,label:e.menuName,children:e.children}},getTreeselect:function(){var e=this;Object(o["e"])().then((function(t){e.menuOptions=[];var a={menuId:0,menuName:"主类目",children:[]};a.children=e.handleTree(t.data,"menuId"),e.menuOptions.push(a)}))},visibleFormat:function(e,t){return"F"==e.menuType?"":this.selectDictLabel(this.visibleOptions,e.visible)},statusFormat:function(e,t){return"F"==e.menuType?"":this.selectDictLabel(this.statusOptions,e.status)},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={menuId:void 0,parentId:0,menuName:void 0,icon:void 0,menuType:"M",orderNum:void 0,isFrame:"0",visible:"1",status:"1"},this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(e){this.reset(),this.getTreeselect(),null!=e&&e.menuId?this.form.parentId=e.menuId:this.form.parentId=0,this.open=!0,this.title="添加菜单"},handleUpdate:function(e){var t=this;this.reset(),this.getTreeselect(),Object(o["d"])(e.menuId).then((function(e){t.form=e.data,t.open=!0,t.title="修改菜单"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.menuId?Object(o["h"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.open=!1,e.getList())})):Object(o["a"])(e.form).then((function(t){200===t.code&&(e.msgSuccess("新增成功"),e.open=!1,e.getList())})))}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除名称为"'+e.menuName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["b"])(e.menuId)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))}}},w=x,k=Object(v["a"])(w,n,i,!1,null,null,null);t["default"]=k.exports},f7e5:function(e,t,a){"use strict";a("9bb1")},f80b:function(e,t,a){"use strict";a("597a")},f82b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px"}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-row",[a("el-row",[a("el-col",{staticStyle:{visibility:"hidden"},attrs:{span:20}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{readonly:""}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"发票日期:"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate",t)},expression:"form.invDate"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:7}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票代码:"}},[a("el-input",{attrs:{maxlength:100,readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"发票号码:"}},[a("el-input",{attrs:{maxlength:11,readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"120px"}},[a("div",[e._v("机打代码")]),a("div",{staticStyle:{width:"100%"}},[e._v("机打号码")]),a("div",[e._v("机器编号")])])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"120px"}},[a("div",[e._v(e._s(e.form.invCode))]),a("div",{staticStyle:{width:"100%"}},[e._v(e._s(e.form.invNo))]),null==e.form.machineNo?a("div",{staticStyle:{color:"white"}},[e._v("fillText")]):a("div",[e._v(e._s(e.form.machineNo))])])]),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"public-vehicle-div3 public-vertical-div",staticStyle:{height:"120px"}},[a("span",[e._v("税控码")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"120px"}})])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("买方单位/个人")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.form.buyName))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("单位代码/身份证号码")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.form.buyTaxNo))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("买方单位/个人住址")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].buyAddr))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("电话")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].buyTel))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("卖方单位/个人")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.form.sellName))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("单位代码/身份证号码")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.form.sellTaxNo))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("卖方单位/个人住址")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].sellAddr))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("电话")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].sellTel))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("车牌照号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].licensePlate))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("登记证号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].registrationNumber))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("车辆类型")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}})])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("车架号/车辆识别代码")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].carCode))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("厂牌型号")])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].carModel))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("转入地车辆管理所名称")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].transferVehicleOffice))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("车价合计（大写）")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.form.totalMoneyUp))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("小写")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s("￥"+e.form.totalAmount))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("经营、拍卖单位")])])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].auctionName))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("经营、拍卖单位地址")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].auctionAddress))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("纳税人识别号")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].auctionTaxNo))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("开户银行、账号")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].auctionBankAccount))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("电话")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].auctionTel))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"60px"}},[a("span",[e._v("二手车市场")])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"60px"}},[e._v(e._s(e.secondHandDetails[0].companyName))])]),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"30px"}},[a("span",[e._v("纳税人识别号")])])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"30px"}},[e._v(e._s(e.secondHandDetails[0].companyTaxNo))])])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"30px"}},[a("span",[e._v("地址")])])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"30px"}},[e._v(e._s(e.secondHandDetails[0].companyAddress))])])],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("开户银行、账号")])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].companyBankAccount))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"public-vehicle-div3",staticStyle:{height:"40px"}},[a("span",[e._v("电话")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"public-vehicle-div4",staticStyle:{height:"40px"}},[e._v(e._s(e.secondHandDetails[0].companyTel))])])],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"public-vehicle-div1",staticStyle:{height:"40px"}},[a("span",[e._v("备注")])])]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"public-vehicle-div2",staticStyle:{height:"40px"}},[e._v(e._s(e.form.note))])])],1)],1)],1)],1)],1)])],1)},i=[],o=(a("b680"),a("d3b7"),a("25f0"),a("4c80")),r=a("606d"),l={name:"vehicleInvoiceDetailShowModal",props:{isPersonal:{type:String,default:"0"}},data:function(){return{form:{blockChain:"0",buyAddrTel:"测试一下",buyBankAccount:"测试一下",buyName:"测试一下",buyTaxNo:"测试一下",cashier:"测试一下",checkCode:null,checkMsg:null,checked:null,checker:"测试一下",createBy:null,id:"1222222222222222222",invCode:"122222222222",invDate:"2021-03-06",invNo:"23568569",invType:"02",invoicer:"测试一下",machineNo:null,note:"测试一下",searchValue:null,sellAddrTel:"测试一下",sellBankAccount:"测试一下",sellName:"测试一下",sellTaxNo:"测试一下",sourceInvCode:null,sourceInvNo:null,state:null,totalAmount:null,totalAmountWithoutTax:23.5,totalMoneyUp:null,totalTaxAmount:null,updateBy:null,updateTime:"2021-03-15 15:36:26"},secondHandDetails:[{buyAddr:null,buyTel:null,sellAddr:null,sellTel:null,licensePlate:null,registrationNumber:null,carCode:null,carModel:null,transferVehicleOffice:null,auctionName:null,auctionAddress:null,auctionTaxNo:null,auctionBankAccount:null,auctionTel:null,companyName:null,companyTaxNo:null,companyAddress:null,companyBankAccount:null,companyTel:null}],fplxdesc:"",open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[]}},watch:{},computed:{},created:function(){var e=this;this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data}))},mounted:function(){},methods:{checkboxInit:function(e,t){return 0},fillBillDialog:function(e){var t=this;return"1"==this.isPersonal?Object(r["f"])(e).then((function(e){var a=e.data;t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form=a,t.secondHandDetails=a.details,t.open=!0,t.title="发票详情"})):Object(o["i"])(e).then((function(e){var a=e.data;t.fplxdesc=t.selectDictLabel(t.invTypeOptions,a.invType),t.form=a,t.secondHandDetails=a.details,t.open=!0,t.title="发票详情"}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")}}},s=l,c=(a("040c"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"65f2ecea",null);t["default"]=u.exports},f861:function(e,t,a){},f8c9:function(e,t,a){"use strict";a("6a13")},f8db:function(e,t,a){
/**
 * @licstart The following is the entire license notice for the
 * Javascript code in this page
 *
 * Copyright 2020 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * Javascript code in this page
 */
(function(t,a){e.exports=a()})(0,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return n.AnnotationLayerBuilder}}),Object.defineProperty(t,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return n.DefaultAnnotationLayerFactory}}),Object.defineProperty(t,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return i.DefaultTextLayerFactory}}),Object.defineProperty(t,"TextLayerBuilder",{enumerable:!0,get:function(){return i.TextLayerBuilder}}),Object.defineProperty(t,"EventBus",{enumerable:!0,get:function(){return o.EventBus}}),Object.defineProperty(t,"NullL10n",{enumerable:!0,get:function(){return o.NullL10n}}),Object.defineProperty(t,"ProgressBar",{enumerable:!0,get:function(){return o.ProgressBar}}),Object.defineProperty(t,"PDFLinkService",{enumerable:!0,get:function(){return r.PDFLinkService}}),Object.defineProperty(t,"SimpleLinkService",{enumerable:!0,get:function(){return r.SimpleLinkService}}),Object.defineProperty(t,"DownloadManager",{enumerable:!0,get:function(){return l.DownloadManager}}),Object.defineProperty(t,"GenericL10n",{enumerable:!0,get:function(){return s.GenericL10n}}),Object.defineProperty(t,"PDFFindController",{enumerable:!0,get:function(){return c.PDFFindController}}),Object.defineProperty(t,"PDFHistory",{enumerable:!0,get:function(){return u.PDFHistory}}),Object.defineProperty(t,"PDFPageView",{enumerable:!0,get:function(){return d.PDFPageView}}),Object.defineProperty(t,"PDFSinglePageViewer",{enumerable:!0,get:function(){return p.PDFSinglePageViewer}}),Object.defineProperty(t,"PDFViewer",{enumerable:!0,get:function(){return h.PDFViewer}});var n=a(1),i=a(8),o=a(3),r=a(7),l=a(9),s=a(11),c=a(13),u=a(15),d=a(16),p=a(18),h=a(20)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAnnotationLayerFactory=t.AnnotationLayerBuilder=void 0;var n=a(2),i=a(3),o=a(7);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}var c=function(){function e(t){var a=t.pageDiv,n=t.pdfPage,o=t.linkService,l=t.downloadManager,s=t.annotationStorage,c=void 0===s?null:s,u=t.imageResourcesPath,d=void 0===u?"":u,p=t.renderInteractiveForms,h=void 0===p||p,m=t.l10n,f=void 0===m?i.NullL10n:m;r(this,e),this.pageDiv=a,this.pdfPage=n,this.linkService=o,this.downloadManager=l,this.imageResourcesPath=d,this.renderInteractiveForms=h,this.l10n=f,this.annotationStorage=c,this.div=null,this._cancelled=!1}return s(e,[{key:"render",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";return this.pdfPage.getAnnotations({intent:a}).then((function(a){if(!t._cancelled&&0!==a.length){var i={viewport:e.clone({dontFlip:!0}),div:t.div,annotations:a,page:t.pdfPage,imageResourcesPath:t.imageResourcesPath,renderInteractiveForms:t.renderInteractiveForms,linkService:t.linkService,downloadManager:t.downloadManager,annotationStorage:t.annotationStorage};t.div?n.AnnotationLayer.update(i):(t.div=document.createElement("div"),t.div.className="annotationLayer",t.pageDiv.appendChild(t.div),i.div=t.div,n.AnnotationLayer.render(i),t.l10n.translate(t.div))}}))}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),e}();t.AnnotationLayerBuilder=c;var u=function(){function e(){r(this,e)}return s(e,[{key:"createAnnotationLayerBuilder",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.NullL10n;return new c({pageDiv:e,pdfPage:t,imageResourcesPath:n,renderInteractiveForms:r,linkService:new o.SimpleLinkService,l10n:l,annotationStorage:a})}}]),e}();t.DefaultAnnotationLayerFactory=u},function(e,t,n){"use strict";var i;i="undefined"!==typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:a("4383"),e.exports=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRotation=K,t.isValidScrollMode=Y,t.isValidSpreadMode=X,t.isPortraitOrientation=Z,t.clamp=ne,t.getPDFFileNameFromURL=H,t.noContextMenuHandler=U,t.parseQueryString=j,t.backtrackBeforeAllVisibleElements=B,t.getVisibleElements=W,t.roundToDivide=$,t.getPageSizeInches=M,t.approximateFraction=q,t.getOutputScale=E,t.scrollIntoView=R,t.watchScroll=z,t.binarySearchFirstItem=L,t.normalizeWheelEventDirection=Q,t.normalizeWheelEventDelta=G,t.waitOnEventOrTimeout=ee,t.moveToEndOfArray=oe,t.WaitOnType=t.animationStarted=t.ProgressBar=t.EventBus=t.NullL10n=t.SpreadMode=t.ScrollMode=t.TextLayerMode=t.RendererType=t.PresentationModeState=t.VERTICAL_PADDING=t.SCROLLBAR_PADDING=t.MAX_AUTO_SCALE=t.UNKNOWN_SCALE=t.MAX_SCALE=t.MIN_SCALE=t.DEFAULT_SCALE=t.DEFAULT_SCALE_VALUE=t.CSS_UNITS=t.AutoPrintRegExp=void 0;var n=i(a(4));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){return m(e)||h(e,t)||d(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function h(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}}function m(e){if(Array.isArray(e))return e}function f(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){f(o,n,i,r,l,"next",e)}function l(e){f(o,n,i,r,l,"throw",e)}r(void 0)}))}}var g=96/72;t.CSS_UNITS=g;var v="auto";t.DEFAULT_SCALE_VALUE=v;var y=1;t.DEFAULT_SCALE=y;var _=.1;t.MIN_SCALE=_;var x=10;t.MAX_SCALE=x;var w=0;t.UNKNOWN_SCALE=w;var k=1.25;t.MAX_AUTO_SCALE=k;var T=40;t.SCROLLBAR_PADDING=T;var D=5;t.VERTICAL_PADDING=D;var S={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};t.PresentationModeState=S;var O={CANVAS:"canvas",SVG:"svg"};t.RendererType=O;var N={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};t.TextLayerMode=N;var P={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};t.ScrollMode=P;var C={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=C;var A=/\bprint\s*\(/;function F(e,t){return t?e.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(e,a){return a in t?t[a]:"{{"+a+"}}"})):e}t.AutoPrintRegExp=A;var I={getLanguage:function(){return b(n["default"].mark((function e(){return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","en-us");case 1:case"end":return e.stop()}}),e)})))()},getDirection:function(){return b(n["default"].mark((function e(){return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","ltr");case 1:case"end":return e.stop()}}),e)})))()},get:function(e,t,a){return b(n["default"].mark((function e(){return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",F(a,t));case 1:case"end":return e.stop()}}),e)})))()},translate:function(e){return b(n["default"].mark((function e(){return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}};function E(e){var t=window.devicePixelRatio||1,a=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,n=t/a;return{sx:n,sy:n,scaled:1!==n}}function R(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.offsetParent;if(n){var i=e.offsetTop+e.clientTop,o=e.offsetLeft+e.clientLeft;while(n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||a&&"hidden"===getComputedStyle(n).overflow)if(n.dataset._scaleY&&(i/=n.dataset._scaleY,o/=n.dataset._scaleX),i+=n.offsetTop,o+=n.offsetLeft,n=n.offsetParent,!n)return;t&&(void 0!==t.top&&(i+=t.top),void 0!==t.left&&(o+=t.left,n.scrollLeft=o)),n.scrollTop=i}else console.error("offsetParent is not set -- cannot scroll")}function z(e,t){var a=function(a){i||(i=window.requestAnimationFrame((function(){i=null;var a=e.scrollLeft,o=n.lastX;a!==o&&(n.right=a>o),n.lastX=a;var r=e.scrollTop,l=n.lastY;r!==l&&(n.down=r>l),n.lastY=r,t(n)})))},n={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:a},i=null;return e.addEventListener("scroll",a,!0),n}function j(e){for(var t=e.split("&"),a=Object.create(null),n=0,i=t.length;n<i;++n){var o=t[n].split("="),r=o[0].toLowerCase(),l=o.length>1?o[1]:null;a[decodeURIComponent(r)]=decodeURIComponent(l)}return a}function L(e,t){var a=0,n=e.length-1;if(n<0||!t(e[n]))return e.length;if(t(e[a]))return a;while(a<n){var i=a+n>>1,o=e[i];t(o)?n=i:a=i+1}return a}function q(e){if(Math.floor(e)===e)return[e,1];var t=1/e,a=8;if(t>a)return[1,a];if(Math.floor(t)===t)return[1,t];var n,i=e>1?t:e,o=0,r=1,l=1,s=1;while(1){var c=o+l,u=r+s;if(u>a)break;i<=c/u?(l=c,s=u):(o=c,r=u)}return n=i-o/r<l/s-i?i===e?[o,r]:[r,o]:i===e?[l,s]:[s,l],n}function $(e,t){var a=e%t;return 0===a?e:Math.round(e-a+t)}function M(e){var t=e.view,a=e.userUnit,n=e.rotate,i=c(t,4),o=i[0],r=i[1],l=i[2],s=i[3],u=n%180!==0,d=(l-o)/72*a,p=(s-r)/72*a;return{width:u?p:d,height:u?d:p}}function B(e,t,a){if(e<2)return e;var n=t[e].div,i=n.offsetTop+n.clientTop;i>=a&&(n=t[e-1].div,i=n.offsetTop+n.clientTop);for(var o=e-2;o>=0;--o){if(n=t[o].div,n.offsetTop+n.clientTop+n.clientHeight<=i)break;e=o}return e}function W(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.scrollTop,o=i+e.clientHeight,r=e.scrollLeft,l=r+e.clientWidth;function s(e){var t=e.div,a=t.offsetTop+t.clientTop+t.clientHeight;return a>i}function c(e){var t=e.div,a=t.offsetLeft+t.clientLeft+t.clientWidth;return a>r}var u=[],d=t.length,p=0===d?0:L(t,n?c:s);p>0&&p<d&&!n&&(p=B(p,t,i));for(var h=n?l:-1,m=p;m<d;m++){var f=t[m],b=f.div,g=b.offsetLeft+b.clientLeft,v=b.offsetTop+b.clientTop,y=b.clientWidth,_=b.clientHeight,x=g+y,w=v+_;if(-1===h)w>=o&&(h=w);else if((n?g:v)>h)break;if(!(w<=i||v>=o||x<=r||g>=l)){var k=Math.max(0,i-v)+Math.max(0,w-o),T=Math.max(0,r-g)+Math.max(0,x-l),D=(_-k)*(y-T)*100/_/y|0;u.push({id:f.id,x:g,y:v,view:f,percent:D})}}var S=u[0],O=u[u.length-1];return a&&u.sort((function(e,t){var a=e.percent-t.percent;return Math.abs(a)>.001?-a:e.id-t.id})),{first:S,last:O,views:u}}function U(e){e.preventDefault()}function V(e){var t=0,a=e.length;while(t<a&&""===e[t].trim())t++;return"data:"===e.substring(t,t+5).toLowerCase()}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(V(e))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),t;var a=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=a.exec(e),o=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch(r){}return o||t}function Q(e){var t=Math.sqrt(e.deltaX*e.deltaX+e.deltaY*e.deltaY),a=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<a&&a<.75*Math.PI&&(t=-t),t}function G(e){var t=Q(e),a=0,n=1,i=30,o=30;return e.deltaMode===a?t/=i*o:e.deltaMode===n&&(t/=o),t}function K(e){return Number.isInteger(e)&&e%90===0}function Y(e){return Number.isInteger(e)&&Object.values(P).includes(e)&&e!==P.UNKNOWN}function X(e){return Number.isInteger(e)&&Object.values(C).includes(e)&&e!==C.UNKNOWN}function Z(e){return e.width<=e.height}t.NullL10n=I;var J={EVENT:"event",TIMEOUT:"timeout"};function ee(e){var t=e.target,a=e.name,n=e.delay,i=void 0===n?0:n;return new Promise((function(e,n){if("object"!==s(t)||!a||"string"!==typeof a||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function o(n){t instanceof ae?t._off(a,r):t.removeEventListener(a,r),c&&clearTimeout(c),e(n)}var r=o.bind(null,J.EVENT);t instanceof ae?t._on(a,r):t.addEventListener(a,r);var l=o.bind(null,J.TIMEOUT),c=setTimeout(l,i)}))}t.WaitOnType=J;var te=new Promise((function(e){window.requestAnimationFrame(e)}));t.animationStarted=te;var ae=function(){function e(t){o(this,e),this._listeners=Object.create(null)}return l(e,[{key:"on",value:function(e,t){this._on(e,t,{external:!0})}},{key:"off",value:function(e,t){this._off(e,t,{external:!0})}},{key:"dispatch",value:function(e){var t=this._listeners[e];if(t&&0!==t.length){var a,n=Array.prototype.slice.call(arguments,1);t.slice(0).forEach((function(e){var t=e.listener,i=e.external;if(i)return a||(a=[]),void a.push(t);t.apply(null,n)})),a&&(a.forEach((function(e){e.apply(null,n)})),a=null)}}},{key:"_on",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this._listeners[e];n||(this._listeners[e]=n=[]),n.push({listener:t,external:!0===(a&&a.external)})}},{key:"_off",value:function(e,t){var a=this._listeners[e];if(a)for(var n=0,i=a.length;n<i;n++)if(a[n].listener===t)return void a.splice(n,1)}}]),e}();function ne(e,t,a){return Math.min(Math.max(e,t),a)}t.EventBus=ae;var ie=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.height,i=a.width,r=a.units;o(this,e),this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=n||100,this.width=i||100,this.units=r||"%",this.div.style.height=this.height+this.units,this.percent=0}return l(e,[{key:"_updateBar",value:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var e=this.width*this._percent/100;this.div.style.width=e+this.units}},{key:"setWidth",value:function(e){if(e){var t=e.parentNode,a=t.offsetWidth-e.offsetWidth;a>0&&(this.bar.style.width="calc(100% - ".concat(a,"px)"))}}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}},{key:"show",value:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},{key:"percent",get:function(){return this._percent},set:function(e){this._indeterminate=isNaN(e),this._percent=ne(e,0,100),this._updateBar()}}]),e}();function oe(e,t){for(var a=[],n=e.length,i=0,o=0;o<n;++o)t(e[o])?a.push(e[o]):(e[i]=e[o],++i);for(var r=0;i<n;++r,++i)e[i]=a[r]}t.ProgressBar=ie},function(e,t,a){"use strict";e.exports=a(5)},function(e,t,a){"use strict";(function(e){function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var a=function(e){var a,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,a){return e[t]=a}}function u(e,t,a,n){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),r=new C(n||[]);return o._invoke=S(e,a,r),o}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var p="suspendedStart",h="suspendedYield",m="executing",f="completed",b={};function g(){}function v(){}function y(){}var _={};_[r]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(A([])));w&&w!==n&&i.call(w,r)&&(_=w);var k=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,a){function n(o,r,l,s){var c=d(e[o],e,r);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"===t(p)&&i.call(p,"__await")?a.resolve(p.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):a.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var o;function r(e,t){function i(){return new a((function(a,i){n(e,t,a,i)}))}return o=o?o.then(i,i):i()}this._invoke=r}function S(e,t,a){var n=p;return function(i,o){if(n===m)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw o;return F()}a.method=i,a.arg=o;while(1){var r=a.delegate;if(r){var l=O(r,a);if(l){if(l===b)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===p)throw n=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=m;var s=d(e,t,a);if("normal"===s.type){if(n=a.done?f:h,s.arg===b)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n=f,a.method="throw",a.arg=s.arg)}}}function O(e,t){var n=e.iterator[t.method];if(n===a){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=a,O(e,t),"throw"===t.method))return b;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var i=d(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=a),t.delegate=null,b):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function A(e){if(e){var t=e[r];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){while(++n<e.length)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=a,t.done=!0,t};return o.next=o}}return{next:F}}function F(){return{value:a,done:!0}}return v.prototype=k.constructor=y,y.constructor=v,v.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},T(D.prototype),D.prototype[l]=function(){return this},e.AsyncIterator=D,e.async=function(t,a,n,i,o){void 0===o&&(o=Promise);var r=new D(u(t,a,n,i),o);return e.isGeneratorFunction(a)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},T(k),c(k,s,"Generator"),k[r]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){while(t.length){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return l.type="throw",l.arg=e,t.next=n,i&&(t.method="next",t.arg=a),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],l=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),c=i.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),P(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var i=n.arg;P(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=a),b}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=a}catch(n){Function("r","regeneratorRuntime = r")(a)}}).call(this,a(6)(e))},function(e,t,a){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleLinkService=t.PDFLinkService=void 0;var n=a(3);function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.eventBus,n=t.externalLinkTarget,i=void 0===n?null:n,r=t.externalLinkRel,l=void 0===r?null:r,s=t.externalLinkEnabled,c=void 0===s||s,u=t.ignoreDestinationZoom,d=void 0!==u&&u;o(this,e),this.eventBus=a,this.externalLinkTarget=i,this.externalLinkRel=l,this.externalLinkEnabled=c,this._ignoreDestinationZoom=d,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return l(e,[{key:"setDocument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setHistory",value:function(e){this.pdfHistory=e}},{key:"navigateTo",value:function(e){var t=this,a=function a(n){var i,o=n.namedDest,r=n.explicitDest,l=r[0];if(l instanceof Object){if(i=t._cachedPageNumber(l),null===i)return void t.pdfDocument.getPageIndex(l).then((function(e){t.cachePageRef(e+1,l),a({namedDest:o,explicitDest:r})}))["catch"]((function(){console.error('PDFLinkService.navigateTo: "'.concat(l,'" is not ')+'a valid page reference, for dest="'.concat(e,'".'))}))}else{if(!Number.isInteger(l))return void console.error('PDFLinkService.navigateTo: "'.concat(l,'" is not ')+'a valid destination reference, for dest="'.concat(e,'".'));i=l+1}!i||i<1||i>t.pagesCount?console.error('PDFLinkService.navigateTo: "'.concat(i,'" is not ')+'a valid page number, for dest="'.concat(e,'".')):(t.pdfHistory&&(t.pdfHistory.pushCurrentPosition(),t.pdfHistory.push({namedDest:o,explicitDest:r,pageNumber:i})),t.pdfViewer.scrollPageIntoView({pageNumber:i,destArray:r,ignoreDestinationZoom:t._ignoreDestinationZoom}))};new Promise((function(a,n){"string"!==typeof e?a({namedDest:"",explicitDest:e}):t.pdfDocument.getDestination(e).then((function(t){a({namedDest:e,explicitDest:t})}))})).then((function(t){Array.isArray(t.explicitDest)?a(t):console.error('PDFLinkService.navigateTo: "'.concat(t.explicitDest,'" is')+' not a valid destination array, for dest="'.concat(e,'".'))}))}},{key:"getDestinationHash",value:function(e){if("string"===typeof e)return this.getAnchorUrl("#"+escape(e));if(Array.isArray(e)){var t=JSON.stringify(e);return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(e){return(this.baseUrl||"")+e}},{key:"setHash",value:function(e){var t,a;if(e.includes("=")){var i=(0,n.parseQueryString)(e);if("search"in i&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.search.replace(/"/g,""),phraseSearch:"true"===i.phrase}),"page"in i&&(t=0|i.page||1),"zoom"in i){var o=i.zoom.split(","),r=o[0],l=parseFloat(r);r.includes("Fit")?"Fit"===r||"FitB"===r?a=[null,{name:r}]:"FitH"===r||"FitBH"===r||"FitV"===r||"FitBV"===r?a=[null,{name:r},o.length>1?0|o[1]:null]:"FitR"===r?5!==o.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):a=[null,{name:r},0|o[1],0|o[2],0|o[3],0|o[4]]:console.error('PDFLinkService.setHash: "'.concat(r,'" is not ')+"a valid zoom value."):a=[null,{name:"XYZ"},o.length>1?0|o[1]:null,o.length>2?0|o[2]:null,l?l/100:r]}a?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:a,allowNegativeOffset:!0}):t&&(this.page=t),"pagemode"in i&&this.eventBus.dispatch("pagemode",{source:this,mode:i.pagemode}),"nameddest"in i&&this.navigateTo(i.nameddest)}else{a=unescape(e);try{a=JSON.parse(a),Array.isArray(a)||(a=a.toString())}catch(s){}if("string"===typeof a||c(a))return void this.navigateTo(a);console.error('PDFLinkService.setHash: "'.concat(unescape(e),'" is not ')+"a valid destination.")}}},{key:"executeNamedAction",value:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:e})}},{key:"cachePageRef",value:function(e,t){if(t){var a=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);this._pagesRefCache[a]=e}}},{key:"_cachedPageNumber",value:function(e){var t=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return this._pagesRefCache&&this._pagesRefCache[t]||null}},{key:"isPageVisible",value:function(e){return this.pdfViewer.isPageVisible(e)}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(e){this.pdfViewer.pagesRotation=e}}]),e}();function c(e){if(!Array.isArray(e))return!1;var t=e.length;if(t<2)return!1;var a=e[0];if(("object"!==i(a)||!Number.isInteger(a.num)||!Number.isInteger(a.gen))&&!(Number.isInteger(a)&&a>=0))return!1;var n=e[1];if("object"!==i(n)||"string"!==typeof n.name)return!1;var o=!0;switch(n.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;o=!1;break;default:return!1}for(var r=2;r<t;r++){var l=e[r];if(!("number"===typeof l||o&&null===l))return!1}return!0}t.PDFLinkService=s;var u=function(){function e(){o(this,e),this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}return l(e,[{key:"navigateTo",value:function(e){}},{key:"getDestinationHash",value:function(e){return"#"}},{key:"getAnchorUrl",value:function(e){return"#"}},{key:"setHash",value:function(e){}},{key:"executeNamedAction",value:function(e){}},{key:"cachePageRef",value:function(e,t){}},{key:"isPageVisible",value:function(e){return!0}},{key:"pagesCount",get:function(){return 0}},{key:"page",get:function(){return 0},set:function(e){}},{key:"rotation",get:function(){return 0},set:function(e){}}]),e}();t.SimpleLinkService=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTextLayerFactory=t.TextLayerBuilder=void 0;var n=a(2);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}var l=300,s=function(){function e(t){var a=t.textLayerDiv,n=t.eventBus,o=t.pageIndex,r=t.viewport,l=t.findController,s=void 0===l?null:l,c=t.enhanceTextSelection,u=void 0!==c&&c;i(this,e),this.textLayerDiv=a,this.eventBus=n,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=o,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=r,this.textDivs=[],this.findController=s,this.textLayerRenderTask=null,this.enhanceTextSelection=u,this._onUpdateTextLayerMatches=null,this._bindMouse()}return r(e,[{key:"_finishRendering",value:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];var a=document.createDocumentFragment();this.textLayerRenderTask=(0,n.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:a,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((function(){e.textLayerDiv.appendChild(a),e._finishRendering(),e._updateMatches()}),(function(e){})),this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=function(t){t.pageIndex!==e.pageIdx&&-1!==t.pageIndex||e._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches))}}},{key:"cancel",value:function(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null)}},{key:"setTextContentStream",value:function(e){this.cancel(),this.textContentStream=e}},{key:"setTextContent",value:function(e){this.cancel(),this.textContent=e}},{key:"_convertMatches",value:function(e,t){if(!e)return[];for(var a=this.findController,n=this.textContentItemsStr,i=0,o=0,r=n.length-1,l=a.state.query.length,s=[],c=0,u=e.length;c<u;c++){var d=e[c];while(i!==r&&d>=o+n[i].length)o+=n[i].length,i++;i===n.length&&console.error("Could not find a matching mapping");var p={begin:{divIdx:i,offset:d-o}};d+=t?t[c]:l;while(i!==r&&d>o+n[i].length)o+=n[i].length,i++;p.end={divIdx:i,offset:d-o},s.push(p)}return s}},{key:"_renderMatches",value:function(e){if(0!==e.length){var t=this.findController,a=this.pageIdx,n=this.textContentItemsStr,i=this.textDivs,o=a===t.selected.pageIdx,r=t.selected.matchIdx,l=t.state.highlightAll,s=null,c={divIdx:-1,offset:void 0},u=r,d=u+1;if(l)u=0,d=e.length;else if(!o)return;for(var p=u;p<d;p++){var h=e[p],m=h.begin,f=h.end,b=o&&p===r,g=b?" selected":"";if(b&&t.scrollMatchIntoView({element:i[m.divIdx],pageIndex:a,matchIndex:r}),s&&m.divIdx===s.divIdx?x(s.divIdx,s.offset,m.offset):(null!==s&&x(s.divIdx,s.offset,c.offset),_(m)),m.divIdx===f.divIdx)x(m.divIdx,m.offset,f.offset,"highlight"+g);else{x(m.divIdx,m.offset,c.offset,"highlight begin"+g);for(var v=m.divIdx+1,y=f.divIdx;v<y;v++)i[v].className="highlight middle"+g;_(f,"highlight end"+g)}s=f}s&&x(s.divIdx,s.offset,c.offset)}function _(e,t){var a=e.divIdx;i[a].textContent="",x(a,0,e.offset,t)}function x(e,t,a,o){var r=i[e],l=n[e].substring(t,a),s=document.createTextNode(l);if(o){var c=document.createElement("span");return c.className=o,c.appendChild(s),void r.appendChild(c)}r.appendChild(s)}}},{key:"_updateMatches",value:function(){if(this.renderingDone){for(var e=this.findController,t=this.matches,a=this.pageIdx,n=this.textContentItemsStr,i=this.textDivs,o=-1,r=0,l=t.length;r<l;r++){for(var s=t[r],c=Math.max(o,s.begin.divIdx),u=c,d=s.end.divIdx;u<=d;u++){var p=i[u];p.textContent=n[u],p.className=""}o=s.end.divIdx+1}if(e&&e.highlightMatches){var h=e.pageMatches[a]||null,m=e.pageMatchesLength[a]||null;this.matches=this._convertMatches(h,m),this._renderMatches(this.matches)}}}},{key:"_bindMouse",value:function(){var e=this,t=this.textLayerDiv,a=null;t.addEventListener("mousedown",(function(n){if(e.enhanceTextSelection&&e.textLayerRenderTask)return e.textLayerRenderTask.expandTextDivs(!0),void(a&&(clearTimeout(a),a=null));var i=t.querySelector(".endOfContent");if(i){var o=n.target!==t;if(o=o&&"none"!==window.getComputedStyle(i).getPropertyValue("-moz-user-select"),o){var r=t.getBoundingClientRect(),l=Math.max(0,(n.pageY-r.top)/r.height);i.style.top=(100*l).toFixed(2)+"%"}i.classList.add("active")}})),t.addEventListener("mouseup",(function(){if(e.enhanceTextSelection&&e.textLayerRenderTask)a=setTimeout((function(){e.textLayerRenderTask&&e.textLayerRenderTask.expandTextDivs(!1),a=null}),l);else{var n=t.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))}}))}}]),e}();t.TextLayerBuilder=s;var c=function(){function e(){i(this,e)}return r(e,[{key:"createTextLayerBuilder",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;return new s({textLayerDiv:e,pageIndex:t,viewport:a,enhanceTextSelection:n,eventBus:i})}}]),e}();t.DefaultTextLayerFactory=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadManager=void 0;var n=a(2),i=a(10);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}function s(e,t){var a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=e,a.target="_parent","download"in a&&(a.download=t),(document.body||document.documentElement).appendChild(a),a.click(),a.remove()}var c=function(){function e(){o(this,e)}return l(e,[{key:"downloadUrl",value:function(e,t){(0,n.createValidAbsoluteUrl)(e,"http://example.com")&&s(e+"#pdfjs.action=download",t)}},{key:"downloadData",value:function(e,t,a){if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:a}),t);else{var o=(0,n.createObjectURL)(e,a,i.viewerCompatibilityParams.disableCreateObjectURL);s(o,t)}}},{key:"download",value:function(e,t,a){if(navigator.msSaveBlob)navigator.msSaveBlob(e,a)||this.downloadUrl(t,a);else if(i.viewerCompatibilityParams.disableCreateObjectURL)this.downloadUrl(t,a);else{var n=URL.createObjectURL(e);s(n,a)}}}]),e}();t.DownloadManager=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewerCompatibilityParams=void 0;var n=Object.create(null),i="undefined"!==typeof navigator&&navigator.userAgent||"",o="undefined"!==typeof navigator&&navigator.platform||"",r="undefined"!==typeof navigator&&navigator.maxTouchPoints||1,l=/Android/.test(i),s=/Trident/.test(i),c=/\b(iPad|iPhone|iPod)(?=;)/.test(i)||"MacIntel"===o&&r>1,u=/CriOS/.test(i);(function(){(s||u)&&(n.disableCreateObjectURL=!0)})(),function(){(c||l)&&(n.maxCanvasPixels=5242880)}();var d=Object.freeze(n);t.viewerCompatibilityParams=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericL10n=void 0;var n=i(a(4));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function l(e){o(r,n,i,l,s,"next",e)}function s(e){o(r,n,i,l,s,"throw",e)}l(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}a(12);var u=document.webL10n,d=function(){function e(t){l(this,e),this._lang=t,this._ready=new Promise((function(e,a){u.setLanguage(t,(function(){e(u)}))}))}return c(e,[{key:"getLanguage",value:function(){var e=r(n["default"].mark((function e(){var t;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return t=e.sent,e.abrupt("return",t.getLanguage());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDirection",value:function(){var e=r(n["default"].mark((function e(){var t;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return t=e.sent,e.abrupt("return",t.getDirection());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get",value:function(){var e=r(n["default"].mark((function e(t,a,i){var o;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return o=e.sent,e.abrupt("return",o.get(t,a,i));case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"translate",value:function(){var e=r(n["default"].mark((function e(t){var a;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return a=e.sent,e.abrupt("return",a.translate(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.GenericL10n=d},function(e,t,a){"use strict";document.webL10n=function(e,t,a){var n={},i="",o="textContent",r="",l={},s="loading",c=!0;function u(){return t.querySelectorAll('link[type="application/l10n"]')}function d(){var e=t.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}function p(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}function h(e){if(!e)return{};var t=e.getAttribute("data-l10n-id"),a=e.getAttribute("data-l10n-args"),n={};if(a)try{n=JSON.parse(a)}catch(i){console.warn("could not parse arguments for #"+t)}return{id:t,args:n}}function m(e,t,a){t=t||function(e){},a=a||function(){};var n=new XMLHttpRequest;n.open("GET",e,c),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0===n.status?t(n.responseText):a())},n.onerror=a,n.ontimeout=a;try{n.send(null)}catch(i){a()}}function f(e,t,a,r){var l=e.replace(/[^\/]*$/,"")||"./";function s(e){return e.lastIndexOf("\\")<0?e:e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function c(e,a){var n={},i=/^\s*|\s*$/,o=/^\s*#|^\s*$/,r=/^\s*\[(.*)\]\s*$/,c=/^\s*@import\s+url\((.*)\)\s*$/i,u=/^([^=\s]*)\s*=\s*(.+)$/;function d(e,a,d){var h=e.replace(i,"").split(/[\r\n]+/),m="*",f=t.split("-",1)[0],b=!1,g="";function v(){while(1){if(!h.length)return void d();var e=h.shift();if(!o.test(e)){if(a){if(g=r.exec(e),g){m=g[1].toLowerCase(),b="*"!==m&&m!==t&&m!==f;continue}if(b)continue;if(g=c.exec(e),g)return void p(l+g[1],v)}var i=e.match(u);i&&3==i.length&&(n[i[1]]=s(i[2]))}}}v()}function p(e,t){m(e,(function(e){d(e,!1,t)}),(function(){console.warn(e+" not found."),t()}))}d(e,!0,(function(){a(n)}))}m(e,(function(e){i+=e,c(e,(function(e){for(var t in e){var i,r,l=t.lastIndexOf(".");l>0?(i=t.substring(0,l),r=t.substring(l+1)):(i=t,r=o),n[i]||(n[i]={}),n[i][r]=e[t]}a&&a()}))}),r)}function b(e,t){e&&(e=e.toLowerCase()),t=t||function(){},g(),r=e;var a=u(),i=a.length;if(0!==i){var o=null,l=0;o=function(){l++,l>=i&&(t(),s="complete")};for(var c=0;c<i;c++){var p=new v(a[c]);p.load(e,o)}}else{var h=d();if(h&&h.locales&&h.default_locale){if(console.log("using the embedded JSON directory, early way out"),n=h.locales[e],!n){var m=h.default_locale.toLowerCase();for(var b in h.locales){if(b=b.toLowerCase(),b===e){n=h.locales[e];break}b===m&&(n=h.locales[m])}}t()}else console.log("no resource to load, early way out");s="complete"}function v(e){var t=e.href;this.load=function(e,a){f(t,e,a,(function(){console.warn(t+" not found."),console.warn('"'+e+'" resource not found'),r="",a()}))}}}function g(){n={},i="",r=""}function v(e){var t={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function a(e,t){return-1!==t.indexOf(e)}function n(e,t,a){return t<=e&&e<=a}var i={0:function(e){return"other"},1:function(e){return n(e%100,3,10)?"few":0===e?"zero":n(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10===0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return n(e,0,1)?"one":"other"},5:function(e){return n(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return n(e,3,6)?"few":n(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&n(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return n(e%10,2,9)&&!n(e%100,11,19)?"few":e%10!=1||n(e%100,11,19)?"other":"one"},11:function(e){return n(e%10,2,4)&&!n(e%100,12,14)?"few":e%10===0||n(e%10,5,9)||n(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return n(e,2,4)?"few":1==e?"one":"other"},13:function(e){return n(e%10,2,4)&&!n(e%100,12,14)?"few":1!=e&&n(e%10,0,1)||n(e%10,5,9)||n(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return n(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||n(e%100,2,10)?"few":n(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":n(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return n(e,2,10)?"few":n(e,0,1)?"one":"other"},20:function(e){return!n(e%10,3,4)&&e%10!=9||n(e%100,10,19)||n(e%100,70,79)||n(e%100,90,99)?e%1e6===0&&0!==e?"many":e%10!=2||a(e%100,[12,72,92])?e%10!=1||a(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return n(e,0,1)||n(e,11,99)?"one":"other"},23:function(e){return n(e%10,1,2)||e%20===0?"one":"other"},24:function(e){return n(e,3,10)||n(e,13,19)?"few":a(e,[2,12])?"two":a(e,[1,11])?"one":"other"}},o=t[e.replace(/-.*$/,"")];return o in i?i[o]:(console.warn("plural form unknown for ["+e+"]"),function(){return"other"})}function y(e,t,a){var i=n[e];if(!i){if(console.warn("#"+e+" is undefined."),!a)return null;i=a}var o={};for(var r in i){var l=i[r];l=_(l,t,e,r),l=x(l,t,e),o[r]=l}return o}function _(e,t,a,i){var o=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,r=o.exec(e);if(!r||!r.length)return e;var s,c=r[1],u=r[2];if(t&&u in t?s=t[u]:u in n&&(s=n[u]),c in l){var d=l[c];e=d(e,s,a,i)}return e}function x(e,t,a){var i=/\{\{\s*(.+?)\s*\}\}/g;return e.replace(i,(function(e,i){return t&&i in t?t[i]:i in n?n[i]:(console.log("argument {{"+i+"}} for #"+a+" is undefined."),e)}))}function w(e){var a=h(e);if(a.id){var n=y(a.id,a.args);if(n){if(n[o]){if(0===k(e))e[o]=n[o];else{for(var i=e.childNodes,r=!1,l=0,s=i.length;l<s;l++)3===i[l].nodeType&&/\S/.test(i[l].nodeValue)&&(r?i[l].nodeValue="":(i[l].nodeValue=n[o],r=!0));if(!r){var c=t.createTextNode(n[o]);e.insertBefore(c,e.firstChild)}}delete n[o]}for(var u in n)e[u]=n[u]}else console.warn("#"+a.id+" is undefined.")}}function k(e){if(e.children)return e.children.length;if("undefined"!==typeof e.childElementCount)return e.childElementCount;for(var t=0,a=0;a<e.childNodes.length;a++)t+=1===e.nodeType?1:0;return t}function T(e){e=e||t.documentElement;for(var a=p(e),n=a.length,i=0;i<n;i++)w(a[i]);w(e)}return l.plural=function(e,t,a,i){var s=parseFloat(t);if(isNaN(s))return e;if(i!=o)return e;l._pluralRules||(l._pluralRules=v(r));var c="["+l._pluralRules(s)+"]";return 0===s&&a+"[zero]"in n?e=n[a+"[zero]"][i]:1==s&&a+"[one]"in n?e=n[a+"[one]"][i]:2==s&&a+"[two]"in n?e=n[a+"[two]"][i]:a+c in n?e=n[a+c][i]:a+"[other]"in n&&(e=n[a+"[other]"][i]),e},{get:function(e,t,a){var n,i=e.lastIndexOf("."),r=o;i>0&&(r=e.substring(i+1),e=e.substring(0,i)),a&&(n={},n[r]=a);var l=y(e,t,n);return l&&r in l?l[r]:"{{"+e+"}}"},getData:function(){return n},getText:function(){return i},getLanguage:function(){return r},setLanguage:function(e,t){b(e,(function(){t&&t()}))},getDirection:function(){var e=["ar","he","fa","ps","ur"],t=r.split("-",1)[0];return e.indexOf(t)>=0?"rtl":"ltr"},translate:T,getReadyState:function(){return s},ready:function(a){a&&("complete"==s||"interactive"==s?e.setTimeout((function(){a()})):t.addEventListener&&t.addEventListener("localized",(function e(){t.removeEventListener("localized",e),a()})))}}}(window,document)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindController=t.FindState=void 0;var n=a(2),i=a(14),o=a(3);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}var c={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=c;var u=250,d=-50,p=-400,h={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},m=null;function f(e){if(!m){var t=Object.keys(h).join("");m=new RegExp("[".concat(t,"]"),"g")}return e.replace(m,(function(e){return h[e]}))}var b=function(){function e(t){var a=t.linkService,n=t.eventBus;r(this,e),this._linkService=a,this._eventBus=n,this._reset(),n._on("findbarclose",this._onFindBarClose.bind(this))}return s(e,[{key:"setDocument",value:function(e){this._pdfDocument&&this._reset(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}},{key:"executeCommand",value:function(e,t){var a=this;if(t){var n=this._pdfDocument;(null===this._state||this._shouldDirtyMatch(e,t))&&(this._dirtyMatch=!0),this._state=t,"findhighlightallchange"!==e&&this._updateUIState(c.PENDING),this._firstPageCapability.promise.then((function(){if(a._pdfDocument&&(!n||a._pdfDocument===n)){a._extractText();var t=!a._highlightMatches,i=!!a._findTimeout;a._findTimeout&&(clearTimeout(a._findTimeout),a._findTimeout=null),"find"===e?a._findTimeout=setTimeout((function(){a._nextMatch(),a._findTimeout=null}),u):a._dirtyMatch?a._nextMatch():"findagain"===e?(a._nextMatch(),t&&a._state.highlightAll&&a._updateAllPages()):"findhighlightallchange"===e?(i?a._nextMatch():a._highlightMatches=!0,a._updateAllPages()):a._nextMatch()}}))}}},{key:"scrollMatchIntoView",value:function(e){var t=e.element,a=void 0===t?null:t,n=e.pageIndex,i=void 0===n?-1:n,r=e.matchIndex,l=void 0===r?-1:r;if(this._scrollMatches&&a&&-1!==l&&l===this._selected.matchIdx&&-1!==i&&i===this._selected.pageIdx){this._scrollMatches=!1;var s={top:d,left:p};(0,o.scrollIntoView)(a,s,!0)}}},{key:"_reset",value:function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=Object.create(null),this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,n.createPromiseCapability)()}},{key:"_shouldDirtyMatch",value:function(e,t){if(t.query!==this._state.query)return!0;switch(e){case"findagain":var a=this._selected.pageIdx+1,n=this._linkService;return a>=1&&a<=n.pagesCount&&a!==n.page&&!n.isPageVisible(a);case"findhighlightallchange":return!1}return!0}},{key:"_prepareMatches",value:function(e,t,a){function n(t){var a=e[t],n=e[t+1];if(t<e.length-1&&a.match===n.match)return a.skipped=!0,!0;for(var i=t-1;i>=0;i--){var o=e[i];if(!o.skipped){if(o.match+o.matchLength<a.match)break;if(o.match+o.matchLength>=a.match+a.matchLength)return a.skipped=!0,!0}}return!1}e.sort((function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match}));for(var i=0,o=e.length;i<o;i++)n(i)||(t.push(e[i].match),a.push(e[i].matchLength))}},{key:"_isEntireWord",value:function(e,t,a){if(t>0){var n=e.charCodeAt(t),o=e.charCodeAt(t-1);if((0,i.getCharacterType)(n)===(0,i.getCharacterType)(o))return!1}var r=t+a-1;if(r<e.length-1){var l=e.charCodeAt(r),s=e.charCodeAt(r+1);if((0,i.getCharacterType)(l)===(0,i.getCharacterType)(s))return!1}return!0}},{key:"_calculatePhraseMatch",value:function(e,t,a,n){var i=[],o=e.length,r=-o;while(1){if(r=a.indexOf(e,r+o),-1===r)break;n&&!this._isEntireWord(a,r,o)||i.push(r)}this._pageMatches[t]=i}},{key:"_calculateWordMatch",value:function(e,t,a,n){for(var i=[],o=e.match(/\S+/g),r=0,l=o.length;r<l;r++){var s=o[r],c=s.length,u=-c;while(1){if(u=a.indexOf(s,u+c),-1===u)break;n&&!this._isEntireWord(a,u,c)||i.push({match:u,matchLength:c,skipped:!1})}}this._pageMatchesLength[t]=[],this._pageMatches[t]=[],this._prepareMatches(i,this._pageMatches[t],this._pageMatchesLength[t])}},{key:"_calculateMatch",value:function(e){var t=this._pageContents[e],a=this._query,n=this._state,i=n.caseSensitive,o=n.entireWord,r=n.phraseSearch;if(0!==a.length){i||(t=t.toLowerCase(),a=a.toLowerCase()),r?this._calculatePhraseMatch(a,e,t,o):this._calculateWordMatch(a,e,t,o),this._state.highlightAll&&this._updatePage(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this._nextPageMatch());var l=this._pageMatches[e].length;l>0&&(this._matchesCountTotal+=l,this._updateUIResultsCount())}}},{key:"_extractText",value:function(){var e=this;if(!(this._extractTextPromises.length>0))for(var t=Promise.resolve(),a=function(a,i){var o=(0,n.createPromiseCapability)();e._extractTextPromises[a]=o.promise,t=t.then((function(){return e._pdfDocument.getPage(a+1).then((function(e){return e.getTextContent({normalizeWhitespace:!0})})).then((function(t){for(var n=t.items,i=[],r=0,l=n.length;r<l;r++)i.push(n[r].str);e._pageContents[a]=f(i.join("")),o.resolve(a)}),(function(t){console.error("Unable to get text content for page ".concat(a+1),t),e._pageContents[a]="",o.resolve(a)}))}))},i=0,o=this._linkService.pagesCount;i<o;i++)a(i,o)}},{key:"_updatePage",value:function(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}},{key:"_updateAllPages",value:function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function(){var e=this,t=this._state.findPrevious,a=this._linkService.page-1,n=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=a,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(var i=0;i<n;i++)!0!==this._pendingFindMatches[i]&&(this._pendingFindMatches[i]=!0,this._extractTextPromises[i].then((function(t){delete e._pendingFindMatches[t],e._calculateMatch(t)})))}if(""!==this._query){if(!this._resumePageIdx){var o=this._offset;if(this._pagesToSearch=n,null!==o.matchIdx){var r=this._pageMatches[o.pageIdx].length;if(!t&&o.matchIdx+1<r||t&&o.matchIdx>0)return o.matchIdx=t?o.matchIdx-1:o.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(t)}this._nextPageMatch()}}else this._updateUIState(c.FOUND)}},{key:"_matchesReady",value:function(e){var t=this._offset,a=e.length,n=this._state.findPrevious;return a?(t.matchIdx=n?a-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(n),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}},{key:"_nextPageMatch",value:function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var e=null;do{var t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this._matchesReady(e))}},{key:"_advanceOffsetPage",value:function(e){var t=this._offset,a=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=a||t.pageIdx<0)&&(t.pageIdx=e?a-1:0,t.wrapped=!0)}},{key:"_updateMatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=c.NOT_FOUND,a=this._offset.wrapped;if(this._offset.wrapped=!1,e){var n=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=a?c.WRAPPED:c.FOUND,-1!==n&&n!==this._selected.pageIdx&&this._updatePage(n)}this._updateUIState(t,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}},{key:"_onFindBarClose",value:function(e){var t=this,a=this._pdfDocument;this._firstPageCapability.promise.then((function(){!t._pdfDocument||a&&t._pdfDocument!==a||(t._findTimeout&&(clearTimeout(t._findTimeout),t._findTimeout=null),t._resumePageIdx&&(t._resumePageIdx=null,t._dirtyMatch=!0),t._updateUIState(c.FOUND),t._highlightMatches=!1,t._updateAllPages())}))}},{key:"_requestMatchesCount",value:function(){var e=this._selected,t=e.pageIdx,a=e.matchIdx,n=0,i=this._matchesCountTotal;if(-1!==a){for(var o=0;o<t;o++)n+=this._pageMatches[o]&&this._pageMatches[o].length||0;n+=a+1}return(n<1||n>i)&&(n=i=0),{current:n,total:i}}},{key:"_updateUIResultsCount",value:function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function(e,t){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,matchesCount:this._requestMatchesCount(),rawQuery:this._state?this._state.query:null})}},{key:"highlightMatches",get:function(){return this._highlightMatches}},{key:"pageMatches",get:function(){return this._pageMatches}},{key:"pageMatchesLength",get:function(){return this._pageMatchesLength}},{key:"selected",get:function(){return this._selected}},{key:"state",get:function(){return this._state}},{key:"_query",get:function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,this._normalizedQuery=f(this._state.query)),this._normalizedQuery}}]),e}();t.PDFFindController=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCharacterType=m,t.CharacterType=void 0;var n={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function i(e){return e<11904}function o(e){return 0===(65408&e)}function r(e){return e>=97&&e<=122||e>=65&&e<=90}function l(e){return e>=48&&e<=57}function s(e){return 32===e||9===e||13===e||10===e}function c(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}function u(e){return e>=12448&&e<=12543}function d(e){return e>=12352&&e<=12447}function p(e){return e>=65376&&e<=65439}function h(e){return 3584===(65408&e)}function m(e){return i(e)?o(e)?s(e)?n.SPACE:r(e)||l(e)||95===e?n.ALPHA_LETTER:n.PUNCT:h(e)?n.THAI_LETTER:160===e?n.SPACE:n.ALPHA_LETTER:c(e)?n.HAN_LETTER:u(e)?n.KATAKANA_LETTER:d(e)?n.HIRAGANA_LETTER:p(e)?n.HALFWIDTH_KATAKANA_LETTER:n.ALPHA_LETTER}t.CharacterType=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDestHashesEqual=y,t.isDestArraysEqual=_,t.PDFHistory=void 0;var n=a(3);function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){return u(e)||c(e,t)||l(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(s){i=!0,o=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}}function u(e){if(Array.isArray(e))return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),e}var m=1e3,f=50,b=1e3;function g(){return document.location.hash}var v=function(){function e(t){var a=this,n=t.linkService,i=t.eventBus;d(this,e),this.linkService=n,this.eventBus=i,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",(function(e){a._isViewerInPresentationMode=e.active||e.switchInProgress})),this.eventBus._on("pagesinit",(function(){a._isPagesLoaded=!1;var e=function e(t){a.eventBus._off("pagesloaded",e),a._isPagesLoaded=!!t.pagesCount};a.eventBus._on("pagesloaded",e)}))}return h(e,[{key:"initialize",value:function(e){var t=e.fingerprint,a=e.resetHistory,n=void 0!==a&&a,i=e.updateUrl,o=void 0!==i&&i;if(t&&"string"===typeof t){this._initialized&&this.reset();var r=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===o,this._initialized=!0,this._bindEvents();var l=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=g(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(l,!0)||n){var s=this._parseCurrentHash(!0),c=s.hash,u=s.page,d=s.rotation;return!c||r||n?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:c,page:u,rotation:d},!0)}var p=l.destination;this._updateInternalState(p,l.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),void 0!==p.rotation&&(this._initialRotation=p.rotation),p.dest?(this._initialBookmark=JSON.stringify(p.dest),this._destination.page=null):p.hash?this._initialBookmark=p.hash:p.page&&(this._initialBookmark="page=".concat(p.page))}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function(e){var t=this,a=e.namedDest,n=void 0===a?null:a,i=e.explicitDest,o=e.pageNumber;if(this._initialized)if(n&&"string"!==typeof n)console.error("PDFHistory.push: "+'"'.concat(n,'" is not a valid namedDest parameter.'));else if(Array.isArray(i))if(Number.isInteger(o)&&o>0&&o<=this.linkService.pagesCount||null===o&&!this._destination){var r=n||JSON.stringify(i);if(r){var l=!1;if(this._destination&&(y(this._destination.hash,r)||_(this._destination.dest,i))){if(this._destination.page)return;l=!0}this._popStateInProgress&&!l||(this._pushOrReplaceState({dest:i,hash:r,page:o,rotation:this.linkService.rotation},l),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){t._popStateInProgress=!1}))))}}else console.error("PDFHistory.push: "+'"'.concat(o,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(i,'" is not a valid explicitDest parameter.'))}},{key:"pushCurrentPosition",value:function(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function(){if(this._initialized&&!this._popStateInProgress){var e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}}},{key:"forward",value:function(){if(this._initialized&&!this._popStateInProgress){var e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}}},{key:"_pushOrReplaceState",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a||!this._destination,i={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:e};if(this._updateInternalState(e,i.uid),this._updateUrl&&e&&e.hash){var o=document.location.href.split("#")[0];o.startsWith("file://")||(t="".concat(o,"#").concat(e.hash))}n?window.history.replaceState(i,"",t):(this._maxUid=this._uid,window.history.pushState(i,"",t))}},{key:"_tryPushCurrentPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(t,!0);else if(this._destination.hash!==t.hash&&(this._destination.page||!(f<=0||this._numPositionUpdates<=f))){var a=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest||!this._destination.first)return;a=!0}this._pushOrReplaceState(t,a)}}else this._pushOrReplaceState(t)}}},{key:"_isValidState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;if("string"!==typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;var a=performance.getEntriesByType("navigation"),n=o(a,1),r=n[0];if(!r||"reload"!==r.type)return!1}return!(!Number.isInteger(e.uid)||e.uid<0)&&(null!==e.destination&&"object"===i(e.destination))}},{key:"_updateInternalState",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),a&&e&&e.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=unescape(g()).substring(1),a=(0,n.parseQueryString)(t),i=a.nameddest||"",o=0|a.page;return Number.isInteger(o)&&o>0&&o<=this.linkService.pagesCount&&!(e&&i.length>0)||(o=null),{hash:t,page:o,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function(e){var t=this,a=e.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page=".concat(a.pageNumber):a.pdfOpenParams.substring(1),page:this.linkService.page,first:a.pageNumber,rotation:a.rotation},this._popStateInProgress||(f>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,b>0&&(this._updateViewareaTimeout=setTimeout((function(){t._popStateInProgress||t._tryPushCurrentPosition(!0),t._updateViewareaTimeout=null}),b)))}},{key:"_popState",value:function(e){var t=this,a=e.state,i=g(),o=this._currentHash!==i;if(this._currentHash=i,a){if(this._isValidState(a)){this._popStateInProgress=!0,o&&(this._blockHashChange++,(0,n.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:m}).then((function(){t._blockHashChange--})));var r=a.destination;this._updateInternalState(r,a.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),(0,n.isValidRotation)(r.rotation)&&(this.linkService.rotation=r.rotation),r.dest?this.linkService.navigateTo(r.dest):r.hash?this.linkService.setHash(r.hash):r.page&&(this.linkService.page=r.page),Promise.resolve().then((function(){t._popStateInProgress=!1}))}}else{this._uid++;var l=this._parseCurrentHash(),s=l.hash,c=l.page,u=l.rotation;this._pushOrReplaceState({hash:s,page:c,rotation:u},!0)}}},{key:"_pageHide",value:function(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}},{key:"_unbindEvents",value:function(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}},{key:"popStateInProgress",get:function(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function(){return this._initialized?this._initialRotation:null}}]),e}();function y(e,t){if("string"!==typeof e||"string"!==typeof t)return!1;if(e===t)return!0;var a=(0,n.parseQueryString)(e),i=a.nameddest;return i===t}function _(e,t){function a(e,t){if(i(e)!==i(t))return!1;if(Array.isArray(e)||Array.isArray(t))return!1;if(null!==e&&"object"===i(e)&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!a(e[n],t[n]))return!1;return!0}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0,o=e.length;n<o;n++)if(!a(e[n],t[n]))return!1;return!0}t.PDFHistory=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPageView=void 0;var n=s(a(4)),i=a(3),o=a(2),r=a(17),l=a(10);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a,n,i,o,r){try{var l=e[o](r),s=l.value}catch(c){return void a(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){c(o,n,i,r,l,"next",e)}function l(e){c(o,n,i,r,l,"throw",e)}r(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),e}var m=l.viewerCompatibilityParams.maxCanvasPixels||16777216,f=function(){function e(t){d(this,e);var a=t.container,n=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||i.DEFAULT_SCALE,this.viewport=n,this.pdfPageRotate=n.rotation,this._annotationStorage=t.annotationStorage||null,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:i.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms="boolean"!==typeof t.renderInteractiveForms||t.renderInteractiveForms,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels||m,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.textLayerFactory=t.textLayerFactory,this.annotationLayerFactory=t.annotationLayerFactory,this.renderer=t.renderer||i.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.l10n=t.l10n||i.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=r.RenderingStates.INITIAL,this.resume=null,this.error=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;var o=document.createElement("div");o.className="page",o.style.width=Math.floor(this.viewport.width)+"px",o.style.height=Math.floor(this.viewport.height)+"px",o.setAttribute("data-page-number",this.id),this.div=o,a.appendChild(o)}return h(e,[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*i.CSS_UNITS,rotation:t}),this.stats=e.stats,this.reset()}},{key:"destroy",value:function(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_renderAnnotationLayer",value:function(){var e=u(n["default"].mark((function e(){var t;return n["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,this.annotationLayer.render(this.viewport,"display");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),t=e.t0;case 9:return e.prev=9,this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t}),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_resetZoomLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var t=this.zoomLayer.firstChild;this.paintedViewportMap["delete"](t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cancelRendering(t),this.renderingState=r.RenderingStates.INITIAL;var a=this.div;a.style.width=Math.floor(this.viewport.width)+"px",a.style.height=Math.floor(this.viewport.height)+"px";for(var n=a.childNodes,i=e&&this.zoomLayer||null,o=t&&this.annotationLayer&&this.annotationLayer.div||null,l=n.length-1;l>=0;l--){var s=n[l];i!==s&&o!==s&&a.removeChild(s)}a.removeAttribute("data-loaded"),o?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),i||(this.canvas&&(this.paintedViewportMap["delete"](this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap["delete"](this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",a.appendChild(this.loadingIconDiv)}},{key:"update",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.scale=e||this.scale,"undefined"!==typeof t&&(this.rotation=t),a instanceof Promise&&(this._optionalContentConfigPromise=a);var n=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*i.CSS_UNITS,rotation:n}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});var o=!1;if(this.canvas&&this.maxCanvasPixels>0){var r=this.outputScale;(Math.floor(this.viewport.width)*r.sx|0)*(Math.floor(this.viewport.height)*r.sy|0)>this.maxCanvasPixels&&(o=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&o)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}},{key:"cancelRendering",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!e&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}},{key:"cssTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.viewport.width,n=this.viewport.height,i=this.div;e.style.width=e.parentNode.style.width=i.style.width=Math.floor(a)+"px",e.style.height=e.parentNode.style.height=i.style.height=Math.floor(n)+"px";var o=this.viewport.rotation-this.paintedViewportMap.get(e).rotation,r=Math.abs(o),l=1,s=1;90!==r&&270!==r||(l=n/a,s=a/n);var c="rotate("+o+"deg) scale("+l+","+s+")";if(e.style.transform=c,this.textLayer){var u=this.textLayer.viewport,d=this.viewport.rotation-u.rotation,p=Math.abs(d),h=a/u.width;90!==p&&270!==p||(h=a/u.height);var m,f,b=this.textLayer.textLayerDiv;switch(p){case 0:m=f=0;break;case 90:m=0,f="-"+b.style.height;break;case 180:m="-"+b.style.width,f="-"+b.style.height;break;case 270:m="-"+b.style.width,f=0;break;default:console.error("Bad rotation value.");break}b.style.transform="rotate("+p+"deg) scale("+h+", "+h+") translate("+m+", "+f+")",b.style.transformOrigin="0% 0%"}t&&this.annotationLayer&&this._renderAnnotationLayer()}},{key:"getPagePoint",value:function(e,t){return this.viewport.convertToPdfPoint(e,t)}},{key:"draw",value:function(){var e=this;this.renderingState!==r.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var t=this.div,a=this.pdfPage;if(!a)return this.renderingState=r.RenderingStates.FINISHED,this.loadingIconDiv&&(t.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=r.RenderingStates.RUNNING;var l=document.createElement("div");l.style.width=t.style.width,l.style.height=t.style.height,l.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?t.insertBefore(l,this.annotationLayer.div):t.appendChild(l);var s=null;if(this.textLayerMode!==i.TextLayerMode.DISABLE&&this.textLayerFactory){var c=document.createElement("div");c.className="textLayer",c.style.width=l.style.width,c.style.height=l.style.height,this.annotationLayer&&this.annotationLayer.div?t.insertBefore(c,this.annotationLayer.div):t.appendChild(c),s=this.textLayerFactory.createTextLayerBuilder(c,this.id-1,this.viewport,this.textLayerMode===i.TextLayerMode.ENABLE_ENHANCE,this.eventBus)}this.textLayer=s;var d=null;this.renderingQueue&&(d=function(t){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=r.RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=r.RenderingStates.RUNNING,t()});t()});var p=function(){var i=u(n["default"].mark((function i(l){return n["default"].wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(h===e.paintTask&&(e.paintTask=null),!(l instanceof o.RenderingCancelledException)){n.next=4;break}return e.error=null,n.abrupt("return");case 4:if(e.renderingState=r.RenderingStates.FINISHED,e.loadingIconDiv&&(t.removeChild(e.loadingIconDiv),delete e.loadingIconDiv),e._resetZoomLayer(!0),e.error=l,e.stats=a.stats,e.eventBus.dispatch("pagerendered",{source:e,pageNumber:e.id,cssTransform:!1,timestamp:performance.now()}),!l){n.next=12;break}throw l;case 12:case"end":return n.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),h=this.renderer===i.RendererType.SVG?this.paintOnSvg(l):this.paintOnCanvas(l);h.onRenderContinue=d,this.paintTask=h;var m=h.promise.then((function(){return p(null).then((function(){if(s){var e=a.streamTextContent({normalizeWhitespace:!0});s.setTextContentStream(e),s.render()}}))}),(function(e){return p(e)}));return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(t,a,this._annotationStorage,this.imageResourcesPath,this.renderInteractiveForms,this.l10n)),this._renderAnnotationLayer()),t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),m}},{key:"paintOnCanvas",value:function(e){var t=(0,o.createPromiseCapability)(),a={promise:t.promise,onRenderContinue:function(e){e()},cancel:function(){v.cancel()}},n=this.viewport,r=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id},"Page {{page}}").then((function(e){r.setAttribute("aria-label",e)})),r.setAttribute("hidden","hidden");var l=!0,s=function(){l&&(r.removeAttribute("hidden"),l=!1)};e.appendChild(r),this.canvas=r,r.mozOpaque=!0;var c=r.getContext("2d",{alpha:!1}),u=(0,i.getOutputScale)(c);if(this.outputScale=u,this.useOnlyCssZoom){var d=n.clone({scale:i.CSS_UNITS});u.sx*=d.width/n.width,u.sy*=d.height/n.height,u.scaled=!0}if(this.maxCanvasPixels>0){var p=n.width*n.height,h=Math.sqrt(this.maxCanvasPixels/p);u.sx>h||u.sy>h?(u.sx=h,u.sy=h,u.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var m=(0,i.approximateFraction)(u.sx),f=(0,i.approximateFraction)(u.sy);r.width=(0,i.roundToDivide)(n.width*u.sx,m[0]),r.height=(0,i.roundToDivide)(n.height*u.sy,f[0]),r.style.width=(0,i.roundToDivide)(n.width,m[1])+"px",r.style.height=(0,i.roundToDivide)(n.height,f[1])+"px",this.paintedViewportMap.set(r,n);var b=u.scaled?[u.sx,0,0,u.sy,0,0]:null,g={canvasContext:c,transform:b,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms,optionalContentConfigPromise:this._optionalContentConfigPromise},v=this.pdfPage.render(g);return v.onContinue=function(e){s(),a.onRenderContinue?a.onRenderContinue(e):e()},v.promise.then((function(){s(),t.resolve(void 0)}),(function(e){s(),t.reject(e)})),a}},{key:"paintOnSvg",value:function(e){var t=this,a=!1,n=function(){if(a)throw new o.RenderingCancelledException("Rendering cancelled, page ".concat(t.id),"svg")},l=this.pdfPage,s=this.viewport.clone({scale:i.CSS_UNITS}),c=l.getOperatorList().then((function(a){n();var i=new o.SVGGraphics(l.commonObjs,l.objs);return i.getSVG(a,s).then((function(a){n(),t.svg=a,t.paintedViewportMap.set(a,s),a.style.width=e.style.width,a.style.height=e.style.height,t.renderingState=r.RenderingStates.FINISHED,e.appendChild(a)}))}));return{promise:c,onRenderContinue:function(e){e()},cancel:function(){a=!0}}}},{key:"setPageLabel",value:function(e){this.pageLabel="string"===typeof e?e:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}}]),e}();t.PDFPageView=f},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFRenderingQueue=t.RenderingStates=void 0;var r=3e4,l={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.RenderingStates=l;var s=function(){function e(){n(this,e),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return o(e,[{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setThumbnailViewer",value:function(e){this.pdfThumbnailViewer=e}},{key:"isHighestPriority",value:function(e){return this.highestPriorityPage===e.renderingId}},{key:"renderHighestPriority",value:function(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),r))}},{key:"getHighestPriority",value:function(e,t,a){var n=e.views,i=n.length;if(0===i)return null;for(var o=0;o<i;++o){var r=n[o].view;if(!this.isViewFinished(r))return r}if(a){var l=e.last.id;if(t[l]&&!this.isViewFinished(t[l]))return t[l]}else{var s=e.first.id-2;if(t[s]&&!this.isViewFinished(t[s]))return t[s]}return null}},{key:"isViewFinished",value:function(e){return e.renderingState===l.FINISHED}},{key:"renderView",value:function(e){var t=this;switch(e.renderingState){case l.FINISHED:return!1;case l.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case l.RUNNING:this.highestPriorityPage=e.renderingId;break;case l.INITIAL:this.highestPriorityPage=e.renderingId,e.draw()["finally"]((function(){t.renderHighestPriority()}))["catch"]((function(e){console.error('renderView: "'.concat(e,'"'))}));break}return!0}}]),e}();t.PDFRenderingQueue=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSinglePageViewer=void 0;var n=a(19),i=a(2);function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}function c(e,t,a){return c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=u(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}},c(e,t,a||e)}function u(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=g(e),null===e)break;return e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=b();return function(){var a,n=g(e);if(t){var i=g(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return m(this,a)}}function m(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=function(e){d(a,e);var t=h(a);function a(e){var n;return r(this,a),n=t.call(this,e),n.eventBus._on("pagesinit",(function(e){n._ensurePageViewVisible()})),n}return s(a,[{key:"_resetView",value:function(){c(g(a.prototype),"_resetView",this).call(this),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment(),this._updateScrollDown=null}},{key:"_ensurePageViewVisible",value:function(){var e=this._pages[this._currentPageNumber-1],t=this._pages[this._previousPageNumber-1],a=this.viewer.childNodes;switch(a.length){case 0:this.viewer.appendChild(e.div);break;case 1:if(a[0]!==t.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(e===t)break;this._shadowViewer.appendChild(t.div),this.viewer.appendChild(e.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}},{key:"_scrollUpdate",value:function(){this._updateScrollDown&&this._updateScrollDown(),c(g(a.prototype),"_scrollUpdate",this).call(this)}},{key:"_scrollIntoView",value:function(e){var t=this,n=e.pageDiv,i=e.pageSpot,o=void 0===i?null:i,r=e.pageNumber,l=void 0===r?null:r;l&&this._setCurrentPageNumber(l);var s=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible(),this.update(),c(g(a.prototype),"_scrollIntoView",this).call(this,{pageDiv:n,pageSpot:o,pageNumber:l}),this._updateScrollDown=function(){t.scroll.down=s,t._updateScrollDown=null}}},{key:"_getVisiblePages",value:function(){return this._getCurrentVisiblePage()}},{key:"_updateHelper",value:function(e){}},{key:"_updateScrollMode",value:function(){}},{key:"_updateSpreadMode",value:function(){}},{key:"_viewerElement",get:function(){return(0,i.shadow)(this,"_viewerElement",this._shadowViewer)}},{key:"_isScrollModeHorizontal",get:function(){return(0,i.shadow)(this,"_isScrollModeHorizontal",!1)}}]),a}(n.BaseViewer);t.PDFSinglePageViewer=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseViewer=void 0;var n=a(3),i=a(17),o=a(1),r=a(2),l=a(16),s=a(7),c=a(8);function u(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=d(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,a){return t&&m(e.prototype,t),a&&m(e,a),e}var b=10;function g(e){var t=[];this.push=function(a){var n=t.indexOf(a);n>=0&&t.splice(n,1),t.push(a),t.length>e&&t.shift().destroy()},this.resize=function(a,i){if(e=a,i){for(var o=new Set,r=0,l=i.length;r<l;++r)o.add(i[r].id);(0,n.moveToEndOfArray)(t,(function(e){return o.has(e.id)}))}while(t.length>e)t.shift().destroy()}}function v(e,t){return t===e||Math.abs(t-e)<1e-15}var y=function(){function e(t){var a=this;if(h(this,e),this.constructor===e)throw new Error("Cannot initialize BaseViewer.");if(this._name=this.constructor.name,this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,!(this.container instanceof HTMLDivElement&&this.viewer instanceof HTMLDivElement))throw new Error("Invalid `container` and/or `viewer` option.");this.eventBus=t.eventBus,this.linkService=t.linkService||new s.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:n.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms="boolean"!==typeof t.renderInteractiveForms||t.renderInteractiveForms,this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||n.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||n.NullL10n,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new i.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this.scroll=(0,n.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=n.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then((function(){a.eventBus.dispatch("baseviewerinit",{source:a})}))}return f(e,[{key:"getPageView",value:function(e){return this._pages[e]}},{key:"_setCurrentPageNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._currentPageNumber===e?(t&&this._resetCurrentPageView(),!0):0<e&&e<=this.pagesCount&&(this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels&&this._pageLabels[e-1]}),t&&this._resetCurrentPageView(),!0)}},{key:"_onePageRenderedOrForceFetch",value:function(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}},{key:"setDocument",value:function(e){var t=this;if(this.pdfDocument&&(this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null)),this.pdfDocument=e,e){var a=e.numPages,i=e.getPage(1),o=e.annotationStorage,r=e.getOptionalContentConfig();this._pagesCapability.promise.then((function(){t.eventBus.dispatch("pagesloaded",{source:t,pagesCount:a})})),this._onBeforeDraw=function(e){var a=t._pages[e.pageNumber-1];a&&t._buffer.push(a)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=function(e){e.cssTransform||t._onePageRenderedCapability.settled||(t._onePageRenderedCapability.resolve(),t.eventBus._off("pagerendered",t._onAfterDraw),t._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),i.then((function(i){t._firstPageCapability.resolve(i),t._optionalContentConfigPromise=r;for(var s=t.currentScale,c=i.getViewport({scale:s*n.CSS_UNITS}),u=t.textLayerMode!==n.TextLayerMode.DISABLE?t:null,d=1;d<=a;++d){var p=new l.PDFPageView({container:t._viewerElement,eventBus:t.eventBus,id:d,scale:s,defaultViewport:c.clone(),annotationStorage:o,optionalContentConfigPromise:r,renderingQueue:t.renderingQueue,textLayerFactory:u,textLayerMode:t.textLayerMode,annotationLayerFactory:t,imageResourcesPath:t.imageResourcesPath,renderInteractiveForms:t.renderInteractiveForms,renderer:t.renderer,enableWebGL:t.enableWebGL,useOnlyCssZoom:t.useOnlyCssZoom,maxCanvasPixels:t.maxCanvasPixels,l10n:t.l10n});t._pages.push(p)}var h=t._pages[0];h&&(h.setPdfPage(i),t.linkService.cachePageRef(1,i.ref)),t._spreadMode!==n.SpreadMode.NONE&&t._updateSpreadMode(),t._onePageRenderedOrForceFetch().then((function(){if(t.findController&&t.findController.setDocument(e),e.loadingParams.disableAutoFetch||a>7500)t._pagesCapability.resolve();else{var n=a-1;if(n<=0)t._pagesCapability.resolve();else for(var i=function(a){e.getPage(a).then((function(e){var i=t._pages[a-1];i.pdfPage||i.setPdfPage(e),t.linkService.cachePageRef(a,e.ref),0===--n&&t._pagesCapability.resolve()}),(function(e){console.error("Unable to get page ".concat(a," to initialize viewer"),e),0===--n&&t._pagesCapability.resolve()}))},o=2;o<=a;++o)i(o)}})),t.eventBus.dispatch("pagesinit",{source:t}),t.defaultRenderingQueue&&t.update()}))["catch"]((function(e){console.error("Unable to initialize viewer",e)}))}}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("".concat(this._name,".setPageLabels: Invalid page labels."))):this._pageLabels=null;for(var t=0,a=this._pages.length;t<a;t++){var n=this._pages[t],i=this._pageLabels&&this._pageLabels[t];n.setPageLabel(i)}}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=n.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new g(b),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,r.createPromiseCapability)(),this._onePageRenderedCapability=(0,r.createPromiseCapability)(),this._pagesCapability=(0,r.createPromiseCapability)(),this._scrollMode=n.ScrollMode.VERTICAL,this._spreadMode=n.SpreadMode.NONE,this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function(e){var t=e.pageDiv,a=e.pageSpot,i=void 0===a?null:a;e.pageNumber;(0,n.scrollIntoView)(t,i)}},{key:"_setScaleUpdatePages",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=t.toString(),v(this._currentScale,e))n&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});else{for(var i=0,o=this._pages.length;i<o;i++)this._pages[i].update(e);if(this._currentScale=e,!a){var r,l=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(l=this._location.pageNumber,r=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:l,destArray:r,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n?t:void 0}),this.defaultRenderingQueue&&this.update()}}},{key:"_setScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=parseFloat(e);if(a>0)this._setScaleUpdatePages(a,e,t,!1);else{var i=this._pages[this._currentPageNumber-1];if(!i)return;var o=this.isInPresentationMode||this.removePageBorders,r=o?0:n.SCROLLBAR_PADDING,l=o?0:n.VERTICAL_PADDING;if(!o&&this._isScrollModeHorizontal){var s=[l,r];r=s[0],l=s[1]}var c=(this.container.clientWidth-r)/i.width*i.scale,u=(this.container.clientHeight-l)/i.height*i.scale;switch(e){case"page-actual":a=1;break;case"page-width":a=c;break;case"page-height":a=u;break;case"page-fit":a=Math.min(c,u);break;case"auto":var d=(0,n.isPortraitOrientation)(i)?c:Math.min(u,c);a=Math.min(n.MAX_AUTO_SCALE,d);break;default:return void console.error("".concat(this._name,'._setScale: "').concat(e,'" is an unknown zoom value.'))}this._setScaleUpdatePages(a,e,t,!0)}}},{key:"_resetCurrentPageView",value:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var e=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:e.div})}},{key:"scrollPageIntoView",value:function(e){var t=e.pageNumber,a=e.destArray,i=void 0===a?null:a,o=e.allowNegativeOffset,r=void 0!==o&&o,l=e.ignoreDestinationZoom,s=void 0!==l&&l;if(this.pdfDocument){var c=Number.isInteger(t)&&this._pages[t-1];if(c)if(!this.isInPresentationMode&&i){var u,d,p=0,h=0,m=0,f=0,b=c.rotation%180!==0,g=(b?c.height:c.width)/c.scale/n.CSS_UNITS,v=(b?c.width:c.height)/c.scale/n.CSS_UNITS,y=0;switch(i[1].name){case"XYZ":p=i[2],h=i[3],y=i[4],p=null!==p?p:0,h=null!==h?h:v;break;case"Fit":case"FitB":y="page-fit";break;case"FitH":case"FitBH":h=i[2],y="page-width",null===h&&this._location&&(p=this._location.left,h=this._location.top);break;case"FitV":case"FitBV":p=i[2],m=g,f=v,y="page-height";break;case"FitR":p=i[2],h=i[3],m=i[4]-p,f=i[5]-h;var _=this.removePageBorders?0:n.SCROLLBAR_PADDING,x=this.removePageBorders?0:n.VERTICAL_PADDING;u=(this.container.clientWidth-_)/m/n.CSS_UNITS,d=(this.container.clientHeight-x)/f/n.CSS_UNITS,y=Math.min(Math.abs(u),Math.abs(d));break;default:return void console.error("".concat(this._name,".scrollPageIntoView: ")+'"'.concat(i[1].name,'" is not a valid destination type.'))}if(s||(y&&y!==this._currentScale?this.currentScaleValue=y:this._currentScale===n.UNKNOWN_SCALE&&(this.currentScaleValue=n.DEFAULT_SCALE_VALUE)),"page-fit"!==y||i[4]){var w=[c.viewport.convertToViewportPoint(p,h),c.viewport.convertToViewportPoint(p+m,h+f)],k=Math.min(w[0][0],w[1][0]),T=Math.min(w[0][1],w[1][1]);r||(k=Math.max(k,0),T=Math.max(T,0)),this._scrollIntoView({pageDiv:c.div,pageSpot:{left:k,top:T},pageNumber:t})}else this._scrollIntoView({pageDiv:c.div,pageNumber:t})}else this._setCurrentPageNumber(t,!0);else console.error("".concat(this._name,".scrollPageIntoView: ")+'"'.concat(t,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(e){var t=this._currentScale,a=this._currentScaleValue,n=parseFloat(a)===t?Math.round(1e4*t)/100:a,i=e.id,o="#page="+i;o+="&zoom="+n;var r=this._pages[i-1],l=this.container,s=r.getPagePoint(l.scrollLeft-e.x,l.scrollTop-e.y),c=Math.round(s[0]),u=Math.round(s[1]);o+=","+c+","+u,this._location={pageNumber:i,scale:n,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:o}}},{key:"_updateHelper",value:function(e){throw new Error("Not implemented: _updateHelper")}},{key:"update",value:function(){var e=this._getVisiblePages(),t=e.views,a=t.length;if(0!==a){var n=Math.max(b,2*a+1);this._buffer.resize(n,t),this.renderingQueue.renderHighestPriority(e),this._updateHelper(t),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function(e){return this.container.contains(e)}},{key:"focus",value:function(){this.container.focus()}},{key:"_getCurrentVisiblePage",value:function(){if(!this.pagesCount)return{views:[]};var e=this._pages[this._currentPageNumber-1],t=e.div,a={id:e.id,x:t.offsetLeft+t.clientLeft,y:t.offsetTop+t.clientTop,view:e};return{first:a,last:a,views:[a]}}},{key:"_getVisiblePages",value:function(){return(0,n.getVisibleElements)(this.container,this._pages,!0,this._isScrollModeHorizontal)}},{key:"isPageVisible",value:function(e){return!!this.pdfDocument&&(e<1||e>this.pagesCount?(console.error("".concat(this._name,'.isPageVisible: "').concat(e,'" is out of bounds.')),!1):this._getVisiblePages().views.some((function(t){return t.id===e})))}},{key:"cleanup",value:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].renderingState!==i.RenderingStates.FINISHED&&this._pages[e].reset()}},{key:"_cancelRendering",value:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function(e){var t=this;if(e.pdfPage)return Promise.resolve(e.pdfPage);if(this._pagesRequests.has(e))return this._pagesRequests.get(e);var a=this.pdfDocument.getPage(e.id).then((function(a){return e.pdfPage||e.setPdfPage(a),t._pagesRequests["delete"](e),a}))["catch"]((function(a){console.error("Unable to get page for page view",a),t._pagesRequests["delete"](e)}));return this._pagesRequests.set(e,a),a}},{key:"forceRendering",value:function(e){var t=this,a=e||this._getVisiblePages(),n=this._isScrollModeHorizontal?this.scroll.right:this.scroll.down,i=this.renderingQueue.getHighestPriority(a,this._pages,n);return!!i&&(this._ensurePdfPageLoaded(i).then((function(){t.renderingQueue.renderView(i)})),!0)}},{key:"createTextLayerBuilder",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;return new c.TextLayerBuilder({textLayerDiv:e,eventBus:i,pageIndex:t,viewport:a,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&n})}},{key:"createAnnotationLayerBuilder",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.NullL10n;return new o.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:a,imageResourcesPath:i,renderInteractiveForms:r,linkService:this.linkService,downloadManager:this.downloadManager,l10n:l})}},{key:"getPagesOverview",value:function(){var e=this._pages.map((function(e){var t=e.pdfPage.getViewport({scale:1});return{width:t.width,height:t.height,rotation:t.rotation}}));return this.enablePrintAutoRotate?e.map((function(e){return(0,n.isPortraitOrientation)(e)?e:{width:e.height,height:e.width,rotation:(e.rotation+90)%360}})):e}},{key:"_updateScrollMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._scrollMode,a=this.viewer;a.classList.toggle("scrollHorizontal",t===n.ScrollMode.HORIZONTAL),a.classList.toggle("scrollWrapped",t===n.ScrollMode.WRAPPED),this.pdfDocument&&e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(e,!0),this.update())}},{key:"_updateSpreadMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var t=this.viewer,a=this._pages;if(t.textContent="",this._spreadMode===n.SpreadMode.NONE)for(var i=0,o=a.length;i<o;++i)t.appendChild(a[i].div);else for(var r=this._spreadMode-1,l=null,s=0,c=a.length;s<c;++s)null===l?(l=document.createElement("div"),l.className="spread",t.appendChild(l)):s%2===r&&(l=l.cloneNode(!1),t.appendChild(l)),l.appendChild(a[s].div);e&&(this._setCurrentPageNumber(e,!0),this.update())}}},{key:"pagesCount",get:function(){return this._pages.length}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every((function(e){return e&&e.pdfPage}))}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error("".concat(this._name,'.currentPageNumber: "').concat(e,'" is not a valid page.')))}},{key:"currentPageLabel",get:function(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]},set:function(e){if(this.pdfDocument){var t=0|e;if(this._pageLabels){var a=this._pageLabels.indexOf(e);a>=0&&(t=a+1)}this._setCurrentPageNumber(t,!0)||console.error("".concat(this._name,'.currentPageLabel: "').concat(e,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return this._currentScale!==n.UNKNOWN_SCALE?this._currentScale:n.DEFAULT_SCALE},set:function(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(e,!1)}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(e){this.pdfDocument&&this._setScale(e,!1)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!(0,n.isValidRotation)(e))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;for(var t=this._currentPageNumber,a=0,i=this._pages.length;a<i;a++){var o=this._pages[a];o.update(o.scale,e)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_viewerElement",get:function(){throw new Error("Not implemented: _viewerElement")}},{key:"_isScrollModeHorizontal",get:function(){return!this.isInPresentationMode&&this._scrollMode===n.ScrollMode.HORIZONTAL}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===n.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===n.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"hasEqualPageSizes",get:function(){for(var e=this._pages[0],t=1,a=this._pages.length;t<a;++t){var n=this._pages[t];if(n.width!==e.width||n.height!==e.height)return!1}return!0}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)},set:function(e){if(!(e instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(e));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=e;var t,a=u(this._pages);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.update(n.scale,n.rotation,e)}}catch(i){a.e(i)}finally{a.f()}this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e})}}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(e){if(this._scrollMode!==e){if(!(0,n.isValidScrollMode)(e))throw new Error("Invalid scroll mode: ".concat(e));this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber)}}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(e){if(this._spreadMode!==e){if(!(0,n.isValidSpreadMode)(e))throw new Error("Invalid spread mode: ".concat(e));this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}}]),e}();t.BaseViewer=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFViewer=void 0;var n=a(19),i=a(2);function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"===typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,a){return t&&u(e.prototype,t),a&&u(e,a),e}function p(e,t,a){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=h(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}},p(e,t,a||e)}function h(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=_(e),null===e)break;return e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function b(e){var t=y();return function(){var a,n=_(e);if(t){var i=_(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return g(this,a)}}function g(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var x=function(e){m(a,e);var t=b(a);function a(){return c(this,a),t.apply(this,arguments)}return d(a,[{key:"_scrollIntoView",value:function(e){var t=e.pageDiv,n=e.pageSpot,i=void 0===n?null:n,o=e.pageNumber,r=void 0===o?null:o;if(!i&&!this.isInPresentationMode){var l=t.offsetLeft+t.clientLeft,s=l+t.clientWidth,c=this.container,u=c.scrollLeft,d=c.clientWidth;(this._isScrollModeHorizontal||l<u||s>u+d)&&(i={left:0,top:0})}p(_(a.prototype),"_scrollIntoView",this).call(this,{pageDiv:t,pageSpot:i,pageNumber:r})}},{key:"_getVisiblePages",value:function(){return this.isInPresentationMode?this._getCurrentVisiblePage():p(_(a.prototype),"_getVisiblePages",this).call(this)}},{key:"_updateHelper",value:function(e){if(!this.isInPresentationMode){var t,a=this._currentPageNumber,n=!1,i=r(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.percent<100)break;if(o.id===a){n=!0;break}}}catch(l){i.e(l)}finally{i.f()}n||(a=e[0].id),this._setCurrentPageNumber(a)}}},{key:"_viewerElement",get:function(){return(0,i.shadow)(this,"_viewerElement",this.viewer)}}]),a}(n.BaseViewer);t.PDFViewer=x}])}))},fbc4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel-group"},[a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("error")}}},[e._m(0),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 异常数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.errorCount,duration:2600}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 异常金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.errorAmount+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.errorAmount,decimals:e.errorAmountDecimal,duration:2600}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("unOpen")}}},[e._m(1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 未开数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.unOpenCount,duration:2600}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 未开金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.unOpenAmount+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.unOpenAmount,decimals:e.unOpenAmountDecimal,duration:2600}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("open")}}},[e._m(2),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 已开数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.openCount,duration:2600}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 已开金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.openAmount+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.openAmount,decimals:e.openAmountDecimal,duration:2600}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("cancel")}}},[e._m(3),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 作废数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.cancelCount,duration:3e3}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 作废金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.cancelAmount+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.cancelAmount,decimals:e.cancelAmountDecimal,duration:3e3}})],1)],1)])]),a("div",{staticClass:"card-panel-col"},[a("div",{staticClass:"card-panel",on:{click:function(t){return e.handleSetBarChartData("red")}}},[e._m(4),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 红冲数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.redCount,duration:3200}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(" 红冲金额 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.statisticsData.redAmount+"",placement:"bottom"}},[a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.statisticsData.redAmount,decimals:e.redAmountDecimal,duration:3200}})],1)],1)])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-panel-icon-wrapper icon-error-red"},[a("i",{staticClass:"icon icon-yichang icon-font"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-panel-icon-wrapper icon-un-open"},[a("i",{staticClass:"icon icon-weikaipiao icon-font"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-panel-icon-wrapper icon-open"},[a("i",{staticClass:"icon icon-kaipiao icon-font"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-panel-icon-wrapper icon-cancel"},[a("i",{staticClass:"icon icon-zuofei icon-font"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-panel-icon-wrapper icon-red"},[a("i",{staticClass:"icon icon-hongchong icon-font"})])}],o=a("ec1b"),r=a.n(o),l={components:{CountTo:r.a},props:{statisticsData:{type:Object,default:function(){return{}}}},computed:{errorAmountDecimal:function(){var e=this.statisticsData.errorAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},unOpenAmountDecimal:function(){var e=this.statisticsData.unOpenAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},openAmountDecimal:function(){var e=this.statisticsData.openAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},cancelAmountDecimal:function(){var e=this.statisticsData.cancelAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0},redAmountDecimal:function(){var e=this.statisticsData.redAmount;return(""+e).split(".").length>1?(""+e).split(".").pop().length:0}},methods:{handleSetBarChartData:function(e){"error"==e?this.$router.push({path:"output/errorbill"}):"unOpen"==e?this.$router.push({path:"output/bill"}):("open"==e?this.$router.push({name:"Invoice",params:{redFlag:"0",cancelFlag:"0"}}):"cancel"==e?this.$router.push({name:"Invoice",params:{cancelFlag:"1"}}):"red"==e&&this.$router.push({name:"Invoice",params:{redFlag:"1"}}),this.$emit("handleSetBarChartData",e))}}},s=l,c=(a("0a12"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"cdfe2c7e",null);t["default"]=u.exports},fbfd:function(e,t,a){"use strict";a("07b6")},fc6c:function(e,t,a){},fd22:function(e,t,a){"use strict";a("e795")},fdad:function(e,t,a){},feb2:function(e,t,a){"use strict";a.r(t);var n=a("ed08");t["default"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},initListener:function(){var e=this;this.$_resizeHandler=Object(n["d"])((function(){e.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var e=this.chart;e&&e.resize()}}}},fec2:function(e,t,a){},ff13:function(e,t,a){"use strict";a("2a6e")},ff2e9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":"",id:"invoiceManagerModal"},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticClass:"clearfix"}),a("div",{staticClass:"invoiceManger-body"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"110px",rules:e.rules}},[a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",{staticStyle:{display:"flex"}},[a("el-col",{attrs:{span:7}}),a("el-col",{attrs:{span:10}},[a("el-row",[a("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s(e.fplxdesc))])],1)],1),a("el-col",{attrs:{span:7}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票代码",prop:"invCode"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票号码",prop:"invNo"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票日期",prop:"invDate"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.invDate,callback:function(t){e.$set(e.form,"invDate","string"===typeof t?t.trim():t)},expression:"form.invDate"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机打代码",prop:"invCode"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.invCode,callback:function(t){e.$set(e.form,"invCode","string"===typeof t?t.trim():t)},expression:"form.invCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机打号码",prop:"invNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.invNo,callback:function(t){e.$set(e.form,"invNo","string"===typeof t?t.trim():t)},expression:"form.invNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机器编码",prop:"machineNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.machineNo,callback:function(t){e.$set(e.form,"machineNo","string"===typeof t?t.trim():t)},expression:"form.machineNo"}})],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税控码"}},[a("el-input",{staticStyle:{height:"114px"},attrs:{type:"textarea",size:"mini",readonly:""},model:{value:e.form.pwdCode,callback:function(t){e.$set(e.form,"pwdCode",t)},expression:"form.pwdCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买方名称",prop:"buyName"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyName,callback:function(t){e.$set(e.form,"buyName","string"===typeof t?t.trim():t)},expression:"form.buyName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"buyTaxNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.buyTaxNo,callback:function(t){e.$set(e.form,"buyTaxNo","string"===typeof t?t.trim():t)},expression:"form.buyTaxNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.vehicleType,callback:function(t){e.$set(e.form,"vehicleType","string"===typeof t?t.trim():t)},expression:"form.vehicleType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"厂牌型号",prop:"factoryNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.factoryNo,callback:function(t){e.$set(e.form,"factoryNo","string"===typeof t?t.trim():t)},expression:"form.factoryNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产地",prop:"origin"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.origin,callback:function(t){e.$set(e.form,"origin","string"===typeof t?t.trim():t)},expression:"form.origin"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合格证号",prop:"eligibilityNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.eligibilityNo,callback:function(t){e.$set(e.form,"eligibilityNo","string"===typeof t?t.trim():t)},expression:"form.eligibilityNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"进口证明书号",prop:"importCertificateNumber"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.importCertificateNumber,callback:function(t){e.$set(e.form,"importCertificateNumber","string"===typeof t?t.trim():t)},expression:"form.importCertificateNumber"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商检单号",prop:"commodityInspectionNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.commodityInspectionNo,callback:function(t){e.$set(e.form,"commodityInspectionNo","string"===typeof t?t.trim():t)},expression:"form.commodityInspectionNo"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号码",prop:"engineNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.engineNo,callback:function(t){e.$set(e.form,"engineNo","string"===typeof t?t.trim():t)},expression:"form.engineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆识别代号",prop:"vehicleIdentificationCode"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.vehicleIdentificationCode,callback:function(t){e.$set(e.form,"vehicleIdentificationCode","string"===typeof t?t.trim():t)},expression:"form.vehicleIdentificationCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"价税合计"}},[a("el-input",{attrs:{size:"mini",readonly:""},on:{change:e.totalAmountChange},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount","string"===typeof t?t.trim():t)},expression:"form.totalAmount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"大写￥"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.totalMoneyUp,callback:function(t){e.$set(e.form,"totalMoneyUp","string"===typeof t?t.trim():t)},expression:"form.totalMoneyUp"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销货单位名称",prop:"sellName"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellName,callback:function(t){e.$set(e.form,"sellName","string"===typeof t?t.trim():t)},expression:"form.sellName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"sellTel"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellTel,callback:function(t){e.$set(e.form,"sellTel","string"===typeof t?t.trim():t)},expression:"form.sellTel"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"纳税人识别号",prop:"sellTaxNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellTaxNo,callback:function(t){e.$set(e.form,"sellTaxNo","string"===typeof t?t.trim():t)},expression:"form.sellTaxNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"账号",prop:"sellAccount"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellAccount,callback:function(t){e.$set(e.form,"sellAccount","string"===typeof t?t.trim():t)},expression:"form.sellAccount"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址",prop:"sellAddr"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellAddr,callback:function(t){e.$set(e.form,"sellAddr","string"===typeof t?t.trim():t)},expression:"form.sellAddr"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开户银行",prop:"sellBank"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.sellBank,callback:function(t){e.$set(e.form,"sellBank","string"===typeof t?t.trim():t)},expression:"form.sellBank"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"80px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税率或征收率",prop:"rate"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择税率",readonly:""},model:{value:e.form.rate,callback:function(t){e.$set(e.form,"rate",t)},expression:"form.rate"}},e._l(e.rateOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"增值税税额",prop:"totalTaxAmount"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalTaxAmount,callback:function(t){e.$set(e.form,"totalTaxAmount","string"===typeof t?t.trim():t)},expression:"form.totalTaxAmount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"主管税务机关及代码"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.taxAuthorityName,callback:function(t){e.$set(e.form,"taxAuthorityName","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityName"}}),a("br"),a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.taxAuthorityCode,callback:function(t){e.$set(e.form,"taxAuthorityCode","string"===typeof t?t.trim():t)},expression:"form.taxAuthorityCode"}})],1)],1)],1),a("el-row",{staticClass:"public-row",staticStyle:{display:"flex","justify-content":"center",height:"40px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"不含税价",prop:"totalAmountWithoutTax"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.totalAmountWithoutTax,callback:function(t){e.$set(e.form,"totalAmountWithoutTax","string"===typeof t?t.trim():t)},expression:"form.totalAmountWithoutTax"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"完税凭证号码",prop:"completionVoucherNo"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.form.completionVoucherNo,callback:function(t){e.$set(e.form,"completionVoucherNo","string"===typeof t?t.trim():t)},expression:"form.completionVoucherNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"吨位",prop:"tonnage"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.tonnage,callback:function(t){e.$set(e.form,"tonnage","string"===typeof t?t.trim():t)},expression:"form.tonnage"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"限乘人数",prop:"limitedNumberOfPassengers"}},[a("el-input",{attrs:{size:"mini",readonly:""},nativeOn:{keyup:function(t){return e.validIsNumber(t)}},model:{value:e.form.limitedNumberOfPassengers,callback:function(t){e.$set(e.form,"limitedNumberOfPassengers","string"===typeof t?t.trim():t)},expression:"form.limitedNumberOfPassengers"}})],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"5px",padding:"0 10px 10px 10px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产企业名称",prop:""}},[a("el-input",{attrs:{placeholder:"",readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票人",prop:"invoicer"}},[a("el-input",{attrs:{maxlength:10,readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.invoicer,callback:function(t){e.$set(e.form,"invoicer","string"===typeof t?t.trim():t)},expression:"form.invoicer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{maxlength:10,readonly:""},nativeOn:{keyup:function(t){return e.CValid(t)}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note","string"===typeof t?t.trim():t)},expression:"form.note"}})],1)],1)],1)],1)],1)])],1)},i=[],o=a("ade3"),r=(a("b680"),a("d3b7"),a("25f0"),a("d4fc")),l=a("ed08"),s=(a("c38a"),{name:"historyVehicleDetailShowModal",props:{},data:function(){var e;return{form:(e={invType:"",blockChain:null,buyAddrTel:null,buyBankAccount:null,buyName:null,buyTaxNo:null,cashier:null,checkCode:null,checkMsg:null,checked:null,checker:null,createBy:null,id:null,invCode:null,invDate:null,invNo:null},Object(o["a"])(e,"invType",null),Object(o["a"])(e,"invoicer",null),Object(o["a"])(e,"machineNo",null),Object(o["a"])(e,"note",null),Object(o["a"])(e,"sellName",null),Object(o["a"])(e,"sellTaxNo",null),Object(o["a"])(e,"sellAddr",null),Object(o["a"])(e,"sellBank",null),Object(o["a"])(e,"sellTel",null),Object(o["a"])(e,"sellAccount",null),Object(o["a"])(e,"sourceInvCode",null),Object(o["a"])(e,"sourceInvNo",null),Object(o["a"])(e,"state",null),Object(o["a"])(e,"totalAmount",null),Object(o["a"])(e,"totalAmountWithoutTax",null),Object(o["a"])(e,"totalMoneyUp",null),Object(o["a"])(e,"totalTaxAmount",null),Object(o["a"])(e,"updateBy",null),Object(o["a"])(e,"updateTime",null),Object(o["a"])(e,"vehicleType",null),Object(o["a"])(e,"factoryNo",null),Object(o["a"])(e,"origin",null),Object(o["a"])(e,"eligibilityNo",null),Object(o["a"])(e,"importCertificateNumber",null),Object(o["a"])(e,"commodityInspectionNo",null),Object(o["a"])(e,"engineNo",null),Object(o["a"])(e,"vehicleIdentificationCode",null),Object(o["a"])(e,"rate",null),Object(o["a"])(e,"taxAuthorityName",null),Object(o["a"])(e,"taxAuthorityCode",null),Object(o["a"])(e,"completionVoucherNo",null),Object(o["a"])(e,"tonnage",null),Object(o["a"])(e,"limitedNumberOfPassengers",null),e),fplxdesc:"机动车销售统一发票",open:!1,title:"发票详情",invTypeOptions:[],stateOptions:[],checkedOptions:[],dataSourceOptions:[],blockChainOptions:[],rateOptions:[],rules:{buyName:[],buyTaxNo:[],vehicleType:[],factoryNo:[],origin:[]}}},watch:{},computed:{},created:function(){var e=this;this.getDicts("income_check_inv_type").then((function(t){e.invTypeOptions=t.data})),this.getDicts("income_inv_status").then((function(t){e.stateOptions=t.data})),this.getDicts("income_checked").then((function(t){e.checkedOptions=t.data})),this.getDicts("income_source").then((function(t){e.dataSourceOptions=t.data})),this.getDicts("sys_yes_no_num").then((function(t){e.blockChainOptions=t.data})),this.getDicts("tax_rate").then((function(t){e.rateOptions=t.data}))},mounted:function(){},methods:{fillInvoiceDialog:function(e){var t=this;return Object(r["e"])(e).then((function(e){var a=e.data,n=a.details[0];for(var i in t.form=Object(l["e"])(a),null!=a.sellBankAccount&&(t.form.sellBank=a.sellBankAccount.split(" ")[0],t.form.sellAccount=a.sellBankAccount.split(" ")[1]),null!=a.sellAddrTel&&(t.form.sellAddr=a.sellAddrTel.split(" ")[0],t.form.sellTel=a.sellAddrTel.split(" ")[1]),delete t.form.details,n)t.form[i]=n[i];t.form.totalMoneyUp=t.swapper(t.form.totalAmount),t.form.rate+="",t.open=!0,t.title="发票详情",t.$nextTick((function(){t.$refs.form.clearValidate()}))}))},transformRate:function(e){return void 0==e.rate||null==e.rate?"":(e.rate=e.rate.toFixed(0),"0"==e.rate?"0"==e.preferentialFlag?e.rate.toString()+"%":e.preferentialType:e.rate.toString()+"%")},openDialog:function(){this.open=!0,this.title="添加单据",this.$refs.form.clearValidate()},totalAmountChange:function(){this.form.totalMoneyUp=this.swapper(this.form.totalAmount)}}}),c=s,u=(a("7fa7"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"2bc6d2fb",null);t["default"]=d.exports},ff3f:function(e,t,a){"use strict";a("81e2")},ffa8:function(e,t,a){"use strict";a("809a")}}]);